# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000010	  0.000010	diff=6.17714e-11
 -0.000011	 -0.000011	diff=6.72696e-11
  0.000004	  0.000004	diff=3.15016e-10
 -0.000003	 -0.000003	diff=2.69429e-10
  0.000000	  0.000000	diff=4.3928e-13
  0.000001	  0.000001	diff=4.75354e-12
  0.004421	  0.004421	diff=1.55788e-07
  0.006020	  0.006021	diff=9.30088e-08
 -0.000005	 -0.000005	diff=6.28422e-11
  0.000013	  0.000013	diff=1.74402e-11
 -0.000006	 -0.000006	diff=2.94658e-10
  0.000000	  0.000000	diff=4.27279e-11
 -0.000000	 -0.000000	diff=1.1015e-12
 -0.000001	 -0.000001	diff=1.29598e-12
 -0.000831	 -0.000831	diff=8.15894e-08
 -0.003179	 -0.003179	diff=4.09838e-08
 -0.000000	 -0.000000	diff=2.11932e-12
  0.000000	  0.000000	diff=2.29118e-13
 -0.000000	 -0.000000	diff=2.59559e-13
  0.000000	  0.000000	diff=4.41802e-15
  0.000000	  0.000000	diff=6.62351e-13
 -0.000000	 -0.000000	diff=4.75849e-13
 -0.000051	 -0.000051	diff=4.97827e-08
 -0.000075	 -0.000075	diff=2.70437e-11
  0.000000	  0.000000	diff=3.46346e-13
 -0.000000	 -0.000000	diff=5.79698e-13
  0.000000	  0.000000	diff=4.90412e-13
 -0.000000	 -0.000000	diff=2.13149e-13
 -0.000000	 -0.000000	diff=2.15859e-13
  0.000000	  0.000000	diff=1.96564e-14
  0.000012	  0.000012	diff=1.31192e-11
  0.000041	  0.000041	diff=3.99654e-08
  local_diff=4.62302e-07
# W_tgt{1}, [8 6]
 -0.000011	 -0.000011	diff=2.40903e-11
  0.000008	  0.000008	diff=6.29277e-11
 -0.000004	 -0.000004	diff=8.3275e-10
  0.000009	  0.000009	diff=2.96192e-10
  0.000000	  0.000000	diff=4.3047e-12
  0.000018	  0.000018	diff=2.80489e-13
 -0.003969	 -0.003969	diff=1.05323e-07
 -0.011719	 -0.011719	diff=3.27218e-08
 -0.000017	 -0.000017	diff=7.50905e-12
  0.000020	  0.000020	diff=3.55317e-11
 -0.000025	 -0.000025	diff=1.06332e-09
  0.000011	  0.000011	diff=1.28662e-09
 -0.000028	 -0.000028	diff=6.27872e-11
  0.000031	  0.000031	diff=9.20014e-12
 -0.008540	 -0.008540	diff=4.35927e-07
 -0.000826	 -0.000826	diff=3.14139e-07
 -0.000000	 -0.000000	diff=5.01594e-13
  0.000000	  0.000000	diff=5.78937e-13
 -0.000001	 -0.000001	diff=1.13911e-12
 -0.000000	 -0.000000	diff=3.4278e-13
 -0.000001	 -0.000001	diff=4.56117e-14
  0.000000	  0.000000	diff=3.65961e-13
 -0.000200	 -0.000200	diff=2.62442e-07
  0.000071	  0.000071	diff=1.39549e-08
  0.000000	  0.000000	diff=4.45994e-13
  0.000000	  0.000000	diff=8.10606e-13
  0.000000	  0.000000	diff=5.17207e-14
  0.000000	  0.000000	diff=1.96545e-13
  0.000000	  0.000000	diff=4.76632e-14
 -0.000000	 -0.000000	diff=2.93701e-13
  0.000123	  0.000123	diff=2.06469e-09
  0.000010	  0.000010	diff=1.85491e-07
 -0.000000	 -0.000000	diff=3.89233e-13
  0.000000	  0.000000	diff=2.29414e-13
 -0.000001	 -0.000001	diff=7.51087e-12
  0.000000	  0.000000	diff=1.06461e-12
 -0.000001	 -0.000001	diff=1.01553e-11
  0.000001	  0.000001	diff=5.14425e-13
 -0.000322	 -0.000321	diff=2.08661e-07
 -0.000175	 -0.000175	diff=2.39493e-08
  0.000000	  0.000000	diff=1.16091e-13
 -0.000000	 -0.000000	diff=4.31763e-13
  0.000001	  0.000001	diff=1.45715e-12
 -0.000000	 -0.000000	diff=6.29152e-13
  0.000000	  0.000000	diff=3.01951e-13
 -0.000000	 -0.000000	diff=4.29796e-13
  0.000170	  0.000170	diff=3.03361e-09
  0.000156	  0.000156	diff=2.24839e-07
  local_diff=1.81626e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001416	  0.001416	diff=2.24161e-07
  0.000149	  0.000148	diff=4.83014e-07
  0.000265	  0.000265	diff=1.04332e-07
  0.001956	  0.001955	diff=1.18718e-06
  local_diff=1.99869e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001049	  0.001049	diff=1.04602e-07
 -0.000958	 -0.000958	diff=6.36147e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003521	 -0.003520	diff=4.02644e-07
 -0.000193	 -0.000193	diff=2.0067e-07
 -0.004962	 -0.004962	diff=3.19252e-07
 -0.001412	 -0.001412	diff=3.428e-07
  local_diff=2.00611e-06
# W_soft, [5 2]
  0.007849	  0.007849	diff=6.5062e-08
  0.007849	  0.007849	diff=6.50646e-08
  0.004800	  0.004799	diff=6.50659e-08
 -0.013796	 -0.013797	diff=6.50577e-08
 -0.006701	 -0.006701	diff=6.50775e-08
 -0.002503	 -0.002503	diff=1.97754e-08
 -0.002503	 -0.002503	diff=1.97757e-08
 -0.004838	 -0.004839	diff=1.97772e-08
  0.007189	  0.007189	diff=1.97739e-08
  0.002656	  0.002656	diff=1.97791e-08
  local_diff=4.24209e-07
# Num params=110, abs_diff=6.70758e-06
Elapsed time is 1.111678 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.01201e-12
 -0.000000	 -0.000000	diff=6.35909e-13
  0.000000	  0.000000	diff=1.04485e-11
 -0.000000	 -0.000000	diff=1.67593e-12
  0.000001	  0.000001	diff=1.9472e-12
  0.000000	  0.000000	diff=1.72778e-13
 -0.000150	 -0.000150	diff=1.6814e-10
 -0.000020	 -0.000020	diff=2.66738e-10
 -0.000001	 -0.000001	diff=2.50322e-12
  0.000000	  0.000000	diff=9.02429e-13
 -0.000000	 -0.000000	diff=1.98496e-11
  0.000000	  0.000000	diff=2.57834e-12
 -0.000001	 -0.000001	diff=5.14255e-12
 -0.000000	 -0.000000	diff=1.14396e-12
  0.000218	  0.000218	diff=1.87396e-10
  0.000030	  0.000030	diff=5.61483e-10
 -0.000000	 -0.000000	diff=6.42337e-13
  0.000000	  0.000000	diff=4.63791e-13
 -0.000000	 -0.000000	diff=4.84313e-13
  0.000000	  0.000000	diff=7.00858e-13
 -0.000000	 -0.000000	diff=4.78397e-13
 -0.000000	 -0.000000	diff=1.0118e-13
  0.000004	  0.000004	diff=5.00007e-09
  0.000001	  0.000001	diff=5.07508e-12
  0.000000	  0.000000	diff=3.66703e-13
 -0.000000	 -0.000000	diff=4.97045e-14
  0.000000	  0.000000	diff=6.06628e-14
 -0.000000	 -0.000000	diff=8.31975e-13
  0.000000	  0.000000	diff=5.95507e-14
  0.000000	  0.000000	diff=5.59007e-13
 -0.000003	 -0.000003	diff=3.08146e-11
 -0.000001	 -0.000001	diff=5.66983e-10
  local_diff=6.84051e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=8.03802e-14
 -0.000000	 -0.000000	diff=9.53185e-13
 -0.000000	 -0.000000	diff=7.28831e-13
 -0.000000	 -0.000000	diff=3.31755e-14
  0.000000	  0.000000	diff=9.56569e-13
 -0.000000	 -0.000000	diff=8.66522e-14
  0.000154	  0.000154	diff=5.96133e-11
 -0.000141	 -0.000141	diff=8.25531e-11
  0.000000	  0.000000	diff=4.29653e-13
  0.000000	  0.000000	diff=3.05068e-13
  0.000000	  0.000000	diff=2.04698e-13
  0.000000	  0.000000	diff=1.31599e-13
 -0.000000	 -0.000000	diff=2.76807e-13
  0.000000	  0.000000	diff=1.29988e-13
 -0.000126	 -0.000126	diff=3.95108e-11
  0.000117	  0.000117	diff=5.44827e-11
 -0.000000	 -0.000000	diff=4.19572e-13
 -0.000000	 -0.000000	diff=2.81248e-13
 -0.000000	 -0.000000	diff=4.47843e-13
 -0.000000	 -0.000000	diff=1.26669e-13
  0.000000	  0.000000	diff=9.66914e-13
 -0.000000	 -0.000000	diff=6.50479e-13
  0.000003	  0.000003	diff=4.50443e-09
 -0.000003	 -0.000003	diff=4.91204e-14
  0.000000	  0.000000	diff=1.25299e-13
  0.000000	  0.000000	diff=7.31938e-13
  0.000000	  0.000000	diff=4.39996e-13
  0.000000	  0.000000	diff=2.79286e-13
 -0.000000	 -0.000000	diff=1.28328e-14
  0.000000	  0.000000	diff=1.31276e-12
 -0.000004	 -0.000004	diff=3.12506e-13
  0.000003	  0.000003	diff=4.67157e-09
  local_diff=9.42263e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.1358e-12
  0.000000	  0.000000	diff=7.17355e-13
 -0.000000	 -0.000000	diff=3.55204e-12
 -0.000000	 -0.000000	diff=2.5533e-12
 -0.000000	 -0.000000	diff=1.15237e-13
  0.000000	  0.000000	diff=8.5841e-13
  0.000075	  0.000075	diff=3.31281e-10
 -0.000089	 -0.000089	diff=6.88033e-10
  0.000000	  0.000000	diff=3.59578e-13
 -0.000000	 -0.000000	diff=3.93993e-13
  0.000000	  0.000000	diff=2.05753e-11
  0.000000	  0.000000	diff=1.09593e-11
  0.000000	  0.000000	diff=1.59798e-12
 -0.000000	 -0.000000	diff=8.16826e-13
 -0.000200	 -0.000200	diff=1.91575e-09
  0.000218	  0.000218	diff=1.40996e-09
 -0.000000	 -0.000000	diff=2.48619e-13
  0.000000	  0.000000	diff=6.71826e-13
  0.000000	  0.000000	diff=9.36701e-13
 -0.000000	 -0.000000	diff=2.57788e-13
  0.000000	  0.000000	diff=1.30817e-13
  0.000000	  0.000000	diff=4.0149e-15
 -0.000000	 -0.000000	diff=1.9846e-12
  0.000000	  0.000000	diff=7.72185e-15
  0.000000	  0.000000	diff=9.7026e-14
 -0.000000	 -0.000000	diff=1.07181e-13
 -0.000000	 -0.000000	diff=2.49916e-13
  0.000000	  0.000000	diff=3.32967e-13
 -0.000000	 -0.000000	diff=1.64263e-13
 -0.000000	 -0.000000	diff=3.16626e-13
  0.000000	  0.000000	diff=5.38418e-13
 -0.000000	 -0.000000	diff=5.78386e-12
  0.000000	  0.000000	diff=3.21581e-13
 -0.000000	 -0.000000	diff=2.1214e-13
  0.000000	  0.000000	diff=1.09172e-12
  0.000000	  0.000000	diff=6.37362e-13
  0.000000	  0.000000	diff=6.32383e-13
 -0.000000	 -0.000000	diff=3.52803e-13
 -0.000006	 -0.000006	diff=1.72576e-08
  0.000006	  0.000006	diff=2.70846e-10
 -0.000000	 -0.000000	diff=7.56398e-13
  0.000000	  0.000000	diff=1.32195e-12
 -0.000000	 -0.000000	diff=6.8749e-14
 -0.000000	 -0.000000	diff=1.47369e-12
 -0.000000	 -0.000000	diff=4.59041e-13
  0.000000	  0.000000	diff=3.97613e-13
  0.000003	  0.000003	diff=1.66925e-10
 -0.000003	 -0.000003	diff=4.75861e-09
  local_diff=2.68622e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=8.65635e-13
 -0.000000	 -0.000000	diff=4.34091e-13
 -0.000000	 -0.000000	diff=7.33809e-14
 -0.000000	 -0.000000	diff=1.18128e-12
 -0.000000	 -0.000000	diff=5.30703e-14
 -0.000000	 -0.000000	diff=1.62783e-13
  0.000182	  0.000182	diff=3.50528e-09
 -0.000127	 -0.000127	diff=2.63484e-09
  0.000000	  0.000000	diff=4.47805e-14
 -0.000000	 -0.000000	diff=2.77995e-14
 -0.000000	 -0.000000	diff=4.2504e-14
 -0.000000	 -0.000000	diff=8.06954e-13
 -0.000000	 -0.000000	diff=5.8054e-13
 -0.000000	 -0.000000	diff=2.58382e-13
  0.000015	  0.000015	diff=2.75182e-09
 -0.000013	 -0.000013	diff=1.13536e-09
  0.000000	  0.000000	diff=1.48656e-12
 -0.000000	 -0.000000	diff=5.3465e-13
 -0.000000	 -0.000000	diff=5.83813e-13
 -0.000000	 -0.000000	diff=8.1559e-14
 -0.000000	 -0.000000	diff=5.2296e-14
 -0.000000	 -0.000000	diff=2.16327e-13
  0.000011	  0.000011	diff=3.31133e-08
 -0.000008	 -0.000008	diff=3.27926e-10
 -0.000000	 -0.000000	diff=6.03095e-13
  0.000000	  0.000000	diff=3.68365e-13
  0.000000	  0.000000	diff=1.76702e-13
  0.000000	  0.000000	diff=2.50519e-13
  0.000000	  0.000000	diff=1.74047e-13
  0.000000	  0.000000	diff=6.5127e-13
 -0.000016	 -0.000016	diff=9.35584e-11
  0.000010	  0.000010	diff=1.98404e-08
  local_diff=6.34122e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000075	  0.000075	diff=2.82593e-08
 -0.000092	 -0.000092	diff=9.28177e-08
  0.000074	  0.000074	diff=2.53399e-08
 -0.000081	 -0.000081	diff=7.86173e-08
  local_diff=2.25034e-07
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000022	  0.000022	diff=6.25761e-08
 -0.000053	 -0.000053	diff=2.94624e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000070	 -0.000070	diff=9.6036e-08
 -0.000063	 -0.000063	diff=4.16344e-08
  0.000021	  0.000021	diff=4.15104e-08
 -0.000032	 -0.000032	diff=2.02925e-08
  local_diff=2.91512e-07
# W_soft, [5 2]
 -0.000086	 -0.000086	diff=8.19208e-12
 -0.000086	 -0.000086	diff=7.88968e-12
 -0.000024	 -0.000024	diff=8.03629e-12
  0.000187	  0.000187	diff=8.942e-12
  0.000009	  0.000009	diff=8.86197e-12
  0.000190	  0.000190	diff=3.24091e-11
  0.000190	  0.000190	diff=3.27182e-11
  0.000086	  0.000086	diff=3.28738e-11
 -0.000414	 -0.000414	diff=3.26647e-11
 -0.000051	 -0.000051	diff=3.27591e-11
  local_diff=2.05347e-10
# Num params=174, abs_diff=6.23289e-07
Elapsed time is 1.997121 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.70699e-13
  0.000000	  0.000000	diff=1.76517e-13
  0.000000	  0.000000	diff=1.4175e-11
  0.000000	  0.000000	diff=1.21093e-12
  0.000000	  0.000000	diff=2.94252e-12
  0.000000	  0.000000	diff=3.72169e-13
 -0.000088	 -0.000088	diff=9.05964e-10
  0.000004	  0.000004	diff=3.24596e-11
 -0.000000	 -0.000000	diff=1.47084e-12
  0.000000	  0.000000	diff=3.51307e-13
 -0.000000	 -0.000000	diff=2.88642e-11
  0.000000	  0.000000	diff=2.9091e-12
 -0.000000	 -0.000000	diff=4.0228e-12
 -0.000000	 -0.000000	diff=1.74188e-12
  0.000076	  0.000076	diff=1.09826e-09
  0.000034	  0.000034	diff=7.39404e-10
 -0.000000	 -0.000000	diff=5.59183e-13
  0.000000	  0.000000	diff=1.05866e-13
 -0.000000	 -0.000000	diff=1.89004e-13
  0.000000	  0.000000	diff=5.61954e-13
 -0.000000	 -0.000000	diff=1.62299e-13
 -0.000000	 -0.000000	diff=2.25475e-13
  0.000002	  0.000002	diff=4.92705e-09
  0.000000	  0.000000	diff=6.29919e-12
  0.000000	  0.000000	diff=1.48164e-12
 -0.000000	 -0.000000	diff=7.9407e-13
  0.000000	  0.000000	diff=9.11813e-14
 -0.000000	 -0.000000	diff=1.78877e-13
  0.000000	  0.000000	diff=1.18734e-13
  0.000000	  0.000000	diff=6.98045e-13
 -0.000002	 -0.000002	diff=3.65579e-11
 -0.000001	 -0.000001	diff=4.20082e-10
  local_diff=8.23016e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.39122e-13
 -0.000000	 -0.000000	diff=8.35316e-13
 -0.000000	 -0.000000	diff=7.53571e-13
 -0.000000	 -0.000000	diff=1.04244e-13
  0.000000	  0.000000	diff=7.26414e-15
 -0.000000	 -0.000000	diff=3.27244e-13
  0.000111	  0.000111	diff=7.47341e-11
 -0.000035	 -0.000035	diff=4.90506e-11
  0.000000	  0.000000	diff=3.64479e-13
  0.000000	  0.000000	diff=9.94459e-14
  0.000000	  0.000000	diff=9.29944e-13
  0.000000	  0.000000	diff=5.39092e-13
 -0.000000	 -0.000000	diff=1.08016e-13
  0.000000	  0.000000	diff=2.46041e-13
 -0.000163	 -0.000163	diff=7.90881e-11
  0.000135	  0.000135	diff=9.3633e-11
 -0.000000	 -0.000000	diff=1.15611e-13
 -0.000000	 -0.000000	diff=6.17457e-13
 -0.000000	 -0.000000	diff=2.26721e-13
 -0.000000	 -0.000000	diff=2.51084e-13
  0.000000	  0.000000	diff=7.79556e-13
 -0.000000	 -0.000000	diff=5.86092e-13
  0.000003	  0.000003	diff=4.91467e-09
 -0.000001	 -0.000001	diff=6.2867e-13
  0.000000	  0.000000	diff=1.39697e-13
  0.000000	  0.000000	diff=9.37538e-13
  0.000000	  0.000000	diff=4.67156e-14
  0.000000	  0.000000	diff=3.52655e-13
 -0.000000	 -0.000000	diff=2.00908e-13
  0.000000	  0.000000	diff=1.70998e-13
 -0.000004	 -0.000004	diff=8.47843e-13
  0.000002	  0.000002	diff=4.77479e-09
  local_diff=9.99663e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.59023e-13
  0.000000	  0.000000	diff=2.58292e-13
 -0.000000	 -0.000000	diff=3.58941e-12
 -0.000000	 -0.000000	diff=4.98908e-12
 -0.000000	 -0.000000	diff=1.00825e-12
  0.000000	  0.000000	diff=3.37876e-14
  0.000042	  0.000042	diff=2.90536e-10
 -0.000112	 -0.000112	diff=1.38789e-09
  0.000000	  0.000000	diff=5.45505e-13
 -0.000000	 -0.000000	diff=1.89052e-12
  0.000000	  0.000000	diff=2.94054e-11
  0.000000	  0.000000	diff=2.19001e-11
  0.000000	  0.000000	diff=1.73231e-12
 -0.000000	 -0.000000	diff=4.31294e-13
 -0.000158	 -0.000158	diff=2.53594e-09
  0.000233	  0.000233	diff=1.98497e-09
 -0.000000	 -0.000000	diff=2.98429e-13
  0.000000	  0.000000	diff=9.2267e-14
  0.000000	  0.000000	diff=3.69807e-13
 -0.000000	 -0.000000	diff=8.34184e-13
  0.000000	  0.000000	diff=9.33658e-13
  0.000000	  0.000000	diff=1.59363e-13
 -0.000000	 -0.000000	diff=1.21301e-12
  0.000000	  0.000000	diff=3.80376e-13
  0.000000	  0.000000	diff=1.52892e-13
 -0.000000	 -0.000000	diff=1.60575e-13
 -0.000000	 -0.000000	diff=5.20818e-13
  0.000000	  0.000000	diff=8.54171e-14
 -0.000000	 -0.000000	diff=1.17125e-12
  0.000000	  0.000000	diff=8.69386e-13
  0.000000	  0.000000	diff=1.38672e-13
 -0.000000	 -0.000000	diff=9.15253e-12
  0.000000	  0.000000	diff=4.43923e-13
 -0.000000	 -0.000000	diff=8.00218e-14
  0.000000	  0.000000	diff=1.96003e-13
  0.000000	  0.000000	diff=4.49582e-13
  0.000000	  0.000000	diff=2.4237e-13
 -0.000000	 -0.000000	diff=4.30746e-13
 -0.000004	 -0.000004	diff=1.16943e-08
  0.000005	  0.000005	diff=3.52506e-10
 -0.000000	 -0.000000	diff=9.6141e-14
  0.000000	  0.000000	diff=9.16034e-14
 -0.000000	 -0.000000	diff=5.0626e-14
 -0.000000	 -0.000000	diff=4.09526e-13
 -0.000000	 -0.000000	diff=1.91686e-13
  0.000000	  0.000000	diff=2.76682e-13
  0.000002	  0.000002	diff=1.09243e-10
 -0.000004	 -0.000004	diff=6.36185e-09
  local_diff=2.48032e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.01695e-12
 -0.000000	 -0.000000	diff=2.79277e-13
 -0.000000	 -0.000000	diff=4.14675e-13
 -0.000000	 -0.000000	diff=9.96538e-13
 -0.000000	 -0.000000	diff=1.59943e-13
 -0.000000	 -0.000000	diff=5.17265e-13
  0.000104	  0.000104	diff=2.3385e-09
  0.000012	  0.000012	diff=2.40086e-09
  0.000000	  0.000000	diff=2.45358e-13
 -0.000000	 -0.000000	diff=2.4845e-13
 -0.000000	 -0.000000	diff=5.49966e-13
 -0.000000	 -0.000000	diff=8.73966e-13
 -0.000000	 -0.000000	diff=1.00127e-13
 -0.000000	 -0.000000	diff=4.30607e-13
  0.000022	  0.000022	diff=4.77782e-09
 -0.000020	 -0.000020	diff=2.2462e-09
  0.000000	  0.000000	diff=1.13921e-13
  0.000000	  0.000000	diff=7.60806e-13
 -0.000000	 -0.000000	diff=1.66555e-13
 -0.000000	 -0.000000	diff=7.03774e-13
 -0.000000	 -0.000000	diff=5.38458e-13
 -0.000000	 -0.000000	diff=5.65232e-13
  0.000009	  0.000009	diff=2.80555e-08
 -0.000003	 -0.000003	diff=2.42601e-10
 -0.000000	 -0.000000	diff=1.4268e-12
  0.000000	  0.000000	diff=2.62208e-13
  0.000000	  0.000000	diff=3.31084e-13
  0.000000	  0.000000	diff=6.06037e-13
  0.000000	  0.000000	diff=2.41643e-13
  0.000000	  0.000000	diff=1.45481e-13
 -0.000015	 -0.000015	diff=7.61084e-11
  0.000005	  0.000005	diff=1.60776e-08
  local_diff=5.62269e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=1.72009e-08
 -0.000014	 -0.000014	diff=4.22729e-08
  0.000062	  0.000062	diff=2.32496e-08
 -0.000020	 -0.000020	diff=1.66708e-08
  local_diff=9.93941e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000107	  0.000107	diff=5.82653e-08
 -0.000042	 -0.000042	diff=2.80125e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=8.8686e-08
 -0.000040	 -0.000040	diff=2.87379e-08
  0.000068	  0.000068	diff=5.73714e-08
 -0.000034	 -0.000034	diff=2.63123e-08
  local_diff=2.87385e-07
# W_soft, [5 2]
 -0.000090	 -0.000090	diff=1.29046e-11
 -0.000090	 -0.000090	diff=1.25565e-11
 -0.000013	 -0.000013	diff=1.19156e-11
  0.000150	  0.000150	diff=1.24629e-11
  0.000042	  0.000042	diff=1.26882e-11
  0.000192	  0.000192	diff=4.55799e-11
  0.000192	  0.000192	diff=4.60538e-11
  0.000090	  0.000090	diff=4.51997e-11
 -0.000352	 -0.000352	diff=4.58334e-11
 -0.000122	 -0.000122	diff=4.54174e-11
  local_diff=2.90612e-10
# Num params=174, abs_diff=4.86327e-07
Elapsed time is 2.047683 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=7.30558e-13
 -0.000000	 -0.000000	diff=3.53748e-13
  0.000000	  0.000000	diff=8.56072e-14
 -0.000000	 -0.000000	diff=1.44345e-13
  0.000000	  0.000000	diff=3.78059e-13
  0.000000	  0.000000	diff=3.83548e-13
 -0.000003	 -0.000003	diff=3.37658e-11
 -0.000000	 -0.000000	diff=6.41082e-12
 -0.000000	 -0.000000	diff=9.21766e-13
  0.000000	  0.000000	diff=5.76396e-14
 -0.000000	 -0.000000	diff=4.87555e-13
  0.000000	  0.000000	diff=5.64176e-13
 -0.000000	 -0.000000	diff=4.97767e-13
 -0.000000	 -0.000000	diff=1.12706e-12
  0.000004	  0.000004	diff=4.04121e-11
  0.000002	  0.000002	diff=5.44747e-11
 -0.000000	 -0.000000	diff=5.42168e-13
  0.000000	  0.000000	diff=1.00129e-12
 -0.000000	 -0.000000	diff=2.59726e-13
  0.000000	  0.000000	diff=1.53424e-13
 -0.000000	 -0.000000	diff=1.38418e-13
 -0.000000	 -0.000000	diff=4.62475e-15
  0.000000	  0.000000	diff=9.0896e-11
  0.000000	  0.000000	diff=2.90327e-13
  0.000000	  0.000000	diff=9.04114e-13
 -0.000000	 -0.000000	diff=4.81035e-13
  0.000000	  0.000000	diff=2.44186e-13
 -0.000000	 -0.000000	diff=3.44238e-13
  0.000000	  0.000000	diff=2.17695e-13
  0.000000	  0.000000	diff=2.37221e-13
 -0.000000	 -0.000000	diff=6.16539e-13
 -0.000000	 -0.000000	diff=2.32895e-11
  local_diff=2.60416e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.7514e-13
 -0.000000	 -0.000000	diff=3.02987e-13
  0.000000	  0.000000	diff=4.46729e-13
 -0.000000	 -0.000000	diff=3.59273e-13
 -0.000000	 -0.000000	diff=8.70494e-13
 -0.000000	 -0.000000	diff=2.31972e-13
 -0.000002	 -0.000002	diff=2.82919e-13
 -0.000006	 -0.000006	diff=1.97732e-12
 -0.000000	 -0.000000	diff=3.3135e-13
  0.000000	  0.000000	diff=4.87588e-14
 -0.000000	 -0.000000	diff=2.27483e-13
  0.000000	  0.000000	diff=1.77047e-13
  0.000000	  0.000000	diff=6.6402e-13
  0.000000	  0.000000	diff=2.7252e-13
  0.000003	  0.000003	diff=1.94957e-13
  0.000007	  0.000007	diff=2.92656e-12
  0.000000	  0.000000	diff=1.02665e-12
 -0.000000	 -0.000000	diff=6.36301e-13
  0.000000	  0.000000	diff=5.55065e-13
 -0.000000	 -0.000000	diff=4.44166e-13
  0.000000	 -0.000000	diff=2.67035e-13
 -0.000000	 -0.000000	diff=3.52227e-13
 -0.000000	 -0.000000	diff=6.1593e-11
 -0.000000	 -0.000000	diff=1.19263e-12
 -0.000000	 -0.000000	diff=8.24502e-13
  0.000000	  0.000000	diff=4.84766e-13
 -0.000000	 -0.000000	diff=2.13293e-13
  0.000000	  0.000000	diff=3.1948e-13
  0.000000	  0.000000	diff=3.27929e-13
  0.000000	  0.000000	diff=1.1748e-12
  0.000000	  0.000000	diff=5.73847e-13
  0.000000	  0.000000	diff=1.78847e-10
  local_diff=2.58322e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.97487e-13
  0.000000	  0.000000	diff=3.86632e-15
 -0.000000	 -0.000000	diff=7.84031e-14
 -0.000000	 -0.000000	diff=1.45211e-12
  0.000000	  0.000000	diff=3.70046e-13
  0.000000	  0.000000	diff=1.50397e-13
  0.000000	  0.000000	diff=5.66907e-13
 -0.000007	 -0.000007	diff=4.81789e-11
 -0.000000	 -0.000000	diff=8.82906e-13
 -0.000000	 -0.000000	diff=9.15281e-13
  0.000000	  0.000000	diff=4.51061e-13
  0.000000	  0.000000	diff=1.41721e-12
 -0.000000	 -0.000000	diff=6.23775e-13
 -0.000000	 -0.000000	diff=6.99282e-13
 -0.000001	 -0.000001	diff=3.5108e-11
  0.000002	  0.000002	diff=1.66585e-10
  0.000000	  0.000000	diff=1.20105e-13
  0.000000	  0.000000	diff=1.79657e-13
  0.000000	 -0.000000	diff=2.43903e-13
  0.000000	  0.000000	diff=1.43603e-13
  0.000000	 -0.000000	diff=9.87865e-14
  0.000000	  0.000000	diff=3.11676e-13
  0.000000	  0.000000	diff=8.00094e-13
  0.000000	  0.000000	diff=1.29474e-12
  0.000000	  0.000000	diff=4.14207e-14
  0.000000	  0.000000	diff=8.14659e-14
  0.000000	 -0.000000	diff=8.17104e-14
  0.000000	  0.000000	diff=2.76634e-14
  0.000000	 -0.000000	diff=2.3187e-14
  0.000000	  0.000000	diff=8.63972e-14
  0.000000	  0.000000	diff=9.24202e-13
  0.000000	  0.000000	diff=1.01171e-12
 -0.000000	 -0.000000	diff=4.19603e-13
 -0.000000	 -0.000000	diff=1.06285e-13
  0.000000	  0.000000	diff=3.61493e-13
  0.000000	  0.000000	diff=3.43733e-14
 -0.000000	 -0.000000	diff=6.99114e-13
 -0.000000	 -0.000000	diff=1.18094e-13
 -0.000000	 -0.000000	diff=2.26806e-10
  0.000000	  0.000000	diff=3.42172e-11
 -0.000000	 -0.000000	diff=2.26795e-13
  0.000000	  0.000000	diff=7.51944e-13
 -0.000000	 -0.000000	diff=3.20696e-13
 -0.000000	 -0.000000	diff=1.34944e-12
  0.000000	  0.000000	diff=5.41022e-13
  0.000000	  0.000000	diff=7.34384e-14
  0.000000	  0.000000	diff=3.03559e-12
 -0.000000	 -0.000000	diff=2.02638e-10
  local_diff=7.3545e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.5559e-13
  0.000000	  0.000000	diff=3.18992e-13
  0.000000	  0.000000	diff=5.47194e-13
 -0.000000	 -0.000000	diff=9.14147e-13
  0.000000	  0.000000	diff=4.42876e-13
 -0.000000	 -0.000000	diff=3.93039e-13
 -0.000001	 -0.000001	diff=5.15393e-13
 -0.000004	 -0.000004	diff=5.63686e-12
  0.000000	  0.000000	diff=5.52836e-13
 -0.000000	 -0.000000	diff=1.91588e-13
 -0.000000	 -0.000000	diff=1.2746e-13
 -0.000000	 -0.000000	diff=2.92164e-13
 -0.000000	 -0.000000	diff=5.41141e-13
 -0.000000	 -0.000000	diff=2.09824e-14
 -0.000001	 -0.000001	diff=2.46439e-13
 -0.000002	 -0.000002	diff=5.36453e-13
 -0.000000	 -0.000000	diff=5.33346e-13
  0.000000	 -0.000000	diff=8.32935e-13
  0.000000	  0.000000	diff=8.62117e-13
 -0.000000	 -0.000000	diff=1.10782e-13
  0.000000	  0.000000	diff=2.54097e-13
 -0.000000	 -0.000000	diff=1.85759e-13
 -0.000000	 -0.000000	diff=4.1172e-10
 -0.000000	 -0.000000	diff=1.92156e-11
  0.000000	  0.000000	diff=4.67402e-13
  0.000000	  0.000000	diff=5.11687e-14
 -0.000000	 -0.000000	diff=2.95164e-13
  0.000000	  0.000000	diff=1.34745e-12
 -0.000000	 -0.000000	diff=1.36341e-13
  0.000000	  0.000000	diff=5.12304e-13
  0.000000	  0.000000	diff=2.59125e-12
  0.000000	  0.000000	diff=8.46193e-10
  local_diff=1.29684e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=6.29923e-10
 -0.000001	 -0.000001	diff=7.67336e-10
  0.000001	  0.000001	diff=6.90255e-10
 -0.000000	 -0.000000	diff=1.07011e-09
  local_diff=3.15762e-09
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=6.89482e-10
 -0.000000	 -0.000000	diff=8.65476e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000007	 -0.000007	diff=2.33954e-09
 -0.000001	 -0.000001	diff=6.92286e-10
 -0.000009	 -0.000009	diff=1.1099e-09
 -0.000000	 -0.000000	diff=2.59277e-10
  local_diff=5.17703e-09
# W_h, [2 4]
  0.000000	  0.000000	diff=2.03784e-12
 -0.000004	 -0.000004	diff=1.86989e-12
  0.000000	  0.000000	diff=2.16946e-12
  0.000004	  0.000004	diff=1.29881e-12
 -0.000003	 -0.000003	diff=8.35499e-12
  0.000001	  0.000001	diff=2.41188e-12
  0.000011	  0.000011	diff=8.07261e-11
 -0.000001	 -0.000001	diff=3.27002e-11
  local_diff=1.31569e-10
# W_soft, [5 2]
  0.000031	  0.000031	diff=1.22578e-12
  0.000031	  0.000031	diff=1.50155e-12
 -0.000005	 -0.000005	diff=2.14331e-12
 -0.000037	 -0.000037	diff=1.86112e-12
 -0.000020	 -0.000020	diff=1.79475e-12
  0.000024	  0.000024	diff=1.45646e-12
  0.000024	  0.000024	diff=1.02927e-12
 -0.000009	 -0.000009	diff=8.32395e-13
 -0.000027	 -0.000027	diff=1.32863e-12
 -0.000012	 -0.000012	diff=1.74813e-12
  local_diff=1.49214e-11
# Num params=182, abs_diff=1.10322e-08
Elapsed time is 2.824843 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.31621e-12
  0.000000	  0.000000	diff=5.52343e-13
  0.000000	  0.000000	diff=9.34988e-13
  0.000000	  0.000000	diff=4.50825e-13
  0.000000	  0.000000	diff=3.72512e-13
  0.000000	  0.000000	diff=1.98733e-13
 -0.000011	 -0.000011	diff=8.84253e-11
  0.000007	  0.000007	diff=8.7564e-11
 -0.000000	 -0.000000	diff=2.03204e-13
 -0.000000	 -0.000000	diff=1.03148e-12
 -0.000000	 -0.000000	diff=7.38361e-13
 -0.000000	 -0.000000	diff=1.78631e-12
 -0.000000	 -0.000000	diff=2.61349e-13
 -0.000000	 -0.000000	diff=3.06462e-13
  0.000016	  0.000016	diff=1.94511e-10
 -0.000015	 -0.000015	diff=2.57379e-10
 -0.000000	 -0.000000	diff=3.34199e-13
 -0.000000	 -0.000000	diff=7.65688e-13
 -0.000000	 -0.000000	diff=3.31081e-14
 -0.000000	 -0.000000	diff=6.6221e-13
 -0.000000	 -0.000000	diff=3.27686e-13
  0.000000	  0.000000	diff=8.45683e-14
  0.000000	  0.000000	diff=1.03373e-10
 -0.000000	 -0.000000	diff=8.36996e-13
  0.000000	  0.000000	diff=1.29982e-12
  0.000000	  0.000000	diff=2.74183e-13
  0.000000	  0.000000	diff=3.98802e-14
  0.000000	  0.000000	diff=2.93106e-13
  0.000000	  0.000000	diff=3.41689e-13
  0.000000	  0.000000	diff=2.37731e-13
 -0.000000	 -0.000000	diff=2.79537e-13
  0.000000	  0.000000	diff=3.90692e-10
  local_diff=1.13591e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.03599e-13
  0.000000	  0.000000	diff=5.17043e-13
 -0.000000	 -0.000000	diff=5.29157e-13
  0.000000	  0.000000	diff=4.75126e-13
 -0.000000	 -0.000000	diff=1.037e-12
 -0.000000	 -0.000000	diff=5.83128e-14
  0.000034	  0.000034	diff=9.90651e-12
  0.000007	  0.000007	diff=6.08391e-12
  0.000000	  0.000000	diff=3.49285e-13
 -0.000000	 -0.000000	diff=6.67091e-13
  0.000000	  0.000000	diff=5.39419e-13
 -0.000000	 -0.000000	diff=4.29655e-13
  0.000000	  0.000000	diff=1.21428e-13
  0.000000	  0.000000	diff=2.00178e-13
 -0.000039	 -0.000039	diff=8.96773e-12
 -0.000008	 -0.000008	diff=5.56894e-12
 -0.000000	 -0.000000	diff=1.21721e-12
  0.000000	  0.000000	diff=1.19084e-12
 -0.000000	 -0.000000	diff=4.70931e-13
  0.000000	  0.000000	diff=2.05496e-13
 -0.000000	 -0.000000	diff=1.17678e-12
 -0.000000	 -0.000000	diff=2.47211e-13
  0.000001	  0.000001	diff=3.98049e-10
  0.000000	  0.000000	diff=1.0367e-13
  0.000000	  0.000000	diff=1.08783e-12
 -0.000000	 -0.000000	diff=7.97024e-14
  0.000000	  0.000000	diff=4.48404e-13
 -0.000000	 -0.000000	diff=3.00847e-13
  0.000000	  0.000000	diff=6.25214e-13
  0.000000	  0.000000	diff=2.24392e-13
 -0.000001	 -0.000001	diff=2.11553e-13
 -0.000000	 -0.000000	diff=1.73813e-10
  local_diff=6.15407e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.69408e-13
 -0.000000	 -0.000000	diff=3.54196e-13
 -0.000000	 -0.000000	diff=9.29245e-13
  0.000000	  0.000000	diff=5.75577e-13
 -0.000000	 -0.000000	diff=6.72091e-14
 -0.000000	 -0.000000	diff=4.00273e-13
  0.000008	  0.000008	diff=3.87779e-11
  0.000009	  0.000009	diff=5.28238e-11
  0.000000	  0.000000	diff=8.30622e-13
  0.000000	  0.000000	diff=6.64333e-13
  0.000000	  0.000000	diff=2.03377e-12
 -0.000000	 -0.000000	diff=2.54673e-12
  0.000000	  0.000000	diff=4.05248e-13
  0.000000	  0.000000	diff=4.07635e-13
 -0.000011	 -0.000011	diff=1.48571e-10
 -0.000016	 -0.000016	diff=1.13949e-07
  0.000000	 -0.000000	diff=9.2997e-13
  0.000000	 -0.000000	diff=1.30477e-13
  0.000000	  0.000000	diff=9.94296e-13
  0.000000	 -0.000000	diff=1.16394e-13
  0.000000	  0.000000	diff=6.93982e-14
  0.000000	 -0.000000	diff=9.2571e-13
 -0.000000	 -0.000000	diff=1.7322e-14
 -0.000000	 -0.000000	diff=5.19932e-13
  0.000000	  0.000000	diff=7.9129e-15
  0.000000	 -0.000000	diff=4.87123e-15
 -0.000000	 -0.000000	diff=6.03213e-13
  0.000000	  0.000000	diff=6.35027e-13
  0.000000	 -0.000000	diff=9.33646e-14
  0.000000	  0.000000	diff=6.0571e-14
 -0.000000	 -0.000000	diff=1.33303e-12
 -0.000000	 -0.000000	diff=9.28898e-14
  0.000000	  0.000000	diff=5.3017e-13
  0.000000	  0.000000	diff=5.80599e-13
  0.000000	  0.000000	diff=7.84909e-13
 -0.000000	 -0.000000	diff=5.71754e-13
  0.000000	  0.000000	diff=8.22481e-13
 -0.000000	 -0.000000	diff=2.4971e-13
 -0.000001	 -0.000001	diff=1.4325e-09
 -0.000001	 -0.000001	diff=1.32523e-11
 -0.000000	 -0.000000	diff=6.48839e-13
 -0.000000	 -0.000000	diff=3.11391e-13
 -0.000000	 -0.000000	diff=3.6093e-14
  0.000000	  0.000000	diff=2.43318e-13
 -0.000000	 -0.000000	diff=3.64625e-13
  0.000000	  0.000000	diff=5.21646e-14
  0.000000	  0.000000	diff=9.16542e-12
  0.000001	  0.000001	diff=1.29954e-09
  local_diff=1.16965e-07
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.13942e-12
 -0.000000	 -0.000000	diff=7.13161e-13
 -0.000000	 -0.000000	diff=9.3051e-13
  0.000000	  0.000000	diff=1.00736e-12
 -0.000000	 -0.000000	diff=3.93491e-13
  0.000000	  0.000000	diff=1.80987e-13
  0.000032	  0.000032	diff=2.59374e-11
  0.000012	  0.000012	diff=8.02837e-12
  0.000000	  0.000000	diff=7.17968e-13
  0.000000	  0.000000	diff=1.41022e-13
 -0.000000	 -0.000000	diff=9.14003e-13
  0.000000	  0.000000	diff=1.83987e-13
 -0.000000	 -0.000000	diff=1.0263e-12
  0.000000	  0.000000	diff=7.45756e-13
 -0.000005	 -0.000005	diff=5.90308e-11
 -0.000002	 -0.000002	diff=7.37449e-12
  0.000000	  0.000000	diff=1.03869e-12
 -0.000000	 -0.000000	diff=7.83274e-13
 -0.000000	 -0.000000	diff=6.64925e-13
  0.000000	  0.000000	diff=1.02934e-13
 -0.000000	 -0.000000	diff=4.27355e-13
  0.000000	  0.000000	diff=7.87749e-13
  0.000001	  0.000001	diff=4.32714e-09
  0.000001	  0.000001	diff=1.53376e-11
 -0.000000	 -0.000000	diff=8.76852e-14
  0.000000	  0.000000	diff=4.95516e-13
  0.000000	  0.000000	diff=9.04981e-14
 -0.000000	 -0.000000	diff=5.61283e-13
  0.000000	  0.000000	diff=3.56602e-13
 -0.000000	 -0.000000	diff=6.54929e-14
 -0.000002	 -0.000002	diff=8.23861e-12
 -0.000001	 -0.000001	diff=2.08975e-09
  local_diff=6.55439e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=3.9544e-09
 -0.000017	 -0.000017	diff=1.69924e-08
  0.000007	  0.000007	diff=4.10764e-09
 -0.000015	 -0.000015	diff=1.58593e-08
  local_diff=4.09138e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.1248e-09
 -0.000003	 -0.000003	diff=2.18218e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.7246e-09
 -0.000002	 -0.000002	diff=1.66293e-09
 -0.000017	 -0.000017	diff=4.92777e-09
 -0.000001	 -0.000001	diff=1.11169e-09
  local_diff=1.5734e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=4.06858e-13
  0.000000	 -0.000000	diff=2.55439e-13
 -0.000000	 -0.000000	diff=3.45152e-14
  0.000000	  0.000000	diff=1.41914e-13
  local_diff=8.38726e-13
# v_pos, [1 2]
 -0.000000	 -0.000000	diff=7.59412e-13
 -0.000000	 -0.000000	diff=7.73219e-13
  local_diff=1.53263e-12
# W_h, [2 4]
  0.000023	  0.000023	diff=7.69881e-13
  0.000008	  0.000008	diff=1.07702e-13
 -0.000029	 -0.000029	diff=3.00442e-13
 -0.000010	 -0.000010	diff=1.55489e-14
  0.000013	  0.000013	diff=2.43289e-11
  0.000006	  0.000006	diff=2.95409e-13
 -0.000026	 -0.000026	diff=2.0875e-10
 -0.000014	 -0.000014	diff=1.84212e-11
  local_diff=2.52989e-10
# W_soft, [5 2]
 -0.000019	 -0.000019	diff=1.75008e-14
 -0.000019	 -0.000019	diff=5.77963e-13
  0.000008	  0.000008	diff=1.73708e-13
  0.000010	  0.000010	diff=1.36757e-13
  0.000020	  0.000020	diff=5.50159e-13
  0.000020	  0.000020	diff=2.72884e-13
  0.000020	  0.000020	diff=3.89366e-13
 -0.000005	 -0.000005	diff=5.23371e-13
 -0.000012	 -0.000012	diff=1.02778e-12
 -0.000022	 -0.000022	diff=8.17765e-14
  local_diff=3.75127e-12
# Num params=188, abs_diff=1.82177e-07
Elapsed time is 3.849419 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.2309e-12
 -0.000000	 -0.000000	diff=1.57639e-13
  0.000000	  0.000000	diff=2.6477e-12
 -0.000000	 -0.000000	diff=2.32505e-13
  0.000000	  0.000000	diff=1.02203e-13
  0.000000	  0.000000	diff=9.59383e-13
 -0.000019	 -0.000019	diff=3.89113e-11
 -0.000002	 -0.000002	diff=2.97361e-11
 -0.000000	 -0.000000	diff=1.7536e-13
  0.000000	  0.000000	diff=3.94897e-13
 -0.000000	 -0.000000	diff=1.49506e-12
  0.000000	  0.000000	diff=1.38769e-12
 -0.000000	 -0.000000	diff=4.84221e-13
 -0.000000	 -0.000000	diff=9.87191e-13
  0.000027	  0.000027	diff=8.60279e-11
  0.000006	  0.000006	diff=1.4218e-10
 -0.000000	 -0.000000	diff=1.0081e-12
  0.000000	  0.000000	diff=2.09958e-13
 -0.000000	 -0.000000	diff=1.24091e-12
  0.000000	  0.000000	diff=7.12224e-13
 -0.000000	 -0.000000	diff=9.345e-13
 -0.000000	 -0.000000	diff=1.5165e-13
  0.000000	  0.000000	diff=4.90604e-10
  0.000000	  0.000000	diff=5.52801e-13
  0.000000	  0.000000	diff=1.13917e-13
 -0.000000	 -0.000000	diff=2.69282e-13
  0.000000	  0.000000	diff=8.53703e-13
 -0.000000	 -0.000000	diff=7.33568e-13
  0.000000	  0.000000	diff=3.90127e-13
  0.000000	  0.000000	diff=8.9383e-13
 -0.000000	 -0.000000	diff=2.07015e-12
 -0.000000	 -0.000000	diff=2.18159e-10
  local_diff=1.02601e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=7.99871e-13
 -0.000000	 -0.000000	diff=6.88909e-13
  0.000000	  0.000000	diff=2.3206e-13
 -0.000000	 -0.000000	diff=9.26583e-13
 -0.000000	 -0.000000	diff=4.717e-13
 -0.000000	 -0.000000	diff=3.08333e-13
 -0.000011	 -0.000011	diff=5.30776e-12
 -0.000031	 -0.000031	diff=2.68974e-12
 -0.000000	 -0.000000	diff=4.46151e-13
  0.000000	  0.000000	diff=4.27714e-13
 -0.000000	 -0.000000	diff=6.04165e-13
  0.000000	  0.000000	diff=1.06084e-12
  0.000000	  0.000000	diff=5.77611e-13
  0.000000	  0.000000	diff=1.54805e-12
  0.000012	  0.000012	diff=3.85542e-12
  0.000035	  0.000035	diff=4.97097e-14
  0.000000	  0.000000	diff=8.23883e-13
 -0.000000	 -0.000000	diff=7.82645e-13
  0.000000	  0.000000	diff=4.80994e-13
 -0.000000	 -0.000000	diff=5.45734e-13
 -0.000000	 -0.000000	diff=3.47792e-13
 -0.000000	 -0.000000	diff=9.6984e-13
 -0.000000	 -0.000000	diff=3.03965e-10
 -0.000001	 -0.000001	diff=4.11468e-14
 -0.000000	 -0.000000	diff=3.6524e-13
  0.000000	  0.000000	diff=7.98009e-14
 -0.000000	 -0.000000	diff=1.48163e-13
  0.000000	  0.000000	diff=9.56211e-13
  0.000000	  0.000000	diff=1.572e-12
  0.000000	  0.000000	diff=6.76652e-13
  0.000000	  0.000000	diff=1.21539e-13
  0.000001	  0.000001	diff=7.32265e-10
  local_diff=1.06414e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.48229e-13
  0.000000	  0.000000	diff=1.05382e-12
  0.000000	  0.000000	diff=7.17694e-14
 -0.000000	 -0.000000	diff=2.89912e-13
  0.000000	  0.000000	diff=4.59649e-13
  0.000000	  0.000000	diff=1.47605e-12
 -0.000004	 -0.000004	diff=3.06655e-11
 -0.000014	 -0.000014	diff=8.67397e-11
 -0.000000	 -0.000000	diff=1.11918e-12
 -0.000000	 -0.000000	diff=8.24279e-13
 -0.000000	 -0.000000	diff=9.06094e-13
  0.000000	  0.000000	diff=6.71648e-12
 -0.000000	 -0.000000	diff=3.46381e-13
 -0.000000	 -0.000000	diff=8.78578e-13
  0.000011	  0.000011	diff=1.8881e-10
  0.000051	  0.000051	diff=5.86157e-11
 -0.000000	 -0.000000	diff=1.17611e-12
  0.000000	 -0.000000	diff=4.17005e-13
  0.000000	  0.000000	diff=9.44246e-13
  0.000000	 -0.000000	diff=6.80654e-14
  0.000000	  0.000000	diff=8.41557e-13
 -0.000000	 -0.000000	diff=9.03374e-13
 -0.000000	 -0.000000	diff=4.63123e-13
 -0.000000	 -0.000000	diff=3.29304e-13
  0.000000	 -0.000000	diff=3.45388e-14
  0.000000	 -0.000000	diff=8.78721e-14
  0.000000	 -0.000000	diff=7.18203e-15
  0.000000	  0.000000	diff=5.05752e-14
  0.000000	 -0.000000	diff=3.69317e-14
  0.000000	 -0.000000	diff=7.55868e-13
 -0.000000	 -0.000000	diff=2.47048e-13
 -0.000000	 -0.000000	diff=1.01103e-12
 -0.000000	 -0.000000	diff=5.27165e-13
 -0.000000	 -0.000000	diff=6.87187e-13
 -0.000000	 -0.000000	diff=8.28824e-13
  0.000000	  0.000000	diff=5.24819e-13
 -0.000000	 -0.000000	diff=1.0098e-12
  0.000000	  0.000000	diff=1.21192e-12
  0.000000	  0.000000	diff=7.23633e-10
  0.000001	  0.000001	diff=8.15818e-11
  0.000000	  0.000000	diff=1.7469e-13
  0.000000	  0.000000	diff=1.32867e-12
  0.000000	  0.000000	diff=3.06473e-13
 -0.000000	 -0.000000	diff=4.38738e-13
  0.000000	  0.000000	diff=6.81803e-14
 -0.000000	 -0.000000	diff=1.40311e-13
 -0.000000	 -0.000000	diff=5.61944e-12
 -0.000001	 -0.000001	diff=2.08168e-09
  local_diff=3.28646e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=5.9455e-13
  0.000000	  0.000000	diff=1.07781e-12
  0.000000	  0.000000	diff=1.29619e-12
 -0.000000	 -0.000000	diff=4.74204e-15
  0.000000	  0.000000	diff=8.94596e-13
 -0.000000	 -0.000000	diff=3.23382e-13
 -0.000013	 -0.000013	diff=1.93341e-11
 -0.000008	 -0.000008	diff=2.81251e-11
 -0.000000	 -0.000000	diff=1.06933e-13
 -0.000000	 -0.000000	diff=2.4917e-13
  0.000000	  0.000000	diff=2.26123e-13
  0.000000	  0.000000	diff=8.65334e-13
 -0.000000	 -0.000000	diff=1.12239e-12
  0.000000	  0.000000	diff=5.88617e-13
 -0.000001	 -0.000001	diff=2.42624e-11
  0.000001	  0.000001	diff=5.92268e-12
 -0.000000	 -0.000000	diff=8.08888e-13
  0.000000	  0.000000	diff=1.01681e-12
  0.000000	  0.000000	diff=1.02848e-12
 -0.000000	 -0.000000	diff=1.06918e-12
  0.000000	  0.000000	diff=4.19007e-13
 -0.000000	 -0.000000	diff=1.02074e-12
 -0.000001	 -0.000001	diff=2.01893e-09
 -0.000001	 -0.000001	diff=5.63943e-11
  0.000000	  0.000000	diff=1.04435e-12
 -0.000000	 -0.000000	diff=1.19681e-13
 -0.000000	 -0.000000	diff=4.80025e-14
  0.000000	  0.000000	diff=9.20859e-13
 -0.000000	 -0.000000	diff=1.50122e-13
  0.000000	  0.000000	diff=2.09358e-13
  0.000001	  0.000001	diff=5.87079e-12
  0.000001	  0.000001	diff=4.28731e-09
  local_diff=6.46135e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000010	  0.000010	diff=3.91357e-09
 -0.000012	 -0.000012	diff=1.04559e-08
  0.000009	  0.000009	diff=3.59209e-09
 -0.000006	 -0.000006	diff=6.42968e-09
  local_diff=2.43913e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000030	  0.000030	diff=1.6923e-09
  0.000002	  0.000002	diff=1.91118e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000044	  0.000044	diff=7.94871e-09
  0.000001	  0.000001	diff=1.67169e-09
  0.000026	  0.000026	diff=1.78527e-09
  0.000001	  0.000001	diff=9.93849e-10
  local_diff=1.6003e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.91363e-15
  0.000000	 -0.000000	diff=2.33469e-15
  0.000000	 -0.000000	diff=2.46117e-15
  0.000000	  0.000000	diff=3.01129e-15
  local_diff=9.72078e-15
# W_h, [2 4]
 -0.000030	 -0.000030	diff=4.56634e-13
 -0.000036	 -0.000036	diff=1.47777e-12
  0.000038	  0.000038	diff=1.11086e-12
  0.000045	  0.000045	diff=1.31355e-12
 -0.000009	 -0.000009	diff=1.6458e-11
 -0.000011	 -0.000011	diff=1.33404e-11
  0.000013	  0.000013	diff=1.80711e-10
  0.000022	  0.000022	diff=1.68781e-10
  local_diff=3.83649e-10
# W_soft, [5 2]
  0.000028	  0.000028	diff=7.23507e-13
  0.000028	  0.000028	diff=6.15663e-14
  0.000001	  0.000001	diff=3.93677e-13
 -0.000038	 -0.000038	diff=4.57176e-13
 -0.000020	 -0.000020	diff=4.95701e-13
  0.000003	  0.000003	diff=7.69384e-13
  0.000003	  0.000003	diff=1.2449e-12
 -0.000003	 -0.000003	diff=2.56793e-13
 -0.000001	 -0.000001	diff=4.67095e-14
 -0.000001	 -0.000001	diff=8.03285e-13
  local_diff=5.2527e-12
# Num params=186, abs_diff=5.26211e-08
Elapsed time is 3.176249 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=5.40697e-13
  0.000000	  0.000000	diff=6.18138e-13
  0.000000	  0.000000	diff=7.20277e-13
  0.000000	  0.000000	diff=7.03089e-13
  0.000000	  0.000000	diff=4.82951e-13
  0.000000	  0.000000	diff=3.75894e-13
 -0.000025	 -0.000025	diff=2.27635e-11
  0.000009	  0.000009	diff=1.11344e-10
 -0.000000	 -0.000000	diff=7.04633e-13
 -0.000000	 -0.000000	diff=7.91751e-15
 -0.000000	 -0.000000	diff=1.60735e-12
 -0.000000	 -0.000000	diff=2.05998e-12
 -0.000000	 -0.000000	diff=1.34315e-12
 -0.000000	 -0.000000	diff=5.18732e-13
  0.000036	  0.000036	diff=4.92781e-11
 -0.000019	 -0.000019	diff=3.30245e-10
 -0.000000	 -0.000000	diff=5.25377e-13
 -0.000000	 -0.000000	diff=4.63394e-13
 -0.000000	 -0.000000	diff=1.3933e-13
 -0.000000	 -0.000000	diff=1.07395e-12
 -0.000000	 -0.000000	diff=1.94008e-13
 -0.000000	 -0.000000	diff=1.21374e-13
  0.000000	  0.000000	diff=2.17339e-10
 -0.000000	 -0.000000	diff=4.86716e-13
  0.000000	  0.000000	diff=6.48939e-13
  0.000000	  0.000000	diff=4.74796e-13
  0.000000	  0.000000	diff=4.56167e-14
  0.000000	  0.000000	diff=1.74365e-14
  0.000000	  0.000000	diff=1.52424e-12
  0.000000	  0.000000	diff=6.82098e-13
 -0.000000	 -0.000000	diff=9.03721e-13
  0.000000	  0.000000	diff=4.54071e-10
  local_diff=1.20202e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.05154e-13
  0.000000	  0.000000	diff=7.75175e-13
 -0.000000	 -0.000000	diff=1.18732e-12
  0.000000	  0.000000	diff=9.61231e-13
 -0.000000	 -0.000000	diff=1.09592e-13
 -0.000000	 -0.000000	diff=4.73532e-13
  0.000054	  0.000054	diff=2.06052e-12
  0.000007	  0.000007	diff=5.09863e-12
  0.000000	  0.000000	diff=1.48051e-13
 -0.000000	 -0.000000	diff=7.16361e-13
  0.000000	  0.000000	diff=6.06142e-13
 -0.000000	 -0.000000	diff=4.59178e-14
  0.000000	  0.000000	diff=6.18243e-14
  0.000000	  0.000000	diff=1.10579e-13
 -0.000063	 -0.000063	diff=1.8987e-12
 -0.000007	 -0.000007	diff=5.17418e-12
 -0.000000	 -0.000000	diff=2.07554e-13
  0.000000	  0.000000	diff=1.09812e-12
 -0.000000	 -0.000000	diff=4.49226e-13
  0.000000	  0.000000	diff=1.68916e-13
 -0.000000	 -0.000000	diff=4.13639e-13
 -0.000000	 -0.000000	diff=1.3831e-12
  0.000001	  0.000001	diff=7.87117e-10
  0.000000	  0.000000	diff=2.91306e-13
  0.000000	  0.000000	diff=4.01329e-13
 -0.000000	 -0.000000	diff=1.39308e-13
  0.000000	  0.000000	diff=4.08373e-13
 -0.000000	 -0.000000	diff=2.69857e-13
  0.000000	  0.000000	diff=4.03687e-13
  0.000000	  0.000000	diff=1.95762e-13
 -0.000001	 -0.000001	diff=1.25012e-12
 -0.000000	 -0.000000	diff=1.75835e-10
  local_diff=9.89566e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.07141e-13
 -0.000000	 -0.000000	diff=6.33061e-13
 -0.000000	 -0.000000	diff=2.33595e-13
  0.000000	  0.000000	diff=5.29131e-13
 -0.000000	 -0.000000	diff=3.2592e-14
 -0.000000	 -0.000000	diff=6.72325e-13
  0.000008	  0.000008	diff=3.95013e-11
  0.000009	  0.000009	diff=5.22489e-11
  0.000000	  0.000000	diff=6.11253e-13
  0.000000	  0.000000	diff=2.59648e-13
  0.000000	  0.000000	diff=2.03292e-12
 -0.000000	 -0.000000	diff=2.64183e-12
  0.000000	  0.000000	diff=1.09764e-12
  0.000000	  0.000000	diff=7.40188e-14
 -0.000011	 -0.000011	diff=1.48201e-10
 -0.000016	 -0.000016	diff=1.51705e-11
  0.000000	 -0.000000	diff=6.37402e-13
  0.000000	 -0.000000	diff=3.46665e-13
  0.000000	  0.000000	diff=2.96721e-13
  0.000000	 -0.000000	diff=7.41248e-14
  0.000000	  0.000000	diff=6.17827e-14
  0.000000	 -0.000000	diff=3.75456e-13
 -0.000000	 -0.000000	diff=1.22097e-12
 -0.000000	 -0.000000	diff=2.38259e-14
  0.000000	  0.000000	diff=2.28325e-13
  0.000000	  0.000000	diff=6.53023e-14
  0.000000	 -0.000000	diff=4.62652e-13
  0.000000	  0.000000	diff=2.62421e-15
  0.000000	 -0.000000	diff=2.22004e-13
  0.000000	  0.000000	diff=6.22389e-14
  0.000000	  0.000000	diff=2.81633e-13
  0.000000	  0.000000	diff=5.13549e-14
  0.000000	  0.000000	diff=1.74128e-13
  0.000000	  0.000000	diff=1.60533e-12
  0.000000	  0.000000	diff=7.60329e-14
 -0.000000	 -0.000000	diff=1.45607e-13
  0.000000	  0.000000	diff=1.17786e-13
 -0.000000	 -0.000000	diff=5.06536e-13
 -0.000001	 -0.000001	diff=1.43254e-09
 -0.000001	 -0.000001	diff=1.31919e-11
 -0.000000	 -0.000000	diff=5.9177e-14
 -0.000000	 -0.000000	diff=1.11185e-12
 -0.000000	 -0.000000	diff=7.52937e-13
  0.000000	  0.000000	diff=2.4228e-13
 -0.000000	 -0.000000	diff=3.49152e-13
  0.000000	  0.000000	diff=5.56639e-14
  0.000000	  0.000000	diff=9.28521e-12
  0.000001	  0.000001	diff=1.3003e-09
  local_diff=3.02938e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=2.91971e-13
 -0.000000	 -0.000000	diff=1.33976e-14
 -0.000000	 -0.000000	diff=2.18641e-13
  0.000000	  0.000000	diff=2.91638e-13
 -0.000000	 -0.000000	diff=1.11047e-12
  0.000000	  0.000000	diff=9.05238e-13
  0.000032	  0.000032	diff=2.59906e-11
  0.000012	  0.000012	diff=9.03224e-12
  0.000000	  0.000000	diff=2.15891e-14
  0.000000	  0.000000	diff=5.59855e-13
 -0.000000	 -0.000000	diff=8.84211e-13
  0.000000	  0.000000	diff=9.21977e-13
 -0.000000	 -0.000000	diff=3.06835e-13
  0.000000	  0.000000	diff=7.55161e-13
 -0.000005	 -0.000005	diff=5.7663e-11
 -0.000002	 -0.000002	diff=8.51174e-12
  0.000000	  0.000000	diff=1.09311e-12
 -0.000000	 -0.000000	diff=7.83741e-13
 -0.000000	 -0.000000	diff=6.64998e-13
  0.000000	  0.000000	diff=6.07613e-13
 -0.000000	 -0.000000	diff=4.27229e-13
  0.000000	  0.000000	diff=7.69347e-14
  0.000001	  0.000001	diff=4.32908e-09
  0.000001	  0.000001	diff=1.55997e-11
 -0.000000	 -0.000000	diff=8.71241e-14
  0.000000	  0.000000	diff=9.24445e-13
  0.000000	  0.000000	diff=9.04911e-14
 -0.000000	 -0.000000	diff=1.48912e-13
  0.000000	  0.000000	diff=3.5693e-13
 -0.000000	 -0.000000	diff=6.43968e-13
 -0.000002	 -0.000002	diff=7.73204e-12
 -0.000001	 -0.000001	diff=2.08762e-09
  local_diff=6.55342e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000015	  0.000015	diff=7.6491e-09
 -0.000030	 -0.000030	diff=2.91299e-08
  0.000013	  0.000013	diff=7.01695e-09
 -0.000025	 -0.000025	diff=2.5038e-08
  local_diff=6.8834e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.12553e-09
 -0.000003	 -0.000003	diff=2.18158e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.72523e-09
 -0.000002	 -0.000002	diff=1.66217e-09
 -0.000017	 -0.000017	diff=4.92814e-09
 -0.000001	 -0.000001	diff=1.11168e-09
  local_diff=1.57343e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=6.57311e-21
  0.000000	 -0.000000	diff=8.778e-21
  0.000000	 -0.000000	diff=1.59249e-20
  0.000000	  0.000000	diff=2.13569e-20
  local_diff=5.26329e-20
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.15715e-12
  0.000000	  0.000000	diff=2.99665e-13
  local_diff=1.45681e-12
# W_h, [2 4]
  0.000055	  0.000055	diff=1.17061e-12
  0.000018	  0.000018	diff=1.11021e-12
 -0.000070	 -0.000070	diff=1.44588e-12
 -0.000023	 -0.000023	diff=3.90783e-13
  0.000013	  0.000013	diff=2.33728e-11
  0.000006	  0.000006	diff=6.03221e-13
 -0.000026	 -0.000026	diff=2.08052e-10
 -0.000014	 -0.000014	diff=1.85702e-11
  local_diff=2.54715e-10
# W_soft, [5 2]
 -0.000031	 -0.000031	diff=7.89404e-13
 -0.000031	 -0.000031	diff=1.9265e-13
  0.000013	  0.000013	diff=3.27006e-13
  0.000003	  0.000003	diff=1.33653e-12
  0.000045	  0.000045	diff=2.32821e-12
  0.000032	  0.000032	diff=1.68971e-12
  0.000032	  0.000032	diff=8.80479e-13
 -0.000010	 -0.000010	diff=7.8026e-13
 -0.000005	 -0.000005	diff=1.10666e-12
 -0.000048	 -0.000048	diff=1.22723e-12
  local_diff=1.06581e-11
# Num params=188, abs_diff=9.66095e-08
Elapsed time is 3.260579 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.5358e-12
 -0.000000	 -0.000000	diff=8.61893e-13
 -0.000000	 -0.000000	diff=8.6042e-13
 -0.000000	 -0.000000	diff=1.00231e-12
 -0.000000	 -0.000000	diff=1.45578e-12
 -0.000000	 -0.000000	diff=1.51699e-12
  0.000013	  0.000013	diff=3.25265e-11
 -0.000006	 -0.000006	diff=3.56242e-11
  0.000000	  0.000000	diff=5.06928e-13
  0.000000	  0.000000	diff=1.39424e-12
  0.000000	  0.000000	diff=5.34452e-13
  0.000000	  0.000000	diff=1.06995e-12
  0.000000	  0.000000	diff=1.12006e-12
  0.000000	  0.000000	diff=1.19792e-12
 -0.000017	 -0.000017	diff=5.85925e-11
  0.000008	  0.000008	diff=6.28768e-11
  0.000000	  0.000000	diff=1.12036e-12
  0.000000	  0.000000	diff=6.12508e-13
  0.000000	  0.000000	diff=1.33228e-12
  0.000000	  0.000000	diff=1.10868e-12
  0.000000	  0.000000	diff=1.26708e-12
  0.000000	  0.000000	diff=1.00023e-12
 -0.000000	 -0.000000	diff=3.38239e-10
  0.000000	  0.000000	diff=3.13636e-12
 -0.000000	 -0.000000	diff=1.1701e-12
 -0.000000	 -0.000000	diff=3.6056e-13
 -0.000000	 -0.000000	diff=1.15296e-12
 -0.000000	 -0.000000	diff=1.0862e-12
 -0.000000	 -0.000000	diff=6.11602e-13
 -0.000000	 -0.000000	diff=1.53388e-12
  0.000000	  0.000000	diff=2.00108e-12
 -0.000000	 -0.000000	diff=3.88149e-10
  local_diff=9.46558e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.76038e-12
  0.000000	  0.000000	diff=1.18757e-12
  0.000000	  0.000000	diff=3.9994e-13
  0.000000	  0.000000	diff=1.74196e-12
 -0.000000	 -0.000000	diff=2.83885e-13
  0.000000	  0.000000	diff=1.45269e-12
  0.000000	  0.000000	diff=6.4573e-13
  0.000019	  0.000019	diff=7.07894e-12
  0.000000	  0.000000	diff=1.49531e-12
 -0.000000	 -0.000000	diff=1.44909e-12
 -0.000000	 -0.000000	diff=1.56034e-12
 -0.000000	 -0.000000	diff=5.14131e-13
  0.000000	  0.000000	diff=8.03901e-13
 -0.000000	 -0.000000	diff=1.21518e-12
 -0.000000	 -0.000000	diff=6.73289e-13
 -0.000015	 -0.000015	diff=4.6172e-12
  0.000000	  0.000000	diff=1.41934e-12
  0.000000	  0.000000	diff=3.36386e-13
  0.000000	  0.000000	diff=1.5128e-12
  0.000000	  0.000000	diff=7.36814e-13
 -0.000000	 -0.000000	diff=1.89665e-12
  0.000000	  0.000000	diff=4.45026e-13
 -0.000000	 -0.000000	diff=1.4509e-10
  0.000000	  0.000000	diff=5.49019e-13
 -0.000000	 -0.000000	diff=6.14498e-13
 -0.000000	 -0.000000	diff=1.61442e-12
 -0.000000	 -0.000000	diff=9.43286e-13
 -0.000000	 -0.000000	diff=8.45298e-13
  0.000000	  0.000000	diff=1.40288e-12
 -0.000000	 -0.000000	diff=2.10209e-12
  0.000000	  0.000000	diff=1.78679e-12
 -0.000000	 -0.000000	diff=4.36281e-10
  local_diff=6.24456e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.82071e-13
  0.000000	  0.000000	diff=1.39598e-12
  0.000000	  0.000000	diff=5.3069e-13
 -0.000000	 -0.000000	diff=2.03233e-12
  0.000000	  0.000000	diff=2.52281e-14
  0.000000	  0.000000	diff=1.95953e-12
 -0.000003	 -0.000003	diff=5.56473e-12
  0.000003	  0.000003	diff=2.87149e-11
 -0.000000	 -0.000000	diff=1.91357e-12
 -0.000000	 -0.000000	diff=1.05934e-12
 -0.000000	 -0.000000	diff=1.12265e-12
  0.000000	  0.000000	diff=1.12746e-12
 -0.000000	 -0.000000	diff=6.82812e-13
 -0.000000	 -0.000000	diff=3.88625e-13
  0.000004	  0.000004	diff=2.12158e-11
  0.000011	  0.000011	diff=6.94152e-11
  0.000000	 -0.000000	diff=2.81727e-14
  0.000000	  0.000000	diff=6.04818e-13
  0.000000	 -0.000000	diff=7.69668e-13
  0.000000	  0.000000	diff=5.89213e-13
  0.000000	 -0.000000	diff=7.21594e-14
  0.000000	  0.000000	diff=1.50914e-12
 -0.000000	 -0.000000	diff=1.1301e-12
  0.000000	  0.000000	diff=3.76405e-13
  0.000000	 -0.000000	diff=2.20418e-14
  0.000000	  0.000000	diff=1.20286e-12
  0.000000	  0.000000	diff=3.12646e-15
  0.000000	  0.000000	diff=1.67148e-12
  0.000000	 -0.000000	diff=1.39511e-14
  0.000000	  0.000000	diff=8.83225e-13
 -0.000000	 -0.000000	diff=1.68177e-12
  0.000000	  0.000000	diff=1.03896e-12
 -0.000000	 -0.000000	diff=9.26995e-13
 -0.000000	 -0.000000	diff=4.08883e-13
 -0.000000	 -0.000000	diff=1.61728e-12
 -0.000000	 -0.000000	diff=2.04502e-12
 -0.000000	 -0.000000	diff=1.15225e-12
 -0.000000	 -0.000000	diff=1.84036e-12
  0.000000	  0.000000	diff=3.12127e-11
  0.000000	  0.000000	diff=3.19763e-11
  0.000000	  0.000000	diff=7.73356e-13
  0.000000	  0.000000	diff=4.61084e-13
  0.000000	  0.000000	diff=5.0132e-13
 -0.000000	 -0.000000	diff=1.61335e-12
  0.000000	  0.000000	diff=1.73892e-12
 -0.000000	 -0.000000	diff=2.05018e-12
  0.000000	  0.000000	diff=3.22962e-13
  0.000000	  0.000000	diff=1.53526e-10
  local_diff=3.81695e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=3.03344e-13
 -0.000000	 -0.000000	diff=1.71405e-12
  0.000000	  0.000000	diff=1.25083e-12
 -0.000000	 -0.000000	diff=1.48057e-12
  0.000000	  0.000000	diff=1.37361e-12
 -0.000000	 -0.000000	diff=6.16609e-13
 -0.000004	 -0.000004	diff=3.15039e-12
  0.000003	  0.000003	diff=2.31524e-11
 -0.000000	 -0.000000	diff=1.5346e-12
 -0.000000	 -0.000000	diff=1.41156e-12
  0.000000	  0.000000	diff=9.2051e-13
 -0.000000	 -0.000000	diff=1.03496e-12
  0.000000	  0.000000	diff=9.07658e-13
 -0.000000	 -0.000000	diff=2.45557e-13
 -0.000005	 -0.000005	diff=4.4159e-12
  0.000005	  0.000005	diff=9.57413e-11
 -0.000000	 -0.000000	diff=1.55948e-12
 -0.000000	 -0.000000	diff=1.02906e-12
  0.000000	  0.000000	diff=1.65737e-12
 -0.000000	 -0.000000	diff=9.45597e-13
  0.000000	  0.000000	diff=1.33956e-12
 -0.000000	 -0.000000	diff=1.40279e-12
 -0.000000	 -0.000000	diff=4.38472e-10
 -0.000000	 -0.000000	diff=4.44171e-11
  0.000000	  0.000000	diff=8.28977e-13
  0.000000	  0.000000	diff=1.18036e-12
 -0.000000	 -0.000000	diff=1.3417e-12
  0.000000	  0.000000	diff=1.87251e-12
 -0.000000	 -0.000000	diff=1.05276e-12
  0.000000	  0.000000	diff=6.56655e-13
  0.000000	  0.000000	diff=7.25683e-13
  0.000001	  0.000001	diff=3.07597e-09
  local_diff=3.7137e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=3.72117e-09
  0.000019	  0.000019	diff=1.29788e-08
 -0.000003	 -0.000003	diff=1.40956e-09
  0.000007	  0.000007	diff=4.88036e-09
  local_diff=2.29899e-08
# W_emb_tgt, [2 5]
  0.000043	  0.000043	diff=1.04284e-08
 -0.000002	 -0.000002	diff=4.58964e-11
  0.000022	  0.000022	diff=1.98808e-09
  0.000001	  0.000001	diff=1.08152e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=1.93765e-09
 -0.000001	 -0.000001	diff=1.96815e-10
  0.000005	  0.000005	diff=7.04624e-10
 -0.000001	 -0.000001	diff=2.6021e-10
  local_diff=1.66432e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.51525e-12
 -0.000000	 -0.000000	diff=1.23319e-12
 -0.000000	 -0.000000	diff=1.83514e-12
  0.000000	  0.000000	diff=5.35816e-13
 -0.000000	 -0.000000	diff=1.58231e-12
  0.000000	  0.000000	diff=1.49179e-12
  0.000000	  0.000000	diff=1.22137e-12
 -0.000000	 -0.000000	diff=3.3389e-13
  0.000000	  0.000000	diff=1.78542e-12
 -0.000000	 -0.000000	diff=1.06261e-12
 -0.000000	 -0.000000	diff=1.2158e-12
 -0.000000	 -0.000000	diff=7.33369e-13
  0.000000	  0.000000	diff=1.41131e-12
 -0.000000	 -0.000000	diff=1.35372e-12
  0.000000	  0.000000	diff=2.44421e-13
 -0.000001	 -0.000001	diff=1.10412e-11
  0.000000	  0.000000	diff=2.27274e-12
  0.000000	 -0.000000	diff=1.39501e-12
  0.000000	 -0.000000	diff=8.9087e-13
  0.000000	  0.000000	diff=1.83044e-12
  0.000000	  0.000000	diff=2.4251e-12
  0.000000	 -0.000000	diff=1.33957e-12
  0.000000	  0.000000	diff=3.04983e-12
 -0.000000	 -0.000000	diff=1.66169e-12
 -0.000000	 -0.000000	diff=1.43757e-12
  0.000000	  0.000000	diff=1.10427e-12
  0.000000	 -0.000000	diff=8.29171e-13
  0.000000	  0.000000	diff=1.97147e-12
 -0.000000	 -0.000000	diff=8.16662e-13
  0.000000	  0.000000	diff=1.92502e-12
 -0.000000	 -0.000000	diff=1.22951e-12
  0.000000	  0.000000	diff=3.99955e-12
  local_diff=5.6775e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.87044e-11
 -0.000000	 -0.000000	diff=1.76976e-10
 -0.000000	 -0.000000	diff=1.35661e-12
 -0.000000	 -0.000000	diff=2.58209e-11
 -0.000000	 -0.000000	diff=1.55753e-12
 -0.000000	 -0.000000	diff=2.95208e-11
 -0.000000	 -0.000000	diff=1.04461e-13
 -0.000000	 -0.000000	diff=5.81833e-11
  local_diff=3.32224e-10
# W_h, [2 4]
 -0.000023	 -0.000023	diff=1.38179e-12
 -0.000005	 -0.000005	diff=1.56151e-12
  0.000028	  0.000028	diff=1.27093e-12
  0.000006	  0.000006	diff=1.32908e-12
 -0.000005	 -0.000005	diff=6.88211e-12
 -0.000002	 -0.000002	diff=2.36272e-12
  0.000004	  0.000004	diff=1.35456e-10
 -0.000006	 -0.000006	diff=4.04394e-11
  local_diff=1.90684e-10
# W_soft, [5 2]
  0.000006	  0.000006	diff=2.04642e-12
 -0.000011	 -0.000011	diff=2.6137e-13
  0.000014	  0.000014	diff=7.83184e-13
  0.000001	  0.000001	diff=2.53685e-12
 -0.000011	 -0.000011	diff=2.18815e-12
  0.000000	  0.000000	diff=1.14232e-12
 -0.000003	 -0.000003	diff=1.04457e-12
  0.000006	  0.000006	diff=1.29526e-12
  0.000000	  0.000000	diff=2.13308e-12
 -0.000003	 -0.000003	diff=2.20074e-12
  local_diff=1.56319e-11
# Num params=224, abs_diff=4.58948e-08
Elapsed time is 4.427396 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.83649e-10
  0.000000	  0.000000	diff=8.49391e-10
  0.000000	  0.000000	diff=3.03275e-11
  0.000000	  0.000000	diff=5.1363e-10
 -0.000000	 -0.000000	diff=5.43173e-10
  0.000000	  0.000000	diff=5.62881e-10
  0.000014	  0.000012	diff=1.81161e-06
 -0.000005	 -0.000006	diff=7.40244e-07
  0.000000	  0.000000	diff=2.81907e-09
  0.000000	  0.000000	diff=1.73278e-09
 -0.000000	  0.000000	diff=2.92809e-10
 -0.000000	 -0.000000	diff=5.60734e-10
  0.000000	  0.000000	diff=2.31893e-09
  0.000000	  0.000000	diff=1.03168e-09
  0.000013	  0.000011	diff=1.96436e-06
 -0.000004	 -0.000005	diff=9.88368e-07
 -0.000000	 -0.000000	diff=9.21063e-12
 -0.000000	 -0.000000	diff=6.95873e-12
  0.000000	  0.000000	diff=1.55445e-11
  0.000000	  0.000000	diff=6.8979e-12
  0.000000	  0.000000	diff=8.17969e-12
  0.000000	  0.000000	diff=3.65599e-12
  0.000000	  0.000000	diff=4.47584e-10
 -0.000000	 -0.000000	diff=6.42276e-09
  0.000000	  0.000000	diff=6.3052e-12
  0.000000	  0.000000	diff=1.41021e-11
 -0.000000	 -0.000000	diff=1.81507e-11
 -0.000000	 -0.000000	diff=1.59881e-11
 -0.000000	 -0.000000	diff=1.39657e-11
 -0.000000	 -0.000000	diff=1.25572e-11
 -0.000000	 -0.000000	diff=1.61508e-08
  0.000000	  0.000000	diff=1.606e-08
  local_diff=5.55523e-06
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.77993e-11
  0.000000	  0.000000	diff=2.61353e-11
  0.000000	 -0.000000	diff=7.5989e-13
  0.000000	  0.000000	diff=2.60475e-12
 -0.000000	 -0.000000	diff=4.18064e-13
  0.000000	  0.000000	diff=2.65587e-12
  0.000000	 -0.000000	diff=2.04978e-07
 -0.000002	 -0.000001	diff=3.39251e-07
 -0.000000	 -0.000000	diff=2.48555e-11
 -0.000000	 -0.000000	diff=4.13941e-11
 -0.000000	 -0.000000	diff=2.56929e-12
 -0.000000	 -0.000000	diff=9.91451e-12
  0.000000	  0.000000	diff=2.75162e-14
 -0.000000	 -0.000000	diff=7.24201e-13
 -0.000001	 -0.000000	diff=7.70375e-07
  0.000008	  0.000007	diff=9.90326e-07
  0.000000	 -0.000000	diff=2.88519e-12
  0.000000	  0.000000	diff=1.01033e-12
 -0.000000	  0.000000	diff=3.10722e-12
  0.000000	  0.000000	diff=9.98217e-14
  0.000000	 -0.000000	diff=2.50078e-13
  0.000000	  0.000000	diff=7.01035e-13
  0.000000	  0.000000	diff=1.26621e-09
 -0.000000	 -0.000000	diff=3.58418e-09
  0.000000	  0.000000	diff=3.96055e-14
 -0.000000	 -0.000000	diff=2.93134e-13
 -0.000000	 -0.000000	diff=2.51286e-12
 -0.000000	 -0.000000	diff=4.61623e-12
  0.000000	  0.000000	diff=2.52112e-12
 -0.000000	 -0.000000	diff=1.32045e-14
 -0.000000	 -0.000000	diff=3.46985e-09
  0.000000	  0.000000	diff=6.72214e-09
  local_diff=2.32012e-06
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.31876e-09
  0.000000	  0.000000	diff=7.0419e-09
 -0.000000	 -0.000000	diff=4.0295e-10
 -0.000000	 -0.000000	diff=1.6019e-09
  0.000000	  0.000000	diff=5.82535e-10
  0.000000	  0.000000	diff=5.04113e-09
 -0.000005	 -0.000004	diff=9.39379e-07
  0.000015	  0.000013	diff=2.03964e-06
 -0.000000	 -0.000000	diff=1.63132e-09
 -0.000000	 -0.000000	diff=9.92622e-09
  0.000000	 -0.000000	diff=5.96999e-10
  0.000000	 -0.000000	diff=4.04869e-09
 -0.000000	 -0.000000	diff=6.74665e-10
  0.000000	 -0.000000	diff=8.2761e-09
  0.000008	  0.000006	diff=2.0247e-06
 -0.000003	  0.000001	diff=4.21183e-06
  0.000000	 -0.000000	diff=2.89021e-12
 -0.000000	 -0.000000	diff=1.82998e-12
  0.000000	  0.000000	diff=5.00112e-14
  0.000000	  0.000000	diff=9.78353e-13
  0.000000	 -0.000000	diff=2.8749e-12
 -0.000000	 -0.000000	diff=2.62024e-12
 -0.000000	 -0.000000	diff=1.09131e-10
 -0.000000	 -0.000000	diff=2.04035e-10
  0.000000	  0.000000	diff=1.88831e-14
  0.000000	 -0.000000	diff=5.08192e-13
  0.000000	  0.000000	diff=4.07549e-14
  0.000000	  0.000000	diff=1.78537e-13
  0.000000	  0.000000	diff=4.06739e-14
  0.000000	 -0.000000	diff=3.56473e-13
  0.000000	  0.000000	diff=1.85095e-11
 -0.000000	 -0.000000	diff=3.14003e-11
  0.000000	  0.000000	diff=4.95726e-12
 -0.000000	 -0.000000	diff=3.97926e-11
 -0.000000	 -0.000000	diff=1.87836e-11
 -0.000000	 -0.000000	diff=2.47574e-11
 -0.000000	 -0.000000	diff=8.38583e-12
 -0.000000	 -0.000000	diff=3.3456e-11
  0.000000	  0.000000	diff=6.23442e-09
 -0.000000	 -0.000000	diff=2.01193e-08
  0.000000	  0.000000	diff=7.53867e-12
  0.000000	  0.000000	diff=5.8057e-11
  0.000000	  0.000000	diff=1.1018e-11
 -0.000000	 -0.000000	diff=1.65865e-10
  0.000000	  0.000000	diff=1.31225e-11
  0.000000	 -0.000000	diff=1.45358e-10
  0.000000	  0.000000	diff=6.08531e-08
  0.000000	  0.000000	diff=1.22113e-07
  local_diff=9.46692e-06
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=9.40292e-12
 -0.000000	 -0.000000	diff=6.83583e-12
  0.000000	  0.000000	diff=6.89038e-12
  0.000000	  0.000000	diff=1.34087e-11
  0.000000	  0.000000	diff=2.53568e-12
 -0.000000	 -0.000000	diff=4.53157e-12
 -0.000001	 -0.000002	diff=3.21744e-07
  0.000012	  0.000012	diff=4.47954e-07
 -0.000000	 -0.000000	diff=2.17402e-11
  0.000000	 -0.000000	diff=1.82242e-10
 -0.000000	 -0.000000	diff=3.2161e-11
 -0.000000	 -0.000000	diff=3.63583e-11
 -0.000000	 -0.000000	diff=2.02859e-11
 -0.000000	 -0.000000	diff=8.66399e-11
 -0.000011	 -0.000008	diff=2.63507e-06
  0.000014	  0.000011	diff=3.34346e-06
  0.000000	 -0.000000	diff=3.48645e-12
 -0.000000	 -0.000000	diff=2.19051e-12
  0.000000	  0.000000	diff=5.88629e-13
  0.000000	  0.000000	diff=2.13662e-13
  0.000000	  0.000000	diff=2.2069e-12
  0.000000	  0.000000	diff=1.76045e-12
  0.000000	  0.000000	diff=3.76354e-08
 -0.000000	 -0.000000	diff=5.12706e-08
  0.000000	  0.000000	diff=2.46658e-13
  0.000000	  0.000000	diff=5.63576e-13
 -0.000000	 -0.000000	diff=1.31659e-12
 -0.000000	 -0.000000	diff=2.48436e-12
  0.000000	 -0.000000	diff=4.75968e-14
 -0.000000	 -0.000000	diff=2.49466e-12
  0.000000	  0.000000	diff=2.95411e-08
  0.000000	  0.000000	diff=1.94989e-08
  local_diff=6.88661e-06
# W_emb_src, [2 5]
 -0.000017	 -0.000015	diff=2.03392e-06
  0.000030	  0.000029	diff=1.428e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=2.79106e-07
  0.000006	  0.000005	diff=2.81096e-07
 -0.000000	 -0.000000	diff=1.68823e-08
 -0.000000	 -0.000000	diff=6.84364e-09
  local_diff=4.04585e-06
# W_emb_tgt, [2 5]
  0.000036	  0.000037	diff=9.37952e-07
 -0.000002	 -0.000003	diff=5.97618e-07
  0.000008	  0.000010	diff=1.998e-06
  0.000003	  0.000002	diff=9.17891e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000008	  0.000009	diff=9.37788e-07
  0.000001	  0.000000	diff=5.8288e-07
  0.000014	  0.000015	diff=2.09019e-07
 -0.000000	 -0.000001	diff=6.21453e-08
  local_diff=6.2433e-06
# W_tgt_char{1}, [8 4]
 -0.000002	 -0.000002	diff=6.60019e-12
  0.000007	  0.000007	diff=1.54003e-11
  0.000002	  0.000002	diff=1.73749e-11
 -0.000003	 -0.000003	diff=7.06276e-11
  0.000000	  0.000000	diff=4.09938e-12
  0.000002	  0.000002	diff=1.75367e-11
 -0.005938	 -0.005938	diff=5.97259e-08
  0.016186	  0.016186	diff=9.23255e-08
 -0.000003	 -0.000003	diff=1.49245e-11
  0.000004	  0.000004	diff=3.29863e-11
  0.000002	  0.000002	diff=2.06272e-11
 -0.000003	 -0.000003	diff=8.52296e-11
 -0.000000	 -0.000000	diff=1.1725e-11
 -0.000003	 -0.000003	diff=3.33655e-11
 -0.006353	 -0.006353	diff=9.92002e-08
  0.020978	  0.020978	diff=1.70073e-07
 -0.000000	 -0.000000	diff=1.35064e-12
  0.000000	  0.000000	diff=1.27914e-12
  0.000000	  0.000000	diff=6.43635e-13
 -0.000000	 -0.000000	diff=6.46744e-14
  0.000000	  0.000000	diff=2.18908e-12
  0.000000	  0.000000	diff=8.66416e-13
 -0.000031	 -0.000031	diff=7.29194e-09
  0.000049	  0.000049	diff=4.06847e-12
 -0.000000	 -0.000000	diff=2.18814e-12
  0.000000	  0.000000	diff=6.90943e-14
  0.000000	  0.000000	diff=1.03235e-12
 -0.000000	 -0.000000	diff=1.89125e-12
  0.000000	  0.000000	diff=1.08743e-12
  0.000000	  0.000000	diff=5.56054e-13
 -0.000038	 -0.000038	diff=1.08522e-12
  0.000052	  0.000052	diff=3.10696e-08
  local_diff=4.60035e-07
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.003823	  0.003823	diff=2.28749e-07
 -0.010427	 -0.010423	diff=3.94901e-06
  0.004257	  0.004256	diff=7.36723e-07
 -0.001886	 -0.001888	diff=1.46221e-06
  0.002599	  0.002599	diff=8.2249e-07
  0.004582	  0.004578	diff=4.55576e-06
  local_diff=1.17549e-05
# W_h, [2 4]
  0.000002	  0.000002	diff=7.44124e-08
  0.000000	  0.000000	diff=8.32383e-08
 -0.000003	 -0.000003	diff=1.15538e-07
 -0.000001	 -0.000001	diff=1.24265e-07
 -0.000005	 -0.000005	diff=4.38147e-08
 -0.000005	 -0.000005	diff=4.96119e-08
 -0.000005	 -0.000004	diff=2.14492e-07
 -0.000009	 -0.000009	diff=2.04525e-07
  local_diff=9.09897e-07
# W_soft, [5 2]
 -0.000016	 -0.000016	diff=4.37937e-13
  0.000012	  0.000012	diff=7.48704e-13
  0.000018	  0.000018	diff=1.26094e-13
 -0.000016	 -0.000016	diff=3.94884e-14
  0.000002	  0.000002	diff=1.10004e-12
 -0.000006	 -0.000006	diff=2.30782e-13
  0.000007	  0.000007	diff=1.01095e-12
 -0.000000	 -0.000000	diff=3.7718e-13
 -0.000003	 -0.000003	diff=1.21102e-13
  0.000002	  0.000002	diff=5.24088e-13
  local_diff=4.71636e-12
# W_soft_char, [5 2]
 -0.001129	 -0.001129	diff=1.43133e-09
  0.000573	  0.000573	diff=1.43051e-09
 -0.001127	 -0.001127	diff=1.43468e-09
  0.000950	  0.000950	diff=1.43304e-09
  0.000733	  0.000733	diff=1.43271e-09
  0.000187	  0.000187	diff=3.75942e-09
 -0.005202	 -0.005202	diff=3.75954e-09
  0.000188	  0.000188	diff=3.75731e-09
  0.002895	  0.002895	diff=3.75888e-09
  0.001931	  0.001931	diff=3.75729e-09
  local_diff=2.59547e-08
# Num params=234, abs_diff=4.76689e-05
Elapsed time is 5.513069 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=3.91482e-09
 -0.000000	 -0.000000	diff=2.48556e-10
 -0.000000	 -0.000000	diff=4.84516e-10
 -0.000000	 -0.000000	diff=4.37215e-11
 -0.000000	 -0.000000	diff=3.40246e-09
 -0.000000	 -0.000000	diff=3.7172e-10
  0.000021	  0.000020	diff=1.39538e-06
 -0.000007	 -0.000007	diff=1.07627e-07
  0.000000	  0.000000	diff=5.56973e-09
  0.000000	  0.000000	diff=3.20795e-10
  0.000000	  0.000000	diff=6.39306e-10
  0.000000	  0.000000	diff=4.90883e-11
  0.000000	  0.000000	diff=5.06782e-09
  0.000000	  0.000000	diff=5.73414e-10
 -0.000028	 -0.000026	diff=1.92086e-06
  0.000010	  0.000010	diff=1.28745e-07
  0.000000	  0.000000	diff=3.15639e-11
  0.000000	  0.000000	diff=4.07321e-12
  0.000000	  0.000000	diff=5.71261e-11
  0.000000	  0.000000	diff=8.26166e-12
  0.000000	  0.000000	diff=1.04344e-10
 -0.000000	 -0.000000	diff=9.33063e-12
 -0.000000	 -0.000000	diff=4.25242e-08
  0.000000	  0.000000	diff=6.00739e-09
 -0.000000	 -0.000000	diff=2.67863e-11
 -0.000000	 -0.000000	diff=1.52616e-12
 -0.000000	 -0.000000	diff=4.81359e-11
 -0.000000	 -0.000000	diff=4.61463e-12
 -0.000000	 -0.000000	diff=8.36984e-11
  0.000000	  0.000000	diff=6.4849e-12
  0.000000	  0.000000	diff=3.44073e-08
 -0.000000	 -0.000000	diff=5.48329e-09
  local_diff=3.66211e-06
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.62027e-10
 -0.000000	 -0.000000	diff=1.94271e-11
  0.000000	  0.000000	diff=8.60512e-11
 -0.000000	 -0.000000	diff=1.94792e-12
  0.000000	  0.000000	diff=3.8198e-11
  0.000000	  0.000000	diff=3.96929e-12
 -0.000040	 -0.000038	diff=2.26416e-06
 -0.000010	 -0.000010	diff=3.25863e-07
 -0.000000	 -0.000000	diff=1.28469e-10
  0.000000	  0.000000	diff=1.51001e-11
 -0.000000	 -0.000000	diff=6.48179e-11
  0.000000	  0.000000	diff=2.67222e-13
 -0.000000	 -0.000000	diff=3.21914e-11
 -0.000000	 -0.000000	diff=5.41393e-12
  0.000032	  0.000031	diff=1.78595e-06
  0.000008	  0.000008	diff=2.73208e-07
  0.000000	  0.000000	diff=5.58847e-12
 -0.000000	 -0.000000	diff=6.11023e-14
  0.000000	  0.000000	diff=4.01225e-12
 -0.000000	 -0.000000	diff=2.46257e-13
  0.000000	  0.000000	diff=8.94574e-14
  0.000000	  0.000000	diff=2.83096e-12
 -0.000001	 -0.000001	diff=7.19807e-08
 -0.000000	 -0.000000	diff=4.80759e-09
 -0.000000	 -0.000000	diff=9.41439e-13
  0.000000	  0.000000	diff=2.49894e-12
 -0.000000	 -0.000000	diff=6.94062e-12
  0.000000	  0.000000	diff=5.70917e-13
 -0.000000	 -0.000000	diff=7.76213e-13
 -0.000000	 -0.000000	diff=1.18457e-12
  0.000001	  0.000001	diff=8.55218e-08
  0.000000	  0.000000	diff=4.97906e-09
  local_diff=4.81705e-06
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.25248e-09
  0.000000	  0.000000	diff=1.27815e-09
 -0.000000	 -0.000000	diff=1.07361e-09
 -0.000000	 -0.000000	diff=5.43365e-10
 -0.000000	 -0.000000	diff=2.27371e-09
  0.000000	  0.000000	diff=3.63195e-10
  0.000004	  0.000005	diff=1.07413e-06
 -0.000005	 -0.000005	diff=3.07746e-08
 -0.000000	  0.000000	diff=2.93738e-09
 -0.000000	 -0.000000	diff=1.66492e-09
  0.000000	  0.000000	diff=1.89147e-09
  0.000000	  0.000000	diff=7.39411e-10
  0.000000	  0.000000	diff=3.2396e-09
 -0.000000	 -0.000000	diff=3.83251e-10
 -0.000002	 -0.000004	diff=2.3607e-06
  0.000028	  0.000028	diff=3.21996e-07
  0.000000	 -0.000000	diff=2.27496e-13
 -0.000000	 -0.000000	diff=1.52253e-13
  0.000000	  0.000000	diff=1.02498e-13
  0.000000	  0.000000	diff=4.00542e-13
  0.000000	 -0.000000	diff=1.00893e-13
  0.000000	 -0.000000	diff=1.76327e-12
 -0.000000	 -0.000000	diff=1.75761e-10
 -0.000000	 -0.000000	diff=7.10657e-11
  0.000000	  0.000000	diff=8.35483e-14
  0.000000	  0.000000	diff=2.44961e-12
  0.000000	  0.000000	diff=2.7756e-12
  0.000000	  0.000000	diff=2.14213e-12
  0.000000	  0.000000	diff=2.7094e-12
  0.000000	  0.000000	diff=1.86675e-12
  0.000000	  0.000000	diff=1.47768e-11
  0.000000	  0.000000	diff=4.85064e-12
  0.000000	  0.000000	diff=1.13577e-11
 -0.000000	 -0.000000	diff=1.41127e-11
 -0.000000	 -0.000000	diff=5.54845e-11
  0.000000	  0.000000	diff=7.33711e-12
  0.000000	  0.000000	diff=4.72691e-11
 -0.000000	 -0.000000	diff=3.23507e-12
  0.000000	  0.000000	diff=4.90074e-08
  0.000001	  0.000001	diff=1.55713e-08
  0.000000	 -0.000000	diff=2.77828e-11
  0.000000	  0.000000	diff=1.94718e-11
 -0.000000	 -0.000000	diff=1.6036e-11
 -0.000000	 -0.000000	diff=1.46101e-11
 -0.000000	 -0.000000	diff=3.07883e-11
  0.000000	  0.000000	diff=3.71274e-13
 -0.000000	 -0.000000	diff=4.56501e-09
 -0.000000	 -0.000000	diff=2.86982e-09
  local_diff=3.87878e-06
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=4.43349e-11
 -0.000000	 -0.000000	diff=1.05399e-11
 -0.000000	 -0.000000	diff=8.7039e-11
 -0.000000	 -0.000000	diff=1.82587e-11
 -0.000000	 -0.000000	diff=2.37106e-11
 -0.000000	 -0.000000	diff=1.28665e-11
  0.000005	  0.000007	diff=1.69598e-06
 -0.000007	 -0.000007	diff=2.67144e-07
 -0.000000	 -0.000000	diff=4.01958e-11
 -0.000000	 -0.000000	diff=1.59843e-11
 -0.000000	 -0.000000	diff=4.91439e-11
 -0.000000	 -0.000000	diff=2.20018e-12
 -0.000000	 -0.000000	diff=2.00677e-12
 -0.000000	 -0.000000	diff=7.79749e-12
  0.000009	  0.000010	diff=1.22339e-06
  0.000001	  0.000001	diff=4.49318e-08
  0.000000	  0.000000	diff=8.18662e-13
 -0.000000	 -0.000000	diff=1.69279e-12
 -0.000000	 -0.000000	diff=3.83239e-12
 -0.000000	 -0.000000	diff=1.10127e-12
  0.000000	 -0.000000	diff=5.17665e-12
 -0.000000	 -0.000000	diff=1.32682e-12
 -0.000000	  0.000000	diff=1.13257e-07
 -0.000001	 -0.000001	diff=2.13477e-08
  0.000000	 -0.000000	diff=3.01891e-12
  0.000000	  0.000000	diff=1.63805e-12
  0.000000	  0.000000	diff=5.68165e-12
  0.000000	  0.000000	diff=1.37254e-12
  0.000000	  0.000000	diff=2.99852e-12
  0.000000	  0.000000	diff=1.52309e-12
  0.000000	 -0.000000	diff=1.97024e-07
  0.000001	  0.000001	diff=3.60204e-08
  local_diff=3.59944e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000016	 -0.000015	diff=7.95045e-07
  0.000026	  0.000024	diff=1.19379e-06
 -0.000006	 -0.000005	diff=6.14896e-07
  0.000013	  0.000013	diff=8.34154e-07
  local_diff=3.43789e-06
# W_emb_tgt, [2 5]
  0.000075	  0.000073	diff=1.56511e-06
  0.000003	  0.000002	diff=1.15895e-06
  0.000039	  0.000037	diff=2.14417e-06
 -0.000001	 -0.000002	diff=1.13881e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=2.5975e-07
  0.000001	  0.000000	diff=2.10888e-07
  0.000009	  0.000009	diff=6.10549e-09
  0.000000	  0.000000	diff=6.49892e-08
  local_diff=6.54877e-06
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.57146e-11
 -0.000000	 -0.000000	diff=7.75507e-13
 -0.000000	 -0.000000	diff=8.45345e-13
  0.000000	  0.000000	diff=5.86072e-12
 -0.000000	 -0.000000	diff=1.48773e-11
  0.000000	  0.000000	diff=1.84043e-11
  0.000000	  0.000000	diff=4.66218e-10
 -0.000000	 -0.000000	diff=1.5159e-10
  0.000000	  0.000000	diff=4.3804e-11
 -0.000000	 -0.000000	diff=4.54239e-11
 -0.000000	 -0.000000	diff=4.28745e-12
 -0.000000	 -0.000000	diff=5.39082e-12
  0.000000	  0.000000	diff=4.07963e-11
 -0.000000	 -0.000000	diff=4.10882e-11
  0.000000	  0.000000	diff=2.83663e-08
 -0.000001	 -0.000000	diff=4.31403e-08
  0.000000	  0.000000	diff=4.79234e-13
  0.000000	 -0.000000	diff=1.22197e-12
  0.000000	 -0.000000	diff=9.10445e-14
  0.000000	  0.000000	diff=2.66759e-12
  0.000000	  0.000000	diff=3.9811e-13
  0.000000	 -0.000000	diff=7.54554e-13
  0.000000	  0.000000	diff=9.5308e-11
 -0.000000	 -0.000000	diff=1.53562e-10
  0.000000	 -0.000000	diff=1.58503e-12
  0.000000	  0.000000	diff=1.30722e-12
  0.000000	 -0.000000	diff=2.42298e-14
  0.000000	  0.000000	diff=1.58205e-12
  0.000000	 -0.000000	diff=1.6071e-12
  0.000000	  0.000000	diff=2.69622e-12
 -0.000000	 -0.000000	diff=8.46563e-11
  0.000000	  0.000000	diff=1.13274e-10
  local_diff=7.28229e-08
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.29783e-08
 -0.000000	 -0.000000	diff=1.40853e-09
 -0.000000	 -0.000000	diff=3.67422e-09
 -0.000000	 -0.000000	diff=2.14853e-10
 -0.000000	 -0.000000	diff=2.59119e-09
 -0.000000	 -0.000000	diff=1.84234e-10
 -0.000000	 -0.000000	diff=9.69548e-09
 -0.000000	 -0.000000	diff=5.10216e-10
  local_diff=4.1257e-08
# W_tgt_char{1}, [8 4]
 -0.000024	 -0.000024	diff=4.95439e-11
 -0.000007	 -0.000007	diff=1.75976e-11
 -0.000004	 -0.000004	diff=1.87378e-10
  0.000004	  0.000004	diff=5.69458e-11
 -0.000022	 -0.000022	diff=6.40362e-11
 -0.000004	 -0.000004	diff=3.45478e-12
 -0.011820	 -0.011820	diff=2.06184e-07
 -0.024556	 -0.024557	diff=2.87067e-07
 -0.000026	 -0.000026	diff=2.54985e-11
  0.000048	  0.000048	diff=3.77781e-11
  0.000005	  0.000005	diff=1.1866e-10
 -0.000002	 -0.000002	diff=3.67057e-11
 -0.000021	 -0.000021	diff=5.27237e-11
  0.000040	  0.000040	diff=1.38919e-11
 -0.012326	 -0.012327	diff=1.83626e-07
 -0.023641	 -0.023641	diff=1.81281e-07
 -0.000000	 -0.000000	diff=1.31094e-12
 -0.000000	 -0.000000	diff=3.04826e-12
 -0.000000	 -0.000000	diff=1.54268e-12
  0.000000	  0.000000	diff=1.19677e-12
 -0.000000	 -0.000000	diff=1.61523e-12
 -0.000000	 -0.000000	diff=5.70232e-13
 -0.000079	 -0.000079	diff=6.05452e-08
 -0.000137	 -0.000137	diff=7.19397e-11
 -0.000000	 -0.000000	diff=7.89407e-13
  0.000000	  0.000000	diff=3.20643e-12
 -0.000000	 -0.000000	diff=5.77821e-13
 -0.000000	 -0.000000	diff=7.70143e-13
 -0.000000	 -0.000000	diff=1.46819e-12
  0.000000	  0.000000	diff=2.94538e-12
 -0.000009	 -0.000009	diff=5.73415e-12
  0.000054	  0.000054	diff=1.66118e-08
  local_diff=9.36077e-07
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.033756	 -0.033759	diff=3.15127e-06
  0.018262	  0.018260	diff=1.95885e-06
 -0.005600	 -0.005603	diff=2.39103e-06
  0.005519	  0.005518	diff=7.64725e-07
 -0.006428	 -0.006428	diff=4.28791e-07
  0.001247	  0.001247	diff=1.20495e-07
  local_diff=8.81516e-06
# W_h, [2 4]
  0.000012	  0.000011	diff=5.8966e-07
 -0.000061	 -0.000061	diff=8.51864e-08
 -0.000014	 -0.000014	diff=7.14847e-07
  0.000074	  0.000074	diff=1.03255e-07
  0.000003	  0.000003	diff=1.12515e-07
 -0.000015	 -0.000015	diff=1.28131e-08
 -0.000021	 -0.000021	diff=3.33278e-07
  0.000026	  0.000026	diff=9.68709e-09
  local_diff=1.96124e-06
# W_soft, [5 2]
 -0.000040	 -0.000040	diff=9.91793e-13
  0.000016	  0.000016	diff=2.0318e-12
  0.000000	  0.000000	diff=5.30629e-13
  0.000008	  0.000008	diff=3.3936e-12
  0.000016	  0.000016	diff=1.57869e-12
  0.000002	  0.000002	diff=3.45968e-12
 -0.000005	 -0.000005	diff=1.29697e-12
  0.000012	  0.000012	diff=2.2856e-12
 -0.000005	 -0.000005	diff=3.14775e-12
 -0.000005	 -0.000005	diff=1.17869e-12
  local_diff=1.98952e-11
# W_soft_char, [5 2]
  0.012074	  0.012074	diff=8.03895e-08
 -0.022563	 -0.022563	diff=8.03938e-08
  0.012074	  0.012074	diff=8.03818e-08
 -0.002094	 -0.002094	diff=8.04032e-08
  0.000510	  0.000510	diff=8.03914e-08
  0.003798	  0.003798	diff=3.44013e-08
 -0.020952	 -0.020952	diff=3.44065e-08
  0.003802	  0.003802	diff=3.43992e-08
  0.012030	  0.012030	diff=3.44101e-08
  0.001322	  0.001322	diff=3.44025e-08
  local_diff=5.73979e-07
# Num params=276, abs_diff=3.83446e-05
Elapsed time is 7.467277 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=4.5813e-12
  0.000000	  0.000000	diff=2.84952e-12
  0.000000	  0.000000	diff=8.97866e-14
  0.000000	  0.000000	diff=1.18205e-13
 -0.000000	 -0.000000	diff=1.49107e-12
 -0.000000	 -0.000000	diff=7.63058e-13
  0.000004	  0.000004	diff=5.27366e-11
  0.000001	  0.000001	diff=2.34283e-11
  0.000000	  0.000000	diff=9.80897e-13
 -0.000000	 -0.000000	diff=1.9153e-12
 -0.000000	 -0.000000	diff=7.20591e-13
 -0.000000	 -0.000000	diff=4.19837e-13
  0.000000	  0.000000	diff=6.27107e-13
  0.000000	  0.000000	diff=5.99486e-14
 -0.000005	 -0.000005	diff=1.39666e-12
 -0.000001	 -0.000001	diff=6.30021e-11
 -0.000000	 -0.000000	diff=3.62259e-14
 -0.000000	 -0.000000	diff=7.32148e-13
  0.000000	  0.000000	diff=2.37797e-12
 -0.000000	 -0.000000	diff=1.18561e-12
  0.000000	  0.000000	diff=4.35724e-14
  0.000000	  0.000000	diff=4.84987e-15
 -0.000000	 -0.000000	diff=2.32492e-10
 -0.000000	 -0.000000	diff=1.88743e-12
  0.000000	  0.000000	diff=3.27495e-12
  0.000000	  0.000000	diff=2.64133e-12
 -0.000000	 -0.000000	diff=6.32223e-13
  0.000000	  0.000000	diff=5.05915e-13
 -0.000000	 -0.000000	diff=8.88852e-13
 -0.000000	 -0.000000	diff=3.14961e-13
  0.000000	  0.000000	diff=1.7914e-12
  0.000000	  0.000000	diff=5.41968e-11
  local_diff=4.58186e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.5363e-12
  0.000000	  0.000000	diff=5.9964e-13
 -0.000000	 -0.000000	diff=2.33249e-13
  0.000000	  0.000000	diff=9.02334e-13
 -0.000000	 -0.000000	diff=2.25822e-13
  0.000000	  0.000000	diff=1.36542e-12
  0.000002	  0.000002	diff=1.32167e-12
  0.000006	  0.000006	diff=6.23621e-11
  0.000000	  0.000000	diff=1.29235e-12
 -0.000000	 -0.000000	diff=8.56828e-13
  0.000000	  0.000000	diff=7.50371e-13
 -0.000000	 -0.000000	diff=2.84208e-13
  0.000000	  0.000000	diff=3.84201e-13
 -0.000000	 -0.000000	diff=1.76363e-12
 -0.000002	 -0.000002	diff=7.76234e-13
 -0.000005	 -0.000005	diff=5.22894e-11
 -0.000000	 -0.000000	diff=3.81227e-13
  0.000000	  0.000000	diff=1.74865e-12
  0.000000	 -0.000000	diff=1.41287e-12
  0.000000	  0.000000	diff=2.71022e-13
 -0.000000	 -0.000000	diff=1.74409e-12
  0.000000	  0.000000	diff=2.33249e-12
  0.000000	  0.000000	diff=6.7912e-11
  0.000000	  0.000000	diff=1.45618e-12
  0.000000	  0.000000	diff=8.38239e-13
 -0.000000	 -0.000000	diff=2.3365e-12
  0.000000	  0.000000	diff=1.74092e-12
 -0.000000	 -0.000000	diff=1.30088e-12
  0.000000	  0.000000	diff=1.3905e-12
 -0.000000	 -0.000000	diff=2.85861e-12
 -0.000000	 -0.000000	diff=1.93469e-12
 -0.000000	 -0.000000	diff=3.281e-10
  local_diff=5.45702e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=2.13206e-13
 -0.000000	 -0.000000	diff=1.51087e-12
 -0.000000	 -0.000000	diff=2.01882e-12
  0.000000	  0.000000	diff=7.04823e-13
 -0.000000	 -0.000000	diff=1.7337e-12
 -0.000000	 -0.000000	diff=1.81956e-12
  0.000001	  0.000001	diff=6.71494e-11
  0.000013	  0.000013	diff=2.69489e-10
  0.000000	  0.000000	diff=3.64074e-12
  0.000000	  0.000000	diff=3.51187e-13
  0.000000	  0.000000	diff=2.46439e-12
 -0.000000	 -0.000000	diff=2.43214e-12
  0.000000	  0.000000	diff=1.49764e-12
  0.000000	  0.000000	diff=9.55136e-13
 -0.000004	 -0.000004	diff=1.35194e-10
 -0.000023	 -0.000023	diff=2.7727e-10
  0.000000	  0.000000	diff=1.19976e-13
  0.000000	  0.000000	diff=7.05231e-15
  0.000000	 -0.000000	diff=1.09949e-13
  0.000000	 -0.000000	diff=2.27844e-13
  0.000000	 -0.000000	diff=2.42457e-14
  0.000000	 -0.000000	diff=1.79604e-13
  0.000000	  0.000000	diff=3.10884e-14
  0.000000	  0.000000	diff=8.34613e-13
  0.000000	  0.000000	diff=1.57019e-13
  0.000000	  0.000000	diff=2.95528e-13
  0.000000	 -0.000000	diff=1.52901e-13
  0.000000	 -0.000000	diff=3.92818e-13
  0.000000	 -0.000000	diff=3.60098e-14
  0.000000	 -0.000000	diff=4.90449e-14
  0.000000	  0.000000	diff=9.88605e-13
  0.000000	  0.000000	diff=2.27599e-12
  0.000000	  0.000000	diff=7.26258e-13
  0.000000	  0.000000	diff=2.73135e-13
  0.000000	  0.000000	diff=8.01713e-13
 -0.000000	 -0.000000	diff=4.73097e-13
  0.000000	  0.000000	diff=1.08711e-12
  0.000000	  0.000000	diff=2.24169e-14
 -0.000000	 -0.000000	diff=1.31967e-10
 -0.000000	 -0.000000	diff=6.59832e-12
 -0.000000	 -0.000000	diff=2.44735e-12
 -0.000000	 -0.000000	diff=6.29144e-13
 -0.000000	 -0.000000	diff=5.88289e-13
  0.000000	  0.000000	diff=3.20854e-13
 -0.000000	 -0.000000	diff=6.05928e-13
 -0.000000	 -0.000000	diff=2.62664e-12
  0.000000	  0.000000	diff=1.43784e-12
 -0.000000	 -0.000000	diff=1.67435e-10
  local_diff=1.09237e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.43979e-12
  0.000000	  0.000000	diff=5.049e-13
 -0.000000	 -0.000000	diff=1.30701e-12
  0.000000	  0.000000	diff=6.37683e-13
 -0.000000	 -0.000000	diff=1.5428e-12
  0.000000	  0.000000	diff=9.72742e-13
  0.000002	  0.000002	diff=8.09375e-12
  0.000006	  0.000006	diff=4.44047e-11
  0.000000	  0.000000	diff=2.09462e-12
  0.000000	  0.000000	diff=1.96619e-12
 -0.000000	 -0.000000	diff=3.37306e-13
  0.000000	  0.000000	diff=4.02743e-13
  0.000000	  0.000000	diff=3.62537e-13
  0.000000	  0.000000	diff=6.80441e-13
  0.000001	  0.000001	diff=6.05258e-11
  0.000010	  0.000010	diff=4.37531e-11
  0.000000	  0.000000	diff=6.4276e-13
  0.000000	  0.000000	diff=4.33351e-13
 -0.000000	 -0.000000	diff=2.4439e-12
  0.000000	  0.000000	diff=1.21445e-13
 -0.000000	 -0.000000	diff=1.88392e-12
  0.000000	  0.000000	diff=1.13468e-12
  0.000000	  0.000000	diff=2.77702e-10
  0.000000	  0.000000	diff=4.17093e-12
 -0.000000	 -0.000000	diff=1.47902e-12
 -0.000000	 -0.000000	diff=6.02318e-13
  0.000000	  0.000000	diff=7.94052e-13
 -0.000000	 -0.000000	diff=3.05559e-13
  0.000000	  0.000000	diff=1.45051e-12
 -0.000000	 -0.000000	diff=5.52424e-14
 -0.000000	 -0.000000	diff=4.61732e-12
 -0.000000	 -0.000000	diff=1.19275e-11
  local_diff=4.7879e-10
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=9.22769e-10
  0.000002	  0.000002	diff=1.91852e-09
 -0.000001	 -0.000001	diff=3.70523e-10
  0.000002	  0.000002	diff=8.24995e-10
  local_diff=4.03681e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=3.874e-09
 -0.000003	 -0.000003	diff=1.9781e-09
 -0.000025	 -0.000025	diff=7.06594e-10
 -0.000001	 -0.000001	diff=8.32213e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.22016e-10
 -0.000001	 -0.000001	diff=3.45643e-10
 -0.000004	 -0.000004	diff=6.52802e-11
 -0.000000	 -0.000000	diff=2.52144e-10
  local_diff=8.87599e-09
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.87446e-12
  0.000000	  0.000000	diff=1.12518e-14
  0.000000	  0.000000	diff=1.2103e-13
  0.000000	  0.000000	diff=1.41726e-15
  0.000000	 -0.000000	diff=4.87327e-13
  0.000000	  0.000000	diff=8.73023e-15
 -0.000000	 -0.000000	diff=3.03412e-12
 -0.000000	 -0.000000	diff=1.94623e-12
  0.000000	  0.000000	diff=2.29093e-13
  0.000000	 -0.000000	diff=1.31738e-14
  0.000000	 -0.000000	diff=1.17133e-13
  0.000000	  0.000000	diff=2.83931e-15
  0.000000	  0.000000	diff=1.59326e-13
  0.000000	 -0.000000	diff=8.03648e-15
 -0.000000	 -0.000000	diff=1.60352e-12
  0.000000	  0.000000	diff=1.08245e-13
  0.000000	  0.000000	diff=7.32366e-15
  0.000000	 -0.000000	diff=3.00777e-16
  0.000000	 -0.000000	diff=4.42332e-15
  0.000000	  0.000000	diff=8.65461e-17
  0.000000	  0.000000	diff=1.89347e-15
  0.000000	 -0.000000	diff=1.97068e-16
  0.000000	 -0.000000	diff=1.3578e-12
  0.000000	 -0.000000	diff=1.54057e-13
  0.000000	 -0.000000	diff=2.1922e-16
  0.000000	 -0.000000	diff=5.36781e-17
  0.000000	 -0.000000	diff=2.78909e-16
  0.000000	  0.000000	diff=3.16674e-17
  0.000000	 -0.000000	diff=1.90918e-16
  0.000000	 -0.000000	diff=2.67152e-17
  0.000000	  0.000000	diff=1.44487e-12
  0.000000	 -0.000000	diff=5.98636e-14
  local_diff=1.27575e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=3.59891e-15
  0.000000	 -0.000000	diff=5.3374e-15
  0.000000	  0.000000	diff=2.86814e-16
  0.000000	  0.000000	diff=2.17698e-16
  0.000000	 -0.000000	diff=1.91509e-15
  0.000000	 -0.000000	diff=3.43254e-15
  0.000000	  0.000000	diff=6.14626e-14
  0.000000	  0.000000	diff=1.32937e-12
  0.000000	 -0.000000	diff=2.68154e-16
  0.000000	 -0.000000	diff=2.11662e-15
  0.000000	  0.000000	diff=2.34143e-16
  0.000000	  0.000000	diff=3.12346e-16
  0.000000	 -0.000000	diff=3.14453e-16
  0.000000	 -0.000000	diff=1.41186e-15
 -0.000000	 -0.000000	diff=8.70575e-13
 -0.000000	 -0.000000	diff=4.45693e-13
  0.000000	  0.000000	diff=1.40771e-20
  0.000000	 -0.000000	diff=8.31204e-18
  0.000000	  0.000000	diff=2.67893e-17
  0.000000	  0.000000	diff=1.16285e-17
  0.000000	  0.000000	diff=2.07658e-17
  0.000000	  0.000000	diff=1.47616e-17
  0.000000	 -0.000000	diff=1.55433e-12
  0.000000	 -0.000000	diff=1.05059e-12
  0.000000	  0.000000	diff=6.96305e-18
  0.000000	 -0.000000	diff=2.11466e-17
  0.000000	  0.000000	diff=2.21621e-17
  0.000000	  0.000000	diff=3.7549e-17
  0.000000	  0.000000	diff=2.52648e-17
  0.000000	  0.000000	diff=2.39062e-17
  0.000000	  0.000000	diff=4.10839e-13
  0.000000	  0.000000	diff=7.45916e-14
  local_diff=5.81712e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.87302e-17
  0.000000	  0.000000	diff=8.39459e-17
  0.000000	 -0.000000	diff=3.13085e-18
  0.000000	  0.000000	diff=2.27344e-17
  0.000000	 -0.000000	diff=1.98365e-17
  0.000000	  0.000000	diff=7.60316e-17
  0.000000	  0.000000	diff=4.62835e-13
 -0.000000	 -0.000000	diff=7.49289e-13
  0.000000	 -0.000000	diff=8.14717e-17
  0.000000	  0.000000	diff=2.48423e-16
  0.000000	 -0.000000	diff=7.35038e-18
  0.000000	  0.000000	diff=4.0633e-17
  0.000000	 -0.000000	diff=5.2658e-17
  0.000000	  0.000000	diff=2.16394e-16
  0.000000	  0.000000	diff=2.87277e-13
 -0.000000	 -0.000000	diff=1.41348e-12
  0.000000	 -0.000000	diff=8.8256e-20
  0.000000	  0.000000	diff=2.98735e-19
  0.000000	 -0.000000	diff=3.87586e-19
  0.000000	  0.000000	diff=5.36802e-19
  0.000000	 -0.000000	diff=4.5622e-19
  0.000000	  0.000000	diff=8.25939e-19
 -0.000000	 -0.000000	diff=1.82254e-12
  0.000000	  0.000000	diff=1.02361e-12
  0.000000	 -0.000000	diff=3.74104e-19
  0.000000	  0.000000	diff=2.00509e-18
  0.000000	 -0.000000	diff=5.75819e-19
  0.000000	  0.000000	diff=1.64851e-18
  0.000000	 -0.000000	diff=1.30386e-18
  0.000000	  0.000000	diff=3.84594e-18
  0.000000	  0.000000	diff=1.03928e-13
  0.000000	 -0.000000	diff=4.2648e-13
  local_diff=6.29032e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=9.11253e-13
  0.000000	  0.000000	diff=4.06428e-13
 -0.000000	 -0.000000	diff=1.11018e-12
  0.000000	  0.000000	diff=8.99076e-13
 -0.000000	 -0.000000	diff=1.88358e-12
  0.000000	  0.000000	diff=2.63979e-12
 -0.000000	 -0.000000	diff=2.95705e-12
  0.000000	  0.000000	diff=3.04017e-14
  local_diff=1.08378e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=3.94155e-13
  0.000000	  0.000000	diff=7.25293e-13
 -0.000000	 -0.000000	diff=8.55563e-13
  0.000000	  0.000000	diff=1.39029e-12
 -0.000000	 -0.000000	diff=2.08366e-12
  0.000000	  0.000000	diff=1.50514e-12
 -0.000002	 -0.000002	diff=1.20076e-11
 -0.000002	 -0.000002	diff=1.31888e-11
  0.000000	  0.000000	diff=1.09112e-12
 -0.000000	 -0.000000	diff=3.65583e-13
  0.000000	  0.000000	diff=2.01668e-13
  0.000000	  0.000000	diff=5.85874e-13
  0.000000	  0.000000	diff=6.35163e-13
 -0.000000	 -0.000000	diff=7.26719e-13
  0.000001	  0.000001	diff=2.64149e-11
  0.000001	  0.000001	diff=3.46698e-11
 -0.000000	 -0.000000	diff=4.55734e-13
  0.000000	  0.000000	diff=3.23565e-13
 -0.000000	 -0.000000	diff=1.83907e-13
  0.000000	  0.000000	diff=8.69341e-13
 -0.000000	 -0.000000	diff=1.23789e-12
  0.000000	  0.000000	diff=2.0644e-12
 -0.000000	 -0.000000	diff=3.57783e-12
 -0.000000	 -0.000000	diff=1.14256e-12
  0.000000	  0.000000	diff=2.01712e-13
 -0.000000	 -0.000000	diff=1.75776e-12
  0.000000	  0.000000	diff=7.88119e-13
 -0.000000	 -0.000000	diff=3.46858e-13
  0.000000	  0.000000	diff=2.33379e-12
 -0.000000	 -0.000000	diff=1.81794e-12
  0.000000	  0.000000	diff=1.18414e-12
  0.000000	  0.000000	diff=3.01749e-12
  local_diff=1.18144e-10
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=1.0022e-12
  0.000000	  0.000000	diff=1.00462e-12
 -0.000000	 -0.000000	diff=3.60962e-13
  0.000000	  0.000000	diff=1.89104e-12
 -0.000000	 -0.000000	diff=6.15149e-13
  0.000000	  0.000000	diff=1.91011e-14
 -0.000000	 -0.000000	diff=6.60372e-13
 -0.000001	 -0.000001	diff=4.37287e-13
  0.000000	  0.000000	diff=1.35519e-12
 -0.000000	 -0.000000	diff=7.978e-13
  0.000000	  0.000000	diff=3.9305e-13
 -0.000000	 -0.000000	diff=6.5139e-14
  0.000000	  0.000000	diff=2.51086e-12
 -0.000000	 -0.000000	diff=9.02774e-13
  0.000001	  0.000001	diff=7.20179e-13
  0.000002	  0.000002	diff=7.15999e-13
 -0.000000	 -0.000000	diff=2.64846e-12
  0.000000	  0.000000	diff=2.16519e-13
 -0.000000	 -0.000000	diff=2.79199e-12
  0.000000	  0.000000	diff=2.74099e-14
 -0.000000	 -0.000000	diff=2.60992e-12
  0.000000	  0.000000	diff=2.4352e-13
 -0.000000	 -0.000000	diff=4.0428e-12
 -0.000000	 -0.000000	diff=6.47141e-13
  0.000000	  0.000000	diff=8.41952e-14
  0.000000	 -0.000000	diff=5.54062e-14
  0.000000	  0.000000	diff=2.16452e-14
  0.000000	 -0.000000	diff=2.06745e-14
  0.000000	  0.000000	diff=9.67902e-14
  0.000000	 -0.000000	diff=7.57663e-14
  0.000000	  0.000000	diff=3.14115e-13
  0.000000	  0.000000	diff=1.21339e-12
  local_diff=2.85615e-11
# W_tgt_char{3}, [8 4]
 -0.000000	 -0.000000	diff=2.80871e-12
  0.000000	  0.000000	diff=5.2942e-13
 -0.000000	 -0.000000	diff=2.77961e-12
  0.000000	  0.000000	diff=8.49591e-15
 -0.000000	 -0.000000	diff=2.77192e-12
  0.000000	  0.000000	diff=5.3489e-13
  0.000000	  0.000000	diff=3.67079e-14
  0.000002	  0.000002	diff=8.66032e-13
  0.000000	 -0.000000	diff=9.2886e-14
  0.000000	 -0.000000	diff=6.97557e-13
  0.000000	  0.000000	diff=5.49023e-14
  0.000000	 -0.000000	diff=2.54713e-15
  0.000000	 -0.000000	diff=4.41037e-14
  0.000000	 -0.000000	diff=6.95151e-13
 -0.000000	 -0.000000	diff=1.3323e-12
 -0.000002	 -0.000002	diff=1.56772e-12
  0.000000	  0.000000	diff=5.73891e-16
  0.000000	 -0.000000	diff=1.07882e-15
  0.000000	  0.000000	diff=3.4979e-16
  0.000000	  0.000000	diff=1.98306e-17
  0.000000	  0.000000	diff=8.69525e-16
  0.000000	 -0.000000	diff=1.0691e-15
 -0.000000	 -0.000000	diff=1.40253e-12
 -0.000000	 -0.000000	diff=4.83347e-13
  0.000000	 -0.000000	diff=2.10846e-16
  0.000000	 -0.000000	diff=9.04748e-18
  0.000000	  0.000000	diff=6.36783e-18
  0.000000	  0.000000	diff=3.69296e-17
  0.000000	 -0.000000	diff=1.61885e-16
  0.000000	  0.000000	diff=3.58903e-17
  0.000000	  0.000000	diff=1.41794e-12
  0.000000	  0.000000	diff=5.47086e-13
  local_diff=1.86783e-11
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=1.42884e-10
 -0.000002	 -0.000002	diff=8.42221e-11
 -0.000000	 -0.000000	diff=4.12251e-11
 -0.000000	 -0.000000	diff=1.34698e-10
 -0.000000	 -0.000000	diff=2.41035e-11
 -0.000000	 -0.000000	diff=1.35443e-10
  local_diff=5.62576e-10
# W_h, [2 4]
 -0.000002	 -0.000002	diff=1.21078e-12
  0.000006	  0.000006	diff=1.17229e-11
  0.000003	  0.000003	diff=2.22331e-12
 -0.000008	 -0.000008	diff=1.39798e-11
 -0.000003	 -0.000003	diff=6.90862e-12
  0.000002	  0.000002	diff=5.19392e-12
 -0.000011	 -0.000011	diff=4.39013e-11
 -0.000009	 -0.000009	diff=3.25339e-11
  local_diff=1.17674e-10
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=1.11954e-13
  0.000011	  0.000011	diff=1.02365e-13
 -0.000003	 -0.000003	diff=1.34567e-12
  0.000008	  0.000008	diff=1.44094e-14
 -0.000002	 -0.000002	diff=1.47251e-12
 -0.000018	 -0.000018	diff=1.69866e-12
  0.000011	  0.000011	diff=1.06474e-12
  0.000005	  0.000005	diff=7.38339e-13
  0.000008	  0.000008	diff=1.48779e-12
 -0.000006	 -0.000006	diff=1.4588e-12
  local_diff=9.49522e-12
# W_soft_char, [5 2]
 -0.000000	 -0.000000	diff=1.18952e-12
  0.000001	  0.000001	diff=1.25493e-12
 -0.000000	 -0.000000	diff=7.73635e-13
 -0.000000	 -0.000000	diff=1.12782e-12
  0.000000	  0.000000	diff=4.353e-14
  0.000001	  0.000001	diff=9.08135e-13
 -0.000002	 -0.000002	diff=1.43225e-13
  0.000001	  0.000001	diff=1.55941e-12
  0.000000	  0.000000	diff=1.28361e-12
  0.000001	  0.000001	diff=7.64063e-13
  local_diff=9.04788e-12
# Num params=404, abs_diff=1.63877e-08
Elapsed time is 13.298535 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.63664e-13
  0.000000	  0.000000	diff=4.35402e-13
  0.000000	  0.000000	diff=1.53979e-13
  0.000000	  0.000000	diff=8.8441e-13
  0.000000	  0.000000	diff=7.66865e-14
  0.000000	  0.000000	diff=5.33883e-13
 -0.000001	 -0.000001	diff=4.96034e-11
  0.000000	  0.000000	diff=5.06322e-12
 -0.000000	 -0.000000	diff=8.08706e-13
 -0.000000	 -0.000000	diff=7.79394e-14
 -0.000000	 -0.000000	diff=1.06896e-13
 -0.000000	 -0.000000	diff=2.76668e-13
 -0.000000	 -0.000000	diff=2.22852e-13
 -0.000000	 -0.000000	diff=2.36946e-13
  0.000002	  0.000002	diff=1.17868e-10
 -0.000001	 -0.000001	diff=1.00996e-11
 -0.000000	 -0.000000	diff=9.4589e-13
 -0.000000	 -0.000000	diff=2.59092e-13
 -0.000000	 -0.000000	diff=1.17999e-13
  0.000000	  0.000000	diff=9.31756e-13
 -0.000000	 -0.000000	diff=9.65724e-13
 -0.000000	 -0.000000	diff=8.64469e-14
  0.000000	  0.000000	diff=2.48677e-11
  0.000000	  0.000000	diff=3.06156e-13
  0.000000	  0.000000	diff=3.6359e-14
  0.000000	  0.000000	diff=1.8982e-13
  0.000000	  0.000000	diff=4.18404e-13
 -0.000000	 -0.000000	diff=4.5814e-13
  0.000000	  0.000000	diff=4.87665e-13
  0.000000	  0.000000	diff=8.49808e-13
 -0.000000	 -0.000000	diff=4.24145e-13
 -0.000000	 -0.000000	diff=6.4146e-11
  local_diff=2.82203e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.59886e-13
 -0.000000	 -0.000000	diff=5.24496e-13
  0.000000	  0.000000	diff=2.05963e-13
 -0.000000	 -0.000000	diff=7.43901e-13
  0.000000	  0.000000	diff=5.96495e-13
 -0.000000	 -0.000000	diff=1.38971e-13
 -0.000010	 -0.000010	diff=2.22676e-12
 -0.000013	 -0.000013	diff=5.86683e-13
 -0.000000	 -0.000000	diff=6.85085e-13
  0.000000	  0.000000	diff=2.97558e-13
 -0.000000	 -0.000000	diff=3.51835e-13
  0.000000	  0.000000	diff=4.70278e-14
 -0.000000	 -0.000000	diff=5.78358e-13
  0.000000	  0.000000	diff=2.6538e-13
  0.000015	  0.000015	diff=2.20174e-12
  0.000018	  0.000018	diff=2.10027e-12
  0.000000	  0.000000	diff=5.10188e-13
 -0.000000	 -0.000000	diff=3.30091e-13
  0.000000	  0.000000	diff=7.41814e-13
 -0.000000	 -0.000000	diff=2.95706e-13
  0.000000	  0.000000	diff=1.35796e-12
 -0.000000	 -0.000000	diff=4.11499e-13
 -0.000000	 -0.000000	diff=9.04327e-11
 -0.000000	 -0.000000	diff=4.98324e-13
 -0.000000	 -0.000000	diff=4.8434e-13
  0.000000	  0.000000	diff=4.12431e-13
 -0.000000	 -0.000000	diff=7.81639e-14
  0.000000	  0.000000	diff=1.99982e-13
 -0.000000	 -0.000000	diff=1.20611e-12
  0.000000	  0.000000	diff=2.73237e-13
  0.000000	  0.000000	diff=1.36994e-13
  0.000000	  0.000000	diff=2.45198e-10
  local_diff=3.54278e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.30836e-13
  0.000000	  0.000000	diff=7.52078e-14
 -0.000000	 -0.000000	diff=7.18008e-13
 -0.000000	 -0.000000	diff=4.16529e-13
 -0.000000	 -0.000000	diff=2.63437e-13
  0.000000	  0.000000	diff=4.50158e-13
 -0.000003	 -0.000003	diff=5.3978e-11
 -0.000002	 -0.000002	diff=1.10085e-10
  0.000000	  0.000000	diff=7.14665e-14
 -0.000000	 -0.000000	diff=3.97704e-13
  0.000000	  0.000000	diff=8.93229e-13
  0.000000	  0.000000	diff=1.24955e-12
  0.000000	  0.000000	diff=4.93469e-13
 -0.000000	 -0.000000	diff=2.35032e-13
 -0.000005	 -0.000005	diff=1.017e-10
  0.000008	  0.000008	diff=1.5084e-10
  0.000000	  0.000000	diff=3.83775e-13
  0.000000	 -0.000000	diff=1.02176e-12
 -0.000000	 -0.000000	diff=9.51102e-13
  0.000000	  0.000000	diff=8.28164e-13
  0.000000	 -0.000000	diff=5.38481e-14
  0.000000	 -0.000000	diff=3.37974e-13
  0.000000	  0.000000	diff=2.15015e-14
 -0.000000	 -0.000000	diff=2.22737e-13
 -0.000000	 -0.000000	diff=7.20568e-13
  0.000000	  0.000000	diff=5.21513e-13
  0.000000	  0.000000	diff=7.1079e-13
  0.000000	 -0.000000	diff=4.86628e-13
  0.000000	 -0.000000	diff=6.24178e-15
  0.000000	  0.000000	diff=3.14755e-13
 -0.000000	 -0.000000	diff=4.69408e-13
  0.000000	  0.000000	diff=3.96809e-13
  0.000000	  0.000000	diff=3.24405e-13
 -0.000000	 -0.000000	diff=5.48932e-13
  0.000000	  0.000000	diff=6.67862e-13
  0.000000	  0.000000	diff=8.66756e-13
  0.000000	  0.000000	diff=2.93909e-13
 -0.000000	 -0.000000	diff=6.34497e-13
 -0.000000	 -0.000000	diff=7.84869e-10
  0.000000	  0.000000	diff=8.2932e-12
 -0.000000	 -0.000000	diff=7.21058e-13
  0.000000	  0.000000	diff=6.47989e-13
  0.000000	  0.000000	diff=1.95446e-13
 -0.000000	 -0.000000	diff=2.79047e-13
 -0.000000	 -0.000000	diff=6.54214e-13
  0.000000	  0.000000	diff=9.55887e-14
 -0.000000	 -0.000000	diff=4.73683e-12
 -0.000000	 -0.000000	diff=1.64656e-10
  local_diff=1.39793e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.56627e-13
 -0.000000	 -0.000000	diff=2.8651e-13
 -0.000000	 -0.000000	diff=1.292e-12
 -0.000000	 -0.000000	diff=4.18776e-13
  0.000000	  0.000000	diff=5.84184e-13
 -0.000000	 -0.000000	diff=2.85181e-13
 -0.000005	 -0.000005	diff=2.94386e-11
 -0.000002	 -0.000002	diff=1.44854e-12
  0.000000	  0.000000	diff=1.97406e-13
 -0.000000	 -0.000000	diff=9.85751e-14
 -0.000000	 -0.000000	diff=9.73774e-14
 -0.000000	 -0.000000	diff=6.79093e-13
  0.000000	  0.000000	diff=1.51153e-12
 -0.000000	 -0.000000	diff=4.1157e-13
 -0.000012	 -0.000012	diff=1.92866e-10
  0.000003	  0.000003	diff=2.25878e-13
  0.000000	  0.000000	diff=2.23205e-13
 -0.000000	 -0.000000	diff=5.12979e-13
 -0.000000	 -0.000000	diff=3.25277e-13
 -0.000000	 -0.000000	diff=7.48068e-13
 -0.000000	 -0.000000	diff=6.01617e-14
 -0.000000	 -0.000000	diff=2.72222e-13
  0.000000	  0.000000	diff=1.01678e-09
 -0.000000	 -0.000000	diff=6.86145e-12
 -0.000000	 -0.000000	diff=2.40609e-13
  0.000000	  0.000000	diff=8.5436e-14
  0.000000	  0.000000	diff=1.08708e-13
  0.000000	  0.000000	diff=1.84543e-14
  0.000000	  0.000000	diff=1.48858e-13
  0.000000	  0.000000	diff=3.26713e-13
 -0.000001	 -0.000001	diff=6.75238e-12
  0.000000	  0.000000	diff=1.78311e-09
  local_diff=3.04688e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.13257e-10
 -0.000002	 -0.000002	diff=1.1607e-09
  0.000001	  0.000001	diff=2.30419e-10
 -0.000001	 -0.000001	diff=9.34861e-10
  local_diff=2.53924e-09
# W_emb_tgt, [2 5]
 -0.000001	 -0.000001	diff=2.17298e-08
 -0.000007	 -0.000007	diff=5.1282e-09
  0.000006	  0.000006	diff=6.3696e-09
 -0.000002	 -0.000002	diff=1.20515e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.02644e-09
 -0.000003	 -0.000003	diff=2.43642e-09
 -0.000001	 -0.000001	diff=3.43747e-09
 -0.000002	 -0.000002	diff=1.7029e-09
  local_diff=4.7036e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=2.00027e-13
  0.000000	 -0.000000	diff=3.53876e-15
  0.000000	  0.000000	diff=1.03515e-13
  0.000000	 -0.000000	diff=1.2221e-14
  0.000000	 -0.000000	diff=4.70004e-13
  0.000000	 -0.000000	diff=1.68453e-14
 -0.000000	 -0.000000	diff=8.99824e-13
 -0.000000	 -0.000000	diff=1.63797e-13
  0.000000	  0.000000	diff=4.42753e-13
 -0.000000	  0.000000	diff=1.47472e-12
 -0.000000	 -0.000000	diff=5.68026e-13
  0.000000	 -0.000000	diff=5.20854e-15
  0.000000	  0.000000	diff=1.41086e-13
 -0.000000	  0.000000	diff=7.45126e-13
 -0.000000	 -0.000000	diff=5.52633e-13
 -0.000000	 -0.000000	diff=7.52671e-14
  0.000000	  0.000000	diff=7.5239e-15
  0.000000	  0.000000	diff=7.89914e-16
  0.000000	 -0.000000	diff=4.65839e-15
  0.000000	 -0.000000	diff=8.22771e-17
  0.000000	  0.000000	diff=2.10675e-15
  0.000000	  0.000000	diff=5.02055e-16
  0.000000	 -0.000000	diff=5.62703e-13
  0.000000	 -0.000000	diff=3.52206e-13
  0.000000	  0.000000	diff=1.96603e-16
  0.000000	  0.000000	diff=7.09577e-17
  0.000000	 -0.000000	diff=4.95015e-16
  0.000000	 -0.000000	diff=1.65985e-16
  0.000000	 -0.000000	diff=1.21208e-16
  0.000000	 -0.000000	diff=3.38057e-17
  0.000000	  0.000000	diff=3.51135e-13
  0.000000	  0.000000	diff=2.89279e-13
  local_diff=7.44667e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=2.91691e-15
  0.000000	 -0.000000	diff=8.63635e-15
  0.000000	  0.000000	diff=7.1753e-16
  0.000000	  0.000000	diff=7.12669e-16
  0.000000	 -0.000000	diff=1.0178e-15
  0.000000	 -0.000000	diff=4.6243e-15
 -0.000000	 -0.000000	diff=2.15322e-13
  0.000000	  0.000000	diff=3.44698e-13
  0.000000	 -0.000000	diff=2.80882e-16
  0.000000	 -0.000000	diff=2.98484e-15
  0.000000	  0.000000	diff=4.12756e-16
  0.000000	  0.000000	diff=7.5103e-16
  0.000000	  0.000000	diff=8.56392e-18
  0.000000	 -0.000000	diff=1.45252e-15
 -0.000000	 -0.000000	diff=6.02947e-15
 -0.000000	 -0.000000	diff=2.05732e-13
  0.000000	 -0.000000	diff=6.85058e-18
  0.000000	 -0.000000	diff=4.09826e-17
  0.000000	  0.000000	diff=2.09996e-17
  0.000000	  0.000000	diff=2.36121e-17
  0.000000	  0.000000	diff=8.94147e-18
  0.000000	  0.000000	diff=2.94921e-18
  0.000000	 -0.000000	diff=6.68004e-13
  0.000000	 -0.000000	diff=7.71103e-13
  0.000000	  0.000000	diff=2.49194e-18
  0.000000	 -0.000000	diff=5.8912e-17
  0.000000	  0.000000	diff=2.12741e-17
  0.000000	  0.000000	diff=7.37673e-17
  0.000000	  0.000000	diff=2.07938e-17
  0.000000	  0.000000	diff=2.95272e-17
 -0.000000	  0.000000	diff=1.11573e-12
  0.000000	  0.000000	diff=3.3953e-13
  local_diff=3.69097e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=5.16122e-18
  0.000000	  0.000000	diff=7.88773e-17
  0.000000	 -0.000000	diff=4.33758e-18
  0.000000	  0.000000	diff=2.18858e-17
  0.000000	 -0.000000	diff=5.95911e-18
  0.000000	  0.000000	diff=6.17915e-17
 -0.000000	 -0.000000	diff=2.73834e-13
 -0.000000	 -0.000000	diff=2.06292e-13
  0.000000	 -0.000000	diff=3.10174e-17
  0.000000	  0.000000	diff=2.35991e-16
  0.000000	 -0.000000	diff=5.66031e-18
  0.000000	  0.000000	diff=1.67227e-17
  0.000000	 -0.000000	diff=9.24582e-18
  0.000000	  0.000000	diff=1.49581e-16
 -0.000000	 -0.000000	diff=9.25256e-13
  0.000000	  0.000000	diff=1.24379e-12
  0.000000	 -0.000000	diff=3.77938e-20
  0.000000	  0.000000	diff=5.71002e-19
  0.000000	 -0.000000	diff=2.76035e-19
  0.000000	  0.000000	diff=8.01838e-19
  0.000000	 -0.000000	diff=3.05801e-19
  0.000000	  0.000000	diff=1.36358e-18
 -0.000000	 -0.000000	diff=3.18071e-13
  0.000000	  0.000000	diff=2.74981e-14
  0.000000	  0.000000	diff=3.00703e-19
  0.000000	  0.000000	diff=1.01094e-18
  0.000000	 -0.000000	diff=3.94516e-19
  0.000000	  0.000000	diff=2.1505e-18
  0.000000	 -0.000000	diff=4.86068e-19
  0.000000	  0.000000	diff=3.73957e-18
 -0.000000	 -0.000000	diff=5.29717e-13
  0.000000	  0.000000	diff=1.01136e-13
  local_diff=3.62623e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.07627e-13
  0.000000	  0.000000	diff=5.274e-13
 -0.000000	 -0.000000	diff=1.61956e-13
  0.000000	  0.000000	diff=7.24399e-13
 -0.000000	 -0.000000	diff=7.95117e-13
  0.000000	  0.000000	diff=2.56264e-13
 -0.000000	 -0.000000	diff=3.86068e-14
  0.000000	  0.000000	diff=8.81761e-13
  local_diff=4.09313e-12
# W_h, [2 4]
  0.000003	  0.000003	diff=4.51324e-13
  0.000012	  0.000012	diff=5.05197e-13
 -0.000004	 -0.000004	diff=9.37328e-13
 -0.000016	 -0.000016	diff=2.25139e-13
  0.000003	  0.000003	diff=2.26244e-12
  0.000006	  0.000006	diff=1.0405e-11
  0.000008	  0.000008	diff=1.30059e-10
  0.000002	  0.000002	diff=1.53516e-10
  local_diff=2.98361e-10
# W_soft, [5 2]
 -0.000027	 -0.000027	diff=2.57295e-13
  0.000009	  0.000009	diff=4.11853e-13
  0.000004	  0.000004	diff=5.48978e-13
  0.000005	  0.000005	diff=4.69364e-13
  0.000009	  0.000009	diff=2.48185e-13
  0.000026	  0.000026	diff=2.82412e-14
 -0.000009	 -0.000009	diff=1.07672e-12
 -0.000005	 -0.000005	diff=1.51291e-13
 -0.000005	 -0.000005	diff=1.12215e-12
 -0.000008	 -0.000008	diff=8.22836e-13
  local_diff=5.13691e-12
# Num params=288, abs_diff=5.49789e-08
Elapsed time is 6.231471 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.00686e-11
  0.000000	  0.000000	diff=2.8967e-12
  0.000000	  0.000000	diff=5.10953e-14
  0.000000	  0.000000	diff=2.95776e-12
 -0.000000	 -0.000000	diff=4.30892e-12
 -0.000000	 -0.000000	diff=3.56571e-12
  0.000004	  0.000004	diff=4.13937e-10
  0.000001	  0.000001	diff=3.31014e-10
  0.000000	  0.000000	diff=2.17929e-12
 -0.000000	 -0.000000	diff=1.97013e-12
 -0.000000	 -0.000000	diff=5.02716e-12
 -0.000000	 -0.000000	diff=5.26816e-12
  0.000000	  0.000000	diff=4.19833e-13
  0.000000	  0.000000	diff=2.72229e-12
 -0.000005	 -0.000005	diff=3.13086e-10
 -0.000001	 -0.000001	diff=4.66931e-10
 -0.000000	 -0.000000	diff=3.90383e-14
 -0.000000	 -0.000000	diff=2.11018e-12
  0.000000	  0.000000	diff=3.30316e-12
 -0.000000	 -0.000000	diff=4.499e-12
  0.000000	  0.000000	diff=2.88063e-12
  0.000000	  0.000000	diff=5.76201e-15
 -0.000000	 -0.000000	diff=2.27147e-10
 -0.000000	 -0.000000	diff=7.29271e-12
  0.000000	  0.000000	diff=2.41169e-12
  0.000000	  0.000000	diff=2.00716e-13
 -0.000000	 -0.000000	diff=3.47162e-12
  0.000000	  0.000000	diff=5.05702e-13
 -0.000000	 -0.000000	diff=8.84545e-13
 -0.000000	 -0.000000	diff=5.36862e-12
  0.000000	  0.000000	diff=5.34405e-12
  0.000000	  0.000000	diff=5.96661e-11
  local_diff=1.89153e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.37876e-12
  0.000000	  0.000000	diff=2.23455e-12
 -0.000000	 -0.000000	diff=5.44915e-12
  0.000000	  0.000000	diff=4.78449e-12
 -0.000000	 -0.000000	diff=5.45517e-12
  0.000000	  0.000000	diff=4.31687e-12
  0.000002	  0.000002	diff=4.69636e-12
  0.000006	  0.000006	diff=6.44873e-10
  0.000000	  0.000000	diff=1.292e-12
 -0.000000	 -0.000000	diff=3.69234e-12
  0.000000	  0.000000	diff=2.09013e-12
 -0.000000	 -0.000000	diff=3.12437e-12
  0.000000	  0.000000	diff=2.46081e-12
 -0.000000	 -0.000000	diff=1.76193e-12
 -0.000002	 -0.000002	diff=1.00407e-11
 -0.000005	 -0.000005	diff=5.00667e-10
  0.000000	 -0.000000	diff=5.30302e-12
  0.000000	  0.000000	diff=3.93557e-12
  0.000000	 -0.000000	diff=1.41283e-12
  0.000000	  0.000000	diff=5.41324e-12
  0.000000	 -0.000000	diff=1.09798e-12
  0.000000	  0.000000	diff=2.33253e-12
  0.000000	  0.000000	diff=9.12525e-11
  0.000000	  0.000000	diff=1.0944e-11
  0.000000	  0.000000	diff=4.84622e-12
 -0.000000	 -0.000000	diff=2.33635e-12
  0.000000	  0.000000	diff=1.74088e-12
 -0.000000	 -0.000000	diff=4.14295e-12
  0.000000	  0.000000	diff=1.39038e-12
  0.000000	 -0.000000	diff=2.82578e-12
 -0.000000	 -0.000000	diff=1.68681e-11
 -0.000000	 -0.000000	diff=3.37179e-10
  local_diff=1.69534e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=6.04138e-12
 -0.000000	 -0.000000	diff=9.30638e-12
 -0.000000	 -0.000000	diff=3.70619e-12
  0.000000	  0.000000	diff=1.4727e-11
 -0.000000	 -0.000000	diff=7.54419e-12
 -0.000000	 -0.000000	diff=9.99665e-12
  0.000001	  0.000001	diff=4.6044e-10
  0.000013	  0.000013	diff=1.75642e-09
  0.000000	  0.000000	diff=9.48139e-12
  0.000000	  0.000000	diff=3.4914e-12
  0.000000	  0.000000	diff=1.39021e-11
 -0.000000	 -0.000000	diff=1.36014e-11
  0.000000	  0.000000	diff=1.65489e-12
  0.000000	  0.000000	diff=7.06409e-12
 -0.000004	 -0.000004	diff=1.93387e-09
 -0.000023	 -0.000023	diff=4.47722e-09
  0.000000	  0.000000	diff=1.1998e-13
  0.000000	  0.000000	diff=7.05744e-15
  0.000000	 -0.000000	diff=1.0995e-13
  0.000000	 -0.000000	diff=2.2785e-13
  0.000000	 -0.000000	diff=2.42439e-14
  0.000000	 -0.000000	diff=1.79604e-13
  0.000000	  0.000000	diff=3.6589e-14
  0.000000	  0.000000	diff=1.99818e-12
  0.000000	  0.000000	diff=1.57024e-13
  0.000000	  0.000000	diff=2.95538e-13
  0.000000	 -0.000000	diff=1.52903e-13
  0.000000	 -0.000000	diff=3.92829e-13
  0.000000	 -0.000000	diff=3.60078e-14
  0.000000	 -0.000000	diff=4.90446e-14
  0.000000	  0.000000	diff=1.84555e-12
  0.000000	  0.000000	diff=3.39346e-12
  0.000000	  0.000000	diff=4.95757e-12
  0.000000	  0.000000	diff=5.40655e-12
  0.000000	  0.000000	diff=2.03843e-12
 -0.000000	 -0.000000	diff=3.31371e-12
  0.000000	  0.000000	diff=1.08906e-12
  0.000000	  0.000000	diff=2.48098e-14
 -0.000000	 -0.000000	diff=1.10768e-10
 -0.000000	 -0.000000	diff=4.292e-11
 -0.000000	 -0.000000	diff=3.23866e-12
 -0.000000	 -0.000000	diff=6.36535e-13
 -0.000000	 -0.000000	diff=5.09628e-12
  0.000000	  0.000000	diff=5.35729e-12
 -0.000000	 -0.000000	diff=3.44922e-12
 -0.000000	 -0.000000	diff=2.6257e-12
  0.000000	  0.000000	diff=2.07966e-12
 -0.000000	 -0.000000	diff=1.7745e-10
  local_diff=9.10795e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.24168e-12
  0.000000	  0.000000	diff=5.02036e-13
 -0.000000	 -0.000000	diff=1.30508e-12
  0.000000	  0.000000	diff=3.48384e-12
 -0.000000	 -0.000000	diff=1.54375e-12
  0.000000	  0.000000	diff=1.86397e-12
  0.000002	  0.000002	diff=1.02156e-10
  0.000006	  0.000006	diff=4.83361e-10
  0.000000	  0.000000	diff=2.09757e-12
  0.000000	  0.000000	diff=1.9715e-12
 -0.000000	 -0.000000	diff=5.34828e-12
  0.000000	  0.000000	diff=2.44099e-12
  0.000000	  0.000000	diff=3.64103e-13
  0.000000	  0.000000	diff=3.52675e-12
  0.000001	  0.000001	diff=4.53312e-10
  0.000010	  0.000010	diff=1.02363e-09
  0.000000	  0.000000	diff=3.48497e-12
  0.000000	  0.000000	diff=6.11765e-12
 -0.000000	 -0.000000	diff=2.44385e-12
  0.000000	  0.000000	diff=1.2124e-13
  0.000000	 -0.000000	diff=3.80042e-12
  0.000000	  0.000000	diff=4.54945e-12
  0.000000	  0.000000	diff=2.69569e-10
  0.000000	  0.000000	diff=3.2455e-11
  0.000000	 -0.000000	diff=4.20536e-12
  0.000000	 -0.000000	diff=5.08208e-12
  0.000000	  0.000000	diff=7.93986e-13
 -0.000000	 -0.000000	diff=5.37912e-12
  0.000000	  0.000000	diff=4.29269e-12
 -0.000000	 -0.000000	diff=5.55582e-14
 -0.000000	 -0.000000	diff=5.99639e-11
 -0.000000	 -0.000000	diff=8.29418e-11
  local_diff=2.57641e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=1.45041e-09
  0.000002	  0.000002	diff=2.32488e-09
 -0.000001	 -0.000001	diff=1.29477e-11
  0.000002	  0.000002	diff=2.7647e-10
  local_diff=4.0647e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=1.85802e-09
 -0.000003	 -0.000003	diff=6.4039e-10
 -0.000025	 -0.000025	diff=3.181e-09
 -0.000001	 -0.000001	diff=1.43385e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.20018e-10
 -0.000001	 -0.000001	diff=1.55283e-10
 -0.000004	 -0.000004	diff=5.06028e-10
 -0.000000	 -0.000000	diff=8.85712e-11
  local_diff=7.2927e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=9.67706e-13
  0.000000	  0.000000	diff=1.12519e-14
  0.000000	  0.000000	diff=1.21029e-13
  0.000000	  0.000000	diff=1.41742e-15
  0.000000	 -0.000000	diff=4.87323e-13
  0.000000	  0.000000	diff=8.73053e-15
 -0.000000	 -0.000000	diff=2.64777e-12
 -0.000000	 -0.000000	diff=1.9467e-12
  0.000000	  0.000000	diff=2.29092e-13
  0.000000	 -0.000000	diff=1.31754e-14
  0.000000	 -0.000000	diff=1.17132e-13
  0.000000	  0.000000	diff=2.83953e-15
  0.000000	  0.000000	diff=1.59324e-13
  0.000000	 -0.000000	diff=8.03756e-15
 -0.000000	 -0.000000	diff=4.08048e-12
  0.000000	  0.000000	diff=2.95059e-12
  0.000000	  0.000000	diff=7.32362e-15
  0.000000	 -0.000000	diff=3.00793e-16
  0.000000	 -0.000000	diff=4.42328e-15
  0.000000	  0.000000	diff=8.65484e-17
  0.000000	  0.000000	diff=1.89347e-15
  0.000000	 -0.000000	diff=1.97079e-16
  0.000000	 -0.000000	diff=1.35776e-12
  0.000000	 -0.000000	diff=1.54051e-13
  0.000000	 -0.000000	diff=2.19222e-16
  0.000000	 -0.000000	diff=5.36821e-17
  0.000000	 -0.000000	diff=2.78912e-16
  0.000000	  0.000000	diff=3.16707e-17
  0.000000	 -0.000000	diff=1.90923e-16
  0.000000	 -0.000000	diff=2.67167e-17
  0.000000	  0.000000	diff=1.44486e-12
  0.000000	 -0.000000	diff=5.98717e-14
  local_diff=1.67842e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=3.59889e-15
  0.000000	 -0.000000	diff=5.33731e-15
  0.000000	  0.000000	diff=2.86818e-16
  0.000000	  0.000000	diff=2.17698e-16
  0.000000	 -0.000000	diff=1.91507e-15
  0.000000	 -0.000000	diff=3.43247e-15
  0.000000	  0.000000	diff=2.90475e-12
  0.000000	  0.000000	diff=1.32844e-12
  0.000000	 -0.000000	diff=2.68155e-16
  0.000000	 -0.000000	diff=2.11659e-15
  0.000000	  0.000000	diff=2.34144e-16
  0.000000	  0.000000	diff=3.12343e-16
  0.000000	 -0.000000	diff=3.14447e-16
  0.000000	 -0.000000	diff=1.41184e-15
 -0.000000	 -0.000000	diff=8.70624e-13
 -0.000000	 -0.000000	diff=5.23866e-12
  0.000000	  0.000000	diff=1.39892e-20
  0.000000	 -0.000000	diff=8.31214e-18
  0.000000	  0.000000	diff=2.67891e-17
  0.000000	  0.000000	diff=1.16282e-17
  0.000000	  0.000000	diff=2.07656e-17
  0.000000	  0.000000	diff=1.47611e-17
  0.000000	 -0.000000	diff=1.55431e-12
  0.000000	 -0.000000	diff=1.05057e-12
  0.000000	  0.000000	diff=6.96302e-18
  0.000000	 -0.000000	diff=2.11464e-17
  0.000000	  0.000000	diff=2.2162e-17
  0.000000	  0.000000	diff=3.75485e-17
  0.000000	  0.000000	diff=2.52648e-17
  0.000000	  0.000000	diff=2.39057e-17
  0.000000	  0.000000	diff=4.10854e-13
  0.000000	  0.000000	diff=7.4598e-14
  local_diff=1.34525e-11
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.87301e-17
  0.000000	  0.000000	diff=8.39448e-17
  0.000000	 -0.000000	diff=3.13091e-18
  0.000000	  0.000000	diff=2.27341e-17
  0.000000	 -0.000000	diff=1.98364e-17
  0.000000	  0.000000	diff=7.60307e-17
  0.000000	  0.000000	diff=5.22083e-12
 -0.000000	 -0.000000	diff=4.93404e-12
  0.000000	 -0.000000	diff=8.14714e-17
  0.000000	  0.000000	diff=2.4842e-16
  0.000000	 -0.000000	diff=7.35044e-18
  0.000000	  0.000000	diff=4.06325e-17
  0.000000	 -0.000000	diff=5.26576e-17
  0.000000	  0.000000	diff=2.1639e-16
  0.000000	  0.000000	diff=2.8841e-13
 -0.000000	 -0.000000	diff=4.26939e-12
  0.000000	 -0.000000	diff=8.82562e-20
  0.000000	  0.000000	diff=2.98736e-19
  0.000000	 -0.000000	diff=3.87587e-19
  0.000000	  0.000000	diff=5.36802e-19
  0.000000	 -0.000000	diff=4.56221e-19
  0.000000	  0.000000	diff=8.2594e-19
  0.000000	 -0.000000	diff=1.01963e-12
  0.000000	  0.000000	diff=1.02361e-12
  0.000000	 -0.000000	diff=3.741e-19
  0.000000	  0.000000	diff=2.00506e-18
  0.000000	 -0.000000	diff=5.75823e-19
  0.000000	  0.000000	diff=1.6485e-18
  0.000000	 -0.000000	diff=1.30386e-18
  0.000000	  0.000000	diff=3.84591e-18
  0.000000	  0.000000	diff=1.03902e-13
  0.000000	 -0.000000	diff=4.2645e-13
  local_diff=1.72872e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=6.5943e-12
  0.000000	  0.000000	diff=2.43731e-12
 -0.000000	 -0.000000	diff=1.72974e-12
  0.000000	  0.000000	diff=8.96495e-13
 -0.000000	 -0.000000	diff=4.72771e-12
  0.000000	  0.000000	diff=2.63766e-12
 -0.000000	 -0.000000	diff=2.72663e-12
  0.000000	  0.000000	diff=2.87164e-12
  local_diff=2.46215e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=9.62589e-12
  0.000000	  0.000000	diff=9.80009e-12
 -0.000000	 -0.000000	diff=8.55563e-12
  0.000000	  0.000000	diff=3.15016e-12
 -0.000000	 -0.000000	diff=1.90078e-12
  0.000000	  0.000000	diff=7.68592e-12
 -0.000019	 -0.000019	diff=1.2576e-10
 -0.000015	 -0.000015	diff=1.20519e-10
  0.000000	  0.000000	diff=4.57525e-13
 -0.000000	 -0.000000	diff=9.34017e-12
  0.000000	  0.000000	diff=3.66766e-12
  0.000000	  0.000000	diff=1.74393e-13
  0.000000	  0.000000	diff=6.67288e-13
 -0.000000	 -0.000000	diff=4.10149e-12
  0.000012	  0.000012	diff=2.81202e-10
  0.000008	  0.000008	diff=3.3533e-10
 -0.000000	 -0.000000	diff=1.02417e-11
  0.000000	  0.000000	diff=2.4487e-12
 -0.000000	 -0.000000	diff=3.84528e-12
  0.000000	  0.000000	diff=3.00907e-12
 -0.000000	 -0.000000	diff=1.01023e-12
  0.000000	  0.000000	diff=7.77767e-12
 -0.000000	 -0.000000	diff=3.0094e-11
 -0.000000	 -0.000000	diff=5.69199e-14
  0.000000	  0.000000	diff=2.01712e-12
 -0.000000	 -0.000000	diff=5.15981e-12
  0.000000	  0.000000	diff=9.17183e-12
 -0.000000	 -0.000000	diff=9.15293e-12
  0.000000	  0.000000	diff=6.00547e-13
 -0.000000	 -0.000000	diff=1.24951e-11
  0.000000	  0.000000	diff=4.72746e-13
  0.000000	  0.000000	diff=4.7228e-11
  local_diff=1.06672e-09
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=1.34666e-12
  0.000000	  0.000000	diff=4.3619e-12
 -0.000000	 -0.000000	diff=9.29396e-12
  0.000000	  0.000000	diff=3.827e-12
 -0.000000	 -0.000000	diff=5.2172e-12
  0.000000	  0.000000	diff=5.49333e-12
 -0.000003	 -0.000003	diff=6.60372e-12
 -0.000009	 -0.000009	diff=6.99581e-12
  0.000000	  0.000000	diff=2.18321e-12
 -0.000000	 -0.000000	diff=2.29366e-12
  0.000000	  0.000000	diff=3.9305e-12
 -0.000000	 -0.000000	diff=5.03295e-12
  0.000000	  0.000000	diff=8.05555e-12
 -0.000000	 -0.000000	diff=9.02774e-12
  0.000007	  0.000007	diff=7.20179e-12
  0.000018	  0.000018	diff=1.47565e-12
 -0.000000	 -0.000000	diff=9.43161e-12
  0.000000	  0.000000	diff=2.16519e-12
 -0.000000	 -0.000000	diff=1.08669e-11
  0.000000	  0.000000	diff=2.74099e-13
 -0.000000	 -0.000000	diff=9.04614e-12
  0.000000	  0.000000	diff=2.4352e-12
 -0.000000	 -0.000000	diff=1.20063e-11
 -0.000000	 -0.000000	diff=1.21558e-11
  0.000000	  0.000000	diff=8.41952e-13
  0.000000	 -0.000000	diff=5.54062e-13
  0.000000	  0.000000	diff=2.16452e-13
  0.000000	 -0.000000	diff=2.06745e-13
  0.000000	  0.000000	diff=9.67902e-13
  0.000000	 -0.000000	diff=7.57663e-13
  0.000000	  0.000000	diff=1.39119e-11
  0.000000	  0.000000	diff=2.35026e-11
  local_diff=1.81681e-10
# W_tgt_char{3}, [8 4]
 -0.000000	 -0.000000	diff=1.10341e-11
  0.000000	  0.000000	diff=5.2942e-12
 -0.000000	 -0.000000	diff=1.07431e-11
  0.000000	  0.000000	diff=8.49591e-14
 -0.000000	 -0.000000	diff=1.06662e-11
  0.000000	  0.000000	diff=5.3489e-12
  0.000001	  0.000001	diff=3.67079e-13
  0.000025	  0.000025	diff=2.97598e-12
  0.000000	 -0.000000	diff=9.2886e-13
  0.000000	 -0.000000	diff=6.97557e-12
  0.000000	  0.000000	diff=5.49023e-13
  0.000000	 -0.000000	diff=2.54713e-14
  0.000000	 -0.000000	diff=4.41037e-13
  0.000000	 -0.000000	diff=6.95151e-12
 -0.000001	 -0.000001	diff=3.73002e-12
 -0.000022	 -0.000022	diff=7.06012e-12
  0.000000	  0.000000	diff=5.73891e-15
  0.000000	 -0.000000	diff=1.07882e-14
  0.000000	  0.000000	diff=3.4979e-15
  0.000000	  0.000000	diff=1.98306e-16
  0.000000	  0.000000	diff=8.69525e-15
  0.000000	 -0.000000	diff=1.0691e-14
 -0.000000	 -0.000000	diff=2.65666e-12
 -0.000000	 -0.000000	diff=8.50872e-13
  0.000000	 -0.000000	diff=2.10846e-15
  0.000000	 -0.000000	diff=9.04748e-17
  0.000000	  0.000000	diff=6.36783e-17
  0.000000	  0.000000	diff=3.69296e-16
  0.000000	 -0.000000	diff=1.61885e-15
  0.000000	  0.000000	diff=3.58903e-16
  0.000000	  0.000000	diff=2.8736e-12
  0.000000	  0.000000	diff=1.72665e-11
  local_diff=9.68679e-11
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000016	  0.000016	diff=1.42884e-09
 -0.000020	 -0.000020	diff=8.64958e-10
 -0.000002	 -0.000002	diff=4.2362e-10
 -0.000005	 -0.000005	diff=1.35266e-09
 -0.000001	 -0.000001	diff=2.52403e-10
 -0.000005	 -0.000005	diff=1.36011e-09
  local_diff=5.6826e-09
# W_h, [2 4]
 -0.000002	 -0.000002	diff=1.81827e-11
  0.000006	  0.000006	diff=1.18984e-10
  0.000003	  0.000003	diff=1.31547e-11
 -0.000008	 -0.000008	diff=1.44619e-10
 -0.000003	 -0.000003	diff=2.5095e-12
  0.000002	  0.000002	diff=5.00673e-11
 -0.000011	 -0.000011	diff=1.87894e-11
 -0.000009	 -0.000009	diff=1.33074e-10
  local_diff=4.9938e-10
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=2.95413e-12
  0.000011	  0.000011	diff=2.73981e-12
 -0.000003	 -0.000003	diff=7.03001e-12
  0.000008	  0.000008	diff=2.85658e-12
 -0.000002	 -0.000002	diff=4.21184e-12
 -0.000018	 -0.000018	diff=7.383e-12
  0.000011	  0.000011	diff=3.90691e-12
  0.000005	  0.000005	diff=7.38339e-13
  0.000008	  0.000008	diff=1.48779e-12
 -0.000006	 -0.000006	diff=4.22554e-12
  local_diff=3.75339e-11
# W_soft_char, [5 2]
 -0.000005	 -0.000005	diff=1.75796e-11
  0.000008	  0.000008	diff=1.25493e-11
 -0.000005	 -0.000005	diff=2.05201e-12
 -0.000002	 -0.000002	diff=5.59384e-12
  0.000003	  0.000003	diff=4.353e-13
  0.000007	  0.000007	diff=9.08135e-12
 -0.000024	 -0.000024	diff=4.2521e-12
  0.000007	  0.000007	diff=4.22538e-12
  0.000004	  0.000004	diff=4.21691e-12
  0.000007	  0.000007	diff=1.95629e-12
  local_diff=6.19421e-11
# Num params=404, abs_diff=3.43275e-08
Elapsed time is 14.126885 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.89253e-14
 -0.000000	 -0.000000	diff=3.80665e-13
  0.011919	  0.012356	diff=0.000436738
  0.000000	 -0.000000	diff=1.29395e-40
  0.000000	 -0.000000	diff=2.65023e-25
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.41404e-45
  0.000000	 -0.000000	diff=2.22235e-14
  0.000000	  0.000000	diff=7.91298e-13
 -0.015140	 -0.014509	diff=0.000631498
  0.000000	  0.000000	diff=1.39212e-40
  0.000000	 -0.000000	diff=3.6014e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.27927e-45
  0.000000	 -0.000000	diff=1.78724e-15
  0.000000	  0.000000	diff=5.13634e-39
 -0.001200	 -0.001196	diff=4.19215e-06
  0.000000	  0.000000	diff=1.24599e-41
  0.000000	  0.000000	diff=2.39132e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.35452e-56
  0.000000	  0.000000	diff=1.78724e-15
  0.000000	 -0.000000	diff=5.13634e-39
  0.001192	  0.001196	diff=4.17447e-06
  0.000000	 -0.000000	diff=1.23898e-41
  0.000000	 -0.000000	diff=2.36631e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.3542e-56
  local_diff=0.0010766
# W_tgt{1}, [8 6]
 -0.766914	 -0.785267	diff=0.018353
  0.000000	  0.000000	diff=1.06531e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.8815e-12
 -9.037399	 -9.410081	diff=0.372682
  0.054244	  0.055534	diff=0.00128949
 -0.000000	 -0.000000	diff=3.22055e-11
  0.000000	 -0.000000	diff=2.24719e-27
  1.007635	  0.981278	diff=0.0263573
  0.000000	  0.000000	diff=1.39069e-11
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.38594e-09
 12.379994	 11.758937	diff=0.621058
 -0.071480	 -0.069396	diff=0.00208473
  0.000000	  0.000000	diff=1.10955e-09
  0.000000	  0.000000	diff=1.34546e-26
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=1.49381e-27
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
  0.000000	 -0.000000	diff=2.84648e-29
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=3.20479e-13
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
 -0.000000	 -0.000000	diff=3.90064e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  local_diff=1.04184
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.35585e-26
  0.000000	  0.000000	diff=2.8781e-25
  0.011324	  0.011717	diff=0.000393193
  0.010423	  0.010755	diff=0.000331839
  local_diff=0.000725031
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.22647e-11
 -0.000000	 -0.000000	diff=7.69642e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-11.591312	-12.408891	diff=0.817579
-10.192270	-10.804343	diff=0.612073
  0.000000	  0.000000	diff=1.82339e-09
  0.000000	  0.000000	diff=2.75363e-10
  local_diff=1.42965
# W_soft, [5 2]
  0.117985	  0.117958	diff=2.65055e-05
  0.128902	  0.128874	diff=2.84991e-05
 -0.253645	 -0.253670	diff=2.57773e-05
 -0.106455	 -0.106480	diff=2.53615e-05
  0.113363	  0.113319	diff=4.41675e-05
 -0.001808	 -0.001808	diff=8.08635e-09
 -0.001955	 -0.001955	diff=8.59921e-09
  0.002521	  0.002521	diff=7.92679e-09
  0.001512	  0.001512	diff=7.7748e-09
 -0.000270	 -0.000270	diff=1.26002e-08
  local_diff=0.000150356
# Num params=110, abs_diff=2.47345
Elapsed time is 1.109223 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.34816e-20
 -0.000000	 -0.000000	diff=2.53023e-09
  0.000000	  0.000000	diff=4.3787e-23
  0.000000	 -0.000000	diff=2.83846e-15
  0.000000	 -0.000000	diff=2.28652e-28
  0.000000	  0.000000	diff=3.16321e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.98503e-20
  0.000000	  0.000000	diff=3.93833e-09
  0.000000	 -0.000000	diff=5.56607e-23
  0.000000	  0.000000	diff=3.60822e-15
  0.000000	  0.000000	diff=2.87025e-28
  0.000000	 -0.000000	diff=4.73009e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.51073e-51
  0.000000	  0.000000	diff=5.03598e-38
  0.000000	 -0.000000	diff=6.16669e-54
  0.000000	  0.000000	diff=7.00845e-46
  0.000000	  0.000000	diff=1.10983e-58
  0.000000	  0.000000	diff=2.51678e-53
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.8831e-45
  0.000000	 -0.000000	diff=2.23274e-32
  0.000000	  0.000000	diff=5.80397e-48
  0.000000	 -0.000000	diff=3.76267e-40
  0.000000	 -0.000000	diff=1.84266e-52
  0.000000	 -0.000000	diff=2.51047e-47
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=6.46857e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.55428e-54
  0.000000	  0.000000	diff=8.76417e-53
  0.000000	 -0.000000	diff=1.31334e-54
  0.000000	  0.000000	diff=3.68385e-53
  0.000000	  0.000000	diff=1.67269e-54
  0.000000	  0.000000	diff=2.26763e-52
  0.000000	  0.000000	diff=1.02191e-29
  0.000000	  0.000000	diff=1.48421e-29
  0.000000	  0.000000	diff=1.97708e-48
  0.000000	 -0.000000	diff=1.69155e-47
  0.000000	  0.000000	diff=5.19604e-49
  0.000000	 -0.000000	diff=1.38666e-47
  0.000000	  0.000000	diff=3.01272e-48
  0.000000	 -0.000000	diff=8.27168e-47
  0.000000	 -0.000000	diff=9.0586e-24
  0.000000	  0.000000	diff=2.23467e-23
  0.000000	 -0.000000	diff=1.84561e-48
  0.000000	  0.000000	diff=3.1409e-48
  0.000000	  0.000000	diff=4.54393e-49
  0.000000	  0.000000	diff=1.14558e-48
  0.000000	 -0.000000	diff=1.83828e-48
  0.000000	  0.000000	diff=9.21113e-48
  0.000000	  0.000000	diff=6.85573e-25
  0.000000	 -0.000000	diff=2.36092e-24
  0.000000	 -0.000000	diff=1.01887e-47
  0.000000	 -0.000000	diff=7.26663e-47
  0.000000	  0.000000	diff=2.82651e-48
  0.000000	 -0.000000	diff=2.63008e-47
  0.000000	 -0.000000	diff=1.01827e-47
  0.000000	 -0.000000	diff=2.60012e-46
  0.000000	 -0.000000	diff=2.47598e-24
  0.000000	  0.000000	diff=1.0339e-24
  local_diff=3.79617e-23
# W_tgt{1}, [8 6]
 -0.000004	 -0.000004	diff=4.98508e-09
  0.050148	  0.048173	diff=0.00197547
 -0.000001	 -0.000001	diff=9.19684e-10
 -0.004852	 -0.004846	diff=6.11891e-06
 -0.000004	 -0.000004	diff=5.01857e-09
-16.861985	-16.882693	diff=0.0207085
 -0.000000	 -0.000000	diff=2.24089e-12
 -0.075760	 -0.075641	diff=0.000118743
 -0.000018	 -0.000018	diff=1.17178e-07
  0.286069	  0.239398	diff=0.0466703
 -0.000004	 -0.000004	diff=1.53264e-08
 -0.023675	 -0.023531	diff=0.000144739
 -0.000018	 -0.000019	diff=1.17959e-07
-64.009606	-64.502290	diff=0.492685
 -0.000000	 -0.000000	diff=5.06447e-12
 -0.370083	 -0.367324	diff=0.00275931
 -0.000003	 -0.000003	diff=2.8759e-09
 -0.092075	 -0.092172	diff=9.71693e-05
 -0.000000	 -0.000000	diff=5.83548e-11
  0.000138	  0.000138	diff=1.60813e-08
 -0.000003	 -0.000003	diff=2.98059e-09
  0.268381	  0.268231	diff=0.000150384
 -0.000000	 -0.000000	diff=1.88724e-12
 -0.095132	 -0.094937	diff=0.000195029
  0.000005	  0.000005	diff=6.1152e-09
  0.080428	  0.079878	diff=0.00055015
  0.000000	  0.000000	diff=3.99928e-12
  0.000395	  0.000395	diff=1.31383e-07
  0.000004	  0.000004	diff=5.45053e-09
  0.823579	  0.822744	diff=0.000835628
  0.000000	  0.000000	diff=1.41454e-12
  0.120081	  0.120523	diff=0.000441736
  0.000000	  0.000000	diff=2.37094e-13
 -0.000000	 -0.000000	diff=1.57625e-12
  0.000000	  0.000000	diff=5.50291e-13
  0.000000	  0.000000	diff=1.12205e-12
  0.000000	  0.000000	diff=1.65518e-13
  0.000001	  0.000001	diff=7.18465e-13
  0.000000	  0.000000	diff=3.33371e-17
 -0.000000	 -0.000000	diff=6.37372e-13
 -0.000002	 -0.000002	diff=1.67656e-09
  0.167861	  0.166870	diff=0.000990917
  0.000000	  0.000000	diff=3.56582e-11
 -0.000657	 -0.000656	diff=7.12819e-07
 -0.000001	 -0.000001	diff=4.07367e-10
 -0.704294	 -0.705065	diff=0.00077068
 -0.000000	 -0.000000	diff=1.96455e-12
 -0.007005	 -0.007064	diff=5.90446e-05
  local_diff=0.56916
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.80799e-13
  0.000003	  0.000003	diff=1.17527e-12
  0.000001	  0.000001	diff=1.04317e-12
  0.000000	  0.000000	diff=1.1646e-12
  0.000000	  0.000000	diff=1.85515e-13
  0.000004	  0.000004	diff=8.67471e-13
 -0.000003	 -0.000003	diff=7.61113e-13
  0.000003	  0.000003	diff=7.73975e-13
  0.050823	  0.050903	diff=8.01664e-05
 -2.046568	 -2.047222	diff=0.000653766
 -0.207671	 -0.207474	diff=0.000197039
 -0.402314	 -0.402361	diff=4.70955e-05
 -0.077828	 -0.076264	diff=0.00156383
 -2.684246	 -2.690338	diff=0.00609235
  0.696532	  0.700552	diff=0.00401905
 -3.778872	 -3.779618	diff=0.000745874
 -0.128987	 -0.129030	diff=4.26756e-05
  0.061208	  0.061151	diff=5.68663e-05
 -0.126904	 -0.126919	diff=1.4947e-05
 -0.070657	 -0.070722	diff=6.55408e-05
 -0.291341	 -0.291436	diff=9.54034e-05
 -0.097532	 -0.097713	diff=0.000181571
  1.118120	  1.118619	diff=0.000499494
  0.380550	  0.379815	diff=0.000735855
  0.012946	  0.013209	diff=0.000263206
  0.461725	  0.461779	diff=5.36815e-05
  0.191919	  0.191890	diff=2.89226e-05
  0.679034	  0.678886	diff=0.000147656
  0.083802	  0.084460	diff=0.000658393
  1.541852	  1.540874	diff=0.000977706
 -1.205213	 -1.205056	diff=0.000157264
  4.465138	  4.463566	diff=0.00157229
  local_diff=0.0189506
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.02828e-09
 -0.000000	 -0.000000	diff=9.2605e-09
 -0.000000	 -0.000000	diff=2.94841e-12
 -0.000000	 -0.000000	diff=4.24691e-12
  local_diff=1.6296e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.57964e-09
  0.000000	  0.000000	diff=3.29025e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-46.634814	-48.192947	diff=1.55813
 23.595116	 22.914322	diff=0.680794
-63.733324	-63.722799	diff=0.0105255
 32.900101	 32.948650	diff=0.0485487
  local_diff=2.298
# W_soft, [5 2]
 -0.194189	 -0.194362	diff=0.000173622
 -0.792482	 -0.792957	diff=0.00047466
  0.789507	  0.789365	diff=0.00014269
  0.710923	  0.710812	diff=0.00011126
 -0.512379	 -0.512858	diff=0.000478206
  0.259154	  0.258965	diff=0.000189717
  1.222390	  1.221652	diff=0.000737428
 -0.731666	 -0.731842	diff=0.000175899
 -1.237164	 -1.237267	diff=0.000103252
  0.489267	  0.488492	diff=0.000774967
  local_diff=0.0033617
# Num params=174, abs_diff=2.88947
Elapsed time is 2.158981 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.05792e-13
  0.000000	  0.000000	diff=2.53484e-11
  0.000000	  0.000000	diff=1.75957e-17
  0.000000	 -0.000000	diff=4.30662e-21
  0.000165	  0.000169	diff=3.88032e-06
  0.000000	  0.000000	diff=2.26316e-19
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.31863e-18
  0.000000	 -0.000000	diff=3.43153e-26
 -0.000000	 -0.000000	diff=3.86931e-11
  0.000000	 -0.000000	diff=6.93468e-30
  0.000000	  0.000000	diff=5.47442e-21
  0.000000	 -0.000000	diff=2.10102e-35
  0.000000	 -0.000000	diff=1.15918e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.72548e-14
  0.000000	 -0.000000	diff=1.60375e-31
  0.000000	 -0.000000	diff=2.86987e-18
  0.000000	  0.000000	diff=6.57819e-32
 -0.000028	 -0.000028	diff=1.05142e-07
  0.000000	 -0.000000	diff=3.6913e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.77983e-19
  0.000000	  0.000000	diff=9.96869e-30
  0.000000	  0.000000	diff=1.84957e-41
  0.000000	  0.000000	diff=1.65824e-33
  0.000000	 -0.000000	diff=3.60782e-48
  0.000000	  0.000000	diff=1.59079e-20
  0.000000	 -0.000000	diff=1.27157e-36
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.78485e-34
  local_diff=3.98552e-06
# W_src{2}, [8 4]
  0.000156	  0.000155	diff=7.41308e-07
 -0.051950	 -0.051700	diff=0.000249554
  0.000002	  0.000002	diff=9.04276e-09
 -0.000395	 -0.000397	diff=1.88223e-06
  0.074041	  0.074211	diff=0.000169735
  0.015131	  0.015085	diff=4.60317e-05
  0.000000	  0.000000	diff=1.70435e-09
 -0.000000	 -0.000000	diff=8.95798e-11
  0.000000	 -0.000000	diff=1.04337e-60
  0.000000	  0.000000	diff=7.70033e-59
  0.000000	 -0.000000	diff=1.38359e-60
  0.000000	  0.000000	diff=1.86874e-59
  0.000000	 -0.000000	diff=3.10002e-60
  0.000000	  0.000000	diff=8.22314e-59
  0.000000	  0.000000	diff=1.00804e-29
  0.000000	  0.000000	diff=6.01278e-29
 -0.000001	 -0.000001	diff=3.38417e-09
 -0.025529	 -0.025469	diff=6.0629e-05
  0.000000	  0.000000	diff=6.1963e-11
 -0.000195	 -0.000195	diff=4.56596e-07
 -0.014545	 -0.014577	diff=3.201e-05
  0.008044	  0.008026	diff=1.81218e-05
  0.000000	  0.000000	diff=4.27358e-10
 -0.000000	 -0.000000	diff=7.18604e-11
  0.000001	  0.000001	diff=1.38785e-09
  0.020501	  0.020540	diff=3.89527e-05
 -0.000001	 -0.000001	diff=5.53349e-09
  0.000158	  0.000158	diff=2.98779e-07
 -0.077118	 -0.077009	diff=0.000109619
  0.006137	  0.006129	diff=7.8771e-06
 -0.000000	 -0.000000	diff=2.57831e-10
  0.000000	  0.000000	diff=4.56238e-11
  local_diff=0.000735931
# W_tgt{1}, [8 6]
  0.000068	  0.000068	diff=1.77923e-07
 -0.377777	 -0.375082	diff=0.00269499
  0.000038	  0.000038	diff=5.64938e-10
  0.179689	  0.179851	diff=0.000162355
  0.000086	  0.000086	diff=1.94569e-07
  0.430188	  0.390988	diff=0.0392
  0.000015	  0.000015	diff=5.30743e-08
 -0.037834	 -0.037604	diff=0.000229806
 -0.000000	 -0.000000	diff=2.53059e-09
 -0.335776	 -0.257176	diff=0.0786002
  0.000000	  0.000000	diff=2.89869e-09
  0.002525	  0.002506	diff=1.96204e-05
 -0.000000	 -0.000000	diff=2.47296e-09
  4.101734	  3.545747	diff=0.555988
 -0.000000	 -0.000000	diff=5.12821e-13
 -0.129065	 -0.124496	diff=0.00456849
 -0.000000	 -0.000000	diff=1.44817e-11
  0.016114	  0.016652	diff=0.000537924
  0.000000	  0.000000	diff=2.58485e-12
 -0.000028	 -0.000028	diff=1.18119e-10
  0.000001	  0.000001	diff=9.44108e-12
 -0.009378	 -0.009462	diff=8.34718e-05
  0.000000	  0.000000	diff=3.45116e-13
  0.003196	  0.003198	diff=1.76973e-06
  0.000000	  0.000000	diff=1.08825e-10
  0.004006	  0.005904	diff=0.00189828
  0.000005	  0.000005	diff=1.34465e-10
 -0.000122	 -0.000122	diff=7.82769e-08
  0.000009	  0.000009	diff=2.47621e-09
 -0.774061	 -0.774462	diff=0.00040099
  0.000000	  0.000000	diff=1.11953e-12
  0.008891	  0.008938	diff=4.66139e-05
 -0.000000	 -0.000000	diff=1.24573e-09
  0.000263	  0.000262	diff=7.83304e-07
 -0.000018	 -0.000018	diff=1.62356e-09
  0.000036	  0.000036	diff=1.03458e-07
 -0.000030	 -0.000030	diff=3.13933e-08
  0.000281	  0.000280	diff=8.98631e-07
 -0.000000	 -0.000000	diff=2.92322e-13
  0.000000	  0.000000	diff=1.08686e-12
 -0.000000	 -0.000000	diff=7.96117e-12
  0.002446	  0.003417	diff=0.000971146
 -0.000001	 -0.000001	diff=1.05707e-11
  0.000058	  0.000058	diff=1.59554e-08
 -0.000002	 -0.000002	diff=1.94472e-10
  0.417876	  0.417789	diff=8.67988e-05
 -0.000000	 -0.000000	diff=3.22329e-13
 -0.003831	 -0.003815	diff=1.58554e-05
  local_diff=0.685509
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=6.66348e-13
  0.000000	  0.000000	diff=6.10105e-13
  0.000000	  0.000000	diff=9.65873e-13
  0.000000	  0.000000	diff=1.90049e-12
 -0.000000	 -0.000000	diff=1.11083e-12
  0.000000	  0.000000	diff=1.87989e-12
 -0.000000	 -0.000000	diff=1.35319e-12
  0.000000	  0.000000	diff=5.8262e-13
  0.217844	  0.218061	diff=0.00021704
 -0.472190	 -0.469976	diff=0.00221478
 -0.097230	 -0.097174	diff=5.5989e-05
 -0.325293	 -0.325539	diff=0.000246364
  0.557278	  0.559871	diff=0.00259358
 -1.526243	 -1.518094	diff=0.00814958
 -1.531277	 -1.529493	diff=0.00178395
 -0.515424	 -0.514534	diff=0.000889868
  0.068274	  0.068202	diff=7.15025e-05
 -0.053350	 -0.053277	diff=7.3371e-05
 -0.124763	 -0.124748	diff=1.50754e-05
 -0.005424	 -0.005436	diff=1.22185e-05
 -0.075474	 -0.075506	diff=3.23948e-05
 -0.183737	 -0.183720	diff=1.71131e-05
  0.407739	  0.407946	diff=0.000207326
 -0.249140	 -0.250224	diff=0.00108407
  0.072757	  0.072690	diff=6.67605e-05
  0.288081	  0.288275	diff=0.000194448
  0.089550	  0.089540	diff=9.712e-06
  0.362486	  0.363060	diff=0.000573974
 -0.168338	 -0.167893	diff=0.000445409
  1.041265	  1.041665	diff=0.000400359
 -0.279811	 -0.279331	diff=0.000480321
  3.008567	  3.001825	diff=0.00674267
  local_diff=0.0265779
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.09246e-10
  0.000000	  0.000000	diff=9.31547e-11
  0.000118	  0.000120	diff=1.95821e-06
  0.000000	 -0.000000	diff=6.74767e-15
  local_diff=1.95882e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.02899e-11
 -0.000000	 -0.000000	diff=3.4354e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 29.868986	 30.897636	diff=1.02865
-15.147911	-14.914619	diff=0.233291
 -4.963032	 -5.462542	diff=0.49951
  2.964002	  2.824189	diff=0.139814
  local_diff=1.90126
# W_soft, [5 2]
 -0.169247	 -0.169422	diff=0.000174874
 -0.453029	 -0.453367	diff=0.000338023
  0.500466	  0.500293	diff=0.000173735
  0.537580	  0.537427	diff=0.000153904
 -0.414584	 -0.414930	diff=0.000346442
 -0.109892	 -0.110159	diff=0.000267945
  0.622417	  0.621976	diff=0.000441468
  0.210969	  0.210769	diff=0.00019921
 -1.050254	 -1.050476	diff=0.000222186
  0.328336	  0.327891	diff=0.000444995
  local_diff=0.00276278
# Num params=174, abs_diff=2.61686
Elapsed time is 2.403999 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=4.93503e-18
  0.000000	 -0.000000	diff=3.19414e-09
  0.000000	 -0.000000	diff=2.44249e-21
  0.000000	 -0.000000	diff=3.08856e-20
 -0.000024	 -0.000025	diff=7.41198e-07
  0.000000	  0.000000	diff=2.83662e-21
  0.000000	  0.000000	diff=0
 -0.004338	 -0.003739	diff=0.000598602
  0.000000	  0.000000	diff=8.36234e-18
 -0.000000	  0.000000	diff=5.10538e-09
  0.000000	 -0.000000	diff=5.85081e-30
  0.000000	  0.000000	diff=3.92607e-20
  0.000000	  0.000000	diff=2.00075e-35
  0.000000	  0.000000	diff=1.93182e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.37043e-65
  0.000000	  0.000000	diff=6.32063e-49
  0.000000	  0.000000	diff=3.04085e-22
  0.000000	  0.000000	diff=9.55397e-59
  0.000003	  0.000003	diff=1.18872e-08
  0.000000	 -0.000000	diff=3.52699e-22
  0.000000	  0.000000	diff=0
  0.000457	  0.000465	diff=8.08051e-06
  0.000000	  0.000000	diff=5.91871e-58
  0.000000	 -0.000000	diff=1.94462e-41
  0.000000	  0.000000	diff=4.20975e-41
  0.000000	 -0.000000	diff=2.93941e-51
  0.000000	  0.000000	diff=4.3221e-25
  0.000000	 -0.000000	diff=1.53881e-40
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.70234e-24
  local_diff=0.000607444
# W_src{2}, [8 4]
  0.000176	  0.000175	diff=8.10861e-07
 -0.001072	 -0.001068	diff=4.8646e-06
 -0.000006	 -0.000006	diff=2.76992e-08
  0.000009	  0.000009	diff=4.11615e-08
 -0.095347	 -0.095019	diff=0.000327664
  0.921614	  0.892052	diff=0.0295616
  0.000001	  0.000001	diff=7.21874e-09
 -0.000000	 -0.000000	diff=7.24867e-10
  0.000000	  0.000000	diff=6.51802e-61
  0.000000	 -0.000000	diff=9.79139e-59
  0.000000	 -0.000000	diff=1.92999e-60
  0.000000	  0.000000	diff=2.65102e-60
  0.000000	  0.000000	diff=1.80523e-60
  0.000000	 -0.000000	diff=6.46001e-59
  0.000000	  0.000000	diff=5.0982e-29
  0.000000	 -0.000000	diff=3.59476e-28
 -0.000006	 -0.000006	diff=1.38662e-08
 -0.001520	 -0.001516	diff=3.57357e-06
 -0.000000	 -0.000000	diff=2.80933e-10
 -0.000011	 -0.000011	diff=2.82381e-08
  0.051977	  0.051983	diff=6.17477e-06
  0.022476	  0.022467	diff=8.61443e-06
  0.000000	  0.000000	diff=1.73889e-09
 -0.000000	 -0.000000	diff=4.40835e-12
  0.000005	  0.000005	diff=1.0826e-08
 -0.000529	 -0.000533	diff=4.35019e-06
  0.000004	  0.000004	diff=1.62897e-08
 -0.000016	 -0.000016	diff=7.8695e-08
  0.183422	  0.182336	diff=0.00108665
 -0.719404	 -0.740052	diff=0.0206481
 -0.000000	 -0.000000	diff=1.18566e-09
  0.000000	  0.000000	diff=1.08773e-12
  local_diff=0.0516526
# W_tgt{1}, [8 6]
  0.000001	  0.000001	diff=2.19747e-09
  0.002266	  0.002363	diff=9.72871e-05
  0.000000	  0.000000	diff=4.32551e-12
  0.011301	  0.011283	diff=1.85713e-05
  0.000001	  0.000001	diff=2.20818e-09
  0.118309	  0.130815	diff=0.0125056
  0.000000	  0.000000	diff=1.1398e-12
  0.001645	  0.001653	diff=8.50111e-06
  0.000006	  0.000006	diff=5.15827e-08
  0.065185	  0.067860	diff=0.00267472
  0.000000	  0.000000	diff=4.87833e-11
  0.055231	  0.054791	diff=0.000439789
  0.000006	  0.000007	diff=5.18455e-08
 -1.550383	 -1.247777	diff=0.302606
  0.000000	  0.000000	diff=1.44921e-12
 -0.118018	 -0.118740	diff=0.000721926
  0.000001	  0.000001	diff=2.09766e-09
 -0.001827	 -0.001725	diff=0.000101285
 -0.000000	 -0.000000	diff=1.23039e-10
 -0.026644	 -0.026746	diff=0.000102817
 -0.000316	 -0.000315	diff=7.61028e-07
 -0.047123	 -0.046817	diff=0.000306806
  0.000001	  0.000001	diff=6.13507e-09
 -0.000442	 -0.000433	diff=8.51723e-06
 -0.000004	 -0.000004	diff=8.85394e-09
  0.010328	  0.010447	diff=0.00011902
 -0.000000	 -0.000000	diff=8.68028e-10
 -0.000704	 -0.000704	diff=2.19909e-08
 -0.000847	 -0.000842	diff=5.33828e-06
 -0.300936	 -0.301531	diff=0.000595316
  0.000003	  0.000003	diff=4.33726e-08
 -0.002802	 -0.002771	diff=3.04059e-05
 -0.000083	 -0.000083	diff=2.86866e-07
 -0.000050	 -0.000050	diff=1.97653e-07
 -0.000117	 -0.000116	diff=4.79512e-07
 -0.000064	 -0.000064	diff=2.61839e-07
  0.000484	  0.000486	diff=2.09958e-06
 -0.000011	 -0.000011	diff=4.4027e-08
 -0.000002	 -0.000002	diff=1.57142e-08
  0.000000	  0.000000	diff=1.02258e-11
  0.000001	  0.000001	diff=6.88076e-09
  0.000927	  0.000916	diff=1.04522e-05
  0.000000	  0.000000	diff=4.89584e-10
  0.002259	  0.002258	diff=7.12133e-07
  0.000627	  0.000630	diff=2.97819e-06
  0.079501	  0.079544	diff=4.22841e-05
 -0.000003	 -0.000003	diff=2.40266e-08
  0.000580	  0.000581	diff=7.55174e-07
  local_diff=0.320404
# W_tgt{2}, [8 4]
  0.000623	  0.000626	diff=2.82309e-06
 -0.000521	 -0.000521	diff=2.5315e-07
 -0.000003	 -0.000003	diff=1.36912e-08
  0.000336	  0.000335	diff=1.38493e-06
 -0.000708	 -0.000704	diff=3.80235e-06
  0.002136	  0.002146	diff=9.99194e-06
  0.000001	  0.000001	diff=3.62809e-09
  0.001020	  0.001025	diff=4.68635e-06
 -0.028184	 -0.028198	diff=1.35057e-05
 -0.698397	 -0.698107	diff=0.000289259
  0.005698	  0.005695	diff=3.21144e-06
 -0.012854	 -0.012841	diff=1.27889e-05
 -0.269652	 -0.271364	diff=0.00171247
 -1.439698	 -1.439778	diff=7.97449e-05
 -3.502950	 -3.498598	diff=0.00435172
 -1.256629	 -1.254933	diff=0.00169609
  0.055009	  0.055023	diff=1.35538e-05
  0.032590	  0.032581	diff=8.61794e-06
  0.014903	  0.014895	diff=7.44831e-06
 -0.059815	 -0.059821	diff=5.41646e-06
 -0.107267	 -0.106750	diff=0.000516204
 -0.001726	 -0.001739	diff=1.38488e-05
 -0.224488	 -0.224554	diff=6.61953e-05
 -0.754026	 -0.754435	diff=0.000408903
  0.807687	  0.806899	diff=0.000787914
  0.294375	  0.294421	diff=4.58131e-05
 -0.040411	 -0.040401	diff=9.91927e-06
 -0.375986	 -0.376130	diff=0.000144564
  0.350550	  0.350486	diff=6.32274e-05
  0.076409	  0.076324	diff=8.51704e-05
 -0.469218	 -0.469692	diff=0.000474252
 -4.537947	 -4.547018	diff=0.0090705
  local_diff=0.0199033
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000749	 -0.000730	diff=1.96452e-05
 -0.000000	 -0.000000	diff=2.39108e-11
  0.000000	  0.000000	diff=7.15057e-09
  0.000000	  0.000000	diff=8.25471e-09
  local_diff=1.96606e-05
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.54862e-12
 -0.000000	 -0.000000	diff=1.45275e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-30.217535	-26.560473	diff=3.65706
 12.763276	 13.667926	diff=0.90465
  7.149709	  7.083902	diff=0.0658071
 -3.640520	 -3.660044	diff=0.0195236
  local_diff=4.64704
# W_h, [2 4]
  0.361054	  0.356239	diff=0.00481585
 -0.000253	 -0.000252	diff=6.80117e-07
 -0.589500	 -0.603836	diff=0.0143357
  0.000514	  0.000516	diff=2.82851e-06
  3.893030	  3.840736	diff=0.0522934
 -2.774627	 -2.775989	diff=0.0013617
  2.929506	  2.932247	diff=0.00274088
 -2.944228	 -2.940896	diff=0.00333148
  local_diff=0.0788825
# W_soft, [5 2]
 -0.956667	 -0.957174	diff=0.000506976
  5.213387	  5.206646	diff=0.00674059
  0.155391	  0.148653	diff=0.0067377
 -2.569958	 -2.570744	diff=0.000785518
 -1.827009	 -1.827381	diff=0.000371877
  2.047773	  2.046128	diff=0.0016451
  0.008199	  0.004965	diff=0.0032344
  1.898402	  1.894751	diff=0.00365141
 -1.834499	 -1.836127	diff=0.00162829
 -2.109547	 -2.109716	diff=0.000168959
  local_diff=0.0254708
# Num params=182, abs_diff=5.14398
Elapsed time is 2.705774 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.6908e-34
  0.000000	  0.000000	diff=6.52136e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.14811e-34
  0.000000	 -0.000000	diff=8.31817e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78785e-73
  0.000000	 -0.000000	diff=5.70539e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.11556e-65
  0.000000	  0.000000	diff=3.2557e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.98983e-66
  0.000000	 -0.000000	diff=1.35318e-65
  0.000000	 -0.000000	diff=6.80857e-67
  0.000000	 -0.000000	diff=2.33138e-66
  0.000000	  0.000000	diff=1.85977e-66
  0.000000	 -0.000000	diff=1.05465e-65
  0.000000	  0.000000	diff=1.86755e-36
  0.000000	 -0.000000	diff=8.34134e-36
  0.000000	 -0.000000	diff=7.79664e-59
  0.000000	  0.000000	diff=5.83381e-58
  0.000000	  0.000000	diff=1.82474e-59
  0.000000	  0.000000	diff=9.23776e-59
  0.000000	 -0.000000	diff=8.49407e-59
  0.000000	  0.000000	diff=5.16748e-58
  0.000000	  0.000000	diff=1.11184e-29
  0.000000	  0.000000	diff=3.97523e-28
  0.000000	  0.000000	diff=1.29167e-59
  0.000000	 -0.000000	diff=5.90976e-59
  0.000000	 -0.000000	diff=5.78638e-60
  0.000000	 -0.000000	diff=8.1766e-60
  0.000000	  0.000000	diff=8.49742e-60
  0.000000	 -0.000000	diff=4.77459e-59
  0.000000	  0.000000	diff=1.60399e-29
  0.000000	 -0.000000	diff=2.8376e-29
  0.000000	 -0.000000	diff=2.05037e-59
  0.000000	  0.000000	diff=5.8094e-58
  0.000000	  0.000000	diff=1.34231e-59
  0.000000	  0.000000	diff=2.23857e-58
  0.000000	 -0.000000	diff=9.57301e-60
  0.000000	  0.000000	diff=8.27746e-58
  0.000000	  0.000000	diff=6.35455e-29
  0.000000	  0.000000	diff=2.21817e-28
  local_diff=7.38419e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_pos, [2 2]
  0.000000	 -0.000000	diff=1.5568e-29
  0.000000	  0.000000	diff=1.31341e-29
  0.000000	 -0.000000	diff=1.2133e-30
  0.000000	  0.000000	diff=1.25461e-30
  local_diff=3.117e-29
# v_pos, [1 2]
  0.000000	 -0.000000	diff=1.01433e-29
  0.000000	 -0.000000	diff=1.01748e-29
  local_diff=2.03181e-29
# W_h, [2 4]
  0.000000	 -0.000000	diff=3.05378e-30
  0.000000	 -0.000000	diff=3.65282e-30
  0.000000	 -0.000000	diff=1.54583e-30
  0.000000	  0.000000	diff=6.8135e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 4.025086 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.84136e-12
 -0.000000	 -0.000000	diff=1.08734e-08
  0.000000	  0.000000	diff=4.35354e-28
  0.000000	 -0.000000	diff=3.7902e-19
  0.000001	  0.000001	diff=3.47287e-08
  0.000000	 -0.000000	diff=3.04848e-21
  0.000000	  0.000000	diff=0
 -0.000601	 -0.000638	diff=3.74958e-05
 -0.000000	 -0.000000	diff=2.84079e-12
  0.000000	  0.000000	diff=1.70572e-08
  0.000000	 -0.000000	diff=5.53448e-28
  0.000000	  0.000000	diff=4.81797e-19
  0.000000	  0.000000	diff=4.00668e-34
  0.000000	  0.000000	diff=1.37967e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.36393e-63
  0.000000	  0.000000	diff=7.75651e-48
  0.000000	 -0.000000	diff=1.12218e-66
  0.000000	  0.000000	diff=1.17244e-57
  0.000000	  0.000000	diff=4.96915e-73
  0.000000	  0.000000	diff=1.09456e-65
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.34168e-56
  0.000000	 -0.000000	diff=2.3864e-40
  0.000000	  0.000000	diff=4.14312e-59
  0.000000	 -0.000000	diff=3.60717e-50
  0.000000	 -0.000000	diff=2.18632e-65
  0.000000	 -0.000000	diff=6.30844e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=3.75585e-05
# W_src{2}, [8 4]
  0.331666	  0.330350	diff=0.00131562
 -0.002764	 -0.002751	diff=1.31345e-05
  0.000000	  0.000000	diff=1.92861e-67
  0.000000	  0.000000	diff=1.29805e-65
  0.293465	  0.294808	diff=0.00134283
 -0.777347	 -0.773645	diff=0.0037022
 -0.000003	 -0.000003	diff=3.17688e-08
 -0.000001	 -0.000001	diff=1.19257e-08
  0.000000	  0.000000	diff=1.26232e-58
  0.000000	 -0.000000	diff=1.41688e-57
  0.000000	 -0.000000	diff=1.3576e-59
  0.000000	 -0.000000	diff=3.6559e-58
  0.000000	  0.000000	diff=1.69409e-58
  0.000000	 -0.000000	diff=1.23259e-57
  0.000000	 -0.000000	diff=1.35871e-28
  0.000000	 -0.000000	diff=6.03963e-28
  0.000000	  0.000000	diff=1.40596e-60
  0.000000	  0.000000	diff=8.13129e-59
  0.000000	  0.000000	diff=8.05466e-61
  0.000000	  0.000000	diff=1.58832e-59
  0.000000	  0.000000	diff=1.32401e-60
  0.000000	  0.000000	diff=1.70636e-59
  0.000000	 -0.000000	diff=5.96654e-29
  0.000000	  0.000000	diff=5.20489e-29
  0.000000	  0.000000	diff=2.1071e-58
  0.000000	 -0.000000	diff=1.86114e-57
  0.000000	 -0.000000	diff=4.88898e-59
  0.000000	 -0.000000	diff=6.66062e-58
  0.000000	  0.000000	diff=2.12671e-58
  0.000000	 -0.000000	diff=1.86368e-57
  0.000000	 -0.000000	diff=1.13055e-28
  0.000000	 -0.000000	diff=6.45202e-28
  local_diff=0.00637384
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.36612e-10
  0.141449	  0.139208	diff=0.00224101
 -0.000000	 -0.000000	diff=6.64415e-12
 -0.051303	 -0.051210	diff=9.27442e-05
  0.000000	  0.000000	diff=7.34172e-10
-10.081949	-10.300090	diff=0.218141
  0.000000	  0.000000	diff=1.7283e-12
 -0.427313	 -0.429863	diff=0.00255021
  0.000002	  0.000002	diff=1.72471e-08
  0.645249	  0.589195	diff=0.056054
 -0.000000	 -0.000000	diff=1.07554e-10
 -0.250880	 -0.248682	diff=0.00219798
  0.000002	  0.000002	diff=1.7243e-08
-39.052507	-48.093148	diff=9.04064
  0.000000	  0.000000	diff=2.85422e-12
 -1.833732	 -1.891739	diff=0.0580063
 -0.000080	 -0.000080	diff=3.73224e-07
  0.001548	  0.001542	diff=6.01329e-06
  0.856652	  0.854887	diff=0.00176502
  0.119273	  0.119784	diff=0.000510345
  0.100424	  0.100992	diff=0.000568028
  4.015067	  4.058219	diff=0.0431522
  0.000002	  0.000002	diff=2.03843e-08
 -0.000000	 -0.000000	diff=3.46268e-10
 -0.000061	 -0.000061	diff=2.11903e-07
 -0.195365	 -0.195682	diff=0.000317279
 -0.855340	 -0.857150	diff=0.00181043
  0.054962	  0.055070	diff=0.000108537
 -0.108978	 -0.108419	diff=0.000559092
  1.272769	  1.254360	diff=0.0184092
  0.000002	  0.000002	diff=1.1463e-08
  0.476651	  0.473620	diff=0.00303052
  0.122645	  0.123101	diff=0.000455664
 -0.311660	 -0.310889	diff=0.000770932
 -0.348081	 -0.349501	diff=0.00141992
  0.359056	  0.358154	diff=0.000901679
 -0.026671	 -0.026604	diff=6.66915e-05
 -0.000266	 -0.000265	diff=1.00308e-06
 -0.000001	 -0.000001	diff=5.54706e-09
  0.000007	  0.000007	diff=5.53458e-08
 -0.000000	 -0.000000	diff=4.02612e-12
 -0.033422	 -0.040448	diff=0.00702548
 -0.021014	 -0.021015	diff=1.07779e-06
 -0.010037	 -0.010033	diff=3.62453e-06
 -0.002583	 -0.002583	diff=3.30602e-07
  0.001963	 -0.000637	diff=0.00259928
 -0.000000	 -0.000000	diff=2.0484e-12
 -0.084897	 -0.085000	diff=0.000102408
  local_diff=9.46351
# W_tgt{2}, [8 4]
 -0.067048	 -0.066879	diff=0.000168609
 -0.002022	 -0.002027	diff=5.6241e-06
  2.639224	  2.643445	diff=0.00422108
 -0.001868	 -0.001863	diff=4.68043e-06
 -0.144376	 -0.144327	diff=4.93138e-05
 -0.021750	 -0.021742	diff=8.26169e-06
 -0.000377	 -0.000384	diff=6.88706e-06
 -0.097278	 -0.097820	diff=0.000541516
 -0.337594	 -0.338006	diff=0.000412173
 -0.848844	 -0.849370	diff=0.000525751
  0.017127	  0.017046	diff=8.08078e-05
 -0.150090	 -0.150266	diff=0.000175417
 -2.244617	 -2.263791	diff=0.0191747
 -0.301278	 -0.302497	diff=0.00121896
-11.097586	-15.471111	diff=4.37352
 -1.705289	 -1.706050	diff=0.000761059
 -0.815940	 -0.813121	diff=0.00281954
 -0.011686	 -0.011894	diff=0.000208274
 -0.081805	 -0.081996	diff=0.000191557
 -0.395191	 -0.395126	diff=6.58093e-05
 -1.088422	 -1.085797	diff=0.00262517
 -0.390058	 -0.390263	diff=0.000204916
  0.968236	  0.970129	diff=0.00189272
 -2.979695	 -2.973407	diff=0.00628751
  0.058841	  0.060224	diff=0.00138282
 -0.476163	 -0.476089	diff=7.34199e-05
 -1.821014	 -1.818654	diff=0.00236011
  1.162310	  1.162279	diff=3.12909e-05
  0.155519	  0.155486	diff=3.28991e-05
  0.274470	  0.275019	diff=0.000549244
 -1.069853	 -1.080967	diff=0.0111139
 11.627334	 11.615886	diff=0.0114484
  local_diff=4.44217
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000120	 -0.000122	diff=1.41149e-06
 -0.000000	 -0.000000	diff=2.86601e-10
 -0.000000	 -0.000000	diff=2.41099e-08
 -0.000000	 -0.000000	diff=2.78275e-08
  local_diff=1.46371e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.57234e-11
  0.000000	  0.000000	diff=2.2417e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
559.422329	-167.970287	diff=727.393
 86.801647	 78.323606	diff=8.47804
 -7.093948	 -7.355292	diff=0.261344
  3.874106	  3.800851	diff=0.0732549
  local_diff=736.205
# W_a, [2 2]
 -0.000008	 -0.000008	diff=1.2119e-08
  0.000294	  0.000315	diff=2.02761e-05
  0.001069	  0.001069	diff=1.51793e-09
 -0.043733	 -0.043731	diff=2.53705e-06
  local_diff=2.28268e-05
# W_h, [2 4]
 -0.023336	 -0.023335	diff=7.74494e-07
 -0.040031	 -0.040030	diff=9.22895e-07
  0.953211	  0.954506	diff=0.00129503
  1.635845	  1.637389	diff=0.00154428
  0.495630	  0.493584	diff=0.00204581
  3.290073	  3.285275	diff=0.00479753
  0.108388	  0.120890	diff=0.0125022
  9.094417	  8.793549	diff=0.300869
  local_diff=0.323055
# W_soft, [5 2]
  5.084964	  5.080611	diff=0.00435259
  3.185797	  3.184884	diff=0.000913657
 -0.403325	 -0.404028	diff=0.000702595
 -4.004497	 -4.005270	diff=0.000772983
 -3.852635	 -3.856197	diff=0.0035624
 -5.137220	 -5.143014	diff=0.00579312
  4.933049	  4.932879	diff=0.000169774
 -0.674094	 -0.674468	diff=0.00037425
  0.078470	  0.077928	diff=0.000541492
  0.812158	  0.806674	diff=0.00548365
  local_diff=0.0226665
# Num params=186, abs_diff=750.463
Elapsed time is 3.140477 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.65218e-34
  0.000000	  0.000000	diff=5.91556e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.09858e-34
  0.000000	 -0.000000	diff=7.47991e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78914e-73
  0.000000	 -0.000000	diff=5.65567e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.14971e-65
  0.000000	  0.000000	diff=3.21759e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.67058e-66
  0.000000	 -0.000000	diff=1.32023e-65
  0.000000	 -0.000000	diff=6.30511e-67
  0.000000	 -0.000000	diff=2.40542e-66
  0.000000	  0.000000	diff=1.58221e-66
  0.000000	 -0.000000	diff=1.03471e-65
  0.000000	  0.000000	diff=2.21115e-36
  0.000000	 -0.000000	diff=7.89148e-36
  0.000000	 -0.000000	diff=6.91426e-59
  0.000000	  0.000000	diff=5.43438e-58
  0.000000	  0.000000	diff=1.75048e-59
  0.000000	  0.000000	diff=9.03782e-59
  0.000000	 -0.000000	diff=7.68126e-59
  0.000000	  0.000000	diff=4.82943e-58
  0.000000	 -0.000000	diff=3.70742e-31
  0.000000	  0.000000	diff=3.56301e-28
  0.000000	  0.000000	diff=1.05848e-59
  0.000000	 -0.000000	diff=5.8891e-59
  0.000000	 -0.000000	diff=5.03736e-60
  0.000000	 -0.000000	diff=8.12493e-60
  0.000000	  0.000000	diff=7.41006e-60
  0.000000	 -0.000000	diff=4.89434e-59
  0.000000	  0.000000	diff=1.78997e-29
  0.000000	 -0.000000	diff=2.65034e-29
  0.000000	 -0.000000	diff=2.66933e-59
  0.000000	  0.000000	diff=5.54468e-58
  0.000000	  0.000000	diff=1.53992e-59
  0.000000	  0.000000	diff=2.12029e-58
  0.000000	 -0.000000	diff=1.51282e-59
  0.000000	  0.000000	diff=7.93366e-58
  0.000000	  0.000000	diff=7.42823e-29
  0.000000	  0.000000	diff=2.02294e-28
  local_diff=6.77651e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.57509e-45
  0.000000	  0.000000	diff=1.6093e-45
  0.000000	  0.000000	diff=3.50325e-45
  0.000000	 -0.000000	diff=8.75812e-47
  local_diff=7.77522e-45
# v_a, [1 2]
  0.000000	 -0.000000	diff=1.26117e-44
  0.000000	 -0.000000	diff=2.1742e-44
  local_diff=3.43537e-44
# W_h, [2 4]
  0.000000	 -0.000000	diff=7.31179e-31
  0.000000	 -0.000000	diff=5.18298e-31
  0.000000	  0.000000	diff=1.27282e-29
  0.000000	 -0.000000	diff=2.22416e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 2.626072 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.012948	  0.000961	diff=0.0139091
  0.002157	  0.000268	diff=0.00188899
 -0.088297	 -0.018414	diff=0.0698831
 -0.000922	 -0.000774	diff=0.000147967
 -0.012833	  0.001057	diff=0.0138898
  0.002161	  0.000314	diff=0.00184704
  7.423095	  1.258045	diff=6.16505
 -3.404015	 -0.584481	diff=2.81953
  0.000000	  0.000000	diff=4.81008e-08
 -0.000007	  0.000008	diff=1.47297e-05
  0.114852	  0.022921	diff=0.0919317
 -0.000000	  0.000000	diff=1.12843e-08
  0.000000	  0.000000	diff=1.0648e-15
  0.000000	 -0.000000	diff=2.91178e-16
  0.000000	 -0.000000	diff=1.62054e-13
  0.000000	  0.000000	diff=3.7467e-14
 -0.035368	 -0.021340	diff=0.0140274
 -0.005410	 -0.000876	diff=0.0045344
 -0.006199	 -0.003488	diff=0.00271087
  0.002772	  0.002594	diff=0.00017823
 -0.040562	 -0.023730	diff=0.0168323
 -0.003642	  0.000702	diff=0.00434447
  2.255073	  0.591625	diff=1.66345
  0.066243	 -0.409227	diff=0.47547
 -0.016443	 -0.019519	diff=0.00307581
  0.002634	  0.001773	diff=0.000860787
 -0.002832	 -0.003430	diff=0.000597391
  0.001913	  0.001948	diff=3.4676e-05
 -0.019783	 -0.023478	diff=0.00369476
  0.004540	  0.003716	diff=0.000824406
  0.277422	  0.631052	diff=0.35363
 -0.566586	 -0.475077	diff=0.0915093
  local_diff=11.8139
# W_src{2}, [8 4]
  0.242528	  0.201188	diff=0.04134
 -0.200619	 -0.257197	diff=0.0565779
 -0.025140	 -0.010901	diff=0.0142393
 -0.008794	 -0.021638	diff=0.0128433
  0.317356	  0.282384	diff=0.0349715
 -0.283511	 -0.344744	diff=0.0612329
 -2.507739	 -1.746162	diff=0.761577
  1.431647	 -0.731319	diff=2.16297
  0.058453	  0.055798	diff=0.00265511
  0.012733	 -0.015356	diff=0.0280892
 -0.023021	 -0.014556	diff=0.00846497
  0.017936	  0.009321	diff=0.00861481
  0.053349	  0.060392	diff=0.00704302
  0.029201	 -0.005861	diff=0.0350625
  2.710788	  1.170757	diff=1.54003
 -0.058149	 -0.307737	diff=0.249587
  0.113774	  0.103988	diff=0.00978607
  0.131894	  0.060439	diff=0.071455
 -0.054590	 -0.037042	diff=0.0175479
  0.063267	  0.040137	diff=0.0231295
  0.084891	  0.094774	diff=0.0098821
  0.201174	  0.109379	diff=0.0917951
  9.314304	  4.767499	diff=4.54681
  3.750955	  1.979286	diff=1.77167
 -0.375259	 -0.274450	diff=0.100809
 -0.075453	  0.037735	diff=0.113188
  0.078220	  0.044133	diff=0.0340873
 -0.076883	 -0.042799	diff=0.0340845
 -0.426436	 -0.345223	diff=0.0812136
 -0.052412	  0.076447	diff=0.12886
 -3.004681	 -0.784977	diff=2.2197
 -8.938468	 -5.362905	diff=3.57556
  local_diff=17.8549
# W_tgt{1}, [8 6]
 -0.063488	 -0.063476	diff=1.21489e-05
 12.750256	 13.049505	diff=0.299249
 -0.396433	 -0.391586	diff=0.00484686
 -0.000186	 -0.000185	diff=2.4577e-07
  0.000027	  0.000027	diff=3.7109e-08
  0.007654	  0.007511	diff=0.000143071
 -0.000000	 -0.000000	diff=2.38577e-09
  0.195654	  0.195597	diff=5.69355e-05
 -0.308531	 -0.308248	diff=0.000283235
-12.052307	-11.747514	diff=0.304793
  0.369614	  0.373909	diff=0.00429523
 -0.000906	 -0.000901	diff=5.81547e-06
  0.000130	  0.000131	diff=8.33382e-07
  0.018868	  0.017053	diff=0.0018156
 -0.000002	 -0.000002	diff=2.62151e-08
  0.951107	  0.949844	diff=0.00126223
  0.186769	  0.186939	diff=0.000170751
  3.274022	  3.294828	diff=0.0208062
  0.453038	  0.451612	diff=0.00142636
 -0.000277	 -0.000276	diff=5.43919e-07
  0.000040	  0.000040	diff=7.8434e-08
 -0.005277	 -0.005285	diff=7.56591e-06
 -0.000001	 -0.000001	diff=2.46092e-09
  0.290942	  0.290817	diff=0.000124917
  0.147115	  0.147202	diff=8.61456e-05
 -2.919978	 -2.906020	diff=0.0139578
  0.437271	  0.436216	diff=0.00105509
  0.000273	  0.000274	diff=5.35648e-07
 -0.000040	 -0.000040	diff=7.75815e-08
  0.003952	  0.003933	diff=1.91592e-05
  0.000001	  0.000001	diff=2.37728e-09
 -0.288917	 -0.289047	diff=0.000129052
  0.170964	  0.171107	diff=0.000142369
 -0.000592	 -0.000590	diff=2.25207e-06
 -0.095698	 -0.094635	diff=0.00106315
 -0.000000	 -0.000000	diff=4.81062e-10
  0.000000	  0.000000	diff=1.90888e-10
 -0.000042	 -0.000042	diff=1.55745e-07
  0.000000	  0.000000	diff=5.79424e-11
 -0.000000	 -0.000000	diff=2.95952e-09
  0.000002	  0.000002	diff=1.67021e-12
 -0.000052	 -0.000052	diff=2.86277e-08
  0.001603	  0.001611	diff=7.13592e-06
 -0.000000	 -0.000000	diff=1.32304e-12
 -0.000000	 -0.000000	diff=2.65077e-12
 -0.000000	 -0.000000	diff=1.08321e-11
 -0.000000	 -0.000000	diff=2.86195e-12
 -0.000000	 -0.000000	diff=2.68149e-12
  local_diff=0.655763
# W_tgt{2}, [8 4]
  0.949507	  0.952971	diff=0.00346378
 26.379911	 26.483659	diff=0.103748
  0.000004	  0.000004	diff=1.96277e-08
  1.692094	  1.689998	diff=0.00209582
 -0.353450	 -0.351701	diff=0.00174875
  0.391069	  0.392777	diff=0.00170857
  0.038768	  0.038486	diff=0.000282424
125.482737	127.925845	diff=2.44311
 -0.186367	 -0.185975	diff=0.000392445
 -3.477144	 -3.459002	diff=0.0181426
  0.004973	  0.004973	diff=1.28137e-08
 -0.210650	 -0.209932	diff=0.000718377
 -0.263777	 -0.263852	diff=7.50562e-05
 -0.118882	 -0.119057	diff=0.000175159
 -0.071177	 -0.071367	diff=0.000189919
  0.440569	  0.440878	diff=0.000308815
 -0.736859	 -0.737527	diff=0.000667244
  0.834323	  0.836141	diff=0.00181829
 -0.131988	 -0.132061	diff=7.24309e-05
  0.215905	  0.215975	diff=7.06206e-05
 -0.586063	 -0.586554	diff=0.000491112
 -0.024415	 -0.024410	diff=5.28028e-06
  4.392288	  4.356920	diff=0.035368
  2.174124	  2.181230	diff=0.00710639
  0.452297	  0.452398	diff=0.000101019
 -1.725149	 -1.723283	diff=0.00186578
  0.851125	  0.850968	diff=0.000156938
  0.443483	  0.443301	diff=0.000182671
  0.369431	  0.368885	diff=0.000545518
 -0.015697	 -0.015622	diff=7.55691e-05
 -0.064761	 -0.164620	diff=0.099859
 10.885198	 10.904516	diff=0.0193181
  local_diff=2.74386
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.138601	  0.027477	diff=0.111124
  0.126834	  0.025219	diff=0.101615
  0.000000	  0.000000	diff=5.72897e-09
  0.000000	  0.000000	diff=4.81156e-09
  local_diff=0.21274
# W_emb_tgt, [2 5]
-31.205688	-29.699058	diff=1.50663
 -7.865038	 -7.686011	diff=0.179026
  0.000000	  0.000000	diff=3.55612e-09
  0.000000	  0.000000	diff=2.80918e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.588720	  1.202579	diff=0.386141
  0.868481	  0.883825	diff=0.0153439
  0.102996	  0.097666	diff=0.0053302
 -0.028755	 -0.029470	diff=0.000715293
  local_diff=2.09319
# W_src_char{1}, [8 4]
 -0.000019	 -0.000003	diff=1.58509e-05
  0.000000	 -0.000000	diff=2.27086e-13
  0.000000	  0.000000	diff=3.45637e-09
 -0.000000	 -0.000000	diff=1.60053e-09
-75.865887	-10.209202	diff=65.6567
 -0.000000	 -0.000000	diff=1.45641e-09
 -0.000000	  0.000000	diff=3.20111e-10
  0.000000	 -0.000000	diff=1.2158e-22
  0.000048	  0.000007	diff=4.13024e-05
  0.000000	 -0.000000	diff=2.02401e-13
 -0.000000	 -0.000000	diff=8.37213e-09
 -0.000000	 -0.000000	diff=1.43608e-09
194.545211	 25.581967	diff=168.963
 -0.000000	 -0.000000	diff=1.18293e-09
 -0.000000	  0.000000	diff=2.84575e-10
  0.000000	 -0.000000	diff=1.82308e-22
  0.000000	 -0.000000	diff=2.57323e-16
  0.000000	  0.000000	diff=1.17282e-22
  0.000000	  0.000000	diff=2.65075e-20
  0.000000	 -0.000000	diff=5.51685e-16
  0.000000	 -0.000000	diff=2.81028e-08
  0.000000	 -0.000000	diff=5.3093e-16
  0.000000	  0.000000	diff=2.00607e-18
  0.000000	  0.000000	diff=5.98979e-37
  0.000000	 -0.000000	diff=1.53659e-16
  0.000000	  0.000000	diff=1.72539e-17
  0.000000	 -0.000000	diff=4.06223e-22
 -0.000000	 -0.000000	diff=2.82637e-10
  0.000000	  0.000000	diff=2.10319e-10
 -0.000000	 -0.000000	diff=2.68637e-10
  0.000000	  0.000000	diff=2.95122e-13
  0.000000	  0.000000	diff=8.81161e-32
  local_diff=234.62
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-119.332135	-15.526173	diff=103.806
-99.999717	-13.176229	diff=86.8235
 -0.000000	 -0.000000	diff=1.21889e-10
  0.000000	  0.000000	diff=7.68397e-11
  0.000000	  0.000000	diff=9.18226e-17
  0.000000	  0.000000	diff=8.15391e-17
 -0.000000	  0.000000	diff=4.48951e-07
 -0.000000	  0.000000	diff=3.81262e-07
  local_diff=190.629
# W_h, [2 4]
  0.205254	  0.204879	diff=0.000375043
 -0.177928	 -0.178169	diff=0.000240925
  0.657308	  0.657423	diff=0.000114892
 -0.301554	 -0.301600	diff=4.54345e-05
 -1.667701	 -1.661927	diff=0.00577346
  2.250681	  2.260456	diff=0.00977511
  7.398101	  7.406373	diff=0.00827141
  6.285135	  6.289249	diff=0.00411415
  local_diff=0.0287104
# W_soft, [5 2]
 -4.022185	 -4.029588	diff=0.00740297
 -0.596505	 -0.598439	diff=0.00193391
 -2.451843	 -2.456521	diff=0.00467737
 -5.147165	 -5.153369	diff=0.00620394
 12.238109	 12.237916	diff=0.000193195
 -1.097839	 -1.104937	diff=0.00709841
  0.596716	  0.594716	diff=0.00199926
 -5.381400	 -5.385884	diff=0.00448366
 -0.694173	 -0.700152	diff=0.00597905
  6.596487	  6.596257	diff=0.000230693
  local_diff=0.0402024
# Num params=224, abs_diff=460.693
Elapsed time is 3.828187 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=5.29916e-20
 -0.000654	 -0.003369	diff=0.0027145
  0.000000	  0.000000	diff=1.02764e-12
  0.002048	  0.012410	diff=0.0103617
  0.000000	  0.000000	diff=1.4376e-15
 -0.000000	 -0.000000	diff=4.76581e-10
  0.000000	  0.000000	diff=5.77522e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.71038e-20
  0.000787	  0.004282	diff=0.00349548
 -0.000000	 -0.000000	diff=4.37804e-12
 -0.002463	 -0.015775	diff=0.0133119
  0.000000	 -0.000000	diff=1.82743e-15
 -0.000000	 -0.000000	diff=7.43666e-10
  0.000000	  0.000000	diff=9.28947e-11
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=8.34125e-21
 -0.000100	 -0.000524	diff=0.000424528
  0.000000	  0.000000	diff=1.59925e-13
  0.000312	  0.001931	diff=0.00161905
  0.000000	  0.000000	diff=2.23724e-16
  0.000000	 -0.000000	diff=3.80941e-13
  0.000000	  0.000000	diff=2.67938e-30
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.50705e-32
  0.000000	  0.000000	diff=8.61877e-16
  0.000000	 -0.000000	diff=4.80669e-25
  0.000000	 -0.000000	diff=1.7431e-15
  0.000000	 -0.000000	diff=2.18063e-27
  0.000000	  0.000000	diff=3.02453e-24
  0.000000	 -0.000000	diff=1.22573e-36
  0.000000	  0.000000	diff=0
  local_diff=0.0319271
# W_src{2}, [8 4]
-23.967476	-42.676395	diff=18.7089
  0.213302	  0.182618	diff=0.0306835
 -0.031399	 -0.022662	diff=0.00873718
  0.001160	  0.001137	diff=2.33936e-05
 -1.234819	 -2.322088	diff=1.08727
  0.171475	  0.226312	diff=0.0548371
 -0.000169	 -0.000264	diff=9.52834e-05
 -0.000001	 -0.000001	diff=8.72106e-08
  0.000000	  0.000000	diff=1.08161e-10
 -0.000000	 -0.000000	diff=4.67534e-12
  0.000000	 -0.000000	diff=2.52572e-13
  0.000000	 -0.000000	diff=1.66352e-15
  0.000000	  0.000000	diff=6.48039e-12
 -0.000000	 -0.000000	diff=4.96428e-12
  0.000000	  0.000000	diff=4.64713e-16
  0.000000	  0.000000	diff=2.79862e-18
 -0.763832	 -1.018687	diff=0.254855
  0.004661	  0.003119	diff=0.00154198
 -0.019198	  0.005475	diff=0.0246722
  0.001214	  0.000073	diff=0.00114091
  0.099263	 -0.140304	diff=0.239567
  0.007648	  0.002123	diff=0.00552535
 -1.021137	  0.459774	diff=1.48091
 -2.102155	 -0.985768	diff=1.11639
  0.003544	  0.007146	diff=0.00360183
 -0.000023	 -0.000020	diff=3.23027e-06
  0.000038	 -0.000043	diff=8.06185e-05
 -0.000003	  0.000000	diff=3.36798e-06
 -0.000115	  0.000684	diff=0.000798798
 -0.000033	 -0.000048	diff=1.58039e-05
  0.002212	 -0.001724	diff=0.00393581
  0.004379	  0.001022	diff=0.00335718
  local_diff=23.027
# W_tgt{1}, [8 6]
 -0.072592	 -0.074223	diff=0.001631
 17.336446	 20.151933	diff=2.81549
 -0.618312	 -0.855391	diff=0.237079
 -0.196171	 -1.541428	diff=1.34526
  0.019315	  0.050035	diff=0.0307201
  1.045372	  4.391475	diff=3.3461
 -0.000003	 -0.000001	diff=1.32073e-06
  0.010266	  0.004312	diff=0.00595457
 -0.352443	 -0.360433	diff=0.00799023
-16.917068	-19.452830	diff=2.53576
  0.586725	  0.797401	diff=0.210676
 -0.961656	 -7.485349	diff=6.52369
  0.093328	  0.242978	diff=0.14965
  3.753316	 18.921827	diff=15.1685
 -0.000013	 -0.000007	diff=6.57055e-06
  0.050345	  0.020939	diff=0.0294061
 -0.119046	  0.009479	diff=0.128525
  3.274312	  3.618729	diff=0.344417
  0.393515	  0.441978	diff=0.0484637
  0.451347	  3.581091	diff=3.12974
  0.057885	  0.151193	diff=0.0933087
  0.247301	  0.704008	diff=0.456707
 -0.000010	 -0.000005	diff=5.01148e-06
  0.023888	  0.045436	diff=0.0215486
  0.150233	  0.143360	diff=0.00687326
 -2.930852	 -3.237123	diff=0.306272
  0.287633	  0.321401	diff=0.0337676
 -0.550129	 -4.309769	diff=3.75964
 -0.043367	 -0.110783	diff=0.0674157
 -0.158307	 -0.543625	diff=0.385318
  0.000006	  0.000002	diff=3.23972e-06
 -0.019642	 -0.028987	diff=0.00934488
  0.056408	  0.118416	diff=0.0620082
 -0.000076	 -0.000092	diff=1.62364e-05
  0.227831	  0.292724	diff=0.0648929
 -0.000015	 -0.000043	diff=2.84639e-05
  0.000000	  0.000000	diff=6.3417e-09
 -0.000052	 -0.000069	diff=1.74113e-05
  0.000000	  0.000000	diff=8.68945e-10
 -0.000000	 -0.000001	diff=9.27659e-07
  0.000531	  0.001195	diff=0.000664692
  0.315018	  0.536837	diff=0.221819
 -0.014151	 -0.012180	diff=0.00197096
  0.000043	  0.000066	diff=2.26026e-05
  0.000001	  0.000002	diff=1.35449e-06
  0.544542	  0.902811	diff=0.358269
  0.000000	  0.000000	diff=3.51463e-10
  0.000000	  0.000001	diff=5.92028e-07
  local_diff=41.909
# W_tgt{2}, [8 4]
  1.348428	  1.667696	diff=0.319268
 20.692055	 25.474092	diff=4.78204
 -0.002887	 -0.005600	diff=0.00271335
 -0.326403	 -0.452630	diff=0.126227
  0.153058	 -0.061680	diff=0.214737
  0.444751	  0.521778	diff=0.0770269
  0.117293	  0.362152	diff=0.244859
 82.745783	 96.796458	diff=14.0507
 -0.092378	  0.231630	diff=0.324008
 -2.540441	 -1.922998	diff=0.617444
 -0.049747	 -0.142359	diff=0.092612
 -0.103140	 -0.089089	diff=0.0140507
 -5.335377	-16.531254	diff=11.1959
 -0.699881	 -1.324800	diff=0.624919
  0.195900	  9.734700	diff=9.5388
  0.056080	  0.327636	diff=0.271556
 -1.938971	 -2.409943	diff=0.470971
  0.127623	 -0.089709	diff=0.217331
  0.390172	  0.483153	diff=0.0929814
 -0.142912	 -0.128708	diff=0.0142041
 -1.416788	 -1.895422	diff=0.478634
  0.017154	  0.358228	diff=0.341074
  4.152271	  7.121173	diff=2.9689
 -4.533442	 -4.653787	diff=0.120345
  1.107366	  1.529863	diff=0.422496
 -2.668296	 -2.439380	diff=0.228916
  0.743321	  1.062481	diff=0.31916
  0.635143	  0.483344	diff=0.151799
  0.362020	  0.137603	diff=0.224417
 -0.300101	 -0.028230	diff=0.271871
 -0.649692	 -1.093827	diff=0.444134
 11.028371	  7.324226	diff=3.70414
  local_diff=52.9682
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=1.21473e-09
  0.000000	  0.000000	diff=1.63007e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.002417	  0.015378	diff=0.0129613
  0.002759	  0.017466	diff=0.0147072
  0.000000	  0.000000	diff=1.83415e-11
 -0.000000	  0.000000	diff=2.66969e-11
  local_diff=0.0276685
# W_emb_tgt, [2 5]
-41.375186	-46.503599	diff=5.12841
-10.466532	-11.911739	diff=1.44521
  0.000000	  0.000001	diff=5.68006e-07
  0.000000	  0.000000	diff=1.51572e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  2.237890	 91.898871	diff=89.661
 -3.596149	-62.822284	diff=59.2261
  5.234786	  8.763855	diff=3.52907
 -2.533096	 -4.524643	diff=1.99155
  local_diff=160.981
# W_tgt_char{1}, [8 4]
 -0.155622	 -0.155368	diff=0.000254437
  0.002070	  0.002061	diff=9.80898e-06
  0.000000	 -0.000000	diff=6.4115e-32
 -0.000000	 -0.000000	diff=2.27971e-09
  0.233754	  0.233612	diff=0.000142157
  0.821428	  0.823497	diff=0.0020691
  2.746261	  2.748889	diff=0.00262832
 -0.124580	 -0.126637	diff=0.00205713
 -0.971343	 -0.971277	diff=6.67008e-05
  0.246582	  0.246703	diff=0.000121111
  0.000000	 -0.000000	diff=5.71454e-32
 -0.000000	 -0.000000	diff=8.24281e-09
 -0.384165	 -0.384646	diff=0.000481315
  2.055277	  2.063150	diff=0.00787279
 -0.423752	 -0.422442	diff=0.00130938
 -0.811203	 -0.810915	diff=0.000288346
 -0.000046	 -0.000046	diff=1.43715e-08
  0.000000	  0.000000	diff=4.4682e-15
  0.000000	  0.000000	diff=3.04849e-34
 -0.000000	 -0.000000	diff=2.75778e-11
  0.000001	  0.000001	diff=8.46173e-10
  0.202380	  0.202461	diff=8.05538e-05
 -0.000000	 -0.000000	diff=3.20916e-12
  0.000000	 -0.000000	diff=5.80609e-12
 -0.000013	 -0.000013	diff=9.57817e-09
  0.000000	  0.000000	diff=3.21294e-15
  0.000000	 -0.000000	diff=4.5018e-35
 -0.000000	 -0.000000	diff=1.41901e-11
  0.000000	  0.000000	diff=5.2481e-11
  0.059882	  0.059859	diff=2.35098e-05
 -0.000000	 -0.000000	diff=1.53942e-12
  0.000000	 -0.000000	diff=8.73549e-14
  local_diff=0.0174047
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.949194	 -0.946895	diff=0.00229923
  0.677443	  0.678676	diff=0.00123308
  0.000000	  0.000000	diff=9.78403e-16
  0.000000	  0.000000	diff=7.93589e-16
 -0.000000	 -0.000000	diff=2.45774e-12
 -0.000000	 -0.000000	diff=1.95605e-10
  local_diff=0.00353231
# W_h, [2 4]
  1.310169	  2.228280	diff=0.918111
 -1.029203	 -2.007582	diff=0.978378
 -0.012512	 -0.019001	diff=0.00648813
  0.003148	  0.010135	diff=0.00698737
  0.285294	  0.089309	diff=0.195985
  3.396429	  2.608402	diff=0.788026
  5.737741	  2.639173	diff=3.09857
  7.095367	 17.182012	diff=10.0866
  local_diff=16.0792
# W_soft, [5 2]
 -1.189027	 -1.197234	diff=0.00820673
 -0.434854	 -0.437344	diff=0.00249
 -7.858412	 -7.865210	diff=0.00679784
 -1.836825	 -1.843846	diff=0.00702107
 11.344741	 11.343634	diff=0.00110696
  0.447493	  0.440709	diff=0.00678373
  0.316286	  0.313902	diff=0.00238458
 -4.448612	 -4.454413	diff=0.00580124
  1.182404	  1.176529	diff=0.00587509
  2.524998	  2.523273	diff=0.00172436
  local_diff=0.0481916
# W_soft_char, [5 2]
  0.142820	  0.142613	diff=0.000207182
 -0.068409	 -0.068529	diff=0.000120621
 -0.056110	 -0.056226	diff=0.000116075
  2.013721	  2.013290	diff=0.000430882
 -2.030854	 -2.031147	diff=0.000293348
  0.041567	  0.041550	diff=1.66289e-05
  0.022692	  0.022669	diff=2.30915e-05
  0.310145	  0.310112	diff=3.3344e-05
  0.566290	  0.563434	diff=0.00285615
 -0.934870	 -0.937765	diff=0.00289468
  local_diff=0.00699201
# Num params=234, abs_diff=295.1
Elapsed time is 5.753811 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.004768	 -0.002474	diff=0.00724203
 -0.000824	  0.000164	diff=0.000988214
  0.000242	 -0.000018	diff=0.000260145
  0.000032	 -0.000016	diff=4.80066e-05
  0.004789	 -0.002483	diff=0.00727246
 -0.000828	  0.000173	diff=0.00100028
 -1.090176	  0.642076	diff=1.73225
 -0.015166	 -0.293097	diff=0.277931
 -0.000000	  0.000000	diff=1.09027e-08
 -0.000005	  0.000012	diff=1.71887e-05
  0.000000	 -0.000000	diff=1.94198e-07
  0.000000	  0.000000	diff=5.40518e-14
  0.000000	  0.000000	diff=2.145e-16
  0.000000	 -0.000000	diff=2.49538e-17
  0.000000	 -0.000000	diff=6.39549e-14
  0.000000	  0.000000	diff=1.79653e-14
 -0.001756	  0.000420	diff=0.00217565
  0.000840	 -0.000401	diff=0.00124113
 -0.000347	  0.000083	diff=0.000430436
 -0.000036	  0.000017	diff=5.35421e-05
 -0.002113	  0.000505	diff=0.00261759
  0.000803	 -0.000384	diff=0.00118707
  0.197854	 -0.047323	diff=0.245178
 -0.096702	  0.046225	diff=0.142927
  0.000369	 -0.000088	diff=0.000457244
 -0.000176	  0.000084	diff=0.000260843
  0.000073	 -0.000017	diff=9.04628e-05
  0.000008	 -0.000004	diff=1.12528e-05
  0.000444	 -0.000106	diff=0.000550124
 -0.000169	  0.000081	diff=0.000249483
 -0.041606	  0.009946	diff=0.0515516
  0.020323	 -0.009715	diff=0.030038
  local_diff=2.50603
# W_src{2}, [8 4]
  0.002183	 -0.011132	diff=0.0133146
 -0.016881	  0.017551	diff=0.0344313
  0.001057	  0.000306	diff=0.000750419
 -0.002084	  0.002413	diff=0.00449728
  0.002898	 -0.013243	diff=0.0161405
 -0.013021	  0.023124	diff=0.0361452
 -0.320459	  0.759921	diff=1.08038
 -0.881617	  1.054302	diff=1.93592
  0.001163	  0.000444	diff=0.000718991
 -0.010131	  0.004231	diff=0.0143627
  0.000855	 -0.000911	diff=0.00176629
 -0.001732	  0.000782	diff=0.00251386
  0.002258	 -0.000388	diff=0.00264655
 -0.008959	  0.007603	diff=0.0165622
 -0.203483	  0.089581	diff=0.293064
 -0.310915	  0.066788	diff=0.377704
 -0.004547	  0.011840	diff=0.0163875
 -0.015773	  0.000468	diff=0.0162412
  0.002261	 -0.002646	diff=0.00490731
 -0.003968	  0.000810	diff=0.00477867
 -0.002671	  0.011031	diff=0.0137025
 -0.017878	 -0.000126	diff=0.017752
 -0.490791	 -0.548969	diff=0.0581785
 -0.584443	  0.311088	diff=0.895531
  0.009575	  0.020569	diff=0.0109937
  0.021868	 -0.024899	diff=0.0467669
 -0.003703	 -0.002723	diff=0.00098004
  0.007255	 -0.007386	diff=0.0146412
  0.008150	  0.023358	diff=0.0152081
  0.022852	 -0.034442	diff=0.0572932
  0.863215	 -0.607693	diff=1.47091
  0.749264	 -1.282263	diff=2.03153
  local_diff=8.50671
# W_tgt{1}, [8 6]
 -0.004793	 -0.006206	diff=0.00141247
  0.023114	  0.164670	diff=0.141555
 -7.020585	-10.933007	diff=3.91242
 -0.000535	 -0.000535	diff=5.84559e-07
  0.000004	  0.000004	diff=5.1127e-09
 -1.154685	 -1.111494	diff=0.0431919
 -0.000000	 -0.000000	diff=1.15999e-08
  0.338359	  0.286440	diff=0.0519197
 -0.023384	 -0.030135	diff=0.00675098
 -1.138019	 -1.085631	diff=0.0523884
  6.644732	 10.441591	diff=3.79686
 -0.002614	 -0.002597	diff=1.61475e-05
  0.000017	  0.000018	diff=1.36816e-07
 -5.630226	 -5.397565	diff=0.232661
  0.000000	  0.000000	diff=1.04727e-08
  1.636554	  1.390986	diff=0.245568
  0.005968	  0.007747	diff=0.00177846
  0.238671	  0.190116	diff=0.0485548
  0.856921	  1.414095	diff=0.557173
 -0.000020	 -0.000020	diff=1.53063e-07
  0.000000	  0.000000	diff=1.47245e-09
  0.306504	  0.253469	diff=0.0530346
  0.000000	 -0.000000	diff=3.9742e-10
 -0.420516	 -0.354754	diff=0.0657616
  0.014421	  0.018758	diff=0.00433718
  0.571443	  0.448969	diff=0.122475
  2.023157	  3.256133	diff=1.23298
 -0.000009	 -0.000008	diff=3.63602e-07
  0.000000	  0.000000	diff=4.36752e-09
  0.810415	  0.679668	diff=0.130747
  0.000000	  0.000000	diff=2.12986e-10
 -1.020296	 -0.859181	diff=0.161115
  0.013763	  0.017900	diff=0.00413639
  0.536670	  0.416989	diff=0.119681
  2.312733	  3.607859	diff=1.29513
 -0.000002	 -0.000002	diff=3.47237e-07
  0.000000	  0.000000	diff=3.62174e-09
  0.782935	  0.658345	diff=0.12459
  0.000000	  0.000000	diff=3.75742e-10
 -0.973481	 -0.819879	diff=0.153602
  0.000000	  0.000000	diff=4.32923e-08
  0.000006	  0.000004	diff=1.98756e-06
  0.000186	  0.000273	diff=8.72187e-05
 -0.000000	 -0.000000	diff=2.28707e-12
  0.000000	  0.000000	diff=3.45865e-12
  0.000008	  0.000007	diff=1.28126e-06
  0.000000	  0.000000	diff=1.61342e-14
 -0.000010	 -0.000009	diff=1.59565e-06
  local_diff=12.5599
# W_tgt{2}, [8 4]
 -0.720987	 -1.196954	diff=0.475968
 35.326880	 48.731693	diff=13.4048
 -0.000443	 -0.000536	diff=9.28032e-05
  2.083239	  3.156151	diff=1.07291
 -0.584417	 -2.688486	diff=2.10407
  0.828631	  1.105380	diff=0.276749
  0.192494	  0.232456	diff=0.0399615
173.620467	250.230766	diff=76.6103
 -0.081111	 -0.081522	diff=0.000411246
 -0.376605	 -0.376798	diff=0.00019252
  0.016612	  0.016326	diff=0.000285567
 -0.007450	 -0.006458	diff=0.000992199
 -0.154027	 -0.154429	diff=0.000401761
 -0.461360	 -0.461819	diff=0.000459137
 -2.549445	 -2.548171	diff=0.00127454
 -0.666813	 -0.640927	diff=0.025886
  0.021436	  0.017479	diff=0.003957
 -1.581825	 -2.105329	diff=0.523504
  0.006498	  0.017869	diff=0.0113712
  0.018645	  0.015952	diff=0.00269325
  0.016311	  0.088758	diff=0.0724476
 -0.144022	 -0.158635	diff=0.0146128
 -0.035071	 -0.820741	diff=0.78567
 -2.831519	 -4.328771	diff=1.49725
 -0.435424	 -0.542710	diff=0.107285
  0.873154	  1.344058	diff=0.470904
 -0.350134	 -0.326785	diff=0.0233485
  0.546950	  0.716236	diff=0.169286
 -0.312338	 -0.503133	diff=0.190795
 -0.152966	 -0.127190	diff=0.0257767
 -0.717892	  1.406696	diff=2.12459
 21.647631	 29.365906	diff=7.71827
  local_diff=107.757
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	 -0.000016	diff=2.29205e-05
  0.000008	 -0.000018	diff=2.63102e-05
  0.000000	 -0.000000	diff=2.2973e-07
  0.000000	 -0.000000	diff=2.10537e-07
  local_diff=4.9671e-05
# W_emb_tgt, [2 5]
 -4.165657	 -6.441702	diff=2.27605
  2.511988	  3.948224	diff=1.43624
  0.000000	  0.000000	diff=1.51e-08
 -0.000000	 -0.000000	diff=1.04147e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -7.913209	 -8.451129	diff=0.53792
 11.518966	 11.107143	diff=0.411824
 -0.000245	 -0.000245	diff=5.54593e-07
  0.000103	  0.000119	diff=1.61497e-05
  local_diff=4.66204
# W_src_char{1}, [8 4]
  0.000002	 -0.000002	diff=4.10966e-06
  0.000000	 -0.000000	diff=1.0538e-13
 -0.000000	  0.000000	diff=1.94467e-10
  0.000000	 -0.000000	diff=3.8279e-10
  9.291378	 -5.949629	diff=15.241
  0.000000	 -0.000000	diff=3.53717e-10
  0.000000	  0.000000	diff=2.78398e-11
  0.000000	 -0.000000	diff=6.21703e-23
 -0.000006	  0.000004	diff=1.05091e-05
  0.000000	 -0.000000	diff=9.39247e-14
  0.000000	 -0.000000	diff=4.80621e-10
  0.000000	 -0.000000	diff=3.42781e-10
-22.459271	 14.908433	diff=37.3677
  0.000000	 -0.000000	diff=2.84777e-10
  0.000000	  0.000000	diff=2.8521e-11
  0.000000	 -0.000000	diff=9.64083e-23
  0.000000	 -0.000000	diff=1.1913e-16
  0.000000	  0.000000	diff=6.51425e-23
  0.000000	  0.000000	diff=1.22719e-20
  0.000000	 -0.000000	diff=3.06425e-16
 -0.000000	 -0.000000	diff=2.09297e-09
  0.000000	 -0.000000	diff=2.95437e-16
  0.000000	  0.000000	diff=1.11628e-18
  0.000000	  0.000000	diff=3.3268e-37
  0.000000	 -0.000000	diff=8.55038e-17
  0.000000	  0.000000	diff=9.58342e-18
  0.000000	 -0.000000	diff=2.26025e-22
  0.000000	 -0.000000	diff=6.7817e-11
 -0.000000	  0.000000	diff=4.61625e-11
  0.000000	 -0.000000	diff=6.62005e-11
  0.000000	  0.000000	diff=1.64221e-13
  0.000000	  0.000000	diff=4.89428e-32
  local_diff=52.6087
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 14.204659	 -9.048207	diff=23.2529
 12.026856	 -7.678727	diff=19.7056
  0.000000	 -0.000000	diff=2.88371e-11
  0.000000	  0.000000	diff=1.25179e-11
  0.000000	  0.000000	diff=5.2313e-17
  0.000000	  0.000000	diff=4.66392e-17
  0.000000	  0.000000	diff=3.33502e-08
  0.000000	  0.000000	diff=2.83229e-08
  local_diff=42.9584
# W_tgt_char{1}, [8 4]
  0.018957	  0.019636	diff=0.000679069
  0.045369	  0.045299	diff=7.0638e-05
  0.000000	  0.000000	diff=2.5121e-15
  0.000000	  0.000000	diff=3.26599e-24
  0.112174	  0.112228	diff=5.43949e-05
  0.014711	  0.014700	diff=1.06957e-05
 -0.213061	 -0.213115	diff=5.38163e-05
 -0.217955	 -0.218534	diff=0.000578563
 -0.007593	 -0.005084	diff=0.00250919
  0.058124	  0.058039	diff=8.43667e-05
  0.000000	 -0.000000	diff=3.81961e-15
  0.000000	 -0.000000	diff=3.29032e-24
  0.045847	  0.045861	diff=1.41169e-05
  0.053173	  0.053067	diff=0.000105486
  2.530228	  2.527697	diff=0.00253065
 -0.087441	 -0.087703	diff=0.000261287
  0.000186	  0.000186	diff=6.32293e-08
  0.000000	 -0.000000	diff=3.41182e-21
  0.000000	 -0.000000	diff=4.05531e-17
  0.000000	  0.000000	diff=1.1394e-27
  0.000000	 -0.000000	diff=7.32528e-16
  0.000000	 -0.000000	diff=2.76194e-15
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000497	  0.000498	diff=4.36882e-07
  0.000000	 -0.000000	diff=7.26651e-20
  0.000000	  0.000000	diff=8.45085e-18
  0.000000	 -0.000000	diff=4.0934e-26
  0.000000	  0.000000	diff=8.01268e-17
  0.000000	 -0.000000	diff=2.73753e-14
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.00695278
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.011312	  0.011398	diff=8.58823e-05
  0.001710	  0.001712	diff=1.94611e-06
 -0.000016	 -0.000016	diff=1.22752e-07
 -0.000002	 -0.000002	diff=2.78439e-09
  0.000000	 -0.000000	diff=1.29848e-14
  0.000000	 -0.000000	diff=2.05882e-14
  local_diff=8.7954e-05
# W_h, [2 4]
  0.118340	 -0.281960	diff=0.4003
 -0.283471	 -0.236477	diff=0.0469945
 -0.389979	  0.784896	diff=1.17488
  0.726094	  0.526622	diff=0.199472
  2.336013	  0.172354	diff=2.16366
 -1.631781	 -0.240302	diff=1.39148
  2.763050	 20.364174	diff=17.6011
 13.934094	 14.393447	diff=0.459352
  local_diff=23.4373
# W_soft, [5 2]
  0.384720	  0.384665	diff=5.50966e-05
 -0.061216	 -0.061312	diff=9.60372e-05
 -5.577569	 -5.577785	diff=0.000215938
  2.027702	  2.024828	diff=0.00287394
  3.232356	  3.229605	diff=0.00275074
 -4.473456	 -4.473472	diff=1.62259e-05
  0.039907	  0.039757	diff=0.000149724
 -7.701641	 -7.701673	diff=3.21034e-05
  5.006434	  4.992138	diff=0.0142966
  7.157534	  7.143250	diff=0.0142834
  local_diff=0.0347698
# W_soft_char, [5 2]
 -0.056098	 -0.056124	diff=2.54188e-05
 -0.044421	 -0.044435	diff=1.32979e-05
  0.148002	  0.147970	diff=3.19742e-05
 -0.030551	 -0.030558	diff=7.49067e-06
 -0.016838	 -0.016854	diff=1.503e-05
 -0.982056	 -0.982576	diff=0.000520173
 -0.192906	 -0.193052	diff=0.000145124
  1.119948	  1.119437	diff=0.000511338
 -0.076567	 -0.076617	diff=5.01271e-05
  0.132861	  0.132809	diff=5.27725e-05
  local_diff=0.00137275
# Num params=276, abs_diff=255.039
Elapsed time is 7.181926 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -2.587758	 -8.641738	diff=6.05398
 -0.167536	 -1.235719	diff=1.06818
 -0.363609	 -1.154960	diff=0.79135
  0.124363	  0.451365	diff=0.327002
 -3.497019	-11.656762	diff=8.15974
 -0.375754	 -1.916038	diff=1.54028
 11.682700	 38.544648	diff=26.8619
 -4.215515	-16.139877	diff=11.9244
  1.060630	  2.960192	diff=1.89956
  0.066662	  0.411993	diff=0.345331
  0.154703	  0.428370	diff=0.273667
 -0.012884	 -0.058132	diff=0.0452481
  1.535627	  4.231725	diff=2.6961
  0.119995	  0.598547	diff=0.478552
 -3.716272	-11.320747	diff=7.60447
  0.809204	  3.203763	diff=2.39456
  2.046499	  5.066772	diff=3.02027
 -0.163969	  0.285551	diff=0.44952
  0.585010	  1.659942	diff=1.07493
 -0.364792	 -1.248276	diff=0.883484
  3.711746	  8.904527	diff=5.19278
  0.046791	  0.716902	diff=0.670112
 -5.242560	-17.946629	diff=12.7041
  0.846190	  1.816540	diff=0.97035
 -1.643811	 -6.384193	diff=4.74038
 -0.155163	 -0.793185	diff=0.638022
 -0.372439	 -1.321715	diff=0.949276
 -0.263236	 -0.801182	diff=0.537947
 -3.122867	-12.539408	diff=9.41654
 -0.127144	 -0.708469	diff=0.581324
  2.399958	  7.318955	diff=4.919
  0.657955	  2.424116	diff=1.76616
  local_diff=120.979
# W_src{2}, [8 4]
 -1.489906	 -5.889057	diff=4.39915
 -0.907151	 -4.052705	diff=3.14555
  0.975754	  3.517481	diff=2.54173
 -0.068761	 -0.282995	diff=0.214233
 -2.225867	 -8.298392	diff=6.07253
 -0.937328	 -0.754276	diff=0.183052
-10.022390	-37.743808	diff=27.7214
  1.639004	  5.663095	diff=4.02409
 -0.062991	  0.098208	diff=0.161199
 -1.621938	 -6.076186	diff=4.45425
  0.706405	  2.569648	diff=1.86324
 -0.047246	 -0.194667	diff=0.147421
  1.814786	  8.168778	diff=6.35399
 -0.880113	 -3.318233	diff=2.43812
 -8.920130	-35.716995	diff=26.7969
 -0.832270	 -2.484195	diff=1.65193
 -3.351391	-13.483211	diff=10.1318
 -4.366121	-21.572986	diff=17.2069
  1.250484	  4.829115	diff=3.57863
 -0.325904	 -1.345951	diff=1.02005
  0.083420	  1.657258	diff=1.57384
 -1.547151	 -5.384489	diff=3.83734
 -8.743213	-32.572952	diff=23.8297
 -0.270917	 -0.993327	diff=0.722411
  2.202373	  8.029931	diff=5.82756
  3.906777	 16.356313	diff=12.4495
 -1.602676	 -5.813043	diff=4.21037
  0.280514	  1.025326	diff=0.744811
 -0.857249	 -5.490432	diff=4.63318
  2.028551	  5.833248	diff=3.8047
 19.594876	 60.201303	diff=40.6064
  0.278299	  0.898953	diff=0.620653
  local_diff=226.967
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=1.61469e-07
-29.260098	-27.679846	diff=1.58025
 -0.134200	 -0.106506	diff=0.0276948
  0.190020	  3.804992	diff=3.61497
 -0.000000	 -0.000000	diff=6.08559e-08
  1.127019	 25.921910	diff=24.7949
  0.000004	  0.000004	diff=2.26377e-08
  0.000015	  0.000015	diff=1.24194e-08
  0.000617	  0.000621	diff=4.78697e-06
 29.168744	 38.459978	diff=9.29123
  0.127938	  0.101730	diff=0.0262082
  0.947811	 18.476609	diff=17.5288
 -0.000000	 -0.000000	diff=2.80652e-07
  4.641130	 95.187291	diff=90.5462
  0.000002	  0.000001	diff=2.48901e-07
  0.000076	  0.000077	diff=1.01773e-06
 -0.000487	 -0.000484	diff=3.28366e-06
 -0.764414	 -8.243312	diff=7.4789
  0.025708	  0.017550	diff=0.00815765
 -0.694598	-14.383820	diff=13.6892
  0.000000	  0.000000	diff=2.21403e-07
 -0.919505	-23.545017	diff=22.6255
 -0.000004	 -0.000004	diff=7.9931e-08
 -0.000041	 -0.000040	diff=2.94209e-07
 -0.000487	 -0.000484	diff=3.2878e-06
 10.286128	  2.757963	diff=7.52817
  0.030801	  0.022477	diff=0.00832405
 -0.695064	-14.393046	diff=13.698
  0.000000	  0.000000	diff=2.21606e-07
 -1.036146	-25.711378	diff=24.6752
 -0.000005	 -0.000005	diff=8.69409e-08
 -0.000051	 -0.000051	diff=4.56134e-07
 -0.000000	 -0.000000	diff=9.92359e-13
  0.035256	  0.035134	diff=0.000121719
  0.031855	  0.024122	diff=0.00773291
 -0.000002	 -0.000002	diff=3.33145e-10
 -0.000000	 -0.000000	diff=8.21975e-10
  0.035906	  0.035768	diff=0.000138101
  0.000000	  0.000000	diff=3.19514e-12
 -0.000047	 -0.000047	diff=3.74165e-07
  0.000093	  0.000093	diff=7.56281e-08
  0.075495	  1.518751	diff=1.44326
  0.000006	  0.000006	diff=3.38285e-09
  0.138468	  2.777834	diff=2.63937
 -0.000000	 -0.000000	diff=4.25673e-08
  0.030708	  0.618901	diff=0.588193
  0.000001	  0.000001	diff=1.60297e-09
 -0.000000	 -0.000000	diff=5.31634e-12
  local_diff=241.801
# W_tgt{2}, [8 4]
  1.028031	  1.029621	diff=0.00159015
  2.060617	  1.705513	diff=0.355104
  0.000058	  0.000078	diff=1.98577e-05
 -0.212590	 -0.197793	diff=0.0147968
  0.166486	  0.176447	diff=0.00996099
  0.021007	  0.015798	diff=0.00520877
 -0.005528	 -0.018946	diff=0.0134182
-21.099309	-21.799462	diff=0.700153
  0.357748	  5.419143	diff=5.0614
 -0.112326	 -2.916990	diff=2.80466
  0.002930	 -0.206451	diff=0.209381
 -0.090466	 -1.267890	diff=1.17742
  0.798262	 12.105215	diff=11.307
 -0.725573	-14.049473	diff=13.3239
 -0.272218	 -4.950522	diff=4.6783
 -1.547070	 -3.062408	diff=1.51534
 -7.144495	-10.279162	diff=3.13467
 -0.086880	  0.525564	diff=0.612444
  1.778995	  2.171946	diff=0.392951
  1.029011	  1.977915	diff=0.948904
 -6.483701	 -7.382591	diff=0.898891
  0.301964	  0.312244	diff=0.0102792
 -2.774372	 -0.867840	diff=1.90653
 -0.471080	  2.242611	diff=2.71369
  4.438107	 11.249523	diff=6.81142
  1.676536	  4.747842	diff=3.07131
  0.235592	  0.925535	diff=0.689943
 -2.493995	 -4.721914	diff=2.22792
  2.217870	 -0.203038	diff=2.42091
  0.366781	  8.256461	diff=7.88968
 -1.181618	 -6.066167	diff=4.88455
-19.879752	-53.284190	diff=33.4044
  local_diff=113.196
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=8.97765e-08
  0.000002	  0.000002	diff=1.17557e-07
 -0.000000	 -0.000000	diff=3.60258e-10
 -0.000000	 -0.000000	diff=4.13198e-10
  local_diff=2.08107e-07
# W_emb_tgt, [2 5]
 69.329030	 67.819428	diff=1.5096
 18.205490	 18.069420	diff=0.13607
 -0.000000	 -0.000000	diff=1.26986e-07
  0.000000	 -0.000000	diff=2.03282e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -5.573026	-152.635429	diff=147.062
  4.969230	 83.253515	diff=78.2843
  5.598864	111.911617	diff=106.313
 -2.159447	-57.830714	diff=55.6713
  local_diff=388.976
# W_src_char{1}, [8 4]
 -0.172646	 -0.156298	diff=0.0163474
 -0.042464	 -0.016735	diff=0.0257291
 -0.000000	 -0.000000	diff=1.34118e-07
  1.668159	  0.645818	diff=1.02234
 -1.723890	 -1.076358	diff=0.647532
  2.114165	  0.816139	diff=1.29803
 -0.005825	 -0.003573	diff=0.00225232
 -0.001710	 -0.000673	diff=0.00103628
 14.992899	  7.999185	diff=6.99371
  2.669324	  1.025875	diff=1.64345
  0.000021	  0.000013	diff=8.16204e-06
-53.778857	-39.590094	diff=14.1888
 76.688741	 65.983122	diff=10.7056
-62.580446	-49.857981	diff=12.7225
  0.360549	  0.219011	diff=0.141538
  0.105096	  0.041121	diff=0.0639746
 -0.000352	 -0.000216	diff=0.000135972
 -0.000070	 -0.000028	diff=4.24779e-05
 -0.000000	 -0.000000	diff=2.00532e-10
  0.002705	  0.001065	diff=0.00163938
 -0.002896	 -0.001776	diff=0.00112004
  0.003407	  0.001342	diff=0.00206464
 -0.000010	 -0.000006	diff=3.71752e-06
 -0.000003	 -0.000001	diff=1.70272e-06
  0.000002	  0.000001	diff=8.81097e-07
  0.000000	  0.000000	diff=2.75274e-07
  0.000000	  0.000000	diff=2.27346e-12
 -0.000018	 -0.000007	diff=1.06775e-05
  0.000019	  0.000011	diff=7.32183e-06
 -0.000022	 -0.000009	diff=1.34351e-05
  0.000000	  0.000000	diff=2.4094e-08
  0.000000	  0.000000	diff=1.10496e-08
  local_diff=49.4778
# W_src_char{2}, [8 4]
 17.092138	 11.081479	diff=6.01066
 -2.565846	 -1.666158	diff=0.899687
  0.000719	  0.000546	diff=0.00017233
 -0.000762	 -0.000481	diff=0.000280278
 11.398444	 10.757446	diff=0.640998
 -1.566437	 -1.143218	diff=0.423219
 -6.743215	 -5.552177	diff=1.19104
 36.533535	 18.318365	diff=18.2152
 -9.436464	-10.962319	diff=1.52586
  3.093708	 10.801837	diff=7.70813
 -0.004120	 -0.009613	diff=0.00549312
  0.004317	  0.008111	diff=0.0037946
 -6.483587	 -7.954596	diff=1.47101
  2.078174	  8.115052	diff=6.03688
  5.165044	  3.748155	diff=1.41689
-16.260983	-12.265768	diff=3.99521
  9.323636	 15.783876	diff=6.46024
 -3.849736	 -6.995964	diff=3.14623
 15.634382	 90.718075	diff=75.0837
 -0.655838	 -1.569312	diff=0.913475
  8.183278	 13.635693	diff=5.45242
 -2.987731	 -6.448663	diff=3.46093
 -0.419115	 -0.742843	diff=0.323729
  3.931315	  6.400632	diff=2.46932
  2.259778	  3.309269	diff=1.04949
 -1.069691	 -1.861896	diff=0.792205
 -4.752592	-67.025209	diff=62.2726
 -0.071368	  0.297681	diff=0.369049
  2.038626	  3.300389	diff=1.26176
 -0.540351	  0.127539	diff=0.66789
 -0.110982	 -0.197036	diff=0.0860539
  1.003639	  1.702824	diff=0.699184
  local_diff=214.053
# W_src_char{3}, [8 4]
 -7.642854	-43.269355	diff=35.6265
  4.537960	 27.936744	diff=23.3988
  1.482334	  4.047284	diff=2.56495
 -0.025156	 -0.219616	diff=0.19446
 10.605017	 46.103317	diff=35.4983
 -0.166873	 -0.418243	diff=0.251369
-33.775826	-94.469199	diff=60.6934
 -0.654785	 -2.470403	diff=1.81562
  4.323357	 36.795023	diff=32.4717
 -3.624468	-26.347937	diff=22.7235
  0.852611	  1.181720	diff=0.329109
  0.032384	  0.048824	diff=0.01644
  5.383530	  0.525225	diff=4.8583
 -0.015773	 -0.169220	diff=0.153447
 -8.266361	-17.429941	diff=9.16358
  0.253087	  0.985305	diff=0.732218
 -0.051344	 -0.109121	diff=0.0577764
 -2.977963	 -6.444780	diff=3.46682
 -2.698720	 -7.176281	diff=4.47756
  0.031525	  0.347291	diff=0.315766
-26.398487	-96.887910	diff=70.4894
 -0.143267	  0.141307	diff=0.284574
-17.717568	-44.141904	diff=26.4243
  1.330968	  4.429738	diff=3.09877
  0.006180	  0.010805	diff=0.00462535
 -0.055147	 -1.015885	diff=0.960738
  0.314674	  0.400888	diff=0.0862133
  0.014866	  0.025741	diff=0.010875
  2.769245	  0.854756	diff=1.91449
  0.019585	 -0.022779	diff=0.0423643
  2.974710	  5.226552	diff=2.25184
  0.106159	  0.499197	diff=0.393038
  local_diff=344.771
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000003	  0.000004	diff=1.68733e-06
  0.000002	  0.000004	diff=1.4569e-06
 -0.000179	 -0.001167	diff=0.000987867
 -0.011118	  0.008502	diff=0.0196198
-47.770006	-140.130615	diff=92.3606
 78.221389	-32.444986	diff=110.666
  0.000000	  0.000000	diff=1.18905e-10
 -0.000000	 -0.000000	diff=9.39647e-11
  local_diff=203.048
# W_tgt_char{1}, [8 4]
  0.228093	  0.227134	diff=0.000958629
 -0.107497	 -0.110169	diff=0.00267147
  0.677271	  0.627238	diff=0.0500325
 -0.000003	 -0.000003	diff=3.27915e-08
 -1.218410	 -1.244994	diff=0.0265838
  0.237626	  0.171491	diff=0.0661353
  1.625518	  1.585771	diff=0.0397468
  2.517312	  2.414664	diff=0.102647
 -0.039036	 -0.039207	diff=0.000171128
 -0.058410	 -0.058309	diff=0.000101416
 -0.180807	 -0.185107	diff=0.00429962
  0.000001	  0.000001	diff=2.83234e-09
  0.349743	  0.346344	diff=0.00339915
  0.068863	  0.065391	diff=0.0034714
  0.226724	  0.221496	diff=0.00522832
  1.232237	  1.196193	diff=0.036044
  0.000000	  0.000000	diff=1.56001e-11
 -0.000001	 -0.000001	diff=6.2132e-10
 -0.057806	 -0.058090	diff=0.000284175
  0.000000	  0.000000	diff=1.95163e-10
  0.000023	  0.000023	diff=1.66399e-08
 -0.000000	 -0.000000	diff=3.07783e-13
  0.000000	 -0.000000	diff=1.95214e-17
  0.000000	  0.000000	diff=4.10279e-15
 -0.000000	 -0.000000	diff=2.98037e-12
  0.000000	  0.000000	diff=1.05537e-10
  0.022608	  0.022479	diff=0.000129162
 -0.000000	 -0.000000	diff=2.47613e-11
 -0.000004	 -0.000004	diff=2.97382e-09
  0.000000	  0.000000	diff=1.04751e-12
  0.000000	  0.000000	diff=1.51369e-16
  0.000000	  0.000000	diff=4.18535e-21
  local_diff=0.341904
# W_tgt_char{2}, [8 4]
 -0.310878	 -0.311299	diff=0.000420554
 -0.030484	 -0.030556	diff=7.26298e-05
  0.000591	  0.000591	diff=3.75526e-07
  0.003154	  0.003146	diff=7.46086e-06
 -0.415212	 -0.415734	diff=0.000521848
  0.196787	  0.196567	diff=0.000219397
  0.287586	  0.287754	diff=0.00016872
  0.740225	  0.718931	diff=0.0212941
  0.088669	  0.088039	diff=0.000630126
  0.040581	  0.040544	diff=3.6784e-05
  0.000000	  0.000000	diff=8.28586e-13
 -0.000000	 -0.000000	diff=2.61286e-13
  0.017407	  0.016933	diff=0.000474541
  0.045105	  0.045008	diff=9.68408e-05
 -0.165524	 -0.165918	diff=0.000393405
 -0.945596	 -0.968037	diff=0.0224411
  0.454745	  0.454480	diff=0.000265094
  0.255751	  0.254641	diff=0.00110971
 -0.333679	 -0.333945	diff=0.000265653
 -0.479650	 -0.479898	diff=0.000248753
  1.508751	  1.513102	diff=0.00435081
  0.769582	  0.769340	diff=0.000241997
 -0.063968	 -0.070882	diff=0.00691424
  0.320644	  0.320039	diff=0.000605558
 -0.020932	 -0.020929	diff=3.21683e-06
  0.788723	  0.787575	diff=0.00114728
  0.002648	  0.002634	diff=1.33662e-05
 -0.962074	 -0.961793	diff=0.000281236
 -0.690981	 -0.690941	diff=3.99413e-05
  1.177675	  1.178558	diff=0.000882146
  0.129358	  0.123220	diff=0.00613771
 -0.462205	 -0.461754	diff=0.000451168
  local_diff=0.0697357
# W_tgt_char{3}, [8 4]
 -1.270854	 -1.271869	diff=0.00101579
  0.526835	  0.526582	diff=0.000252313
  0.223341	  0.223495	diff=0.000154539
 -0.135326	 -0.135342	diff=1.62509e-05
 -0.885248	 -0.885209	diff=3.90685e-05
  1.311553	  1.311436	diff=0.000117427
 -0.329927	 -0.330833	diff=0.000905338
 -1.866747	 -1.859604	diff=0.00714279
 -1.554891	 -1.554467	diff=0.00042467
  0.741389	  0.740905	diff=0.000483897
  0.049588	  0.049532	diff=5.5578e-05
  0.212234	  0.212107	diff=0.000127243
 -0.726074	 -0.726034	diff=4.05316e-05
 -1.488069	 -1.486924	diff=0.0011455
  1.096527	  1.093273	diff=0.00325345
  0.354779	  0.354567	diff=0.000212686
  0.189947	  0.190067	diff=0.000119667
  0.278425	  0.278134	diff=0.000291267
  0.494889	  0.495364	diff=0.000474386
  0.116333	  0.116366	diff=3.29533e-05
  1.089253	  1.089265	diff=1.17615e-05
 -1.063616	 -1.063563	diff=5.28866e-05
  4.372827	  4.356617	diff=0.0162105
  0.015175	  0.015201	diff=2.52918e-05
  0.054921	  0.054897	diff=2.39803e-05
  0.193304	  0.193262	diff=4.21893e-05
  0.014663	  0.014728	diff=6.50611e-05
 -0.025177	 -0.025268	diff=9.16162e-05
  0.241920	  0.242086	diff=0.000165513
 -0.491607	 -0.491459	diff=0.000147882
  2.981984	  2.978721	diff=0.0032633
 -0.015658	 -0.015651	diff=6.57712e-06
  local_diff=0.0364119
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.139158	  0.136715	diff=0.00244214
  4.198717	  3.010109	diff=1.18861
  0.000000	  0.000000	diff=1.62854e-09
 -0.000000	 -0.000000	diff=2.07256e-10
 -0.000000	 -0.000000	diff=6.21084e-12
  0.000000	  0.000000	diff=3.58671e-13
  local_diff=1.19105
# W_h, [2 4]
 -0.215689	 -8.691793	diff=8.4761
  1.306284	  7.619156	diff=6.31287
 -1.754786	  7.458179	diff=9.21296
 -1.170348	 -9.476975	diff=8.30663
-19.470589	-19.371845	diff=0.0987443
  4.547035	  7.070692	diff=2.52366
  1.430119	  0.258307	diff=1.17181
  0.339964	  6.928907	diff=6.58894
  local_diff=42.6917
# W_soft, [5 2]
 -9.831373	 -9.841868	diff=0.0104952
 -0.037506	 -0.037775	diff=0.000268984
 -7.423825	 -7.423851	diff=2.61601e-05
 -1.014743	 -1.018057	diff=0.00331411
 18.335154	 18.321551	diff=0.0136029
 -4.193480	 -4.206446	diff=0.0129656
 -0.585552	 -0.586476	diff=0.00092402
 -7.516441	 -7.517209	diff=0.000768216
 -2.553731	 -2.557016	diff=0.0032845
 14.882311	 14.867146	diff=0.0151652
  local_diff=0.0608149
# W_soft_char, [5 2]
 -0.446480	 -0.447325	diff=0.000845168
  0.502870	  0.502015	diff=0.000854785
  0.313231	  0.312419	diff=0.000812736
  0.151343	  0.150662	diff=0.000681262
 -0.516926	 -0.517771	diff=0.000844498
  0.751171	  0.749812	diff=0.00135937
 -0.704855	 -0.705199	diff=0.000344021
  0.964148	  0.962767	diff=0.00138107
 -0.687840	 -0.688003	diff=0.000163196
 -0.318980	 -0.319377	diff=0.000396933
  local_diff=0.00768303
# Num params=404, abs_diff=1947.67
Elapsed time is 13.237209 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.774607	  0.775017	diff=0.000409914
  0.128423	  0.128406	diff=1.66134e-05
 -0.009830	 -0.009919	diff=8.9507e-05
 -0.019058	 -0.019049	diff=8.71632e-06
  5.189606	  5.206958	diff=0.0173519
  0.003961	  0.004039	diff=7.76725e-05
 -3.988843	 -3.977084	diff=0.0117587
 -0.972254	 -0.973370	diff=0.00111569
 -0.022317	 -0.022318	diff=1.06735e-07
 -0.177002	 -0.177434	diff=0.000431855
 -0.001375	 -0.001376	diff=8.4785e-07
  0.000380	  0.000380	diff=1.28764e-08
 -0.385880	 -0.385825	diff=5.52742e-05
 -0.309317	 -0.310534	diff=0.00121771
  0.150534	  0.150571	diff=3.61441e-05
  0.736365	  0.728765	diff=0.00760002
  0.191262	  0.191210	diff=5.17415e-05
 -0.304794	 -0.304387	diff=0.000407048
  0.053286	  0.053323	diff=3.67449e-05
  0.030215	  0.030234	diff=1.85428e-05
  1.850483	  1.853264	diff=0.00278142
 -0.155375	 -0.155203	diff=0.000172843
 -0.081188	 -0.081324	diff=0.000135817
  0.040618	  0.040706	diff=8.82367e-05
 -0.026965	 -0.026966	diff=7.27646e-07
  0.039220	  0.039227	diff=6.79045e-06
 -0.006751	 -0.006750	diff=6.45873e-07
 -0.003902	 -0.003902	diff=3.08678e-07
 -0.222346	 -0.222302	diff=4.40938e-05
  0.019886	  0.019889	diff=2.87939e-06
  0.018291	  0.018289	diff=1.9861e-06
 -0.006440	 -0.006439	diff=1.50467e-06
  local_diff=0.0439219
# W_src{2}, [8 4]
  0.546315	  0.546316	diff=1.29555e-06
 -1.838873	 -1.834678	diff=0.00419498
 -0.010543	 -0.010418	diff=0.000124876
  0.008380	  0.008388	diff=7.40131e-06
 -0.588008	 -0.590486	diff=0.00247799
  0.088173	  0.093252	diff=0.00507872
 -0.290159	 -0.289528	diff=0.000631319
 -0.586656	 -0.585140	diff=0.00151648
  0.028344	  0.028198	diff=0.000145137
  0.955350	  0.951577	diff=0.00377263
 -0.051483	 -0.051411	diff=7.15621e-05
 -0.002983	 -0.002982	diff=6.8866e-07
 -0.553095	 -0.552446	diff=0.000649726
  1.616534	  1.612816	diff=0.0037178
  1.108858	  1.096562	diff=0.0122956
 -1.457773	 -1.497063	diff=0.0392892
  0.207397	  0.207114	diff=0.000283063
  0.098363	  0.098311	diff=5.18937e-05
  0.127123	  0.126936	diff=0.000187512
 -0.007134	 -0.007140	diff=5.75592e-06
 -0.142017	 -0.141890	diff=0.000126864
  0.439434	  0.439588	diff=0.000154683
 -1.322516	 -1.326307	diff=0.00379088
  0.208624	  0.208144	diff=0.000480281
 -0.206502	 -0.207098	diff=0.000596456
 -0.308359	 -0.309157	diff=0.000797752
 -0.717426	 -0.719882	diff=0.00245606
  0.052711	  0.052607	diff=0.000104398
  0.748552	  0.750358	diff=0.00180571
 -1.468626	 -1.466725	diff=0.0019001
  5.956664	  5.933378	diff=0.0232862
 -0.375785	 -0.378924	diff=0.00313849
  local_diff=0.113141
# W_tgt{1}, [8 6]
 -0.005302	 -0.005214	diff=8.83035e-05
  2.669619	  2.456937	diff=0.212682
  3.470631	  3.515662	diff=0.0450307
 -0.000033	 -0.000033	diff=5.65729e-08
  0.000032	  0.000032	diff=5.2425e-07
 -0.001881	 -0.001871	diff=9.42082e-06
  0.000000	  0.000000	diff=2.88757e-12
  0.000000	  0.000000	diff=4.30152e-12
 -0.000000	 -0.000000	diff=8.19885e-10
 -2.169091	 -2.346737	diff=0.177646
 -3.376871	 -3.335874	diff=0.0409971
 -0.000160	 -0.000159	diff=1.34533e-06
 -0.000000	 -0.000000	diff=1.72484e-12
 -0.009307	 -0.009088	diff=0.00021889
 -0.000000	 -0.000000	diff=2.26268e-12
  0.000000	  0.000000	diff=8.62295e-12
  0.000971	  0.000974	diff=3.11938e-06
  0.195487	  0.194216	diff=0.00127064
 -1.126173	 -1.121674	diff=0.00449934
  0.000067	  0.000067	diff=2.38215e-07
 -0.000005	 -0.000005	diff=1.23346e-08
  0.003800	  0.003840	diff=4.01357e-05
  0.000000	  0.000000	diff=6.34186e-13
 -0.000000	 -0.000000	diff=5.87696e-12
 -0.001867	 -0.001856	diff=1.11056e-05
 -0.891108	 -0.919086	diff=0.0279776
  1.289121	  1.295141	diff=0.00601984
  0.000000	 -0.000000	diff=3.75862e-13
 -0.000004	 -0.000004	diff=2.38006e-08
  0.000000	 -0.000000	diff=3.17462e-14
  0.000000	 -0.000000	diff=3.09443e-12
  0.000000	 -0.000000	diff=2.47554e-15
  0.000064	  0.000064	diff=2.42035e-07
  0.001366	  0.001380	diff=1.39447e-05
 -0.816794	 -0.814372	diff=0.00242233
  0.000000	 -0.000000	diff=3.3416e-16
 -0.000007	 -0.000007	diff=2.7808e-08
  0.000000	 -0.000000	diff=1.16948e-13
  0.000000	  0.000000	diff=3.7804e-19
  0.000000	 -0.000000	diff=3.23633e-18
  0.000000	 -0.000000	diff=3.01336e-15
 -0.000355	 -0.000354	diff=1.13645e-06
 -0.000000	 -0.000000	diff=6.82882e-11
  0.000000	 -0.000000	diff=2.78083e-22
 -0.000000	 -0.000000	diff=1.61188e-12
  0.000000	  0.000000	diff=7.55484e-15
  0.000000	  0.000000	diff=7.96441e-20
  0.000000	 -0.000000	diff=1.46949e-24
  local_diff=0.518933
# W_tgt{2}, [8 4]
  1.422975	  1.425289	diff=0.0023134
  2.610780	  2.607157	diff=0.00362355
 -0.000105	 -0.000104	diff=4.87414e-07
 -0.842775	 -0.837876	diff=0.0048995
  0.216620	  0.215566	diff=0.00105391
 -0.034578	 -0.034415	diff=0.000163337
  0.071462	  0.071693	diff=0.000230586
-32.063758	-30.415507	diff=1.64825
 -0.032566	 -0.032562	diff=3.87902e-06
 -0.064529	 -0.064731	diff=0.000201796
  0.101001	  0.100596	diff=0.000404721
  0.001608	  0.001620	diff=1.15448e-05
  0.028190	  0.028161	diff=2.84585e-05
 -0.057595	 -0.057739	diff=0.000144256
  0.118206	  0.117825	diff=0.00038131
  0.022694	  0.022637	diff=5.73284e-05
  0.306323	  0.306169	diff=0.000154374
 -0.137675	 -0.137293	diff=0.000382083
 -0.228693	 -0.227419	diff=0.00127435
 -1.327015	 -1.324872	diff=0.00214288
 -0.636691	 -0.634185	diff=0.00250638
 -0.094746	 -0.094730	diff=1.57173e-05
  0.292952	  0.293284	diff=0.000332348
 -6.439771	 -6.404442	diff=0.0353292
  0.733213	  0.738971	diff=0.00575811
 -1.732346	 -1.733996	diff=0.00164976
  0.291097	  0.292173	diff=0.00107584
  5.449608	  5.481953	diff=0.0323451
  0.508396	  0.506778	diff=0.00161845
  0.107398	  0.108417	diff=0.0010188
 -1.220707	 -1.218773	diff=0.0019334
 26.523828	 26.936809	diff=0.412981
  local_diff=2.16229
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.62521e-11
  0.000000	  0.000000	diff=4.92313e-11
  0.000000	  0.000000	diff=6.70636e-14
  0.000000	  0.000000	diff=6.20774e-14
  local_diff=8.56125e-11
# W_emb_tgt, [2 5]
 -2.840010	 -3.781741	diff=0.941731
 -2.746844	 -2.813053	diff=0.0662085
  0.000029	  0.000029	diff=2.48258e-07
  0.000000	  0.000000	diff=7.46795e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.035193	 -0.032475	diff=0.00271745
  0.015646	  0.016435	diff=0.000788631
 -0.000000	 -0.000000	diff=7.11004e-10
  0.000000	  0.000000	diff=3.78293e-10
  local_diff=1.01145
# W_src_char{1}, [8 4]
 -0.003417	 -0.003528	diff=0.00011124
 -0.000208	 -0.000208	diff=1.1374e-08
 -0.000000	 -0.000000	diff=3.43036e-12
  0.026875	  0.026860	diff=1.46e-05
 -0.071086	 -0.071095	diff=9.26697e-06
  0.034339	  0.034315	diff=2.41615e-05
 -0.000038	 -0.000038	diff=4.47361e-09
 -0.000003	 -0.000003	diff=2.38928e-10
  0.327721	  0.326314	diff=0.00140642
  0.012700	  0.012742	diff=4.26393e-05
  0.000000	  0.000000	diff=5.71878e-11
 -1.612476	 -1.646593	diff=0.0341166
  4.459545	  4.358289	diff=0.101256
 -2.055944	 -2.105252	diff=0.0493083
  0.002343	  0.002326	diff=1.69091e-05
  0.000162	  0.000161	diff=1.15959e-06
 -0.000000	 -0.000000	diff=1.15093e-12
 -0.000000	 -0.000000	diff=2.82145e-12
  0.000000	 -0.000000	diff=2.16286e-14
  0.000002	  0.000002	diff=4.25803e-12
 -0.000006	 -0.000006	diff=5.73801e-13
  0.000003	  0.000003	diff=2.6316e-12
 -0.000000	 -0.000000	diff=3.48285e-12
 -0.000000	 -0.000000	diff=1.19522e-12
  0.000000	  0.000000	diff=2.32655e-12
  0.000000	  0.000000	diff=3.03599e-12
  0.000000	  0.000000	diff=4.25645e-17
 -0.000000	 -0.000000	diff=2.82797e-12
  0.000000	  0.000000	diff=2.96452e-12
 -0.000000	 -0.000000	diff=4.47392e-12
  0.000000	  0.000000	diff=5.06199e-13
  0.000000	  0.000000	diff=4.27444e-13
  local_diff=0.186307
# W_src_char{2}, [8 4]
  0.071378	  0.070736	diff=0.000642685
 -0.077749	 -0.077765	diff=1.58041e-05
  0.000000	  0.000000	diff=4.11517e-11
 -0.000002	 -0.000002	diff=3.71466e-10
 -0.276736	 -0.276962	diff=0.000225939
 -0.037946	 -0.037966	diff=1.98638e-05
 -0.038558	 -0.038696	diff=0.000138009
  0.835754	  0.833387	diff=0.00236674
 -2.492393	 -2.490112	diff=0.00228131
 -0.769013	 -0.764849	diff=0.00416338
 -0.910218	 -0.908216	diff=0.00200209
 -0.015647	 -0.015679	diff=3.21964e-05
  0.215864	  0.215613	diff=0.00025091
 -0.527769	 -0.525040	diff=0.00272857
  0.026004	  0.025945	diff=5.94495e-05
 -0.551235	 -0.551890	diff=0.000655581
 -1.162346	 -1.163332	diff=0.000986639
  0.238105	  0.238571	diff=0.000465605
-32.514601	-31.993244	diff=0.521358
  0.474388	  0.479308	diff=0.0049206
 -0.370734	 -0.370198	diff=0.0005358
  1.317031	  1.362188	diff=0.0451573
  0.017017	  0.017059	diff=4.27899e-05
 -0.207642	 -0.207719	diff=7.71424e-05
 -0.033216	 -0.034013	diff=0.000796795
  0.063873	  0.063912	diff=3.90681e-05
 29.328062	 29.628164	diff=0.300102
 -0.434901	 -0.430182	diff=0.00471822
  0.015098	  0.015445	diff=0.000347024
 -1.164801	 -1.121229	diff=0.043572
  0.004674	  0.004677	diff=3.22021e-06
 -0.056953	 -0.056959	diff=5.76018e-06
  local_diff=0.93871
# W_src_char{3}, [8 4]
  6.972333	  6.990347	diff=0.0180141
 -3.633659	 -3.636942	diff=0.00328324
 -0.244731	 -0.245154	diff=0.000422994
  0.001361	  0.001376	diff=1.45528e-05
-11.263741	-11.204720	diff=0.0590203
 -0.033743	 -0.033707	diff=3.61133e-05
 -0.281946	 -0.286279	diff=0.00433331
  0.016471	  0.016575	diff=0.000103689
 -6.887828	 -6.870536	diff=0.0172923
  3.343996	  3.334673	diff=0.00932309
  0.023952	  0.023927	diff=2.45921e-05
 -0.070231	 -0.070312	diff=8.09569e-05
  2.407065	  2.409270	diff=0.00220556
 -0.029624	 -0.029008	diff=0.000616029
 -0.192518	 -0.192030	diff=0.000488767
 -0.999657	 -1.003882	diff=0.00422504
 -0.017287	 -0.017329	diff=4.16689e-05
  0.280835	  0.280576	diff=0.00025895
  0.333156	  0.332655	diff=0.000501722
  0.002049	  0.002045	diff=3.66041e-06
 14.922020	 15.007039	diff=0.0850191
  0.015665	  0.015700	diff=3.54564e-05
  1.107233	  1.115199	diff=0.00796649
 -0.021921	 -0.021814	diff=0.00010645
  0.041761	  0.041912	diff=0.000150901
  7.075134	  6.795501	diff=0.279634
  0.001356	  0.001355	diff=1.02578e-06
 -0.244900	 -0.246185	diff=0.00128495
  0.686571	  0.687232	diff=0.000660765
 -0.702233	 -0.707420	diff=0.00518702
 -0.067110	 -0.067014	diff=9.56112e-05
 -3.732008	 -3.791096	diff=0.0590879
  local_diff=0.55952
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=6.2725e-11
 -0.000000	 -0.000000	diff=5.23794e-11
  0.000033	  0.000033	diff=7.37736e-09
 -0.000547	 -0.000557	diff=1.02239e-05
-15.269838	-13.923707	diff=1.34613
 -7.926336	 -7.759591	diff=0.166745
  0.000000	 -0.000000	diff=1.27541e-13
 -0.000586	 -0.000593	diff=6.40995e-06
  local_diff=1.51289
# W_h, [2 4]
 -0.037667	 -0.038837	diff=0.00117029
 -1.769786	 -1.765998	diff=0.00378734
 -4.237478	 -4.448499	diff=0.211021
 -1.812797	 -1.806268	diff=0.00652929
  0.516798	  0.514863	diff=0.0019352
  2.877683	  2.882376	diff=0.00469261
  0.512862	  0.510841	diff=0.00202141
 -0.253541	 -0.250570	diff=0.00297036
  local_diff=0.234128
# W_soft, [5 2]
  0.316517	  0.315965	diff=0.000551902
 -1.138440	 -1.140699	diff=0.00225892
 -2.315172	 -2.316921	diff=0.00174908
 -3.538597	 -3.546084	diff=0.00748653
  6.694847	  6.687738	diff=0.00710862
  8.607525	  8.606846	diff=0.000678721
  1.032033	  1.029366	diff=0.00266637
  8.424532	  8.422364	diff=0.00216774
 -8.131252	 -8.146236	diff=0.0149839
 -9.897691	 -9.912341	diff=0.0146504
  local_diff=0.0543022
# Num params=288, abs_diff=7.33559
Elapsed time is 6.534284 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
-19.654942	 -6.716486	diff=12.9385
 -2.657262	  1.990404	diff=4.64767
 -2.943627	 -0.813167	diff=2.13046
  1.068367	 -0.905429	diff=1.9738
-26.724699	 -8.876422	diff=17.8483
 -4.315643	  1.898146	diff=6.21379
 92.886664	 29.762407	diff=63.1243
-35.535624	-21.140232	diff=14.3954
  7.651647	  2.372778	diff=5.27887
  0.933657	 -0.983365	diff=1.91702
  1.199872	  0.511945	diff=0.687927
 -0.111752	  0.161472	diff=0.273224
 11.150897	  4.083274	diff=7.06762
  1.426180	 -0.810666	diff=2.23685
-25.948022	 -5.645528	diff=20.3025
  9.232935	  1.609814	diff=7.62312
 14.930924	  5.141278	diff=9.78965
 -0.061976	 -3.843675	diff=3.7817
  4.528124	  1.494480	diff=3.03364
 -3.025618	  2.766550	diff=5.79217
 26.952043	  8.645518	diff=18.3065
  1.256343	 -4.445924	diff=5.70227
-42.735533	-11.989692	diff=30.7458
  5.411982	  2.570472	diff=2.84151
-14.579907	 -4.334946	diff=10.245
 -1.528228	  2.456076	diff=3.9843
 -3.228137	 -0.754279	diff=2.47386
 -2.092864	  1.467875	diff=3.56074
-27.826597	 -8.530609	diff=19.296
 -1.302758	  1.134608	diff=2.43737
 20.359797	  2.545864	diff=17.8139
  5.678430	 -4.113891	diff=9.79232
  local_diff=318.256
# W_src{2}, [8 4]
-15.468929	 -8.275552	diff=7.19338
-10.635897	  0.668329	diff=11.3042
  8.479974	  3.875370	diff=4.6046
 -0.625033	 -0.367730	diff=0.257303
-20.708854	-22.510465	diff=1.80161
 -5.311957	 -7.691882	diff=2.37993
-77.143942	-48.787403	diff=28.3565
  9.200733	 17.718437	diff=8.5177
 -0.173999	 -1.238453	diff=1.06445
-13.045374	 -8.688002	diff=4.35737
  6.138123	  2.734439	diff=3.40368
 -0.433534	 -0.268806	diff=0.164728
 21.420725	 -5.402151	diff=26.8229
 -9.375077	 -6.100451	diff=3.27463
-74.963427	-42.724846	diff=32.2386
 -4.900721	 -5.013189	diff=0.112469
-27.182244	-28.048960	diff=0.866716
-38.401091	-24.309814	diff=14.0913
 10.609767	  8.601519	diff=2.00825
 -1.096280	 -3.653322	diff=2.55704
  1.852206	-15.507905	diff=17.3601
-11.736845	-15.180887	diff=3.44404
-69.048533	-46.292987	diff=22.7555
 -1.442429	 -1.726430	diff=0.284002
 16.432115	 17.772070	diff=1.33995
 33.313299	 22.099730	diff=11.2136
-12.388264	 -8.367225	diff=4.02104
  0.952968	  2.900249	diff=1.94728
-11.367008	 17.113701	diff=28.4807
 15.763512	 16.689449	diff=0.925937
163.717422	 83.053931	diff=80.6635
  1.503505	  2.221045	diff=0.71754
  local_diff=328.531
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=5.18639e-08
-26.138767	 -6.765811	diff=19.373
 -0.142527	  0.132971	diff=0.275497
  5.908843	 42.057021	diff=36.1482
 -0.000000	 -0.000000	diff=2.05283e-07
 40.552540	205.659293	diff=165.107
  0.000004	  0.000005	diff=1.07442e-06
  0.000015	  0.000015	diff=3.69722e-07
  0.000616	  0.000620	diff=4.25277e-06
 44.350979	140.019469	diff=95.6685
  0.136573	 -0.127009	diff=0.263582
 28.953955	204.225179	diff=175.271
 -0.000001	 -0.000001	diff=8.4453e-07
151.725746	758.024184	diff=606.298
  0.000002	  0.000001	diff=1.22175e-06
  0.000075	  0.000077	diff=1.36084e-06
 -0.000487	 -0.000483	diff=3.69645e-06
-12.538042	-87.304395	diff=74.7664
  0.020212	 -0.061318	diff=0.0815295
-22.086125	-158.988493	diff=136.902
  0.000000	  0.000001	diff=6.82544e-07
-36.227350	-193.454092	diff=157.227
 -0.000004	 -0.000004	diff=4.36566e-07
 -0.000041	 -0.000040	diff=4.25567e-07
 -0.000487	 -0.000483	diff=3.70088e-06
 -1.495202	-76.354878	diff=74.8597
  0.022884	 -0.060562	diff=0.0834458
-22.100149	-159.090329	diff=136.99
  0.000000	  0.000001	diff=6.83622e-07
-39.487801	-211.563939	diff=172.076
 -0.000004	 -0.000005	diff=4.5446e-07
 -0.000051	 -0.000051	diff=5.91081e-07
 -0.000000	 -0.000000	diff=1.84981e-12
  0.035345	  0.035306	diff=3.95801e-05
  0.031507	 -0.046390	diff=0.0778973
 -0.000002	 -0.000002	diff=3.35987e-10
 -0.000000	 -0.000000	diff=8.08905e-09
  0.035906	  0.035768	diff=0.000138101
  0.000000	 -0.000000	diff=1.25063e-12
 -0.000047	 -0.000047	diff=3.74159e-07
  0.000093	  0.000093	diff=4.41e-09
  2.353846	 16.787188	diff=14.4333
  0.000006	  0.000006	diff=1.2421e-07
  4.311001	 30.704304	diff=26.3933
 -0.000000	 -0.000000	diff=1.30211e-07
  0.959644	  6.541837	diff=5.58219
  0.000001	  0.000001	diff=2.19192e-09
 -0.000000	 -0.000000	diff=5.75598e-11
  local_diff=1897.88
# W_tgt{2}, [8 4]
  1.030065	  1.049724	diff=0.0196595
  2.099472	 -1.580435	diff=3.67991
 -0.000020	  0.000182	diff=0.00020103
 -0.416126	 -0.276169	diff=0.139957
  0.168494	  0.273786	diff=0.105292
 -0.131118	 -0.184476	diff=0.0533578
  0.052580	 -0.082420	diff=0.135001
-23.830694	-32.429194	diff=8.5985
  8.680587	 39.917784	diff=31.2372
 -4.526865	-29.661670	diff=25.1348
 -0.257704	  5.803254	diff=6.06096
 -1.972709	-13.586696	diff=11.614
 19.622419	109.758785	diff=90.1364
-21.820294	-149.973549	diff=128.153
 -7.888058	-35.886333	diff=27.9983
 -3.901687	-16.783409	diff=12.8817
-12.530384	-27.145535	diff=14.6152
  1.118206	  4.689795	diff=3.57159
  5.039182	  2.382086	diff=2.6571
  2.796029	 11.996052	diff=9.20002
 -8.730989	 -1.717733	diff=7.01326
  0.306695	 -4.078389	diff=4.38508
 -0.906922	  3.567127	diff=4.47405
  1.766321	 13.150482	diff=11.3842
 -7.551198	 60.595305	diff=68.1465
  7.896668	 37.540094	diff=29.6434
 -1.664812	  4.537374	diff=6.20219
 -7.030638	-28.755487	diff=21.7248
-10.796088	-35.135602	diff=24.3395
 13.328451	 91.609027	diff=78.2806
  4.857948	-39.136288	diff=43.9942
-78.348396	-395.933008	diff=317.585
  local_diff=993.165
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=1.2746e-07
  0.000002	  0.000002	diff=1.60523e-07
 -0.000000	 -0.000000	diff=2.80087e-10
 -0.000000	 -0.000000	diff=2.96272e-10
  local_diff=2.8856e-07
# W_emb_tgt, [2 5]
 69.324624	 67.945820	diff=1.3788
 18.208842	 17.979030	diff=0.229812
 -0.000000	 -0.000001	diff=1.12803e-06
  0.000000	 -0.000000	diff=1.64693e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-213.997571	-999.947861	diff=785.95
135.753802	918.438279	diff=782.684
178.228328	877.559264	diff=699.331
-88.274534	-453.482315	diff=365.208
  local_diff=2634.78
# W_src_char{1}, [8 4]
 -1.514281	  0.018444	diff=1.53273
 -0.306798	 -0.026360	diff=0.280438
 -0.000003	 -0.000000	diff=2.10009e-06
 12.139588	  1.017272	diff=11.1223
-12.389221	 -2.078120	diff=10.3111
 15.416635	  1.283234	diff=14.1334
 -0.042172	 -0.006898	diff=0.0352748
 -0.012354	 -0.001061	diff=0.0112931
113.932098	 15.586281	diff=98.3458
 19.503912	  1.615925	diff=17.888
  0.000153	  0.000025	diff=0.000128308
-239.654971	-62.361073	diff=177.294
491.526535	127.393429	diff=364.133
-244.651851	-78.535757	diff=166.116
  2.614336	  0.422844	diff=2.19149
  0.759793	  0.064773	diff=0.695021
 -0.002545	 -0.000416	diff=0.00212913
 -0.000506	 -0.000043	diff=0.000462984
 -0.000000	 -0.000000	diff=3.33576e-09
  0.019546	  0.001678	diff=0.017868
 -0.020964	 -0.003428	diff=0.017536
  0.024617	  0.002114	diff=0.022503
 -0.000070	 -0.000011	diff=5.82113e-05
 -0.000020	 -0.000002	diff=1.85586e-05
  0.000016	  0.000003	diff=1.37967e-05
  0.000003	  0.000000	diff=3.00026e-06
  0.000000	  0.000000	diff=4.38936e-12
 -0.000126	 -0.000011	diff=0.000115677
  0.000135	  0.000022	diff=0.000113008
 -0.000159	 -0.000014	diff=0.000145706
  0.000000	  0.000000	diff=3.77207e-07
  0.000000	  0.000000	diff=1.20364e-07
  local_diff=864.151
# W_src_char{2}, [8 4]
132.022707	 21.178024	diff=110.845
-18.329819	 -5.202751	diff=13.1271
  0.005245	  0.001045	diff=0.00420002
 -0.005503	 -0.001504	diff=0.0039991
 85.080431	 15.756864	diff=69.3236
-11.264451	 -3.010100	diff=8.25435
-47.557689	-10.607125	diff=36.9506
286.349843	 57.192272	diff=229.158
-67.275369	-16.643211	diff=50.6322
 28.380789	 13.091825	diff=15.289
 -0.030043	 -0.079196	diff=0.0491529
  0.043104	  0.097550	diff=0.0544459
-45.401815	-11.209446	diff=34.1924
 19.626595	  9.537269	diff=10.0893
 38.510335	  7.119730	diff=31.3906
-108.110065	-38.301916	diff=69.8081
 66.278204	 15.491400	diff=50.7868
-28.080844	 -4.056374	diff=24.0245
145.967997	 63.703667	diff=82.2643
 -5.101982	 -0.872626	diff=4.22936
 57.693423	 13.548654	diff=44.1448
-22.576499	 -3.840283	diff=18.7362
 -2.841662	 -0.742042	diff=2.09962
 29.814952	  3.554326	diff=26.2606
 14.981409	  3.466910	diff=11.5145
 -7.925111	 -1.079234	diff=6.84588
-97.323286	-43.812784	diff=53.5105
 -0.299129	  0.226736	diff=0.525865
 13.789001	  3.407022	diff=10.382
 -3.393179	  0.311045	diff=3.70422
 -0.752922	 -0.195952	diff=0.55697
  7.511127	  0.937487	diff=6.57364
  local_diff=1025.33
# W_src_char{3}, [8 4]
-83.465406	-42.860909	diff=40.6045
 48.822818	 24.669389	diff=24.1534
 11.493050	  3.247804	diff=8.24525
 -0.027077	 -0.331794	diff=0.304717
 96.743402	 53.199122	diff=43.5443
 -1.103947	 -1.377480	diff=0.273533
-189.377431	-105.530063	diff=83.8474
 -4.707191	 -2.224517	diff=2.48267
 53.122988	 36.114081	diff=17.0089
-39.005589	-31.833717	diff=7.17187
  5.634240	  1.040136	diff=4.5941
  0.326072	 -0.124975	diff=0.451047
 28.252850	-18.279798	diff=46.5326
  0.097812	 -0.655532	diff=0.753345
-59.380583	-21.739813	diff=37.6408
  1.436989	  1.594614	diff=0.157625
 -0.436580	 -0.497131	diff=0.0605511
-27.530563	  1.703228	diff=29.2338
-20.375307	 -5.870325	diff=14.505
 -0.063778	  0.656939	diff=0.720717
-213.753377	-87.090201	diff=126.663
 -1.881148	  1.135013	diff=3.01616
-114.924317	-37.752259	diff=77.1721
 10.244470	  4.366503	diff=5.87797
  0.048025	  0.069050	diff=0.021025
  0.600362	 -2.396938	diff=2.9973
  2.025363	  0.274452	diff=1.75091
  0.144895	 -0.010932	diff=0.155827
 16.159183	  1.054999	diff=15.1042
  0.261093	 -0.162390	diff=0.423483
 20.885433	  4.300460	diff=16.585
  0.637683	  0.672097	diff=0.0344143
  local_diff=612.088
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000020	  0.000002	diff=1.78955e-05
  0.000017	  0.000002	diff=1.52897e-05
 -0.006591	  0.004281	diff=0.0108719
 -0.002466	 -0.084044	diff=0.0815778
-290.963599	-339.506351	diff=48.5428
454.312520	-134.991135	diff=589.304
  0.000000	  0.000000	diff=7.66416e-11
 -0.000000	 -0.000000	diff=4.79845e-11
  local_diff=637.939
# W_tgt_char{1}, [8 4]
  2.280931	  2.271345	diff=0.00958629
 -1.074973	 -1.101687	diff=0.0267147
  6.772709	  6.272384	diff=0.500325
 -0.000033	 -0.000033	diff=3.27921e-07
-12.184100	-12.449939	diff=0.265838
  2.376262	  1.714909	diff=0.661353
 16.255178	 15.857710	diff=0.397468
 25.173116	 24.146644	diff=1.02647
 -0.390358	 -0.392069	diff=0.00171128
 -0.584104	 -0.583090	diff=0.00101416
 -1.808074	 -1.851070	diff=0.0429962
  0.000010	  0.000010	diff=2.8312e-08
  3.497435	  3.463443	diff=0.0339915
  0.688626	  0.653912	diff=0.034714
  2.267238	  2.214955	diff=0.0522832
 12.322365	 11.961926	diff=0.36044
  0.000000	  0.000000	diff=1.44633e-10
 -0.000008	 -0.000008	diff=6.22457e-09
 -0.578057	 -0.580899	diff=0.00284175
  0.000003	  0.000003	diff=1.94595e-09
  0.000228	  0.000227	diff=1.66411e-07
 -0.000000	 -0.000000	diff=2.60651e-12
  0.000000	 -0.000000	diff=1.95214e-16
  0.000000	  0.000000	diff=4.10279e-14
 -0.000000	 -0.000000	diff=1.8435e-11
  0.000002	  0.000002	diff=1.06105e-09
  0.226081	  0.224789	diff=0.00129162
 -0.000001	 -0.000001	diff=2.47613e-10
 -0.000035	 -0.000035	diff=2.97439e-08
  0.000000	  0.000000	diff=8.93552e-13
  0.000000	  0.000000	diff=1.51369e-15
  0.000000	  0.000000	diff=4.18535e-20
  local_diff=3.41904
# W_tgt_char{2}, [8 4]
 -3.108785	 -3.112990	diff=0.00420554
 -0.304837	 -0.305563	diff=0.000726298
  0.005911	  0.005907	diff=3.75526e-06
  0.031536	  0.031461	diff=7.46086e-05
 -4.152122	 -4.157340	diff=0.00521848
  1.967868	  1.965674	diff=0.00219397
  2.875858	  2.877545	diff=0.0016872
  7.402247	  7.189306	diff=0.212941
  0.886693	  0.880392	diff=0.00630126
  0.405809	  0.405441	diff=0.00036784
  0.000000	  0.000000	diff=3.08282e-12
 -0.000001	 -0.000001	diff=1.39815e-11
  0.174072	  0.169326	diff=0.00474541
  0.451045	  0.450077	diff=0.000968408
 -1.655243	 -1.659177	diff=0.00393405
 -9.455961	 -9.680372	diff=0.224411
  4.547449	  4.544798	diff=0.00265094
  2.557511	  2.546414	diff=0.0110971
 -3.336790	 -3.339447	diff=0.00265653
 -4.796497	 -4.798985	diff=0.00248753
 15.087509	 15.131017	diff=0.0435081
  7.695817	  7.693397	diff=0.00241997
 -0.639680	 -0.708822	diff=0.0691424
  3.206444	  3.200388	diff=0.00605558
 -0.209322	 -0.209290	diff=3.21683e-05
  7.887228	  7.875755	diff=0.0114728
  0.026477	  0.026343	diff=0.000133662
 -9.620742	 -9.617930	diff=0.00281236
 -6.909812	 -6.909413	diff=0.000399413
 11.776755	 11.785576	diff=0.00882146
  1.293580	  1.232202	diff=0.0613771
 -4.622051	 -4.617540	diff=0.00451168
  local_diff=0.697357
# W_tgt_char{3}, [8 4]
-12.708537	-12.718694	diff=0.0101579
  5.268347	  5.265823	diff=0.00252313
  2.233407	  2.234952	diff=0.00154539
 -1.353255	 -1.353418	diff=0.000162509
 -8.852484	 -8.852094	diff=0.000390685
 13.115530	 13.114356	diff=0.00117427
 -3.299272	 -3.308325	diff=0.00905338
-18.667470	-18.596042	diff=0.0714279
-15.548914	-15.544667	diff=0.0042467
  7.413892	  7.409053	diff=0.00483897
  0.495878	  0.495322	diff=0.00055578
  2.122339	  2.121066	diff=0.00127243
 -7.260744	 -7.260339	diff=0.000405316
-14.880692	-14.869237	diff=0.011455
 10.965268	 10.932734	diff=0.0325345
  3.547794	  3.545667	diff=0.00212686
  1.899470	  1.900667	diff=0.00119667
  2.784248	  2.781336	diff=0.00291267
  4.948894	  4.953638	diff=0.00474386
  1.163328	  1.163658	diff=0.000329533
 10.892534	 10.892652	diff=0.000117615
-10.636161	-10.635632	diff=0.000528866
 43.728271	 43.566165	diff=0.162105
  0.151754	  0.152007	diff=0.000252918
  0.549208	  0.548968	diff=0.000239803
  1.933041	  1.932619	diff=0.000421893
  0.146632	  0.147283	diff=0.000650611
 -0.251767	 -0.252683	diff=0.000916162
  2.419205	  2.420860	diff=0.00165513
 -4.916072	 -4.914593	diff=0.00147882
 29.819845	 29.787212	diff=0.032633
 -0.156578	 -0.156512	diff=6.57712e-05
  local_diff=0.364119
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.391576	  1.367155	diff=0.0244214
 41.987169	 30.101093	diff=11.8861
  0.000000	  0.000000	diff=1.62798e-08
 -0.000000	 -0.000000	diff=2.06119e-09
 -0.000000	 -0.000000	diff=6.77927e-11
  0.000000	  0.000000	diff=3.58671e-12
  local_diff=11.9105
# W_h, [2 4]
 -7.589161	-76.267045	diff=68.6779
  4.120232	 54.773629	diff=50.6534
  5.615878	 81.836436	diff=76.2206
 -3.969430	-74.638884	diff=70.6695
-13.351113	-23.695614	diff=10.3445
  2.916896	 33.644612	diff=30.7277
  2.144411	-11.553520	diff=13.6979
  0.176839	 66.355549	diff=66.1787
  local_diff=387.17
# W_soft, [5 2]
 -9.831373	 -9.841868	diff=0.0104952
 -0.037506	 -0.037775	diff=0.000268984
 -7.423825	 -7.423851	diff=2.61601e-05
 -1.014743	 -1.018057	diff=0.00331411
 18.335154	 18.321551	diff=0.0136029
 -4.193480	 -4.206446	diff=0.0129656
 -0.585552	 -0.586476	diff=0.00092402
 -7.516441	 -7.517209	diff=0.000768216
 -2.553731	 -2.557016	diff=0.0032845
 14.882311	 14.867146	diff=0.0151652
  local_diff=0.0608149
# W_soft_char, [5 2]
 -4.464798	 -4.473250	diff=0.00845168
  5.028700	  5.020152	diff=0.00854785
  3.132314	  3.124187	diff=0.00812736
  1.513430	  1.506618	diff=0.00681262
 -5.169261	 -5.177706	diff=0.00844498
  7.511714	  7.498120	diff=0.0135937
 -7.048555	 -7.051995	diff=0.00344021
  9.641481	  9.627671	diff=0.0138107
 -6.878396	 -6.880028	diff=0.00163196
 -3.189799	 -3.193768	diff=0.00396933
  local_diff=0.0768303
# Num params=404, abs_diff=9715.82
Elapsed time is 13.779656 seconds.
[?1l>