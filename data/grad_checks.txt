# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000010	  0.000010	diff=6.17714e-11
 -0.000011	 -0.000011	diff=6.72696e-11
  0.000004	  0.000004	diff=3.15016e-10
 -0.000003	 -0.000003	diff=2.69429e-10
  0.000000	  0.000000	diff=4.3928e-13
  0.000001	  0.000001	diff=4.75354e-12
  0.004421	  0.004421	diff=1.55788e-07
  0.006020	  0.006021	diff=9.30088e-08
 -0.000005	 -0.000005	diff=6.28422e-11
  0.000013	  0.000013	diff=1.74402e-11
 -0.000006	 -0.000006	diff=2.94658e-10
  0.000000	  0.000000	diff=4.27279e-11
 -0.000000	 -0.000000	diff=1.1015e-12
 -0.000001	 -0.000001	diff=1.29598e-12
 -0.000831	 -0.000831	diff=8.15894e-08
 -0.003179	 -0.003179	diff=4.09838e-08
 -0.000000	 -0.000000	diff=2.11932e-12
  0.000000	  0.000000	diff=2.29118e-13
 -0.000000	 -0.000000	diff=2.59559e-13
  0.000000	  0.000000	diff=4.41802e-15
  0.000000	  0.000000	diff=6.62351e-13
 -0.000000	 -0.000000	diff=4.75849e-13
 -0.000051	 -0.000051	diff=4.97827e-08
 -0.000075	 -0.000075	diff=2.70437e-11
  0.000000	  0.000000	diff=3.46346e-13
 -0.000000	 -0.000000	diff=5.79698e-13
  0.000000	  0.000000	diff=4.90412e-13
 -0.000000	 -0.000000	diff=2.13149e-13
 -0.000000	 -0.000000	diff=2.15859e-13
  0.000000	  0.000000	diff=1.96564e-14
  0.000012	  0.000012	diff=1.31192e-11
  0.000041	  0.000041	diff=3.99654e-08
  local_diff=4.62302e-07
# W_tgt{1}, [8 6]
 -0.000011	 -0.000011	diff=2.40903e-11
  0.000008	  0.000008	diff=6.29277e-11
 -0.000004	 -0.000004	diff=8.3275e-10
  0.000009	  0.000009	diff=2.96192e-10
  0.000000	  0.000000	diff=4.3047e-12
  0.000018	  0.000018	diff=2.80489e-13
 -0.003969	 -0.003969	diff=1.05323e-07
 -0.011719	 -0.011719	diff=3.27218e-08
 -0.000017	 -0.000017	diff=7.50905e-12
  0.000020	  0.000020	diff=3.55317e-11
 -0.000025	 -0.000025	diff=1.06332e-09
  0.000011	  0.000011	diff=1.28662e-09
 -0.000028	 -0.000028	diff=6.27872e-11
  0.000031	  0.000031	diff=9.20014e-12
 -0.008540	 -0.008540	diff=4.35927e-07
 -0.000826	 -0.000826	diff=3.14139e-07
 -0.000000	 -0.000000	diff=5.01594e-13
  0.000000	  0.000000	diff=5.78937e-13
 -0.000001	 -0.000001	diff=1.13911e-12
 -0.000000	 -0.000000	diff=3.4278e-13
 -0.000001	 -0.000001	diff=4.56117e-14
  0.000000	  0.000000	diff=3.65961e-13
 -0.000200	 -0.000200	diff=2.62442e-07
  0.000071	  0.000071	diff=1.39549e-08
  0.000000	  0.000000	diff=4.45994e-13
  0.000000	  0.000000	diff=8.10606e-13
  0.000000	  0.000000	diff=5.17207e-14
  0.000000	  0.000000	diff=1.96545e-13
  0.000000	  0.000000	diff=4.76632e-14
 -0.000000	 -0.000000	diff=2.93701e-13
  0.000123	  0.000123	diff=2.06469e-09
  0.000010	  0.000010	diff=1.85491e-07
 -0.000000	 -0.000000	diff=3.89233e-13
  0.000000	  0.000000	diff=2.29414e-13
 -0.000001	 -0.000001	diff=7.51087e-12
  0.000000	  0.000000	diff=1.06461e-12
 -0.000001	 -0.000001	diff=1.01553e-11
  0.000001	  0.000001	diff=5.14425e-13
 -0.000322	 -0.000321	diff=2.08661e-07
 -0.000175	 -0.000175	diff=2.39493e-08
  0.000000	  0.000000	diff=1.16091e-13
 -0.000000	 -0.000000	diff=4.31763e-13
  0.000001	  0.000001	diff=1.45715e-12
 -0.000000	 -0.000000	diff=6.29152e-13
  0.000000	  0.000000	diff=3.01951e-13
 -0.000000	 -0.000000	diff=4.29796e-13
  0.000170	  0.000170	diff=3.03361e-09
  0.000156	  0.000156	diff=2.24839e-07
  local_diff=1.81626e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001416	  0.001416	diff=2.24161e-07
  0.000149	  0.000148	diff=4.83014e-07
  0.000265	  0.000265	diff=1.04332e-07
  0.001956	  0.001955	diff=1.18718e-06
  local_diff=1.99869e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001049	  0.001049	diff=1.04602e-07
 -0.000958	 -0.000958	diff=6.36147e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003521	 -0.003520	diff=4.02644e-07
 -0.000193	 -0.000193	diff=2.0067e-07
 -0.004962	 -0.004962	diff=3.19252e-07
 -0.001412	 -0.001412	diff=3.428e-07
  local_diff=2.00611e-06
# W_soft, [5 2]
  0.007849	  0.007849	diff=6.5062e-08
  0.007849	  0.007849	diff=6.50646e-08
  0.004800	  0.004799	diff=6.50659e-08
 -0.013796	 -0.013797	diff=6.50577e-08
 -0.006701	 -0.006701	diff=6.50775e-08
 -0.002503	 -0.002503	diff=1.97754e-08
 -0.002503	 -0.002503	diff=1.97757e-08
 -0.004838	 -0.004839	diff=1.97772e-08
  0.007189	  0.007189	diff=1.97739e-08
  0.002656	  0.002656	diff=1.97791e-08
  local_diff=4.24209e-07
# Num params=110, abs_diff=6.70758e-06
Elapsed time is 0.724011 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.01201e-12
 -0.000000	 -0.000000	diff=6.35909e-13
  0.000000	  0.000000	diff=1.04485e-11
 -0.000000	 -0.000000	diff=1.67593e-12
  0.000001	  0.000001	diff=1.9472e-12
  0.000000	  0.000000	diff=1.72778e-13
 -0.000150	 -0.000150	diff=1.6814e-10
 -0.000020	 -0.000020	diff=2.66738e-10
 -0.000001	 -0.000001	diff=2.50322e-12
  0.000000	  0.000000	diff=9.02429e-13
 -0.000000	 -0.000000	diff=1.98496e-11
  0.000000	  0.000000	diff=2.57834e-12
 -0.000001	 -0.000001	diff=5.14255e-12
 -0.000000	 -0.000000	diff=1.14396e-12
  0.000218	  0.000218	diff=1.87396e-10
  0.000030	  0.000030	diff=5.61483e-10
 -0.000000	 -0.000000	diff=6.42337e-13
  0.000000	  0.000000	diff=4.63791e-13
 -0.000000	 -0.000000	diff=4.84313e-13
  0.000000	  0.000000	diff=7.00858e-13
 -0.000000	 -0.000000	diff=4.78397e-13
 -0.000000	 -0.000000	diff=1.0118e-13
  0.000004	  0.000004	diff=5.00007e-09
  0.000001	  0.000001	diff=5.07508e-12
  0.000000	  0.000000	diff=3.66703e-13
 -0.000000	 -0.000000	diff=4.97045e-14
  0.000000	  0.000000	diff=6.06628e-14
 -0.000000	 -0.000000	diff=8.31975e-13
  0.000000	  0.000000	diff=5.95507e-14
  0.000000	  0.000000	diff=5.59007e-13
 -0.000003	 -0.000003	diff=3.08146e-11
 -0.000001	 -0.000001	diff=5.66983e-10
  local_diff=6.84051e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=8.03802e-14
 -0.000000	 -0.000000	diff=9.53185e-13
 -0.000000	 -0.000000	diff=7.28831e-13
 -0.000000	 -0.000000	diff=3.31755e-14
  0.000000	  0.000000	diff=9.56569e-13
 -0.000000	 -0.000000	diff=8.66522e-14
  0.000154	  0.000154	diff=5.96133e-11
 -0.000141	 -0.000141	diff=8.25531e-11
  0.000000	  0.000000	diff=4.29653e-13
  0.000000	  0.000000	diff=3.05068e-13
  0.000000	  0.000000	diff=2.04698e-13
  0.000000	  0.000000	diff=1.31599e-13
 -0.000000	 -0.000000	diff=2.76807e-13
  0.000000	  0.000000	diff=1.29988e-13
 -0.000126	 -0.000126	diff=3.95108e-11
  0.000117	  0.000117	diff=5.44827e-11
 -0.000000	 -0.000000	diff=4.19572e-13
 -0.000000	 -0.000000	diff=2.81248e-13
 -0.000000	 -0.000000	diff=4.47843e-13
 -0.000000	 -0.000000	diff=1.26669e-13
  0.000000	  0.000000	diff=9.66914e-13
 -0.000000	 -0.000000	diff=6.50479e-13
  0.000003	  0.000003	diff=4.50443e-09
 -0.000003	 -0.000003	diff=4.91204e-14
  0.000000	  0.000000	diff=1.25299e-13
  0.000000	  0.000000	diff=7.31938e-13
  0.000000	  0.000000	diff=4.39996e-13
  0.000000	  0.000000	diff=2.79286e-13
 -0.000000	 -0.000000	diff=1.28328e-14
  0.000000	  0.000000	diff=1.31276e-12
 -0.000004	 -0.000004	diff=3.12506e-13
  0.000003	  0.000003	diff=4.67157e-09
  local_diff=9.42263e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.1358e-12
  0.000000	  0.000000	diff=7.17355e-13
 -0.000000	 -0.000000	diff=3.55204e-12
 -0.000000	 -0.000000	diff=2.5533e-12
 -0.000000	 -0.000000	diff=1.15237e-13
  0.000000	  0.000000	diff=8.5841e-13
  0.000075	  0.000075	diff=3.31281e-10
 -0.000089	 -0.000089	diff=6.88033e-10
  0.000000	  0.000000	diff=3.59578e-13
 -0.000000	 -0.000000	diff=3.93993e-13
  0.000000	  0.000000	diff=2.05753e-11
  0.000000	  0.000000	diff=1.09593e-11
  0.000000	  0.000000	diff=1.59798e-12
 -0.000000	 -0.000000	diff=8.16826e-13
 -0.000200	 -0.000200	diff=1.91575e-09
  0.000218	  0.000218	diff=1.40996e-09
 -0.000000	 -0.000000	diff=2.48619e-13
  0.000000	  0.000000	diff=6.71826e-13
  0.000000	  0.000000	diff=9.36701e-13
 -0.000000	 -0.000000	diff=2.57788e-13
  0.000000	  0.000000	diff=1.30817e-13
  0.000000	  0.000000	diff=4.0149e-15
 -0.000000	 -0.000000	diff=1.9846e-12
  0.000000	  0.000000	diff=7.72185e-15
  0.000000	  0.000000	diff=9.7026e-14
 -0.000000	 -0.000000	diff=1.07181e-13
 -0.000000	 -0.000000	diff=2.49916e-13
  0.000000	  0.000000	diff=3.32967e-13
 -0.000000	 -0.000000	diff=1.64263e-13
 -0.000000	 -0.000000	diff=3.16626e-13
  0.000000	  0.000000	diff=5.38418e-13
 -0.000000	 -0.000000	diff=5.78386e-12
  0.000000	  0.000000	diff=3.21581e-13
 -0.000000	 -0.000000	diff=2.1214e-13
  0.000000	  0.000000	diff=1.09172e-12
  0.000000	  0.000000	diff=6.37362e-13
  0.000000	  0.000000	diff=6.32383e-13
 -0.000000	 -0.000000	diff=3.52803e-13
 -0.000006	 -0.000006	diff=1.72576e-08
  0.000006	  0.000006	diff=2.70846e-10
 -0.000000	 -0.000000	diff=7.56398e-13
  0.000000	  0.000000	diff=1.32195e-12
 -0.000000	 -0.000000	diff=6.8749e-14
 -0.000000	 -0.000000	diff=1.47369e-12
 -0.000000	 -0.000000	diff=4.59041e-13
  0.000000	  0.000000	diff=3.97613e-13
  0.000003	  0.000003	diff=1.66925e-10
 -0.000003	 -0.000003	diff=4.75861e-09
  local_diff=2.68622e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=8.65635e-13
 -0.000000	 -0.000000	diff=4.34091e-13
 -0.000000	 -0.000000	diff=7.33809e-14
 -0.000000	 -0.000000	diff=1.18128e-12
 -0.000000	 -0.000000	diff=5.30703e-14
 -0.000000	 -0.000000	diff=1.62783e-13
  0.000182	  0.000182	diff=3.50528e-09
 -0.000127	 -0.000127	diff=2.63484e-09
  0.000000	  0.000000	diff=4.47805e-14
 -0.000000	 -0.000000	diff=2.77995e-14
 -0.000000	 -0.000000	diff=4.2504e-14
 -0.000000	 -0.000000	diff=8.06954e-13
 -0.000000	 -0.000000	diff=5.8054e-13
 -0.000000	 -0.000000	diff=2.58382e-13
  0.000015	  0.000015	diff=2.75182e-09
 -0.000013	 -0.000013	diff=1.13536e-09
  0.000000	  0.000000	diff=1.48656e-12
 -0.000000	 -0.000000	diff=5.3465e-13
 -0.000000	 -0.000000	diff=5.83813e-13
 -0.000000	 -0.000000	diff=8.1559e-14
 -0.000000	 -0.000000	diff=5.2296e-14
 -0.000000	 -0.000000	diff=2.16327e-13
  0.000011	  0.000011	diff=3.31133e-08
 -0.000008	 -0.000008	diff=3.27926e-10
 -0.000000	 -0.000000	diff=6.03095e-13
  0.000000	  0.000000	diff=3.68365e-13
  0.000000	  0.000000	diff=1.76702e-13
  0.000000	  0.000000	diff=2.50519e-13
  0.000000	  0.000000	diff=1.74047e-13
  0.000000	  0.000000	diff=6.5127e-13
 -0.000016	 -0.000016	diff=9.35584e-11
  0.000010	  0.000010	diff=1.98404e-08
  local_diff=6.34122e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000075	  0.000075	diff=2.82593e-08
 -0.000092	 -0.000092	diff=9.28177e-08
  0.000074	  0.000074	diff=2.53399e-08
 -0.000081	 -0.000081	diff=7.86173e-08
  local_diff=2.25034e-07
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000022	  0.000022	diff=6.25761e-08
 -0.000053	 -0.000053	diff=2.94624e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000070	 -0.000070	diff=9.6036e-08
 -0.000063	 -0.000063	diff=4.16344e-08
  0.000021	  0.000021	diff=4.15104e-08
 -0.000032	 -0.000032	diff=2.02925e-08
  local_diff=2.91512e-07
# W_soft, [5 2]
 -0.000086	 -0.000086	diff=8.19208e-12
 -0.000086	 -0.000086	diff=7.88968e-12
 -0.000024	 -0.000024	diff=8.03629e-12
  0.000187	  0.000187	diff=8.942e-12
  0.000009	  0.000009	diff=8.86197e-12
  0.000190	  0.000190	diff=3.24091e-11
  0.000190	  0.000190	diff=3.27182e-11
  0.000086	  0.000086	diff=3.28738e-11
 -0.000414	 -0.000414	diff=3.26647e-11
 -0.000051	 -0.000051	diff=3.27591e-11
  local_diff=2.05347e-10
# Num params=174, abs_diff=6.23289e-07
Elapsed time is 1.544932 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.70699e-13
  0.000000	  0.000000	diff=1.76517e-13
  0.000000	  0.000000	diff=1.4175e-11
  0.000000	  0.000000	diff=1.21093e-12
  0.000000	  0.000000	diff=2.94252e-12
  0.000000	  0.000000	diff=3.72169e-13
 -0.000088	 -0.000088	diff=9.05964e-10
  0.000004	  0.000004	diff=3.24596e-11
 -0.000000	 -0.000000	diff=1.47084e-12
  0.000000	  0.000000	diff=3.51307e-13
 -0.000000	 -0.000000	diff=2.88642e-11
  0.000000	  0.000000	diff=2.9091e-12
 -0.000000	 -0.000000	diff=4.0228e-12
 -0.000000	 -0.000000	diff=1.74188e-12
  0.000076	  0.000076	diff=1.09826e-09
  0.000034	  0.000034	diff=7.39404e-10
 -0.000000	 -0.000000	diff=5.59183e-13
  0.000000	  0.000000	diff=1.05866e-13
 -0.000000	 -0.000000	diff=1.89004e-13
  0.000000	  0.000000	diff=5.61954e-13
 -0.000000	 -0.000000	diff=1.62299e-13
 -0.000000	 -0.000000	diff=2.25475e-13
  0.000002	  0.000002	diff=4.92705e-09
  0.000000	  0.000000	diff=6.29919e-12
  0.000000	  0.000000	diff=1.48164e-12
 -0.000000	 -0.000000	diff=7.9407e-13
  0.000000	  0.000000	diff=9.11813e-14
 -0.000000	 -0.000000	diff=1.78877e-13
  0.000000	  0.000000	diff=1.18734e-13
  0.000000	  0.000000	diff=6.98045e-13
 -0.000002	 -0.000002	diff=3.65579e-11
 -0.000001	 -0.000001	diff=4.20082e-10
  local_diff=8.23016e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.39122e-13
 -0.000000	 -0.000000	diff=8.35316e-13
 -0.000000	 -0.000000	diff=7.53571e-13
 -0.000000	 -0.000000	diff=1.04244e-13
  0.000000	  0.000000	diff=7.26414e-15
 -0.000000	 -0.000000	diff=3.27244e-13
  0.000111	  0.000111	diff=7.47341e-11
 -0.000035	 -0.000035	diff=4.90506e-11
  0.000000	  0.000000	diff=3.64479e-13
  0.000000	  0.000000	diff=9.94459e-14
  0.000000	  0.000000	diff=9.29944e-13
  0.000000	  0.000000	diff=5.39092e-13
 -0.000000	 -0.000000	diff=1.08016e-13
  0.000000	  0.000000	diff=2.46041e-13
 -0.000163	 -0.000163	diff=7.90881e-11
  0.000135	  0.000135	diff=9.3633e-11
 -0.000000	 -0.000000	diff=1.15611e-13
 -0.000000	 -0.000000	diff=6.17457e-13
 -0.000000	 -0.000000	diff=2.26721e-13
 -0.000000	 -0.000000	diff=2.51084e-13
  0.000000	  0.000000	diff=7.79556e-13
 -0.000000	 -0.000000	diff=5.86092e-13
  0.000003	  0.000003	diff=4.91467e-09
 -0.000001	 -0.000001	diff=6.2867e-13
  0.000000	  0.000000	diff=1.39697e-13
  0.000000	  0.000000	diff=9.37538e-13
  0.000000	  0.000000	diff=4.67156e-14
  0.000000	  0.000000	diff=3.52655e-13
 -0.000000	 -0.000000	diff=2.00908e-13
  0.000000	  0.000000	diff=1.70998e-13
 -0.000004	 -0.000004	diff=8.47843e-13
  0.000002	  0.000002	diff=4.77479e-09
  local_diff=9.99663e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.59023e-13
  0.000000	  0.000000	diff=2.58292e-13
 -0.000000	 -0.000000	diff=3.58941e-12
 -0.000000	 -0.000000	diff=4.98908e-12
 -0.000000	 -0.000000	diff=1.00825e-12
  0.000000	  0.000000	diff=3.37876e-14
  0.000042	  0.000042	diff=2.90536e-10
 -0.000112	 -0.000112	diff=1.38789e-09
  0.000000	  0.000000	diff=5.45505e-13
 -0.000000	 -0.000000	diff=1.89052e-12
  0.000000	  0.000000	diff=2.94054e-11
  0.000000	  0.000000	diff=2.19001e-11
  0.000000	  0.000000	diff=1.73231e-12
 -0.000000	 -0.000000	diff=4.31294e-13
 -0.000158	 -0.000158	diff=2.53594e-09
  0.000233	  0.000233	diff=1.98497e-09
 -0.000000	 -0.000000	diff=2.98429e-13
  0.000000	  0.000000	diff=9.2267e-14
  0.000000	  0.000000	diff=3.69807e-13
 -0.000000	 -0.000000	diff=8.34184e-13
  0.000000	  0.000000	diff=9.33658e-13
  0.000000	  0.000000	diff=1.59363e-13
 -0.000000	 -0.000000	diff=1.21301e-12
  0.000000	  0.000000	diff=3.80376e-13
  0.000000	  0.000000	diff=1.52892e-13
 -0.000000	 -0.000000	diff=1.60575e-13
 -0.000000	 -0.000000	diff=5.20818e-13
  0.000000	  0.000000	diff=8.54171e-14
 -0.000000	 -0.000000	diff=1.17125e-12
  0.000000	  0.000000	diff=8.69386e-13
  0.000000	  0.000000	diff=1.38672e-13
 -0.000000	 -0.000000	diff=9.15253e-12
  0.000000	  0.000000	diff=4.43923e-13
 -0.000000	 -0.000000	diff=8.00218e-14
  0.000000	  0.000000	diff=1.96003e-13
  0.000000	  0.000000	diff=4.49582e-13
  0.000000	  0.000000	diff=2.4237e-13
 -0.000000	 -0.000000	diff=4.30746e-13
 -0.000004	 -0.000004	diff=1.16943e-08
  0.000005	  0.000005	diff=3.52506e-10
 -0.000000	 -0.000000	diff=9.6141e-14
  0.000000	  0.000000	diff=9.16034e-14
 -0.000000	 -0.000000	diff=5.0626e-14
 -0.000000	 -0.000000	diff=4.09526e-13
 -0.000000	 -0.000000	diff=1.91686e-13
  0.000000	  0.000000	diff=2.76682e-13
  0.000002	  0.000002	diff=1.09243e-10
 -0.000004	 -0.000004	diff=6.36185e-09
  local_diff=2.48032e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.01695e-12
 -0.000000	 -0.000000	diff=2.79277e-13
 -0.000000	 -0.000000	diff=4.14675e-13
 -0.000000	 -0.000000	diff=9.96538e-13
 -0.000000	 -0.000000	diff=1.59943e-13
 -0.000000	 -0.000000	diff=5.17265e-13
  0.000104	  0.000104	diff=2.3385e-09
  0.000012	  0.000012	diff=2.40086e-09
  0.000000	  0.000000	diff=2.45358e-13
 -0.000000	 -0.000000	diff=2.4845e-13
 -0.000000	 -0.000000	diff=5.49966e-13
 -0.000000	 -0.000000	diff=8.73966e-13
 -0.000000	 -0.000000	diff=1.00127e-13
 -0.000000	 -0.000000	diff=4.30607e-13
  0.000022	  0.000022	diff=4.77782e-09
 -0.000020	 -0.000020	diff=2.2462e-09
  0.000000	  0.000000	diff=1.13921e-13
  0.000000	  0.000000	diff=7.60806e-13
 -0.000000	 -0.000000	diff=1.66555e-13
 -0.000000	 -0.000000	diff=7.03774e-13
 -0.000000	 -0.000000	diff=5.38458e-13
 -0.000000	 -0.000000	diff=5.65232e-13
  0.000009	  0.000009	diff=2.80555e-08
 -0.000003	 -0.000003	diff=2.42601e-10
 -0.000000	 -0.000000	diff=1.4268e-12
  0.000000	  0.000000	diff=2.62208e-13
  0.000000	  0.000000	diff=3.31084e-13
  0.000000	  0.000000	diff=6.06037e-13
  0.000000	  0.000000	diff=2.41643e-13
  0.000000	  0.000000	diff=1.45481e-13
 -0.000015	 -0.000015	diff=7.61084e-11
  0.000005	  0.000005	diff=1.60776e-08
  local_diff=5.62269e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=1.72009e-08
 -0.000014	 -0.000014	diff=4.22729e-08
  0.000062	  0.000062	diff=2.32496e-08
 -0.000020	 -0.000020	diff=1.66708e-08
  local_diff=9.93941e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000107	  0.000107	diff=5.82653e-08
 -0.000042	 -0.000042	diff=2.80125e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=8.8686e-08
 -0.000040	 -0.000040	diff=2.87379e-08
  0.000068	  0.000068	diff=5.73714e-08
 -0.000034	 -0.000034	diff=2.63123e-08
  local_diff=2.87385e-07
# W_soft, [5 2]
 -0.000090	 -0.000090	diff=1.29046e-11
 -0.000090	 -0.000090	diff=1.25565e-11
 -0.000013	 -0.000013	diff=1.19156e-11
  0.000150	  0.000150	diff=1.24629e-11
  0.000042	  0.000042	diff=1.26882e-11
  0.000192	  0.000192	diff=4.55799e-11
  0.000192	  0.000192	diff=4.60538e-11
  0.000090	  0.000090	diff=4.51997e-11
 -0.000352	 -0.000352	diff=4.58334e-11
 -0.000122	 -0.000122	diff=4.54174e-11
  local_diff=2.90612e-10
# Num params=174, abs_diff=4.86327e-07
Elapsed time is 1.750954 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=7.30558e-13
 -0.000000	 -0.000000	diff=3.53748e-13
  0.000000	  0.000000	diff=8.56072e-14
 -0.000000	 -0.000000	diff=1.44345e-13
  0.000000	  0.000000	diff=3.78059e-13
  0.000000	  0.000000	diff=3.83548e-13
 -0.000003	 -0.000003	diff=3.37658e-11
 -0.000000	 -0.000000	diff=6.41082e-12
 -0.000000	 -0.000000	diff=9.21766e-13
  0.000000	  0.000000	diff=5.76396e-14
 -0.000000	 -0.000000	diff=4.87555e-13
  0.000000	  0.000000	diff=5.64176e-13
 -0.000000	 -0.000000	diff=4.97767e-13
 -0.000000	 -0.000000	diff=1.12706e-12
  0.000004	  0.000004	diff=4.04121e-11
  0.000002	  0.000002	diff=5.44747e-11
 -0.000000	 -0.000000	diff=5.42168e-13
  0.000000	  0.000000	diff=1.00129e-12
 -0.000000	 -0.000000	diff=2.59726e-13
  0.000000	  0.000000	diff=1.53424e-13
 -0.000000	 -0.000000	diff=1.38418e-13
 -0.000000	 -0.000000	diff=4.62475e-15
  0.000000	  0.000000	diff=9.0896e-11
  0.000000	  0.000000	diff=2.90327e-13
  0.000000	  0.000000	diff=9.04114e-13
 -0.000000	 -0.000000	diff=4.81035e-13
  0.000000	  0.000000	diff=2.44186e-13
 -0.000000	 -0.000000	diff=3.44238e-13
  0.000000	  0.000000	diff=2.17695e-13
  0.000000	  0.000000	diff=2.37221e-13
 -0.000000	 -0.000000	diff=6.16539e-13
 -0.000000	 -0.000000	diff=2.32895e-11
  local_diff=2.60416e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.7514e-13
 -0.000000	 -0.000000	diff=3.02987e-13
  0.000000	  0.000000	diff=4.46729e-13
 -0.000000	 -0.000000	diff=3.59273e-13
 -0.000000	 -0.000000	diff=8.70494e-13
 -0.000000	 -0.000000	diff=2.31972e-13
 -0.000002	 -0.000002	diff=2.82919e-13
 -0.000006	 -0.000006	diff=1.97732e-12
 -0.000000	 -0.000000	diff=3.3135e-13
  0.000000	  0.000000	diff=4.87588e-14
 -0.000000	 -0.000000	diff=2.27483e-13
  0.000000	  0.000000	diff=1.77047e-13
  0.000000	  0.000000	diff=6.6402e-13
  0.000000	  0.000000	diff=2.7252e-13
  0.000003	  0.000003	diff=1.94957e-13
  0.000007	  0.000007	diff=2.92656e-12
  0.000000	  0.000000	diff=1.02665e-12
 -0.000000	 -0.000000	diff=6.36301e-13
  0.000000	  0.000000	diff=5.55065e-13
 -0.000000	 -0.000000	diff=4.44166e-13
  0.000000	 -0.000000	diff=2.67035e-13
 -0.000000	 -0.000000	diff=3.52227e-13
 -0.000000	 -0.000000	diff=6.1593e-11
 -0.000000	 -0.000000	diff=1.19263e-12
 -0.000000	 -0.000000	diff=8.24502e-13
  0.000000	  0.000000	diff=4.84766e-13
 -0.000000	 -0.000000	diff=2.13293e-13
  0.000000	  0.000000	diff=3.1948e-13
  0.000000	  0.000000	diff=3.27929e-13
  0.000000	  0.000000	diff=1.1748e-12
  0.000000	  0.000000	diff=5.73847e-13
  0.000000	  0.000000	diff=1.78847e-10
  local_diff=2.58322e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.97487e-13
  0.000000	  0.000000	diff=3.86632e-15
 -0.000000	 -0.000000	diff=7.84031e-14
 -0.000000	 -0.000000	diff=1.45211e-12
  0.000000	  0.000000	diff=3.70046e-13
  0.000000	  0.000000	diff=1.50397e-13
  0.000000	  0.000000	diff=5.66907e-13
 -0.000007	 -0.000007	diff=4.81789e-11
 -0.000000	 -0.000000	diff=8.82906e-13
 -0.000000	 -0.000000	diff=9.15281e-13
  0.000000	  0.000000	diff=4.51061e-13
  0.000000	  0.000000	diff=1.41721e-12
 -0.000000	 -0.000000	diff=6.23775e-13
 -0.000000	 -0.000000	diff=6.99282e-13
 -0.000001	 -0.000001	diff=3.5108e-11
  0.000002	  0.000002	diff=1.66585e-10
  0.000000	  0.000000	diff=1.20105e-13
  0.000000	  0.000000	diff=1.79657e-13
  0.000000	 -0.000000	diff=2.43903e-13
  0.000000	  0.000000	diff=1.43603e-13
  0.000000	 -0.000000	diff=9.87865e-14
  0.000000	  0.000000	diff=3.11676e-13
  0.000000	  0.000000	diff=8.00094e-13
  0.000000	  0.000000	diff=1.29474e-12
  0.000000	  0.000000	diff=4.14207e-14
  0.000000	  0.000000	diff=8.14659e-14
  0.000000	 -0.000000	diff=8.17104e-14
  0.000000	  0.000000	diff=2.76634e-14
  0.000000	 -0.000000	diff=2.3187e-14
  0.000000	  0.000000	diff=8.63972e-14
  0.000000	  0.000000	diff=9.24202e-13
  0.000000	  0.000000	diff=1.01171e-12
 -0.000000	 -0.000000	diff=4.19603e-13
 -0.000000	 -0.000000	diff=1.06285e-13
  0.000000	  0.000000	diff=3.61493e-13
  0.000000	  0.000000	diff=3.43733e-14
 -0.000000	 -0.000000	diff=6.99114e-13
 -0.000000	 -0.000000	diff=1.18094e-13
 -0.000000	 -0.000000	diff=2.26806e-10
  0.000000	  0.000000	diff=3.42172e-11
 -0.000000	 -0.000000	diff=2.26795e-13
  0.000000	  0.000000	diff=7.51944e-13
 -0.000000	 -0.000000	diff=3.20696e-13
 -0.000000	 -0.000000	diff=1.34944e-12
  0.000000	  0.000000	diff=5.41022e-13
  0.000000	  0.000000	diff=7.34384e-14
  0.000000	  0.000000	diff=3.03559e-12
 -0.000000	 -0.000000	diff=2.02638e-10
  local_diff=7.3545e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.5559e-13
  0.000000	  0.000000	diff=3.18992e-13
  0.000000	  0.000000	diff=5.47194e-13
 -0.000000	 -0.000000	diff=9.14147e-13
  0.000000	  0.000000	diff=4.42876e-13
 -0.000000	 -0.000000	diff=3.93039e-13
 -0.000001	 -0.000001	diff=5.15393e-13
 -0.000004	 -0.000004	diff=5.63686e-12
  0.000000	  0.000000	diff=5.52836e-13
 -0.000000	 -0.000000	diff=1.91588e-13
 -0.000000	 -0.000000	diff=1.2746e-13
 -0.000000	 -0.000000	diff=2.92164e-13
 -0.000000	 -0.000000	diff=5.41141e-13
 -0.000000	 -0.000000	diff=2.09824e-14
 -0.000001	 -0.000001	diff=2.46439e-13
 -0.000002	 -0.000002	diff=5.36453e-13
 -0.000000	 -0.000000	diff=5.33346e-13
  0.000000	 -0.000000	diff=8.32935e-13
  0.000000	  0.000000	diff=8.62117e-13
 -0.000000	 -0.000000	diff=1.10782e-13
  0.000000	  0.000000	diff=2.54097e-13
 -0.000000	 -0.000000	diff=1.85759e-13
 -0.000000	 -0.000000	diff=4.1172e-10
 -0.000000	 -0.000000	diff=1.92156e-11
  0.000000	  0.000000	diff=4.67402e-13
  0.000000	  0.000000	diff=5.11687e-14
 -0.000000	 -0.000000	diff=2.95164e-13
  0.000000	  0.000000	diff=1.34745e-12
 -0.000000	 -0.000000	diff=1.36341e-13
  0.000000	  0.000000	diff=5.12304e-13
  0.000000	  0.000000	diff=2.59125e-12
  0.000000	  0.000000	diff=8.46193e-10
  local_diff=1.29684e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=6.29923e-10
 -0.000001	 -0.000001	diff=7.67336e-10
  0.000001	  0.000001	diff=6.90255e-10
 -0.000000	 -0.000000	diff=1.07011e-09
  local_diff=3.15762e-09
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=6.89482e-10
 -0.000000	 -0.000000	diff=8.65476e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000007	 -0.000007	diff=2.33954e-09
 -0.000001	 -0.000001	diff=6.92286e-10
 -0.000009	 -0.000009	diff=1.1099e-09
 -0.000000	 -0.000000	diff=2.59277e-10
  local_diff=5.17703e-09
# W_h, [2 4]
  0.000000	  0.000000	diff=2.03784e-12
 -0.000004	 -0.000004	diff=1.86989e-12
  0.000000	  0.000000	diff=2.16946e-12
  0.000004	  0.000004	diff=1.29881e-12
 -0.000003	 -0.000003	diff=8.35499e-12
  0.000001	  0.000001	diff=2.41188e-12
  0.000011	  0.000011	diff=8.07261e-11
 -0.000001	 -0.000001	diff=3.27002e-11
  local_diff=1.31569e-10
# W_soft, [5 2]
  0.000031	  0.000031	diff=1.22578e-12
  0.000031	  0.000031	diff=1.50155e-12
 -0.000005	 -0.000005	diff=2.14331e-12
 -0.000037	 -0.000037	diff=1.86112e-12
 -0.000020	 -0.000020	diff=1.79475e-12
  0.000024	  0.000024	diff=1.45646e-12
  0.000024	  0.000024	diff=1.02927e-12
 -0.000009	 -0.000009	diff=8.32395e-13
 -0.000027	 -0.000027	diff=1.32863e-12
 -0.000012	 -0.000012	diff=1.74813e-12
  local_diff=1.49214e-11
# Num params=182, abs_diff=1.10322e-08
Elapsed time is 2.120008 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.31621e-12
  0.000000	  0.000000	diff=5.52343e-13
  0.000000	  0.000000	diff=9.34988e-13
  0.000000	  0.000000	diff=4.50825e-13
  0.000000	  0.000000	diff=3.72512e-13
  0.000000	  0.000000	diff=1.98733e-13
 -0.000011	 -0.000011	diff=8.84253e-11
  0.000007	  0.000007	diff=8.7564e-11
 -0.000000	 -0.000000	diff=2.03204e-13
 -0.000000	 -0.000000	diff=1.03148e-12
 -0.000000	 -0.000000	diff=7.38361e-13
 -0.000000	 -0.000000	diff=1.78631e-12
 -0.000000	 -0.000000	diff=2.61349e-13
 -0.000000	 -0.000000	diff=3.06462e-13
  0.000016	  0.000016	diff=1.94511e-10
 -0.000015	 -0.000015	diff=2.57379e-10
 -0.000000	 -0.000000	diff=3.34199e-13
 -0.000000	 -0.000000	diff=7.65688e-13
 -0.000000	 -0.000000	diff=3.31081e-14
 -0.000000	 -0.000000	diff=6.6221e-13
 -0.000000	 -0.000000	diff=3.27686e-13
  0.000000	  0.000000	diff=8.45683e-14
  0.000000	  0.000000	diff=1.03373e-10
 -0.000000	 -0.000000	diff=8.36996e-13
  0.000000	  0.000000	diff=1.29982e-12
  0.000000	  0.000000	diff=2.74183e-13
  0.000000	  0.000000	diff=3.98802e-14
  0.000000	  0.000000	diff=2.93106e-13
  0.000000	  0.000000	diff=3.41689e-13
  0.000000	  0.000000	diff=2.37731e-13
 -0.000000	 -0.000000	diff=2.79537e-13
  0.000000	  0.000000	diff=3.90692e-10
  local_diff=1.13591e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.03599e-13
  0.000000	  0.000000	diff=5.17043e-13
 -0.000000	 -0.000000	diff=5.29157e-13
  0.000000	  0.000000	diff=4.75126e-13
 -0.000000	 -0.000000	diff=1.037e-12
 -0.000000	 -0.000000	diff=5.83128e-14
  0.000034	  0.000034	diff=9.90651e-12
  0.000007	  0.000007	diff=6.08391e-12
  0.000000	  0.000000	diff=3.49285e-13
 -0.000000	 -0.000000	diff=6.67091e-13
  0.000000	  0.000000	diff=5.39419e-13
 -0.000000	 -0.000000	diff=4.29655e-13
  0.000000	  0.000000	diff=1.21428e-13
  0.000000	  0.000000	diff=2.00178e-13
 -0.000039	 -0.000039	diff=8.96773e-12
 -0.000008	 -0.000008	diff=5.56894e-12
 -0.000000	 -0.000000	diff=1.21721e-12
  0.000000	  0.000000	diff=1.19084e-12
 -0.000000	 -0.000000	diff=4.70931e-13
  0.000000	  0.000000	diff=2.05496e-13
 -0.000000	 -0.000000	diff=1.17678e-12
 -0.000000	 -0.000000	diff=2.47211e-13
  0.000001	  0.000001	diff=3.98049e-10
  0.000000	  0.000000	diff=1.0367e-13
  0.000000	  0.000000	diff=1.08783e-12
 -0.000000	 -0.000000	diff=7.97024e-14
  0.000000	  0.000000	diff=4.48404e-13
 -0.000000	 -0.000000	diff=3.00847e-13
  0.000000	  0.000000	diff=6.25214e-13
  0.000000	  0.000000	diff=2.24392e-13
 -0.000001	 -0.000001	diff=2.11553e-13
 -0.000000	 -0.000000	diff=1.73813e-10
  local_diff=6.15407e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.69408e-13
 -0.000000	 -0.000000	diff=3.54196e-13
 -0.000000	 -0.000000	diff=9.29245e-13
  0.000000	  0.000000	diff=5.75577e-13
 -0.000000	 -0.000000	diff=6.72091e-14
 -0.000000	 -0.000000	diff=4.00273e-13
  0.000008	  0.000008	diff=3.87779e-11
  0.000009	  0.000009	diff=5.28238e-11
  0.000000	  0.000000	diff=8.30622e-13
  0.000000	  0.000000	diff=6.64333e-13
  0.000000	  0.000000	diff=2.03377e-12
 -0.000000	 -0.000000	diff=2.54673e-12
  0.000000	  0.000000	diff=4.05248e-13
  0.000000	  0.000000	diff=4.07635e-13
 -0.000011	 -0.000011	diff=1.48571e-10
 -0.000016	 -0.000016	diff=1.13949e-07
  0.000000	 -0.000000	diff=9.2997e-13
  0.000000	 -0.000000	diff=1.30477e-13
  0.000000	  0.000000	diff=9.94296e-13
  0.000000	 -0.000000	diff=1.16394e-13
  0.000000	  0.000000	diff=6.93982e-14
  0.000000	 -0.000000	diff=9.2571e-13
 -0.000000	 -0.000000	diff=1.7322e-14
 -0.000000	 -0.000000	diff=5.19932e-13
  0.000000	  0.000000	diff=7.9129e-15
  0.000000	 -0.000000	diff=4.87123e-15
 -0.000000	 -0.000000	diff=6.03213e-13
  0.000000	  0.000000	diff=6.35027e-13
  0.000000	 -0.000000	diff=9.33646e-14
  0.000000	  0.000000	diff=6.0571e-14
 -0.000000	 -0.000000	diff=1.33303e-12
 -0.000000	 -0.000000	diff=9.28898e-14
  0.000000	  0.000000	diff=5.3017e-13
  0.000000	  0.000000	diff=5.80599e-13
  0.000000	  0.000000	diff=7.84909e-13
 -0.000000	 -0.000000	diff=5.71754e-13
  0.000000	  0.000000	diff=8.22481e-13
 -0.000000	 -0.000000	diff=2.4971e-13
 -0.000001	 -0.000001	diff=1.4325e-09
 -0.000001	 -0.000001	diff=1.32523e-11
 -0.000000	 -0.000000	diff=6.48839e-13
 -0.000000	 -0.000000	diff=3.11391e-13
 -0.000000	 -0.000000	diff=3.6093e-14
  0.000000	  0.000000	diff=2.43318e-13
 -0.000000	 -0.000000	diff=3.64625e-13
  0.000000	  0.000000	diff=5.21646e-14
  0.000000	  0.000000	diff=9.16542e-12
  0.000001	  0.000001	diff=1.29954e-09
  local_diff=1.16965e-07
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.13942e-12
 -0.000000	 -0.000000	diff=7.13161e-13
 -0.000000	 -0.000000	diff=9.3051e-13
  0.000000	  0.000000	diff=1.00736e-12
 -0.000000	 -0.000000	diff=3.93491e-13
  0.000000	  0.000000	diff=1.80987e-13
  0.000032	  0.000032	diff=2.59374e-11
  0.000012	  0.000012	diff=8.02837e-12
  0.000000	  0.000000	diff=7.17968e-13
  0.000000	  0.000000	diff=1.41022e-13
 -0.000000	 -0.000000	diff=9.14003e-13
  0.000000	  0.000000	diff=1.83987e-13
 -0.000000	 -0.000000	diff=1.0263e-12
  0.000000	  0.000000	diff=7.45756e-13
 -0.000005	 -0.000005	diff=5.90308e-11
 -0.000002	 -0.000002	diff=7.37449e-12
  0.000000	  0.000000	diff=1.03869e-12
 -0.000000	 -0.000000	diff=7.83274e-13
 -0.000000	 -0.000000	diff=6.64925e-13
  0.000000	  0.000000	diff=1.02934e-13
 -0.000000	 -0.000000	diff=4.27355e-13
  0.000000	  0.000000	diff=7.87749e-13
  0.000001	  0.000001	diff=4.32714e-09
  0.000001	  0.000001	diff=1.53376e-11
 -0.000000	 -0.000000	diff=8.76852e-14
  0.000000	  0.000000	diff=4.95516e-13
  0.000000	  0.000000	diff=9.04981e-14
 -0.000000	 -0.000000	diff=5.61283e-13
  0.000000	  0.000000	diff=3.56602e-13
 -0.000000	 -0.000000	diff=6.54929e-14
 -0.000002	 -0.000002	diff=8.23861e-12
 -0.000001	 -0.000001	diff=2.08975e-09
  local_diff=6.55439e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=3.9544e-09
 -0.000017	 -0.000017	diff=1.69924e-08
  0.000007	  0.000007	diff=4.10764e-09
 -0.000015	 -0.000015	diff=1.58593e-08
  local_diff=4.09138e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.1248e-09
 -0.000003	 -0.000003	diff=2.18218e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.7246e-09
 -0.000002	 -0.000002	diff=1.66293e-09
 -0.000017	 -0.000017	diff=4.92777e-09
 -0.000001	 -0.000001	diff=1.11169e-09
  local_diff=1.5734e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=4.06858e-13
  0.000000	 -0.000000	diff=2.55439e-13
 -0.000000	 -0.000000	diff=3.45152e-14
  0.000000	  0.000000	diff=1.41914e-13
  local_diff=8.38726e-13
# v_pos, [1 2]
 -0.000000	 -0.000000	diff=7.59412e-13
 -0.000000	 -0.000000	diff=7.73219e-13
  local_diff=1.53263e-12
# W_h, [2 4]
  0.000023	  0.000023	diff=7.69881e-13
  0.000008	  0.000008	diff=1.07702e-13
 -0.000029	 -0.000029	diff=3.00442e-13
 -0.000010	 -0.000010	diff=1.55489e-14
  0.000013	  0.000013	diff=2.43289e-11
  0.000006	  0.000006	diff=2.95409e-13
 -0.000026	 -0.000026	diff=2.0875e-10
 -0.000014	 -0.000014	diff=1.84212e-11
  local_diff=2.52989e-10
# W_soft, [5 2]
 -0.000019	 -0.000019	diff=1.75008e-14
 -0.000019	 -0.000019	diff=5.77963e-13
  0.000008	  0.000008	diff=1.73708e-13
  0.000010	  0.000010	diff=1.36757e-13
  0.000020	  0.000020	diff=5.50159e-13
  0.000020	  0.000020	diff=2.72884e-13
  0.000020	  0.000020	diff=3.89366e-13
 -0.000005	 -0.000005	diff=5.23371e-13
 -0.000012	 -0.000012	diff=1.02778e-12
 -0.000022	 -0.000022	diff=8.17765e-14
  local_diff=3.75127e-12
# Num params=188, abs_diff=1.82177e-07
Elapsed time is 3.178029 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.2309e-12
 -0.000000	 -0.000000	diff=1.57639e-13
  0.000000	  0.000000	diff=2.6477e-12
 -0.000000	 -0.000000	diff=2.32505e-13
  0.000000	  0.000000	diff=1.02203e-13
  0.000000	  0.000000	diff=9.59383e-13
 -0.000019	 -0.000019	diff=3.89113e-11
 -0.000002	 -0.000002	diff=2.97361e-11
 -0.000000	 -0.000000	diff=1.7536e-13
  0.000000	  0.000000	diff=3.94897e-13
 -0.000000	 -0.000000	diff=1.49506e-12
  0.000000	  0.000000	diff=1.38769e-12
 -0.000000	 -0.000000	diff=4.84221e-13
 -0.000000	 -0.000000	diff=9.87191e-13
  0.000027	  0.000027	diff=8.60279e-11
  0.000006	  0.000006	diff=1.4218e-10
 -0.000000	 -0.000000	diff=1.0081e-12
  0.000000	  0.000000	diff=2.09958e-13
 -0.000000	 -0.000000	diff=1.24091e-12
  0.000000	  0.000000	diff=7.12224e-13
 -0.000000	 -0.000000	diff=9.345e-13
 -0.000000	 -0.000000	diff=1.5165e-13
  0.000000	  0.000000	diff=4.90604e-10
  0.000000	  0.000000	diff=5.52801e-13
  0.000000	  0.000000	diff=1.13917e-13
 -0.000000	 -0.000000	diff=2.69282e-13
  0.000000	  0.000000	diff=8.53703e-13
 -0.000000	 -0.000000	diff=7.33568e-13
  0.000000	  0.000000	diff=3.90127e-13
  0.000000	  0.000000	diff=8.9383e-13
 -0.000000	 -0.000000	diff=2.07015e-12
 -0.000000	 -0.000000	diff=2.18159e-10
  local_diff=1.02601e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=7.99871e-13
 -0.000000	 -0.000000	diff=6.88909e-13
  0.000000	  0.000000	diff=2.3206e-13
 -0.000000	 -0.000000	diff=9.26583e-13
 -0.000000	 -0.000000	diff=4.717e-13
 -0.000000	 -0.000000	diff=3.08333e-13
 -0.000011	 -0.000011	diff=5.30776e-12
 -0.000031	 -0.000031	diff=2.68974e-12
 -0.000000	 -0.000000	diff=4.46151e-13
  0.000000	  0.000000	diff=4.27714e-13
 -0.000000	 -0.000000	diff=6.04165e-13
  0.000000	  0.000000	diff=1.06084e-12
  0.000000	  0.000000	diff=5.77611e-13
  0.000000	  0.000000	diff=1.54805e-12
  0.000012	  0.000012	diff=3.85542e-12
  0.000035	  0.000035	diff=4.97097e-14
  0.000000	  0.000000	diff=8.23883e-13
 -0.000000	 -0.000000	diff=7.82645e-13
  0.000000	  0.000000	diff=4.80994e-13
 -0.000000	 -0.000000	diff=5.45734e-13
 -0.000000	 -0.000000	diff=3.47792e-13
 -0.000000	 -0.000000	diff=9.6984e-13
 -0.000000	 -0.000000	diff=3.03965e-10
 -0.000001	 -0.000001	diff=4.11468e-14
 -0.000000	 -0.000000	diff=3.6524e-13
  0.000000	  0.000000	diff=7.98009e-14
 -0.000000	 -0.000000	diff=1.48163e-13
  0.000000	  0.000000	diff=9.56211e-13
  0.000000	  0.000000	diff=1.572e-12
  0.000000	  0.000000	diff=6.76652e-13
  0.000000	  0.000000	diff=1.21539e-13
  0.000001	  0.000001	diff=7.32265e-10
  local_diff=1.06414e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.48229e-13
  0.000000	  0.000000	diff=1.05382e-12
  0.000000	  0.000000	diff=7.17694e-14
 -0.000000	 -0.000000	diff=2.89912e-13
  0.000000	  0.000000	diff=4.59649e-13
  0.000000	  0.000000	diff=1.47605e-12
 -0.000004	 -0.000004	diff=3.06655e-11
 -0.000014	 -0.000014	diff=8.67397e-11
 -0.000000	 -0.000000	diff=1.11918e-12
 -0.000000	 -0.000000	diff=8.24279e-13
 -0.000000	 -0.000000	diff=9.06094e-13
  0.000000	  0.000000	diff=6.71648e-12
 -0.000000	 -0.000000	diff=3.46381e-13
 -0.000000	 -0.000000	diff=8.78578e-13
  0.000011	  0.000011	diff=1.8881e-10
  0.000051	  0.000051	diff=5.86157e-11
 -0.000000	 -0.000000	diff=1.17611e-12
  0.000000	 -0.000000	diff=4.17005e-13
  0.000000	  0.000000	diff=9.44246e-13
  0.000000	 -0.000000	diff=6.80654e-14
  0.000000	  0.000000	diff=8.41557e-13
 -0.000000	 -0.000000	diff=9.03374e-13
 -0.000000	 -0.000000	diff=4.63123e-13
 -0.000000	 -0.000000	diff=3.29304e-13
  0.000000	 -0.000000	diff=3.45388e-14
  0.000000	 -0.000000	diff=8.78721e-14
  0.000000	 -0.000000	diff=7.18203e-15
  0.000000	  0.000000	diff=5.05752e-14
  0.000000	 -0.000000	diff=3.69317e-14
  0.000000	 -0.000000	diff=7.55868e-13
 -0.000000	 -0.000000	diff=2.47048e-13
 -0.000000	 -0.000000	diff=1.01103e-12
 -0.000000	 -0.000000	diff=5.27165e-13
 -0.000000	 -0.000000	diff=6.87187e-13
 -0.000000	 -0.000000	diff=8.28824e-13
  0.000000	  0.000000	diff=5.24819e-13
 -0.000000	 -0.000000	diff=1.0098e-12
  0.000000	  0.000000	diff=1.21192e-12
  0.000000	  0.000000	diff=7.23633e-10
  0.000001	  0.000001	diff=8.15818e-11
  0.000000	  0.000000	diff=1.7469e-13
  0.000000	  0.000000	diff=1.32867e-12
  0.000000	  0.000000	diff=3.06473e-13
 -0.000000	 -0.000000	diff=4.38738e-13
  0.000000	  0.000000	diff=6.81803e-14
 -0.000000	 -0.000000	diff=1.40311e-13
 -0.000000	 -0.000000	diff=5.61944e-12
 -0.000001	 -0.000001	diff=2.08168e-09
  local_diff=3.28646e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=5.9455e-13
  0.000000	  0.000000	diff=1.07781e-12
  0.000000	  0.000000	diff=1.29619e-12
 -0.000000	 -0.000000	diff=4.74204e-15
  0.000000	  0.000000	diff=8.94596e-13
 -0.000000	 -0.000000	diff=3.23382e-13
 -0.000013	 -0.000013	diff=1.93341e-11
 -0.000008	 -0.000008	diff=2.81251e-11
 -0.000000	 -0.000000	diff=1.06933e-13
 -0.000000	 -0.000000	diff=2.4917e-13
  0.000000	  0.000000	diff=2.26123e-13
  0.000000	  0.000000	diff=8.65334e-13
 -0.000000	 -0.000000	diff=1.12239e-12
  0.000000	  0.000000	diff=5.88617e-13
 -0.000001	 -0.000001	diff=2.42624e-11
  0.000001	  0.000001	diff=5.92268e-12
 -0.000000	 -0.000000	diff=8.08888e-13
  0.000000	  0.000000	diff=1.01681e-12
  0.000000	  0.000000	diff=1.02848e-12
 -0.000000	 -0.000000	diff=1.06918e-12
  0.000000	  0.000000	diff=4.19007e-13
 -0.000000	 -0.000000	diff=1.02074e-12
 -0.000001	 -0.000001	diff=2.01893e-09
 -0.000001	 -0.000001	diff=5.63943e-11
  0.000000	  0.000000	diff=1.04435e-12
 -0.000000	 -0.000000	diff=1.19681e-13
 -0.000000	 -0.000000	diff=4.80025e-14
  0.000000	  0.000000	diff=9.20859e-13
 -0.000000	 -0.000000	diff=1.50122e-13
  0.000000	  0.000000	diff=2.09358e-13
  0.000001	  0.000001	diff=5.87079e-12
  0.000001	  0.000001	diff=4.28731e-09
  local_diff=6.46135e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000010	  0.000010	diff=3.91357e-09
 -0.000012	 -0.000012	diff=1.04559e-08
  0.000009	  0.000009	diff=3.59209e-09
 -0.000006	 -0.000006	diff=6.42968e-09
  local_diff=2.43913e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000030	  0.000030	diff=1.6923e-09
  0.000002	  0.000002	diff=1.91118e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000044	  0.000044	diff=7.94871e-09
  0.000001	  0.000001	diff=1.67169e-09
  0.000026	  0.000026	diff=1.78527e-09
  0.000001	  0.000001	diff=9.93849e-10
  local_diff=1.6003e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.91363e-15
  0.000000	 -0.000000	diff=2.33469e-15
  0.000000	 -0.000000	diff=2.46117e-15
  0.000000	  0.000000	diff=3.01129e-15
  local_diff=9.72078e-15
# W_h, [2 4]
 -0.000030	 -0.000030	diff=4.56634e-13
 -0.000036	 -0.000036	diff=1.47777e-12
  0.000038	  0.000038	diff=1.11086e-12
  0.000045	  0.000045	diff=1.31355e-12
 -0.000009	 -0.000009	diff=1.6458e-11
 -0.000011	 -0.000011	diff=1.33404e-11
  0.000013	  0.000013	diff=1.80711e-10
  0.000022	  0.000022	diff=1.68781e-10
  local_diff=3.83649e-10
# W_soft, [5 2]
  0.000028	  0.000028	diff=7.23507e-13
  0.000028	  0.000028	diff=6.15663e-14
  0.000001	  0.000001	diff=3.93677e-13
 -0.000038	 -0.000038	diff=4.57176e-13
 -0.000020	 -0.000020	diff=4.95701e-13
  0.000003	  0.000003	diff=7.69384e-13
  0.000003	  0.000003	diff=1.2449e-12
 -0.000003	 -0.000003	diff=2.56793e-13
 -0.000001	 -0.000001	diff=4.67095e-14
 -0.000001	 -0.000001	diff=8.03285e-13
  local_diff=5.2527e-12
# Num params=186, abs_diff=5.26211e-08
Elapsed time is 2.329038 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=5.40697e-13
  0.000000	  0.000000	diff=6.18138e-13
  0.000000	  0.000000	diff=7.20277e-13
  0.000000	  0.000000	diff=7.03089e-13
  0.000000	  0.000000	diff=4.82951e-13
  0.000000	  0.000000	diff=3.75894e-13
 -0.000025	 -0.000025	diff=2.27635e-11
  0.000009	  0.000009	diff=1.11344e-10
 -0.000000	 -0.000000	diff=7.04633e-13
 -0.000000	 -0.000000	diff=7.91751e-15
 -0.000000	 -0.000000	diff=1.60735e-12
 -0.000000	 -0.000000	diff=2.05998e-12
 -0.000000	 -0.000000	diff=1.34315e-12
 -0.000000	 -0.000000	diff=5.18732e-13
  0.000036	  0.000036	diff=4.92781e-11
 -0.000019	 -0.000019	diff=3.30245e-10
 -0.000000	 -0.000000	diff=5.25377e-13
 -0.000000	 -0.000000	diff=4.63394e-13
 -0.000000	 -0.000000	diff=1.3933e-13
 -0.000000	 -0.000000	diff=1.07395e-12
 -0.000000	 -0.000000	diff=1.94008e-13
 -0.000000	 -0.000000	diff=1.21374e-13
  0.000000	  0.000000	diff=2.17339e-10
 -0.000000	 -0.000000	diff=4.86716e-13
  0.000000	  0.000000	diff=6.48939e-13
  0.000000	  0.000000	diff=4.74796e-13
  0.000000	  0.000000	diff=4.56167e-14
  0.000000	  0.000000	diff=1.74365e-14
  0.000000	  0.000000	diff=1.52424e-12
  0.000000	  0.000000	diff=6.82098e-13
 -0.000000	 -0.000000	diff=9.03721e-13
  0.000000	  0.000000	diff=4.54071e-10
  local_diff=1.20202e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.05154e-13
  0.000000	  0.000000	diff=7.75175e-13
 -0.000000	 -0.000000	diff=1.18732e-12
  0.000000	  0.000000	diff=9.61231e-13
 -0.000000	 -0.000000	diff=1.09592e-13
 -0.000000	 -0.000000	diff=4.73532e-13
  0.000054	  0.000054	diff=2.06052e-12
  0.000007	  0.000007	diff=5.09863e-12
  0.000000	  0.000000	diff=1.48051e-13
 -0.000000	 -0.000000	diff=7.16361e-13
  0.000000	  0.000000	diff=6.06142e-13
 -0.000000	 -0.000000	diff=4.59178e-14
  0.000000	  0.000000	diff=6.18243e-14
  0.000000	  0.000000	diff=1.10579e-13
 -0.000063	 -0.000063	diff=1.8987e-12
 -0.000007	 -0.000007	diff=5.17418e-12
 -0.000000	 -0.000000	diff=2.07554e-13
  0.000000	  0.000000	diff=1.09812e-12
 -0.000000	 -0.000000	diff=4.49226e-13
  0.000000	  0.000000	diff=1.68916e-13
 -0.000000	 -0.000000	diff=4.13639e-13
 -0.000000	 -0.000000	diff=1.3831e-12
  0.000001	  0.000001	diff=7.87117e-10
  0.000000	  0.000000	diff=2.91306e-13
  0.000000	  0.000000	diff=4.01329e-13
 -0.000000	 -0.000000	diff=1.39308e-13
  0.000000	  0.000000	diff=4.08373e-13
 -0.000000	 -0.000000	diff=2.69857e-13
  0.000000	  0.000000	diff=4.03687e-13
  0.000000	  0.000000	diff=1.95762e-13
 -0.000001	 -0.000001	diff=1.25012e-12
 -0.000000	 -0.000000	diff=1.75835e-10
  local_diff=9.89566e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.07141e-13
 -0.000000	 -0.000000	diff=6.33061e-13
 -0.000000	 -0.000000	diff=2.33595e-13
  0.000000	  0.000000	diff=5.29131e-13
 -0.000000	 -0.000000	diff=3.2592e-14
 -0.000000	 -0.000000	diff=6.72325e-13
  0.000008	  0.000008	diff=3.95013e-11
  0.000009	  0.000009	diff=5.22489e-11
  0.000000	  0.000000	diff=6.11253e-13
  0.000000	  0.000000	diff=2.59648e-13
  0.000000	  0.000000	diff=2.03292e-12
 -0.000000	 -0.000000	diff=2.64183e-12
  0.000000	  0.000000	diff=1.09764e-12
  0.000000	  0.000000	diff=7.40188e-14
 -0.000011	 -0.000011	diff=1.48201e-10
 -0.000016	 -0.000016	diff=1.51705e-11
  0.000000	 -0.000000	diff=6.37402e-13
  0.000000	 -0.000000	diff=3.46665e-13
  0.000000	  0.000000	diff=2.96721e-13
  0.000000	 -0.000000	diff=7.41248e-14
  0.000000	  0.000000	diff=6.17827e-14
  0.000000	 -0.000000	diff=3.75456e-13
 -0.000000	 -0.000000	diff=1.22097e-12
 -0.000000	 -0.000000	diff=2.38259e-14
  0.000000	  0.000000	diff=2.28325e-13
  0.000000	  0.000000	diff=6.53023e-14
  0.000000	 -0.000000	diff=4.62652e-13
  0.000000	  0.000000	diff=2.62421e-15
  0.000000	 -0.000000	diff=2.22004e-13
  0.000000	  0.000000	diff=6.22389e-14
  0.000000	  0.000000	diff=2.81633e-13
  0.000000	  0.000000	diff=5.13549e-14
  0.000000	  0.000000	diff=1.74128e-13
  0.000000	  0.000000	diff=1.60533e-12
  0.000000	  0.000000	diff=7.60329e-14
 -0.000000	 -0.000000	diff=1.45607e-13
  0.000000	  0.000000	diff=1.17786e-13
 -0.000000	 -0.000000	diff=5.06536e-13
 -0.000001	 -0.000001	diff=1.43254e-09
 -0.000001	 -0.000001	diff=1.31919e-11
 -0.000000	 -0.000000	diff=5.9177e-14
 -0.000000	 -0.000000	diff=1.11185e-12
 -0.000000	 -0.000000	diff=7.52937e-13
  0.000000	  0.000000	diff=2.4228e-13
 -0.000000	 -0.000000	diff=3.49152e-13
  0.000000	  0.000000	diff=5.56639e-14
  0.000000	  0.000000	diff=9.28521e-12
  0.000001	  0.000001	diff=1.3003e-09
  local_diff=3.02938e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=2.91971e-13
 -0.000000	 -0.000000	diff=1.33976e-14
 -0.000000	 -0.000000	diff=2.18641e-13
  0.000000	  0.000000	diff=2.91638e-13
 -0.000000	 -0.000000	diff=1.11047e-12
  0.000000	  0.000000	diff=9.05238e-13
  0.000032	  0.000032	diff=2.59906e-11
  0.000012	  0.000012	diff=9.03224e-12
  0.000000	  0.000000	diff=2.15891e-14
  0.000000	  0.000000	diff=5.59855e-13
 -0.000000	 -0.000000	diff=8.84211e-13
  0.000000	  0.000000	diff=9.21977e-13
 -0.000000	 -0.000000	diff=3.06835e-13
  0.000000	  0.000000	diff=7.55161e-13
 -0.000005	 -0.000005	diff=5.7663e-11
 -0.000002	 -0.000002	diff=8.51174e-12
  0.000000	  0.000000	diff=1.09311e-12
 -0.000000	 -0.000000	diff=7.83741e-13
 -0.000000	 -0.000000	diff=6.64998e-13
  0.000000	  0.000000	diff=6.07613e-13
 -0.000000	 -0.000000	diff=4.27229e-13
  0.000000	  0.000000	diff=7.69347e-14
  0.000001	  0.000001	diff=4.32908e-09
  0.000001	  0.000001	diff=1.55997e-11
 -0.000000	 -0.000000	diff=8.71241e-14
  0.000000	  0.000000	diff=9.24445e-13
  0.000000	  0.000000	diff=9.04911e-14
 -0.000000	 -0.000000	diff=1.48912e-13
  0.000000	  0.000000	diff=3.5693e-13
 -0.000000	 -0.000000	diff=6.43968e-13
 -0.000002	 -0.000002	diff=7.73204e-12
 -0.000001	 -0.000001	diff=2.08762e-09
  local_diff=6.55342e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000015	  0.000015	diff=7.6491e-09
 -0.000030	 -0.000030	diff=2.91299e-08
  0.000013	  0.000013	diff=7.01695e-09
 -0.000025	 -0.000025	diff=2.5038e-08
  local_diff=6.8834e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.12553e-09
 -0.000003	 -0.000003	diff=2.18158e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.72523e-09
 -0.000002	 -0.000002	diff=1.66217e-09
 -0.000017	 -0.000017	diff=4.92814e-09
 -0.000001	 -0.000001	diff=1.11168e-09
  local_diff=1.57343e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=6.57311e-21
  0.000000	 -0.000000	diff=8.778e-21
  0.000000	 -0.000000	diff=1.59249e-20
  0.000000	  0.000000	diff=2.13569e-20
  local_diff=5.26329e-20
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.15715e-12
  0.000000	  0.000000	diff=2.99665e-13
  local_diff=1.45681e-12
# W_h, [2 4]
  0.000055	  0.000055	diff=1.17061e-12
  0.000018	  0.000018	diff=1.11021e-12
 -0.000070	 -0.000070	diff=1.44588e-12
 -0.000023	 -0.000023	diff=3.90783e-13
  0.000013	  0.000013	diff=2.33728e-11
  0.000006	  0.000006	diff=6.03221e-13
 -0.000026	 -0.000026	diff=2.08052e-10
 -0.000014	 -0.000014	diff=1.85702e-11
  local_diff=2.54715e-10
# W_soft, [5 2]
 -0.000031	 -0.000031	diff=7.89404e-13
 -0.000031	 -0.000031	diff=1.9265e-13
  0.000013	  0.000013	diff=3.27006e-13
  0.000003	  0.000003	diff=1.33653e-12
  0.000045	  0.000045	diff=2.32821e-12
  0.000032	  0.000032	diff=1.68971e-12
  0.000032	  0.000032	diff=8.80479e-13
 -0.000010	 -0.000010	diff=7.8026e-13
 -0.000005	 -0.000005	diff=1.10666e-12
 -0.000048	 -0.000048	diff=1.22723e-12
  local_diff=1.06581e-11
# Num params=188, abs_diff=9.66095e-08
Elapsed time is 2.424320 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 230, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 230
  src input 1: z x y xy
  src mask: 1  1  1  1
  tgt input 1: <s> a c a </s>
  tgt output 1: a c a </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=9.22143e-13
  0.000000	  0.000000	diff=9.61582e-13
 -0.000000	 -0.000000	diff=1.41605e-12
  0.000000	  0.000000	diff=5.21028e-13
 -0.000000	 -0.000000	diff=1.68846e-12
 -0.000000	 -0.000000	diff=1.01403e-12
  0.000000	  0.000000	diff=7.69966e-08
  0.000000	  0.000000	diff=8.26529e-08
  0.000000	  0.000000	diff=1.2548e-12
 -0.000000	 -0.000000	diff=1.68341e-12
  0.000000	  0.000000	diff=1.70853e-12
 -0.000000	 -0.000000	diff=1.49905e-12
  0.000000	  0.000000	diff=1.33505e-12
  0.000000	  0.000000	diff=1.09932e-12
 -0.000000	 -0.000000	diff=9.73703e-12
 -0.000000	 -0.000000	diff=2.10199e-12
  0.000000	  0.000000	diff=6.79836e-13
 -0.000000	 -0.000000	diff=2.22044e-12
  0.000000	  0.000000	diff=1.50314e-12
 -0.000000	 -0.000000	diff=1.11807e-12
  0.000000	  0.000000	diff=4.14699e-13
  0.000000	  0.000000	diff=1.22049e-12
 -0.000000	 -0.000000	diff=3.9547e-11
 -0.000000	 -0.000000	diff=1.80469e-12
 -0.000000	 -0.000000	diff=4.72769e-13
  0.000000	  0.000000	diff=4.67703e-13
 -0.000000	 -0.000000	diff=9.03386e-13
  0.000000	  0.000000	diff=1.28338e-12
 -0.000000	 -0.000000	diff=5.15355e-13
 -0.000000	 -0.000000	diff=1.7382e-12
  0.000000	  0.000000	diff=5.72246e-13
  0.000000	  0.000000	diff=4.92825e-11
  local_diff=1.5978e-07
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.58981e-12
  0.000000	  0.000000	diff=1.14631e-12
  0.000000	  0.000000	diff=1.29996e-12
  0.000000	  0.000000	diff=2.15554e-12
 -0.000000	 -0.000000	diff=1.0968e-12
 -0.000000	 -0.000000	diff=1.97209e-12
 -0.000001	 -0.000000	diff=4.62002e-07
 -0.000000	  0.000000	diff=4.15994e-07
 -0.000000	 -0.000000	diff=7.43405e-13
 -0.000000	 -0.000000	diff=1.11162e-12
 -0.000000	 -0.000000	diff=3.97389e-13
 -0.000000	 -0.000000	diff=1.1805e-12
  0.000000	  0.000000	diff=1.2738e-12
  0.000000	  0.000000	diff=1.32005e-12
  0.000000	  0.000000	diff=1.12112e-12
 -0.000000	 -0.000000	diff=1.42169e-12
  0.000000	  0.000000	diff=2.38771e-13
  0.000000	  0.000000	diff=1.40219e-12
  0.000000	  0.000000	diff=1.55654e-12
  0.000000	  0.000000	diff=1.0547e-12
  0.000000	 -0.000000	diff=7.22733e-13
  0.000000	 -0.000000	diff=9.16572e-13
 -0.000000	 -0.000000	diff=8.27901e-08
  0.000000	  0.000000	diff=3.63422e-13
  0.000000	 -0.000000	diff=1.27156e-12
 -0.000000	 -0.000000	diff=4.63898e-13
  0.000000	 -0.000000	diff=6.88924e-13
 -0.000000	 -0.000000	diff=8.87361e-13
  0.000000	  0.000000	diff=1.40098e-12
  0.000000	  0.000000	diff=3.33798e-13
  0.000000	  0.000000	diff=1.59213e-12
 -0.000000	 -0.000000	diff=5.41487e-11
  local_diff=9.6087e-07
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.4114e-12
 -0.000000	 -0.000000	diff=1.34083e-12
  0.000000	  0.000000	diff=6.95536e-13
  0.000000	  0.000000	diff=1.05993e-12
  0.000000	  0.000000	diff=1.37879e-12
 -0.000000	 -0.000000	diff=1.43502e-12
 -0.000000	  0.000000	diff=2.78773e-07
  0.000000	  0.000000	diff=2.78759e-07
 -0.000000	 -0.000000	diff=9.26219e-13
  0.000000	  0.000000	diff=1.72687e-12
 -0.000000	 -0.000000	diff=5.59303e-13
 -0.000000	 -0.000000	diff=1.09131e-12
 -0.000000	 -0.000000	diff=3.29853e-13
  0.000000	  0.000000	diff=2.52402e-13
  0.000001	  0.000001	diff=1.04718e-11
 -0.000003	 -0.000003	diff=4.19171e-11
  0.000000	 -0.000000	diff=2.8068e-14
  0.000000	  0.000000	diff=1.27365e-12
  0.000000	  0.000000	diff=4.49804e-14
  0.000000	 -0.000000	diff=1.56506e-12
  0.000000	  0.000000	diff=1.40794e-12
  0.000000	 -0.000000	diff=5.18771e-16
 -0.000000	 -0.000000	diff=1.49546e-12
  0.000000	  0.000000	diff=9.77855e-13
  0.000000	  0.000000	diff=9.89941e-16
  0.000000	 -0.000000	diff=3.99475e-16
  0.000000	  0.000000	diff=1.64378e-15
  0.000000	 -0.000000	diff=1.0045e-14
  0.000000	  0.000000	diff=2.28737e-15
  0.000000	 -0.000000	diff=9.07471e-15
  0.000000	  0.000000	diff=4.62055e-13
  0.000000	 -0.000000	diff=1.39931e-12
 -0.000000	 -0.000000	diff=4.12114e-13
  0.000000	  0.000000	diff=9.58812e-13
 -0.000000	 -0.000000	diff=1.50611e-12
  0.000000	  0.000000	diff=1.3933e-12
 -0.000000	 -0.000000	diff=4.46782e-13
  0.000000	  0.000000	diff=1.46847e-12
  0.000000	  0.000000	diff=8.02803e-11
 -0.000000	 -0.000000	diff=5.00644e-12
  0.000000	  0.000000	diff=6.8576e-13
 -0.000000	 -0.000000	diff=8.37673e-13
 -0.000000	 -0.000000	diff=7.41945e-13
  0.000000	  0.000000	diff=1.32919e-12
 -0.000000	 -0.000000	diff=6.81251e-13
  0.000000	  0.000000	diff=1.65395e-12
  0.000000	  0.000000	diff=1.63011e-12
 -0.000000	 -0.000000	diff=6.2133e-11
  local_diff=5.57767e-07
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.05185e-12
  0.000000	  0.000000	diff=5.18618e-13
  0.000000	  0.000000	diff=1.34821e-12
  0.000000	  0.000000	diff=2.45557e-12
 -0.000000	 -0.000000	diff=1.24825e-12
  0.000000	  0.000000	diff=1.10838e-12
  0.000000	  0.000000	diff=3.68576e-07
 -0.000000	  0.000000	diff=2.78782e-07
 -0.000000	 -0.000000	diff=1.05691e-12
  0.000000	  0.000000	diff=9.82945e-13
  0.000000	 -0.000000	diff=1.68662e-12
  0.000000	  0.000000	diff=7.87704e-13
 -0.000000	 -0.000000	diff=1.35171e-12
  0.000000	  0.000000	diff=3.58147e-13
  0.000000	  0.000000	diff=4.66085e-12
  0.000000	  0.000000	diff=1.71438e-11
  0.000000	 -0.000000	diff=1.56759e-12
  0.000000	  0.000000	diff=7.49558e-13
  0.000000	  0.000000	diff=1.90457e-12
  0.000000	  0.000000	diff=1.26527e-12
  0.000000	  0.000000	diff=1.98908e-12
  0.000000	  0.000000	diff=1.07048e-12
 -0.000000	 -0.000000	diff=8.2921e-08
 -0.000000	  0.000000	diff=8.27887e-08
  0.000000	  0.000000	diff=1.13723e-12
  0.000000	 -0.000000	diff=9.87865e-13
  0.000000	 -0.000000	diff=1.92708e-12
 -0.000000	 -0.000000	diff=6.11812e-13
  0.000000	 -0.000000	diff=1.43111e-12
 -0.000000	 -0.000000	diff=9.6175e-13
  0.000000	  0.000000	diff=7.85373e-13
 -0.000000	 -0.000000	diff=5.3375e-10
  local_diff=8.13654e-07
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.27503e-08
 -0.000000	 -0.000000	diff=2.07815e-10
 -0.000000	 -0.000000	diff=7.20544e-11
  0.000000	  0.000000	diff=9.71332e-11
  local_diff=8.31274e-08
# W_emb_tgt, [2 5]
 -0.000005	 -0.000005	diff=1.99335e-07
  0.000002	  0.000002	diff=1.00398e-09
 -0.000003	 -0.000003	diff=8.83838e-08
  0.000001	  0.000001	diff=3.40859e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=9.04697e-08
  0.000000	  0.000000	diff=1.3903e-10
 -0.000000	 -0.000000	diff=1.27414e-10
  0.000000	  0.000000	diff=6.39375e-11
  local_diff=3.79863e-07
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.45169e-12
  0.000000	  0.000000	diff=1.49405e-12
  0.000000	  0.000000	diff=1.39039e-12
 -0.000000	 -0.000000	diff=1.90861e-12
  0.000000	 -0.000000	diff=1.55535e-12
 -0.000000	 -0.000000	diff=1.23356e-12
 -0.000000	 -0.000000	diff=4.55222e-13
  0.000000	  0.000000	diff=1.66086e-12
  0.000000	  0.000000	diff=8.44729e-13
  0.000000	  0.000000	diff=1.20155e-12
 -0.000000	 -0.000000	diff=5.82021e-13
  0.000000	  0.000000	diff=1.48687e-12
  0.000000	  0.000000	diff=1.65833e-12
  0.000000	  0.000000	diff=1.31794e-12
  0.000000	  0.000000	diff=2.1596e-12
  0.000000	  0.000000	diff=8.34738e-13
  0.000000	  0.000000	diff=8.1763e-14
  0.000000	  0.000000	diff=2.10287e-12
  0.000000	 -0.000000	diff=1.03956e-14
  0.000000	 -0.000000	diff=2.48329e-14
  0.000000	  0.000000	diff=1.33526e-12
  0.000000	 -0.000000	diff=3.15754e-14
  0.000000	  0.000000	diff=1.81598e-12
  0.000000	  0.000000	diff=1.2269e-12
  0.000000	  0.000000	diff=1.37544e-12
  0.000000	 -0.000000	diff=1.54609e-12
  0.000000	  0.000000	diff=6.30851e-15
  0.000000	 -0.000000	diff=1.53529e-12
  0.000000	  0.000000	diff=6.39235e-13
  0.000000	 -0.000000	diff=1.69215e-12
  0.000000	  0.000000	diff=3.71005e-13
 -0.000000	 -0.000000	diff=2.18269e-12
  local_diff=3.72133e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.40548e-12
  0.000000	  0.000000	diff=9.71616e-12
 -0.000000	 -0.000000	diff=9.41007e-13
  0.000000	  0.000000	diff=2.62082e-12
  0.000000	  0.000000	diff=9.91571e-13
  0.000000	  0.000000	diff=5.00121e-12
 -0.000000	 -0.000000	diff=1.21755e-12
  0.000000	  0.000000	diff=1.80587e-12
  local_diff=2.36997e-11
# W_pos, [2 2]
  0.000000	 -0.000000	diff=8.96584e-08
 -0.000001	  0.000000	diff=5.4833e-07
 -0.000001	  0.000000	diff=5.47843e-07
  0.000000	 -0.000000	diff=8.96594e-08
  local_diff=1.27549e-06
# v_pos, [1 2]
  0.000000	 -0.000000	diff=8.96601e-08
  0.000000	 -0.000000	diff=8.96586e-08
  local_diff=1.79319e-07
# W_h, [2 4]
  0.000002	  0.000002	diff=1.02028e-12
 -0.000003	 -0.000003	diff=1.31714e-12
 -0.000002	 -0.000002	diff=1.55102e-12
  0.000004	  0.000004	diff=2.14214e-12
  0.000001	  0.000001	diff=3.25429e-12
 -0.000002	 -0.000002	diff=3.85126e-12
 -0.000004	 -0.000004	diff=2.64026e-11
  0.000024	  0.000024	diff=4.4822e-12
  local_diff=4.4021e-11
# W_soft, [5 2]
 -0.000018	 -0.000018	diff=1.14657e-12
  0.000003	  0.000003	diff=6.04714e-13
  0.000014	  0.000014	diff=1.4535e-12
 -0.000001	 -0.000001	diff=1.47975e-12
  0.000002	  0.000002	diff=9.99811e-13
  0.000001	  0.000001	diff=7.28274e-13
 -0.000001	 -0.000001	diff=6.65709e-13
  0.000002	  0.000002	diff=1.11095e-12
 -0.000000	 -0.000000	diff=8.53457e-14
 -0.000001	 -0.000001	diff=2.51894e-13
  local_diff=8.52651e-12
# Num params=230, abs_diff=4.40999e-06
Elapsed time is 4.291924 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=2.04984e-13
 -0.000000	 -0.000000	diff=1.67056e-13
 -0.000000	 -0.000000	diff=4.85116e-13
  0.000000	  0.000000	diff=5.84921e-13
 -0.000000	 -0.000000	diff=6.93231e-13
 -0.000000	 -0.000000	diff=4.07779e-13
  0.000001	  0.000001	diff=1.29141e-11
 -0.000000	 -0.000000	diff=2.24761e-12
  0.000000	  0.000000	diff=5.0066e-13
 -0.000000	 -0.000000	diff=6.4295e-13
  0.000000	  0.000000	diff=5.82221e-13
 -0.000000	 -0.000000	diff=3.5136e-13
  0.000000	  0.000000	diff=6.92031e-13
  0.000000	  0.000000	diff=3.3406e-13
 -0.000002	 -0.000002	diff=2.92942e-11
 -0.000000	 -0.000000	diff=4.53067e-12
  0.000000	  0.000000	diff=3.62307e-13
 -0.000000	 -0.000000	diff=3.70126e-13
  0.000000	  0.000000	diff=3.29575e-13
 -0.000000	 -0.000000	diff=1.51681e-12
  0.000000	  0.000000	diff=3.3584e-13
  0.000000	  0.000000	diff=1.56745e-13
 -0.000000	 -0.000000	diff=2.65457e-11
 -0.000000	 -0.000000	diff=7.5972e-13
 -0.000000	 -0.000000	diff=6.64624e-14
  0.000000	  0.000000	diff=2.47594e-13
 -0.000000	 -0.000000	diff=1.85073e-13
  0.000000	  0.000000	diff=8.43567e-14
 -0.000000	 -0.000000	diff=3.43704e-14
 -0.000000	 -0.000000	diff=5.0714e-13
  0.000000	  0.000000	diff=4.97484e-13
  0.000000	  0.000000	diff=2.39116e-11
  local_diff=1.10544e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=6.40525e-13
  0.000000	  0.000000	diff=9.62665e-13
 -0.000000	 -0.000000	diff=1.2564e-13
  0.000000	  0.000000	diff=5.14914e-13
  0.000000	  0.000000	diff=3.68346e-14
 -0.000000	 -0.000000	diff=1.05492e-13
  0.000000	  0.000000	diff=3.4179e-13
  0.000002	  0.000002	diff=4.83882e-13
 -0.000000	 -0.000000	diff=7.82683e-14
 -0.000000	 -0.000000	diff=4.10576e-13
  0.000000	  0.000000	diff=1.33446e-12
 -0.000000	 -0.000000	diff=4.26452e-13
 -0.000000	 -0.000000	diff=3.88414e-13
  0.000000	  0.000000	diff=8.61348e-13
 -0.000000	 -0.000000	diff=4.54652e-07
 -0.000001	 -0.000001	diff=3.04609e-13
 -0.000000	 -0.000000	diff=6.95132e-13
  0.000000	  0.000000	diff=4.75591e-13
 -0.000000	 -0.000000	diff=1.7262e-12
  0.000000	  0.000000	diff=7.72223e-13
  0.000000	  0.000000	diff=6.55721e-13
  0.000000	 -0.000000	diff=1.01394e-12
  0.000000	  0.000000	diff=9.23049e-11
  0.000000	  0.000000	diff=4.74396e-13
  0.000000	  0.000000	diff=2.58264e-13
 -0.000000	 -0.000000	diff=3.75765e-13
  0.000000	  0.000000	diff=1.20161e-13
 -0.000000	 -0.000000	diff=6.83511e-13
 -0.000000	 -0.000000	diff=3.6099e-13
  0.000000	  0.000000	diff=3.41484e-13
 -0.000000	 -0.000000	diff=1.12587e-13
 -0.000000	 -0.000000	diff=1.17643e-10
  local_diff=4.54877e-07
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.07317e-13
  0.000000	  0.000000	diff=3.11218e-13
 -0.000000	 -0.000000	diff=1.23501e-13
 -0.000000	 -0.000000	diff=7.31719e-13
  0.000000	  0.000000	diff=2.31148e-13
  0.000000	  0.000000	diff=4.25328e-13
  0.000001	  0.000001	diff=1.48702e-11
  0.000006	  0.000006	diff=9.25518e-12
 -0.000000	 -0.000000	diff=5.88779e-13
 -0.000000	 -0.000000	diff=2.5081e-13
  0.000000	  0.000000	diff=2.56176e-13
  0.000000	  0.000000	diff=7.3305e-13
  0.000000	  0.000000	diff=3.79874e-13
 -0.000000	 -0.000000	diff=5.05194e-13
  0.000001	  0.000001	diff=2.60111e-07
 -0.000003	 -0.000002	diff=5.20247e-07
  0.000000	 -0.000000	diff=6.45062e-14
 -0.000000	 -0.000000	diff=5.22694e-13
  0.000000	  0.000000	diff=6.47384e-14
  0.000000	  0.000000	diff=2.39708e-13
  0.000000	 -0.000000	diff=1.54568e-15
 -0.000000	  0.000000	diff=7.88387e-13
 -0.000000	 -0.000000	diff=3.60249e-14
 -0.000000	 -0.000000	diff=1.7137e-13
  0.000000	 -0.000000	diff=1.12035e-14
  0.000000	 -0.000000	diff=9.09651e-14
  0.000000	  0.000000	diff=8.69589e-15
  0.000000	 -0.000000	diff=3.79878e-15
  0.000000	 -0.000000	diff=2.82825e-15
  0.000000	 -0.000000	diff=8.5973e-14
 -0.000000	 -0.000000	diff=1.63301e-14
 -0.000000	 -0.000000	diff=3.14967e-13
  0.000000	  0.000000	diff=5.65112e-13
  0.000000	  0.000000	diff=1.8428e-13
 -0.000000	 -0.000000	diff=1.57867e-13
 -0.000000	 -0.000000	diff=5.47302e-14
  0.000000	  0.000000	diff=2.71107e-13
  0.000000	  0.000000	diff=5.62761e-14
  0.000000	  0.000000	diff=2.56648e-10
  0.000000	  0.000000	diff=1.40939e-11
  0.000000	  0.000000	diff=3.814e-13
  0.000000	  0.000000	diff=1.34535e-12
 -0.000000	 -0.000000	diff=3.0045e-13
 -0.000000	 -0.000000	diff=7.43738e-13
 -0.000000	 -0.000000	diff=5.03326e-13
 -0.000000	 -0.000000	diff=6.05109e-14
  0.000000	  0.000000	diff=1.95128e-12
  0.000000	  0.000000	diff=4.51536e-11
  local_diff=7.80712e-07
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.49259e-13
 -0.000000	 -0.000000	diff=5.78895e-13
 -0.000000	 -0.000000	diff=7.25361e-14
  0.000000	  0.000000	diff=1.044e-12
 -0.000000	 -0.000000	diff=3.85808e-13
  0.000000	  0.000000	diff=5.14552e-13
  0.000004	  0.000004	diff=8.599e-12
  0.000005	  0.000005	diff=1.9549e-12
 -0.000000	 -0.000000	diff=2.90961e-13
 -0.000000	 -0.000000	diff=6.64674e-13
 -0.000000	 -0.000000	diff=9.47315e-14
  0.000000	  0.000000	diff=2.28338e-13
 -0.000000	 -0.000000	diff=9.36914e-13
  0.000000	  0.000000	diff=9.17081e-13
  0.000002	  0.000002	diff=4.90665e-11
  0.000005	  0.000005	diff=1.55734e-11
  0.000000	  0.000000	diff=8.27417e-13
  0.000000	  0.000000	diff=5.29663e-13
 -0.000000	 -0.000000	diff=3.65946e-13
  0.000000	  0.000000	diff=1.16574e-13
 -0.000000	 -0.000000	diff=1.00641e-13
  0.000000	  0.000000	diff=9.00012e-14
  0.000000	  0.000000	diff=3.35942e-10
  0.000000	  0.000000	diff=1.18219e-11
 -0.000000	 -0.000000	diff=6.01405e-13
 -0.000000	 -0.000000	diff=2.82024e-13
  0.000000	  0.000000	diff=7.00918e-13
 -0.000000	 -0.000000	diff=2.51154e-13
  0.000000	  0.000000	diff=6.8009e-13
 -0.000000	 -0.000000	diff=8.49937e-13
  0.000000	  0.000000	diff=1.76803e-12
  0.000000	  0.000000	diff=1.00054e-09
  local_diff=1.43684e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=2.81413e-10
  0.000001	  0.000001	diff=8.62014e-10
 -0.000001	 -0.000001	diff=1.81213e-10
  0.000001	  0.000001	diff=5.13389e-10
  local_diff=1.83803e-09
# W_emb_tgt, [2 5]
  0.000030	  0.000030	diff=2.60006e-07
  0.000003	  0.000003	diff=2.56457e-09
  0.000005	  0.000006	diff=5.19832e-07
  0.000001	  0.000001	diff=6.57495e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000004	  0.000004	diff=2.62143e-10
  0.000000	  0.000000	diff=2.12207e-10
  0.000004	  0.000004	diff=2.18744e-10
  0.000000	  0.000000	diff=1.87267e-10
  local_diff=7.8394e-07
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=1.88281e-13
  0.000000	 -0.000000	diff=1.24543e-14
  0.000000	  0.000000	diff=2.14217e-14
  0.000000	 -0.000000	diff=3.68082e-15
  0.000000	 -0.000000	diff=1.00873e-13
  0.000000	 -0.000000	diff=1.25614e-14
  0.000000	  0.000000	diff=8.21761e-13
  0.000000	  0.000000	diff=4.53078e-13
  0.000000	  0.000000	diff=7.09322e-14
  0.000000	  0.000000	diff=2.49265e-14
  0.000000	 -0.000000	diff=4.16277e-14
  0.000000	 -0.000000	diff=4.90306e-15
  0.000000	  0.000000	diff=2.29989e-14
  0.000000	  0.000000	diff=1.43843e-14
 -0.000000	 -0.000000	diff=6.85121e-13
 -0.000000	 -0.000000	diff=2.59948e-13
  0.000000	  0.000000	diff=1.91343e-15
  0.000000	  0.000000	diff=5.20099e-16
  0.000000	 -0.000000	diff=1.02944e-15
  0.000000	 -0.000000	diff=1.02416e-16
  0.000000	  0.000000	diff=6.9508e-16
  0.000000	  0.000000	diff=3.45274e-16
  0.000000	  0.000000	diff=5.86234e-13
  0.000000	  0.000000	diff=4.26234e-14
  0.000000	  0.000000	diff=9.08334e-17
  0.000000	  0.000000	diff=8.89789e-17
  0.000000	 -0.000000	diff=1.92571e-16
  0.000000	 -0.000000	diff=7.08568e-17
  0.000000	 -0.000000	diff=6.23461e-17
  0.000000	  0.000000	diff=3.60598e-17
  0.000000	  0.000000	diff=4.52314e-13
 -0.000000	  0.000000	diff=8.63959e-13
  local_diff=4.68923e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=3.27525e-16
  0.000000	 -0.000000	diff=1.49477e-15
  0.000000	  0.000000	diff=1.52742e-16
  0.000000	  0.000000	diff=2.80215e-16
  0.000000	 -0.000000	diff=3.98017e-17
  0.000000	 -0.000000	diff=4.65446e-16
 -0.000000	 -0.000000	diff=1.5035e-14
 -0.000000	 -0.000000	diff=1.75321e-13
  0.000000	 -0.000000	diff=4.763e-17
  0.000000	 -0.000000	diff=5.21969e-16
  0.000000	  0.000000	diff=8.0663e-17
  0.000000	  0.000000	diff=2.47096e-16
  0.000000	  0.000000	diff=4.2387e-17
  0.000000	 -0.000000	diff=5.69353e-17
 -0.000000	 -0.000000	diff=2.78064e-13
 -0.000000	 -0.000000	diff=1.32627e-13
  0.000000	 -0.000000	diff=1.77618e-18
  0.000000	 -0.000000	diff=1.75441e-17
  0.000000	  0.000000	diff=1.79503e-18
  0.000000	  0.000000	diff=4.38354e-18
  0.000000	 -0.000000	diff=9.16843e-20
  0.000000	 -0.000000	diff=7.83598e-18
  0.000000	 -0.000000	diff=3.36492e-14
  0.000000	 -0.000000	diff=1.01311e-13
  0.000000	  0.000000	diff=1.03184e-19
  0.000000	 -0.000000	diff=2.14865e-17
  0.000000	  0.000000	diff=2.81047e-18
  0.000000	  0.000000	diff=1.73438e-17
  0.000000	  0.000000	diff=2.89927e-18
  0.000000	 -0.000000	diff=1.28656e-19
  0.000000	  0.000000	diff=5.295e-13
  0.000000	  0.000000	diff=2.98711e-13
  local_diff=1.56805e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.60249e-19
  0.000000	  0.000000	diff=2.51988e-18
  0.000000	 -0.000000	diff=4.32251e-19
  0.000000	  0.000000	diff=1.13212e-18
  0.000000	 -0.000000	diff=1.11488e-19
  0.000000	 -0.000000	diff=1.5202e-19
 -0.000000	 -0.000000	diff=3.52387e-13
  0.000000	  0.000000	diff=5.58594e-13
  0.000000	 -0.000000	diff=4.91174e-19
  0.000000	  0.000000	diff=1.11676e-17
  0.000000	 -0.000000	diff=4.11715e-19
  0.000000	 -0.000000	diff=4.36813e-18
  0.000000	  0.000000	diff=5.48484e-19
  0.000000	 -0.000000	diff=8.54886e-18
 -0.000000	 -0.000000	diff=2.40768e-13
  0.000000	  0.000000	diff=1.05502e-13
  0.000000	 -0.000000	diff=8.28592e-22
  0.000000	  0.000000	diff=1.03021e-19
  0.000000	 -0.000000	diff=1.18023e-20
  0.000000	  0.000000	diff=1.37527e-19
  0.000000	 -0.000000	diff=1.26407e-20
  0.000000	  0.000000	diff=2.37128e-19
  0.000000	 -0.000000	diff=3.30166e-14
  0.000000	  0.000000	diff=2.22548e-13
  0.000000	  0.000000	diff=2.18113e-20
  0.000000	 -0.000000	diff=1.6354e-19
  0.000000	 -0.000000	diff=2.86401e-20
  0.000000	  0.000000	diff=2.79215e-19
  0.000000	 -0.000000	diff=1.70545e-20
  0.000000	  0.000000	diff=2.48713e-19
  0.000000	 -0.000000	diff=8.54268e-14
  0.000000	  0.000000	diff=4.01273e-13
  local_diff=1.99955e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.27191e-13
  0.000000	  0.000000	diff=4.83965e-13
 -0.000000	 -0.000000	diff=3.1106e-13
  0.000000	  0.000000	diff=7.12878e-13
 -0.000000	 -0.000000	diff=2.61666e-13
  0.000000	  0.000000	diff=4.34345e-13
 -0.000000	 -0.000000	diff=1.11039e-13
  0.000000	  0.000000	diff=5.58179e-14
  local_diff=2.69796e-12
# W_pos, [2 2]
  0.000000	  0.000000	diff=3.06602e-14
  0.000000	  0.000000	diff=3.06023e-14
  0.000000	 -0.000000	diff=2.30844e-13
  0.000000	 -0.000000	diff=2.30408e-13
  local_diff=5.22515e-13
# v_pos, [1 2]
  0.000000	 -0.000000	diff=5.98051e-14
  0.000000	  0.000000	diff=2.51307e-13
  local_diff=3.11112e-13
# W_h, [2 4]
 -0.000001	 -0.000001	diff=7.52611e-13
  0.000002	  0.000002	diff=5.26285e-13
  0.000001	  0.000001	diff=5.1184e-13
 -0.000002	 -0.000002	diff=1.02702e-12
 -0.000000	 -0.000000	diff=2.56339e-12
  0.000002	  0.000002	diff=4.9552e-12
 -0.000008	 -0.000008	diff=7.10131e-11
  0.000013	  0.000013	diff=4.76201e-11
  local_diff=1.2897e-10
# W_soft, [5 2]
 -0.000011	 -0.000011	diff=4.69546e-14
  0.000001	  0.000001	diff=6.1124e-13
  0.000009	  0.000009	diff=3.0961e-13
 -0.000001	 -0.000001	diff=1.20168e-13
  0.000002	  0.000002	diff=2.41789e-13
 -0.000003	 -0.000003	diff=7.94708e-13
  0.000002	  0.000002	diff=7.37192e-13
 -0.000003	 -0.000003	diff=2.3733e-13
  0.000002	  0.000002	diff=1.63154e-13
  0.000002	  0.000002	diff=2.89671e-13
  local_diff=3.55182e-12
# Num params=294, abs_diff=2.02306e-06
Elapsed time is 5.772680 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=4.30616e-13
 -0.000000	 -0.000000	diff=3.35516e-13
 -0.000000	 -0.000000	diff=6.72069e-13
  0.000000	  0.000000	diff=4.88054e-13
 -0.000000	 -0.000000	diff=1.62022e-13
 -0.000000	 -0.000000	diff=2.35131e-13
  0.000002	  0.000002	diff=2.88148e-11
 -0.000000	 -0.000000	diff=6.59075e-13
  0.000000	  0.000000	diff=1.84662e-13
  0.000000	  0.000000	diff=3.06152e-13
  0.000000	  0.000000	diff=1.03364e-13
 -0.000000	 -0.000000	diff=2.8692e-13
  0.000000	  0.000000	diff=2.24581e-13
  0.000000	  0.000000	diff=3.44959e-13
 -0.000003	 -0.000003	diff=6.85569e-11
 -0.000000	 -0.000000	diff=6.87654e-12
  0.000000	  0.000000	diff=2.86699e-14
 -0.000000	 -0.000000	diff=7.65397e-13
  0.000000	  0.000000	diff=9.75653e-14
 -0.000000	 -0.000000	diff=1.67809e-14
  0.000000	  0.000000	diff=4.06678e-13
  0.000000	  0.000000	diff=9.127e-13
 -0.000000	 -0.000000	diff=4.12753e-11
 -0.000000	 -0.000000	diff=1.20526e-12
 -0.000000	 -0.000000	diff=1.0919e-12
  0.000000	  0.000000	diff=5.02223e-13
 -0.000000	 -0.000000	diff=8.4641e-14
  0.000000	  0.000000	diff=3.0983e-13
 -0.000000	 -0.000000	diff=1.28047e-13
 -0.000000	 -0.000000	diff=4.39554e-13
  0.000000	  0.000000	diff=7.64246e-13
  0.000000	  0.000000	diff=3.67269e-11
  local_diff=1.93437e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=5.08526e-14
  0.000000	  0.000000	diff=2.70134e-13
 -0.000000	 -0.000000	diff=6.79148e-13
  0.000000	  0.000000	diff=2.68579e-13
  0.000000	  0.000000	diff=3.26156e-13
 -0.000000	 -0.000000	diff=5.61811e-13
 -0.000000	 -0.000000	diff=1.00901e-12
  0.000002	  0.000002	diff=7.37212e-13
 -0.000000	 -0.000000	diff=5.99593e-13
 -0.000000	 -0.000000	diff=1.70537e-14
  0.000000	  0.000000	diff=1.51885e-13
 -0.000000	 -0.000000	diff=4.51432e-13
 -0.000000	 -0.000000	diff=2.97684e-13
  0.000000	  0.000000	diff=8.24619e-14
 -0.000001	 -0.000000	diff=7.0962e-07
 -0.000002	 -0.000002	diff=1.41425e-12
 -0.000000	 -0.000000	diff=5.24433e-13
  0.000000	  0.000000	diff=4.21802e-15
 -0.000000	 -0.000000	diff=2.55275e-13
  0.000000	  0.000000	diff=6.92425e-13
  0.000000	  0.000000	diff=7.54573e-13
 -0.000000	 -0.000000	diff=2.90064e-14
  0.000000	  0.000000	diff=1.44289e-10
  0.000000	  0.000000	diff=1.60574e-13
  0.000000	  0.000000	diff=9.43757e-14
 -0.000000	 -0.000000	diff=1.59809e-13
  0.000000	  0.000000	diff=1.15791e-13
 -0.000000	 -0.000000	diff=3.77712e-13
 -0.000000	 -0.000000	diff=5.21542e-14
  0.000000	  0.000000	diff=5.21422e-13
 -0.000000	 -0.000000	diff=3.98752e-13
 -0.000000	 -0.000000	diff=1.8469e-10
  local_diff=7.0996e-07
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.02807e-13
  0.000000	  0.000000	diff=1.73552e-13
 -0.000000	 -0.000000	diff=5.39247e-13
  0.000000	  0.000000	diff=1.77415e-12
 -0.000000	 -0.000000	diff=6.27885e-13
  0.000000	  0.000000	diff=3.7913e-13
  0.000003	  0.000003	diff=6.54146e-12
  0.000013	  0.000013	diff=4.19816e-11
  0.000000	  0.000000	diff=1.77202e-12
 -0.000000	 -0.000000	diff=4.3016e-13
  0.000000	  0.000000	diff=4.64836e-13
 -0.000000	 -0.000000	diff=1.48477e-12
  0.000000	  0.000000	diff=1.13797e-12
  0.000000	  0.000000	diff=1.73511e-13
  0.000002	  0.000003	diff=4.05964e-07
 -0.000005	 -0.000004	diff=8.11977e-07
 -0.000000	 -0.000000	diff=6.40273e-13
 -0.000000	 -0.000000	diff=5.73822e-13
  0.000000	  0.000000	diff=8.23101e-14
  0.000000	  0.000000	diff=4.77543e-13
 -0.000000	  0.000000	diff=1.42732e-12
  0.000000	  0.000000	diff=1.46109e-13
 -0.000000	 -0.000000	diff=1.28919e-13
 -0.000000	 -0.000000	diff=2.41715e-13
  0.000000	 -0.000000	diff=1.97922e-14
  0.000000	 -0.000000	diff=1.60926e-13
  0.000000	  0.000000	diff=2.41144e-14
  0.000000	 -0.000000	diff=7.41652e-14
  0.000000	  0.000000	diff=6.77086e-16
  0.000000	 -0.000000	diff=2.06155e-13
 -0.000000	 -0.000000	diff=4.9808e-13
 -0.000000	 -0.000000	diff=6.91042e-13
  0.000000	  0.000000	diff=7.04789e-13
  0.000000	  0.000000	diff=3.35409e-13
 -0.000000	 -0.000000	diff=6.85827e-13
 -0.000000	 -0.000000	diff=3.74589e-13
  0.000000	  0.000000	diff=1.26553e-14
  0.000000	  0.000000	diff=1.40751e-12
 -0.000000	 -0.000000	diff=2.44967e-10
 -0.000000	 -0.000000	diff=1.99919e-11
  0.000000	  0.000000	diff=7.31175e-13
 -0.000000	 -0.000000	diff=6.4125e-13
 -0.000000	 -0.000000	diff=6.18569e-14
 -0.000000	 -0.000000	diff=2.48681e-13
 -0.000000	 -0.000000	diff=7.22681e-13
 -0.000000	 -0.000000	diff=6.26455e-14
  0.000000	  0.000000	diff=4.34196e-13
  0.000000	  0.000000	diff=5.96553e-12
  local_diff=1.21828e-06
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=7.20704e-13
  0.000000	  0.000000	diff=1.17091e-13
 -0.000000	 -0.000000	diff=9.31166e-14
  0.000000	  0.000000	diff=1.1814e-12
 -0.000000	 -0.000000	diff=6.3277e-13
  0.000000	  0.000000	diff=3.75491e-13
  0.000009	  0.000009	diff=1.95182e-12
  0.000008	  0.000008	diff=3.35118e-12
 -0.000000	 -0.000000	diff=6.1617e-13
 -0.000000	 -0.000000	diff=7.18319e-13
 -0.000000	 -0.000000	diff=5.01876e-14
  0.000000	  0.000000	diff=7.28511e-13
 -0.000000	 -0.000000	diff=4.31946e-13
  0.000000	  0.000000	diff=1.73528e-13
  0.000008	  0.000008	diff=2.92532e-11
  0.000010	  0.000010	diff=4.78901e-12
  0.000000	  0.000000	diff=2.31768e-14
  0.000000	  0.000000	diff=1.04836e-13
 -0.000000	 -0.000000	diff=6.75198e-14
  0.000000	  0.000000	diff=6.60993e-13
 -0.000000	 -0.000000	diff=7.03584e-14
  0.000000	  0.000000	diff=4.40147e-13
  0.000000	  0.000000	diff=4.51568e-10
  0.000000	  0.000000	diff=1.64711e-11
 -0.000000	 -0.000000	diff=7.48074e-13
 -0.000000	 -0.000000	diff=6.87405e-13
  0.000000	  0.000000	diff=3.27285e-14
 -0.000000	 -0.000000	diff=1.02709e-12
  0.000000	  0.000000	diff=2.11089e-14
 -0.000000	 -0.000000	diff=6.03761e-13
 -0.000000	 -0.000000	diff=2.64194e-12
 -0.000000	 -0.000000	diff=1.40234e-09
  local_diff=1.92269e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.20855e-10
  0.000001	  0.000001	diff=1.53674e-09
 -0.000001	 -0.000001	diff=3.50121e-10
  0.000001	  0.000001	diff=1.00544e-09
  local_diff=3.41315e-09
# W_emb_tgt, [2 5]
  0.000036	  0.000036	diff=4.03179e-07
  0.000003	  0.000003	diff=4.10744e-09
 -0.000003	 -0.000002	diff=8.1066e-07
  0.000002	  0.000002	diff=1.30155e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.1598e-10
  0.000006	  0.000006	diff=5.12756e-10
  0.000000	  0.000000	diff=3.00021e-10
  local_diff=1.22048e-06
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=6.92794e-13
  0.000000	 -0.000000	diff=4.70284e-14
  0.000000	  0.000000	diff=8.15848e-14
  0.000000	 -0.000000	diff=1.39845e-14
 -0.000000	 -0.000000	diff=3.20769e-13
  0.000000	 -0.000000	diff=4.75964e-14
  0.000000	  0.000000	diff=4.93606e-14
  0.000000	  0.000000	diff=5.2104e-13
  0.000000	  0.000000	diff=4.39868e-13
  0.000000	  0.000000	diff=9.53609e-14
 -0.000000	 -0.000000	diff=5.53941e-13
  0.000000	 -0.000000	diff=1.86812e-14
 -0.000000	  0.000000	diff=8.03201e-13
  0.000000	  0.000000	diff=5.51421e-14
 -0.000000	 -0.000000	diff=1.3652e-14
 -0.000000	 -0.000000	diff=1.01134e-12
  0.000000	  0.000000	diff=7.23241e-15
  0.000000	  0.000000	diff=1.97235e-15
  0.000000	 -0.000000	diff=3.98323e-15
  0.000000	 -0.000000	diff=3.87212e-16
  0.000000	  0.000000	diff=2.5537e-15
  0.000000	  0.000000	diff=1.30876e-15
  0.000000	  0.000000	diff=3.986e-13
  0.000000	  0.000000	diff=1.20924e-13
  0.000000	  0.000000	diff=3.55582e-16
  0.000000	  0.000000	diff=3.39319e-16
  0.000000	 -0.000000	diff=7.16258e-16
  0.000000	 -0.000000	diff=2.70058e-16
  0.000000	 -0.000000	diff=2.15954e-16
  0.000000	  0.000000	diff=1.3722e-16
  0.000000	  0.000000	diff=9.40094e-14
  0.000000	  0.000000	diff=2.42058e-13
  local_diff=5.6404e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=1.65734e-15
  0.000000	 -0.000000	diff=7.28516e-15
  0.000000	  0.000000	diff=6.72658e-16
  0.000000	  0.000000	diff=1.30142e-15
  0.000000	 -0.000000	diff=2.96473e-16
  0.000000	 -0.000000	diff=2.39517e-15
 -0.000000	 -0.000000	diff=4.75795e-13
 -0.000000	 -0.000000	diff=1.38413e-13
  0.000000	 -0.000000	diff=2.29937e-16
  0.000000	 -0.000000	diff=2.54838e-15
  0.000000	  0.000000	diff=3.66541e-16
  0.000000	  0.000000	diff=1.16306e-15
  0.000000	  0.000000	diff=1.69661e-16
  0.000000	 -0.000000	diff=3.53692e-16
 -0.000000	 -0.000000	diff=3.93542e-13
 -0.000000	 -0.000000	diff=2.24574e-13
  0.000000	 -0.000000	diff=7.42544e-18
  0.000000	 -0.000000	diff=8.1123e-17
  0.000000	  0.000000	diff=9.63073e-18
  0.000000	  0.000000	diff=2.14526e-17
  0.000000	  0.000000	diff=1.14395e-18
  0.000000	 -0.000000	diff=3.46751e-17
 -0.000000	 -0.000000	diff=5.65192e-13
 -0.000000	 -0.000000	diff=1.07929e-12
  0.000000	  0.000000	diff=1.21072e-18
  0.000000	 -0.000000	diff=1.00395e-16
  0.000000	  0.000000	diff=1.4166e-17
  0.000000	  0.000000	diff=8.29812e-17
  0.000000	  0.000000	diff=1.4962e-17
  0.000000	  0.000000	diff=1.46655e-18
  0.000000	  0.000000	diff=8.99426e-13
  0.000000	  0.000000	diff=1.75006e-13
  local_diff=3.97005e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.27289e-18
  0.000000	  0.000000	diff=2.17698e-17
  0.000000	 -0.000000	diff=2.53968e-18
  0.000000	  0.000000	diff=8.68317e-18
  0.000000	 -0.000000	diff=1.98244e-18
  0.000000	  0.000000	diff=5.77415e-18
 -0.000000	 -0.000000	diff=8.34687e-14
  0.000000	  0.000000	diff=9.19636e-13
  0.000000	 -0.000000	diff=6.74164e-18
  0.000000	  0.000000	diff=8.25621e-17
  0.000000	 -0.000000	diff=2.4139e-18
  0.000000	 -0.000000	diff=2.13353e-17
  0.000000	 -0.000000	diff=4.52028e-19
  0.000000	 -0.000000	diff=3.17268e-17
 -0.000000	 -0.000000	diff=3.02972e-13
  0.000000	  0.000000	diff=2.60905e-13
  0.000000	 -0.000000	diff=4.6738e-21
  0.000000	  0.000000	diff=6.09079e-19
  0.000000	 -0.000000	diff=7.12704e-20
  0.000000	  0.000000	diff=8.17463e-19
  0.000000	 -0.000000	diff=7.59285e-20
  0.000000	  0.000000	diff=1.40816e-18
 -0.000000	 -0.000000	diff=6.07552e-13
  0.000000	  0.000000	diff=3.05184e-14
  0.000000	  0.000000	diff=7.99614e-20
  0.000000	 -0.000000	diff=7.51899e-19
  0.000000	 -0.000000	diff=1.70939e-19
  0.000000	  0.000000	diff=1.72919e-18
  0.000000	 -0.000000	diff=1.52956e-19
  0.000000	  0.000000	diff=1.73487e-18
  0.000000	 -0.000000	diff=2.12442e-13
  0.000000	  0.000000	diff=8.78019e-13
  local_diff=3.29571e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.05801e-13
  0.000000	  0.000000	diff=3.73975e-13
 -0.000000	 -0.000000	diff=4.53207e-13
  0.000000	  0.000000	diff=1.86727e-13
 -0.000000	 -0.000000	diff=2.85288e-13
  0.000000	  0.000000	diff=1.74013e-13
 -0.000000	 -0.000000	diff=1.94213e-13
  0.000000	  0.000000	diff=4.19303e-13
  local_diff=2.19253e-12
# W_pos, [2 2]
  0.000000	  0.000000	diff=7.14269e-14
  0.000000	  0.000000	diff=7.12918e-14
  0.000000	 -0.000000	diff=5.63036e-13
  0.000000	 -0.000000	diff=5.61972e-13
  local_diff=1.26773e-12
# v_pos, [1 2]
  0.000000	 -0.000000	diff=1.41042e-13
  0.000000	  0.000000	diff=9.30789e-14
  local_diff=2.34121e-13
# W_h, [2 4]
 -0.000001	 -0.000001	diff=3.12543e-13
  0.000003	  0.000003	diff=2.35844e-14
  0.000002	  0.000002	diff=1.24416e-13
 -0.000003	 -0.000003	diff=1.2164e-13
 -0.000002	 -0.000002	diff=1.02474e-11
  0.000001	  0.000001	diff=1.17668e-11
 -0.000015	 -0.000015	diff=9.55335e-11
  0.000017	  0.000017	diff=6.06533e-11
  local_diff=1.78783e-10
# W_soft, [5 2]
 -0.000013	 -0.000013	diff=4.74161e-14
 -0.000001	 -0.000001	diff=6.30755e-14
  0.000015	  0.000015	diff=9.41348e-13
 -0.000000	 -0.000000	diff=7.58861e-13
 -0.000000	 -0.000000	diff=4.47078e-13
 -0.000006	 -0.000006	diff=6.50715e-13
  0.000003	  0.000003	diff=7.66744e-14
 -0.000005	 -0.000005	diff=2.16785e-13
  0.000004	  0.000004	diff=1.47273e-13
  0.000003	  0.000003	diff=3.47212e-13
  local_diff=3.69644e-12
# Num params=294, abs_diff=3.15445e-06
Elapsed time is 5.560558 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 304, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 2
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 304
  src input 1: <s> <s> y xy
  src mask: 0  0  1  1
  tgt input 1: <s> abc abc </s> </s>
  tgt output 1: abc abc </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.66492e-12
 -0.000000	 -0.000000	diff=2.58217e-13
 -0.000000	 -0.000000	diff=7.63209e-13
 -0.000000	 -0.000000	diff=6.64758e-13
  0.000000	  0.000000	diff=3.42884e-12
  0.000000	  0.000000	diff=1.24111e-12
 -0.000000	 -0.000000	diff=1.5879e-09
 -0.000001	 -0.000001	diff=8.0306e-10
 -0.000000	 -0.000000	diff=5.22746e-12
  0.000000	  0.000000	diff=2.79659e-12
 -0.000000	 -0.000000	diff=1.49695e-12
  0.000000	  0.000000	diff=7.90638e-13
  0.000000	  0.000000	diff=2.26841e-12
 -0.000000	 -0.000000	diff=1.62006e-12
  0.000002	  0.000002	diff=2.94702e-10
  0.000000	  0.000000	diff=4.13081e-10
  0.000000	  0.000000	diff=4.46677e-13
  0.000000	  0.000000	diff=9.91935e-13
  0.000000	  0.000000	diff=2.34565e-14
  0.000000	  0.000000	diff=1.136e-12
  0.000000	  0.000000	diff=1.05737e-12
  0.000000	 -0.000000	diff=1.92827e-12
 -0.000000	 -0.000000	diff=1.20435e-11
  0.000000	  0.000000	diff=1.21978e-11
 -0.000000	 -0.000000	diff=6.74178e-13
 -0.000000	 -0.000000	diff=7.50988e-13
 -0.000000	 -0.000000	diff=1.82855e-13
 -0.000000	 -0.000000	diff=9.80739e-14
 -0.000000	 -0.000000	diff=9.97581e-13
  0.000000	 -0.000000	diff=5.96744e-13
  0.000000	  0.000000	diff=1.75092e-12
 -0.000000	 -0.000000	diff=9.31927e-12
  local_diff=3.16516e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.80387e-12
 -0.000000	 -0.000000	diff=1.45782e-12
  0.000000	  0.000000	diff=9.55601e-13
 -0.000000	 -0.000000	diff=2.51593e-12
 -0.000000	 -0.000000	diff=1.66832e-12
 -0.000000	 -0.000000	diff=1.34539e-12
 -0.000001	 -0.000001	diff=1.80596e-10
 -0.000002	 -0.000002	diff=4.67231e-10
 -0.000000	 -0.000000	diff=1.21594e-12
  0.000000	  0.000000	diff=4.45737e-13
 -0.000000	 -0.000000	diff=1.17128e-12
  0.000000	  0.000000	diff=2.7446e-13
  0.000000	  0.000000	diff=1.49689e-12
  0.000000	  0.000000	diff=7.09975e-13
 -0.000000	 -0.000000	diff=8.85605e-11
  0.000001	  0.000001	diff=1.02894e-10
  0.000000	  0.000000	diff=1.49059e-13
  0.000000	 -0.000000	diff=9.66433e-13
  0.000000	  0.000000	diff=1.66231e-12
  0.000000	 -0.000000	diff=1.28278e-13
  0.000000	 -0.000000	diff=4.96228e-13
  0.000000	 -0.000000	diff=1.95046e-13
 -0.000000	 -0.000000	diff=6.26053e-11
 -0.000000	 -0.000000	diff=1.01656e-11
 -0.000000	 -0.000000	diff=3.85643e-13
  0.000000	  0.000000	diff=1.1595e-12
  0.000000	 -0.000000	diff=1.40018e-12
  0.000000	  0.000000	diff=2.69581e-12
  0.000000	  0.000000	diff=5.80417e-13
  0.000000	  0.000000	diff=2.60396e-12
  0.000000	  0.000000	diff=8.17958e-12
  0.000000	  0.000000	diff=3.9246e-11
  local_diff=9.87963e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.89407e-12
  0.000000	  0.000000	diff=8.57966e-12
  0.000000	  0.000000	diff=1.69109e-13
 -0.000000	 -0.000000	diff=1.33089e-12
  0.000000	  0.000000	diff=6.01086e-13
  0.000000	  0.000000	diff=3.75042e-12
 -0.000002	 -0.000002	diff=6.71164e-10
  0.000004	  0.000004	diff=1.84589e-09
 -0.000000	 -0.000000	diff=2.1704e-12
 -0.000000	 -0.000000	diff=1.08714e-11
 -0.000000	 -0.000000	diff=1.34805e-12
  0.000000	  0.000000	diff=6.48381e-13
 -0.000000	 -0.000000	diff=4.1959e-13
 -0.000000	 -0.000000	diff=7.96388e-12
  0.000006	  0.000006	diff=1.52238e-09
  0.000001	  0.000001	diff=4.41599e-09
  0.000000	 -0.000000	diff=1.09317e-13
  0.000000	 -0.000000	diff=2.61303e-13
  0.000000	  0.000000	diff=2.72347e-14
  0.000000	  0.000000	diff=3.11282e-13
  0.000000	 -0.000000	diff=4.66193e-14
  0.000000	 -0.000000	diff=4.03416e-15
 -0.000000	 -0.000000	diff=9.79573e-13
 -0.000000	 -0.000000	diff=2.78949e-12
  0.000000	 -0.000000	diff=5.62354e-15
  0.000000	 -0.000000	diff=2.63059e-14
  0.000000	  0.000000	diff=2.84947e-14
  0.000000	 -0.000000	diff=6.73971e-14
  0.000000	  0.000000	diff=1.86364e-14
  0.000000	 -0.000000	diff=6.84201e-14
 -0.000000	 -0.000000	diff=1.70462e-12
 -0.000000	 -0.000000	diff=1.62922e-13
 -0.000000	 -0.000000	diff=1.91463e-12
 -0.000000	 -0.000000	diff=3.52627e-13
 -0.000000	 -0.000000	diff=6.53419e-13
  0.000000	  0.000000	diff=8.71844e-13
 -0.000000	 -0.000000	diff=4.17351e-13
 -0.000000	 -0.000000	diff=1.65741e-12
  0.000000	  0.000000	diff=5.67282e-11
  0.000000	  0.000000	diff=3.12567e-11
  0.000000	  0.000000	diff=4.96552e-13
  0.000000	  0.000000	diff=6.91145e-13
  0.000000	  0.000000	diff=4.72351e-13
 -0.000000	 -0.000000	diff=1.91967e-12
  0.000000	  0.000000	diff=1.01601e-12
 -0.000000	 -0.000000	diff=2.75662e-12
  0.000000	  0.000000	diff=2.91009e-11
  0.000000	  0.000000	diff=8.48359e-10
  local_diff=9.48044e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.41841e-12
 -0.000000	 -0.000000	diff=2.44291e-12
  0.000000	  0.000000	diff=7.09758e-13
 -0.000000	 -0.000000	diff=3.34842e-13
  0.000000	  0.000000	diff=1.5605e-12
 -0.000000	 -0.000000	diff=5.52637e-15
 -0.000001	 -0.000001	diff=1.66581e-10
  0.000003	  0.000003	diff=2.87969e-10
 -0.000000	 -0.000000	diff=6.69104e-13
 -0.000000	 -0.000000	diff=3.24174e-12
  0.000000	  0.000000	diff=1.2119e-13
  0.000000	  0.000000	diff=5.99191e-13
 -0.000000	 -0.000000	diff=1.27571e-12
 -0.000000	 -0.000000	diff=5.64124e-14
 -0.000003	 -0.000003	diff=1.50026e-09
  0.000004	  0.000004	diff=2.24229e-09
 -0.000000	 -0.000000	diff=1.45554e-12
  0.000000	  0.000000	diff=6.54658e-13
  0.000000	  0.000000	diff=1.06868e-12
 -0.000000	 -0.000000	diff=2.63973e-14
  0.000000	  0.000000	diff=3.31818e-12
  0.000000	 -0.000000	diff=1.84665e-12
 -0.000000	 -0.000000	diff=2.09331e-11
 -0.000000	 -0.000000	diff=1.24523e-11
  0.000000	  0.000000	diff=1.5857e-12
  0.000000	 -0.000000	diff=1.13718e-12
 -0.000000	 -0.000000	diff=3.00838e-13
  0.000000	  0.000000	diff=2.85568e-13
 -0.000000	 -0.000000	diff=9.21978e-13
  0.000000	  0.000000	diff=1.04045e-12
  0.000000	  0.000000	diff=6.60246e-11
  0.000000	  0.000000	diff=8.01253e-10
  local_diff=5.12385e-09
# W_emb_src, [2 5]
 -0.000001	 -0.000001	diff=7.73887e-10
  0.000002	  0.000002	diff=1.48961e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=3.17494e-10
 -0.000001	 -0.000001	diff=4.97632e-10
 -0.000000	 -0.000000	diff=5.50183e-10
  0.000001	  0.000001	diff=6.14141e-11
  local_diff=3.69022e-09
# W_emb_tgt, [2 5]
  0.000027	  0.000027	diff=7.76897e-08
  0.000002	  0.000002	diff=1.67493e-09
  0.000011	  0.000011	diff=8.6075e-10
  0.000002	  0.000002	diff=8.6226e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=1.52704e-09
  0.000000	  0.000000	diff=2.37896e-10
  0.000004	  0.000004	diff=3.61924e-10
  0.000001	  0.000001	diff=3.29863e-10
  local_diff=8.35443e-08
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=4.77576e-13
  0.000000	  0.000000	diff=1.00046e-12
  0.000000	  0.000000	diff=1.97845e-12
 -0.000000	 -0.000000	diff=1.41469e-13
 -0.000000	 -0.000000	diff=1.62909e-12
  0.000000	  0.000000	diff=5.75275e-14
 -0.000023	 -0.000023	diff=2.87852e-11
 -0.000020	 -0.000020	diff=2.93869e-10
 -0.000000	 -0.000000	diff=2.88624e-13
  0.000000	  0.000000	diff=2.21824e-12
 -0.000000	 -0.000000	diff=1.04282e-12
  0.000000	  0.000000	diff=9.35525e-13
 -0.000000	 -0.000000	diff=1.50611e-13
  0.000000	  0.000000	diff=1.66961e-13
 -0.000019	 -0.000019	diff=1.04987e-11
 -0.000016	 -0.000016	diff=2.92719e-11
  0.000000	  0.000000	diff=1.08607e-12
  0.000000	  0.000000	diff=1.75816e-12
 -0.000000	 -0.000000	diff=1.6866e-12
  0.000000	  0.000000	diff=2.03012e-13
  0.000000	  0.000000	diff=1.47459e-12
  0.000000	  0.000000	diff=3.41809e-12
 -0.000000	 -0.000000	diff=7.6646e-11
 -0.000000	 -0.000000	diff=6.54884e-13
 -0.000000	 -0.000000	diff=2.47711e-12
 -0.000000	 -0.000000	diff=1.99214e-12
  0.000000	  0.000000	diff=4.55358e-13
 -0.000000	 -0.000000	diff=6.73645e-13
 -0.000000	 -0.000000	diff=1.11606e-12
 -0.000000	 -0.000000	diff=2.0853e-12
  0.000000	  0.000000	diff=4.55315e-13
  0.000000	  0.000000	diff=2.10295e-11
  local_diff=4.89724e-10
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=7.36426e-13
 -0.000000	 -0.000000	diff=2.74003e-13
  0.000000	  0.000000	diff=5.63629e-13
  0.000000	  0.000000	diff=3.66076e-13
 -0.000000	 -0.000000	diff=1.446e-12
 -0.000000	 -0.000000	diff=1.2e-12
  0.000001	  0.000001	diff=8.36166e-13
  0.000004	  0.000004	diff=1.37863e-12
  0.000000	  0.000000	diff=9.49867e-13
 -0.000000	 -0.000000	diff=4.48921e-13
  0.000000	  0.000000	diff=1.73587e-12
  0.000000	  0.000000	diff=3.00758e-12
  0.000000	  0.000000	diff=2.21599e-13
 -0.000000	 -0.000000	diff=2.6251e-14
 -0.000002	 -0.000002	diff=7.50172e-13
 -0.000007	 -0.000007	diff=1.28379e-12
  0.000000	 -0.000000	diff=2.90655e-13
 -0.000000	 -0.000000	diff=7.95518e-15
  0.000000	  0.000000	diff=6.27994e-13
  0.000000	  0.000000	diff=4.04257e-12
  0.000000	  0.000000	diff=2.19634e-13
 -0.000000	 -0.000000	diff=1.53554e-12
 -0.000000	 -0.000000	diff=1.72703e-11
 -0.000000	 -0.000000	diff=1.7223e-12
  0.000000	 -0.000000	diff=2.24564e-13
 -0.000000	 -0.000000	diff=1.20561e-12
  0.000000	  0.000000	diff=4.25637e-13
  0.000000	  0.000000	diff=1.11612e-12
  0.000000	  0.000000	diff=1.25455e-13
 -0.000000	 -0.000000	diff=2.9973e-13
 -0.000000	 -0.000000	diff=1.6781e-12
 -0.000000	 -0.000000	diff=3.66071e-11
  local_diff=8.26243e-11
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=1.58595e-13
  0.000000	  0.000000	diff=1.86022e-12
  0.000000	 -0.000000	diff=2.10445e-14
  0.000000	  0.000000	diff=4.64456e-13
  0.000000	  0.000000	diff=1.76112e-13
  0.000000	  0.000000	diff=2.77446e-14
 -0.000002	 -0.000002	diff=9.13556e-13
 -0.000006	 -0.000006	diff=1.27498e-12
  0.000000	  0.000000	diff=1.74646e-12
  0.000000	  0.000000	diff=1.41885e-12
  0.000000	  0.000000	diff=1.62969e-14
  0.000000	 -0.000000	diff=2.72033e-12
  0.000000	  0.000000	diff=1.78797e-12
  0.000000	  0.000000	diff=5.00547e-14
  0.000000	  0.000000	diff=3.56916e-13
  0.000004	  0.000004	diff=1.50036e-13
  0.000000	  0.000000	diff=7.24731e-16
  0.000000	  0.000000	diff=3.09457e-15
  0.000000	  0.000000	diff=4.8441e-17
  0.000000	 -0.000000	diff=2.43333e-15
  0.000000	  0.000000	diff=7.70338e-16
  0.000000	  0.000000	diff=1.48323e-15
  0.000000	  0.000000	diff=9.41958e-13
  0.000000	  0.000000	diff=1.18599e-12
  0.000000	 -0.000000	diff=1.81769e-14
  0.000000	 -0.000000	diff=1.03018e-13
  0.000000	 -0.000000	diff=8.76807e-16
  0.000000	  0.000000	diff=5.94186e-14
  0.000000	 -0.000000	diff=1.901e-14
  0.000000	 -0.000000	diff=5.72878e-14
 -0.000000	 -0.000000	diff=1.07911e-12
 -0.000000	 -0.000000	diff=5.5975e-11
  local_diff=7.2592e-11
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000024	 -0.000024	diff=2.30052e-09
  0.000033	  0.000033	diff=4.96498e-09
 -0.000008	 -0.000008	diff=8.70093e-10
  0.000011	  0.000011	diff=1.8384e-09
 -0.000008	 -0.000008	diff=1.13475e-09
  0.000011	  0.000011	diff=1.89701e-09
  local_diff=1.30058e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=1.06654e-13
  0.000000	  0.000000	diff=1.06452e-13
  0.000000	 -0.000000	diff=2.54978e-13
  0.000000	 -0.000000	diff=2.54496e-13
  local_diff=7.2258e-13
# v_pos, [1 2]
  0.000000	 -0.000000	diff=1.70743e-13
  0.000000	  0.000000	diff=1.79533e-13
  local_diff=3.50276e-13
# W_h, [2 4]
 -0.000002	 -0.000002	diff=4.62685e-11
 -0.000003	 -0.000003	diff=6.30327e-11
  0.000002	  0.000002	diff=4.85223e-11
  0.000004	  0.000004	diff=6.5266e-11
 -0.000003	 -0.000003	diff=8.18129e-12
  0.000003	  0.000003	diff=1.56124e-11
 -0.000001	 -0.000001	diff=2.17507e-10
  0.000020	  0.000020	diff=2.46386e-10
  local_diff=7.10776e-10
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=2.73905e-13
  0.000004	  0.000004	diff=3.00309e-12
  0.000012	  0.000012	diff=4.85543e-13
 -0.000001	 -0.000001	diff=1.38932e-13
 -0.000001	 -0.000001	diff=8.82147e-14
 -0.000002	 -0.000002	diff=4.18279e-13
  0.000001	  0.000001	diff=1.20572e-12
 -0.000000	 -0.000000	diff=4.44623e-13
 -0.000001	 -0.000001	diff=1.8165e-13
  0.000001	  0.000001	diff=1.84444e-12
  local_diff=8.0844e-12
# W_soft_char, [5 2]
  0.000001	  0.000001	diff=3.24039e-12
 -0.000004	 -0.000004	diff=8.63007e-13
  0.000001	  0.000001	diff=4.65465e-12
  0.000001	  0.000001	diff=2.37264e-12
  0.000001	  0.000001	diff=3.08017e-12
 -0.000000	 -0.000000	diff=3.76069e-13
 -0.000007	 -0.000007	diff=1.63327e-12
 -0.000000	 -0.000000	diff=2.48681e-12
  0.000002	  0.000002	diff=1.91891e-12
  0.000005	  0.000005	diff=3.06351e-13
  local_diff=2.09323e-11
# Num params=304, abs_diff=1.20384e-07
Elapsed time is 6.131053 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 410, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 3
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 410
  src input 1: <s> xyz xy z
  src mask: 0  1  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.6928e-12
 -0.000000	 -0.000000	diff=2.06222e-12
  0.000000	  0.000000	diff=3.08935e-13
 -0.000000	 -0.000000	diff=4.15967e-13
 -0.000000	 -0.000000	diff=2.72336e-12
  0.000000	  0.000000	diff=8.30417e-14
 -0.000000	 -0.000000	diff=3.03414e-13
 -0.000000	 -0.000000	diff=3.7483e-11
 -0.000000	 -0.000000	diff=1.83675e-12
  0.000000	  0.000000	diff=1.17499e-13
 -0.000000	 -0.000000	diff=6.67732e-13
  0.000000	  0.000000	diff=9.63138e-13
  0.000000	  0.000000	diff=2.77175e-13
 -0.000000	 -0.000000	diff=1.89692e-12
  0.000001	  0.000001	diff=6.58781e-12
  0.000000	  0.000000	diff=6.9241e-11
 -0.000000	 -0.000000	diff=2.84976e-12
  0.000000	  0.000000	diff=3.19172e-13
 -0.000000	 -0.000000	diff=2.9024e-12
  0.000000	  0.000000	diff=2.63869e-12
 -0.000000	 -0.000000	diff=2.04542e-12
 -0.000000	 -0.000000	diff=2.47127e-12
  0.000000	  0.000000	diff=6.12573e-11
  0.000000	  0.000000	diff=4.02499e-12
  0.000000	  0.000000	diff=1.21553e-12
 -0.000000	 -0.000000	diff=2.18234e-12
  0.000000	  0.000000	diff=4.28735e-13
 -0.000000	 -0.000000	diff=1.42018e-12
  0.000000	  0.000000	diff=2.69995e-12
  0.000000	  0.000000	diff=1.83599e-12
 -0.000000	 -0.000000	diff=2.92987e-12
 -0.000000	 -0.000000	diff=5.25964e-11
  local_diff=2.70479e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=4.59513e-13
 -0.000000	 -0.000000	diff=2.72152e-13
 -0.000000	 -0.000000	diff=3.48292e-12
 -0.000000	 -0.000000	diff=3.31007e-13
  0.000000	  0.000000	diff=2.83394e-12
 -0.000000	 -0.000000	diff=2.14723e-12
 -0.000000	 -0.000000	diff=1.27953e-10
 -0.000002	 -0.000002	diff=7.90886e-11
 -0.000000	 -0.000000	diff=8.08461e-13
  0.000000	  0.000000	diff=2.54396e-12
  0.000000	  0.000000	diff=2.04751e-12
  0.000000	  0.000000	diff=2.19634e-12
 -0.000000	 -0.000000	diff=1.77577e-12
  0.000000	  0.000000	diff=1.52722e-12
  0.000000	  0.000000	diff=1.01885e-10
  0.000001	  0.000001	diff=6.54321e-11
  0.000000	 -0.000000	diff=1.3727e-12
 -0.000000	 -0.000000	diff=1.28702e-12
 -0.000000	 -0.000000	diff=1.29439e-12
 -0.000000	 -0.000000	diff=8.72677e-13
  0.000000	  0.000000	diff=3.1647e-12
  0.000000	 -0.000000	diff=9.06593e-13
  0.000000	  0.000000	diff=6.5745e-11
 -0.000000	 -0.000000	diff=1.75008e-12
  0.000000	  0.000000	diff=1.15531e-12
  0.000000	  0.000000	diff=6.88765e-13
  0.000000	  0.000000	diff=6.64164e-13
  0.000000	  0.000000	diff=1.4898e-13
  0.000000	 -0.000000	diff=3.03288e-12
  0.000000	  0.000000	diff=1.7555e-12
 -0.000000	 -0.000000	diff=1.57446e-12
  0.000000	  0.000000	diff=8.92143e-11
  local_diff=5.69413e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=8.23467e-14
  0.000000	  0.000000	diff=1.42695e-12
 -0.000000	 -0.000000	diff=3.33555e-12
 -0.000000	 -0.000000	diff=7.87643e-13
 -0.000000	 -0.000000	diff=2.20014e-12
  0.000000	  0.000000	diff=7.44096e-14
 -0.000001	 -0.000001	diff=1.52855e-10
  0.000000	  0.000000	diff=3.06249e-10
  0.000000	  0.000000	diff=4.53883e-14
 -0.000000	 -0.000000	diff=1.94345e-12
  0.000000	  0.000000	diff=2.24354e-12
  0.000000	  0.000000	diff=5.82079e-13
  0.000000	  0.000000	diff=2.3203e-12
 -0.000000	 -0.000000	diff=2.91657e-13
 -0.000003	 -0.000003	diff=1.63975e-10
  0.000005	  0.000005	diff=4.74842e-10
  0.000000	  0.000000	diff=1.10181e-13
  0.000000	 -0.000000	diff=1.92119e-13
  0.000000	 -0.000000	diff=1.01354e-13
  0.000000	  0.000000	diff=1.53192e-13
  0.000000	  0.000000	diff=1.65849e-15
  0.000000	 -0.000000	diff=2.14647e-14
  0.000000	  0.000000	diff=1.22235e-12
 -0.000000	 -0.000000	diff=3.23917e-12
  0.000000	 -0.000000	diff=1.99055e-13
  0.000000	  0.000000	diff=3.52801e-13
  0.000000	  0.000000	diff=1.4688e-13
  0.000000	 -0.000000	diff=8.29169e-14
  0.000000	 -0.000000	diff=4.50079e-14
  0.000000	  0.000000	diff=2.00652e-13
 -0.000000	 -0.000000	diff=1.08992e-12
  0.000000	  0.000000	diff=2.00369e-13
  0.000000	  0.000000	diff=2.73568e-12
 -0.000000	 -0.000000	diff=2.32296e-12
  0.000000	  0.000000	diff=8.95086e-13
 -0.000000	 -0.000000	diff=4.23986e-12
  0.000000	  0.000000	diff=2.31263e-12
 -0.000000	 -0.000000	diff=2.45912e-12
 -0.000000	 -0.000000	diff=2.50156e-10
  0.000000	  0.000000	diff=1.47959e-12
 -0.000000	 -0.000000	diff=1.96828e-12
  0.000000	  0.000000	diff=5.37712e-13
  0.000000	  0.000000	diff=2.8324e-12
 -0.000000	 -0.000000	diff=3.20901e-12
 -0.000000	 -0.000000	diff=2.21488e-12
 -0.000000	 -0.000000	diff=1.43078e-13
 -0.000000	 -0.000000	diff=8.92675e-13
  0.000000	  0.000000	diff=1.39546e-10
  local_diff=1.53856e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=7.58286e-13
 -0.000000	 -0.000000	diff=5.97818e-13
 -0.000000	 -0.000000	diff=3.59946e-12
 -0.000000	 -0.000000	diff=2.35311e-12
  0.000000	  0.000000	diff=6.39449e-13
 -0.000000	 -0.000000	diff=5.09391e-13
 -0.000002	 -0.000002	diff=1.80981e-10
  0.000001	  0.000001	diff=1.39793e-10
  0.000000	  0.000000	diff=2.25471e-12
 -0.000000	 -0.000000	diff=3.9943e-12
 -0.000000	 -0.000000	diff=5.10169e-13
 -0.000000	 -0.000000	diff=3.09943e-12
  0.000000	  0.000000	diff=2.44166e-12
 -0.000000	 -0.000000	diff=2.82677e-12
 -0.000002	 -0.000002	diff=1.69504e-10
  0.000001	  0.000001	diff=1.649e-10
  0.000000	  0.000000	diff=1.44127e-12
  0.000000	 -0.000000	diff=4.44487e-13
 -0.000000	 -0.000000	diff=4.27714e-13
 -0.000000	 -0.000000	diff=1.66727e-13
  0.000000	 -0.000000	diff=2.19547e-12
  0.000000	 -0.000000	diff=1.84838e-12
  0.000000	  0.000000	diff=4.63439e-10
 -0.000000	 -0.000000	diff=2.36735e-12
  0.000000	 -0.000000	diff=1.66387e-12
  0.000000	  0.000000	diff=1.34423e-12
  0.000000	  0.000000	diff=1.32183e-12
  0.000000	  0.000000	diff=3.41864e-13
  0.000000	  0.000000	diff=3.4153e-12
  0.000000	  0.000000	diff=2.06369e-12
 -0.000000	 -0.000000	diff=1.81913e-11
  0.000000	  0.000000	diff=8.69268e-10
  local_diff=2.0487e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=2.68792e-10
  0.000002	  0.000002	diff=1.03702e-09
  0.000001	  0.000001	diff=4.83531e-10
 -0.000002	 -0.000002	diff=1.01504e-09
  local_diff=2.80438e-09
# W_emb_tgt, [2 5]
  0.000003	  0.000003	diff=8.63652e-09
 -0.000005	 -0.000005	diff=3.53935e-09
  0.000002	  0.000002	diff=3.57272e-09
 -0.000002	 -0.000002	diff=9.97588e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=2.05987e-09
 -0.000001	 -0.000001	diff=7.58425e-10
  0.000001	  0.000001	diff=1.57779e-09
 -0.000001	 -0.000001	diff=5.56059e-10
  local_diff=2.16983e-08
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=3.45706e-13
  0.000000	 -0.000000	diff=5.79633e-15
  0.000000	  0.000000	diff=3.83336e-14
  0.000000	 -0.000000	diff=3.4134e-15
  0.000000	 -0.000000	diff=1.74249e-13
  0.000000	 -0.000000	diff=9.37362e-15
 -0.000000	 -0.000000	diff=9.6036e-14
 -0.000000	 -0.000000	diff=2.25239e-12
  0.000000	  0.000000	diff=8.71191e-14
  0.000000	  0.000000	diff=3.95869e-14
  0.000000	 -0.000000	diff=4.2785e-14
  0.000000	 -0.000000	diff=6.17428e-15
  0.000000	  0.000000	diff=5.90454e-14
  0.000000	  0.000000	diff=2.57511e-14
 -0.000000	 -0.000000	diff=1.71009e-12
 -0.000000	 -0.000000	diff=2.16183e-12
  0.000000	  0.000000	diff=2.49422e-15
  0.000000	  0.000000	diff=4.58956e-16
  0.000000	 -0.000000	diff=1.75389e-15
  0.000000	 -0.000000	diff=6.97328e-17
  0.000000	  0.000000	diff=5.19617e-16
  0.000000	  0.000000	diff=3.09784e-16
  0.000000	 -0.000000	diff=5.6023e-13
  0.000000	 -0.000000	diff=1.47269e-13
  0.000000	  0.000000	diff=6.51731e-17
  0.000000	  0.000000	diff=1.15474e-16
  0.000000	 -0.000000	diff=9.75056e-17
  0.000000	 -0.000000	diff=8.52865e-17
  0.000000	  0.000000	diff=1.18115e-17
  0.000000	  0.000000	diff=4.93352e-17
  0.000000	  0.000000	diff=2.31103e-12
  0.000000	  0.000000	diff=2.12609e-13
  local_diff=1.02948e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=8.39542e-16
  0.000000	 -0.000000	diff=2.90077e-15
  0.000000	  0.000000	diff=6.98778e-17
  0.000000	  0.000000	diff=1.69445e-16
  0.000000	 -0.000000	diff=4.36939e-16
  0.000000	 -0.000000	diff=1.70004e-15
  0.000000	  0.000000	diff=3.85854e-12
  0.000000	  0.000000	diff=5.37748e-13
  0.000000	 -0.000000	diff=5.01547e-17
  0.000000	 -0.000000	diff=1.06121e-15
  0.000000	  0.000000	diff=5.27858e-17
  0.000000	  0.000000	diff=2.25558e-16
  0.000000	 -0.000000	diff=7.78343e-17
  0.000000	 -0.000000	diff=6.14702e-16
  0.000000	 -0.000000	diff=2.44207e-12
  0.000000	 -0.000000	diff=3.2087e-12
  0.000000	 -0.000000	diff=1.00224e-19
  0.000000	 -0.000000	diff=8.18687e-18
  0.000000	  0.000000	diff=6.99757e-18
  0.000000	  0.000000	diff=8.21331e-18
  0.000000	  0.000000	diff=4.66725e-18
  0.000000	  0.000000	diff=5.44943e-18
  0.000000	 -0.000000	diff=4.5295e-13
  0.000000	 -0.000000	diff=5.24578e-13
  0.000000	  0.000000	diff=1.08681e-18
  0.000000	 -0.000000	diff=1.59553e-17
  0.000000	  0.000000	diff=5.19276e-18
  0.000000	  0.000000	diff=2.2698e-17
  0.000000	  0.000000	diff=4.91301e-18
  0.000000	  0.000000	diff=1.09724e-17
  0.000000	 -0.000000	diff=2.85327e-12
  0.000000	  0.000000	diff=2.76542e-12
  local_diff=1.66516e-11
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.36608e-18
  0.000000	  0.000000	diff=2.6046e-17
  0.000000	  0.000000	diff=1.82854e-19
  0.000000	  0.000000	diff=6.55044e-18
  0.000000	 -0.000000	diff=2.67567e-18
  0.000000	  0.000000	diff=2.24405e-17
  0.000000	  0.000000	diff=1.4463e-12
 -0.000000	 -0.000000	diff=3.91462e-12
  0.000000	 -0.000000	diff=1.09976e-17
  0.000000	  0.000000	diff=7.52193e-17
  0.000000	 -0.000000	diff=3.56357e-19
  0.000000	  0.000000	diff=9.78293e-18
  0.000000	 -0.000000	diff=8.25783e-18
  0.000000	  0.000000	diff=6.38774e-17
  0.000000	  0.000000	diff=8.44727e-13
 -0.000000	 -0.000000	diff=8.23532e-13
  0.000000	 -0.000000	diff=9.72267e-21
  0.000000	  0.000000	diff=8.89222e-20
  0.000000	 -0.000000	diff=3.95529e-20
  0.000000	  0.000000	diff=1.44293e-19
  0.000000	 -0.000000	diff=4.66853e-20
  0.000000	  0.000000	diff=2.34173e-19
  0.000000	 -0.000000	diff=1.05148e-13
  0.000000	  0.000000	diff=3.19647e-13
  0.000000	 -0.000000	diff=5.98325e-20
  0.000000	  0.000000	diff=4.9993e-19
  0.000000	 -0.000000	diff=2.99923e-20
  0.000000	  0.000000	diff=4.79397e-19
  0.000000	 -0.000000	diff=1.47484e-19
  0.000000	  0.000000	diff=1.05796e-18
  0.000000	  0.000000	diff=2.08333e-13
  0.000000	 -0.000000	diff=2.48693e-13
  local_diff=7.91123e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=4.80439e-13
  0.000000	  0.000000	diff=2.00848e-12
 -0.000000	 -0.000000	diff=1.53426e-12
  0.000000	  0.000000	diff=2.64218e-12
 -0.000000	 -0.000000	diff=2.20798e-12
  0.000000	  0.000000	diff=3.07318e-12
 -0.000000	 -0.000000	diff=2.71133e-12
  0.000000	  0.000000	diff=2.2693e-12
  local_diff=1.69271e-11
# W_tgt_char{1}, [8 4]
  0.000000	  0.000000	diff=1.39875e-12
 -0.000000	 -0.000000	diff=4.42652e-13
  0.000000	  0.000000	diff=8.68929e-13
 -0.000000	 -0.000000	diff=1.71176e-13
  0.000000	  0.000000	diff=1.14544e-12
 -0.000000	 -0.000000	diff=3.40063e-12
  0.000016	  0.000016	diff=8.78338e-11
  0.000008	  0.000008	diff=7.46032e-11
 -0.000000	 -0.000000	diff=1.86479e-12
  0.000000	  0.000000	diff=1.5572e-12
 -0.000000	 -0.000000	diff=2.13239e-12
  0.000000	  0.000000	diff=3.10467e-13
 -0.000000	 -0.000000	diff=5.78025e-13
  0.000000	  0.000000	diff=1.40578e-12
 -0.000016	 -0.000016	diff=2.78595e-10
 -0.000008	 -0.000008	diff=3.10917e-10
  0.000000	  0.000000	diff=5.16395e-14
 -0.000000	 -0.000000	diff=2.9531e-13
  0.000000	  0.000000	diff=1.73343e-12
 -0.000000	 -0.000000	diff=2.75071e-12
  0.000000	  0.000000	diff=1.80181e-12
 -0.000000	 -0.000000	diff=3.17779e-14
  0.000000	  0.000000	diff=1.97048e-12
  0.000000	  0.000000	diff=1.44182e-12
 -0.000000	 -0.000000	diff=1.48721e-12
  0.000000	  0.000000	diff=1.26819e-13
 -0.000000	 -0.000000	diff=2.19097e-13
  0.000000	  0.000000	diff=2.42861e-12
 -0.000000	 -0.000000	diff=1.05493e-12
  0.000000	  0.000000	diff=2.72839e-12
 -0.000000	 -0.000000	diff=4.21943e-13
 -0.000000	 -0.000000	diff=3.08686e-13
  local_diff=7.86078e-10
# W_tgt_char{2}, [8 4]
  0.000000	  0.000000	diff=4.39516e-13
 -0.000000	 -0.000000	diff=2.78803e-12
  0.000000	  0.000000	diff=2.86851e-13
 -0.000000	 -0.000000	diff=5.29069e-13
  0.000000	  0.000000	diff=2.15961e-12
 -0.000000	 -0.000000	diff=6.99013e-13
  0.000005	  0.000005	diff=5.94647e-13
  0.000006	  0.000006	diff=1.45421e-12
 -0.000000	 -0.000000	diff=2.34691e-12
  0.000000	  0.000000	diff=6.22877e-13
 -0.000000	 -0.000000	diff=5.38027e-13
  0.000000	  0.000000	diff=7.73191e-13
 -0.000000	 -0.000000	diff=2.32093e-13
  0.000000	  0.000000	diff=4.41671e-13
 -0.000012	 -0.000012	diff=2.09383e-12
 -0.000013	 -0.000013	diff=3.78477e-13
  0.000000	  0.000000	diff=1.61185e-12
  0.000000	 -0.000000	diff=1.93947e-12
  0.000000	  0.000000	diff=3.00675e-13
  0.000000	 -0.000000	diff=2.64071e-13
  0.000000	  0.000000	diff=9.29397e-13
  0.000000	 -0.000000	diff=2.20374e-12
  0.000000	  0.000000	diff=1.15219e-12
  0.000000	  0.000000	diff=1.88797e-12
  0.000000	 -0.000000	diff=1.25273e-12
  0.000000	  0.000000	diff=1.50751e-12
  0.000000	 -0.000000	diff=2.33742e-13
  0.000000	  0.000000	diff=2.05287e-13
  0.000000	 -0.000000	diff=1.48678e-12
  0.000000	  0.000000	diff=1.71305e-12
 -0.000000	 -0.000000	diff=2.95665e-13
 -0.000000	 -0.000000	diff=7.07543e-13
  local_diff=3.40697e-11
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=8.55031e-14
 -0.000000	 -0.000000	diff=3.28231e-13
  0.000000	  0.000000	diff=3.04003e-13
  0.000000	 -0.000000	diff=1.87389e-13
  0.000000	  0.000000	diff=2.93949e-13
 -0.000000	 -0.000000	diff=2.38545e-12
 -0.000009	 -0.000009	diff=2.82709e-12
 -0.000007	 -0.000007	diff=2.67802e-13
  0.000000	  0.000000	diff=1.13206e-12
  0.000000	  0.000000	diff=9.53217e-13
  0.000000	 -0.000000	diff=3.0993e-13
  0.000000	  0.000000	diff=1.91109e-13
  0.000000	  0.000000	diff=8.9642e-13
  0.000000	  0.000000	diff=8.0789e-13
  0.000010	  0.000010	diff=2.86603e-13
  0.000008	  0.000008	diff=5.46531e-13
  0.000000	 -0.000000	diff=1.71166e-15
  0.000000	  0.000000	diff=3.40122e-15
  0.000000	 -0.000000	diff=5.5495e-16
  0.000000	  0.000000	diff=3.42144e-16
  0.000000	 -0.000000	diff=2.26644e-15
  0.000000	  0.000000	diff=3.74328e-15
  0.000000	  0.000000	diff=2.32e-12
  0.000000	  0.000000	diff=4.68662e-13
  0.000000	  0.000000	diff=1.33979e-15
  0.000000	 -0.000000	diff=2.6688e-15
  0.000000	  0.000000	diff=4.35294e-16
  0.000000	 -0.000000	diff=2.68375e-16
  0.000000	  0.000000	diff=1.77563e-15
  0.000000	 -0.000000	diff=2.93752e-15
 -0.000000	 -0.000000	diff=1.38098e-12
 -0.000000	 -0.000000	diff=6.54983e-13
  local_diff=1.66493e-11
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000003	  0.000003	diff=1.01573e-09
  0.000006	  0.000006	diff=1.27201e-09
  0.000001	  0.000001	diff=2.3048e-10
  0.000002	  0.000002	diff=7.81749e-10
  0.000002	  0.000002	diff=3.34489e-10
  0.000004	  0.000004	diff=1.29349e-09
  local_diff=4.92794e-09
# W_pos, [2 2]
  0.000000	  0.000000	diff=2.90522e-14
  0.000000	 -0.000000	diff=1.00629e-13
  0.000000	 -0.000000	diff=1.66136e-13
  0.000000	  0.000000	diff=5.75448e-13
  local_diff=8.71264e-13
# v_pos, [1 2]
  0.000000	  0.000000	diff=1.91109e-13
  0.000000	  0.000000	diff=3.34485e-13
  local_diff=5.25593e-13
# W_h, [2 4]
 -0.000005	 -0.000005	diff=1.43964e-11
  0.000001	  0.000001	diff=9.03775e-12
  0.000006	  0.000006	diff=1.51416e-11
 -0.000001	 -0.000001	diff=6.39802e-12
 -0.000003	 -0.000003	diff=6.2733e-12
  0.000002	  0.000002	diff=8.49633e-12
  0.000002	  0.000002	diff=5.60619e-11
  0.000007	  0.000007	diff=2.59626e-11
  local_diff=1.41768e-10
# W_soft, [5 2]
 -0.000010	 -0.000010	diff=2.0274e-12
  0.000004	  0.000004	diff=3.5894e-12
  0.000006	  0.000006	diff=1.20189e-12
  0.000001	  0.000001	diff=1.88955e-12
 -0.000002	 -0.000002	diff=2.66045e-12
  0.000021	  0.000021	diff=1.71041e-12
 -0.000011	 -0.000011	diff=1.2072e-12
 -0.000001	 -0.000001	diff=4.313e-12
 -0.000008	 -0.000008	diff=2.26477e-12
 -0.000001	 -0.000001	diff=1.87331e-12
  local_diff=2.27374e-11
# W_soft_char, [5 2]
 -0.000000	 -0.000000	diff=1.86287e-12
  0.000001	  0.000001	diff=1.90807e-12
 -0.000000	 -0.000000	diff=1.96256e-12
 -0.000000	 -0.000000	diff=4.43404e-13
  0.000000	  0.000000	diff=4.81407e-13
  0.000001	  0.000001	diff=7.30414e-14
 -0.000003	 -0.000003	diff=8.29451e-13
  0.000001	  0.000001	diff=2.55446e-13
  0.000001	  0.000001	diff=1.14068e-13
  0.000001	  0.000001	diff=1.71625e-12
  local_diff=9.64656e-12
# Num params=410, abs_diff=3.49219e-08
Elapsed time is 9.085448 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.89253e-14
 -0.000000	 -0.000000	diff=3.80665e-13
  0.011919	  0.012356	diff=0.000436738
  0.000000	 -0.000000	diff=1.29395e-40
  0.000000	 -0.000000	diff=2.65023e-25
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.41404e-45
  0.000000	 -0.000000	diff=2.22235e-14
  0.000000	  0.000000	diff=7.91298e-13
 -0.015140	 -0.014509	diff=0.000631498
  0.000000	  0.000000	diff=1.39212e-40
  0.000000	 -0.000000	diff=3.6014e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.27927e-45
  0.000000	 -0.000000	diff=1.78724e-15
  0.000000	  0.000000	diff=5.13634e-39
 -0.001200	 -0.001196	diff=4.19215e-06
  0.000000	  0.000000	diff=1.24599e-41
  0.000000	  0.000000	diff=2.39132e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.35452e-56
  0.000000	  0.000000	diff=1.78724e-15
  0.000000	 -0.000000	diff=5.13634e-39
  0.001192	  0.001196	diff=4.17447e-06
  0.000000	 -0.000000	diff=1.23898e-41
  0.000000	 -0.000000	diff=2.36631e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.3542e-56
  local_diff=0.0010766
# W_tgt{1}, [8 6]
 -0.766914	 -0.785267	diff=0.018353
  0.000000	  0.000000	diff=1.06531e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.8815e-12
 -9.037399	 -9.410081	diff=0.372682
  0.054244	  0.055534	diff=0.00128949
 -0.000000	 -0.000000	diff=3.22055e-11
  0.000000	 -0.000000	diff=2.24719e-27
  1.007635	  0.981278	diff=0.0263573
  0.000000	  0.000000	diff=1.39069e-11
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.38594e-09
 12.379994	 11.758937	diff=0.621058
 -0.071480	 -0.069396	diff=0.00208473
  0.000000	  0.000000	diff=1.10955e-09
  0.000000	  0.000000	diff=1.34546e-26
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=1.49381e-27
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
  0.000000	 -0.000000	diff=2.84648e-29
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=3.20479e-13
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
 -0.000000	 -0.000000	diff=3.90064e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  local_diff=1.04184
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.35585e-26
  0.000000	  0.000000	diff=2.8781e-25
  0.011324	  0.011717	diff=0.000393193
  0.010423	  0.010755	diff=0.000331839
  local_diff=0.000725031
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.22647e-11
 -0.000000	 -0.000000	diff=7.69642e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-11.591312	-12.408891	diff=0.817579
-10.192270	-10.804343	diff=0.612073
  0.000000	  0.000000	diff=1.82339e-09
  0.000000	  0.000000	diff=2.75363e-10
  local_diff=1.42965
# W_soft, [5 2]
  0.117985	  0.117958	diff=2.65055e-05
  0.128902	  0.128874	diff=2.84991e-05
 -0.253645	 -0.253670	diff=2.57773e-05
 -0.106455	 -0.106480	diff=2.53615e-05
  0.113363	  0.113319	diff=4.41675e-05
 -0.001808	 -0.001808	diff=8.08635e-09
 -0.001955	 -0.001955	diff=8.59921e-09
  0.002521	  0.002521	diff=7.92679e-09
  0.001512	  0.001512	diff=7.7748e-09
 -0.000270	 -0.000270	diff=1.26002e-08
  local_diff=0.000150356
# Num params=110, abs_diff=2.47345
Elapsed time is 0.776894 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.34816e-20
 -0.000000	 -0.000000	diff=2.53023e-09
  0.000000	  0.000000	diff=4.3787e-23
  0.000000	 -0.000000	diff=2.83846e-15
  0.000000	 -0.000000	diff=2.28652e-28
  0.000000	  0.000000	diff=3.16321e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.98503e-20
  0.000000	  0.000000	diff=3.93833e-09
  0.000000	 -0.000000	diff=5.56607e-23
  0.000000	  0.000000	diff=3.60822e-15
  0.000000	  0.000000	diff=2.87025e-28
  0.000000	 -0.000000	diff=4.73009e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.51073e-51
  0.000000	  0.000000	diff=5.03598e-38
  0.000000	 -0.000000	diff=6.16669e-54
  0.000000	  0.000000	diff=7.00845e-46
  0.000000	  0.000000	diff=1.10983e-58
  0.000000	  0.000000	diff=2.51678e-53
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.8831e-45
  0.000000	 -0.000000	diff=2.23274e-32
  0.000000	  0.000000	diff=5.80397e-48
  0.000000	 -0.000000	diff=3.76267e-40
  0.000000	 -0.000000	diff=1.84266e-52
  0.000000	 -0.000000	diff=2.51047e-47
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=6.46857e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.55428e-54
  0.000000	  0.000000	diff=8.76417e-53
  0.000000	 -0.000000	diff=1.31334e-54
  0.000000	  0.000000	diff=3.68385e-53
  0.000000	  0.000000	diff=1.67269e-54
  0.000000	  0.000000	diff=2.26763e-52
  0.000000	  0.000000	diff=1.02191e-29
  0.000000	  0.000000	diff=1.48421e-29
  0.000000	  0.000000	diff=1.97708e-48
  0.000000	 -0.000000	diff=1.69155e-47
  0.000000	  0.000000	diff=5.19604e-49
  0.000000	 -0.000000	diff=1.38666e-47
  0.000000	  0.000000	diff=3.01272e-48
  0.000000	 -0.000000	diff=8.27168e-47
  0.000000	 -0.000000	diff=9.0586e-24
  0.000000	  0.000000	diff=2.23467e-23
  0.000000	 -0.000000	diff=1.84561e-48
  0.000000	  0.000000	diff=3.1409e-48
  0.000000	  0.000000	diff=4.54393e-49
  0.000000	  0.000000	diff=1.14558e-48
  0.000000	 -0.000000	diff=1.83828e-48
  0.000000	  0.000000	diff=9.21113e-48
  0.000000	  0.000000	diff=6.85573e-25
  0.000000	 -0.000000	diff=2.36092e-24
  0.000000	 -0.000000	diff=1.01887e-47
  0.000000	 -0.000000	diff=7.26663e-47
  0.000000	  0.000000	diff=2.82651e-48
  0.000000	 -0.000000	diff=2.63008e-47
  0.000000	 -0.000000	diff=1.01827e-47
  0.000000	 -0.000000	diff=2.60012e-46
  0.000000	 -0.000000	diff=2.47598e-24
  0.000000	  0.000000	diff=1.0339e-24
  local_diff=3.79617e-23
# W_tgt{1}, [8 6]
 -0.000004	 -0.000004	diff=4.98508e-09
  0.050148	  0.048173	diff=0.00197547
 -0.000001	 -0.000001	diff=9.19684e-10
 -0.004852	 -0.004846	diff=6.11891e-06
 -0.000004	 -0.000004	diff=5.01857e-09
-16.861985	-16.882693	diff=0.0207085
 -0.000000	 -0.000000	diff=2.24089e-12
 -0.075760	 -0.075641	diff=0.000118743
 -0.000018	 -0.000018	diff=1.17178e-07
  0.286069	  0.239398	diff=0.0466703
 -0.000004	 -0.000004	diff=1.53264e-08
 -0.023675	 -0.023531	diff=0.000144739
 -0.000018	 -0.000019	diff=1.17959e-07
-64.009606	-64.502290	diff=0.492685
 -0.000000	 -0.000000	diff=5.06447e-12
 -0.370083	 -0.367324	diff=0.00275931
 -0.000003	 -0.000003	diff=2.8759e-09
 -0.092075	 -0.092172	diff=9.71693e-05
 -0.000000	 -0.000000	diff=5.83548e-11
  0.000138	  0.000138	diff=1.60813e-08
 -0.000003	 -0.000003	diff=2.98059e-09
  0.268381	  0.268231	diff=0.000150384
 -0.000000	 -0.000000	diff=1.88724e-12
 -0.095132	 -0.094937	diff=0.000195029
  0.000005	  0.000005	diff=6.1152e-09
  0.080428	  0.079878	diff=0.00055015
  0.000000	  0.000000	diff=3.99928e-12
  0.000395	  0.000395	diff=1.31383e-07
  0.000004	  0.000004	diff=5.45053e-09
  0.823579	  0.822744	diff=0.000835628
  0.000000	  0.000000	diff=1.41454e-12
  0.120081	  0.120523	diff=0.000441736
  0.000000	  0.000000	diff=2.37094e-13
 -0.000000	 -0.000000	diff=1.57625e-12
  0.000000	  0.000000	diff=5.50291e-13
  0.000000	  0.000000	diff=1.12205e-12
  0.000000	  0.000000	diff=1.65518e-13
  0.000001	  0.000001	diff=7.18465e-13
  0.000000	  0.000000	diff=3.33371e-17
 -0.000000	 -0.000000	diff=6.37372e-13
 -0.000002	 -0.000002	diff=1.67656e-09
  0.167861	  0.166870	diff=0.000990917
  0.000000	  0.000000	diff=3.56582e-11
 -0.000657	 -0.000656	diff=7.12819e-07
 -0.000001	 -0.000001	diff=4.07367e-10
 -0.704294	 -0.705065	diff=0.00077068
 -0.000000	 -0.000000	diff=1.96455e-12
 -0.007005	 -0.007064	diff=5.90446e-05
  local_diff=0.56916
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.80799e-13
  0.000003	  0.000003	diff=1.17527e-12
  0.000001	  0.000001	diff=1.04317e-12
  0.000000	  0.000000	diff=1.1646e-12
  0.000000	  0.000000	diff=1.85515e-13
  0.000004	  0.000004	diff=8.67471e-13
 -0.000003	 -0.000003	diff=7.61113e-13
  0.000003	  0.000003	diff=7.73975e-13
  0.050823	  0.050903	diff=8.01664e-05
 -2.046568	 -2.047222	diff=0.000653766
 -0.207671	 -0.207474	diff=0.000197039
 -0.402314	 -0.402361	diff=4.70955e-05
 -0.077828	 -0.076264	diff=0.00156383
 -2.684246	 -2.690338	diff=0.00609235
  0.696532	  0.700552	diff=0.00401905
 -3.778872	 -3.779618	diff=0.000745874
 -0.128987	 -0.129030	diff=4.26756e-05
  0.061208	  0.061151	diff=5.68663e-05
 -0.126904	 -0.126919	diff=1.4947e-05
 -0.070657	 -0.070722	diff=6.55408e-05
 -0.291341	 -0.291436	diff=9.54034e-05
 -0.097532	 -0.097713	diff=0.000181571
  1.118120	  1.118619	diff=0.000499494
  0.380550	  0.379815	diff=0.000735855
  0.012946	  0.013209	diff=0.000263206
  0.461725	  0.461779	diff=5.36815e-05
  0.191919	  0.191890	diff=2.89226e-05
  0.679034	  0.678886	diff=0.000147656
  0.083802	  0.084460	diff=0.000658393
  1.541852	  1.540874	diff=0.000977706
 -1.205213	 -1.205056	diff=0.000157264
  4.465138	  4.463566	diff=0.00157229
  local_diff=0.0189506
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.02828e-09
 -0.000000	 -0.000000	diff=9.2605e-09
 -0.000000	 -0.000000	diff=2.94841e-12
 -0.000000	 -0.000000	diff=4.24691e-12
  local_diff=1.6296e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.57964e-09
  0.000000	  0.000000	diff=3.29025e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-46.634814	-48.192947	diff=1.55813
 23.595116	 22.914322	diff=0.680794
-63.733324	-63.722799	diff=0.0105255
 32.900101	 32.948650	diff=0.0485487
  local_diff=2.298
# W_soft, [5 2]
 -0.194189	 -0.194362	diff=0.000173622
 -0.792482	 -0.792957	diff=0.00047466
  0.789507	  0.789365	diff=0.00014269
  0.710923	  0.710812	diff=0.00011126
 -0.512379	 -0.512858	diff=0.000478206
  0.259154	  0.258965	diff=0.000189717
  1.222390	  1.221652	diff=0.000737428
 -0.731666	 -0.731842	diff=0.000175899
 -1.237164	 -1.237267	diff=0.000103252
  0.489267	  0.488492	diff=0.000774967
  local_diff=0.0033617
# Num params=174, abs_diff=2.88947
Elapsed time is 1.520822 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.05792e-13
  0.000000	  0.000000	diff=2.53484e-11
  0.000000	  0.000000	diff=1.75957e-17
  0.000000	 -0.000000	diff=4.30662e-21
  0.000165	  0.000169	diff=3.88032e-06
  0.000000	  0.000000	diff=2.26316e-19
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.31863e-18
  0.000000	 -0.000000	diff=3.43153e-26
 -0.000000	 -0.000000	diff=3.86931e-11
  0.000000	 -0.000000	diff=6.93468e-30
  0.000000	  0.000000	diff=5.47442e-21
  0.000000	 -0.000000	diff=2.10102e-35
  0.000000	 -0.000000	diff=1.15918e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.72548e-14
  0.000000	 -0.000000	diff=1.60375e-31
  0.000000	 -0.000000	diff=2.86987e-18
  0.000000	  0.000000	diff=6.57819e-32
 -0.000028	 -0.000028	diff=1.05142e-07
  0.000000	 -0.000000	diff=3.6913e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.77983e-19
  0.000000	  0.000000	diff=9.96869e-30
  0.000000	  0.000000	diff=1.84957e-41
  0.000000	  0.000000	diff=1.65824e-33
  0.000000	 -0.000000	diff=3.60782e-48
  0.000000	  0.000000	diff=1.59079e-20
  0.000000	 -0.000000	diff=1.27157e-36
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.78485e-34
  local_diff=3.98552e-06
# W_src{2}, [8 4]
  0.000156	  0.000155	diff=7.41308e-07
 -0.051950	 -0.051700	diff=0.000249554
  0.000002	  0.000002	diff=9.04276e-09
 -0.000395	 -0.000397	diff=1.88223e-06
  0.074041	  0.074211	diff=0.000169735
  0.015131	  0.015085	diff=4.60317e-05
  0.000000	  0.000000	diff=1.70435e-09
 -0.000000	 -0.000000	diff=8.95798e-11
  0.000000	 -0.000000	diff=1.04337e-60
  0.000000	  0.000000	diff=7.70033e-59
  0.000000	 -0.000000	diff=1.38359e-60
  0.000000	  0.000000	diff=1.86874e-59
  0.000000	 -0.000000	diff=3.10002e-60
  0.000000	  0.000000	diff=8.22314e-59
  0.000000	  0.000000	diff=1.00804e-29
  0.000000	  0.000000	diff=6.01278e-29
 -0.000001	 -0.000001	diff=3.38417e-09
 -0.025529	 -0.025469	diff=6.0629e-05
  0.000000	  0.000000	diff=6.1963e-11
 -0.000195	 -0.000195	diff=4.56596e-07
 -0.014545	 -0.014577	diff=3.201e-05
  0.008044	  0.008026	diff=1.81218e-05
  0.000000	  0.000000	diff=4.27358e-10
 -0.000000	 -0.000000	diff=7.18604e-11
  0.000001	  0.000001	diff=1.38785e-09
  0.020501	  0.020540	diff=3.89527e-05
 -0.000001	 -0.000001	diff=5.53349e-09
  0.000158	  0.000158	diff=2.98779e-07
 -0.077118	 -0.077009	diff=0.000109619
  0.006137	  0.006129	diff=7.8771e-06
 -0.000000	 -0.000000	diff=2.57831e-10
  0.000000	  0.000000	diff=4.56238e-11
  local_diff=0.000735931
# W_tgt{1}, [8 6]
  0.000068	  0.000068	diff=1.77923e-07
 -0.377777	 -0.375082	diff=0.00269499
  0.000038	  0.000038	diff=5.64938e-10
  0.179689	  0.179851	diff=0.000162355
  0.000086	  0.000086	diff=1.94569e-07
  0.430188	  0.390988	diff=0.0392
  0.000015	  0.000015	diff=5.30743e-08
 -0.037834	 -0.037604	diff=0.000229806
 -0.000000	 -0.000000	diff=2.53059e-09
 -0.335776	 -0.257176	diff=0.0786002
  0.000000	  0.000000	diff=2.89869e-09
  0.002525	  0.002506	diff=1.96204e-05
 -0.000000	 -0.000000	diff=2.47296e-09
  4.101734	  3.545747	diff=0.555988
 -0.000000	 -0.000000	diff=5.12821e-13
 -0.129065	 -0.124496	diff=0.00456849
 -0.000000	 -0.000000	diff=1.44817e-11
  0.016114	  0.016652	diff=0.000537924
  0.000000	  0.000000	diff=2.58485e-12
 -0.000028	 -0.000028	diff=1.18119e-10
  0.000001	  0.000001	diff=9.44108e-12
 -0.009378	 -0.009462	diff=8.34718e-05
  0.000000	  0.000000	diff=3.45116e-13
  0.003196	  0.003198	diff=1.76973e-06
  0.000000	  0.000000	diff=1.08825e-10
  0.004006	  0.005904	diff=0.00189828
  0.000005	  0.000005	diff=1.34465e-10
 -0.000122	 -0.000122	diff=7.82769e-08
  0.000009	  0.000009	diff=2.47621e-09
 -0.774061	 -0.774462	diff=0.00040099
  0.000000	  0.000000	diff=1.11953e-12
  0.008891	  0.008938	diff=4.66139e-05
 -0.000000	 -0.000000	diff=1.24573e-09
  0.000263	  0.000262	diff=7.83304e-07
 -0.000018	 -0.000018	diff=1.62356e-09
  0.000036	  0.000036	diff=1.03458e-07
 -0.000030	 -0.000030	diff=3.13933e-08
  0.000281	  0.000280	diff=8.98631e-07
 -0.000000	 -0.000000	diff=2.92322e-13
  0.000000	  0.000000	diff=1.08686e-12
 -0.000000	 -0.000000	diff=7.96117e-12
  0.002446	  0.003417	diff=0.000971146
 -0.000001	 -0.000001	diff=1.05707e-11
  0.000058	  0.000058	diff=1.59554e-08
 -0.000002	 -0.000002	diff=1.94472e-10
  0.417876	  0.417789	diff=8.67988e-05
 -0.000000	 -0.000000	diff=3.22329e-13
 -0.003831	 -0.003815	diff=1.58554e-05
  local_diff=0.685509
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=6.66348e-13
  0.000000	  0.000000	diff=6.10105e-13
  0.000000	  0.000000	diff=9.65873e-13
  0.000000	  0.000000	diff=1.90049e-12
 -0.000000	 -0.000000	diff=1.11083e-12
  0.000000	  0.000000	diff=1.87989e-12
 -0.000000	 -0.000000	diff=1.35319e-12
  0.000000	  0.000000	diff=5.8262e-13
  0.217844	  0.218061	diff=0.00021704
 -0.472190	 -0.469976	diff=0.00221478
 -0.097230	 -0.097174	diff=5.5989e-05
 -0.325293	 -0.325539	diff=0.000246364
  0.557278	  0.559871	diff=0.00259358
 -1.526243	 -1.518094	diff=0.00814958
 -1.531277	 -1.529493	diff=0.00178395
 -0.515424	 -0.514534	diff=0.000889868
  0.068274	  0.068202	diff=7.15025e-05
 -0.053350	 -0.053277	diff=7.3371e-05
 -0.124763	 -0.124748	diff=1.50754e-05
 -0.005424	 -0.005436	diff=1.22185e-05
 -0.075474	 -0.075506	diff=3.23948e-05
 -0.183737	 -0.183720	diff=1.71131e-05
  0.407739	  0.407946	diff=0.000207326
 -0.249140	 -0.250224	diff=0.00108407
  0.072757	  0.072690	diff=6.67605e-05
  0.288081	  0.288275	diff=0.000194448
  0.089550	  0.089540	diff=9.712e-06
  0.362486	  0.363060	diff=0.000573974
 -0.168338	 -0.167893	diff=0.000445409
  1.041265	  1.041665	diff=0.000400359
 -0.279811	 -0.279331	diff=0.000480321
  3.008567	  3.001825	diff=0.00674267
  local_diff=0.0265779
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.09246e-10
  0.000000	  0.000000	diff=9.31547e-11
  0.000118	  0.000120	diff=1.95821e-06
  0.000000	 -0.000000	diff=6.74767e-15
  local_diff=1.95882e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.02899e-11
 -0.000000	 -0.000000	diff=3.4354e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 29.868986	 30.897636	diff=1.02865
-15.147911	-14.914619	diff=0.233291
 -4.963032	 -5.462542	diff=0.49951
  2.964002	  2.824189	diff=0.139814
  local_diff=1.90126
# W_soft, [5 2]
 -0.169247	 -0.169422	diff=0.000174874
 -0.453029	 -0.453367	diff=0.000338023
  0.500466	  0.500293	diff=0.000173735
  0.537580	  0.537427	diff=0.000153904
 -0.414584	 -0.414930	diff=0.000346442
 -0.109892	 -0.110159	diff=0.000267945
  0.622417	  0.621976	diff=0.000441468
  0.210969	  0.210769	diff=0.00019921
 -1.050254	 -1.050476	diff=0.000222186
  0.328336	  0.327891	diff=0.000444995
  local_diff=0.00276278
# Num params=174, abs_diff=2.61686
Elapsed time is 1.472886 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=4.93503e-18
  0.000000	 -0.000000	diff=3.19414e-09
  0.000000	 -0.000000	diff=2.44249e-21
  0.000000	 -0.000000	diff=3.08856e-20
 -0.000024	 -0.000025	diff=7.41198e-07
  0.000000	  0.000000	diff=2.83662e-21
  0.000000	  0.000000	diff=0
 -0.004338	 -0.003739	diff=0.000598602
  0.000000	  0.000000	diff=8.36234e-18
 -0.000000	  0.000000	diff=5.10538e-09
  0.000000	 -0.000000	diff=5.85081e-30
  0.000000	  0.000000	diff=3.92607e-20
  0.000000	  0.000000	diff=2.00075e-35
  0.000000	  0.000000	diff=1.93182e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.37043e-65
  0.000000	  0.000000	diff=6.32063e-49
  0.000000	  0.000000	diff=3.04085e-22
  0.000000	  0.000000	diff=9.55397e-59
  0.000003	  0.000003	diff=1.18872e-08
  0.000000	 -0.000000	diff=3.52699e-22
  0.000000	  0.000000	diff=0
  0.000457	  0.000465	diff=8.08051e-06
  0.000000	  0.000000	diff=5.91871e-58
  0.000000	 -0.000000	diff=1.94462e-41
  0.000000	  0.000000	diff=4.20975e-41
  0.000000	 -0.000000	diff=2.93941e-51
  0.000000	  0.000000	diff=4.3221e-25
  0.000000	 -0.000000	diff=1.53881e-40
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.70234e-24
  local_diff=0.000607444
# W_src{2}, [8 4]
  0.000176	  0.000175	diff=8.10861e-07
 -0.001072	 -0.001068	diff=4.8646e-06
 -0.000006	 -0.000006	diff=2.76992e-08
  0.000009	  0.000009	diff=4.11615e-08
 -0.095347	 -0.095019	diff=0.000327664
  0.921614	  0.892052	diff=0.0295616
  0.000001	  0.000001	diff=7.21874e-09
 -0.000000	 -0.000000	diff=7.24867e-10
  0.000000	  0.000000	diff=6.51802e-61
  0.000000	 -0.000000	diff=9.79139e-59
  0.000000	 -0.000000	diff=1.92999e-60
  0.000000	  0.000000	diff=2.65102e-60
  0.000000	  0.000000	diff=1.80523e-60
  0.000000	 -0.000000	diff=6.46001e-59
  0.000000	  0.000000	diff=5.0982e-29
  0.000000	 -0.000000	diff=3.59476e-28
 -0.000006	 -0.000006	diff=1.38662e-08
 -0.001520	 -0.001516	diff=3.57357e-06
 -0.000000	 -0.000000	diff=2.80933e-10
 -0.000011	 -0.000011	diff=2.82381e-08
  0.051977	  0.051983	diff=6.17477e-06
  0.022476	  0.022467	diff=8.61443e-06
  0.000000	  0.000000	diff=1.73889e-09
 -0.000000	 -0.000000	diff=4.40835e-12
  0.000005	  0.000005	diff=1.0826e-08
 -0.000529	 -0.000533	diff=4.35019e-06
  0.000004	  0.000004	diff=1.62897e-08
 -0.000016	 -0.000016	diff=7.8695e-08
  0.183422	  0.182336	diff=0.00108665
 -0.719404	 -0.740052	diff=0.0206481
 -0.000000	 -0.000000	diff=1.18566e-09
  0.000000	  0.000000	diff=1.08773e-12
  local_diff=0.0516526
# W_tgt{1}, [8 6]
  0.000001	  0.000001	diff=2.19747e-09
  0.002266	  0.002363	diff=9.72871e-05
  0.000000	  0.000000	diff=4.32551e-12
  0.011301	  0.011283	diff=1.85713e-05
  0.000001	  0.000001	diff=2.20818e-09
  0.118309	  0.130815	diff=0.0125056
  0.000000	  0.000000	diff=1.1398e-12
  0.001645	  0.001653	diff=8.50111e-06
  0.000006	  0.000006	diff=5.15827e-08
  0.065185	  0.067860	diff=0.00267472
  0.000000	  0.000000	diff=4.87833e-11
  0.055231	  0.054791	diff=0.000439789
  0.000006	  0.000007	diff=5.18455e-08
 -1.550383	 -1.247777	diff=0.302606
  0.000000	  0.000000	diff=1.44921e-12
 -0.118018	 -0.118740	diff=0.000721926
  0.000001	  0.000001	diff=2.09766e-09
 -0.001827	 -0.001725	diff=0.000101285
 -0.000000	 -0.000000	diff=1.23039e-10
 -0.026644	 -0.026746	diff=0.000102817
 -0.000316	 -0.000315	diff=7.61028e-07
 -0.047123	 -0.046817	diff=0.000306806
  0.000001	  0.000001	diff=6.13507e-09
 -0.000442	 -0.000433	diff=8.51723e-06
 -0.000004	 -0.000004	diff=8.85394e-09
  0.010328	  0.010447	diff=0.00011902
 -0.000000	 -0.000000	diff=8.68028e-10
 -0.000704	 -0.000704	diff=2.19909e-08
 -0.000847	 -0.000842	diff=5.33828e-06
 -0.300936	 -0.301531	diff=0.000595316
  0.000003	  0.000003	diff=4.33726e-08
 -0.002802	 -0.002771	diff=3.04059e-05
 -0.000083	 -0.000083	diff=2.86866e-07
 -0.000050	 -0.000050	diff=1.97653e-07
 -0.000117	 -0.000116	diff=4.79512e-07
 -0.000064	 -0.000064	diff=2.61839e-07
  0.000484	  0.000486	diff=2.09958e-06
 -0.000011	 -0.000011	diff=4.4027e-08
 -0.000002	 -0.000002	diff=1.57142e-08
  0.000000	  0.000000	diff=1.02258e-11
  0.000001	  0.000001	diff=6.88076e-09
  0.000927	  0.000916	diff=1.04522e-05
  0.000000	  0.000000	diff=4.89584e-10
  0.002259	  0.002258	diff=7.12133e-07
  0.000627	  0.000630	diff=2.97819e-06
  0.079501	  0.079544	diff=4.22841e-05
 -0.000003	 -0.000003	diff=2.40266e-08
  0.000580	  0.000581	diff=7.55174e-07
  local_diff=0.320404
# W_tgt{2}, [8 4]
  0.000623	  0.000626	diff=2.82309e-06
 -0.000521	 -0.000521	diff=2.5315e-07
 -0.000003	 -0.000003	diff=1.36912e-08
  0.000336	  0.000335	diff=1.38493e-06
 -0.000708	 -0.000704	diff=3.80235e-06
  0.002136	  0.002146	diff=9.99194e-06
  0.000001	  0.000001	diff=3.62809e-09
  0.001020	  0.001025	diff=4.68635e-06
 -0.028184	 -0.028198	diff=1.35057e-05
 -0.698397	 -0.698107	diff=0.000289259
  0.005698	  0.005695	diff=3.21144e-06
 -0.012854	 -0.012841	diff=1.27889e-05
 -0.269652	 -0.271364	diff=0.00171247
 -1.439698	 -1.439778	diff=7.97449e-05
 -3.502950	 -3.498598	diff=0.00435172
 -1.256629	 -1.254933	diff=0.00169609
  0.055009	  0.055023	diff=1.35538e-05
  0.032590	  0.032581	diff=8.61794e-06
  0.014903	  0.014895	diff=7.44831e-06
 -0.059815	 -0.059821	diff=5.41646e-06
 -0.107267	 -0.106750	diff=0.000516204
 -0.001726	 -0.001739	diff=1.38488e-05
 -0.224488	 -0.224554	diff=6.61953e-05
 -0.754026	 -0.754435	diff=0.000408903
  0.807687	  0.806899	diff=0.000787914
  0.294375	  0.294421	diff=4.58131e-05
 -0.040411	 -0.040401	diff=9.91927e-06
 -0.375986	 -0.376130	diff=0.000144564
  0.350550	  0.350486	diff=6.32274e-05
  0.076409	  0.076324	diff=8.51704e-05
 -0.469218	 -0.469692	diff=0.000474252
 -4.537947	 -4.547018	diff=0.0090705
  local_diff=0.0199033
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000749	 -0.000730	diff=1.96452e-05
 -0.000000	 -0.000000	diff=2.39108e-11
  0.000000	  0.000000	diff=7.15057e-09
  0.000000	  0.000000	diff=8.25471e-09
  local_diff=1.96606e-05
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.54862e-12
 -0.000000	 -0.000000	diff=1.45275e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-30.217535	-26.560473	diff=3.65706
 12.763276	 13.667926	diff=0.90465
  7.149709	  7.083902	diff=0.0658071
 -3.640520	 -3.660044	diff=0.0195236
  local_diff=4.64704
# W_h, [2 4]
  0.361054	  0.356239	diff=0.00481585
 -0.000253	 -0.000252	diff=6.80117e-07
 -0.589500	 -0.603836	diff=0.0143357
  0.000514	  0.000516	diff=2.82851e-06
  3.893030	  3.840736	diff=0.0522934
 -2.774627	 -2.775989	diff=0.0013617
  2.929506	  2.932247	diff=0.00274088
 -2.944228	 -2.940896	diff=0.00333148
  local_diff=0.0788825
# W_soft, [5 2]
 -0.956667	 -0.957174	diff=0.000506976
  5.213387	  5.206646	diff=0.00674059
  0.155391	  0.148653	diff=0.0067377
 -2.569958	 -2.570744	diff=0.000785518
 -1.827009	 -1.827381	diff=0.000371877
  2.047773	  2.046128	diff=0.0016451
  0.008199	  0.004965	diff=0.0032344
  1.898402	  1.894751	diff=0.00365141
 -1.834499	 -1.836127	diff=0.00162829
 -2.109547	 -2.109716	diff=0.000168959
  local_diff=0.0254708
# Num params=182, abs_diff=5.14398
Elapsed time is 2.109363 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.6908e-34
  0.000000	  0.000000	diff=6.52136e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.14811e-34
  0.000000	 -0.000000	diff=8.31817e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78785e-73
  0.000000	 -0.000000	diff=5.70539e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.11556e-65
  0.000000	  0.000000	diff=3.2557e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.98983e-66
  0.000000	 -0.000000	diff=1.35318e-65
  0.000000	 -0.000000	diff=6.80857e-67
  0.000000	 -0.000000	diff=2.33138e-66
  0.000000	  0.000000	diff=1.85977e-66
  0.000000	 -0.000000	diff=1.05465e-65
  0.000000	  0.000000	diff=1.86755e-36
  0.000000	 -0.000000	diff=8.34134e-36
  0.000000	 -0.000000	diff=7.79664e-59
  0.000000	  0.000000	diff=5.83381e-58
  0.000000	  0.000000	diff=1.82474e-59
  0.000000	  0.000000	diff=9.23776e-59
  0.000000	 -0.000000	diff=8.49407e-59
  0.000000	  0.000000	diff=5.16748e-58
  0.000000	  0.000000	diff=1.11184e-29
  0.000000	  0.000000	diff=3.97523e-28
  0.000000	  0.000000	diff=1.29167e-59
  0.000000	 -0.000000	diff=5.90976e-59
  0.000000	 -0.000000	diff=5.78638e-60
  0.000000	 -0.000000	diff=8.1766e-60
  0.000000	  0.000000	diff=8.49742e-60
  0.000000	 -0.000000	diff=4.77459e-59
  0.000000	  0.000000	diff=1.60399e-29
  0.000000	 -0.000000	diff=2.8376e-29
  0.000000	 -0.000000	diff=2.05037e-59
  0.000000	  0.000000	diff=5.8094e-58
  0.000000	  0.000000	diff=1.34231e-59
  0.000000	  0.000000	diff=2.23857e-58
  0.000000	 -0.000000	diff=9.57301e-60
  0.000000	  0.000000	diff=8.27746e-58
  0.000000	  0.000000	diff=6.35455e-29
  0.000000	  0.000000	diff=2.21817e-28
  local_diff=7.38419e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_pos, [2 2]
  0.000000	 -0.000000	diff=1.5568e-29
  0.000000	  0.000000	diff=1.31341e-29
  0.000000	 -0.000000	diff=1.2133e-30
  0.000000	  0.000000	diff=1.25461e-30
  local_diff=3.117e-29
# v_pos, [1 2]
  0.000000	 -0.000000	diff=1.01433e-29
  0.000000	 -0.000000	diff=1.01748e-29
  local_diff=2.03181e-29
# W_h, [2 4]
  0.000000	 -0.000000	diff=3.05378e-30
  0.000000	 -0.000000	diff=3.65282e-30
  0.000000	 -0.000000	diff=1.54583e-30
  0.000000	  0.000000	diff=6.8135e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 2.863165 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.84136e-12
 -0.000000	 -0.000000	diff=1.08734e-08
  0.000000	  0.000000	diff=4.35354e-28
  0.000000	 -0.000000	diff=3.7902e-19
  0.000001	  0.000001	diff=3.47287e-08
  0.000000	 -0.000000	diff=3.04848e-21
  0.000000	  0.000000	diff=0
 -0.000601	 -0.000638	diff=3.74958e-05
 -0.000000	 -0.000000	diff=2.84079e-12
  0.000000	  0.000000	diff=1.70572e-08
  0.000000	 -0.000000	diff=5.53448e-28
  0.000000	  0.000000	diff=4.81797e-19
  0.000000	  0.000000	diff=4.00668e-34
  0.000000	  0.000000	diff=1.37967e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.36393e-63
  0.000000	  0.000000	diff=7.75651e-48
  0.000000	 -0.000000	diff=1.12218e-66
  0.000000	  0.000000	diff=1.17244e-57
  0.000000	  0.000000	diff=4.96915e-73
  0.000000	  0.000000	diff=1.09456e-65
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.34168e-56
  0.000000	 -0.000000	diff=2.3864e-40
  0.000000	  0.000000	diff=4.14312e-59
  0.000000	 -0.000000	diff=3.60717e-50
  0.000000	 -0.000000	diff=2.18632e-65
  0.000000	 -0.000000	diff=6.30844e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=3.75585e-05
# W_src{2}, [8 4]
  0.331666	  0.330350	diff=0.00131562
 -0.002764	 -0.002751	diff=1.31345e-05
  0.000000	  0.000000	diff=1.92861e-67
  0.000000	  0.000000	diff=1.29805e-65
  0.293465	  0.294808	diff=0.00134283
 -0.777347	 -0.773645	diff=0.0037022
 -0.000003	 -0.000003	diff=3.17688e-08
 -0.000001	 -0.000001	diff=1.19257e-08
  0.000000	  0.000000	diff=1.26232e-58
  0.000000	 -0.000000	diff=1.41688e-57
  0.000000	 -0.000000	diff=1.3576e-59
  0.000000	 -0.000000	diff=3.6559e-58
  0.000000	  0.000000	diff=1.69409e-58
  0.000000	 -0.000000	diff=1.23259e-57
  0.000000	 -0.000000	diff=1.35871e-28
  0.000000	 -0.000000	diff=6.03963e-28
  0.000000	  0.000000	diff=1.40596e-60
  0.000000	  0.000000	diff=8.13129e-59
  0.000000	  0.000000	diff=8.05466e-61
  0.000000	  0.000000	diff=1.58832e-59
  0.000000	  0.000000	diff=1.32401e-60
  0.000000	  0.000000	diff=1.70636e-59
  0.000000	 -0.000000	diff=5.96654e-29
  0.000000	  0.000000	diff=5.20489e-29
  0.000000	  0.000000	diff=2.1071e-58
  0.000000	 -0.000000	diff=1.86114e-57
  0.000000	 -0.000000	diff=4.88898e-59
  0.000000	 -0.000000	diff=6.66062e-58
  0.000000	  0.000000	diff=2.12671e-58
  0.000000	 -0.000000	diff=1.86368e-57
  0.000000	 -0.000000	diff=1.13055e-28
  0.000000	 -0.000000	diff=6.45202e-28
  local_diff=0.00637384
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.36612e-10
  0.141449	  0.139208	diff=0.00224101
 -0.000000	 -0.000000	diff=6.64415e-12
 -0.051303	 -0.051210	diff=9.27442e-05
  0.000000	  0.000000	diff=7.34172e-10
-10.081949	-10.300090	diff=0.218141
  0.000000	  0.000000	diff=1.7283e-12
 -0.427313	 -0.429863	diff=0.00255021
  0.000002	  0.000002	diff=1.72471e-08
  0.645249	  0.589195	diff=0.056054
 -0.000000	 -0.000000	diff=1.07554e-10
 -0.250880	 -0.248682	diff=0.00219798
  0.000002	  0.000002	diff=1.7243e-08
-39.052507	-48.093148	diff=9.04064
  0.000000	  0.000000	diff=2.85422e-12
 -1.833732	 -1.891739	diff=0.0580063
 -0.000080	 -0.000080	diff=3.73224e-07
  0.001548	  0.001542	diff=6.01329e-06
  0.856652	  0.854887	diff=0.00176502
  0.119273	  0.119784	diff=0.000510345
  0.100424	  0.100992	diff=0.000568028
  4.015067	  4.058219	diff=0.0431522
  0.000002	  0.000002	diff=2.03843e-08
 -0.000000	 -0.000000	diff=3.46268e-10
 -0.000061	 -0.000061	diff=2.11903e-07
 -0.195365	 -0.195682	diff=0.000317279
 -0.855340	 -0.857150	diff=0.00181043
  0.054962	  0.055070	diff=0.000108537
 -0.108978	 -0.108419	diff=0.000559092
  1.272769	  1.254360	diff=0.0184092
  0.000002	  0.000002	diff=1.1463e-08
  0.476651	  0.473620	diff=0.00303052
  0.122645	  0.123101	diff=0.000455664
 -0.311660	 -0.310889	diff=0.000770932
 -0.348081	 -0.349501	diff=0.00141992
  0.359056	  0.358154	diff=0.000901679
 -0.026671	 -0.026604	diff=6.66915e-05
 -0.000266	 -0.000265	diff=1.00308e-06
 -0.000001	 -0.000001	diff=5.54706e-09
  0.000007	  0.000007	diff=5.53458e-08
 -0.000000	 -0.000000	diff=4.02612e-12
 -0.033422	 -0.040448	diff=0.00702548
 -0.021014	 -0.021015	diff=1.07779e-06
 -0.010037	 -0.010033	diff=3.62453e-06
 -0.002583	 -0.002583	diff=3.30602e-07
  0.001963	 -0.000637	diff=0.00259928
 -0.000000	 -0.000000	diff=2.0484e-12
 -0.084897	 -0.085000	diff=0.000102408
  local_diff=9.46351
# W_tgt{2}, [8 4]
 -0.067048	 -0.066879	diff=0.000168609
 -0.002022	 -0.002027	diff=5.6241e-06
  2.639224	  2.643445	diff=0.00422108
 -0.001868	 -0.001863	diff=4.68043e-06
 -0.144376	 -0.144327	diff=4.93138e-05
 -0.021750	 -0.021742	diff=8.26169e-06
 -0.000377	 -0.000384	diff=6.88706e-06
 -0.097278	 -0.097820	diff=0.000541516
 -0.337594	 -0.338006	diff=0.000412173
 -0.848844	 -0.849370	diff=0.000525751
  0.017127	  0.017046	diff=8.08078e-05
 -0.150090	 -0.150266	diff=0.000175417
 -2.244617	 -2.263791	diff=0.0191747
 -0.301278	 -0.302497	diff=0.00121896
-11.097586	-15.471111	diff=4.37352
 -1.705289	 -1.706050	diff=0.000761059
 -0.815940	 -0.813121	diff=0.00281954
 -0.011686	 -0.011894	diff=0.000208274
 -0.081805	 -0.081996	diff=0.000191557
 -0.395191	 -0.395126	diff=6.58093e-05
 -1.088422	 -1.085797	diff=0.00262517
 -0.390058	 -0.390263	diff=0.000204916
  0.968236	  0.970129	diff=0.00189272
 -2.979695	 -2.973407	diff=0.00628751
  0.058841	  0.060224	diff=0.00138282
 -0.476163	 -0.476089	diff=7.34199e-05
 -1.821014	 -1.818654	diff=0.00236011
  1.162310	  1.162279	diff=3.12909e-05
  0.155519	  0.155486	diff=3.28991e-05
  0.274470	  0.275019	diff=0.000549244
 -1.069853	 -1.080967	diff=0.0111139
 11.627334	 11.615886	diff=0.0114484
  local_diff=4.44217
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000120	 -0.000122	diff=1.41149e-06
 -0.000000	 -0.000000	diff=2.86601e-10
 -0.000000	 -0.000000	diff=2.41099e-08
 -0.000000	 -0.000000	diff=2.78275e-08
  local_diff=1.46371e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.57234e-11
  0.000000	  0.000000	diff=2.2417e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
559.422329	-167.970287	diff=727.393
 86.801647	 78.323606	diff=8.47804
 -7.093948	 -7.355292	diff=0.261344
  3.874106	  3.800851	diff=0.0732549
  local_diff=736.205
# W_a, [2 2]
 -0.000008	 -0.000008	diff=1.2119e-08
  0.000294	  0.000315	diff=2.02761e-05
  0.001069	  0.001069	diff=1.51793e-09
 -0.043733	 -0.043731	diff=2.53705e-06
  local_diff=2.28268e-05
# W_h, [2 4]
 -0.023336	 -0.023335	diff=7.74494e-07
 -0.040031	 -0.040030	diff=9.22895e-07
  0.953211	  0.954506	diff=0.00129503
  1.635845	  1.637389	diff=0.00154428
  0.495630	  0.493584	diff=0.00204581
  3.290073	  3.285275	diff=0.00479753
  0.108388	  0.120890	diff=0.0125022
  9.094417	  8.793549	diff=0.300869
  local_diff=0.323055
# W_soft, [5 2]
  5.084964	  5.080611	diff=0.00435259
  3.185797	  3.184884	diff=0.000913657
 -0.403325	 -0.404028	diff=0.000702595
 -4.004497	 -4.005270	diff=0.000772983
 -3.852635	 -3.856197	diff=0.0035624
 -5.137220	 -5.143014	diff=0.00579312
  4.933049	  4.932879	diff=0.000169774
 -0.674094	 -0.674468	diff=0.00037425
  0.078470	  0.077928	diff=0.000541492
  0.812158	  0.806674	diff=0.00548365
  local_diff=0.0226665
# Num params=186, abs_diff=750.463
Elapsed time is 2.255730 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.65218e-34
  0.000000	  0.000000	diff=5.91556e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.09858e-34
  0.000000	 -0.000000	diff=7.47991e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78914e-73
  0.000000	 -0.000000	diff=5.65567e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.14971e-65
  0.000000	  0.000000	diff=3.21759e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.67058e-66
  0.000000	 -0.000000	diff=1.32023e-65
  0.000000	 -0.000000	diff=6.30511e-67
  0.000000	 -0.000000	diff=2.40542e-66
  0.000000	  0.000000	diff=1.58221e-66
  0.000000	 -0.000000	diff=1.03471e-65
  0.000000	  0.000000	diff=2.21115e-36
  0.000000	 -0.000000	diff=7.89148e-36
  0.000000	 -0.000000	diff=6.91426e-59
  0.000000	  0.000000	diff=5.43438e-58
  0.000000	  0.000000	diff=1.75048e-59
  0.000000	  0.000000	diff=9.03782e-59
  0.000000	 -0.000000	diff=7.68126e-59
  0.000000	  0.000000	diff=4.82943e-58
  0.000000	 -0.000000	diff=3.70742e-31
  0.000000	  0.000000	diff=3.56301e-28
  0.000000	  0.000000	diff=1.05848e-59
  0.000000	 -0.000000	diff=5.8891e-59
  0.000000	 -0.000000	diff=5.03736e-60
  0.000000	 -0.000000	diff=8.12493e-60
  0.000000	  0.000000	diff=7.41006e-60
  0.000000	 -0.000000	diff=4.89434e-59
  0.000000	  0.000000	diff=1.78997e-29
  0.000000	 -0.000000	diff=2.65034e-29
  0.000000	 -0.000000	diff=2.66933e-59
  0.000000	  0.000000	diff=5.54468e-58
  0.000000	  0.000000	diff=1.53992e-59
  0.000000	  0.000000	diff=2.12029e-58
  0.000000	 -0.000000	diff=1.51282e-59
  0.000000	  0.000000	diff=7.93366e-58
  0.000000	  0.000000	diff=7.42823e-29
  0.000000	  0.000000	diff=2.02294e-28
  local_diff=6.77651e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.57509e-45
  0.000000	  0.000000	diff=1.6093e-45
  0.000000	  0.000000	diff=3.50325e-45
  0.000000	 -0.000000	diff=8.75812e-47
  local_diff=7.77522e-45
# v_a, [1 2]
  0.000000	 -0.000000	diff=1.26117e-44
  0.000000	 -0.000000	diff=2.1742e-44
  local_diff=3.43537e-44
# W_h, [2 4]
  0.000000	 -0.000000	diff=7.31179e-31
  0.000000	 -0.000000	diff=5.18298e-31
  0.000000	  0.000000	diff=1.27282e-29
  0.000000	 -0.000000	diff=2.22416e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 2.377009 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 230, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 230
  src input 1: z x y xy
  src mask: 1  1  1  1
  tgt input 1: <s> a c a </s>
  tgt output 1: a c a </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.006864	  0.006861	diff=2.31535e-06
  0.000067	  0.000067	diff=7.81252e-09
  0.001297	  0.001310	diff=1.29522e-05
 -0.000111	 -0.000111	diff=9.87099e-12
  0.006914	  0.006911	diff=2.32328e-06
  0.000074	  0.000074	diff=5.63472e-09
 -1.206949	 -1.207161	diff=0.000212051
 -0.139261	 -0.139273	diff=1.13959e-05
 -0.000000	 -0.000000	diff=1.32202e-11
  0.000001	  0.000001	diff=2.11951e-08
 -0.000709	 -0.000687	diff=2.17226e-05
  0.000000	  0.000000	diff=1.9663e-11
  0.000000	 -0.000000	diff=1.52868e-16
  0.000000	  0.000000	diff=2.56783e-17
  0.000000	  0.000000	diff=1.03695e-14
  0.000000	 -0.000000	diff=4.34003e-16
 -0.006957	 -0.006957	diff=8.53026e-08
 -0.000001	 -0.000001	diff=1.49431e-08
 -0.001288	 -0.001288	diff=3.80474e-09
  0.000352	  0.000352	diff=6.52722e-11
 -0.008089	 -0.008089	diff=1.14631e-07
  0.000210	  0.000210	diff=1.37859e-08
  0.459690	  0.459599	diff=9.05999e-05
 -0.048916	 -0.048909	diff=7.25218e-06
 -0.002452	 -0.002452	diff=1.89617e-08
  0.000254	  0.000254	diff=2.06344e-09
 -0.000412	 -0.000412	diff=8.49852e-10
  0.000261	  0.000261	diff=1.82195e-10
 -0.002945	 -0.002945	diff=2.91857e-08
  0.000514	  0.000514	diff=1.08438e-09
  0.031089	  0.031072	diff=1.69854e-05
 -0.068496	 -0.068509	diff=1.30873e-05
  local_diff=0.000391005
# W_src{2}, [8 4]
  0.018345	  0.018346	diff=7.13251e-07
 -0.056499	 -0.056496	diff=2.90412e-06
  0.000751	  0.000751	diff=1.01728e-08
 -0.008322	 -0.008322	diff=3.96978e-08
  0.028947	  0.028948	diff=1.56384e-06
 -0.076435	 -0.076429	diff=5.98826e-06
 -0.305415	 -0.305278	diff=0.000137593
 -0.850478	 -0.850131	diff=0.000346524
  0.003064	  0.003064	diff=1.10826e-08
 -0.013203	 -0.013202	diff=1.51182e-07
 -0.000519	 -0.000519	diff=4.16936e-09
 -0.002041	 -0.002041	diff=3.46454e-09
  0.004237	  0.004237	diff=2.58184e-08
 -0.015098	 -0.015098	diff=2.8125e-07
  0.131112	  0.131152	diff=3.9822e-05
 -0.173302	 -0.173265	diff=3.7177e-05
  0.003198	  0.003198	diff=1.17869e-07
 -0.021628	 -0.021628	diff=1.78025e-07
  0.000090	  0.000090	diff=1.68103e-08
 -0.003766	 -0.003766	diff=1.08332e-08
  0.005470	  0.005470	diff=2.50735e-07
 -0.023554	 -0.023554	diff=3.89755e-07
 -0.173019	 -0.174291	diff=0.00127156
 -0.389288	 -0.389408	diff=0.000119449
 -0.011730	 -0.011730	diff=1.22582e-07
  0.055936	  0.055936	diff=7.40063e-07
 -0.001933	 -0.001933	diff=4.36249e-08
  0.009950	  0.009949	diff=2.04128e-07
 -0.021615	 -0.021614	diff=5.34616e-07
  0.072149	  0.072152	diff=2.84842e-06
  0.254924	  0.254892	diff=3.21208e-05
  0.934207	  0.931742	diff=0.00246458
  local_diff=0.00446598
# W_tgt{1}, [8 6]
 -0.000582	 -0.000583	diff=7.32036e-07
  0.005631	  0.005703	diff=7.17307e-05
 -1.075234	 -1.082952	diff=0.00771772
  0.000264	  0.000263	diff=3.50278e-07
  0.000000	  0.000000	diff=1.4923e-10
  0.131709	  0.131808	diff=9.84028e-05
 -0.000000	 -0.000000	diff=5.59179e-11
 -0.000132	 -0.000132	diff=2.42701e-07
 -0.002815	 -0.002832	diff=1.72101e-05
 -0.004509	 -0.004437	diff=7.1774e-05
  1.041406	  1.034377	diff=0.00702838
  0.001288	  0.001280	diff=8.28842e-06
  0.000000	  0.000000	diff=2.51353e-09
  0.577472	  0.576993	diff=0.000478507
 -0.000000	 -0.000000	diff=9.43352e-10
 -0.000637	 -0.000642	diff=5.71067e-06
  0.001645	  0.001639	diff=6.52192e-06
  0.000061	  0.000062	diff=3.22044e-07
  0.337840	  0.337070	diff=0.000769931
 -0.000232	 -0.000232	diff=2.71814e-07
 -0.000000	 -0.000000	diff=8.94929e-11
 -0.091251	 -0.091341	diff=8.95978e-05
  0.000000	  0.000000	diff=3.3369e-11
  0.000117	  0.000117	diff=1.88813e-07
  0.000270	  0.000270	diff=1.74517e-07
  0.000058	  0.000058	diff=2.55709e-08
  0.048831	  0.048815	diff=1.58278e-05
 -0.000043	 -0.000043	diff=9.26583e-09
 -0.000000	 -0.000000	diff=3.71029e-12
 -0.016146	 -0.016150	diff=3.54947e-06
  0.000000	  0.000000	diff=3.97587e-12
  0.000022	  0.000022	diff=6.43063e-09
  0.001299	  0.001294	diff=4.62326e-06
 -0.000002	 -0.000002	diff=7.27135e-09
  0.313380	  0.312742	diff=0.000638568
 -0.000000	 -0.000000	diff=4.06056e-12
  0.000000	  0.000000	diff=6.57257e-12
  0.000000	  0.000000	diff=1.71828e-11
  0.000000	  0.000000	diff=2.16677e-12
 -0.000000	 -0.000000	diff=4.05573e-11
  0.000000	  0.000000	diff=1.6424e-13
  0.000093	  0.000093	diff=2.10669e-08
  0.000001	  0.000001	diff=4.86868e-12
  0.000000	 -0.000000	diff=5.26033e-15
  0.000000	  0.000000	diff=3.87712e-15
  0.000000	  0.000000	diff=4.64522e-13
 -0.000000	 -0.000000	diff=2.45833e-14
 -0.000000	 -0.000000	diff=1.30493e-12
  local_diff=0.0170287
# W_tgt{2}, [8 4]
  1.091745	  1.091626	diff=0.000118648
  4.192289	  4.233780	diff=0.0414911
  0.000287	  0.000286	diff=1.11768e-06
  0.902617	  0.898593	diff=0.00402395
  0.890615	  0.887161	diff=0.00345471
  0.060798	  0.060988	diff=0.000189936
 -0.046559	 -0.046293	diff=0.000266086
 38.532209	 38.968505	diff=0.436296
 -0.010711	 -0.010716	diff=5.19482e-06
  0.024048	  0.024040	diff=8.11333e-06
  0.002336	  0.002336	diff=3.49121e-07
 -0.000224	 -0.000224	diff=1.92302e-08
 -0.012751	 -0.012761	diff=1.00365e-05
  0.041811	  0.041798	diff=1.36646e-05
 -0.047697	 -0.047824	diff=0.000126617
  0.082714	  0.082606	diff=0.00010845
 -0.248198	 -0.248230	diff=3.24239e-05
 -0.053957	 -0.054108	diff=0.000151385
  0.006519	  0.006518	diff=8.91495e-07
  0.070235	  0.070191	diff=4.42288e-05
 -0.238379	 -0.238429	diff=4.94201e-05
  0.069638	  0.069633	diff=4.88688e-06
 -0.093243	 -0.093033	diff=0.000210123
  1.775535	  1.742686	diff=0.0328484
  0.775954	  0.775078	diff=0.000875405
 -0.050000	 -0.050333	diff=0.000332733
  0.362851	  0.362541	diff=0.000309115
  0.324979	  0.324915	diff=6.45594e-05
  0.601157	  0.601008	diff=0.000148568
 -0.256181	 -0.256346	diff=0.000164902
 -1.309536	 -1.309195	diff=0.000341046
  9.959920	  9.944848	diff=0.0150717
  local_diff=0.536764
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000856	 -0.000825	diff=3.14055e-05
 -0.000784	 -0.000757	diff=2.6424e-05
 -0.000000	 -0.000000	diff=2.0968e-09
 -0.000000	 -0.000000	diff=1.7643e-09
  local_diff=5.78334e-05
# W_emb_tgt, [2 5]
 -0.575662	 -0.577380	diff=0.00171794
  0.408298	  0.407218	diff=0.00108073
 -0.000000	 -0.000000	diff=7.96672e-11
  0.000000	  0.000000	diff=1.53357e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.456744	  1.403888	diff=0.052856
 -0.701252	 -0.716624	diff=0.0153716
  0.224772	  0.230019	diff=0.00524738
 -0.120296	 -0.118863	diff=0.00143364
  local_diff=0.0777072
# W_src_char{1}, [8 4]
  0.000003	  0.000003	diff=1.05909e-08
 -0.000000	 -0.000000	diff=2.02953e-12
 -0.000000	 -0.000000	diff=2.23902e-12
  0.000000	  0.000000	diff=1.61394e-12
 10.160854	  9.935015	diff=0.225839
  0.000000	  0.000000	diff=7.08563e-13
  0.000000	  0.000000	diff=2.37815e-12
  0.000000	 -0.000000	diff=2.0181e-22
 -0.000007	 -0.000007	diff=2.02923e-07
 -0.000000	 -0.000000	diff=2.11787e-12
  0.000000	  0.000000	diff=8.99783e-12
  0.000000	  0.000000	diff=2.79675e-12
-23.943848	-24.894917	diff=0.95107
  0.000000	  0.000000	diff=2.02532e-12
  0.000000	  0.000000	diff=2.21194e-12
  0.000000	 -0.000000	diff=1.73423e-22
  0.000000	 -0.000000	diff=9.33169e-16
  0.000000	 -0.000000	diff=1.02391e-23
  0.000000	  0.000000	diff=9.61258e-20
  0.000000	  0.000000	diff=4.81641e-17
 -0.000000	 -0.000000	diff=2.49656e-11
  0.000000	  0.000000	diff=4.64024e-17
  0.000000	 -0.000000	diff=1.75327e-19
  0.000000	 -0.000000	diff=5.22495e-38
  0.000000	  0.000000	diff=1.34361e-17
  0.000000	 -0.000000	diff=1.50633e-18
  0.000000	  0.000000	diff=3.47924e-23
  0.000000	  0.000000	diff=1.97763e-14
 -0.000000	 -0.000000	diff=2.44691e-13
  0.000000	  0.000000	diff=2.78945e-13
  0.000000	 -0.000000	diff=2.57932e-14
  0.000000	 -0.000000	diff=7.69286e-33
  local_diff=1.17691
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 15.586122	 15.109190	diff=0.476931
 13.177160	 12.822358	diff=0.354802
  0.000000	  0.000000	diff=1.32953e-12
 -0.000000	 -0.000000	diff=5.5001e-13
  0.000000	 -0.000000	diff=3.2921e-17
  0.000000	 -0.000000	diff=2.92454e-17
  0.000000	  0.000000	diff=1.17853e-09
  0.000000	  0.000000	diff=9.01249e-10
  local_diff=0.831734
# W_pos, [2 2]
 -0.217919	 -0.218103	diff=0.000183747
  0.483830	  0.484068	diff=0.00023771
 -0.125019	 -0.124657	diff=0.000362585
  0.378243	  0.378271	diff=2.8014e-05
  local_diff=0.000812056
# v_pos, [1 2]
  0.412027	  0.411857	diff=0.000170337
  0.233546	  0.233076	diff=0.000469651
  local_diff=0.000639989
# W_h, [2 4]
  0.015994	  0.015993	diff=5.30546e-07
 -0.034089	 -0.034098	diff=9.27334e-06
 -0.035199	 -0.035199	diff=1.20536e-07
  0.054150	  0.054124	diff=2.61775e-05
 -2.844330	 -2.847571	diff=0.00324078
 -1.580069	 -1.620616	diff=0.0405469
  0.684245	  0.685054	diff=0.000809494
 19.387251	 19.363676	diff=0.023575
  local_diff=0.0682083
# W_soft, [5 2]
 -8.672417	 -8.674057	diff=0.00163963
 -0.404973	 -0.405190	diff=0.000217024
 -3.926337	 -3.930280	diff=0.00394315
 -2.793095	 -2.796145	diff=0.00305023
 15.813198	 15.805672	diff=0.00752536
 -1.332619	 -1.332671	diff=5.25189e-05
 -0.071481	 -0.071492	diff=1.13061e-05
 -0.780922	 -0.781046	diff=0.000123784
 -0.446513	 -0.446599	diff=8.61229e-05
  2.632029	  2.631808	diff=0.000220574
  local_diff=0.0168697
# Num params=230, abs_diff=2.73159
Elapsed time is 4.078251 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  4.324572	  4.329419	diff=0.00484667
 -0.331228	 -0.331366	diff=0.000138104
  0.588623	  0.588530	diff=9.22554e-05
  0.111073	  0.111060	diff=1.28187e-05
  6.463708	  6.467830	diff=0.00412279
 -0.185197	 -0.185126	diff=7.10525e-05
-18.113947	-17.943743	diff=0.170204
  7.244580	  7.255279	diff=0.0106994
 -0.620006	 -0.619567	diff=0.000439442
 -0.018023	 -0.018012	diff=1.10827e-05
 -0.064630	 -0.064630	diff=3.40562e-07
 -0.009593	 -0.009594	diff=9.56907e-08
 -0.812380	 -0.811913	diff=0.000467466
 -0.034353	 -0.034332	diff=2.09404e-05
  2.882679	  2.895560	diff=0.0128811
 -1.075454	 -1.073925	diff=0.00152854
 -3.653347	 -3.658150	diff=0.00480313
  0.888347	  0.887601	diff=0.000746011
 -0.818367	 -0.818735	diff=0.000368386
 -0.232716	 -0.232815	diff=9.91505e-05
 -7.101643	 -7.124766	diff=0.0231226
  0.839753	  0.839261	diff=0.000492431
  6.718279	  6.727021	diff=0.00874214
 -0.797546	 -0.799309	diff=0.00176292
  0.514372	  0.516207	diff=0.00183422
 -0.376261	 -0.376379	diff=0.000118596
  0.180922	  0.180959	diff=3.68252e-05
 -0.062844	 -0.062911	diff=6.68727e-05
  0.930418	  0.936591	diff=0.00617317
 -0.338406	 -0.338425	diff=1.99468e-05
 -2.216058	 -2.208878	diff=0.00718035
  0.510835	  0.510758	diff=7.63309e-05
  local_diff=0.261179
# W_src{2}, [8 4]
  1.042105	  1.044402	diff=0.00229638
 -0.627607	 -0.627674	diff=6.71045e-05
 -1.553851	 -1.552020	diff=0.00183054
  0.005019	  0.005061	diff=4.26893e-05
  4.687291	  4.672832	diff=0.0144592
  0.218241	  0.219106	diff=0.000864457
 13.394956	 13.443676	diff=0.04872
 -3.428127	 -3.422083	diff=0.0060438
 -1.340341	 -1.339563	diff=0.000778083
  1.477720	  1.479700	diff=0.00197919
 -0.658918	 -0.657979	diff=0.00093831
  0.023196	  0.023219	diff=2.30944e-05
 -2.764122	 -2.749110	diff=0.0150122
  3.104533	  3.108899	diff=0.00436537
 13.092597	 13.162516	diff=0.0699189
  1.265929	  1.267103	diff=0.00117332
 10.226034	 10.251406	diff=0.0253714
  0.143157	  0.155351	diff=0.0121944
 -2.200053	 -2.189280	diff=0.0107729
  1.145905	  1.148980	diff=0.00307552
 -6.273640	 -6.267069	diff=0.00657169
  2.937934	  2.941314	diff=0.00338013
 10.499264	 10.535934	diff=0.0366701
  0.562273	  0.561485	diff=0.000788191
 -7.187270	 -7.177355	diff=0.0099151
 -1.814562	 -1.805846	diff=0.00871528
  3.317264	  3.326661	diff=0.00939698
 -0.945904	 -0.944004	diff=0.00189906
  4.336298	  4.347701	diff=0.0114033
 -3.391534	 -3.382517	diff=0.0090169
-19.750143	-19.623044	diff=0.127098
 -0.546571	 -0.547683	diff=0.00111215
  local_diff=0.445894
# W_tgt{1}, [8 6]
  0.000045	  0.000045	diff=5.49863e-08
 -0.054127	 -0.025999	diff=0.0281281
-10.008903	-10.001618	diff=0.00728527
  0.000001	  0.000001	diff=6.87139e-10
  0.000026	  0.000026	diff=5.47147e-09
  0.031967	  0.032013	diff=4.57659e-05
  0.000003	  0.000003	diff=8.27575e-08
  0.000004	  0.000004	diff=8.39148e-09
  0.000217	  0.000218	diff=1.34704e-06
 -0.249481	 -0.219866	diff=0.0296144
  9.545239	  9.552686	diff=0.00744687
  0.000003	  0.000003	diff=1.61417e-08
  0.000127	  0.000128	diff=1.25353e-07
  0.153901	  0.154957	diff=0.0010565
 -0.000003	 -0.000003	diff=7.29557e-08
  0.000017	  0.000017	diff=1.91847e-07
  0.000158	  0.000159	diff=7.23704e-07
 -0.433972	 -0.430347	diff=0.0036248
  2.094480	  2.093994	diff=0.000485939
 -0.000001	 -0.000001	diff=4.27257e-09
  0.000091	  0.000091	diff=6.36411e-08
  0.109010	  0.109536	diff=0.00052605
 -0.000001	 -0.000001	diff=3.11783e-09
 -0.000007	 -0.000007	diff=2.9232e-08
  0.000068	  0.000068	diff=1.29901e-07
 -0.263748	 -0.262513	diff=0.00123521
  1.897319	  1.899002	diff=0.00168277
 -0.000000	 -0.000000	diff=1.27082e-09
  0.000039	  0.000039	diff=1.15996e-08
  0.046432	  0.046530	diff=9.78173e-05
 -0.000001	 -0.000001	diff=3.16209e-09
 -0.000005	 -0.000005	diff=1.37037e-08
  0.000001	  0.000001	diff=2.61678e-09
 -0.200342	 -0.199494	diff=0.000848227
  2.931865	  2.932478	diff=0.000612672
 -0.000002	 -0.000002	diff=3.94577e-09
 -0.000000	 -0.000000	diff=1.68329e-10
 -0.000391	 -0.000390	diff=1.73139e-06
  0.000000	  0.000000	diff=3.83274e-12
 -0.000010	 -0.000010	diff=6.54153e-08
  0.000000	  0.000000	diff=2.23777e-12
 -0.000010	 -0.000010	diff=7.99297e-11
  0.001736	  0.001736	diff=1.22201e-07
 -0.000000	 -0.000000	diff=2.42177e-12
 -0.000000	 -0.000000	diff=1.63815e-12
 -0.000000	 -0.000000	diff=4.05621e-13
  0.000000	  0.000000	diff=5.7741e-16
 -0.000000	 -0.000000	diff=3.97648e-13
  local_diff=0.0826953
# W_tgt{2}, [8 4]
  1.032111	  1.032655	diff=0.000544841
 13.028652	 13.254321	diff=0.225669
 -0.000983	 -0.000979	diff=3.64668e-06
  3.646309	  3.636550	diff=0.00975904
 -2.908141	 -2.895709	diff=0.0124324
  0.693177	  0.695876	diff=0.00269848
  0.379656	  0.378852	diff=0.000803833
116.331307	118.068266	diff=1.73696
 -0.029679	 -0.029652	diff=2.68008e-05
 -0.038578	 -0.038487	diff=9.0816e-05
  0.007639	  0.007637	diff=2.20324e-06
  0.005681	  0.005682	diff=7.64884e-07
 -0.103159	 -0.103034	diff=0.000125777
 -0.009310	 -0.009313	diff=2.56979e-06
 -0.041164	 -0.041098	diff=6.62757e-05
 -0.011253	 -0.011147	diff=0.00010554
 -2.102136	 -2.544654	diff=0.442519
 -2.777852	 -2.775627	diff=0.0022241
  1.414831	  0.872031	diff=0.5428
 -0.880016	 -0.879343	diff=0.000673097
 -1.330893	 -1.328916	diff=0.00197726
 -0.323810	 -0.323507	diff=0.000302081
 -2.188510	 -2.256507	diff=0.0679973
-16.388275	-16.016043	diff=0.372232
  2.036040	  1.804483	diff=0.231558
  1.092472	  1.100273	diff=0.00780097
  0.963345	  0.745702	diff=0.217644
  1.908200	  1.909520	diff=0.00132009
  0.931433	  0.932413	diff=0.000980259
  0.073906	  0.074015	diff=0.000108591
 -0.482397	 -0.512977	diff=0.0305792
 33.582857	 33.659825	diff=0.0769681
  local_diff=3.98697
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=4.06614e-09
 -0.000000	 -0.000000	diff=4.64057e-09
 -0.000003	 -0.000003	diff=1.27472e-07
 -0.000003	 -0.000003	diff=1.07174e-07
  local_diff=2.43353e-07
# W_emb_tgt, [2 5]
 -5.428852	 -5.252579	diff=0.176273
  3.771173	  3.782026	diff=0.0108537
  0.000000	  0.000000	diff=1.25552e-09
 -0.000000	 -0.000000	diff=7.49518e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.406273	  1.524074	diff=0.117802
 -0.037163	 -0.039666	diff=0.00250274
  0.001391	  0.001428	diff=3.67636e-05
 -0.000921	 -0.000908	diff=1.30425e-05
  local_diff=0.307481
# W_src_char{1}, [8 4]
 -0.693098	  0.060096	diff=0.753194
 -0.030217	 -0.000000	diff=0.0302174
 -0.000000	 -0.000000	diff=2.95921e-07
  1.163793	 -0.000000	diff=1.16379
 -1.708519	 -0.207675	diff=1.50084
  1.469561	 -0.000637	diff=1.4702
 -0.005660	 -0.000689	diff=0.00497078
 -0.001216	 -0.000000	diff=0.00121595
 12.340248	  1.583486	diff=10.7568
  1.841296	  0.000000	diff=1.8413
  0.000021	  0.000003	diff=1.80815e-05
-77.566999	 -0.000001	diff=77.567
 91.028539	 12.730958	diff=78.2976
-97.830460	 -0.000284	diff=97.8302
  0.348894	  0.042257	diff=0.306637
  0.074657	  0.000000	diff=0.0746571
 -0.000342	 -0.000042	diff=0.000299997
 -0.000050	 -0.000000	diff=4.98501e-05
 -0.000000	 -0.000000	diff=4.66634e-10
  0.001924	  0.000000	diff=0.00192379
 -0.002814	 -0.000343	diff=0.00247109
  0.002423	  0.000000	diff=0.00242279
 -0.000009	 -0.000001	diff=8.20197e-06
 -0.000002	 -0.000000	diff=1.99822e-06
  0.000002	  0.000000	diff=1.94396e-06
  0.000000	  0.000000	diff=3.2303e-07
  0.000000	  0.000000	diff=1.093e-11
 -0.000013	 -0.000000	diff=1.24657e-05
  0.000018	  0.000002	diff=1.60123e-05
 -0.000016	 -0.000000	diff=1.56992e-05
  0.000000	  0.000000	diff=5.31461e-08
  0.000000	  0.000000	diff=1.2966e-08
  local_diff=271.606
# W_src_char{2}, [8 4]
  6.337718	  6.513114	diff=0.175396
 -2.577649	 -2.570914	diff=0.00673473
  0.000322	  0.000322	diff=4.42382e-08
 -0.000743	 -0.000743	diff=1.65411e-07
  2.220676	  2.285932	diff=0.0652559
 -1.339978	 -1.338050	diff=0.00192726
 -3.308328	 -3.260837	diff=0.0474912
 27.394719	 28.260769	diff=0.86605
 -1.291704	 -1.268819	diff=0.0228848
 -3.110743	 -3.107906	diff=0.00283698
  0.756523	  0.746946	diff=0.00957697
  0.132479	  0.132615	diff=0.000135869
 -1.108788	 -1.079632	diff=0.029156
 -2.455386	 -2.451824	diff=0.00356202
  2.155480	  2.176828	diff=0.0213479
-19.275865	-18.927118	diff=0.348746
 -3.260878	 -3.250167	diff=0.010711
  2.451705	  2.473793	diff=0.0220884
-100.853885	-101.142423	diff=0.288538
  1.652110	  1.653420	diff=0.00131035
 -3.206429	 -3.183037	diff=0.0233916
  4.534028	  4.560607	diff=0.0265788
  0.158414	  0.158879	diff=0.000464636
 -2.500509	 -2.487995	diff=0.0125142
  0.191921	  0.188809	diff=0.0031122
  0.652289	  0.653874	diff=0.00158419
 88.940886	 89.663599	diff=0.722713
 -0.993744	 -0.993488	diff=0.000256378
 -0.397557	 -0.395133	diff=0.00242317
 -1.987455	 -1.976781	diff=0.0106739
  0.042875	  0.042908	diff=3.29452e-05
 -0.668890	 -0.668005	diff=0.000885675
  local_diff=2.72838
# W_src_char{3}, [8 4]
 18.066224	 17.783483	diff=0.282741
-19.259842	-19.338686	diff=0.0788445
 -2.385755	 -2.385826	diff=7.05901e-05
  0.004913	  0.005201	diff=0.000287208
-13.540633	-13.768389	diff=0.227756
 -1.218732	 -1.217502	diff=0.00122963
-27.248474	-25.178270	diff=2.0702
  1.958930	  1.966865	diff=0.00793496
-17.536578	-17.892852	diff=0.356274
 10.934581	 10.781450	diff=0.153131
  0.171307	  0.171365	diff=5.84928e-05
 -0.142862	 -0.142570	diff=0.000291601
-20.575114	-20.631897	diff=0.0567828
 -0.421269	 -0.421044	diff=0.000225853
 -7.915731	 -7.815998	diff=0.0997333
  0.067247	  0.068854	diff=0.00160664
 -0.582348	 -0.583419	diff=0.00107038
  6.877787	  6.903140	diff=0.0253528
  3.783590	  3.786289	diff=0.00269954
  0.133456	  0.133199	diff=0.000257671
 51.518646	 52.238165	diff=0.719519
  0.463624	  0.464958	diff=0.00133382
 12.482121	 12.833150	diff=0.351029
 -2.090258	 -2.080289	diff=0.0099696
  0.083846	  0.083825	diff=2.13074e-05
 -0.904266	 -0.903468	diff=0.000798684
 -0.009218	 -0.009217	diff=1.14826e-06
 -0.006002	 -0.006007	diff=4.69561e-06
  4.239437	  4.234313	diff=0.00512394
 -0.065096	 -0.065070	diff=2.58949e-05
 -1.193442	 -1.188342	diff=0.0051001
  0.104124	  0.104123	diff=1.56398e-06
  local_diff=4.45948
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000001	diff=2.13477e-08
 -0.000001	 -0.000001	diff=1.5162e-08
 -0.009340	  0.001678	diff=0.0110178
  0.143046	 -0.026719	diff=0.169764
-182.503774	-64.459374	diff=118.044
-18.050949	-45.523645	diff=27.4727
  0.000000	  0.000000	diff=1.0256e-11
 -0.000000	 -0.000000	diff=1.0027e-11
  local_diff=145.698
# W_pos, [2 2]
  0.022763	  0.022704	diff=5.90464e-05
  0.035413	  0.035353	diff=5.95039e-05
  1.003064	  1.001371	diff=0.00169271
  0.378507	  0.379923	diff=0.00141615
  local_diff=0.00322741
# v_pos, [1 2]
  0.032668	  0.032529	diff=0.00013942
 -0.961948	 -0.961567	diff=0.000381445
  local_diff=0.000520865
# W_h, [2 4]
-17.875289	-17.859539	diff=0.0157501
 -6.492720	 -6.487992	diff=0.00472768
 16.915320	 16.929704	diff=0.0143835
  5.228884	  5.233018	diff=0.00413409
  2.276291	  2.278450	diff=0.0021592
 10.442975	 10.451333	diff=0.00835748
 14.342549	 14.354861	diff=0.0123112
  7.875415	  7.880628	diff=0.00521296
  local_diff=0.0670363
# W_soft, [5 2]
  2.202445	  2.201546	diff=0.000898486
 10.428142	 10.427037	diff=0.00110504
 -3.383458	 -3.384862	diff=0.0014037
 -7.568194	 -7.570694	diff=0.0024998
 -1.671593	 -1.673028	diff=0.0014347
 -3.837047	 -3.837592	diff=0.000545041
 11.847776	 11.846676	diff=0.00109992
 -1.892440	 -1.892920	diff=0.000479488
 -3.828556	 -3.829071	diff=0.00051496
 -2.286906	 -2.287093	diff=0.000186316
  local_diff=0.0101674
# Num params=294, abs_diff=429.657
Elapsed time is 5.535959 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  4.239468	  4.235733	diff=0.00373503
  0.041744	  0.041956	diff=0.000212467
  0.134459	  0.134460	diff=1.45989e-06
  0.048284	  0.048284	diff=2.70739e-07
  6.677334	  6.669465	diff=0.00786912
  0.223335	  0.223426	diff=9.17277e-05
-17.077464	-17.159170	diff=0.0817058
  2.457568	  2.464506	diff=0.00693819
 -0.092104	 -0.092100	diff=4.06146e-06
 -0.002583	 -0.002581	diff=1.33583e-06
 -0.028928	 -0.028928	diff=2.44256e-07
 -0.001225	 -0.001225	diff=1.87984e-09
 -0.152248	 -0.152247	diff=1.53339e-06
 -0.002319	 -0.002317	diff=2.11492e-06
  0.429705	  0.430301	diff=0.000595084
 -0.147260	 -0.147042	diff=0.000217757
 -0.090127	 -0.089668	diff=0.000459107
  0.060061	  0.060530	diff=0.000468867
 -0.025492	 -0.025488	diff=4.20097e-06
 -0.103764	 -0.103772	diff=8.07422e-06
 -0.334217	 -0.327274	diff=0.00694355
  0.076744	  0.076831	diff=8.71063e-05
  0.076740	  0.076975	diff=0.000234603
 -0.015784	 -0.015522	diff=0.000262176
  0.042568	  0.042616	diff=4.82569e-05
 -0.079303	 -0.079294	diff=9.01737e-06
  0.006637	  0.006639	diff=1.56746e-06
 -0.036321	 -0.036324	diff=2.4577e-06
  0.143298	  0.143872	diff=0.000573709
 -0.032493	 -0.032476	diff=1.70526e-05
 -0.018199	 -0.018178	diff=2.04217e-05
  0.089817	  0.090096	diff=0.000278757
  local_diff=0.110795
# W_src{2}, [8 4]
 -1.259129	 -1.260475	diff=0.0013461
 -4.753530	 -4.765688	diff=0.0121582
 -0.339049	 -0.338591	diff=0.000458308
 -0.056482	 -0.056496	diff=1.42808e-05
  4.769115	  4.772342	diff=0.003227
 -7.050408	 -7.042053	diff=0.0083548
  1.146840	  1.150869	diff=0.00402922
 -1.389057	 -1.387571	diff=0.00148604
  0.082730	  0.082793	diff=6.36929e-05
  0.864097	  0.863795	diff=0.000301741
 -0.199858	 -0.199639	diff=0.000218935
 -0.003557	 -0.003559	diff=1.55675e-06
 -0.767079	 -0.766958	diff=0.000120254
  1.713566	  1.711937	diff=0.0016288
 -1.119554	 -1.110268	diff=0.00928628
 -0.154562	 -0.153887	diff=0.000674345
  2.323334	  2.317439	diff=0.00589462
  0.312946	  0.314615	diff=0.00166837
 -0.729732	 -0.728165	diff=0.00156698
 -0.112262	 -0.113343	diff=0.00108151
 -1.315223	 -1.336770	diff=0.0215469
  0.994234	  0.994578	diff=0.000344047
  0.580259	  0.583443	diff=0.00318427
  0.241830	  0.242576	diff=0.000746438
 -0.375652	 -0.375210	diff=0.000442102
 -0.812701	 -0.810763	diff=0.00193758
  2.137219	  2.142696	diff=0.00547679
 -0.134299	 -0.133844	diff=0.000454351
  1.217776	  1.219254	diff=0.00147852
 -0.704619	 -0.709445	diff=0.00482602
 -5.114278	 -5.114800	diff=0.000521975
 -0.079147	 -0.079485	diff=0.000338079
  local_diff=0.0948781
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=2.21089e-12
 -1.039474	 -1.082798	diff=0.043324
 -0.393778	 -0.443971	diff=0.0501937
  0.000000	  0.000000	diff=6.29994e-13
 -0.000000	 -0.000000	diff=2.82001e-12
  0.020289	  0.020407	diff=0.000118059
  0.000000	  0.000000	diff=1.38039e-09
  0.000000	  0.000000	diff=1.64825e-10
  0.000000	  0.000000	diff=1.12839e-09
 -0.016755	 -0.066120	diff=0.0493645
  0.470145	  0.423485	diff=0.0466605
 -0.000081	 -0.000081	diff=6.47351e-07
 -0.000002	 -0.000002	diff=3.17923e-08
  0.072708	  0.073606	diff=0.000898087
 -0.000000	 -0.000000	diff=1.18064e-08
 -2.249473	 -2.314170	diff=0.0646977
  0.000000	  0.000000	diff=1.85347e-12
 -0.394042	 -0.396909	diff=0.00286684
  0.501905	  0.497108	diff=0.00479732
  0.000062	  0.000062	diff=3.8565e-07
 -0.000001	 -0.000001	diff=4.10659e-09
 -0.003288	 -0.003291	diff=2.76428e-06
 -0.000000	 -0.000000	diff=9.61857e-11
 -0.126397	 -0.126592	diff=0.000195106
 -0.000000	 -0.000000	diff=2.65348e-10
  0.111608	  0.108854	diff=0.00275425
 -0.109656	 -0.111821	diff=0.00216574
  0.000062	  0.000063	diff=3.86573e-07
 -0.000001	 -0.000001	diff=4.54445e-09
 -0.043970	 -0.043810	diff=0.000159677
  0.000000	  0.000000	diff=1.46906e-11
  0.178178	  0.177793	diff=0.000385234
  0.000000	  0.000000	diff=1.96108e-12
  0.012162	  0.010890	diff=0.00127182
  0.219390	  0.215752	diff=0.003638
 -0.000038	 -0.000038	diff=1.44112e-07
  0.000000	  0.000000	diff=1.76671e-12
 -0.014817	 -0.014755	diff=6.20659e-05
  0.000000	 -0.000000	diff=7.7559e-16
 -0.000000	 -0.000000	diff=8.26214e-11
  0.000000	 -0.000000	diff=5.62928e-16
 -0.000027	 -0.000027	diff=5.72497e-08
  0.000245	  0.000245	diff=1.45515e-08
 -0.000038	 -0.000038	diff=1.43812e-07
 -0.000000	 -0.000000	diff=1.87409e-12
 -0.000020	 -0.000020	diff=1.63017e-09
  0.000000	  0.000000	diff=1.66113e-15
 -0.000000	 -0.000000	diff=2.7167e-12
  local_diff=0.273557
# W_tgt{2}, [8 4]
  0.544899	  0.547541	diff=0.00264144
-17.874075	-18.063936	diff=0.189861
 -0.003786	 -0.003768	diff=1.7725e-05
  1.625220	  1.620067	diff=0.00515364
 -0.183542	 -0.182891	diff=0.000651152
  0.296260	  0.295182	diff=0.00107752
 -0.246059	 -0.247054	diff=0.000995072
 -1.773923	 -2.296897	diff=0.522974
 -0.020158	 -0.020069	diff=8.84685e-05
 -0.223385	 -0.223580	diff=0.000194872
  0.011001	  0.010979	diff=2.18206e-05
  0.005487	  0.005443	diff=4.41295e-05
 -0.613539	 -0.612478	diff=0.00106106
 -0.638392	 -0.638937	diff=0.000544921
 -3.095551	 -3.006778	diff=0.0887725
 -0.057794	 -0.057821	diff=2.70485e-05
  3.326195	  3.320794	diff=0.00540088
  1.440400	  1.434753	diff=0.00564666
 -0.883406	 -0.882950	diff=0.000456083
 -3.332209	 -3.340284	diff=0.0080749
 -3.001453	 -2.996361	diff=0.0050926
 -0.340190	 -0.340255	diff=6.48014e-05
 -0.177630	 -0.178235	diff=0.000605324
-22.220794	-22.088423	diff=0.13237
 -8.015874	 -8.064662	diff=0.0487887
 -1.475849	 -1.476377	diff=0.000527916
 -2.150891	 -2.152165	diff=0.00127396
 11.460450	 11.385892	diff=0.0745579
 -0.753736	 -0.754037	diff=0.000301775
  1.050926	  1.051846	diff=0.000920072
  0.238251	  0.239993	diff=0.00174203
 66.020871	 63.893717	diff=2.12715
  local_diff=3.2271
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.37362e-10
  0.000000	  0.000000	diff=3.13273e-10
 -0.000000	 -0.000000	diff=2.12106e-08
 -0.000000	 -0.000000	diff=1.78221e-08
  local_diff=3.95834e-08
# W_emb_tgt, [2 5]
  2.486944	  2.262133	diff=0.224811
 -0.174990	 -0.203254	diff=0.0282637
 -0.000000	 -0.000000	diff=9.15553e-11
  0.000071	  0.000071	diff=4.41112e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.122024	 -0.120878	diff=0.00114524
  0.032116	  0.033411	diff=0.001295
 -0.063212	 -0.061988	diff=0.00122367
  local_diff=0.256739
# W_src_char{1}, [8 4]
 -0.106363	 -0.066298	diff=0.0400653
 -0.005876	 -0.002570	diff=0.00330593
 -0.000000	 -0.000000	diff=1.17801e-09
  0.758779	  0.332143	diff=0.426637
 -1.214944	 -0.899618	diff=0.315326
  0.969463	  0.424428	diff=0.545035
 -0.000648	 -0.000480	diff=0.000167558
 -0.000074	 -0.000032	diff=4.16654e-05
  5.544139	  4.119470	diff=1.42467
  0.358791	  0.157566	diff=0.201225
  0.000000	  0.000000	diff=6.96784e-08
-48.401922	-20.361099	diff=28.0408
 69.708816	 55.148619	diff=14.5602
-62.374193	-26.017326	diff=36.3569
  0.039997	  0.029433	diff=0.0105635
  0.004573	  0.001986	diff=0.00258687
 -0.000008	 -0.000006	diff=1.9449e-06
 -0.000000	 -0.000000	diff=2.74051e-07
  0.000000	 -0.000000	diff=2.73682e-13
  0.000063	  0.000028	diff=3.54121e-05
 -0.000101	 -0.000075	diff=2.60393e-05
  0.000080	  0.000035	diff=4.52495e-05
 -0.000000	 -0.000000	diff=1.39072e-08
 -0.000000	 -0.000000	diff=3.45896e-09
  0.000000	  0.000000	diff=3.8054e-09
  0.000000	  0.000000	diff=5.35624e-10
  0.000000	  0.000000	diff=5.38599e-16
 -0.000000	 -0.000000	diff=6.9688e-08
  0.000000	  0.000000	diff=5.12271e-08
 -0.000000	 -0.000000	diff=8.90566e-08
  0.000000	  0.000000	diff=2.39847e-11
  0.000000	  0.000000	diff=6.08308e-12
  local_diff=81.9276
# W_src_char{2}, [8 4]
  4.317792	  4.342306	diff=0.0245137
 -1.366264	 -1.364794	diff=0.0014708
  0.000017	  0.000017	diff=2.20335e-09
 -0.000031	 -0.000031	diff=6.45577e-09
 -0.306835	 -0.304835	diff=0.00199971
 -0.764974	 -0.764701	diff=0.00027335
 -2.386444	 -2.376249	diff=0.0101954
 14.456136	 14.626695	diff=0.170558
-28.076113	-27.490501	diff=0.585612
 -0.745465	 -0.768814	diff=0.0233496
 -9.706600	 -9.617880	diff=0.08872
 -0.163267	 -0.163583	diff=0.000315979
  0.282939	  0.283412	diff=0.000472736
 -0.757191	 -0.763564	diff=0.00637246
  1.569759	  1.574225	diff=0.00446565
 -9.759692	 -9.685800	diff=0.0738917
 -8.459715	 -8.423045	diff=0.0366705
  0.783768	  0.787037	diff=0.00326937
-154.655141	-158.167663	diff=3.51252
  0.853086	  0.851341	diff=0.00174538
 -1.298267	 -1.292997	diff=0.00526992
  2.389263	  2.392053	diff=0.00278947
  0.052862	  0.053006	diff=0.00014465
 -0.607644	 -0.606133	diff=0.00151058
 -1.251771	 -1.254104	diff=0.00233246
  0.213161	  0.213413	diff=0.000252345
146.024835	139.175404	diff=6.84943
 -0.711695	 -0.713216	diff=0.00152087
  0.168348	  0.169968	diff=0.00161988
 -1.602406	 -1.601441	diff=0.000965251
  0.014554	  0.014565	diff=1.0887e-05
 -0.166493	 -0.166379	diff=0.00011382
  local_diff=11.4124
# W_src_char{3}, [8 4]
 16.813710	 15.145303	diff=1.66841
 -9.922044	-10.300193	diff=0.378149
 -0.962938	 -0.965411	diff=0.00247333
  0.029271	  0.029438	diff=0.000166642
-44.858755	-46.474508	diff=1.61575
 -0.325692	 -0.325361	diff=0.000330841
-15.617249	-15.309849	diff=0.307399
  0.257950	  0.259151	diff=0.0012017
-13.796773	-15.252048	diff=1.45528
  8.329970	  7.947291	diff=0.382679
  0.134012	  0.133856	diff=0.000156027
 -0.034315	 -0.034194	diff=0.000121176
  3.552006	  3.223378	diff=0.328628
 -0.098624	 -0.098580	diff=4.38002e-05
 -4.512344	 -4.492722	diff=0.0196217
 -0.004007	 -0.003765	diff=0.00024253
 -0.192418	 -0.192856	diff=0.000438129
  1.550433	  1.554310	diff=0.00387675
  1.248070	  1.245136	diff=0.00293396
 -0.008147	 -0.008114	diff=3.27361e-05
 67.640937	 65.162909	diff=2.47803
  0.042073	  0.042217	diff=0.000144073
  3.403749	  3.453496	diff=0.049747
 -0.203431	 -0.202321	diff=0.00110944
  0.015316	  0.015313	diff=2.70612e-06
 -0.081639	 -0.081592	diff=4.67783e-05
  0.000912	  0.000910	diff=1.91168e-06
 -0.000154	 -0.000153	diff=1.32052e-07
  1.945875	  1.934775	diff=0.0110993
 -0.003281	 -0.003280	diff=8.80397e-07
 -0.190265	 -0.189981	diff=0.000283942
 -0.008976	 -0.008972	diff=3.94469e-06
  local_diff=8.7084
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=9.98855e-11
 -0.000000	 -0.000000	diff=9.2459e-11
 -0.000277	  0.000012	diff=0.000289039
  0.004537	 -0.000276	diff=0.00481263
-179.934184	-178.478213	diff=1.45597
-35.526442	-100.780621	diff=65.2542
  0.000000	 -0.000000	diff=1.19507e-12
  0.000000	  0.000000	diff=1.03112e-12
  local_diff=66.7153
# W_pos, [2 2]
  1.004884	  1.005052	diff=0.00016803
  0.902472	  0.902533	diff=6.15879e-05
 -1.331178	 -1.329815	diff=0.00136334
 -1.320431	 -1.316460	diff=0.00397066
  local_diff=0.00556362
# v_pos, [1 2]
 -1.691751	 -1.690879	diff=0.00087278
  0.662376	  0.665784	diff=0.00340785
  local_diff=0.00428063
# W_h, [2 4]
 -5.369548	 -5.400220	diff=0.0306719
 -5.596769	 -5.592987	diff=0.00378189
 13.752304	 13.777218	diff=0.0249135
 13.215493	 13.250523	diff=0.0350301
  1.946377	  1.947859	diff=0.00148271
  7.764001	  7.766771	diff=0.00276944
  5.127609	  5.116817	diff=0.0107927
  7.057107	  7.028675	diff=0.028432
  local_diff=0.137874
# W_soft, [5 2]
  1.422517	  1.421540	diff=0.000977215
 14.852686	 14.851521	diff=0.00116591
 -6.383755	 -6.387341	diff=0.00358573
 -7.617455	 -7.621959	diff=0.00450442
 -2.261449	 -2.263761	diff=0.00231185
 -3.275126	 -3.275793	diff=0.000666483
 11.098429	 11.096685	diff=0.00174426
 -0.733967	 -0.735009	diff=0.00104239
 -4.644162	 -4.644747	diff=0.000585081
 -2.440977	 -2.441135	diff=0.000157973
  local_diff=0.0167413
# Num params=294, abs_diff=172.891
Elapsed time is 5.480524 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 2, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 2
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  4.324572	  4.329419	diff=0.00484667
 -0.331228	 -0.331366	diff=0.000138104
  0.588623	  0.588530	diff=9.22554e-05
  0.111073	  0.111060	diff=1.28187e-05
  6.463708	  6.467830	diff=0.00412279
 -0.185197	 -0.185126	diff=7.10525e-05
-18.113947	-17.943743	diff=0.170204
  7.244580	  7.255279	diff=0.0106994
 -0.620006	 -0.619567	diff=0.000439442
 -0.018023	 -0.018012	diff=1.10827e-05
 -0.064630	 -0.064630	diff=3.40562e-07
 -0.009593	 -0.009594	diff=9.56907e-08
 -0.812380	 -0.811913	diff=0.000467466
 -0.034353	 -0.034332	diff=2.09404e-05
  2.882679	  2.895560	diff=0.0128811
 -1.075454	 -1.073925	diff=0.00152854
 -3.653347	 -3.658150	diff=0.00480313
  0.888347	  0.887601	diff=0.000746011
 -0.818367	 -0.818735	diff=0.000368386
 -0.232716	 -0.232815	diff=9.91505e-05
 -7.101643	 -7.124766	diff=0.0231226
  0.839753	  0.839261	diff=0.000492431
  6.718279	  6.727021	diff=0.00874214
 -0.797546	 -0.799309	diff=0.00176292
  0.514372	  0.516207	diff=0.00183422
 -0.376261	 -0.376379	diff=0.000118596
  0.180922	  0.180959	diff=3.68252e-05
 -0.062844	 -0.062911	diff=6.68727e-05
  0.930418	  0.936591	diff=0.00617317
 -0.338406	 -0.338425	diff=1.99468e-05
 -2.216058	 -2.208878	diff=0.00718035
  0.510835	  0.510758	diff=7.63309e-05
  local_diff=0.261179
# W_src{2}, [8 4]
  1.042105	  1.044402	diff=0.00229638
 -0.627607	 -0.627674	diff=6.71045e-05
 -1.553851	 -1.552020	diff=0.00183054
  0.005019	  0.005061	diff=4.26893e-05
  4.687291	  4.672832	diff=0.0144592
  0.218241	  0.219106	diff=0.000864457
 13.394956	 13.443676	diff=0.04872
 -3.428127	 -3.422083	diff=0.0060438
 -1.340341	 -1.339563	diff=0.000778083
  1.477720	  1.479700	diff=0.00197919
 -0.658918	 -0.657979	diff=0.00093831
  0.023196	  0.023219	diff=2.30944e-05
 -2.764122	 -2.749110	diff=0.0150122
  3.104533	  3.108899	diff=0.00436537
 13.092597	 13.162516	diff=0.0699189
  1.265929	  1.267103	diff=0.00117332
 10.226034	 10.251406	diff=0.0253714
  0.143157	  0.155351	diff=0.0121944
 -2.200053	 -2.189280	diff=0.0107729
  1.145905	  1.148980	diff=0.00307552
 -6.273640	 -6.267069	diff=0.00657169
  2.937934	  2.941314	diff=0.00338013
 10.499264	 10.535934	diff=0.0366701
  0.562273	  0.561485	diff=0.000788191
 -7.187270	 -7.177355	diff=0.0099151
 -1.814562	 -1.805846	diff=0.00871528
  3.317264	  3.326661	diff=0.00939698
 -0.945904	 -0.944004	diff=0.00189906
  4.336298	  4.347701	diff=0.0114033
 -3.391534	 -3.382517	diff=0.0090169
-19.750143	-19.623044	diff=0.127098
 -0.546571	 -0.547683	diff=0.00111215
  local_diff=0.445894
# W_tgt{1}, [8 6]
  0.000045	  0.000045	diff=5.49863e-08
 -0.054127	 -0.025999	diff=0.0281281
-10.008903	-10.001618	diff=0.00728527
  0.000001	  0.000001	diff=6.87139e-10
  0.000026	  0.000026	diff=5.47147e-09
  0.031967	  0.032013	diff=4.57659e-05
  0.000003	  0.000003	diff=8.27575e-08
  0.000004	  0.000004	diff=8.39148e-09
  0.000217	  0.000218	diff=1.34704e-06
 -0.249481	 -0.219866	diff=0.0296144
  9.545239	  9.552686	diff=0.00744687
  0.000003	  0.000003	diff=1.61417e-08
  0.000127	  0.000128	diff=1.25353e-07
  0.153901	  0.154957	diff=0.0010565
 -0.000003	 -0.000003	diff=7.29557e-08
  0.000017	  0.000017	diff=1.91847e-07
  0.000158	  0.000159	diff=7.23704e-07
 -0.433972	 -0.430347	diff=0.0036248
  2.094480	  2.093994	diff=0.000485939
 -0.000001	 -0.000001	diff=4.27257e-09
  0.000091	  0.000091	diff=6.36411e-08
  0.109010	  0.109536	diff=0.00052605
 -0.000001	 -0.000001	diff=3.11783e-09
 -0.000007	 -0.000007	diff=2.9232e-08
  0.000068	  0.000068	diff=1.29901e-07
 -0.263748	 -0.262513	diff=0.00123521
  1.897319	  1.899002	diff=0.00168277
 -0.000000	 -0.000000	diff=1.27082e-09
  0.000039	  0.000039	diff=1.15996e-08
  0.046432	  0.046530	diff=9.78173e-05
 -0.000001	 -0.000001	diff=3.16209e-09
 -0.000005	 -0.000005	diff=1.37037e-08
  0.000001	  0.000001	diff=2.61678e-09
 -0.200342	 -0.199494	diff=0.000848227
  2.931865	  2.932478	diff=0.000612672
 -0.000002	 -0.000002	diff=3.94577e-09
 -0.000000	 -0.000000	diff=1.68329e-10
 -0.000391	 -0.000390	diff=1.73139e-06
  0.000000	  0.000000	diff=3.83274e-12
 -0.000010	 -0.000010	diff=6.54153e-08
  0.000000	  0.000000	diff=2.23777e-12
 -0.000010	 -0.000010	diff=7.99297e-11
  0.001736	  0.001736	diff=1.22201e-07
 -0.000000	 -0.000000	diff=2.42177e-12
 -0.000000	 -0.000000	diff=1.63815e-12
 -0.000000	 -0.000000	diff=4.05621e-13
  0.000000	  0.000000	diff=5.7741e-16
 -0.000000	 -0.000000	diff=3.97648e-13
  local_diff=0.0826953
# W_tgt{2}, [8 4]
  1.032111	  1.032655	diff=0.000544841
 13.028652	 13.254321	diff=0.225669
 -0.000983	 -0.000979	diff=3.64668e-06
  3.646309	  3.636550	diff=0.00975904
 -2.908141	 -2.895709	diff=0.0124324
  0.693177	  0.695876	diff=0.00269848
  0.379656	  0.378852	diff=0.000803833
116.331307	118.068266	diff=1.73696
 -0.029679	 -0.029652	diff=2.68008e-05
 -0.038578	 -0.038487	diff=9.0816e-05
  0.007639	  0.007637	diff=2.20324e-06
  0.005681	  0.005682	diff=7.64884e-07
 -0.103159	 -0.103034	diff=0.000125777
 -0.009310	 -0.009313	diff=2.56979e-06
 -0.041164	 -0.041098	diff=6.62757e-05
 -0.011253	 -0.011147	diff=0.00010554
 -2.102136	 -2.544654	diff=0.442519
 -2.777852	 -2.775627	diff=0.0022241
  1.414831	  0.872031	diff=0.5428
 -0.880016	 -0.879343	diff=0.000673097
 -1.330893	 -1.328916	diff=0.00197726
 -0.323810	 -0.323507	diff=0.000302081
 -2.188510	 -2.256507	diff=0.0679973
-16.388275	-16.016043	diff=0.372232
  2.036040	  1.804483	diff=0.231558
  1.092472	  1.100273	diff=0.00780097
  0.963345	  0.745702	diff=0.217644
  1.908200	  1.909520	diff=0.00132009
  0.931433	  0.932413	diff=0.000980259
  0.073906	  0.074015	diff=0.000108591
 -0.482397	 -0.512977	diff=0.0305792
 33.582857	 33.659825	diff=0.0769681
  local_diff=3.98697
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=4.06614e-09
 -0.000000	 -0.000000	diff=4.64057e-09
 -0.000003	 -0.000003	diff=1.27472e-07
 -0.000003	 -0.000003	diff=1.07174e-07
  local_diff=2.43353e-07
# W_emb_tgt, [2 5]
 -5.428852	 -5.252579	diff=0.176273
  3.771173	  3.782026	diff=0.0108537
  0.000000	  0.000000	diff=1.25552e-09
 -0.000000	 -0.000000	diff=7.49518e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.406273	  1.524074	diff=0.117802
 -0.037163	 -0.039666	diff=0.00250274
  0.001391	  0.001428	diff=3.67636e-05
 -0.000921	 -0.000908	diff=1.30425e-05
  local_diff=0.307481
# W_src_char{1}, [8 4]
 -0.693098	  0.060096	diff=0.753194
 -0.030217	 -0.000000	diff=0.0302174
 -0.000000	 -0.000000	diff=2.95921e-07
  1.163793	 -0.000000	diff=1.16379
 -1.708519	 -0.207675	diff=1.50084
  1.469561	 -0.000637	diff=1.4702
 -0.005660	 -0.000689	diff=0.00497078
 -0.001216	 -0.000000	diff=0.00121595
 12.340248	  1.583486	diff=10.7568
  1.841296	  0.000000	diff=1.8413
  0.000021	  0.000003	diff=1.80815e-05
-77.566999	 -0.000001	diff=77.567
 91.028539	 12.730958	diff=78.2976
-97.830460	 -0.000284	diff=97.8302
  0.348894	  0.042257	diff=0.306637
  0.074657	  0.000000	diff=0.0746571
 -0.000342	 -0.000042	diff=0.000299997
 -0.000050	 -0.000000	diff=4.98501e-05
 -0.000000	 -0.000000	diff=4.66634e-10
  0.001924	  0.000000	diff=0.00192379
 -0.002814	 -0.000343	diff=0.00247109
  0.002423	  0.000000	diff=0.00242279
 -0.000009	 -0.000001	diff=8.20197e-06
 -0.000002	 -0.000000	diff=1.99822e-06
  0.000002	  0.000000	diff=1.94396e-06
  0.000000	  0.000000	diff=3.2303e-07
  0.000000	  0.000000	diff=1.093e-11
 -0.000013	 -0.000000	diff=1.24657e-05
  0.000018	  0.000002	diff=1.60123e-05
 -0.000016	 -0.000000	diff=1.56992e-05
  0.000000	  0.000000	diff=5.31461e-08
  0.000000	  0.000000	diff=1.2966e-08
  local_diff=271.606
# W_src_char{2}, [8 4]
  6.337718	  6.513114	diff=0.175396
 -2.577649	 -2.570914	diff=0.00673473
  0.000322	  0.000322	diff=4.42382e-08
 -0.000743	 -0.000743	diff=1.65411e-07
  2.220676	  2.285932	diff=0.0652559
 -1.339978	 -1.338050	diff=0.00192726
 -3.308328	 -3.260837	diff=0.0474912
 27.394719	 28.260769	diff=0.86605
 -1.291704	 -1.268819	diff=0.0228848
 -3.110743	 -3.107906	diff=0.00283698
  0.756523	  0.746946	diff=0.00957697
  0.132479	  0.132615	diff=0.000135869
 -1.108788	 -1.079632	diff=0.029156
 -2.455386	 -2.451824	diff=0.00356202
  2.155480	  2.176828	diff=0.0213479
-19.275865	-18.927118	diff=0.348746
 -3.260878	 -3.250167	diff=0.010711
  2.451705	  2.473793	diff=0.0220884
-100.853885	-101.142423	diff=0.288538
  1.652110	  1.653420	diff=0.00131035
 -3.206429	 -3.183037	diff=0.0233916
  4.534028	  4.560607	diff=0.0265788
  0.158414	  0.158879	diff=0.000464636
 -2.500509	 -2.487995	diff=0.0125142
  0.191921	  0.188809	diff=0.0031122
  0.652289	  0.653874	diff=0.00158419
 88.940886	 89.663599	diff=0.722713
 -0.993744	 -0.993488	diff=0.000256378
 -0.397557	 -0.395133	diff=0.00242317
 -1.987455	 -1.976781	diff=0.0106739
  0.042875	  0.042908	diff=3.29452e-05
 -0.668890	 -0.668005	diff=0.000885675
  local_diff=2.72838
# W_src_char{3}, [8 4]
 18.066224	 17.783483	diff=0.282741
-19.259842	-19.338686	diff=0.0788445
 -2.385755	 -2.385826	diff=7.05901e-05
  0.004913	  0.005201	diff=0.000287208
-13.540633	-13.768389	diff=0.227756
 -1.218732	 -1.217502	diff=0.00122963
-27.248474	-25.178270	diff=2.0702
  1.958930	  1.966865	diff=0.00793496
-17.536578	-17.892852	diff=0.356274
 10.934581	 10.781450	diff=0.153131
  0.171307	  0.171365	diff=5.84928e-05
 -0.142862	 -0.142570	diff=0.000291601
-20.575114	-20.631897	diff=0.0567828
 -0.421269	 -0.421044	diff=0.000225853
 -7.915731	 -7.815998	diff=0.0997333
  0.067247	  0.068854	diff=0.00160664
 -0.582348	 -0.583419	diff=0.00107038
  6.877787	  6.903140	diff=0.0253528
  3.783590	  3.786289	diff=0.00269954
  0.133456	  0.133199	diff=0.000257671
 51.518646	 52.238165	diff=0.719519
  0.463624	  0.464958	diff=0.00133382
 12.482121	 12.833150	diff=0.351029
 -2.090258	 -2.080289	diff=0.0099696
  0.083846	  0.083825	diff=2.13074e-05
 -0.904266	 -0.903468	diff=0.000798684
 -0.009218	 -0.009217	diff=1.14826e-06
 -0.006002	 -0.006007	diff=4.69561e-06
  4.239437	  4.234313	diff=0.00512394
 -0.065096	 -0.065070	diff=2.58949e-05
 -1.193442	 -1.188342	diff=0.0051001
  0.104124	  0.104123	diff=1.56398e-06
  local_diff=4.45948
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000001	diff=2.13477e-08
 -0.000001	 -0.000001	diff=1.5162e-08
 -0.009340	  0.001678	diff=0.0110178
  0.143046	 -0.026719	diff=0.169764
-182.503774	-64.459374	diff=118.044
-18.050949	-45.523645	diff=27.4727
  0.000000	  0.000000	diff=1.0256e-11
 -0.000000	 -0.000000	diff=1.0027e-11
  local_diff=145.698
# W_pos, [2 2]
  0.022763	  0.022704	diff=5.90464e-05
  0.035413	  0.035353	diff=5.95039e-05
  1.003064	  1.001371	diff=0.00169271
  0.378507	  0.379923	diff=0.00141615
  local_diff=0.00322741
# v_pos, [1 2]
  0.032668	  0.032529	diff=0.00013942
 -0.961948	 -0.961567	diff=0.000381445
  local_diff=0.000520865
# W_h, [2 4]
-17.875289	-17.859539	diff=0.0157501
 -6.492720	 -6.487992	diff=0.00472768
 16.915320	 16.929704	diff=0.0143835
  5.228884	  5.233018	diff=0.00413409
  2.276291	  2.278450	diff=0.0021592
 10.442975	 10.451333	diff=0.00835748
 14.342549	 14.354861	diff=0.0123112
  7.875415	  7.880628	diff=0.00521296
  local_diff=0.0670363
# W_soft, [5 2]
  2.202445	  2.201546	diff=0.000898486
 10.428142	 10.427037	diff=0.00110504
 -3.383458	 -3.384862	diff=0.0014037
 -7.568194	 -7.570694	diff=0.0024998
 -1.671593	 -1.673028	diff=0.0014347
 -3.837047	 -3.837592	diff=0.000545041
 11.847776	 11.846676	diff=0.00109992
 -1.892440	 -1.892920	diff=0.000479488
 -3.828556	 -3.829071	diff=0.00051496
 -2.286906	 -2.287093	diff=0.000186316
  local_diff=0.0101674
# Num params=294, abs_diff=429.657
Elapsed time is 5.444095 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 3, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 3
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  4.324572	  4.329419	diff=0.00484667
 -0.331228	 -0.331366	diff=0.000138104
  0.588623	  0.588530	diff=9.22554e-05
  0.111073	  0.111060	diff=1.28187e-05
  6.463708	  6.467830	diff=0.00412279
 -0.185197	 -0.185126	diff=7.10525e-05
-18.113947	-17.943743	diff=0.170204
  7.244580	  7.255279	diff=0.0106994
 -0.620006	 -0.619567	diff=0.000439442
 -0.018023	 -0.018012	diff=1.10827e-05
 -0.064630	 -0.064630	diff=3.40562e-07
 -0.009593	 -0.009594	diff=9.56907e-08
 -0.812380	 -0.811913	diff=0.000467466
 -0.034353	 -0.034332	diff=2.09404e-05
  2.882679	  2.895560	diff=0.0128811
 -1.075454	 -1.073925	diff=0.00152854
 -3.653347	 -3.658150	diff=0.00480313
  0.888347	  0.887601	diff=0.000746011
 -0.818367	 -0.818735	diff=0.000368386
 -0.232716	 -0.232815	diff=9.91505e-05
 -7.101643	 -7.124766	diff=0.0231226
  0.839753	  0.839261	diff=0.000492431
  6.718279	  6.727021	diff=0.00874214
 -0.797546	 -0.799309	diff=0.00176292
  0.514372	  0.516207	diff=0.00183422
 -0.376261	 -0.376379	diff=0.000118596
  0.180922	  0.180959	diff=3.68252e-05
 -0.062844	 -0.062911	diff=6.68727e-05
  0.930418	  0.936591	diff=0.00617317
 -0.338406	 -0.338425	diff=1.99468e-05
 -2.216058	 -2.208878	diff=0.00718035
  0.510835	  0.510758	diff=7.63309e-05
  local_diff=0.261179
# W_src{2}, [8 4]
  1.042105	  1.044402	diff=0.00229638
 -0.627607	 -0.627674	diff=6.71045e-05
 -1.553851	 -1.552020	diff=0.00183054
  0.005019	  0.005061	diff=4.26893e-05
  4.687291	  4.672832	diff=0.0144592
  0.218241	  0.219106	diff=0.000864457
 13.394956	 13.443676	diff=0.04872
 -3.428127	 -3.422083	diff=0.0060438
 -1.340341	 -1.339563	diff=0.000778083
  1.477720	  1.479700	diff=0.00197919
 -0.658918	 -0.657979	diff=0.00093831
  0.023196	  0.023219	diff=2.30944e-05
 -2.764122	 -2.749110	diff=0.0150122
  3.104533	  3.108899	diff=0.00436537
 13.092597	 13.162516	diff=0.0699189
  1.265929	  1.267103	diff=0.00117332
 10.226034	 10.251406	diff=0.0253714
  0.143157	  0.155351	diff=0.0121944
 -2.200053	 -2.189280	diff=0.0107729
  1.145905	  1.148980	diff=0.00307552
 -6.273640	 -6.267069	diff=0.00657169
  2.937934	  2.941314	diff=0.00338013
 10.499264	 10.535934	diff=0.0366701
  0.562273	  0.561485	diff=0.000788191
 -7.187270	 -7.177355	diff=0.0099151
 -1.814562	 -1.805846	diff=0.00871528
  3.317264	  3.326661	diff=0.00939698
 -0.945904	 -0.944004	diff=0.00189906
  4.336298	  4.347701	diff=0.0114033
 -3.391534	 -3.382517	diff=0.0090169
-19.750143	-19.623044	diff=0.127098
 -0.546571	 -0.547683	diff=0.00111215
  local_diff=0.445894
# W_tgt{1}, [8 6]
  0.000045	  0.000045	diff=5.49863e-08
 -0.054127	 -0.025999	diff=0.0281281
-10.008903	-10.001618	diff=0.00728527
  0.000001	  0.000001	diff=6.87139e-10
  0.000026	  0.000026	diff=5.47147e-09
  0.031967	  0.032013	diff=4.57659e-05
  0.000003	  0.000003	diff=8.27575e-08
  0.000004	  0.000004	diff=8.39148e-09
  0.000217	  0.000218	diff=1.34704e-06
 -0.249481	 -0.219866	diff=0.0296144
  9.545239	  9.552686	diff=0.00744687
  0.000003	  0.000003	diff=1.61417e-08
  0.000127	  0.000128	diff=1.25353e-07
  0.153901	  0.154957	diff=0.0010565
 -0.000003	 -0.000003	diff=7.29557e-08
  0.000017	  0.000017	diff=1.91847e-07
  0.000158	  0.000159	diff=7.23704e-07
 -0.433972	 -0.430347	diff=0.0036248
  2.094480	  2.093994	diff=0.000485939
 -0.000001	 -0.000001	diff=4.27257e-09
  0.000091	  0.000091	diff=6.36411e-08
  0.109010	  0.109536	diff=0.00052605
 -0.000001	 -0.000001	diff=3.11783e-09
 -0.000007	 -0.000007	diff=2.9232e-08
  0.000068	  0.000068	diff=1.29901e-07
 -0.263748	 -0.262513	diff=0.00123521
  1.897319	  1.899002	diff=0.00168277
 -0.000000	 -0.000000	diff=1.27082e-09
  0.000039	  0.000039	diff=1.15996e-08
  0.046432	  0.046530	diff=9.78173e-05
 -0.000001	 -0.000001	diff=3.16209e-09
 -0.000005	 -0.000005	diff=1.37037e-08
  0.000001	  0.000001	diff=2.61678e-09
 -0.200342	 -0.199494	diff=0.000848227
  2.931865	  2.932478	diff=0.000612672
 -0.000002	 -0.000002	diff=3.94577e-09
 -0.000000	 -0.000000	diff=1.68329e-10
 -0.000391	 -0.000390	diff=1.73139e-06
  0.000000	  0.000000	diff=3.83274e-12
 -0.000010	 -0.000010	diff=6.54153e-08
  0.000000	  0.000000	diff=2.23777e-12
 -0.000010	 -0.000010	diff=7.99297e-11
  0.001736	  0.001736	diff=1.22201e-07
 -0.000000	 -0.000000	diff=2.42177e-12
 -0.000000	 -0.000000	diff=1.63815e-12
 -0.000000	 -0.000000	diff=4.05621e-13
  0.000000	  0.000000	diff=5.7741e-16
 -0.000000	 -0.000000	diff=3.97648e-13
  local_diff=0.0826953
# W_tgt{2}, [8 4]
  1.032111	  1.032655	diff=0.000544841
 13.028652	 13.254321	diff=0.225669
 -0.000983	 -0.000979	diff=3.64668e-06
  3.646309	  3.636550	diff=0.00975904
 -2.908141	 -2.895709	diff=0.0124324
  0.693177	  0.695876	diff=0.00269848
  0.379656	  0.378852	diff=0.000803833
116.331307	118.068266	diff=1.73696
 -0.029679	 -0.029652	diff=2.68008e-05
 -0.038578	 -0.038487	diff=9.0816e-05
  0.007639	  0.007637	diff=2.20324e-06
  0.005681	  0.005682	diff=7.64884e-07
 -0.103159	 -0.103034	diff=0.000125777
 -0.009310	 -0.009313	diff=2.56979e-06
 -0.041164	 -0.041098	diff=6.62757e-05
 -0.011253	 -0.011147	diff=0.00010554
 -2.102136	 -2.544654	diff=0.442519
 -2.777852	 -2.775627	diff=0.0022241
  1.414831	  0.872031	diff=0.5428
 -0.880016	 -0.879343	diff=0.000673097
 -1.330893	 -1.328916	diff=0.00197726
 -0.323810	 -0.323507	diff=0.000302081
 -2.188510	 -2.256507	diff=0.0679973
-16.388275	-16.016043	diff=0.372232
  2.036040	  1.804483	diff=0.231558
  1.092472	  1.100273	diff=0.00780097
  0.963345	  0.745702	diff=0.217644
  1.908200	  1.909520	diff=0.00132009
  0.931433	  0.932413	diff=0.000980259
  0.073906	  0.074015	diff=0.000108591
 -0.482397	 -0.512977	diff=0.0305792
 33.582857	 33.659825	diff=0.0769681
  local_diff=3.98697
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=4.06614e-09
 -0.000000	 -0.000000	diff=4.64057e-09
 -0.000003	 -0.000003	diff=1.27472e-07
 -0.000003	 -0.000003	diff=1.07174e-07
  local_diff=2.43353e-07
# W_emb_tgt, [2 5]
 -5.428852	 -5.252579	diff=0.176273
  3.771173	  3.782026	diff=0.0108537
  0.000000	  0.000000	diff=1.25552e-09
 -0.000000	 -0.000000	diff=7.49518e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.406273	  1.524074	diff=0.117802
 -0.037163	 -0.039666	diff=0.00250274
  0.001391	  0.001428	diff=3.67636e-05
 -0.000921	 -0.000908	diff=1.30425e-05
  local_diff=0.307481
# W_src_char{1}, [8 4]
 -0.693098	  0.060096	diff=0.753194
 -0.030217	 -0.000000	diff=0.0302174
 -0.000000	 -0.000000	diff=2.95921e-07
  1.163793	 -0.000000	diff=1.16379
 -1.708519	 -0.207675	diff=1.50084
  1.469561	 -0.000637	diff=1.4702
 -0.005660	 -0.000689	diff=0.00497078
 -0.001216	 -0.000000	diff=0.00121595
 12.340248	  1.583486	diff=10.7568
  1.841296	  0.000000	diff=1.8413
  0.000021	  0.000003	diff=1.80815e-05
-77.566999	 -0.000001	diff=77.567
 91.028539	 12.730958	diff=78.2976
-97.830460	 -0.000284	diff=97.8302
  0.348894	  0.042257	diff=0.306637
  0.074657	  0.000000	diff=0.0746571
 -0.000342	 -0.000042	diff=0.000299997
 -0.000050	 -0.000000	diff=4.98501e-05
 -0.000000	 -0.000000	diff=4.66634e-10
  0.001924	  0.000000	diff=0.00192379
 -0.002814	 -0.000343	diff=0.00247109
  0.002423	  0.000000	diff=0.00242279
 -0.000009	 -0.000001	diff=8.20197e-06
 -0.000002	 -0.000000	diff=1.99822e-06
  0.000002	  0.000000	diff=1.94396e-06
  0.000000	  0.000000	diff=3.2303e-07
  0.000000	  0.000000	diff=1.093e-11
 -0.000013	 -0.000000	diff=1.24657e-05
  0.000018	  0.000002	diff=1.60123e-05
 -0.000016	 -0.000000	diff=1.56992e-05
  0.000000	  0.000000	diff=5.31461e-08
  0.000000	  0.000000	diff=1.2966e-08
  local_diff=271.606
# W_src_char{2}, [8 4]
  6.337718	  6.513114	diff=0.175396
 -2.577649	 -2.570914	diff=0.00673473
  0.000322	  0.000322	diff=4.42382e-08
 -0.000743	 -0.000743	diff=1.65411e-07
  2.220676	  2.285932	diff=0.0652559
 -1.339978	 -1.338050	diff=0.00192726
 -3.308328	 -3.260837	diff=0.0474912
 27.394719	 28.260769	diff=0.86605
 -1.291704	 -1.268819	diff=0.0228848
 -3.110743	 -3.107906	diff=0.00283698
  0.756523	  0.746946	diff=0.00957697
  0.132479	  0.132615	diff=0.000135869
 -1.108788	 -1.079632	diff=0.029156
 -2.455386	 -2.451824	diff=0.00356202
  2.155480	  2.176828	diff=0.0213479
-19.275865	-18.927118	diff=0.348746
 -3.260878	 -3.250167	diff=0.010711
  2.451705	  2.473793	diff=0.0220884
-100.853885	-101.142423	diff=0.288538
  1.652110	  1.653420	diff=0.00131035
 -3.206429	 -3.183037	diff=0.0233916
  4.534028	  4.560607	diff=0.0265788
  0.158414	  0.158879	diff=0.000464636
 -2.500509	 -2.487995	diff=0.0125142
  0.191921	  0.188809	diff=0.0031122
  0.652289	  0.653874	diff=0.00158419
 88.940886	 89.663599	diff=0.722713
 -0.993744	 -0.993488	diff=0.000256378
 -0.397557	 -0.395133	diff=0.00242317
 -1.987455	 -1.976781	diff=0.0106739
  0.042875	  0.042908	diff=3.29452e-05
 -0.668890	 -0.668005	diff=0.000885675
  local_diff=2.72838
# W_src_char{3}, [8 4]
 18.066224	 17.783483	diff=0.282741
-19.259842	-19.338686	diff=0.0788445
 -2.385755	 -2.385826	diff=7.05901e-05
  0.004913	  0.005201	diff=0.000287208
-13.540633	-13.768389	diff=0.227756
 -1.218732	 -1.217502	diff=0.00122963
-27.248474	-25.178270	diff=2.0702
  1.958930	  1.966865	diff=0.00793496
-17.536578	-17.892852	diff=0.356274
 10.934581	 10.781450	diff=0.153131
  0.171307	  0.171365	diff=5.84928e-05
 -0.142862	 -0.142570	diff=0.000291601
-20.575114	-20.631897	diff=0.0567828
 -0.421269	 -0.421044	diff=0.000225853
 -7.915731	 -7.815998	diff=0.0997333
  0.067247	  0.068854	diff=0.00160664
 -0.582348	 -0.583419	diff=0.00107038
  6.877787	  6.903140	diff=0.0253528
  3.783590	  3.786289	diff=0.00269954
  0.133456	  0.133199	diff=0.000257671
 51.518646	 52.238165	diff=0.719519
  0.463624	  0.464958	diff=0.00133382
 12.482121	 12.833150	diff=0.351029
 -2.090258	 -2.080289	diff=0.0099696
  0.083846	  0.083825	diff=2.13074e-05
 -0.904266	 -0.903468	diff=0.000798684
 -0.009218	 -0.009217	diff=1.14826e-06
 -0.006002	 -0.006007	diff=4.69561e-06
  4.239437	  4.234313	diff=0.00512394
 -0.065096	 -0.065070	diff=2.58949e-05
 -1.193442	 -1.188342	diff=0.0051001
  0.104124	  0.104123	diff=1.56398e-06
  local_diff=4.45948
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000001	diff=2.13477e-08
 -0.000001	 -0.000001	diff=1.5162e-08
 -0.009340	  0.001678	diff=0.0110178
  0.143046	 -0.026719	diff=0.169764
-182.503774	-64.459374	diff=118.044
-18.050949	-45.523645	diff=27.4727
  0.000000	  0.000000	diff=1.0256e-11
 -0.000000	 -0.000000	diff=1.0027e-11
  local_diff=145.698
# W_pos, [2 2]
  0.022763	  0.022704	diff=5.90464e-05
  0.035413	  0.035353	diff=5.95039e-05
  1.003064	  1.001371	diff=0.00169271
  0.378507	  0.379923	diff=0.00141615
  local_diff=0.00322741
# v_pos, [1 2]
  0.032668	  0.032529	diff=0.00013942
 -0.961948	 -0.961567	diff=0.000381445
  local_diff=0.000520865
# W_h, [2 4]
-17.875289	-17.859539	diff=0.0157501
 -6.492720	 -6.487992	diff=0.00472768
 16.915320	 16.929704	diff=0.0143835
  5.228884	  5.233018	diff=0.00413409
  2.276291	  2.278450	diff=0.0021592
 10.442975	 10.451333	diff=0.00835748
 14.342549	 14.354861	diff=0.0123112
  7.875415	  7.880628	diff=0.00521296
  local_diff=0.0670363
# W_soft, [5 2]
  2.202445	  2.201546	diff=0.000898486
 10.428142	 10.427037	diff=0.00110504
 -3.383458	 -3.384862	diff=0.0014037
 -7.568194	 -7.570694	diff=0.0024998
 -1.671593	 -1.673028	diff=0.0014347
 -3.837047	 -3.837592	diff=0.000545041
 11.847776	 11.846676	diff=0.00109992
 -1.892440	 -1.892920	diff=0.000479488
 -3.828556	 -3.829071	diff=0.00051496
 -2.286906	 -2.287093	diff=0.000186316
  local_diff=0.0101674
# Num params=294, abs_diff=429.657
Elapsed time is 5.481143 seconds.
[?1l>