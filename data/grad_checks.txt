# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 104, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 104
  src input 1: y y x y
  src mask: 1  1  1  1
  tgt input 1: <s> a b a
  tgt output 1: a b a </s>
  tgt mask: 1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=4.12108e-12
 -0.000000	 -0.000000	diff=2.62038e-13
 -0.000000	 -0.000000	diff=2.29777e-11
  0.000000	  0.000000	diff=5.08694e-12
 -0.000000	 -0.000000	diff=1.41871e-15
  0.000000	  0.000000	diff=3.76824e-13
 -0.000082	 -0.000082	diff=1.41073e-08
 -0.000429	 -0.000429	diff=5.82613e-09
 -0.000005	 -0.000005	diff=3.85284e-12
 -0.000002	 -0.000002	diff=1.41833e-11
 -0.000000	 -0.000000	diff=2.35784e-10
 -0.000000	 -0.000000	diff=4.20775e-12
  0.000000	  0.000000	diff=6.37582e-13
  0.000000	  0.000000	diff=1.55415e-14
 -0.001714	 -0.001714	diff=7.79316e-08
  0.000583	  0.000583	diff=1.44267e-08
 -0.000000	 -0.000000	diff=2.43737e-13
 -0.000000	 -0.000000	diff=2.62419e-13
 -0.000000	 -0.000000	diff=6.7098e-14
 -0.000000	 -0.000000	diff=2.40209e-13
  0.000000	  0.000000	diff=5.89005e-13
  0.000000	  0.000000	diff=5.07916e-13
 -0.000000	 -0.000000	diff=7.77005e-09
  0.000015	  0.000015	diff=1.10464e-10
  0.000000	  0.000000	diff=1.4889e-13
  0.000000	  0.000000	diff=4.96042e-13
  0.000000	  0.000000	diff=2.62731e-13
  0.000000	  0.000000	diff=4.80863e-14
 -0.000000	 -0.000000	diff=1.41999e-13
 -0.000000	 -0.000000	diff=1.99158e-13
 -0.000001	 -0.000001	diff=3.78879e-10
 -0.000010	 -0.000010	diff=1.80099e-08
  local_diff=1.38856e-07
# W_tgt{1}, [8 6]
 -0.000048	 -0.000048	diff=6.23528e-11
  0.000003	  0.000003	diff=4.21402e-12
  0.000008	  0.000008	diff=1.3699e-09
  0.000001	  0.000001	diff=1.52867e-10
 -0.000028	 -0.000028	diff=4.10949e-11
  0.000002	  0.000002	diff=6.22244e-13
 -0.000583	 -0.000584	diff=1.97963e-07
 -0.001178	 -0.001178	diff=2.08685e-08
 -0.000029	 -0.000029	diff=6.80607e-11
  0.000006	  0.000006	diff=8.83643e-12
 -0.000004	 -0.000004	diff=2.98218e-09
 -0.000003	 -0.000003	diff=3.50223e-10
 -0.000025	 -0.000025	diff=4.80695e-11
  0.000001	  0.000001	diff=2.12906e-11
 -0.012451	 -0.012452	diff=3.70661e-07
  0.000339	  0.000339	diff=3.0649e-09
  0.000000	  0.000000	diff=2.24188e-13
 -0.000000	 -0.000000	diff=2.90945e-14
 -0.000000	 -0.000000	diff=7.64907e-13
  0.000000	  0.000000	diff=7.07533e-13
 -0.000000	 -0.000000	diff=6.45375e-13
 -0.000000	 -0.000000	diff=3.09982e-13
 -0.000066	 -0.000066	diff=1.06522e-07
 -0.000001	 -0.000001	diff=2.34566e-11
 -0.000000	 -0.000000	diff=1.38788e-13
  0.000000	  0.000000	diff=1.30415e-13
  0.000000	  0.000000	diff=1.30545e-13
 -0.000000	 -0.000000	diff=3.6064e-13
 -0.000000	 -0.000000	diff=1.65886e-13
 -0.000000	 -0.000000	diff=2.34762e-13
 -0.000009	 -0.000009	diff=3.86424e-10
 -0.000000	 -0.000000	diff=7.96309e-09
  0.000000	  0.000000	diff=1.69923e-12
 -0.000000	 -0.000000	diff=8.78881e-14
 -0.000000	 -0.000000	diff=2.87261e-13
  0.000000	  0.000000	diff=3.92753e-13
 -0.000000	 -0.000000	diff=6.74556e-13
 -0.000000	 -0.000000	diff=6.85968e-13
 -0.000118	 -0.000118	diff=7.09232e-07
  0.000028	  0.000028	diff=2.59377e-09
 -0.000000	 -0.000000	diff=3.74429e-14
 -0.000000	 -0.000000	diff=7.93994e-13
  0.000000	  0.000000	diff=5.56238e-13
  0.000000	  0.000000	diff=2.52151e-13
 -0.000000	 -0.000000	diff=2.31236e-14
  0.000000	  0.000000	diff=4.54346e-13
  0.000054	  0.000054	diff=4.45869e-09
 -0.000023	 -0.000023	diff=8.81102e-08
  local_diff=1.51697e-06
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000825	  0.000825	diff=2.58159e-07
 -0.001517	 -0.001516	diff=6.64834e-07
  0.000079	  0.000079	diff=1.31214e-08
 -0.000444	 -0.000444	diff=2.36816e-07
  local_diff=1.17293e-06
# W_emb_tgt, [2 4]
 -0.003297	 -0.003296	diff=1.38301e-06
 -0.000952	 -0.000951	diff=3.06922e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.008593	 -0.008592	diff=5.44548e-07
 -0.003148	 -0.003147	diff=3.60548e-07
 -0.003640	 -0.003640	diff=3.84628e-07
 -0.001405	 -0.001405	diff=2.02457e-07
  local_diff=3.18211e-06
# W_soft, [4 2]
  0.001906	  0.001906	diff=4.54324e-08
 -0.001267	 -0.001267	diff=4.54347e-08
  0.002200	  0.002200	diff=4.54334e-08
 -0.002838	 -0.002838	diff=4.54343e-08
 -0.000094	 -0.000094	diff=1.8145e-08
  0.000714	  0.000714	diff=1.81449e-08
 -0.002257	 -0.002257	diff=1.81447e-08
  0.001638	  0.001638	diff=1.81453e-08
  local_diff=2.54315e-07
# Num params=104, abs_diff=6.26517e-06
Elapsed time is 0.743055 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.87871e-13
  0.000000	  0.000000	diff=4.75103e-15
 -0.000000	 -0.000000	diff=1.17588e-12
  0.000000	  0.000000	diff=5.47156e-13
 -0.000000	 -0.000000	diff=8.1325e-15
 -0.000000	 -0.000000	diff=8.36079e-13
  0.000078	  0.000078	diff=1.29093e-10
  0.000029	  0.000029	diff=2.99692e-10
  0.000000	  0.000000	diff=1.38588e-12
 -0.000000	 -0.000000	diff=1.45782e-12
  0.000000	  0.000000	diff=5.29089e-12
 -0.000000	 -0.000000	diff=1.9633e-12
  0.000000	  0.000000	diff=1.88295e-12
  0.000000	  0.000000	diff=1.46083e-12
 -0.000146	 -0.000146	diff=3.69597e-10
 -0.000050	 -0.000050	diff=7.14102e-10
  0.000000	  0.000000	diff=1.7042e-13
 -0.000000	 -0.000000	diff=2.19934e-13
  0.000000	  0.000000	diff=6.20103e-13
 -0.000000	 -0.000000	diff=8.92369e-15
  0.000000	  0.000000	diff=3.33915e-13
  0.000000	  0.000000	diff=4.07054e-13
 -0.000002	 -0.000002	diff=2.7209e-09
 -0.000001	 -0.000001	diff=5.82579e-12
 -0.000000	 -0.000000	diff=3.72225e-13
  0.000000	  0.000000	diff=9.99215e-14
 -0.000000	 -0.000000	diff=3.81436e-13
  0.000000	  0.000000	diff=9.86182e-13
 -0.000000	 -0.000000	diff=1.6738e-13
 -0.000000	 -0.000000	diff=4.96972e-13
  0.000002	  0.000002	diff=1.37024e-11
  0.000001	  0.000001	diff=1.14097e-09
  local_diff=5.41436e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=4.53474e-13
  0.000000	  0.000000	diff=1.34504e-13
  0.000000	  0.000000	diff=6.23959e-13
  0.000000	  0.000000	diff=7.88075e-13
 -0.000000	 -0.000000	diff=2.74073e-13
  0.000000	  0.000000	diff=4.31215e-13
 -0.000013	 -0.000013	diff=1.16015e-12
  0.000125	  0.000125	diff=3.2989e-11
 -0.000000	 -0.000000	diff=6.34955e-13
 -0.000000	 -0.000000	diff=3.00408e-13
 -0.000000	 -0.000000	diff=4.77675e-13
 -0.000000	 -0.000000	diff=5.29321e-14
  0.000000	  0.000000	diff=1.84297e-13
 -0.000000	 -0.000000	diff=1.00939e-12
  0.000011	  0.000011	diff=4.28623e-13
 -0.000110	 -0.000110	diff=2.32604e-11
  0.000000	  0.000000	diff=3.06914e-13
  0.000000	  0.000000	diff=1.83441e-13
  0.000000	  0.000000	diff=3.043e-13
  0.000000	  0.000000	diff=9.44611e-14
  0.000000	  0.000000	diff=2.75684e-14
 -0.000000	 -0.000000	diff=1.15939e-12
 -0.000000	 -0.000000	diff=3.36492e-10
  0.000002	  0.000002	diff=9.28825e-13
 -0.000000	 -0.000000	diff=3.50341e-13
 -0.000000	 -0.000000	diff=7.52409e-14
 -0.000000	 -0.000000	diff=1.74739e-14
 -0.000000	 -0.000000	diff=4.63679e-13
  0.000000	 -0.000000	diff=1.00198e-14
  0.000000	  0.000000	diff=3.02766e-13
  0.000000	  0.000000	diff=2.75185e-13
 -0.000003	 -0.000003	diff=3.49534e-09
  local_diff=3.89953e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.17737e-13
 -0.000000	 -0.000000	diff=1.38985e-12
  0.000000	  0.000000	diff=5.08026e-13
  0.000000	  0.000000	diff=1.20726e-11
  0.000000	  0.000000	diff=8.89307e-13
  0.000000	  0.000000	diff=1.65113e-12
 -0.000015	 -0.000015	diff=2.60037e-13
  0.000062	  0.000062	diff=9.26206e-10
 -0.000000	 -0.000000	diff=9.67936e-14
  0.000000	  0.000000	diff=1.41854e-12
 -0.000000	 -0.000000	diff=4.95997e-12
 -0.000000	 -0.000000	diff=1.86669e-11
 -0.000000	 -0.000000	diff=3.67983e-13
  0.000000	  0.000000	diff=1.24693e-12
  0.000039	  0.000039	diff=2.08119e-10
 -0.000246	 -0.000246	diff=1.15356e-09
 -0.000000	 -0.000000	diff=2.74914e-13
  0.000000	  0.000000	diff=8.15147e-13
 -0.000000	 -0.000000	diff=2.62175e-13
  0.000000	  0.000000	diff=7.42665e-13
 -0.000000	 -0.000000	diff=7.93994e-13
  0.000000	  0.000000	diff=3.29668e-13
  0.000000	  0.000000	diff=6.85349e-13
 -0.000000	 -0.000000	diff=3.92488e-13
 -0.000000	 -0.000000	diff=1.55321e-13
  0.000000	  0.000000	diff=4.17505e-13
 -0.000000	 -0.000000	diff=9.98782e-14
  0.000000	  0.000000	diff=4.81805e-13
 -0.000000	 -0.000000	diff=4.44256e-14
  0.000000	  0.000000	diff=3.88969e-13
 -0.000000	 -0.000000	diff=1.24565e-13
 -0.000000	 -0.000000	diff=4.05286e-12
 -0.000000	 -0.000000	diff=1.28261e-12
  0.000000	  0.000000	diff=1.38249e-13
 -0.000000	 -0.000000	diff=2.33193e-13
 -0.000000	 -0.000000	diff=1.12589e-12
 -0.000000	 -0.000000	diff=3.66089e-13
 -0.000000	 -0.000000	diff=7.37407e-13
  0.000001	  0.000001	diff=2.31297e-10
 -0.000003	 -0.000003	diff=1.38626e-10
  0.000000	  0.000000	diff=3.22522e-13
 -0.000000	 -0.000000	diff=7.6103e-14
  0.000000	  0.000000	diff=2.80737e-13
  0.000000	  0.000000	diff=3.54845e-13
  0.000000	  0.000000	diff=1.37503e-13
 -0.000000	 -0.000000	diff=9.48806e-13
 -0.000001	 -0.000001	diff=8.0484e-12
  0.000005	  0.000005	diff=4.11802e-09
  local_diff=6.84399e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.01666e-13
 -0.000000	 -0.000000	diff=3.55836e-13
  0.000000	  0.000000	diff=4.33285e-13
  0.000000	  0.000000	diff=3.49945e-13
  0.000000	  0.000000	diff=1.01009e-13
  0.000000	  0.000000	diff=5.52553e-13
 -0.000017	 -0.000017	diff=3.8587e-11
  0.000075	  0.000075	diff=1.12985e-09
  0.000000	  0.000000	diff=5.65055e-13
 -0.000000	 -0.000000	diff=3.45518e-13
  0.000000	  0.000000	diff=5.41945e-13
 -0.000000	 -0.000000	diff=2.11951e-13
  0.000000	  0.000000	diff=1.72483e-13
 -0.000000	 -0.000000	diff=3.24814e-14
 -0.000007	 -0.000007	diff=8.52036e-10
 -0.000017	 -0.000017	diff=5.05571e-09
 -0.000000	 -0.000000	diff=3.91826e-13
  0.000000	  0.000000	diff=3.82185e-13
  0.000000	  0.000000	diff=8.93196e-13
  0.000000	  0.000000	diff=1.01494e-13
  0.000000	  0.000000	diff=3.42643e-13
  0.000000	  0.000000	diff=7.43071e-13
 -0.000001	 -0.000001	diff=2.26882e-09
  0.000008	  0.000008	diff=1.23334e-10
  0.000000	  0.000000	diff=7.85061e-13
  0.000000	  0.000000	diff=3.95749e-13
 -0.000000	 -0.000000	diff=5.20942e-13
 -0.000000	 -0.000000	diff=4.53371e-13
 -0.000000	 -0.000000	diff=1.25216e-12
 -0.000000	 -0.000000	diff=5.07102e-13
  0.000001	  0.000001	diff=3.17078e-12
 -0.000007	 -0.000007	diff=2.27645e-10
  local_diff=9.70978e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000068	 -0.000068	diff=1.93566e-08
  0.000063	  0.000063	diff=5.08945e-08
 -0.000052	 -0.000052	diff=1.84554e-08
  0.000041	  0.000041	diff=4.53804e-08
  local_diff=1.34087e-07
# W_emb_tgt, [2 4]
 -0.000158	 -0.000158	diff=2.67855e-08
  0.000016	  0.000016	diff=6.77983e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000030	 -0.000030	diff=4.72495e-11
  0.000007	  0.000007	diff=4.74812e-09
  0.000048	  0.000048	diff=1.06678e-08
 -0.000004	 -0.000004	diff=1.79221e-09
  local_diff=5.08208e-08
# W_soft, [4 2]
  0.000042	  0.000042	diff=1.4367e-11
 -0.000201	 -0.000201	diff=1.39263e-11
  0.000111	  0.000111	diff=1.47236e-11
  0.000048	  0.000048	diff=1.45372e-11
  0.000418	  0.000418	diff=8.29578e-11
 -0.000214	 -0.000214	diff=8.33051e-11
 -0.000266	 -0.000266	diff=8.36797e-11
  0.000062	  0.000062	diff=8.33019e-11
  local_diff=3.90799e-10
# Num params=168, abs_diff=2.11166e-07
Elapsed time is 1.331755 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.09364e-12
  0.000000	  0.000000	diff=9.80612e-13
 -0.000000	 -0.000000	diff=2.95292e-12
  0.000000	  0.000000	diff=8.52952e-13
 -0.000000	 -0.000000	diff=1.13293e-12
 -0.000000	 -0.000000	diff=4.50829e-13
  0.000108	  0.000108	diff=1.9171e-10
  0.000037	  0.000037	diff=4.68442e-10
  0.000001	  0.000001	diff=2.80729e-12
 -0.000000	 -0.000000	diff=9.33952e-13
  0.000000	  0.000000	diff=1.06795e-11
 -0.000000	 -0.000000	diff=4.98434e-12
  0.000001	  0.000001	diff=2.87542e-12
  0.000000	  0.000000	diff=1.92008e-13
 -0.000174	 -0.000174	diff=6.12174e-10
 -0.000068	 -0.000068	diff=1.11872e-09
  0.000000	  0.000000	diff=2.52429e-13
 -0.000000	 -0.000000	diff=8.25308e-13
  0.000000	  0.000000	diff=2.05444e-13
 -0.000000	 -0.000000	diff=6.31417e-14
  0.000000	  0.000000	diff=4.44248e-13
  0.000000	  0.000000	diff=4.17173e-13
 -0.000003	 -0.000003	diff=3.14552e-09
 -0.000001	 -0.000001	diff=6.44732e-12
 -0.000000	 -0.000000	diff=1.65474e-13
  0.000000	  0.000000	diff=3.48623e-13
 -0.000000	 -0.000000	diff=9.29333e-14
  0.000000	  0.000000	diff=5.59084e-13
 -0.000000	 -0.000000	diff=3.0615e-13
 -0.000000	 -0.000000	diff=6.59088e-13
  0.000003	  0.000003	diff=1.35491e-11
  0.000001	  0.000001	diff=1.51822e-09
  local_diff=7.10905e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=5.50563e-13
  0.000000	  0.000000	diff=1.22676e-13
  0.000000	  0.000000	diff=1.91327e-13
  0.000000	  0.000000	diff=1.45279e-13
  0.000000	  0.000000	diff=2.66669e-13
 -0.000000	 -0.000000	diff=1.17497e-12
 -0.000007	 -0.000007	diff=1.82884e-12
  0.000161	  0.000161	diff=6.668e-11
 -0.000000	 -0.000000	diff=8.28265e-13
 -0.000000	 -0.000000	diff=3.25382e-15
 -0.000000	 -0.000000	diff=2.74441e-13
 -0.000000	 -0.000000	diff=8.13436e-13
 -0.000000	 -0.000000	diff=2.21267e-14
  0.000000	  0.000000	diff=4.63295e-13
  0.000005	  0.000005	diff=4.63231e-13
 -0.000135	 -0.000135	diff=4.89445e-11
  0.000000	  0.000000	diff=5.53561e-13
  0.000000	  0.000000	diff=8.26172e-13
  0.000000	  0.000000	diff=5.89552e-13
  0.000000	  0.000000	diff=5.68236e-13
  0.000000	  0.000000	diff=6.84781e-13
 -0.000000	 -0.000000	diff=5.87344e-14
 -0.000000	 -0.000000	diff=2.32642e-10
  0.000003	  0.000003	diff=2.15876e-13
 -0.000000	 -0.000000	diff=8.66625e-13
 -0.000000	 -0.000000	diff=5.98642e-13
 -0.000000	 -0.000000	diff=9.46902e-14
 -0.000000	 -0.000000	diff=3.99087e-13
 -0.000000	 -0.000000	diff=3.03796e-13
  0.000000	  0.000000	diff=5.1609e-13
  0.000000	  0.000000	diff=5.39588e-13
 -0.000004	 -0.000004	diff=4.05826e-09
  local_diff=4.42049e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.7816e-13
 -0.000000	 -0.000000	diff=2.8465e-12
  0.000000	  0.000000	diff=1.92235e-12
  0.000000	  0.000000	diff=3.1677e-11
  0.000000	  0.000000	diff=1.00932e-12
  0.000000	  0.000000	diff=2.36142e-12
 -0.000020	 -0.000020	diff=1.29066e-10
  0.000115	  0.000115	diff=1.38437e-09
 -0.000000	 -0.000000	diff=2.41373e-13
  0.000001	  0.000001	diff=1.48548e-12
 -0.000000	 -0.000000	diff=7.13818e-12
 -0.000000	 -0.000000	diff=3.64973e-11
 -0.000000	 -0.000000	diff=5.47413e-13
  0.000000	  0.000000	diff=6.64778e-13
  0.000022	  0.000022	diff=1.91815e-11
 -0.000201	 -0.000201	diff=2.07743e-09
 -0.000000	 -0.000000	diff=1.49093e-12
  0.000000	  0.000000	diff=9.12218e-14
 -0.000000	 -0.000000	diff=2.26095e-14
  0.000000	  0.000000	diff=1.17987e-13
 -0.000000	 -0.000000	diff=5.62661e-13
  0.000000	  0.000000	diff=6.83768e-13
  0.000000	  0.000000	diff=3.83518e-13
 -0.000000	 -0.000000	diff=4.67511e-13
 -0.000000	 -0.000000	diff=4.66735e-13
  0.000000	  0.000000	diff=2.78207e-13
 -0.000000	 -0.000000	diff=4.97995e-13
  0.000000	  0.000000	diff=4.71402e-13
  0.000000	  0.000000	diff=3.22534e-13
  0.000000	  0.000000	diff=4.02284e-13
  0.000000	  0.000000	diff=5.58212e-13
 -0.000000	 -0.000000	diff=4.76981e-12
 -0.000000	 -0.000000	diff=3.22877e-13
  0.000000	  0.000000	diff=7.48947e-13
 -0.000000	 -0.000000	diff=4.89491e-13
 -0.000000	 -0.000000	diff=5.9079e-13
 -0.000000	 -0.000000	diff=4.52118e-13
 -0.000000	 -0.000000	diff=5.36659e-13
  0.000001	  0.000001	diff=2.55753e-10
 -0.000005	 -0.000005	diff=1.76365e-10
  0.000000	  0.000000	diff=3.53711e-13
 -0.000000	 -0.000000	diff=2.12685e-14
  0.000000	  0.000000	diff=4.32161e-13
  0.000000	  0.000000	diff=4.9507e-13
  0.000000	  0.000000	diff=2.67875e-13
 -0.000000	 -0.000000	diff=1.02391e-13
 -0.000001	 -0.000001	diff=6.3292e-12
  0.000006	  0.000006	diff=6.28238e-09
  local_diff=1.04338e-08
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.02928e-12
 -0.000000	 -0.000000	diff=1.70213e-13
  0.000000	  0.000000	diff=7.19194e-13
  0.000000	  0.000000	diff=2.93348e-14
  0.000000	  0.000000	diff=4.01891e-13
  0.000000	  0.000000	diff=2.24166e-13
 -0.000025	 -0.000025	diff=2.19886e-10
  0.000184	  0.000184	diff=3.15538e-09
 -0.000000	 -0.000000	diff=3.3341e-15
 -0.000000	 -0.000000	diff=1.1556e-13
  0.000000	  0.000000	diff=2.3503e-13
 -0.000000	 -0.000000	diff=4.497e-13
  0.000000	  0.000000	diff=1.26662e-13
 -0.000000	 -0.000000	diff=7.56155e-13
 -0.000010	 -0.000010	diff=1.40094e-09
  0.000006	  0.000006	diff=3.61153e-09
 -0.000000	 -0.000000	diff=3.25059e-13
  0.000000	  0.000000	diff=1.93779e-13
  0.000000	  0.000000	diff=6.82007e-13
  0.000000	  0.000000	diff=1.46005e-13
 -0.000000	 -0.000000	diff=6.81174e-13
  0.000000	  0.000000	diff=5.09287e-13
 -0.000001	 -0.000001	diff=2.44011e-09
  0.000010	  0.000010	diff=1.44717e-10
  0.000000	  0.000000	diff=2.12523e-13
  0.000000	  0.000000	diff=2.90598e-13
 -0.000000	 -0.000000	diff=5.47854e-13
 -0.000000	 -0.000000	diff=3.97262e-13
  0.000000	  0.000000	diff=3.83309e-13
 -0.000000	 -0.000000	diff=2.3611e-13
  0.000001	  0.000001	diff=1.9942e-12
 -0.000010	 -0.000010	diff=3.88842e-09
  local_diff=1.48718e-08
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000069	 -0.000069	diff=2.71427e-08
  0.000052	  0.000052	diff=5.86418e-08
 -0.000077	 -0.000077	diff=3.39724e-08
  0.000055	  0.000055	diff=7.00118e-08
  local_diff=1.89769e-07
# W_emb_tgt, [2 4]
 -0.000194	 -0.000194	diff=4.48346e-08
  0.000009	  0.000009	diff=3.76697e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000066	 -0.000066	diff=1.23607e-09
  0.000005	  0.000005	diff=3.73416e-09
  0.000047	  0.000047	diff=1.31973e-08
 -0.000003	 -0.000003	diff=2.08585e-09
  local_diff=6.8855e-08
# W_soft, [4 2]
  0.000076	  0.000076	diff=3.22358e-11
 -0.000222	 -0.000222	diff=3.22656e-11
  0.000120	  0.000120	diff=3.27771e-11
  0.000025	  0.000025	diff=3.27508e-11
  0.000468	  0.000468	diff=1.4538e-10
 -0.000177	 -0.000177	diff=1.4486e-10
 -0.000386	 -0.000386	diff=1.45896e-10
  0.000095	  0.000095	diff=1.45087e-10
  local_diff=7.11253e-10
# Num params=168, abs_diff=2.9617e-07
Elapsed time is 1.431380 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 176, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 176
  src input 1: <s> y x x
  src mask: 0  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=3.2965e-13
  0.000000	  0.000000	diff=7.12138e-13
 -0.000000	 -0.000000	diff=1.97651e-13
  0.000000	  0.000000	diff=1.04118e-12
 -0.000000	 -0.000000	diff=1.27162e-12
 -0.000000	 -0.000000	diff=4.32033e-13
  0.000003	  0.000003	diff=1.86687e-11
  0.000002	  0.000002	diff=2.2171e-11
  0.000000	  0.000000	diff=1.12766e-12
 -0.000000	 -0.000000	diff=6.67334e-13
  0.000000	  0.000000	diff=1.12551e-12
 -0.000000	 -0.000000	diff=8.48588e-15
  0.000000	  0.000000	diff=4.10143e-13
  0.000000	  0.000000	diff=1.35247e-13
 -0.000006	 -0.000006	diff=8.70011e-11
 -0.000004	 -0.000004	diff=6.36233e-11
  0.000000	  0.000000	diff=1.66134e-13
 -0.000000	 -0.000000	diff=8.52312e-13
  0.000000	  0.000000	diff=5.15942e-14
 -0.000000	 -0.000000	diff=4.04008e-13
  0.000000	  0.000000	diff=6.76142e-13
  0.000000	  0.000000	diff=1.69425e-13
 -0.000000	 -0.000000	diff=1.14682e-10
 -0.000000	 -0.000000	diff=6.96233e-14
 -0.000000	 -0.000000	diff=1.39121e-12
  0.000000	  0.000000	diff=4.66441e-13
 -0.000000	 -0.000000	diff=1.11037e-12
  0.000000	  0.000000	diff=6.57036e-14
 -0.000000	 -0.000000	diff=1.08041e-12
 -0.000000	 -0.000000	diff=9.28536e-14
  0.000000	  0.000000	diff=2.60077e-14
  0.000000	  0.000000	diff=4.98597e-11
  local_diff=3.70086e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=5.74578e-13
  0.000000	  0.000000	diff=8.80815e-13
  0.000000	  0.000000	diff=4.65577e-13
  0.000000	  0.000000	diff=1.10136e-12
  0.000000	  0.000000	diff=1.85604e-12
 -0.000000	 -0.000000	diff=7.78986e-13
 -0.000002	 -0.000002	diff=6.26917e-13
  0.000004	  0.000004	diff=5.65538e-12
 -0.000000	 -0.000000	diff=4.1652e-13
 -0.000000	 -0.000000	diff=5.34292e-15
 -0.000000	 -0.000000	diff=1.64527e-13
 -0.000000	 -0.000000	diff=4.99913e-13
 -0.000000	 -0.000000	diff=4.77374e-13
  0.000000	  0.000000	diff=5.44519e-13
  0.000001	  0.000001	diff=3.76301e-13
 -0.000003	 -0.000003	diff=4.57409e-12
  0.000000	  0.000000	diff=5.60096e-13
  0.000000	  0.000000	diff=8.90438e-13
  0.000000	  0.000000	diff=8.04132e-13
  0.000000	  0.000000	diff=3.17729e-13
  0.000000	  0.000000	diff=2.73779e-13
 -0.000000	 -0.000000	diff=5.46029e-13
 -0.000000	 -0.000000	diff=1.36016e-11
  0.000000	  0.000000	diff=4.47956e-13
 -0.000000	 -0.000000	diff=4.0977e-13
 -0.000000	 -0.000000	diff=2.759e-13
 -0.000000	 -0.000000	diff=4.33386e-13
 -0.000000	 -0.000000	diff=1.32425e-13
 -0.000000	 -0.000000	diff=9.47494e-13
  0.000000	  0.000000	diff=6.62898e-13
  0.000000	  0.000000	diff=6.03045e-13
 -0.000000	 -0.000000	diff=1.41899e-10
  local_diff=1.81804e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=9.08303e-13
  0.000000	  0.000000	diff=2.92735e-13
  0.000000	  0.000000	diff=5.10214e-13
  0.000000	  0.000000	diff=1.4162e-12
  0.000000	  0.000000	diff=5.39393e-13
  0.000000	  0.000000	diff=1.14e-13
 -0.000001	 -0.000001	diff=2.09133e-11
 -0.000001	 -0.000001	diff=6.95669e-12
  0.000000	  0.000000	diff=5.9304e-13
 -0.000000	 -0.000000	diff=1.0049e-13
 -0.000000	 -0.000000	diff=1.00333e-12
 -0.000000	 -0.000000	diff=2.45925e-12
 -0.000000	 -0.000000	diff=1.16578e-12
 -0.000000	 -0.000000	diff=1.32972e-12
  0.000001	  0.000001	diff=1.28788e-11
 -0.000004	 -0.000004	diff=1.04733e-10
 -0.000000	  0.000000	diff=7.24181e-13
  0.000000	  0.000000	diff=6.54956e-14
 -0.000000	 -0.000000	diff=7.09276e-13
 -0.000000	 -0.000000	diff=6.97976e-13
 -0.000000	  0.000000	diff=7.1477e-13
  0.000000	  0.000000	diff=8.15942e-14
 -0.000000	 -0.000000	diff=2.47567e-13
 -0.000000	 -0.000000	diff=1.90431e-13
  0.000000	 -0.000000	diff=1.80093e-15
  0.000000	  0.000000	diff=2.09289e-13
  0.000000	 -0.000000	diff=6.77123e-15
  0.000000	  0.000000	diff=4.3077e-14
  0.000000	 -0.000000	diff=1.14006e-14
 -0.000000	  0.000000	diff=9.44019e-13
 -0.000000	 -0.000000	diff=1.08135e-12
 -0.000000	 -0.000000	diff=1.77677e-13
 -0.000000	 -0.000000	diff=9.95793e-13
  0.000000	  0.000000	diff=3.68679e-13
 -0.000000	 -0.000000	diff=1.16424e-12
 -0.000000	 -0.000000	diff=5.33128e-13
 -0.000000	 -0.000000	diff=2.46199e-13
 -0.000000	 -0.000000	diff=7.36933e-13
  0.000000	  0.000000	diff=1.36178e-11
 -0.000000	 -0.000000	diff=3.88981e-12
 -0.000000	 -0.000000	diff=8.87389e-13
 -0.000000	 -0.000000	diff=1.14106e-13
 -0.000000	 -0.000000	diff=1.0964e-12
  0.000000	  0.000000	diff=1.1347e-12
 -0.000000	 -0.000000	diff=8.42824e-13
  0.000000	  0.000000	diff=1.72391e-12
  0.000000	  0.000000	diff=3.36239e-13
  0.000000	  0.000000	diff=2.92498e-10
  local_diff=4.82006e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.3294e-12
 -0.000000	 -0.000000	diff=2.75226e-14
 -0.000000	 -0.000000	diff=7.05726e-13
  0.000000	  0.000000	diff=1.48057e-12
  0.000000	  0.000000	diff=7.8082e-13
  0.000000	  0.000000	diff=1.14096e-12
  0.000001	  0.000001	diff=4.21917e-13
  0.000023	  0.000023	diff=5.17121e-11
  0.000000	  0.000000	diff=2.45468e-13
 -0.000000	 -0.000000	diff=2.92155e-13
  0.000000	  0.000000	diff=1.35844e-12
 -0.000000	 -0.000000	diff=8.42123e-14
  0.000000	  0.000000	diff=7.96005e-13
 -0.000000	 -0.000000	diff=9.26576e-14
 -0.000000	 -0.000000	diff=4.85996e-13
 -0.000005	 -0.000005	diff=6.7674e-12
  0.000000	  0.000000	diff=4.8598e-14
 -0.000000	 -0.000000	diff=1.31257e-12
 -0.000000	 -0.000000	diff=7.00526e-13
  0.000000	  0.000000	diff=7.01765e-13
 -0.000000	 -0.000000	diff=5.54098e-14
  0.000000	  0.000000	diff=9.73242e-13
  0.000000	  0.000000	diff=5.71334e-12
  0.000000	  0.000000	diff=1.97919e-12
 -0.000000	 -0.000000	diff=3.31356e-13
  0.000000	  0.000000	diff=8.94313e-13
  0.000000	  0.000000	diff=9.99289e-14
 -0.000000	 -0.000000	diff=2.99627e-13
  0.000000	  0.000000	diff=5.20958e-13
 -0.000000	 -0.000000	diff=1.34272e-13
 -0.000000	 -0.000000	diff=1.71622e-12
 -0.000000	 -0.000000	diff=3.69546e-10
  local_diff=4.52749e-10
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.57778e-09
  0.000002	  0.000002	diff=2.14775e-09
 -0.000001	 -0.000001	diff=6.94524e-10
  0.000000	  0.000000	diff=1.26903e-09
  local_diff=5.68908e-09
# W_emb_tgt, [2 4]
 -0.000004	 -0.000004	diff=3.21835e-10
  0.000001	  0.000001	diff=4.44303e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000004	  0.000004	diff=2.41819e-11
 -0.000000	 -0.000000	diff=7.3905e-11
  0.000001	  0.000001	diff=2.56938e-10
  0.000000	  0.000000	diff=8.19036e-11
  local_diff=1.20307e-09
# W_h, [2 4]
 -0.000003	 -0.000003	diff=7.73707e-13
  0.000014	  0.000014	diff=8.08309e-13
  0.000004	  0.000004	diff=5.18853e-13
 -0.000017	 -0.000017	diff=1.8697e-13
  0.000011	  0.000011	diff=1.00476e-11
 -0.000010	 -0.000010	diff=1.89821e-12
  0.000008	  0.000008	diff=6.83052e-11
 -0.000018	 -0.000018	diff=7.83269e-11
  local_diff=1.60866e-10
# W_soft, [4 2]
  0.000011	  0.000011	diff=3.2259e-15
 -0.000007	 -0.000007	diff=1.27227e-13
  0.000000	  0.000000	diff=1.36648e-12
 -0.000004	 -0.000004	diff=1.35169e-12
  0.000005	  0.000005	diff=6.21382e-13
 -0.000006	 -0.000006	diff=6.0263e-13
  0.000001	  0.000001	diff=1.15134e-12
 -0.000000	 -0.000000	diff=4.66816e-13
  local_diff=5.69079e-12
# Num params=176, abs_diff=8.54535e-09
Elapsed time is 2.221646 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_pos=4 v_pos=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=2.71687e-13
  0.000000	  0.000000	diff=8.28964e-14
 -0.000000	 -0.000000	diff=1.7857e-13
  0.000000	  0.000000	diff=1.90113e-13
 -0.000000	 -0.000000	diff=6.89225e-14
 -0.000000	 -0.000000	diff=3.57871e-13
  0.000004	  0.000004	diff=1.07605e-11
  0.000003	  0.000003	diff=2.93421e-11
  0.000000	  0.000000	diff=5.04435e-13
 -0.000000	 -0.000000	diff=8.58211e-13
  0.000000	  0.000000	diff=1.39824e-12
 -0.000000	 -0.000000	diff=8.29743e-13
  0.000000	  0.000000	diff=3.15718e-13
  0.000000	  0.000000	diff=6.72157e-13
 -0.000008	 -0.000008	diff=2.33623e-11
 -0.000010	 -0.000010	diff=1.26155e-10
  0.000000	  0.000000	diff=6.78227e-13
 -0.000000	 -0.000000	diff=1.4656e-13
  0.000000	  0.000000	diff=5.10438e-13
 -0.000000	 -0.000000	diff=1.23407e-12
  0.000000	  0.000000	diff=8.56847e-13
  0.000000	  0.000000	diff=4.39557e-13
 -0.000000	 -0.000000	diff=2.07915e-10
 -0.000000	 -0.000000	diff=5.17253e-13
 -0.000000	 -0.000000	diff=7.17614e-13
  0.000000	  0.000000	diff=7.58801e-13
 -0.000000	 -0.000000	diff=6.36763e-13
  0.000000	  0.000000	diff=1.01506e-12
 -0.000000	 -0.000000	diff=1.93524e-13
 -0.000000	 -0.000000	diff=3.61677e-13
  0.000000	  0.000000	diff=8.23499e-13
  0.000000	  0.000000	diff=1.08666e-10
  local_diff=5.2082e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.02347e-12
  0.000000	  0.000000	diff=9.18735e-13
  0.000000	  0.000000	diff=2.30604e-13
  0.000000	  0.000000	diff=2.9795e-13
  0.000000	  0.000000	diff=9.87274e-13
 -0.000000	 -0.000000	diff=7.04221e-13
 -0.000006	 -0.000006	diff=2.10753e-12
  0.000003	  0.000003	diff=3.81267e-12
 -0.000000	 -0.000000	diff=5.63104e-14
 -0.000000	 -0.000000	diff=3.55146e-13
 -0.000000	 -0.000000	diff=3.27472e-13
 -0.000000	 -0.000000	diff=7.98446e-13
 -0.000000	 -0.000000	diff=1.22075e-12
  0.000000	  0.000000	diff=1.3376e-12
  0.000005	  0.000005	diff=1.24932e-12
 -0.000006	 -0.000006	diff=4.86803e-12
  0.000000	  0.000000	diff=3.39893e-13
  0.000000	  0.000000	diff=5.03933e-13
  0.000000	  0.000000	diff=3.75673e-13
  0.000000	  0.000000	diff=5.35814e-14
  0.000000	  0.000000	diff=6.8374e-13
 -0.000000	 -0.000000	diff=5.44613e-13
 -0.000000	 -0.000000	diff=7.73482e-11
  0.000000	  0.000000	diff=4.1021e-13
 -0.000000	 -0.000000	diff=2.98706e-13
 -0.000000	 -0.000000	diff=1.58369e-13
 -0.000000	 -0.000000	diff=2.97308e-14
 -0.000000	 -0.000000	diff=1.61023e-13
 -0.000000	 -0.000000	diff=1.15282e-13
  0.000000	  0.000000	diff=3.35517e-13
  0.000000	  0.000000	diff=3.19622e-13
 -0.000000	 -0.000000	diff=2.45057e-10
  local_diff=3.47031e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=5.03167e-13
 -0.000000	 -0.000000	diff=5.74068e-13
  0.000000	  0.000000	diff=2.455e-12
 -0.000000	 -0.000000	diff=1.20897e-12
  0.000000	  0.000000	diff=9.82009e-14
 -0.000000	 -0.000000	diff=9.87182e-14
 -0.000007	 -0.000007	diff=1.22237e-10
  0.000032	  0.000032	diff=2.39761e-10
  0.000000	  0.000000	diff=3.2665e-13
  0.000000	  0.000000	diff=3.49818e-13
 -0.000000	 -0.000000	diff=1.13498e-12
 -0.000000	 -0.000000	diff=2.27461e-12
  0.000000	  0.000000	diff=1.49257e-12
  0.000000	  0.000000	diff=2.8442e-13
  0.000004	  0.000004	diff=3.88136e-11
 -0.000031	 -0.000031	diff=3.71834e-10
 -0.000000	 -0.000000	diff=1.04728e-12
  0.000000	  0.000000	diff=7.14618e-13
 -0.000000	 -0.000000	diff=1.14585e-12
  0.000000	  0.000000	diff=9.14845e-14
 -0.000000	 -0.000000	diff=9.37029e-13
  0.000000	  0.000000	diff=5.66958e-13
  0.000000	  0.000000	diff=1.33375e-13
 -0.000000	 -0.000000	diff=4.97554e-14
  0.000000	  0.000000	diff=3.71943e-13
 -0.000000	 -0.000000	diff=8.14965e-13
 -0.000000	  0.000000	diff=1.62818e-12
 -0.000000	 -0.000000	diff=1.04998e-12
  0.000000	  0.000000	diff=4.93835e-13
 -0.000000	 -0.000000	diff=9.78392e-13
 -0.000000	 -0.000000	diff=6.6155e-13
  0.000000	  0.000000	diff=1.07926e-12
 -0.000000	 -0.000000	diff=1.89555e-13
  0.000000	  0.000000	diff=4.25635e-13
 -0.000000	 -0.000000	diff=2.53682e-13
 -0.000000	 -0.000000	diff=1.61235e-13
 -0.000000	 -0.000000	diff=5.27782e-14
  0.000000	  0.000000	diff=2.48394e-13
  0.000000	  0.000000	diff=5.81092e-10
 -0.000001	 -0.000001	diff=2.48722e-11
 -0.000000	 -0.000000	diff=6.65829e-14
  0.000000	  0.000000	diff=6.93715e-13
  0.000000	  0.000000	diff=7.15414e-14
  0.000000	  0.000000	diff=9.46472e-13
 -0.000000	 -0.000000	diff=4.11023e-13
  0.000000	  0.000000	diff=3.49565e-13
 -0.000000	 -0.000000	diff=5.31746e-12
  0.000000	  0.000000	diff=7.79432e-10
  local_diff=2.18979e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.09465e-12
  0.000000	  0.000000	diff=8.29531e-13
  0.000000	  0.000000	diff=3.57942e-13
  0.000000	  0.000000	diff=7.25626e-13
 -0.000000	 -0.000000	diff=3.35214e-13
  0.000000	  0.000000	diff=3.91768e-13
 -0.000014	 -0.000014	diff=5.96309e-12
  0.000019	  0.000019	diff=2.20487e-11
 -0.000000	 -0.000000	diff=2.22214e-13
  0.000000	  0.000000	diff=8.71873e-14
 -0.000000	 -0.000000	diff=5.05379e-14
  0.000000	  0.000000	diff=2.12022e-14
 -0.000000	 -0.000000	diff=4.02202e-13
  0.000000	  0.000000	diff=2.03783e-14
 -0.000018	 -0.000018	diff=4.47466e-11
  0.000021	  0.000021	diff=7.15971e-11
 -0.000000	 -0.000000	diff=5.55991e-13
 -0.000000	 -0.000000	diff=2.31795e-13
  0.000000	  0.000000	diff=5.1202e-13
  0.000000	  0.000000	diff=1.36825e-12
  0.000000	  0.000000	diff=5.01908e-13
  0.000000	  0.000000	diff=7.04833e-13
 -0.000000	 -0.000000	diff=8.09976e-10
  0.000000	  0.000000	diff=2.16895e-11
  0.000000	  0.000000	diff=2.93865e-13
 -0.000000	 -0.000000	diff=7.35344e-13
 -0.000000	 -0.000000	diff=1.16281e-12
 -0.000000	 -0.000000	diff=3.36868e-13
  0.000000	  0.000000	diff=4.6684e-13
 -0.000000	 -0.000000	diff=5.03331e-13
  0.000001	  0.000001	diff=3.81398e-12
 -0.000001	 -0.000001	diff=1.90861e-09
  local_diff=2.90036e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000005	 -0.000005	diff=1.70782e-09
 -0.000001	 -0.000001	diff=5.15328e-10
 -0.000003	 -0.000003	diff=1.28676e-09
 -0.000003	 -0.000003	diff=2.31388e-10
  local_diff=3.7413e-09
# W_emb_tgt, [2 4]
 -0.000016	 -0.000016	diff=4.41144e-09
  0.000002	  0.000002	diff=1.08393e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000014	 -0.000014	diff=5.36535e-09
  0.000002	  0.000002	diff=1.10428e-09
 -0.000005	 -0.000005	diff=2.92347e-09
  0.000002	  0.000002	diff=1.17225e-09
  local_diff=1.60607e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=3.99914e-15
  0.000000	  0.000000	diff=5.06273e-15
  0.000000	 -0.000000	diff=1.24126e-14
  0.000000	 -0.000000	diff=1.57138e-14
  local_diff=3.71882e-14
# v_pos, [1 2]
 -0.000000	  0.000000	diff=1.49251e-12
  0.000000	  0.000000	diff=2.52354e-13
  local_diff=1.74486e-12
# W_h, [2 4]
 -0.000009	 -0.000009	diff=2.12962e-13
  0.000006	  0.000006	diff=2.9753e-13
  0.000011	  0.000011	diff=3.7415e-13
 -0.000008	 -0.000008	diff=1.09474e-14
  0.000005	  0.000005	diff=3.55734e-12
  0.000000	  0.000000	diff=1.56363e-12
  0.000032	  0.000032	diff=1.59095e-10
 -0.000018	 -0.000018	diff=4.4842e-11
  local_diff=2.09954e-10
# W_soft, [4 2]
 -0.000017	 -0.000017	diff=5.5238e-13
 -0.000002	 -0.000002	diff=3.83745e-13
  0.000013	  0.000013	diff=2.08119e-14
  0.000005	  0.000005	diff=2.0477e-13
  0.000034	  0.000034	diff=1.38478e-13
 -0.000021	 -0.000021	diff=2.47524e-13
 -0.000013	 -0.000013	diff=3.38367e-13
  0.000001	  0.000001	diff=1.38259e-14
  local_diff=1.8999e-12
# Num params=182, abs_diff=2.59737e-08
Elapsed time is 2.928220 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 180, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 180
  src input 1: <s> <s> x y
  src mask: 0  0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=7.25527e-13
  0.000000	  0.000000	diff=3.30373e-13
 -0.000000	 -0.000000	diff=6.59947e-13
  0.000000	  0.000000	diff=3.96124e-13
 -0.000000	 -0.000000	diff=6.46696e-13
 -0.000000	 -0.000000	diff=3.60854e-13
  0.000004	  0.000004	diff=1.64823e-11
  0.000002	  0.000002	diff=2.46041e-11
  0.000000	  0.000000	diff=1.89628e-13
 -0.000000	 -0.000000	diff=1.09527e-12
  0.000000	  0.000000	diff=1.38839e-12
 -0.000000	 -0.000000	diff=5.56712e-13
  0.000000	  0.000000	diff=9.92847e-13
  0.000000	  0.000000	diff=7.81952e-13
 -0.000004	 -0.000004	diff=1.75265e-11
 -0.000008	 -0.000008	diff=1.09849e-10
  0.000000	  0.000000	diff=6.72281e-13
 -0.000000	 -0.000000	diff=7.11101e-13
  0.000000	  0.000000	diff=1.69794e-13
 -0.000000	 -0.000000	diff=6.40575e-13
 -0.000000	 -0.000000	diff=9.25861e-13
  0.000000	  0.000000	diff=1.08435e-12
 -0.000000	 -0.000000	diff=1.36348e-11
 -0.000000	 -0.000000	diff=1.1162e-12
 -0.000000	 -0.000000	diff=1.12875e-12
  0.000000	  0.000000	diff=4.8725e-13
 -0.000000	 -0.000000	diff=7.88368e-13
  0.000000	  0.000000	diff=7.05899e-13
  0.000000	  0.000000	diff=6.91426e-13
 -0.000000	 -0.000000	diff=1.12456e-12
  0.000000	  0.000000	diff=2.6305e-13
  0.000000	  0.000000	diff=8.86e-11
  local_diff=2.89331e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.77226e-13
  0.000000	  0.000000	diff=3.53462e-13
 -0.000000	 -0.000000	diff=8.21037e-13
  0.000000	  0.000000	diff=5.901e-13
  0.000000	  0.000000	diff=1.10312e-12
  0.000000	  0.000000	diff=1.46781e-12
  0.000004	  0.000004	diff=3.07653e-13
  0.000006	  0.000006	diff=1.02407e-12
  0.000000	  0.000000	diff=5.89346e-13
 -0.000000	 -0.000000	diff=1.48621e-12
  0.000000	  0.000000	diff=5.84522e-13
 -0.000000	 -0.000000	diff=1.85798e-13
 -0.000000	 -0.000000	diff=1.10088e-12
 -0.000000	 -0.000000	diff=8.72813e-13
 -0.000007	 -0.000007	diff=1.38621e-12
 -0.000011	 -0.000011	diff=2.23378e-12
 -0.000000	 -0.000000	diff=5.47288e-13
  0.000000	  0.000000	diff=1.36964e-12
 -0.000000	 -0.000000	diff=1.24207e-12
 -0.000000	  0.000000	diff=9.60686e-13
 -0.000000	  0.000000	diff=1.04472e-12
  0.000000	  0.000000	diff=1.12475e-12
  0.000000	  0.000000	diff=2.34169e-11
  0.000000	  0.000000	diff=1.64329e-12
  0.000000	  0.000000	diff=1.18779e-12
 -0.000000	 -0.000000	diff=4.0224e-13
  0.000000	  0.000000	diff=5.73037e-13
 -0.000000	 -0.000000	diff=1.38834e-13
 -0.000000	 -0.000000	diff=1.00893e-12
 -0.000000	 -0.000000	diff=1.09906e-12
 -0.000000	 -0.000000	diff=1.10885e-12
 -0.000000	 -0.000000	diff=3.64226e-11
  local_diff=8.76747e-11
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.04432e-12
 -0.000000	 -0.000000	diff=5.66269e-13
 -0.000000	 -0.000000	diff=2.60918e-12
 -0.000000	 -0.000000	diff=1.45481e-12
 -0.000000	 -0.000000	diff=6.97181e-13
 -0.000000	 -0.000000	diff=5.79122e-13
  0.000007	  0.000007	diff=1.62641e-10
  0.000064	  0.000064	diff=1.69971e-10
 -0.000000	 -0.000000	diff=1.37756e-12
  0.000000	  0.000000	diff=1.14599e-12
  0.000000	  0.000000	diff=1.04707e-14
 -0.000000	 -0.000000	diff=3.46298e-12
  0.000000	  0.000000	diff=5.90249e-13
  0.000000	  0.000000	diff=1.689e-12
 -0.000004	 -0.000004	diff=5.70541e-11
 -0.000036	 -0.000036	diff=2.73003e-10
 -0.000000	 -0.000000	diff=2.29041e-13
 -0.000000	 -0.000000	diff=4.95275e-13
 -0.000000	 -0.000000	diff=5.93886e-13
 -0.000000	 -0.000000	diff=6.37361e-13
 -0.000000	 -0.000000	diff=5.84604e-13
 -0.000000	 -0.000000	diff=9.52663e-13
  0.000000	  0.000000	diff=2.34704e-13
  0.000000	  0.000000	diff=6.99316e-13
 -0.000000	 -0.000000	diff=6.75809e-14
 -0.000000	 -0.000000	diff=3.48978e-13
  0.000000	 -0.000000	diff=3.91101e-13
 -0.000000	 -0.000000	diff=1.46681e-14
 -0.000000	 -0.000000	diff=6.65243e-13
 -0.000000	 -0.000000	diff=4.81605e-13
  0.000000	  0.000000	diff=1.11316e-12
  0.000000	  0.000000	diff=3.2885e-13
  0.000000	  0.000000	diff=1.37428e-12
  0.000000	  0.000000	diff=5.87971e-13
  0.000000	  0.000000	diff=1.42301e-13
  0.000000	  0.000000	diff=8.2193e-13
  0.000000	  0.000000	diff=1.59667e-12
  0.000000	  0.000000	diff=9.64348e-13
 -0.000000	 -0.000000	diff=3.62852e-10
 -0.000001	 -0.000001	diff=6.24802e-11
  0.000000	  0.000000	diff=1.3009e-12
  0.000000	  0.000000	diff=5.60905e-13
 -0.000000	 -0.000000	diff=1.06845e-12
  0.000000	  0.000000	diff=9.52214e-13
  0.000000	  0.000000	diff=2.4071e-13
  0.000000	  0.000000	diff=9.41199e-13
  0.000000	  0.000000	diff=2.07587e-12
 -0.000000	 -0.000000	diff=5.40467e-10
  local_diff=1.66416e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.14414e-12
  0.000000	  0.000000	diff=7.24542e-13
 -0.000000	 -0.000000	diff=5.47795e-13
  0.000000	  0.000000	diff=7.66428e-13
  0.000000	  0.000000	diff=7.08064e-13
  0.000000	  0.000000	diff=9.00708e-13
  0.000015	  0.000015	diff=5.81742e-12
  0.000024	  0.000024	diff=4.45132e-11
  0.000000	  0.000000	diff=5.18061e-13
  0.000000	  0.000000	diff=5.38292e-13
  0.000000	  0.000000	diff=2.11489e-13
  0.000000	  0.000000	diff=3.8802e-13
  0.000000	  0.000000	diff=1.61666e-13
  0.000000	  0.000000	diff=4.22923e-13
  0.000024	  0.000024	diff=5.52161e-12
  0.000046	  0.000046	diff=2.53993e-10
  0.000000	  0.000000	diff=9.30403e-13
 -0.000000	 -0.000000	diff=1.54542e-12
 -0.000000	 -0.000000	diff=8.06774e-13
 -0.000000	 -0.000000	diff=3.47252e-13
 -0.000000	 -0.000000	diff=4.79507e-13
 -0.000000	 -0.000000	diff=9.1413e-13
  0.000000	  0.000000	diff=6.49666e-10
  0.000000	  0.000000	diff=2.57365e-11
 -0.000000	 -0.000000	diff=6.15397e-13
 -0.000000	 -0.000000	diff=1.35272e-12
  0.000000	  0.000000	diff=5.85448e-13
 -0.000000	 -0.000000	diff=3.30374e-13
 -0.000000	 -0.000000	diff=1.3182e-12
 -0.000000	 -0.000000	diff=5.95356e-13
 -0.000001	 -0.000001	diff=1.67821e-12
 -0.000001	 -0.000001	diff=2.95445e-09
  local_diff=3.95823e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.73563e-09
 -0.000000	 -0.000000	diff=3.30264e-11
 -0.000003	 -0.000003	diff=1.21769e-09
 -0.000005	 -0.000005	diff=3.20416e-09
  local_diff=6.19051e-09
# W_emb_tgt, [2 4]
 -0.000027	 -0.000027	diff=2.64387e-09
 -0.000001	 -0.000001	diff=1.23787e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000037	 -0.000037	diff=8.6769e-09
  0.000000	  0.000000	diff=6.04578e-10
 -0.000024	 -0.000024	diff=1.27233e-09
 -0.000000	 -0.000000	diff=7.29822e-10
  local_diff=1.51654e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.72623e-15
  0.000000	 -0.000000	diff=2.0995e-15
  0.000000	  0.000000	diff=1.56581e-15
  0.000000	 -0.000000	diff=1.94789e-15
  local_diff=7.33944e-15
# W_h, [2 4]
  0.000014	  0.000014	diff=1.64191e-13
 -0.000010	 -0.000010	diff=1.82098e-12
 -0.000020	 -0.000020	diff=8.50536e-13
  0.000014	  0.000014	diff=1.94071e-12
 -0.000015	 -0.000015	diff=5.23726e-12
 -0.000003	 -0.000003	diff=4.53978e-12
 -0.000069	 -0.000069	diff=4.91424e-10
  0.000023	  0.000023	diff=2.77838e-12
  local_diff=5.08756e-10
# W_soft, [4 2]
  0.000052	  0.000052	diff=6.21727e-13
 -0.000028	 -0.000028	diff=1.61122e-13
 -0.000026	 -0.000026	diff=6.56221e-13
  0.000003	  0.000003	diff=6.92557e-13
  0.000014	  0.000014	diff=6.11559e-16
 -0.000001	 -0.000001	diff=1.18726e-12
 -0.000009	 -0.000009	diff=1.40216e-12
 -0.000004	 -0.000004	diff=9.63901e-13
  local_diff=5.68557e-12
# Num params=180, abs_diff=2.78697e-08
Elapsed time is 2.153474 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 v_a=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.21914e-12
  0.000000	  0.000000	diff=2.03453e-12
 -0.000000	 -0.000000	diff=1.08414e-12
  0.000000	  0.000000	diff=3.52963e-13
 -0.000000	 -0.000000	diff=8.92648e-13
 -0.000000	 -0.000000	diff=1.62804e-12
  0.000003	  0.000003	diff=1.42265e-11
  0.000003	  0.000003	diff=3.31189e-11
  0.000000	  0.000000	diff=1.30119e-12
 -0.000000	 -0.000000	diff=1.39862e-12
  0.000000	  0.000000	diff=1.91037e-12
 -0.000000	 -0.000000	diff=1.55124e-12
  0.000000	  0.000000	diff=1.31835e-12
  0.000000	  0.000000	diff=7.75057e-13
 -0.000006	 -0.000006	diff=3.56686e-11
 -0.000011	 -0.000011	diff=1.35085e-10
  0.000000	  0.000000	diff=8.70774e-13
 -0.000000	 -0.000000	diff=1.18393e-12
  0.000000	  0.000000	diff=1.328e-12
 -0.000000	 -0.000000	diff=1.49884e-12
  0.000000	  0.000000	diff=1.0172e-12
  0.000000	  0.000000	diff=1.02992e-12
 -0.000000	 -0.000000	diff=1.34342e-10
 -0.000000	 -0.000000	diff=2.32447e-12
 -0.000000	 -0.000000	diff=9.45594e-13
  0.000000	  0.000000	diff=6.25907e-13
 -0.000000	 -0.000000	diff=1.45837e-12
  0.000000	  0.000000	diff=1.06635e-12
 -0.000000	 -0.000000	diff=6.8813e-13
 -0.000000	 -0.000000	diff=1.9757e-12
  0.000000	  0.000000	diff=7.78732e-14
  0.000000	  0.000000	diff=1.31043e-10
  local_diff=5.15042e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.02997e-12
  0.000000	  0.000000	diff=1.3527e-12
  0.000000	  0.000000	diff=2.13038e-14
  0.000000	  0.000000	diff=6.30099e-13
  0.000000	  0.000000	diff=4.03861e-13
 -0.000000	 -0.000000	diff=4.09256e-13
 -0.000007	 -0.000007	diff=1.64441e-12
  0.000001	  0.000001	diff=5.66841e-12
 -0.000000	 -0.000000	diff=8.32569e-13
 -0.000000	 -0.000000	diff=8.74844e-13
 -0.000000	 -0.000000	diff=1.86688e-12
 -0.000000	 -0.000000	diff=1.13211e-12
 -0.000000	 -0.000000	diff=1.36893e-12
  0.000000	  0.000000	diff=1.04505e-12
  0.000005	  0.000005	diff=1.95071e-12
 -0.000003	 -0.000003	diff=6.48931e-12
  0.000000	  0.000000	diff=2.21508e-13
  0.000000	  0.000000	diff=1.75907e-13
  0.000000	  0.000000	diff=1.37113e-12
  0.000000	  0.000000	diff=1.58948e-12
  0.000000	  0.000000	diff=8.79805e-13
 -0.000000	 -0.000000	diff=1.02887e-12
 -0.000000	 -0.000000	diff=1.06276e-10
  0.000000	  0.000000	diff=8.28464e-13
 -0.000000	 -0.000000	diff=1.76287e-12
 -0.000000	 -0.000000	diff=1.84826e-12
 -0.000000	 -0.000000	diff=1.50769e-12
 -0.000000	 -0.000000	diff=1.5925e-12
 -0.000000	 -0.000000	diff=1.4096e-12
  0.000000	  0.000000	diff=1.17717e-12
  0.000000	  0.000000	diff=1.20899e-12
 -0.000000	 -0.000000	diff=1.18013e-10
  local_diff=2.67612e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.84834e-12
 -0.000000	 -0.000000	diff=5.95989e-14
  0.000000	  0.000000	diff=1.06029e-12
 -0.000000	 -0.000000	diff=4.87089e-14
  0.000000	  0.000000	diff=1.44694e-12
 -0.000000	 -0.000000	diff=1.56916e-12
 -0.000007	 -0.000007	diff=1.20166e-10
  0.000032	  0.000032	diff=2.38629e-10
  0.000000	  0.000000	diff=1.16166e-12
  0.000000	  0.000000	diff=7.57252e-13
 -0.000000	 -0.000000	diff=1.87051e-12
 -0.000000	 -0.000000	diff=2.82517e-12
  0.000000	  0.000000	diff=1.5794e-12
  0.000000	  0.000000	diff=6.67025e-13
  0.000004	  0.000004	diff=3.86825e-11
 -0.000031	 -0.000031	diff=3.70928e-10
 -0.000000	 -0.000000	diff=1.00294e-12
  0.000000	  0.000000	diff=1.01068e-12
 -0.000000	 -0.000000	diff=1.11095e-12
 -0.000000	  0.000000	diff=8.91698e-13
 -0.000000	 -0.000000	diff=1.64908e-13
  0.000000	  0.000000	diff=8.73505e-13
  0.000000	  0.000000	diff=9.03275e-13
 -0.000000	 -0.000000	diff=5.01985e-13
  0.000000	  0.000000	diff=2.65617e-13
 -0.000000	 -0.000000	diff=1.04406e-12
  0.000000	  0.000000	diff=1.32717e-13
 -0.000000	 -0.000000	diff=6.49373e-13
  0.000000	  0.000000	diff=3.72845e-13
 -0.000000	 -0.000000	diff=5.43755e-13
 -0.000000	 -0.000000	diff=1.27143e-12
  0.000000	  0.000000	diff=1.24055e-12
 -0.000000	 -0.000000	diff=9.01832e-13
  0.000000	  0.000000	diff=9.75696e-13
 -0.000000	 -0.000000	diff=4.58081e-13
 -0.000000	 -0.000000	diff=1.57529e-12
 -0.000000	 -0.000000	diff=1.37072e-12
  0.000000	  0.000000	diff=1.64666e-12
  0.000000	  0.000000	diff=5.79812e-10
 -0.000001	 -0.000001	diff=2.40755e-11
 -0.000000	 -0.000000	diff=1.4908e-12
  0.000000	  0.000000	diff=1.37224e-12
  0.000000	  0.000000	diff=6.41895e-13
  0.000000	  0.000000	diff=9.31566e-13
 -0.000000	 -0.000000	diff=1.12611e-12
  0.000000	  0.000000	diff=1.0162e-12
 -0.000000	 -0.000000	diff=5.52999e-12
  0.000000	  0.000000	diff=7.78741e-10
  local_diff=2.19694e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.09763e-12
  0.000000	  0.000000	diff=1.48361e-12
  0.000000	  0.000000	diff=1.06353e-12
  0.000000	  0.000000	diff=6.74564e-13
 -0.000000	 -0.000000	diff=1.04716e-12
  0.000000	  0.000000	diff=9.63086e-13
 -0.000014	 -0.000014	diff=5.07338e-12
  0.000019	  0.000019	diff=2.40577e-11
 -0.000000	 -0.000000	diff=9.41081e-13
  0.000000	  0.000000	diff=1.41527e-12
 -0.000000	 -0.000000	diff=1.47241e-12
  0.000000	  0.000000	diff=1.35831e-12
 -0.000000	 -0.000000	diff=2.44564e-12
  0.000000	  0.000000	diff=2.04321e-12
 -0.000018	 -0.000018	diff=4.33427e-11
  0.000021	  0.000021	diff=7.38484e-11
 -0.000000	 -0.000000	diff=1.26653e-12
 -0.000000	 -0.000000	diff=2.31901e-13
  0.000000	  0.000000	diff=1.22254e-12
  0.000000	  0.000000	diff=2.07891e-12
  0.000000	  0.000000	diff=1.21242e-12
  0.000000	  0.000000	diff=1.4157e-12
 -0.000000	 -0.000000	diff=8.11944e-10
  0.000000	  0.000000	diff=2.2411e-11
  0.000000	  0.000000	diff=1.12703e-12
 -0.000000	 -0.000000	diff=7.37007e-13
 -0.000000	 -0.000000	diff=1.16271e-12
 -0.000000	 -0.000000	diff=1.04809e-12
  0.000000	  0.000000	diff=4.66619e-13
 -0.000000	 -0.000000	diff=1.21589e-12
  0.000001	  0.000001	diff=4.5497e-12
 -0.000001	 -0.000001	diff=1.90854e-09
  local_diff=2.92296e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.27732e-09
 -0.000002	 -0.000002	diff=1.16182e-09
 -0.000002	 -0.000002	diff=9.71432e-10
 -0.000005	 -0.000005	diff=1.09873e-09
  local_diff=4.5093e-09
# W_emb_tgt, [2 4]
 -0.000016	 -0.000016	diff=4.41251e-09
  0.000002	  0.000002	diff=1.08315e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000014	 -0.000014	diff=5.36542e-09
  0.000002	  0.000002	diff=1.10349e-09
 -0.000005	 -0.000005	diff=2.92407e-09
  0.000002	  0.000002	diff=1.17214e-09
  local_diff=1.60608e-08
# W_a, [2 2]
  0.000000	 -0.000000	diff=4.40436e-23
  0.000000	 -0.000000	diff=7.2354e-23
  0.000000	 -0.000000	diff=1.65894e-22
  0.000000	 -0.000000	diff=2.95469e-22
  local_diff=5.7776e-22
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.25454e-12
  0.000000	  0.000000	diff=1.82986e-12
  local_diff=3.08441e-12
# W_h, [2 4]
 -0.000014	 -0.000014	diff=7.44315e-13
  0.000010	  0.000010	diff=1.54572e-12
  0.000018	  0.000018	diff=6.18696e-13
 -0.000013	 -0.000013	diff=1.6273e-13
  0.000005	  0.000005	diff=4.70519e-12
  0.000000	  0.000000	diff=8.86246e-14
  0.000032	  0.000032	diff=1.58294e-10
 -0.000018	 -0.000018	diff=4.72752e-11
  local_diff=2.13434e-10
# W_soft, [4 2]
 -0.000019	 -0.000019	diff=4.15344e-13
 -0.000001	 -0.000001	diff=7.38931e-13
  0.000015	  0.000015	diff=5.71911e-13
  0.000005	  0.000005	diff=1.11599e-12
  0.000025	  0.000025	diff=1.1856e-12
 -0.000019	 -0.000019	diff=3.03095e-14
 -0.000007	 -0.000007	diff=5.94445e-13
  0.000001	  0.000001	diff=1.09243e-12
  local_diff=5.74496e-12
# Num params=182, abs_diff=2.66949e-08
Elapsed time is 2.243896 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 268, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtRare = 5
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 8
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 268
  src input 1: <s> <s> <s> z
  src mask: 0  0  0  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=7.24592e-13
  0.000000	  0.000000	diff=4.20423e-13
 -0.000000	 -0.000000	diff=3.91542e-13
  0.000000	  0.000000	diff=1.44035e-13
 -0.000000	 -0.000000	diff=2.2756e-13
 -0.000000	 -0.000000	diff=3.47147e-13
  0.000001	  0.000001	diff=5.886e-13
  0.000000	  0.000000	diff=1.89061e-12
  0.000000	  0.000000	diff=7.77445e-13
 -0.000000	 -0.000000	diff=6.90895e-14
 -0.000000	 -0.000000	diff=1.06643e-12
 -0.000000	 -0.000000	diff=3.25811e-13
  0.000000	  0.000000	diff=1.92561e-13
  0.000000	  0.000000	diff=2.64341e-13
 -0.000002	 -0.000002	diff=8.50171e-13
  0.000000	  0.000000	diff=1.63655e-12
  0.000000	  0.000000	diff=4.72787e-13
  0.000000	  0.000000	diff=2.7387e-13
  0.000000	  0.000000	diff=7.95053e-13
 -0.000000	 -0.000000	diff=4.24248e-13
  0.000000	  0.000000	diff=1.23593e-12
  0.000000	  0.000000	diff=6.40575e-13
 -0.000000	 -0.000000	diff=4.25486e-11
 -0.000000	 -0.000000	diff=9.49303e-14
  0.000000	 -0.000000	diff=9.35801e-14
  0.000000	 -0.000000	diff=3.37865e-13
 -0.000000	 -0.000000	diff=1.59496e-13
  0.000000	  0.000000	diff=3.58064e-13
 -0.000000	 -0.000000	diff=7.77646e-13
 -0.000000	 -0.000000	diff=9.02873e-13
  0.000000	  0.000000	diff=1.13805e-13
  0.000000	  0.000000	diff=4.04058e-11
  local_diff=9.9552e-11
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.72466e-13
  0.000000	  0.000000	diff=6.75873e-13
 -0.000000	 -0.000000	diff=1.616e-13
  0.000000	  0.000000	diff=5.52641e-13
  0.000000	  0.000000	diff=7.40744e-13
  0.000000	  0.000000	diff=2.67332e-13
  0.000000	  0.000000	diff=3.5463e-13
  0.000002	  0.000002	diff=4.834e-13
  0.000000	  0.000000	diff=2.26961e-13
 -0.000000	 -0.000000	diff=1.18865e-12
  0.000000	  0.000000	diff=6.0268e-13
 -0.000000	 -0.000000	diff=1.75469e-13
 -0.000000	 -0.000000	diff=1.42023e-13
 -0.000000	 -0.000000	diff=5.26532e-13
 -0.000000	 -0.000000	diff=4.58418e-13
 -0.000002	 -0.000002	diff=8.75769e-13
 -0.000000	 -0.000000	diff=5.51704e-13
  0.000000	  0.000000	diff=7.02782e-13
 -0.000000	 -0.000000	diff=4.56028e-13
  0.000000	  0.000000	diff=4.82338e-13
  0.000000	  0.000000	diff=3.22557e-14
  0.000000	  0.000000	diff=2.0074e-13
  0.000000	  0.000000	diff=2.527e-11
  0.000000	  0.000000	diff=4.08162e-13
  0.000000	  0.000000	diff=1.95299e-13
 -0.000000	 -0.000000	diff=1.71323e-13
  0.000000	  0.000000	diff=3.95161e-13
 -0.000000	 -0.000000	diff=2.62661e-13
 -0.000000	 -0.000000	diff=6.70807e-13
  0.000000	 -0.000000	diff=6.21708e-13
 -0.000000	 -0.000000	diff=2.38185e-14
 -0.000000	 -0.000000	diff=6.14917e-11
  local_diff=9.96417e-11
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=3.71898e-13
 -0.000000	 -0.000000	diff=2.2263e-13
  0.000000	  0.000000	diff=2.43866e-13
  0.000000	  0.000000	diff=1.53159e-13
 -0.000000	 -0.000000	diff=1.81324e-13
 -0.000000	 -0.000000	diff=1.36235e-12
  0.000001	  0.000001	diff=6.49668e-12
 -0.000002	 -0.000002	diff=6.27196e-12
 -0.000000	 -0.000000	diff=8.95001e-13
 -0.000000	 -0.000000	diff=3.41664e-13
  0.000000	  0.000000	diff=1.34773e-13
 -0.000000	 -0.000000	diff=4.21285e-13
 -0.000000	 -0.000000	diff=5.63512e-13
 -0.000000	 -0.000000	diff=1.20991e-13
 -0.000006	 -0.000006	diff=1.00787e-10
 -0.000014	 -0.000014	diff=3.15389e-09
  0.000000	 -0.000000	diff=3.6526e-14
  0.000000	 -0.000000	diff=2.36002e-15
  0.000000	 -0.000000	diff=9.41883e-15
  0.000000	 -0.000000	diff=8.51297e-15
  0.000000	 -0.000000	diff=4.61564e-14
  0.000000	 -0.000000	diff=1.17834e-15
  0.000000	  0.000000	diff=4.47206e-13
 -0.000000	 -0.000000	diff=1.07369e-12
  0.000000	  0.000000	diff=1.2119e-14
  0.000000	  0.000000	diff=2.27493e-14
  0.000000	 -0.000000	diff=5.00641e-14
 -0.000000	 -0.000000	diff=6.97208e-13
  0.000000	 -0.000000	diff=2.64691e-14
  0.000000	  0.000000	diff=1.07533e-14
 -0.000000	 -0.000000	diff=3.06604e-13
 -0.000000	 -0.000000	diff=3.64442e-13
 -0.000000	 -0.000000	diff=4.13387e-13
 -0.000000	 -0.000000	diff=3.07917e-14
  0.000000	  0.000000	diff=7.40472e-13
 -0.000000	 -0.000000	diff=6.77676e-13
  0.000000	  0.000000	diff=4.32992e-13
 -0.000000	 -0.000000	diff=1.06859e-13
  0.000000	  0.000000	diff=9.09748e-11
  0.000000	  0.000000	diff=3.33328e-12
  0.000000	  0.000000	diff=3.27561e-13
 -0.000000	 -0.000000	diff=5.25213e-13
 -0.000000	 -0.000000	diff=6.89238e-13
  0.000000	  0.000000	diff=1.45164e-13
  0.000000	  0.000000	diff=2.51459e-14
 -0.000000	 -0.000000	diff=5.80435e-13
  0.000000	  0.000000	diff=3.53528e-12
  0.000000	  0.000000	diff=9.4121e-11
  local_diff=3.47224e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=6.04001e-13
  0.000000	  0.000000	diff=4.89734e-13
  0.000000	  0.000000	diff=3.97635e-13
 -0.000000	 -0.000000	diff=5.98066e-13
  0.000000	  0.000000	diff=7.51615e-13
  0.000000	  0.000000	diff=4.86286e-14
 -0.000003	 -0.000003	diff=1.17721e-11
 -0.000006	 -0.000006	diff=2.5857e-13
  0.000000	  0.000000	diff=1.24444e-12
  0.000000	  0.000000	diff=9.90628e-14
  0.000000	  0.000000	diff=3.52942e-14
 -0.000000	 -0.000000	diff=7.74577e-13
  0.000000	  0.000000	diff=3.88157e-13
 -0.000000	 -0.000000	diff=5.30349e-13
  0.000000	  0.000000	diff=2.40804e-12
 -0.000002	 -0.000002	diff=1.00359e-12
  0.000000	 -0.000000	diff=3.58904e-13
  0.000000	 -0.000000	diff=2.68725e-13
 -0.000000	 -0.000000	diff=6.51124e-14
  0.000000	  0.000000	diff=2.01408e-13
 -0.000000	 -0.000000	diff=6.94028e-13
  0.000000	  0.000000	diff=8.40785e-13
  0.000000	  0.000000	diff=5.0127e-10
  0.000000	  0.000000	diff=3.31449e-12
  0.000000	 -0.000000	diff=2.30935e-13
  0.000000	  0.000000	diff=5.67528e-14
  0.000000	  0.000000	diff=6.55157e-13
  0.000000	 -0.000000	diff=9.06038e-13
 -0.000000	 -0.000000	diff=2.79129e-13
  0.000000	 -0.000000	diff=7.85496e-13
 -0.000000	 -0.000000	diff=2.19444e-12
 -0.000000	 -0.000000	diff=4.62792e-11
  local_diff=5.79804e-10
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=7.87805e-10
  0.000003	  0.000003	diff=2.15813e-09
 -0.000000	 -0.000000	diff=2.62761e-11
  0.000000	  0.000000	diff=4.71187e-11
  local_diff=3.01933e-09
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=8.98633e-13
  0.000000	  0.000000	diff=8.0626e-13
  0.000000	  0.000000	diff=4.77098e-13
 -0.000000	 -0.000000	diff=7.33662e-14
 -0.000000	 -0.000000	diff=4.92101e-14
 -0.000000	 -0.000000	diff=6.21066e-14
  0.000000	  0.000000	diff=6.11558e-13
 -0.000000	 -0.000000	diff=7.1195e-13
 -0.000000	 -0.000000	diff=3.33638e-14
  0.000000	  0.000000	diff=1.40654e-12
  0.000000	  0.000000	diff=2.44567e-13
 -0.000000	 -0.000000	diff=9.81938e-15
 -0.000000	 -0.000000	diff=2.70267e-15
 -0.000000	 -0.000000	diff=6.63799e-13
 -0.000000	 -0.000000	diff=3.45996e-13
  0.000000	  0.000000	diff=2.83814e-12
  0.000000	  0.000000	diff=1.00856e-12
 -0.000000	 -0.000000	diff=3.91954e-13
 -0.000000	 -0.000000	diff=3.56707e-13
  0.000000	  0.000000	diff=9.76399e-13
 -0.000000	 -0.000000	diff=1.24427e-12
  0.000000	  0.000000	diff=2.94145e-13
 -0.000000	 -0.000000	diff=1.37842e-12
  0.000000	  0.000000	diff=6.89287e-13
  0.000000	  0.000000	diff=9.0759e-13
 -0.000000	 -0.000000	diff=1.75574e-13
 -0.000000	 -0.000000	diff=1.24857e-12
  0.000000	  0.000000	diff=5.53724e-13
 -0.000000	 -0.000000	diff=4.64106e-13
  0.000000	  0.000000	diff=8.82858e-13
 -0.000000	 -0.000000	diff=4.00396e-13
  0.000000	  0.000000	diff=2.81141e-12
  local_diff=2.30191e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.0468e-10
  0.000000	  0.000000	diff=1.2586e-11
 -0.000000	 -0.000000	diff=1.39428e-11
 -0.000000	 -0.000000	diff=1.09569e-12
 -0.000000	 -0.000000	diff=1.72775e-11
 -0.000000	 -0.000000	diff=1.25267e-12
 -0.000000	 -0.000000	diff=4.46636e-11
  0.000000	  0.000000	diff=3.59968e-12
  local_diff=3.99098e-10
# W_emb_tgt, [2 4]
 -0.000022	 -0.000022	diff=2.13381e-09
 -0.000002	 -0.000002	diff=1.35698e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=1.9356e-09
 -0.000001	 -0.000001	diff=4.33076e-10
 -0.000007	 -0.000007	diff=1.80681e-09
 -0.000002	 -0.000002	diff=1.04003e-09
  local_diff=8.7063e-09
# W_tgt_char{1}, [8 4]
  0.000000	  0.000000	diff=4.72107e-13
  0.000000	  0.000000	diff=7.3849e-13
 -0.000000	 -0.000000	diff=2.59583e-13
 -0.000000	 -0.000000	diff=7.61248e-13
  0.000000	  0.000000	diff=8.43275e-13
  0.000000	  0.000000	diff=8.49089e-13
  0.000000	  0.000000	diff=3.44263e-12
  0.000000	  0.000000	diff=5.32316e-13
  0.000000	  0.000000	diff=3.61193e-13
 -0.000000	 -0.000000	diff=8.27943e-13
  0.000000	  0.000000	diff=7.86874e-13
 -0.000000	 -0.000000	diff=7.68662e-13
 -0.000000	 -0.000000	diff=7.32456e-13
 -0.000000	 -0.000000	diff=3.38503e-13
 -0.000000	 -0.000000	diff=2.27434e-12
 -0.000000	 -0.000000	diff=3.0532e-12
  0.000000	  0.000000	diff=1.90512e-13
  0.000000	  0.000000	diff=2.97264e-13
 -0.000000	 -0.000000	diff=4.56234e-13
 -0.000000	 -0.000000	diff=4.39822e-13
  0.000000	  0.000000	diff=4.51719e-13
  0.000000	  0.000000	diff=1.61471e-13
  0.000000	  0.000000	diff=6.27046e-12
  0.000000	  0.000000	diff=1.90414e-15
  0.000000	  0.000000	diff=4.40411e-13
  0.000000	  0.000000	diff=7.09102e-13
 -0.000000	 -0.000000	diff=6.71689e-13
 -0.000000	 -0.000000	diff=2.3568e-13
  0.000000	  0.000000	diff=5.9182e-14
  0.000000	  0.000000	diff=2.0658e-13
 -0.000000	 -0.000000	diff=8.97108e-14
 -0.000000	 -0.000000	diff=1.99074e-12
  local_diff=2.97144e-11
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.65771e-11
  0.000000	  0.000000	diff=2.13813e-11
  0.000000	  0.000000	diff=1.29253e-11
  0.000000	  0.000000	diff=7.45912e-12
  0.000000	  0.000000	diff=7.43491e-12
  0.000000	  0.000000	diff=2.10717e-12
  0.000000	  0.000000	diff=2.36287e-11
  0.000000	  0.000000	diff=9.65789e-12
  local_diff=1.51171e-10
# W_pos, [2 2]
  0.000000	  0.000000	diff=8.22922e-15
 -0.000000	 -0.000000	diff=7.06264e-13
  0.000000	 -0.000000	diff=1.08734e-14
 -0.000000	  0.000000	diff=7.16196e-13
  local_diff=1.44156e-12
# v_pos, [1 2]
  0.000000	 -0.000000	diff=2.24927e-15
  0.000000	 -0.000000	diff=4.09222e-15
  local_diff=6.34149e-15
# W_h, [2 4]
  0.000001	  0.000001	diff=9.98742e-14
  0.000001	  0.000001	diff=7.74622e-13
 -0.000001	 -0.000001	diff=5.90937e-14
 -0.000002	 -0.000002	diff=7.79673e-13
  0.000005	  0.000005	diff=9.32941e-13
  0.000001	  0.000001	diff=9.52802e-12
  0.000001	  0.000001	diff=1.01105e-11
 -0.000002	 -0.000002	diff=2.13582e-11
  local_diff=4.3643e-11
# W_soft, [5 2]
  0.000003	  0.000003	diff=6.82685e-13
 -0.000002	 -0.000002	diff=3.28928e-13
  0.000003	  0.000003	diff=2.72048e-13
  0.000000	  0.000000	diff=2.66401e-14
 -0.000004	 -0.000004	diff=6.02194e-13
 -0.000002	 -0.000002	diff=7.71427e-13
 -0.000002	 -0.000002	diff=2.40553e-13
  0.000001	  0.000001	diff=6.48079e-13
 -0.000001	 -0.000001	diff=7.28726e-13
  0.000003	  0.000003	diff=5.75154e-13
  local_diff=4.87643e-12
# Num params=268, abs_diff=1.66298e-08
Elapsed time is 5.277958 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 396, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtRare = 5
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 8
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 396
  src input 1: <s> <s> xyz xz
  src mask: 0  0  1  1
  tgt input 1: <s> ac abc b c
  tgt output 1: ac abc b c </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=5.26898e-13
 -0.000000	 -0.000000	diff=1.04022e-13
  0.000000	  0.000000	diff=2.87541e-13
  0.000000	  0.000000	diff=3.83535e-13
  0.000000	  0.000000	diff=1.11863e-12
  0.000000	  0.000000	diff=1.02665e-13
 -0.000001	 -0.000001	diff=2.1193e-12
 -0.000000	 -0.000000	diff=7.72162e-13
 -0.000000	 -0.000000	diff=9.72756e-13
  0.000000	  0.000000	diff=5.94459e-13
 -0.000000	 -0.000000	diff=7.48052e-14
 -0.000000	 -0.000000	diff=7.07154e-13
 -0.000000	 -0.000000	diff=7.61225e-14
 -0.000000	 -0.000000	diff=3.21973e-13
  0.000001	  0.000001	diff=4.60094e-12
  0.000000	  0.000000	diff=3.58279e-12
 -0.000000	 -0.000000	diff=7.33765e-13
 -0.000000	 -0.000000	diff=8.62938e-13
 -0.000000	 -0.000000	diff=8.81295e-13
  0.000000	 -0.000000	diff=7.80901e-13
 -0.000000	 -0.000000	diff=7.80585e-14
 -0.000000	 -0.000000	diff=4.4657e-13
  0.000000	  0.000000	diff=5.67829e-11
  0.000000	  0.000000	diff=9.5193e-13
  0.000000	  0.000000	diff=5.11649e-13
  0.000000	  0.000000	diff=3.50174e-13
  0.000000	  0.000000	diff=2.81516e-13
  0.000000	 -0.000000	diff=1.74048e-12
  0.000000	  0.000000	diff=6.38908e-13
  0.000000	  0.000000	diff=5.91867e-13
 -0.000000	 -0.000000	diff=1.264e-13
 -0.000000	 -0.000000	diff=5.3384e-12
  local_diff=8.74435e-11
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.95986e-13
 -0.000000	 -0.000000	diff=4.27371e-13
 -0.000000	 -0.000000	diff=1.14561e-12
 -0.000000	 -0.000000	diff=1.12861e-12
 -0.000000	 -0.000000	diff=4.60798e-13
  0.000000	  0.000000	diff=5.49264e-13
  0.000001	  0.000001	diff=3.70774e-13
 -0.000000	 -0.000000	diff=1.71426e-12
  0.000000	  0.000000	diff=5.544e-13
  0.000000	  0.000000	diff=1.32723e-12
  0.000000	  0.000000	diff=5.85498e-13
  0.000000	  0.000000	diff=5.99587e-13
  0.000000	  0.000000	diff=5.70735e-13
 -0.000000	 -0.000000	diff=6.89729e-13
 -0.000001	 -0.000001	diff=3.19789e-14
  0.000000	  0.000000	diff=8.59791e-13
  0.000000	 -0.000000	diff=3.29607e-13
 -0.000000	 -0.000000	diff=8.42758e-14
  0.000000	 -0.000000	diff=2.44312e-13
  0.000000	 -0.000000	diff=8.55913e-13
  0.000000	  0.000000	diff=2.22978e-14
  0.000000	  0.000000	diff=1.05739e-12
  0.000000	  0.000000	diff=7.79817e-12
 -0.000000	 -0.000000	diff=5.8133e-14
  0.000000	  0.000000	diff=1.02041e-12
  0.000000	  0.000000	diff=4.07193e-13
  0.000000	  0.000000	diff=2.97279e-13
  0.000000	  0.000000	diff=3.80455e-13
  0.000000	 -0.000000	diff=2.64683e-14
  0.000000	 -0.000000	diff=4.33514e-13
 -0.000000	 -0.000000	diff=2.1757e-13
  0.000000	  0.000000	diff=5.08318e-11
  local_diff=7.56764e-11
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.62239e-13
  0.000000	  0.000000	diff=1.95154e-13
  0.000000	  0.000000	diff=8.46204e-13
  0.000000	  0.000000	diff=5.92082e-13
 -0.000000	 -0.000000	diff=5.81112e-14
  0.000000	  0.000000	diff=2.26128e-13
 -0.000003	 -0.000003	diff=1.98325e-11
  0.000006	  0.000006	diff=5.91237e-13
 -0.000000	 -0.000000	diff=2.94309e-13
  0.000000	  0.000000	diff=6.91864e-13
  0.000000	  0.000000	diff=6.92626e-14
  0.000000	  0.000000	diff=8.13777e-13
 -0.000000	 -0.000000	diff=6.70195e-14
  0.000000	  0.000000	diff=8.53664e-13
 -0.000002	 -0.000002	diff=9.45699e-12
  0.000004	  0.000004	diff=5.07751e-12
  0.000000	  0.000000	diff=2.038e-14
  0.000000	 -0.000000	diff=1.39147e-14
  0.000000	 -0.000000	diff=1.40244e-14
  0.000000	 -0.000000	diff=1.29274e-14
  0.000000	  0.000000	diff=1.0568e-14
  0.000000	 -0.000000	diff=3.80014e-14
 -0.000000	 -0.000000	diff=6.86673e-13
  0.000000	  0.000000	diff=8.97809e-13
  0.000000	  0.000000	diff=2.67962e-14
  0.000000	 -0.000000	diff=2.40005e-14
  0.000000	 -0.000000	diff=1.01277e-14
  0.000000	 -0.000000	diff=4.38417e-14
  0.000000	  0.000000	diff=1.84492e-14
  0.000000	 -0.000000	diff=7.42e-14
  0.000000	  0.000000	diff=3.75595e-13
  0.000000	  0.000000	diff=1.41008e-12
 -0.000000	 -0.000000	diff=9.41308e-14
  0.000000	  0.000000	diff=6.16801e-13
  0.000000	  0.000000	diff=2.15957e-13
 -0.000000	 -0.000000	diff=7.22799e-14
 -0.000000	 -0.000000	diff=5.34319e-14
  0.000000	  0.000000	diff=3.48559e-13
  0.000000	  0.000000	diff=1.90259e-11
 -0.000000	 -0.000000	diff=4.08958e-12
 -0.000000	 -0.000000	diff=3.68643e-13
 -0.000000	 -0.000000	diff=1.67666e-13
  0.000000	  0.000000	diff=3.48664e-13
 -0.000000	 -0.000000	diff=5.78982e-13
  0.000000	  0.000000	diff=1.47909e-13
 -0.000000	 -0.000000	diff=1.03902e-12
  0.000000	  0.000000	diff=1.55044e-12
 -0.000000	 -0.000000	diff=1.27671e-10
  local_diff=2.00494e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=2.68669e-13
 -0.000000	 -0.000000	diff=5.17397e-13
  0.000000	  0.000000	diff=8.59353e-13
  0.000000	  0.000000	diff=2.80882e-13
  0.000000	  0.000000	diff=5.99419e-13
 -0.000000	 -0.000000	diff=2.13478e-13
 -0.000006	 -0.000006	diff=6.4906e-12
  0.000007	  0.000007	diff=1.69431e-12
  0.000000	  0.000000	diff=4.87904e-13
 -0.000000	 -0.000000	diff=1.87312e-13
  0.000000	  0.000000	diff=7.29668e-13
  0.000000	  0.000000	diff=4.77045e-13
  0.000000	  0.000000	diff=7.82533e-14
 -0.000000	 -0.000000	diff=5.12888e-13
 -0.000005	 -0.000005	diff=7.17317e-12
  0.000007	  0.000007	diff=1.90483e-12
  0.000000	 -0.000000	diff=3.03341e-13
  0.000000	  0.000000	diff=1.87544e-13
  0.000000	  0.000000	diff=1.95057e-13
 -0.000000	 -0.000000	diff=4.06211e-14
 -0.000000	 -0.000000	diff=5.73366e-13
 -0.000000	 -0.000000	diff=2.32459e-13
  0.000000	  0.000000	diff=1.2355e-10
 -0.000000	 -0.000000	diff=3.0238e-12
  0.000000	  0.000000	diff=8.98482e-14
 -0.000000	 -0.000000	diff=3.42357e-14
  0.000000	  0.000000	diff=5.01469e-13
  0.000000	  0.000000	diff=4.59781e-13
  0.000000	  0.000000	diff=2.17067e-13
  0.000000	  0.000000	diff=3.79009e-14
  0.000000	  0.000000	diff=1.60242e-12
 -0.000000	 -0.000000	diff=6.84811e-11
  local_diff=2.22005e-10
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=2.80052e-10
 -0.000001	 -0.000001	diff=6.26229e-10
  0.000000	  0.000000	diff=9.60939e-11
 -0.000001	 -0.000001	diff=3.60254e-10
  local_diff=1.36263e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=1.77906e-13
  0.000000	 -0.000000	diff=7.48655e-14
  0.000000	 -0.000000	diff=4.30606e-14
  0.000000	 -0.000000	diff=1.72746e-14
  0.000000	 -0.000000	diff=1.24307e-13
  0.000000	 -0.000000	diff=5.23234e-14
 -0.000000	 -0.000000	diff=1.00083e-13
 -0.000000	 -0.000000	diff=1.41084e-14
  0.000000	 -0.000000	diff=9.45492e-14
  0.000000	 -0.000000	diff=3.97795e-14
  0.000000	 -0.000000	diff=3.7243e-14
  0.000000	 -0.000000	diff=1.36603e-14
  0.000000	 -0.000000	diff=7.66632e-14
  0.000000	 -0.000000	diff=3.14623e-14
 -0.000000	 -0.000000	diff=4.13942e-13
 -0.000000	 -0.000000	diff=5.19388e-14
  0.000000	 -0.000000	diff=3.28405e-15
  0.000000	 -0.000000	diff=1.22593e-15
  0.000000	 -0.000000	diff=3.98091e-15
  0.000000	 -0.000000	diff=1.60334e-15
  0.000000	 -0.000000	diff=5.33525e-15
  0.000000	 -0.000000	diff=2.08019e-15
 -0.000000	 -0.000000	diff=1.8904e-13
  0.000000	 -0.000000	diff=9.40083e-13
  0.000000	 -0.000000	diff=2.29165e-15
  0.000000	 -0.000000	diff=8.50221e-16
  0.000000	 -0.000000	diff=2.79274e-15
  0.000000	 -0.000000	diff=1.12252e-15
  0.000000	 -0.000000	diff=3.73736e-15
  0.000000	 -0.000000	diff=1.45212e-15
 -0.000000	 -0.000000	diff=2.9478e-13
  0.000000	 -0.000000	diff=6.54625e-13
  local_diff=3.47145e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=1.88021e-17
  0.000000	 -0.000000	diff=9.26384e-15
  0.000000	 -0.000000	diff=9.74371e-18
  0.000000	 -0.000000	diff=4.46991e-15
  0.000000	 -0.000000	diff=1.77291e-17
  0.000000	 -0.000000	diff=7.91457e-15
  0.000000	  0.000000	diff=1.32233e-12
  0.000000	  0.000000	diff=7.77689e-13
  0.000000	 -0.000000	diff=1.19729e-17
  0.000000	 -0.000000	diff=6.41419e-15
  0.000000	 -0.000000	diff=6.79007e-18
  0.000000	 -0.000000	diff=3.01398e-15
  0.000000	 -0.000000	diff=1.14623e-17
  0.000000	 -0.000000	diff=5.34019e-15
  0.000000	  0.000000	diff=3.48938e-13
  0.000000	  0.000000	diff=6.91907e-13
  0.000000	  0.000000	diff=3.14483e-21
  0.000000	  0.000000	diff=1.48805e-18
  0.000000	  0.000000	diff=3.32845e-21
  0.000000	  0.000000	diff=1.18626e-18
  0.000000	  0.000000	diff=5.81571e-21
  0.000000	  0.000000	diff=2.00949e-18
  0.000000	 -0.000000	diff=3.93931e-15
  0.000000	 -0.000000	diff=1.56803e-14
  0.000000	  0.000000	diff=8.01188e-19
  0.000000	  0.000000	diff=2.14046e-16
  0.000000	  0.000000	diff=3.49764e-19
  0.000000	  0.000000	diff=1.87565e-16
  0.000000	  0.000000	diff=9.67542e-19
  0.000000	  0.000000	diff=3.07805e-16
 -0.000000	 -0.000000	diff=1.67959e-13
 -0.000000	 -0.000000	diff=8.23409e-13
  local_diff=4.18906e-12
# W_src_char{3}, [8 4]
  0.000000	  0.000000	diff=8.68777e-19
  0.000000	  0.000000	diff=2.21213e-18
  0.000000	  0.000000	diff=3.13832e-19
  0.000000	  0.000000	diff=1.65368e-18
  0.000000	  0.000000	diff=8.45397e-19
  0.000000	  0.000000	diff=2.91571e-18
 -0.000000	 -0.000000	diff=2.73609e-13
  0.000000	 -0.000000	diff=1.3617e-12
  0.000000	  0.000000	diff=1.08311e-17
  0.000000	  0.000000	diff=3.30482e-16
  0.000000	 -0.000000	diff=1.01502e-17
  0.000000	  0.000000	diff=2.05102e-16
  0.000000	  0.000000	diff=1.38561e-17
  0.000000	  0.000000	diff=3.16298e-16
 -0.000000	 -0.000000	diff=4.91017e-13
 -0.000000	 -0.000000	diff=2.52986e-13
  0.000000	 -0.000000	diff=4.05326e-19
  0.000000	  0.000000	diff=8.39522e-18
  0.000000	 -0.000000	diff=5.8095e-19
  0.000000	  0.000000	diff=6.14612e-18
  0.000000	 -0.000000	diff=3.53428e-19
  0.000000	  0.000000	diff=1.12281e-17
  0.000000	 -0.000000	diff=8.43818e-13
 -0.000000	 -0.000000	diff=8.0129e-14
  0.000000	 -0.000000	diff=2.9149e-19
  0.000000	  0.000000	diff=6.05574e-18
  0.000000	 -0.000000	diff=4.1872e-19
  0.000000	  0.000000	diff=4.43529e-18
  0.000000	 -0.000000	diff=2.54771e-19
  0.000000	  0.000000	diff=8.10602e-18
  0.000000	 -0.000000	diff=8.06854e-13
 -0.000000	 -0.000000	diff=2.33115e-14
  local_diff=4.13437e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.19121e-13
 -0.000000	 -0.000000	diff=2.69353e-13
 -0.000000	 -0.000000	diff=2.39993e-13
 -0.000000	 -0.000000	diff=6.21208e-15
 -0.000000	 -0.000000	diff=7.39578e-13
 -0.000000	 -0.000000	diff=7.83817e-13
 -0.000000	 -0.000000	diff=2.23192e-13
 -0.000000	 -0.000000	diff=2.16882e-14
  local_diff=2.60295e-12
# W_emb_tgt, [2 4]
  0.000004	  0.000004	diff=2.25763e-09
 -0.000002	 -0.000002	diff=9.16691e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.77878e-10
  0.000000	  0.000000	diff=1.88304e-10
 -0.000000	 -0.000000	diff=3.28229e-10
  0.000000	  0.000000	diff=9.76777e-11
  local_diff=4.16641e-09
# W_tgt_char{1}, [8 4]
  0.000000	  0.000000	diff=4.31528e-15
  0.000000	 -0.000000	diff=1.87203e-14
  0.000000	  0.000000	diff=4.65675e-16
  0.000000	 -0.000000	diff=4.85781e-16
  0.000000	  0.000000	diff=2.32842e-15
  0.000000	 -0.000000	diff=1.00294e-14
 -0.000000	 -0.000000	diff=8.97662e-13
 -0.000000	 -0.000000	diff=2.43062e-13
  0.000000	  0.000000	diff=6.70497e-15
  0.000000	 -0.000000	diff=1.63992e-14
  0.000000	  0.000000	diff=2.53659e-15
  0.000000	 -0.000000	diff=8.06695e-15
  0.000000	  0.000000	diff=5.39031e-15
  0.000000	 -0.000000	diff=1.42775e-14
 -0.000000	 -0.000000	diff=3.79296e-13
 -0.000000	 -0.000000	diff=4.49545e-13
  0.000000	  0.000000	diff=1.16906e-16
  0.000000	  0.000000	diff=9.62479e-17
  0.000000	  0.000000	diff=1.12384e-16
  0.000000	 -0.000000	diff=2.6496e-16
  0.000000	  0.000000	diff=1.88769e-16
  0.000000	 -0.000000	diff=1.36911e-16
  0.000000	 -0.000000	diff=5.60655e-14
  0.000000	 -0.000000	diff=1.09195e-12
  0.000000	 -0.000000	diff=5.69304e-17
  0.000000	 -0.000000	diff=9.65596e-17
  0.000000	 -0.000000	diff=3.33722e-17
  0.000000	  0.000000	diff=1.12365e-16
  0.000000	 -0.000000	diff=6.56298e-17
  0.000000	  0.000000	diff=8.02118e-18
  0.000000	  0.000000	diff=2.7342e-14
  0.000000	  0.000000	diff=1.95065e-13
  local_diff=3.431e-12
# W_tgt_char{2}, [8 4]
  0.000000	  0.000000	diff=6.89039e-16
  0.000000	 -0.000000	diff=9.17212e-16
  0.000000	  0.000000	diff=1.14219e-16
  0.000000	 -0.000000	diff=3.34045e-16
  0.000000	  0.000000	diff=6.46362e-16
  0.000000	 -0.000000	diff=9.33389e-16
  0.000000	  0.000000	diff=3.08809e-13
 -0.000000	 -0.000000	diff=1.31578e-13
  0.000000	 -0.000000	diff=1.37634e-16
  0.000000	  0.000000	diff=1.97721e-16
  0.000000	 -0.000000	diff=3.91878e-17
  0.000000	  0.000000	diff=4.54434e-17
  0.000000	 -0.000000	diff=1.31696e-16
  0.000000	  0.000000	diff=1.42338e-16
 -0.000000	 -0.000000	diff=5.78255e-13
  0.000000	  0.000000	diff=5.27516e-13
  0.000000	 -0.000000	diff=4.53233e-19
  0.000000	  0.000000	diff=9.67575e-19
  0.000000	 -0.000000	diff=1.63561e-19
  0.000000	  0.000000	diff=5.44282e-19
  0.000000	 -0.000000	diff=1.24017e-18
  0.000000	  0.000000	diff=2.11631e-18
  0.000000	 -0.000000	diff=1.51945e-14
  0.000000	  0.000000	diff=7.0637e-13
  0.000000	 -0.000000	diff=9.61521e-18
  0.000000	  0.000000	diff=9.76516e-18
  0.000000	 -0.000000	diff=2.18494e-18
  0.000000	  0.000000	diff=4.66125e-18
  0.000000	 -0.000000	diff=1.18162e-17
  0.000000	  0.000000	diff=1.39194e-17
 -0.000000	 -0.000000	diff=2.25304e-13
  0.000000	  0.000000	diff=5.55265e-13
  local_diff=3.05268e-12
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=8.56767e-19
  0.000000	  0.000000	diff=1.03042e-18
  0.000000	  0.000000	diff=1.18988e-18
  0.000000	  0.000000	diff=4.3129e-19
  0.000000	  0.000000	diff=1.46469e-18
  0.000000	  0.000000	diff=1.32192e-18
  0.000000	  0.000000	diff=1.15134e-13
  0.000000	 -0.000000	diff=1.13046e-12
  0.000000	  0.000000	diff=3.39508e-19
  0.000000	  0.000000	diff=3.87235e-18
  0.000000	  0.000000	diff=3.06917e-18
  0.000000	  0.000000	diff=1.75128e-18
  0.000000	  0.000000	diff=1.50785e-18
  0.000000	  0.000000	diff=4.47167e-18
  0.000000	  0.000000	diff=2.57859e-13
 -0.000000	 -0.000000	diff=1.09716e-12
  0.000000	 -0.000000	diff=1.41221e-20
  0.000000	  0.000000	diff=6.87166e-21
  0.000000	 -0.000000	diff=4.94285e-22
  0.000000	  0.000000	diff=4.7603e-21
  0.000000	 -0.000000	diff=1.69387e-20
  0.000000	  0.000000	diff=7.66009e-21
  0.000000	  0.000000	diff=9.8096e-14
  0.000000	 -0.000000	diff=1.15223e-14
  0.000000	  0.000000	diff=2.08057e-20
  0.000000	 -0.000000	diff=3.20411e-20
  0.000000	 -0.000000	diff=2.18312e-20
  0.000000	 -0.000000	diff=1.45382e-20
  0.000000	  0.000000	diff=1.16965e-20
  0.000000	 -0.000000	diff=4.38173e-20
  0.000000	 -0.000000	diff=3.27583e-13
  0.000000	  0.000000	diff=3.85933e-14
  local_diff=3.07643e-12
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.67385e-13
  0.000000	  0.000000	diff=5.47556e-14
 -0.000000	 -0.000000	diff=5.40699e-13
  0.000000	  0.000000	diff=4.16534e-13
 -0.000000	 -0.000000	diff=1.82589e-13
  0.000000	  0.000000	diff=1.85028e-13
  0.000000	  0.000000	diff=5.67758e-13
 -0.000000	 -0.000000	diff=4.8377e-14
  local_diff=2.36313e-12
# W_pos, [2 2]
  0.000000	  0.000000	diff=6.04821e-14
  0.000000	  0.000000	diff=2.53041e-14
  0.000000	 -0.000000	diff=1.29544e-14
  0.000000	 -0.000000	diff=5.4198e-15
  local_diff=1.04161e-13
# v_pos, [1 2]
  0.000000	 -0.000000	diff=2.33232e-14
  0.000000	 -0.000000	diff=4.20496e-14
  local_diff=6.53729e-14
# W_h, [2 4]
 -0.000001	 -0.000001	diff=2.49514e-13
  0.000001	  0.000001	diff=5.3236e-13
  0.000001	  0.000001	diff=2.75892e-14
 -0.000001	 -0.000001	diff=5.75484e-13
 -0.000013	 -0.000013	diff=3.16905e-12
  0.000010	  0.000010	diff=1.81551e-12
 -0.000011	 -0.000011	diff=3.56681e-11
  0.000009	  0.000009	diff=2.03531e-11
  local_diff=6.23907e-11
# W_soft, [5 2]
 -0.000004	 -0.000004	diff=5.788e-13
 -0.000001	 -0.000001	diff=5.95312e-14
 -0.000003	 -0.000003	diff=2.90897e-13
 -0.000002	 -0.000002	diff=3.38456e-13
  0.000010	  0.000010	diff=1.1977e-13
 -0.000004	 -0.000004	diff=4.8931e-14
 -0.000002	 -0.000002	diff=4.25324e-13
 -0.000003	 -0.000003	diff=8.40857e-13
 -0.000002	 -0.000002	diff=7.05404e-13
  0.000012	  0.000012	diff=8.21655e-13
  local_diff=4.22963e-12
# Num params=396, abs_diff=6.20777e-09
Elapsed time is 8.963768 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 396, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtRare = 5
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 8
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 396
  src input 1: <s> <s> xyz xz
  src mask: 0  0  1  1
  tgt input 1: <s> ac abc b c
  tgt output 1: ac abc b c </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=8.58355e-13
 -0.000000	 -0.000000	diff=7.84509e-13
  0.000000	  0.000000	diff=6.21611e-13
  0.000000	  0.000000	diff=1.06272e-13
  0.000000	  0.000000	diff=1.25377e-12
  0.000000	  0.000000	diff=3.88333e-13
 -0.000001	 -0.000001	diff=4.53429e-12
 -0.000000	 -0.000000	diff=2.15321e-12
 -0.000000	 -0.000000	diff=8.94214e-13
  0.000000	  0.000000	diff=3.05816e-13
 -0.000000	 -0.000000	diff=1.93537e-13
 -0.000000	 -0.000000	diff=2.56172e-13
 -0.000000	 -0.000000	diff=4.84327e-13
 -0.000000	 -0.000000	diff=8.85138e-13
  0.000002	  0.000002	diff=6.35315e-12
  0.000000	  0.000000	diff=4.87088e-12
 -0.000000	 -0.000000	diff=2.59759e-14
 -0.000000	 -0.000000	diff=3.34905e-14
 -0.000000	 -0.000000	diff=8.99277e-13
  0.000000	  0.000000	diff=8.0669e-13
 -0.000000	 -0.000000	diff=1.45554e-13
 -0.000000	 -0.000000	diff=1.91062e-13
  0.000000	  0.000000	diff=6.08855e-11
  0.000000	  0.000000	diff=5.21228e-13
  0.000000	  0.000000	diff=1.8935e-13
  0.000000	  0.000000	diff=4.7447e-13
  0.000000	  0.000000	diff=3.23352e-13
 -0.000000	 -0.000000	diff=4.87678e-13
  0.000000	  0.000000	diff=1.50709e-13
  0.000000	  0.000000	diff=1.37197e-12
 -0.000000	 -0.000000	diff=1.08064e-12
 -0.000000	 -0.000000	diff=4.18032e-12
  local_diff=9.67109e-11
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.74817e-13
 -0.000000	 -0.000000	diff=5.31384e-14
 -0.000000	 -0.000000	diff=1.01064e-12
 -0.000000	 -0.000000	diff=5.22349e-13
 -0.000000	 -0.000000	diff=1.31666e-13
  0.000000	  0.000000	diff=1.14112e-13
  0.000001	  0.000001	diff=8.18956e-13
 -0.000001	 -0.000001	diff=7.50377e-13
  0.000000	  0.000000	diff=6.05438e-13
  0.000000	  0.000000	diff=3.6268e-14
  0.000000	  0.000000	diff=7.03947e-13
  0.000000	  0.000000	diff=3.09145e-13
  0.000000	  0.000000	diff=2.92403e-13
 -0.000000	 -0.000000	diff=3.69801e-13
 -0.000001	 -0.000001	diff=4.81211e-13
  0.000000	  0.000000	diff=3.14867e-13
  0.000000	 -0.000000	diff=7.34035e-13
 -0.000000	 -0.000000	diff=3.8832e-13
 -0.000000	 -0.000000	diff=1.73921e-13
 -0.000000	 -0.000000	diff=3.12293e-13
  0.000000	  0.000000	diff=2.89233e-14
  0.000000	  0.000000	diff=8.7723e-13
  0.000000	  0.000000	diff=7.69827e-12
 -0.000000	 -0.000000	diff=5.54271e-13
  0.000000	  0.000000	diff=5.3075e-13
  0.000000	  0.000000	diff=3.55585e-13
  0.000000	  0.000000	diff=5.92108e-14
  0.000000	  0.000000	diff=7.47403e-13
  0.000000	 -0.000000	diff=3.37452e-14
  0.000000	 -0.000000	diff=6.43936e-13
 -0.000000	 -0.000000	diff=5.51338e-13
  0.000000	  0.000000	diff=5.16255e-11
  local_diff=7.23039e-11
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.28392e-14
  0.000000	  0.000000	diff=6.02145e-13
  0.000000	  0.000000	diff=7.19311e-13
  0.000000	  0.000000	diff=1.37558e-13
 -0.000000	 -0.000000	diff=8.96144e-14
  0.000000	  0.000000	diff=4.2238e-13
 -0.000003	 -0.000003	diff=2.48976e-11
  0.000008	  0.000008	diff=7.25765e-12
 -0.000000	 -0.000000	diff=1.13524e-13
  0.000000	  0.000000	diff=1.00225e-12
  0.000000	  0.000000	diff=3.92167e-13
  0.000000	  0.000000	diff=6.32034e-13
 -0.000000	 -0.000000	diff=8.83243e-13
  0.000000	  0.000000	diff=7.47337e-13
 -0.000001	 -0.000001	diff=2.23911e-12
  0.000005	  0.000005	diff=5.73816e-12
  0.000000	  0.000000	diff=6.42031e-13
  0.000000	 -0.000000	diff=3.89648e-14
  0.000000	  0.000000	diff=2.97784e-14
  0.000000	 -0.000000	diff=6.86806e-14
  0.000000	  0.000000	diff=7.59518e-14
  0.000000	 -0.000000	diff=1.23863e-13
  0.000000	  0.000000	diff=5.5813e-13
 -0.000000	 -0.000000	diff=7.48085e-14
  0.000000	  0.000000	diff=6.2357e-13
  0.000000	 -0.000000	diff=6.3089e-14
  0.000000	  0.000000	diff=1.30209e-14
  0.000000	 -0.000000	diff=2.52926e-13
  0.000000	  0.000000	diff=7.95063e-14
  0.000000	 -0.000000	diff=2.72242e-13
  0.000000	  0.000000	diff=4.16139e-15
 -0.000000	 -0.000000	diff=7.42208e-13
 -0.000000	 -0.000000	diff=1.11751e-12
  0.000000	  0.000000	diff=1.13849e-13
 -0.000000	 -0.000000	diff=4.12956e-13
 -0.000000	 -0.000000	diff=9.16198e-14
 -0.000000	 -0.000000	diff=4.89692e-13
  0.000000	  0.000000	diff=3.09472e-13
 -0.000000	 -0.000000	diff=2.4212e-11
 -0.000000	 -0.000000	diff=3.93771e-12
 -0.000000	 -0.000000	diff=9.63123e-13
 -0.000000	 -0.000000	diff=2.8588e-13
  0.000000	  0.000000	diff=3.81173e-13
 -0.000000	 -0.000000	diff=5.50312e-13
 -0.000000	 -0.000000	diff=7.90816e-13
 -0.000000	 -0.000000	diff=1.86579e-13
 -0.000000	 -0.000000	diff=3.00687e-12
 -0.000000	 -0.000000	diff=8.69642e-11
  local_diff=1.73404e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.28377e-13
 -0.000000	 -0.000000	diff=9.42085e-13
  0.000000	  0.000000	diff=5.55497e-13
  0.000000	  0.000000	diff=9.01363e-13
  0.000000	  0.000000	diff=7.46746e-14
  0.000000	  0.000000	diff=1.10894e-12
 -0.000006	 -0.000006	diff=3.25969e-12
  0.000006	  0.000006	diff=1.26001e-12
  0.000000	  0.000000	diff=2.61983e-13
 -0.000000	 -0.000000	diff=7.46648e-13
 -0.000000	 -0.000000	diff=5.23116e-13
  0.000000	  0.000000	diff=6.82504e-13
  0.000000	  0.000000	diff=8.40883e-13
 -0.000000	 -0.000000	diff=3.80973e-13
 -0.000007	 -0.000007	diff=2.9908e-12
  0.000008	  0.000008	diff=6.37543e-12
 -0.000000	 -0.000000	diff=4.45462e-13
  0.000000	  0.000000	diff=1.47286e-13
  0.000000	  0.000000	diff=3.21368e-13
 -0.000000	 -0.000000	diff=1.27236e-13
 -0.000000	 -0.000000	diff=1.64088e-13
 -0.000000	 -0.000000	diff=6.39491e-13
  0.000000	  0.000000	diff=1.53345e-10
 -0.000000	 -0.000000	diff=3.9617e-12
  0.000000	  0.000000	diff=2.01711e-13
 -0.000000	 -0.000000	diff=8.58157e-13
  0.000000	  0.000000	diff=3.09786e-13
  0.000000	  0.000000	diff=4.47991e-14
  0.000000	  0.000000	diff=2.88669e-13
  0.000000	  0.000000	diff=5.83797e-13
  0.000000	  0.000000	diff=2.75105e-13
 -0.000000	 -0.000000	diff=1.42467e-10
  local_diff=3.25513e-10
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=5.53169e-10
 -0.000001	 -0.000001	diff=8.22364e-10
  0.000001	  0.000001	diff=1.84982e-10
 -0.000001	 -0.000001	diff=7.03841e-10
  local_diff=2.26436e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=4.38239e-13
  0.000000	 -0.000000	diff=1.91286e-13
  0.000000	 -0.000000	diff=9.97358e-14
  0.000000	 -0.000000	diff=4.31404e-14
  0.000000	 -0.000000	diff=2.94481e-13
  0.000000	 -0.000000	diff=1.28674e-13
 -0.000000	 -0.000000	diff=9.00463e-13
 -0.000000	 -0.000000	diff=8.3805e-13
  0.000000	 -0.000000	diff=3.21113e-13
  0.000000	 -0.000000	diff=1.56735e-13
  0.000000	 -0.000000	diff=1.4343e-13
  0.000000	 -0.000000	diff=6.30992e-14
  0.000000	 -0.000000	diff=2.74219e-13
  0.000000	 -0.000000	diff=1.2998e-13
 -0.000000	 -0.000000	diff=3.30907e-13
 -0.000000	 -0.000000	diff=3.22346e-13
  0.000000	 -0.000000	diff=9.56569e-15
  0.000000	 -0.000000	diff=4.23429e-15
  0.000000	 -0.000000	diff=1.1347e-14
  0.000000	 -0.000000	diff=5.1146e-15
  0.000000	 -0.000000	diff=1.51128e-14
  0.000000	 -0.000000	diff=6.68535e-15
 -0.000000	 -0.000000	diff=7.49079e-14
 -0.000000	 -0.000000	diff=5.73432e-13
  0.000000	 -0.000000	diff=6.70158e-15
  0.000000	 -0.000000	diff=2.95288e-15
  0.000000	 -0.000000	diff=8.1127e-15
  0.000000	 -0.000000	diff=3.6758e-15
  0.000000	 -0.000000	diff=1.07523e-14
  0.000000	 -0.000000	diff=4.76299e-15
 -0.000000	 -0.000000	diff=4.5019e-13
 -0.000000	 -0.000000	diff=5.12484e-13
  local_diff=6.37593e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.44473e-16
  0.000000	 -0.000000	diff=3.28365e-14
  0.000000	 -0.000000	diff=2.80516e-16
  0.000000	 -0.000000	diff=1.64666e-14
  0.000000	 -0.000000	diff=4.00281e-16
  0.000000	 -0.000000	diff=2.80938e-14
  0.000000	  0.000000	diff=3.52342e-13
  0.000000	  0.000000	diff=1.30836e-13
  0.000000	 -0.000000	diff=1.99539e-17
  0.000000	 -0.000000	diff=2.345e-14
  0.000000	 -0.000000	diff=1.37605e-17
  0.000000	 -0.000000	diff=1.15028e-14
  0.000000	 -0.000000	diff=2.07128e-17
  0.000000	 -0.000000	diff=1.9632e-14
  0.000000	  0.000000	diff=2.87736e-13
  0.000000	  0.000000	diff=3.7388e-13
  0.000000	  0.000000	diff=1.80752e-18
  0.000000	  0.000000	diff=3.71425e-18
  0.000000	  0.000000	diff=1.48506e-18
  0.000000	  0.000000	diff=2.22847e-18
  0.000000	  0.000000	diff=2.4537e-18
  0.000000	  0.000000	diff=3.68015e-18
  0.000000	 -0.000000	diff=7.59849e-14
  0.000000	 -0.000000	diff=2.01852e-14
  0.000000	  0.000000	diff=9.49418e-18
  0.000000	  0.000000	diff=7.98164e-16
  0.000000	  0.000000	diff=7.29985e-18
  0.000000	  0.000000	diff=7.03529e-16
  0.000000	  0.000000	diff=1.27699e-17
  0.000000	  0.000000	diff=1.13017e-15
 -0.000000	 -0.000000	diff=1.22419e-12
 -0.000000	 -0.000000	diff=1.59389e-13
  local_diff=2.76038e-12
# W_src_char{3}, [8 4]
  0.000000	  0.000000	diff=2.58824e-18
  0.000000	  0.000000	diff=8.00109e-18
  0.000000	  0.000000	diff=1.90418e-18
  0.000000	  0.000000	diff=5.57617e-18
  0.000000	  0.000000	diff=3.5767e-18
  0.000000	  0.000000	diff=9.71362e-18
 -0.000000	 -0.000000	diff=2.87475e-13
 -0.000000	 -0.000000	diff=4.28483e-13
  0.000000	  0.000000	diff=5.7158e-16
  0.000000	  0.000000	diff=9.67605e-16
  0.000000	  0.000000	diff=3.33958e-16
  0.000000	  0.000000	diff=5.7437e-16
  0.000000	  0.000000	diff=5.52177e-16
  0.000000	  0.000000	diff=9.31056e-16
 -0.000000	 -0.000000	diff=6.00712e-13
 -0.000000	 -0.000000	diff=1.08316e-12
  0.000000	  0.000000	diff=1.35585e-17
  0.000000	  0.000000	diff=2.35081e-17
  0.000000	  0.000000	diff=9.66293e-18
  0.000000	  0.000000	diff=1.68697e-17
  0.000000	  0.000000	diff=1.8377e-17
  0.000000	  0.000000	diff=3.16656e-17
 -0.000000	 -0.000000	diff=9.51978e-13
 -0.000000	 -0.000000	diff=1.93501e-13
  0.000000	  0.000000	diff=9.7718e-18
  0.000000	  0.000000	diff=1.69722e-17
  0.000000	  0.000000	diff=6.96684e-18
  0.000000	  0.000000	diff=1.21838e-17
  0.000000	  0.000000	diff=1.3251e-17
  0.000000	  0.000000	diff=2.28751e-17
 -0.000000	 -0.000000	diff=2.59293e-14
 -0.000000	 -0.000000	diff=4.47776e-13
  local_diff=4.02317e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.19083e-13
 -0.000000	 -0.000000	diff=9.72675e-14
 -0.000000	 -0.000000	diff=6.72508e-13
 -0.000000	 -0.000000	diff=7.31339e-14
 -0.000000	 -0.000000	diff=5.3576e-13
 -0.000000	 -0.000000	diff=3.62249e-13
 -0.000000	 -0.000000	diff=3.84729e-13
 -0.000000	 -0.000000	diff=7.98282e-13
  local_diff=3.74301e-12
# W_emb_tgt, [2 4]
  0.000005	  0.000005	diff=3.17391e-09
 -0.000001	 -0.000001	diff=8.88143e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.87739e-10
  0.000000	  0.000000	diff=1.8326e-10
 -0.000000	 -0.000000	diff=6.11338e-10
  0.000000	  0.000000	diff=1.72137e-10
  local_diff=5.71653e-09
# W_tgt_char{1}, [8 4]
  0.000000	  0.000000	diff=2.52422e-14
  0.000000	 -0.000000	diff=1.5731e-14
  0.000000	  0.000000	diff=3.55083e-15
  0.000000	 -0.000000	diff=2.86121e-15
  0.000000	  0.000000	diff=1.666e-14
  0.000000	 -0.000000	diff=1.10632e-14
 -0.000000	 -0.000000	diff=9.11345e-13
 -0.000000	 -0.000000	diff=1.63778e-13
  0.000000	  0.000000	diff=4.34196e-14
  0.000000	 -0.000000	diff=1.21867e-14
  0.000000	  0.000000	diff=1.55479e-14
  0.000000	 -0.000000	diff=1.10671e-14
  0.000000	  0.000000	diff=3.87249e-14
  0.000000	 -0.000000	diff=1.51302e-14
 -0.000000	 -0.000000	diff=6.67559e-13
 -0.000000	 -0.000000	diff=4.61377e-13
  0.000000	  0.000000	diff=7.2195e-16
  0.000000	 -0.000000	diff=1.70074e-16
  0.000000	  0.000000	diff=6.00754e-16
  0.000000	 -0.000000	diff=2.38123e-16
  0.000000	  0.000000	diff=1.08329e-15
  0.000000	 -0.000000	diff=3.27413e-16
 -0.000000	 -0.000000	diff=4.75015e-13
  0.000000	 -0.000000	diff=1.76775e-13
  0.000000	 -0.000000	diff=2.60426e-16
  0.000000	 -0.000000	diff=4.58964e-17
  0.000000	 -0.000000	diff=1.62101e-16
  0.000000	  0.000000	diff=9.59648e-17
  0.000000	 -0.000000	diff=2.89225e-16
  0.000000	  0.000000	diff=3.95012e-17
 -0.000000	  0.000000	diff=1.11073e-12
 -0.000000	  0.000000	diff=8.29745e-13
  local_diff=5.01154e-12
# W_tgt_char{2}, [8 4]
  0.000000	  0.000000	diff=1.19958e-15
  0.000000	 -0.000000	diff=6.2325e-17
  0.000000	  0.000000	diff=1.02977e-16
  0.000000	  0.000000	diff=2.01597e-16
  0.000000	  0.000000	diff=1.21179e-15
  0.000000	 -0.000000	diff=2.23788e-16
  0.000000	  0.000000	diff=3.07284e-13
  0.000000	  0.000000	diff=2.2216e-14
  0.000000	 -0.000000	diff=2.12756e-16
  0.000000	  0.000000	diff=1.56659e-16
  0.000000	 -0.000000	diff=1.06472e-16
  0.000000	  0.000000	diff=1.22313e-16
  0.000000	 -0.000000	diff=2.35854e-16
  0.000000	  0.000000	diff=2.10145e-16
 -0.000000	 -0.000000	diff=4.41285e-13
  0.000000	  0.000000	diff=7.71975e-14
  0.000000	  0.000000	diff=1.06627e-18
  0.000000	 -0.000000	diff=3.36232e-18
  0.000000	  0.000000	diff=1.60672e-18
  0.000000	 -0.000000	diff=4.31751e-18
  0.000000	 -0.000000	diff=3.40176e-20
  0.000000	 -0.000000	diff=4.82076e-18
 -0.000000	  0.000000	diff=7.2865e-13
  0.000000	 -0.000000	diff=5.70193e-14
  0.000000	 -0.000000	diff=7.1272e-18
  0.000000	 -0.000000	diff=7.11465e-18
  0.000000	  0.000000	diff=2.24291e-18
  0.000000	 -0.000000	diff=1.10768e-17
  0.000000	 -0.000000	diff=1.14183e-17
  0.000000	 -0.000000	diff=7.60804e-18
  0.000000	 -0.000000	diff=1.84666e-13
 -0.000000	 -0.000000	diff=5.6814e-13
  local_diff=2.39057e-12
# W_tgt_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.01677e-18
  0.000000	 -0.000000	diff=9.00929e-18
  0.000000	  0.000000	diff=2.4369e-18
  0.000000	 -0.000000	diff=6.35645e-18
  0.000000	  0.000000	diff=7.39983e-20
  0.000000	 -0.000000	diff=1.05349e-17
  0.000000	  0.000000	diff=1.23013e-12
  0.000000	  0.000000	diff=6.4367e-13
  0.000000	 -0.000000	diff=4.47309e-18
  0.000000	 -0.000000	diff=2.68854e-17
  0.000000	  0.000000	diff=7.09583e-18
  0.000000	 -0.000000	diff=1.73144e-17
  0.000000	 -0.000000	diff=2.35726e-18
  0.000000	 -0.000000	diff=2.90181e-17
  0.000000	  0.000000	diff=7.18487e-13
  0.000000	  0.000000	diff=7.10647e-13
  0.000000	 -0.000000	diff=2.21898e-20
  0.000000	 -0.000000	diff=1.25117e-21
  0.000000	  0.000000	diff=1.38126e-22
  0.000000	  0.000000	diff=8.04441e-21
  0.000000	 -0.000000	diff=2.50814e-20
  0.000000	  0.000000	diff=2.39891e-20
  0.000000	  0.000000	diff=5.31503e-14
  0.000000	 -0.000000	diff=4.3344e-15
  0.000000	  0.000000	diff=2.62686e-20
  0.000000	  0.000000	diff=2.44208e-19
  0.000000	 -0.000000	diff=6.22075e-20
  0.000000	  0.000000	diff=1.79048e-19
  0.000000	  0.000000	diff=1.00654e-21
  0.000000	  0.000000	diff=3.05456e-19
 -0.000000	 -0.000000	diff=3.99327e-13
  0.000000	 -0.000000	diff=1.69832e-13
  local_diff=3.9297e-12
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.05058e-12
  0.000000	  0.000000	diff=2.61886e-13
 -0.000000	 -0.000000	diff=2.23021e-13
  0.000000	  0.000000	diff=8.59478e-14
 -0.000000	 -0.000000	diff=1.384e-13
  0.000000	  0.000000	diff=9.65176e-13
  0.000000	  0.000000	diff=1.55472e-13
 -0.000000	 -0.000000	diff=3.4525e-13
  local_diff=3.22573e-12
# W_pos, [2 2]
  0.000000	  0.000000	diff=1.62082e-13
  0.000000	  0.000000	diff=6.7811e-14
  0.000000	 -0.000000	diff=3.83286e-14
  0.000000	 -0.000000	diff=1.60357e-14
  local_diff=2.84258e-13
# v_pos, [1 2]
  0.000000	 -0.000000	diff=6.13419e-14
  0.000000	 -0.000000	diff=1.16594e-13
  local_diff=1.77936e-13
# W_h, [2 4]
 -0.000001	 -0.000001	diff=2.26057e-13
  0.000001	  0.000001	diff=1.84091e-13
  0.000001	  0.000001	diff=1.381e-13
 -0.000001	 -0.000001	diff=4.67638e-14
 -0.000012	 -0.000012	diff=1.20111e-12
  0.000010	  0.000010	diff=4.22619e-12
 -0.000014	 -0.000014	diff=1.25891e-10
  0.000012	  0.000012	diff=6.23467e-11
  local_diff=1.9426e-10
# W_soft, [5 2]
 -0.000005	 -0.000005	diff=7.55492e-13
 -0.000001	 -0.000001	diff=1.41437e-12
 -0.000003	 -0.000003	diff=1.16187e-12
 -0.000001	 -0.000001	diff=1.56149e-12
  0.000011	  0.000011	diff=4.37863e-13
 -0.000005	 -0.000005	diff=6.28351e-13
  0.000000	  0.000000	diff=1.27356e-13
 -0.000003	 -0.000003	diff=8.219e-14
 -0.000003	 -0.000003	diff=8.66531e-13
  0.000011	  0.000011	diff=2.86305e-14
  local_diff=7.06414e-12
# Num params=396, abs_diff=8.88206e-09
Elapsed time is 9.675933 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 104, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 104
  src input 1: y y x y
  src mask: 1  1  1  1
  tgt input 1: <s> a b a
  tgt output 1: a b a </s>
  tgt mask: 1  1  1  1
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=6.82914e-27
  0.000000	 -0.000000	diff=1.95177e-30
  0.000000	  0.000000	diff=5.93316e-31
  0.000000	  0.000000	diff=1.85467e-30
  0.000000	  0.000000	diff=7.88768e-13
  0.000033	  0.000033	diff=1.27003e-07
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.11769e-35
  0.000000	 -0.000000	diff=9.28012e-28
  0.000000	 -0.000000	diff=2.65226e-31
  0.000000	  0.000000	diff=7.67726e-30
  0.000000	  0.000000	diff=2.52031e-31
  0.000000	  0.000000	diff=5.62715e-13
  0.000450	  0.000428	diff=2.19286e-05
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=6.95443e-36
  0.000000	  0.000000	diff=1.11817e-28
  0.000000	  0.000000	diff=1.76192e-31
  0.000000	  0.000000	diff=5.90119e-31
  0.000000	 -0.000000	diff=1.67428e-31
  0.000000	 -0.000000	diff=5.70229e-13
  0.000000	  0.000000	diff=7.35255e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.99214e-37
  0.000000	 -0.000000	diff=6.40794e-33
  0.000000	 -0.000000	diff=1.01069e-35
  0.000000	  0.000000	diff=8.40257e-36
  0.000000	  0.000000	diff=4.81695e-36
  0.000000	  0.000000	diff=3.26791e-17
 -0.000000	 -0.000000	diff=7.55856e-13
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.00763e-41
  local_diff=2.20557e-05
# W_tgt{1}, [8 6]
  0.665977	  0.690935	diff=0.0249579
  0.000000	  0.000000	diff=4.854e-10
  0.000000	  0.000000	diff=1.09604e-10
 -0.000000	 -0.000000	diff=8.31765e-13
-18.274228	-18.730010	diff=0.455782
  1.109839	  1.149613	diff=0.0397738
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.847529	 -0.811348	diff=0.0361808
  0.000000	  0.000000	diff=6.54257e-10
  0.000000	  0.000000	diff=6.09258e-12
  0.000000	  0.000000	diff=1.25222e-12
 22.609305	 21.994195	diff=0.61511
 -1.407330	 -1.349962	diff=0.0573681
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.60996e-36
  0.000000	  0.000000	diff=4.20065e-13
  0.000000	 -0.000000	diff=1.66166e-13
  0.000000	  0.000000	diff=5.21662e-62
  0.000000	 -0.000000	diff=6.33113e-39
  0.000000	 -0.000000	diff=2.09809e-30
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.86709e-32
  0.000000	  0.000000	diff=1.27216e-30
  0.000000	  0.000000	diff=8.70148e-13
  0.000000	 -0.000000	diff=9.14735e-60
  0.000000	  0.000000	diff=4.32829e-40
  0.000000	 -0.000000	diff=1.59049e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000331	  0.000330	diff=1.19105e-06
  0.000000	  0.000000	diff=4.20065e-13
  0.000000	 -0.000000	diff=1.66166e-13
  0.000000	  0.000000	diff=2.63438e-13
 -0.006521	 -0.006498	diff=2.29323e-05
 -0.111675	 -0.111293	diff=0.000381317
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.24856e-13
  0.000000	  0.000000	diff=1.27216e-30
  0.000000	  0.000000	diff=8.70148e-13
  0.000000	 -0.000000	diff=1.38642e-16
  0.000000	  0.000000	diff=1.48915e-13
  0.000008	  0.000008	diff=2.68628e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.22958
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000333	 -0.000347	diff=1.35904e-05
 -0.000013	 -0.000013	diff=1.84116e-08
 -0.000000	 -0.000000	diff=5.60943e-13
 -0.000000	 -0.000000	diff=2.59528e-13
  local_diff=1.36088e-05
# W_emb_tgt, [2 4]
-16.316047	-16.677489	diff=0.361442
-14.005769	-14.271785	diff=0.266017
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.00937e-09
 -0.000000	 -0.000000	diff=3.29865e-10
 -0.000000	 -0.000000	diff=1.12724e-12
 -0.000000	 -0.000000	diff=1.23536e-10
  local_diff=0.627458
# W_soft, [4 2]
  0.014631	  0.014616	diff=1.50311e-05
  0.151565	  0.151456	diff=0.000108968
 -0.406862	 -0.406893	diff=3.06572e-05
  0.240940	  0.240821	diff=0.000119271
 -1.424838	 -1.429208	diff=0.0043695
  2.618666	  2.617254	diff=0.00141252
  0.105468	  0.099156	diff=0.00631253
 -1.280499	 -1.287202	diff=0.00670337
  local_diff=0.0190718
# Num params=104, abs_diff=1.87614
Elapsed time is 0.818775 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.15445e-24
 -0.000000	  0.000000	diff=7.14491e-13
  0.000000	  0.000000	diff=1.7299e-28
  0.000000	  0.000000	diff=1.69429e-23
  0.000000	  0.000000	diff=3.77489e-25
 -0.000000	  0.000000	diff=7.14484e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.75108e-24
  0.000000	 -0.000000	diff=1.71075e-14
  0.000000	 -0.000000	diff=2.19901e-28
  0.000000	 -0.000000	diff=7.34087e-23
  0.000000	 -0.000000	diff=1.63511e-24
  0.000000	 -0.000000	diff=1.70785e-14
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=7.59486e-54
  0.000000	 -0.000000	diff=1.36095e-41
  0.000000	 -0.000000	diff=1.24309e-59
  0.000000	 -0.000000	diff=6.76941e-54
  0.000000	 -0.000000	diff=1.39484e-51
  0.000000	 -0.000000	diff=1.35864e-41
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.47202e-42
  0.000000	  0.000000	diff=5.71942e-31
  0.000000	  0.000000	diff=1.16737e-47
  0.000000	  0.000000	diff=3.03682e-44
  0.000000	  0.000000	diff=4.74941e-41
  0.000000	  0.000000	diff=5.70972e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.46316e-12
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=4.53762e-42
  0.000000	 -0.000000	diff=2.14155e-41
  0.000000	 -0.000000	diff=8.9099e-43
  0.000000	 -0.000000	diff=5.20718e-42
  0.000000	  0.000000	diff=4.77974e-42
  0.000000	 -0.000000	diff=2.66897e-41
  0.000000	 -0.000000	diff=1.81382e-26
  0.000000	 -0.000000	diff=6.06482e-26
  0.000000	 -0.000000	diff=1.05573e-31
  0.000000	  0.000000	diff=9.68972e-31
  0.000000	  0.000000	diff=7.73067e-33
  0.000000	  0.000000	diff=3.14478e-31
  0.000000	 -0.000000	diff=1.29258e-31
  0.000000	  0.000000	diff=1.32984e-30
  0.000000	  0.000000	diff=1.20203e-15
  0.000000	  0.000000	diff=1.88219e-15
  0.000000	  0.000000	diff=1.03886e-33
  0.000000	 -0.000000	diff=6.18645e-32
  0.000000	 -0.000000	diff=1.43998e-33
  0.000000	 -0.000000	diff=1.91375e-32
  0.000000	  0.000000	diff=2.32774e-33
  0.000000	 -0.000000	diff=5.9028e-32
  0.000000	  0.000000	diff=2.42931e-16
  0.000000	 -0.000000	diff=5.10375e-17
  0.000000	 -0.000000	diff=1.36325e-32
  0.000000	  0.000000	diff=1.66374e-30
  0.000000	 -0.000000	diff=4.04483e-33
  0.000000	  0.000000	diff=6.04443e-31
  0.000000	 -0.000000	diff=1.73299e-32
  0.000000	  0.000000	diff=2.94736e-30
  0.000000	  0.000000	diff=3.58103e-16
  0.000000	  0.000000	diff=2.20533e-15
  local_diff=5.94161e-15
# W_tgt{1}, [8 6]
 -0.000001	 -0.000001	diff=1.88913e-09
  0.000000	  0.000000	diff=3.15788e-18
 -0.000000	 -0.000000	diff=2.53582e-11
  0.000000	  0.000000	diff=1.01535e-25
 -0.000001	 -0.000001	diff=5.03243e-08
  0.000000	  0.000000	diff=9.90328e-12
  0.000000	 -0.000000	diff=1.00033e-43
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.50309e-10
  0.000000	 -0.000000	diff=5.35104e-18
 -0.000000	 -0.000000	diff=1.05437e-11
  0.000000	  0.000000	diff=6.51967e-26
 -0.000001	 -0.000001	diff=2.05349e-08
  0.000000	  0.000000	diff=3.66505e-12
  0.000000	  0.000000	diff=1.69504e-43
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.15066e-15
  0.000000	 -0.000000	diff=8.37396e-37
  0.000000	 -0.000000	diff=3.42575e-18
  0.000000	  0.000000	diff=2.42584e-34
  0.000000	 -0.000000	diff=2.01804e-15
  0.000000	  0.000000	diff=5.14885e-19
  0.000000	 -0.000000	diff=9.01108e-75
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.73834e-16
  0.000000	 -0.000000	diff=5.54152e-37
  0.000000	  0.000000	diff=5.17539e-19
  0.000000	 -0.000000	diff=3.66478e-35
  0.000000	  0.000000	diff=3.04872e-16
  0.000000	 -0.000000	diff=7.7785e-20
  0.000000	  0.000000	diff=4.38452e-75
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.21901e-15
  0.000000	 -0.000000	diff=5.65528e-39
  0.000000	  0.000000	diff=3.62924e-18
  0.000000	 -0.000000	diff=2.56993e-34
  0.000000	  0.000000	diff=2.13791e-15
  0.000000	 -0.000000	diff=5.45468e-19
  0.000000	  0.000000	diff=2.57998e-74
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.67957e-20
  0.000000	 -0.000000	diff=2.2675e-35
  0.000000	  0.000000	diff=1.09958e-22
  0.000000	 -0.000000	diff=7.81482e-39
  0.000000	  0.000000	diff=6.45327e-20
  0.000000	 -0.000000	diff=1.65384e-23
  0.000000	  0.000000	diff=2.90062e-67
  0.000000	  0.000000	diff=0
  local_diff=7.36481e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.14953e-15
  0.000000	  0.000000	diff=2.43245e-15
  0.000000	  0.000000	diff=2.30865e-16
  0.000000	  0.000000	diff=3.0348e-16
  0.000000	  0.000000	diff=6.88977e-16
  0.000000	  0.000000	diff=1.82705e-15
  0.000000	  0.000000	diff=1.8177e-13
 -0.000000	 -0.000000	diff=6.47252e-13
  0.000000	  0.000000	diff=3.82377e-20
  0.000000	  0.000000	diff=7.59735e-20
  0.000000	  0.000000	diff=7.20752e-21
  0.000000	  0.000000	diff=9.47454e-21
  0.000000	  0.000000	diff=2.40474e-20
  0.000000	  0.000000	diff=5.73201e-20
  0.000000	  0.000000	diff=8.13338e-14
 -0.000000	 -0.000000	diff=1.0627e-12
  0.000000	  0.000000	diff=1.90747e-15
  0.000000	 -0.000000	diff=2.9684e-15
  0.000000	 -0.000000	diff=6.52651e-16
  0.000000	 -0.000000	diff=8.57925e-16
  0.000000	  0.000000	diff=1.25482e-15
  0.000000	 -0.000000	diff=3.82632e-15
 -0.000000	 -0.000000	diff=4.43623e-13
  0.000000	  0.000000	diff=3.79858e-13
  0.000000	 -0.000000	diff=2.88163e-16
  0.000000	  0.000000	diff=4.48441e-16
  0.000000	  0.000000	diff=9.85969e-17
  0.000000	  0.000000	diff=1.29608e-16
  0.000000	 -0.000000	diff=1.89566e-16
  0.000000	  0.000000	diff=5.78049e-16
  0.000000	  0.000000	diff=1.37163e-13
 -0.000000	 -0.000000	diff=1.49624e-13
  local_diff=3.10316e-12
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.37314e-16
 -0.000000	  0.000000	diff=7.48364e-13
  0.000000	 -0.000000	diff=2.52839e-20
  0.000000	 -0.000000	diff=2.88587e-20
  local_diff=7.48701e-13
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=4.02888e-13
 -0.000000	 -0.000000	diff=1.3518e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.89532e-19
  0.000000	 -0.000000	diff=4.08172e-19
  0.000001	  0.000001	diff=4.94941e-08
 -0.000002	 -0.000001	diff=7.63413e-08
  local_diff=1.25836e-07
# W_soft, [4 2]
  0.000000	  0.000000	diff=1.63336e-13
 -0.000000	 -0.000000	diff=5.70279e-13
 -0.000000	 -0.000000	diff=1.78709e-13
  0.000000	  0.000000	diff=2.0178e-13
 -0.000000	 -0.000000	diff=6.28554e-13
  0.000000	  0.000000	diff=4.0722e-13
 -0.000000	 -0.000000	diff=1.98809e-13
 -0.000000	 -0.000000	diff=2.25247e-14
  local_diff=2.37121e-12
# Num params=168, abs_diff=1.99492e-07
Elapsed time is 1.405040 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=4.94782e-29
  0.000000	  0.000000	diff=2.62773e-17
  0.000000	  0.000000	diff=1.20299e-32
  0.000000	  0.000000	diff=3.98999e-27
  0.000000	  0.000000	diff=1.34912e-09
  0.000000	  0.000000	diff=6.48803e-20
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.1804e-37
  0.000000	 -0.000000	diff=6.3016e-29
  0.000000	 -0.000000	diff=3.36015e-17
  0.000000	 -0.000000	diff=1.5292e-32
  0.000000	 -0.000000	diff=5.15717e-27
  0.000000	 -0.000000	diff=6.21514e-31
  0.000000	 -0.000000	diff=2.81112e-19
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.69906e-66
  0.000000	 -0.000000	diff=4.38391e-52
  0.000000	 -0.000000	diff=1.96685e-71
  0.000000	 -0.000000	diff=6.34695e-66
  0.000000	 -0.000000	diff=1.04107e-64
  0.000000	 -0.000000	diff=4.38199e-52
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.5472e-50
  0.000000	  0.000000	diff=4.94712e-39
  0.000000	  0.000000	diff=1.08246e-56
  0.000000	  0.000000	diff=1.26422e-55
  0.000000	  0.000000	diff=1.52539e-51
  0.000000	  0.000000	diff=4.94541e-39
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.34912e-09
# W_src{2}, [8 4]
  0.000038	  0.000038	diff=1.80882e-07
  0.000415	  0.000413	diff=1.98257e-06
  0.000000	 -0.000000	diff=3.63844e-53
  0.000000	 -0.000000	diff=2.06029e-52
  0.005013	  0.005034	diff=2.04479e-05
 -0.017474	 -0.017408	diff=6.5837e-05
 -0.000000	 -0.000000	diff=4.08246e-12
  0.000000	  0.000000	diff=1.79006e-09
  0.000000	 -0.000000	diff=4.61099e-39
  0.000000	  0.000000	diff=6.91356e-39
  0.000000	  0.000000	diff=7.42599e-40
  0.000000	  0.000000	diff=2.34178e-39
  0.000000	 -0.000000	diff=5.13193e-39
  0.000000	  0.000000	diff=9.82144e-39
  0.000000	  0.000000	diff=2.00637e-19
  0.000000	  0.000000	diff=9.34894e-20
  0.000000	  0.000000	diff=3.3088e-40
  0.000000	  0.000000	diff=5.28168e-40
  0.000000	 -0.000000	diff=1.76609e-40
  0.000000	  0.000000	diff=2.94944e-40
  0.000000	  0.000000	diff=2.38521e-40
  0.000000	  0.000000	diff=2.33133e-39
  0.000000	  0.000000	diff=7.04271e-20
  0.000000	  0.000000	diff=1.01853e-20
  0.000000	 -0.000000	diff=3.98453e-39
  0.000000	  0.000000	diff=1.07568e-38
  0.000000	  0.000000	diff=1.04197e-39
  0.000000	  0.000000	diff=3.68464e-39
  0.000000	 -0.000000	diff=3.69414e-39
  0.000000	  0.000000	diff=1.8885e-38
  0.000000	 -0.000000	diff=1.2146e-20
  0.000000	  0.000000	diff=1.30199e-19
  local_diff=8.84501e-05
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=3.45527e-10
  0.000000	 -0.000000	diff=3.73798e-21
  0.000000	 -0.000000	diff=3.66215e-24
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.0097e-09
 -0.000000	 -0.000000	diff=2.30805e-10
  0.000000	  0.000000	diff=8.73997e-64
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.45361e-10
  0.000000	  0.000000	diff=6.16526e-15
  0.000000	  0.000000	diff=1.87866e-24
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.17618e-10
  0.000000	  0.000000	diff=7.06152e-13
  0.000000	 -0.000000	diff=1.48098e-63
  0.000000	 -0.000000	diff=4.25443e-14
  0.000000	 -0.000000	diff=3.49673e-27
  0.000000	  0.000000	diff=1.70264e-32
  0.000000	 -0.000000	diff=1.22029e-43
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.76264e-27
  0.000000	 -0.000000	diff=2.62114e-23
  0.000000	 -0.000000	diff=1.57043e-93
  0.000000	 -0.000000	diff=2.64791e-34
  0.000000	  0.000000	diff=2.568e-13
  0.000000	  0.000000	diff=1.43274e-31
  0.000000	 -0.000000	diff=9.47536e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.86381e-14
  0.000000	 -0.000000	diff=1.8717e-23
  0.000000	  0.000000	diff=9.11343e-77
  0.000000	 -0.000000	diff=2.22816e-33
  0.000000	 -0.000000	diff=7.71721e-56
  0.000000	 -0.000000	diff=1.3346e-41
  0.000000	  0.000000	diff=1.2448e-25
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.44065e-40
  0.000000	 -0.000000	diff=2.45677e-34
  0.000000	 -0.000000	diff=1.28386e-71
  0.000000	 -0.000000	diff=1.01822e-52
  0.000000	  0.000000	diff=1.07974e-34
  0.000000	 -0.000000	diff=4.40654e-32
  0.000000	  0.000000	diff=3.16473e-43
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.60383e-34
  0.000000	  0.000000	diff=2.17694e-23
  0.000000	  0.000000	diff=2.46413e-84
  0.000000	  0.000000	diff=6.85295e-34
  local_diff=3.5501e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=3.62451e-13
 -0.000000	 -0.000000	diff=1.3623e-13
 -0.000000	 -0.000000	diff=5.02925e-13
  0.000000	  0.000000	diff=5.4452e-14
  0.000000	  0.000000	diff=3.39417e-13
  0.000000	  0.000000	diff=2.12804e-14
  0.000000	  0.000000	diff=3.71072e-13
 -0.000000	 -0.000000	diff=5.09008e-13
  0.000000	 -0.000000	diff=6.03028e-20
  0.000000	  0.000000	diff=3.21492e-19
  0.000000	  0.000000	diff=2.83234e-24
  0.000000	  0.000000	diff=6.51055e-24
  0.000000	 -0.000000	diff=6.81393e-20
  0.000000	 -0.000000	diff=6.34477e-20
 -0.000000	 -0.000000	diff=3.17136e-13
  0.000000	  0.000000	diff=1.10669e-13
  0.021660	  0.021644	diff=1.62213e-05
 -0.010074	 -0.010082	diff=8.10324e-06
 -0.004782	 -0.004781	diff=9.56961e-07
  0.002654	  0.002654	diff=1.45711e-07
  0.035377	  0.035371	diff=5.56391e-06
 -0.003264	 -0.003268	diff=3.61935e-06
  0.015890	  0.015869	diff=2.0875e-05
  0.257396	  0.256733	diff=0.000663085
 -0.009115	 -0.009121	diff=5.81019e-06
  0.006978	  0.006988	diff=9.83407e-06
 -0.001094	 -0.001094	diff=4.8922e-07
 -0.041693	 -0.041925	diff=0.000231937
 -0.003097	 -0.003101	diff=4.02777e-06
  0.003241	  0.003238	diff=2.98127e-06
  0.032197	  0.032157	diff=3.96739e-05
 -0.488926	 -0.493737	diff=0.00481123
  local_diff=0.00582455
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.79244e-21
  0.000000	  0.000000	diff=6.21663e-19
  0.000000	  0.000000	diff=3.97312e-10
  0.000000	  0.000000	diff=4.98006e-17
  local_diff=3.97312e-10
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=3.56072e-10
  0.000000	 -0.000000	diff=4.47895e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.40444e-13
  0.000000	  0.000000	diff=6.05501e-16
  0.000000	  0.000000	diff=2.16515e-09
 -0.000000	 -0.000000	diff=3.52464e-09
  local_diff=6.04645e-09
# W_soft, [4 2]
  0.003314	  0.003257	diff=5.74002e-05
  0.063391	  0.063336	diff=5.48146e-05
 -0.169196	 -0.169247	diff=5.09466e-05
  0.102698	  0.102653	diff=4.43992e-05
 -0.035975	 -0.036002	diff=2.75974e-05
  0.098266	  0.098237	diff=2.84965e-05
 -0.088545	 -0.088565	diff=2.06253e-05
  0.026354	  0.026330	diff=2.37666e-05
  local_diff=0.000308046
# Num params=168, abs_diff=0.00622106
Elapsed time is 1.428042 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 176, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 176
  src input 1: <s> y x x
  src mask: 0  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.001254	  0.001261	diff=7.38686e-06
  0.000000	  0.000000	diff=5.78469e-17
  0.000000	 -0.000000	diff=1.01121e-31
  0.000000	 -0.000000	diff=1.92733e-29
  0.158212	  0.159173	diff=0.000960895
  0.000000	  0.000000	diff=4.33861e-16
 -0.000250	 -0.000248	diff=2.93254e-06
  0.000000	  0.000000	diff=1.29485e-16
  0.000000	  0.000000	diff=5.19006e-25
  0.000000	 -0.000000	diff=8.36502e-17
  0.000000	  0.000000	diff=1.28543e-31
  0.000000	  0.000000	diff=8.35137e-29
  0.000000	  0.000000	diff=1.40357e-31
  0.000000	 -0.000000	diff=1.43504e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.922e-61
  0.000000	 -0.000000	diff=2.62173e-53
  0.000000	  0.000000	diff=4.25152e-68
  0.000000	  0.000000	diff=1.54448e-67
  0.000000	 -0.000000	diff=1.74991e-69
  0.000000	 -0.000000	diff=3.29746e-54
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=9.83931e-46
  0.000000	  0.000000	diff=1.25062e-37
  0.000000	 -0.000000	diff=2.17623e-52
  0.000000	  0.000000	diff=4.85363e-54
  0.000000	 -0.000000	diff=4.24796e-55
  0.000000	  0.000000	diff=7.7452e-39
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.000971214
# W_src{2}, [8 4]
  0.003224	  0.003209	diff=1.46474e-05
 -0.004942	 -0.004918	diff=2.40502e-05
  0.000000	  0.000000	diff=1.0774e-53
  0.000000	  0.000000	diff=7.32354e-53
  0.261445	  0.262567	diff=0.001122
 -0.867284	 -0.864109	diff=0.00317517
 -0.000000	 -0.000000	diff=4.56003e-10
 -0.000002	 -0.000001	diff=1.52883e-08
  0.000000	  0.000000	diff=3.06686e-38
  0.000000	  0.000000	diff=5.73859e-38
  0.000000	 -0.000000	diff=6.36319e-39
  0.000000	  0.000000	diff=1.99628e-38
  0.000000	  0.000000	diff=3.31609e-38
  0.000000	  0.000000	diff=1.01018e-37
  0.000000	 -0.000000	diff=6.2176e-19
  0.000000	  0.000000	diff=7.32183e-19
  0.000000	 -0.000000	diff=3.68688e-39
  0.000000	 -0.000000	diff=1.20675e-38
  0.000000	  0.000000	diff=1.70066e-39
  0.000000	 -0.000000	diff=5.34929e-39
  0.000000	 -0.000000	diff=2.24077e-39
  0.000000	 -0.000000	diff=2.9601e-38
  0.000000	 -0.000000	diff=4.85458e-19
  0.000000	 -0.000000	diff=1.23966e-19
  0.000000	  0.000000	diff=3.59461e-38
  0.000000	  0.000000	diff=9.68826e-38
  0.000000	 -0.000000	diff=1.12433e-38
  0.000000	  0.000000	diff=3.39502e-38
  0.000000	  0.000000	diff=3.17958e-38
  0.000000	  0.000000	diff=2.06821e-37
  0.000000	  0.000000	diff=3.58141e-19
  0.000000	  0.000000	diff=5.10657e-19
  local_diff=0.00433588
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=3.53885e-11
  0.000000	 -0.000000	diff=4.20559e-22
  0.000000	  0.000000	diff=1.41973e-12
  0.000000	 -0.000000	diff=1.49227e-93
 -0.000000	 -0.000000	diff=4.01058e-10
  0.000000	  0.000000	diff=6.95415e-13
  0.000000	 -0.000000	diff=1.36148e-55
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.39873e-11
  0.016850	  0.017432	diff=0.000581548
 -0.000005	 -0.000005	diff=1.63489e-07
  0.000000	  0.000000	diff=6.27819e-18
 -0.000000	 -0.000000	diff=1.62473e-10
  0.000044	  0.000046	diff=1.5444e-06
  0.000000	  0.000000	diff=2.30701e-55
  3.273790	  3.530125	diff=0.256335
  0.000000	  0.000000	diff=2.36915e-13
 -0.002587	 -0.002574	diff=1.34491e-05
  0.000001	  0.000001	diff=3.91346e-09
  0.000000	 -0.000000	diff=9.58608e-19
  0.000000	  0.000000	diff=1.99412e-12
 -0.000007	 -0.000007	diff=3.46416e-08
  0.000000	 -0.000000	diff=8.35723e-94
 -0.000002	 -0.000002	diff=1.77143e-08
 -0.000000	 -0.000000	diff=9.90894e-13
 -0.002502	 -0.002489	diff=1.25791e-05
  0.000001	  0.000001	diff=3.66089e-09
  0.000000	 -0.000000	diff=9.27136e-19
 -0.000000	 -0.000000	diff=1.83621e-12
 -0.000006	 -0.000006	diff=3.24012e-08
  0.000000	  0.000000	diff=6.03763e-93
 -0.000002	 -0.000002	diff=1.65672e-08
  0.000000	 -0.000000	diff=1.00656e-19
 -0.001870	 -0.001862	diff=7.0359e-06
  0.000001	  0.000001	diff=2.04874e-09
  0.000000	 -0.000000	diff=6.93683e-19
 -0.000000	 -0.000000	diff=6.23814e-13
 -0.000005	 -0.000005	diff=1.81221e-08
  0.000000	  0.000000	diff=8.92759e-64
 -0.000001	 -0.000001	diff=9.25791e-09
  0.000000	 -0.000000	diff=1.85065e-25
  0.001802	  0.001809	diff=6.60194e-06
 -0.000001	 -0.000001	diff=1.9209e-09
  0.000000	  0.000000	diff=6.73598e-19
  0.000000	  0.000000	diff=2.46331e-16
  0.000005	  0.000005	diff=1.70028e-08
  0.000000	  0.000000	diff=5.46376e-84
  0.000001	  0.000001	diff=8.64204e-09
  local_diff=0.256958
# W_tgt{2}, [8 4]
  0.000482	  0.000487	diff=4.30135e-06
 -0.129208	 -0.128560	diff=0.000648313
  0.000000	  0.000000	diff=3.91993e-10
 -0.000203	 -0.000202	diff=1.22106e-06
 -0.000000	 -0.000000	diff=1.16504e-11
 -2.188387	 -2.180283	diff=0.00810429
 -0.000023	 -0.000022	diff=2.11442e-07
  0.000000	  0.000000	diff=4.03045e-09
 -0.000167	 -0.000166	diff=8.42192e-07
  0.121537	  0.122118	diff=0.000580739
 -0.000000	 -0.000000	diff=2.42734e-10
  0.000159	  0.000159	diff=7.54623e-07
  0.000000	  0.000000	diff=1.32217e-10
  2.025519	  2.033286	diff=0.00776719
  0.000022	  0.000022	diff=1.97718e-07
 -0.000000	 -0.000000	diff=3.78767e-09
 -0.117148	 -0.117065	diff=8.30687e-05
  0.175358	  0.175497	diff=0.000139066
  0.021245	  0.021241	diff=3.75291e-06
 -0.045413	 -0.045421	diff=7.9792e-06
 -0.249366	 -0.249207	diff=0.000159306
  0.080066	  0.080127	diff=6.063e-05
 -0.128219	 -0.128009	diff=0.000209255
 -1.835474	 -1.821901	diff=0.0135728
 -0.157398	 -0.156765	diff=0.000633399
  0.202520	  0.202529	diff=9.16323e-06
 -0.031462	 -0.031317	diff=0.00014483
  0.138145	  0.138453	diff=0.000308902
 -0.002893	 -0.002866	diff=2.68371e-05
  0.053886	  0.053856	diff=3.00519e-05
 -0.130706	 -0.130483	diff=0.000223197
 -0.496780	 -0.565991	diff=0.0692114
  local_diff=0.101932
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.449810	  0.457780	diff=0.00796968
  0.000000	  0.000000	diff=3.17353e-17
  0.000000	  0.000000	diff=5.2171e-09
  0.000000	  0.000000	diff=1.03568e-16
  local_diff=0.00796968
# W_emb_tgt, [2 4]
 -0.000000	 -0.000000	diff=2.77889e-12
 -0.000000	 -0.000000	diff=1.12537e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.82379e-23
  0.000000	 -0.000000	diff=1.44066e-12
  0.000000	  0.000000	diff=3.63588e-10
  0.174029	  0.174701	diff=0.000671944
  local_diff=0.000671945
# W_h, [2 4]
  0.007191	  0.007190	diff=4.53093e-07
  0.206067	  0.206068	diff=1.19647e-06
 -0.265919	 -0.266410	diff=0.000490461
 -7.793612	 -7.791739	diff=0.00187306
  1.911988	  1.911840	diff=0.000147331
 -2.593384	 -2.588799	diff=0.00458552
 -0.072544	 -0.073119	diff=0.000574981
  0.789250	  0.790091	diff=0.000841381
  local_diff=0.00851439
# W_soft, [4 2]
 -2.733187	 -2.735182	diff=0.0019956
  1.227116	  1.227054	diff=6.2027e-05
  1.540589	  1.540443	diff=0.000145849
 -0.030451	 -0.032314	diff=0.00186362
 -5.238513	 -5.241345	diff=0.00283206
  2.035890	  2.035819	diff=7.1456e-05
  3.086743	  3.086652	diff=9.0678e-05
  0.121598	  0.118874	diff=0.00272319
  local_diff=0.00978448
# Num params=176, abs_diff=0.391137
Elapsed time is 1.997786 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_pos=4 v_pos=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000020	  0.000020	diff=1.19702e-07
  0.000158	 -0.000005	diff=0.00016318
 -0.000000	 -0.000000	diff=3.79136e-10
  0.000006	  0.000006	diff=3.00514e-08
 -0.019692	 -0.019538	diff=0.000154198
 -0.000104	 -0.000103	diff=7.06928e-07
 -0.000005	 -0.000005	diff=6.23523e-08
  0.000053	  0.000053	diff=5.21627e-07
  0.000000	  0.000000	diff=5.1051e-09
 -0.000194	 -0.000000	diff=0.000193484
  0.000000	  0.000000	diff=1.4879e-33
  0.000000	 -0.000000	diff=1.14551e-25
  0.000000	 -0.000000	diff=5.91303e-30
  0.000000	 -0.000000	diff=1.80097e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000005	  0.000005	diff=1.77024e-08
  0.000003	  0.000003	diff=9.95974e-09
  0.000000	  0.000000	diff=1.75556e-10
 -0.000003	 -0.000003	diff=1.16707e-08
  0.014496	  0.014553	diff=5.7821e-05
  0.000049	  0.000049	diff=1.73519e-07
 -0.000000	 -0.000000	diff=2.80262e-13
 -0.000000	 -0.000000	diff=3.79726e-10
 -0.000000	 -0.000000	diff=1.31348e-12
  0.000000	  0.000000	diff=1.83824e-13
 -0.000000	 -0.000000	diff=2.43885e-13
  0.000000	  0.000000	diff=2.91847e-13
 -0.000028	 -0.000028	diff=3.71991e-09
  0.000001	  0.000001	diff=4.99505e-11
  0.000000	  0.000000	diff=4.66506e-13
 -0.000000	 -0.000000	diff=3.07049e-13
  local_diff=0.000570346
# W_src{2}, [8 4]
 -0.000588	 -0.000585	diff=2.5476e-06
  0.000125	  0.000124	diff=4.85875e-07
 -0.000023	 -0.000023	diff=7.97532e-08
 -0.000000	 -0.000000	diff=9.0729e-10
 -0.023150	 -0.023019	diff=0.00013055
 -0.011376	 -0.011347	diff=2.97192e-05
  0.000782	  0.000789	diff=6.62581e-06
 -0.000000	 -0.000000	diff=7.15729e-11
  0.000000	 -0.000000	diff=1.80015e-38
  0.000000	  0.000000	diff=1.054e-37
  0.000000	  0.000000	diff=7.52237e-39
  0.000000	  0.000000	diff=4.32932e-38
  0.000000	 -0.000000	diff=1.16579e-38
  0.000000	  0.000000	diff=1.68256e-37
  0.000000	 -0.000000	diff=9.09115e-19
  0.000000	  0.000000	diff=6.2568e-19
 -0.000317	 -0.000316	diff=1.11321e-06
  0.000267	  0.000266	diff=9.09454e-07
 -0.000001	 -0.000001	diff=1.85421e-09
  0.000001	  0.000001	diff=2.90036e-09
 -0.000668	 -0.000667	diff=6.24788e-07
 -0.000226	 -0.000226	diff=3.62964e-08
  0.000726	  0.000732	diff=5.71225e-06
  0.000000	  0.000000	diff=1.58999e-11
  0.000089	  0.000089	diff=8.98581e-08
  0.000092	  0.000093	diff=5.47743e-07
  0.000024	  0.000024	diff=8.78324e-08
  0.000001	  0.000001	diff=4.91936e-09
  0.026478	  0.026652	diff=0.00017376
  0.008571	  0.008574	diff=3.07465e-06
 -0.000205	 -0.000204	diff=4.4998e-07
 -0.000000	 -0.000000	diff=1.0598e-12
  local_diff=0.000356425
# W_tgt{1}, [8 6]
 -0.000001	 -0.000001	diff=4.19801e-09
  0.000000	 -0.000000	diff=5.93927e-20
  0.000000	  0.000000	diff=3.33753e-12
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.0626e-08
 -0.000000	 -0.000000	diff=7.51526e-13
  0.000000	  0.000000	diff=5.90485e-53
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.82159e-09
  0.000000	  0.000000	diff=1.2389e-12
  0.000000	  0.000000	diff=1.68655e-12
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=2.06042e-08
  0.000000	  0.000000	diff=1.6857e-12
  0.000000	 -0.000000	diff=1.00057e-52
 -0.000000	 -0.000000	diff=4.0213e-13
  0.000000	  0.000000	diff=6.94016e-12
  0.000000	  0.000000	diff=3.58775e-13
 -0.000000	 -0.000000	diff=2.42289e-13
  0.000000	  0.000000	diff=6.20853e-14
 -0.000000	 -0.000000	diff=1.43713e-11
  0.000000	  0.000000	diff=1.08379e-14
 -0.000000	 -0.000001	diff=4.99793e-07
  0.000003	  0.000002	diff=1.07353e-06
  0.000000	  0.000000	diff=7.01618e-12
 -0.000000	 -0.000000	diff=2.58601e-13
 -0.000000	 -0.000000	diff=1.05059e-12
 -0.000000	 -0.000000	diff=3.99415e-13
 -0.000000	 -0.000000	diff=1.39014e-11
 -0.000000	 -0.000000	diff=2.61914e-13
  0.000003	  0.000005	diff=1.97835e-06
 -0.000013	 -0.000009	diff=4.20626e-06
 -0.000027	 -0.000027	diff=6.56326e-08
  0.000000	  0.000000	diff=5.73235e-13
 -0.000031	 -0.000031	diff=9.11821e-08
  0.000000	  0.000000	diff=1.02302e-12
 -0.000012	 -0.000012	diff=3.45513e-08
 -0.000000	 -0.000000	diff=5.12906e-13
 -0.000000	 -0.000000	diff=4.22781e-11
  0.000000	  0.000000	diff=6.80762e-12
 -0.000001	 -0.000001	diff=1.01452e-10
  0.000000	  0.000000	diff=1.20733e-13
 -0.000001	 -0.000001	diff=1.46778e-10
  0.000000	  0.000000	diff=8.33417e-14
 -0.000000	 -0.000000	diff=6.25166e-11
  0.000000	  0.000000	diff=2.63575e-13
 -0.000000	 -0.000000	diff=6.84447e-08
  0.000000	  0.000000	diff=1.46928e-07
  local_diff=8.24234e-06
# W_tgt{2}, [8 4]
  0.001410	  0.001412	diff=1.464e-06
 -0.000000	 -0.000000	diff=2.93398e-10
 -0.000000	 -0.000000	diff=8.25959e-10
  0.000002	  0.000002	diff=9.62961e-10
 -0.000062	 -0.000061	diff=2.88258e-07
  0.000004	  0.000004	diff=1.78148e-08
  0.000001	  0.000002	diff=2.03498e-07
 -0.000003	 -0.000003	diff=4.4258e-08
 -0.000000	 -0.000000	diff=2.96047e-13
  0.000000	  0.000000	diff=6.09366e-13
 -0.000000	 -0.000000	diff=3.24934e-13
  0.000000	  0.000000	diff=8.44173e-14
 -0.000000	 -0.000000	diff=8.03062e-14
  0.000000	  0.000000	diff=5.43826e-13
  0.000000	  0.000005	diff=4.31779e-06
 -0.000013	 -0.000010	diff=2.86293e-06
  0.001093	  0.001093	diff=5.90998e-07
 -0.000000	 -0.000000	diff=1.58349e-10
 -0.000000	 -0.000000	diff=4.53642e-10
  0.000001	  0.000001	diff=5.24e-10
 -0.000052	 -0.000051	diff=2.05837e-07
  0.000003	  0.000003	diff=9.64209e-09
 -0.000000	 -0.000000	diff=3.65474e-09
  0.000000	  0.000000	diff=5.19358e-10
 -0.000300	 -0.000300	diff=7.34139e-08
  0.000000	  0.000000	diff=1.68296e-11
  0.000000	  0.000000	diff=4.80336e-11
 -0.000000	 -0.000000	diff=5.85121e-11
  0.000009	  0.000009	diff=1.02734e-08
 -0.000001	 -0.000001	diff=1.06621e-09
 -0.000000	 -0.000000	diff=3.09226e-08
  0.000000	  0.000000	diff=6.99742e-09
  local_diff=1.01352e-05
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.055225	 -0.053908	diff=0.00131691
  0.000000	  0.000000	diff=3.14847e-17
  0.000276	  0.000000	diff=0.000276148
  0.000319	  0.000000	diff=0.000318753
  local_diff=0.00191182
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=8.73261e-16
 -0.000000	 -0.000000	diff=6.5708e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.21566e-20
  0.000000	 -0.000000	diff=9.68362e-16
  0.000001	  0.000001	diff=5.11986e-08
 -0.000001	 -0.000001	diff=8.12709e-08
  local_diff=1.3247e-07
# W_pos, [2 2]
  0.013483	  0.013517	diff=3.4179e-05
  0.005323	  0.005291	diff=3.21478e-05
 -0.000000	 -0.000000	diff=8.69149e-14
 -0.000000	 -0.000000	diff=3.00446e-13
  local_diff=6.63268e-05
# v_pos, [1 2]
 -0.022079	 -0.021905	diff=0.000174608
 -0.076306	 -0.074289	diff=0.00201677
  local_diff=0.00219138
# W_h, [2 4]
 -0.000001	 -0.000001	diff=2.4264e-09
  0.018819	  0.018878	diff=5.95072e-05
  0.000000	  0.000000	diff=5.93914e-10
 -0.009100	 -0.009086	diff=1.38216e-05
 -0.000003	 -0.000004	diff=7.33727e-07
  0.055878	  0.056410	diff=0.000531996
 -0.000002	 -0.000007	diff=5.38299e-06
  0.000011	  0.000006	diff=4.7819e-06
  local_diff=0.000616227
# W_soft, [4 2]
 -0.009536	 -0.009583	diff=4.76194e-05
 -0.007614	 -0.010962	diff=0.00334772
  0.991862	  0.991821	diff=4.06572e-05
 -0.967893	 -0.971276	diff=0.00338334
 -0.009489	 -0.009536	diff=4.69765e-05
 -0.009284	 -0.012587	diff=0.00330246
  0.986164	  0.986124	diff=4.01076e-05
 -0.960663	 -0.964000	diff=0.00333755
  local_diff=0.0135464
# Num params=182, abs_diff=0.0192775
Elapsed time is 2.716375 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 180, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 180
  src input 1: <s> <s> x y
  src mask: 0  0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000010	 -0.000010	diff=5.80667e-08
  0.000000	  0.000000	diff=1.34186e-15
  0.000000	  0.000000	diff=1.18329e-22
  0.000000	  0.000000	diff=1.52873e-33
 -0.001243	 -0.001250	diff=7.4602e-06
  0.000000	  0.000000	diff=5.92526e-14
  0.000002	  0.000002	diff=2.30536e-08
  0.000000	  0.000000	diff=1.74694e-13
  0.000000	  0.000000	diff=2.32677e-30
  0.000000	  0.000000	diff=2.20413e-17
  0.000000	  0.000000	diff=5.53782e-34
  0.000000	 -0.000000	diff=1.82225e-33
  0.000000	  0.000000	diff=7.53374e-33
  0.000000	  0.000000	diff=2.06121e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.14396e-67
  0.000000	  0.000000	diff=1.6979e-54
  0.000000	 -0.000000	diff=1.41002e-23
  0.000000	  0.000000	diff=4.08255e-71
 -0.000000	 -0.000000	diff=3.93273e-10
  0.000000	 -0.000000	diff=1.41025e-28
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.56817e-28
  0.000000	 -0.000000	diff=2.03989e-51
  0.000000	 -0.000000	diff=1.73023e-38
  0.000000	  0.000000	diff=9.98634e-28
  0.000000	 -0.000000	diff=4.42823e-55
  0.000000	  0.000000	diff=4.94294e-13
  0.000000	  0.000000	diff=1.00228e-32
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.53593e-32
  local_diff=7.54171e-06
# W_src{2}, [8 4]
 -0.000067	 -0.000066	diff=3.00941e-07
  0.000566	  0.000564	diff=2.45139e-06
 -0.000000	 -0.000000	diff=3.82788e-10
  0.000003	  0.000003	diff=1.59276e-08
 -0.006707	 -0.006721	diff=1.32144e-05
 -0.046658	 -0.046516	diff=0.000142552
  0.000000	  0.000000	diff=5.88197e-10
  0.000000	  0.000000	diff=1.84115e-11
  0.000000	  0.000000	diff=9.57032e-39
  0.000000	 -0.000000	diff=4.70762e-38
  0.000000	 -0.000000	diff=1.0355e-39
  0.000000	 -0.000000	diff=4.18274e-39
  0.000000	  0.000000	diff=1.20606e-38
  0.000000	 -0.000000	diff=2.74019e-38
  0.000000	 -0.000000	diff=5.83619e-19
  0.000000	 -0.000000	diff=1.69628e-18
 -0.000000	 -0.000000	diff=1.08545e-09
  0.000322	  0.000321	diff=6.91994e-07
 -0.000000	 -0.000000	diff=2.35902e-11
  0.000002	  0.000002	diff=5.68942e-09
  0.000111	  0.000111	diff=5.39148e-08
 -0.001752	 -0.001750	diff=1.73542e-06
  0.000000	  0.000000	diff=1.36923e-10
  0.000000	  0.000000	diff=2.49311e-13
  0.000000	  0.000000	diff=7.7673e-10
 -0.000188	 -0.000188	diff=1.81268e-07
  0.000000	  0.000000	diff=1.84462e-10
 -0.000001	 -0.000001	diff=9.52992e-10
  0.000727	  0.000735	diff=8.16531e-06
  0.035747	  0.035835	diff=8.77148e-05
 -0.000000	 -0.000000	diff=9.55325e-11
 -0.000000	 -0.000000	diff=2.53747e-13
  local_diff=0.000257087
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.8438e-09
  0.000000	  0.000000	diff=6.60538e-20
  0.000000	  0.000000	diff=7.84351e-21
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.22368e-08
  0.000000	  0.000000	diff=5.80066e-09
  0.000000	  0.000000	diff=2.90095e-53
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.00612e-10
  0.000000	  0.000000	diff=4.25713e-20
  0.000000	 -0.000000	diff=1.58485e-21
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=9.04999e-09
 -0.000000	 -0.000000	diff=1.79588e-13
  0.000000	 -0.000000	diff=4.91562e-53
  0.000000	 -0.000000	diff=3.51855e-63
  0.000000	 -0.000000	diff=3.04511e-18
  0.000000	 -0.000000	diff=1.17092e-36
  0.000000	 -0.000000	diff=2.28769e-30
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.01836e-18
  0.000000	 -0.000000	diff=7.90179e-21
  0.000000	 -0.000000	diff=5.15549e-85
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.62986e-18
  0.000000	  0.000000	diff=1.52167e-36
  0.000000	  0.000000	diff=2.73768e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.68602e-18
  0.000000	  0.000000	diff=3.30789e-21
  0.000000	  0.000000	diff=6.69984e-85
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.72445e-51
  0.000000	  0.000000	diff=4.08275e-37
  0.000000	 -0.000000	diff=8.5963e-26
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=8.76291e-26
  0.000000	  0.000000	diff=4.44014e-33
  0.000000	  0.000000	diff=2.48029e-65
  0.000000	 -0.000000	diff=3.38679e-64
  0.000000	  0.000000	diff=1.79091e-26
  0.000000	  0.000000	diff=3.96354e-41
  0.000000	 -0.000000	diff=8.20729e-37
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.95143e-26
  0.000000	  0.000000	diff=1.24571e-22
  0.000000	  0.000000	diff=2.11743e-83
  0.000000	 -0.000000	diff=8.82269e-83
  local_diff=3.9732e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=3.56574e-17
  0.000000	 -0.000000	diff=9.58074e-18
  0.000000	 -0.000000	diff=1.87329e-19
  0.000000	 -0.000000	diff=6.38997e-19
  0.000000	  0.000000	diff=2.45419e-17
  0.000000	 -0.000000	diff=1.20626e-17
  0.000000	  0.000000	diff=5.85818e-13
  0.000000	  0.000000	diff=8.52086e-13
  0.000000	 -0.000000	diff=5.80114e-19
  0.000000	 -0.000000	diff=5.98519e-18
  0.000000	  0.000000	diff=5.94903e-23
  0.000000	  0.000000	diff=4.88193e-23
  0.000000	 -0.000000	diff=8.32051e-19
  0.000000	 -0.000000	diff=7.64317e-18
 -0.000000	 -0.000000	diff=2.71353e-13
 -0.000000	 -0.000000	diff=4.79567e-13
 -0.000060	 -0.000060	diff=1.13329e-08
 -0.000010	 -0.000010	diff=1.91944e-09
 -0.000041	 -0.000041	diff=7.85678e-09
  0.000164	  0.000164	diff=2.75008e-08
 -0.000001	 -0.000001	diff=1.67537e-10
  0.000004	  0.000004	diff=6.97502e-10
 -0.000000	 -0.000000	diff=2.78683e-11
  0.001613	  0.001614	diff=8.43897e-07
  0.001181	  0.001177	diff=4.31122e-06
  0.000192	  0.000193	diff=7.26157e-07
  0.000809	  0.000806	diff=2.98892e-06
 -0.003190	 -0.003200	diff=1.04156e-05
  0.000017	  0.000017	diff=6.32407e-08
 -0.000071	 -0.000071	diff=2.64007e-07
  0.000000	  0.000000	diff=4.05702e-11
 -0.031767	 -0.031444	diff=0.00032264
  local_diff=0.000342302
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003537	 -0.003599	diff=6.21049e-05
  0.000000	 -0.000000	diff=4.88283e-17
  0.000000	  0.000000	diff=7.98032e-09
  0.000000	  0.000000	diff=4.13408e-23
  local_diff=6.21129e-05
# W_emb_tgt, [2 4]
 -0.000000	 -0.000000	diff=8.95706e-09
  0.000000	  0.000000	diff=5.66152e-16
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.63368e-14
  0.000000	  0.000000	diff=5.20232e-22
  0.000000	  0.000000	diff=2.24885e-08
 -0.000001	 -0.000001	diff=3.5697e-08
  local_diff=6.71427e-08
# W_a, [2 2]
 -0.000021	 -0.000021	diff=3.70089e-10
 -0.000521	 -0.000521	diff=1.71619e-08
  0.000288	  0.000288	diff=7.68791e-08
  0.007194	  0.007197	diff=3.43123e-06
  local_diff=3.52564e-06
# W_h, [2 4]
 -0.001058	 -0.001056	diff=1.41846e-06
 -0.021041	 -0.021013	diff=2.80146e-05
  0.003438	  0.003453	diff=1.51023e-05
  0.068412	  0.068710	diff=0.000298424
 -0.000042	 -0.000042	diff=1.01615e-09
 -0.000860	 -0.000860	diff=4.58733e-08
  0.000597	  0.000597	diff=4.51913e-07
  0.011855	  0.011864	diff=8.91774e-06
  local_diff=0.000352376
# W_soft, [4 2]
  0.000034	  0.000034	diff=1.69184e-07
  0.996541	  0.996539	diff=1.68627e-06
 -0.996574	 -0.996576	diff=1.5133e-06
  0.000003	  0.000003	diff=1.50324e-08
  0.000034	  0.000034	diff=1.69393e-07
  0.989316	  0.989314	diff=1.68673e-06
 -0.989349	 -0.989351	diff=1.51355e-06
  0.000003	  0.000003	diff=1.50438e-08
  local_diff=6.76852e-06
# Num params=180, abs_diff=0.00103182
Elapsed time is 2.094035 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 v_a=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000001	  0.000001	diff=7.71111e-09
  0.000158	 -0.000005	diff=0.000163181
  0.000000	  0.000000	diff=1.93104e-11
  0.000006	  0.000006	diff=3.36581e-08
 -0.001355	 -0.001346	diff=9.21503e-06
 -0.000001	 -0.000001	diff=3.75515e-08
 -0.000000	 -0.000000	diff=2.01904e-09
  0.000060	  0.000060	diff=5.64828e-07
  0.000000	  0.000000	diff=5.10438e-09
 -0.000194	 -0.000000	diff=0.000193484
  0.000000	  0.000000	diff=1.4879e-33
  0.000000	 -0.000000	diff=1.14678e-25
  0.000000	 -0.000000	diff=6.28577e-30
  0.000000	 -0.000000	diff=2.29507e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.10326e-09
  0.000003	  0.000003	diff=1.08596e-08
  0.000000	  0.000000	diff=6.13123e-12
 -0.000004	 -0.000004	diff=1.2986e-08
  0.000962	  0.000963	diff=1.24815e-06
  0.000007	  0.000007	diff=2.70073e-08
  0.000000	  0.000000	diff=2.92672e-13
  0.000000	  0.000000	diff=5.82397e-11
 -0.000000	 -0.000000	diff=5.47623e-13
 -0.000000	 -0.000000	diff=7.6165e-13
 -0.000000	 -0.000000	diff=5.50316e-13
  0.000000	  0.000000	diff=2.0178e-13
 -0.000002	 -0.000002	diff=1.19224e-09
 -0.000000	 -0.000000	diff=2.50214e-11
  0.000000	  0.000000	diff=2.46577e-13
  0.000000	  0.000000	diff=5.68236e-13
  local_diff=0.000367833
# W_src{2}, [8 4]
 -0.000045	 -0.000045	diff=1.87212e-07
 -0.000309	 -0.000308	diff=1.2531e-06
 -0.000002	 -0.000002	diff=5.37233e-09
 -0.000001	 -0.000001	diff=3.91209e-09
 -0.003418	 -0.003401	diff=1.61501e-05
 -0.001512	 -0.001510	diff=2.10921e-06
  0.000063	  0.000064	diff=5.14387e-07
 -0.000000	 -0.000000	diff=2.42587e-11
  0.000000	 -0.000000	diff=1.88493e-38
  0.000000	  0.000000	diff=1.17096e-37
  0.000000	  0.000000	diff=7.70299e-39
  0.000000	  0.000000	diff=4.5087e-38
  0.000000	 -0.000000	diff=1.2678e-38
  0.000000	  0.000000	diff=1.78807e-37
  0.000000	 -0.000000	diff=8.80711e-19
  0.000000	  0.000000	diff=9.66699e-19
 -0.000026	 -0.000026	diff=8.6516e-08
 -0.000268	 -0.000267	diff=1.02299e-06
 -0.000000	 -0.000000	diff=1.48921e-10
 -0.000001	 -0.000001	diff=2.85365e-09
 -0.000216	 -0.000216	diff=6.9323e-07
 -0.000041	 -0.000041	diff=3.07332e-08
  0.000059	  0.000059	diff=4.43512e-07
 -0.000000	 -0.000000	diff=1.60273e-11
  0.000007	  0.000007	diff=6.92439e-09
  0.000095	  0.000095	diff=1.44847e-07
  0.000002	  0.000002	diff=5.79726e-09
  0.000000	  0.000000	diff=9.01186e-10
  0.003121	  0.003139	diff=1.77592e-05
  0.001323	  0.001323	diff=7.59726e-09
 -0.000017	 -0.000017	diff=3.48392e-08
  0.000000	  0.000000	diff=1.45749e-12
  local_diff=4.04634e-05
# W_tgt{1}, [8 6]
 -0.000001	 -0.000001	diff=4.19872e-09
  0.000000	 -0.000000	diff=5.93927e-20
  0.000000	  0.000000	diff=3.33753e-12
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.0626e-08
 -0.000000	 -0.000000	diff=7.51526e-13
  0.000000	  0.000000	diff=5.90485e-53
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.82159e-09
  0.000000	  0.000000	diff=5.28357e-13
  0.000000	  0.000000	diff=9.76005e-13
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=2.06035e-08
  0.000000	  0.000000	diff=9.75154e-13
  0.000000	 -0.000000	diff=1.00057e-52
 -0.000000	 -0.000000	diff=3.08413e-13
  0.000000	  0.000000	diff=1.07353e-12
  0.000000	  0.000000	diff=5.10656e-13
 -0.000000	 -0.000000	diff=6.21694e-13
  0.000000	  0.000000	diff=5.61926e-14
 -0.000000	 -0.000000	diff=4.56229e-13
  0.000000	  0.000000	diff=5.90052e-13
 -0.000000	 -0.000001	diff=4.99793e-07
  0.000003	  0.000002	diff=1.07353e-06
  0.000000	  0.000000	diff=1.51555e-12
 -0.000000	 -0.000000	diff=1.12705e-12
 -0.000000	 -0.000000	diff=9.86106e-14
 -0.000000	 -0.000000	diff=3.93558e-13
 -0.000000	 -0.000000	diff=5.81601e-13
 -0.000000	 -0.000000	diff=8.41935e-13
  0.000003	  0.000005	diff=1.97835e-06
 -0.000013	 -0.000009	diff=4.20626e-06
 -0.000002	 -0.000002	diff=5.18708e-09
  0.000000	  0.000000	diff=2.5367e-15
 -0.000002	 -0.000002	diff=7.16958e-09
  0.000000	  0.000000	diff=4.09434e-13
 -0.000001	 -0.000001	diff=2.78134e-09
 -0.000000	 -0.000000	diff=2.31839e-13
 -0.000000	 -0.000000	diff=1.18494e-11
  0.000000	  0.000000	diff=6.94714e-12
 -0.000000	 -0.000000	diff=7.18298e-12
  0.000000	  0.000000	diff=1.45839e-13
 -0.000000	 -0.000000	diff=1.12771e-11
  0.000000	  0.000000	diff=5.36816e-13
 -0.000000	 -0.000000	diff=5.2539e-12
  0.000000	  0.000000	diff=1.83226e-13
 -0.000000	 -0.000000	diff=6.84446e-08
  0.000000	  0.000000	diff=1.46927e-07
  local_diff=8.06576e-06
# W_tgt{2}, [8 4]
  0.000109	  0.000109	diff=4.31145e-08
 -0.000000	 -0.000000	diff=4.7707e-11
 -0.000000	 -0.000000	diff=6.42872e-11
  0.000000	  0.000000	diff=1.58615e-10
 -0.000005	 -0.000005	diff=2.3855e-08
  0.000001	  0.000001	diff=2.94526e-09
  0.000001	  0.000002	diff=2.03539e-07
 -0.000003	 -0.000003	diff=4.37609e-08
 -0.000000	 -0.000000	diff=2.96047e-13
  0.000000	  0.000000	diff=1.01176e-13
 -0.000000	 -0.000000	diff=3.24934e-13
  0.000000	  0.000000	diff=8.44173e-14
 -0.000000	 -0.000000	diff=8.03062e-14
  0.000000	  0.000000	diff=1.66716e-13
  0.000000	  0.000005	diff=4.31779e-06
 -0.000013	 -0.000010	diff=2.86293e-06
  0.000084	  0.000084	diff=3.69071e-09
 -0.000000	 -0.000000	diff=2.59601e-11
 -0.000000	 -0.000000	diff=3.47241e-11
  0.000000	  0.000000	diff=8.59228e-11
 -0.000004	 -0.000004	diff=1.5838e-08
  0.000000	  0.000000	diff=1.59444e-09
 -0.000000	 -0.000000	diff=3.63246e-09
  0.000000	  0.000000	diff=7.87449e-10
 -0.000023	 -0.000023	diff=2.54425e-09
  0.000000	  0.000000	diff=2.3192e-12
  0.000000	  0.000000	diff=3.88335e-12
 -0.000000	 -0.000000	diff=9.60237e-12
  0.000001	  0.000001	diff=9.86622e-10
 -0.000000	 -0.000000	diff=1.7678e-10
 -0.000000	 -0.000000	diff=3.09203e-08
  0.000000	  0.000000	diff=7.02617e-09
  local_diff=7.56557e-06
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003808	 -0.003702	diff=0.000105797
  0.000000	  0.000000	diff=4.23686e-17
  0.000276	  0.000000	diff=0.000276148
  0.000319	  0.000000	diff=0.000318753
  local_diff=0.000700698
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=8.73261e-16
 -0.000000	 -0.000000	diff=6.5708e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.21566e-20
  0.000000	 -0.000000	diff=9.68362e-16
  0.000001	  0.000001	diff=5.11986e-08
 -0.000001	 -0.000001	diff=8.12716e-08
  local_diff=1.32471e-07
# W_a, [2 2]
  0.000132	  0.000126	diff=5.62188e-06
 -0.000165	 -0.000164	diff=1.35735e-06
 -0.000000	 -0.000000	diff=4.68953e-13
  0.000000	  0.000000	diff=4.85336e-13
  local_diff=6.97923e-06
# v_a, [1 2]
 -0.004163	 -0.004146	diff=1.76561e-05
 -0.000435	 -0.000435	diff=2.00205e-07
  local_diff=1.78563e-05
# W_h, [2 4]
 -0.000004	 -0.000004	diff=1.4079e-08
  0.003128	  0.003139	diff=1.05677e-05
  0.000006	  0.000006	diff=3.00859e-08
 -0.004576	 -0.004553	diff=2.23587e-05
 -0.000010	 -0.000011	diff=7.87962e-07
  0.008809	  0.008893	diff=8.43632e-05
 -0.000002	 -0.000007	diff=5.38299e-06
  0.000011	  0.000006	diff=4.7819e-06
  local_diff=0.000128287
# W_soft, [4 2]
 -0.009588	 -0.009636	diff=4.78789e-05
 -0.002234	 -0.005573	diff=0.00333881
  0.992061	  0.992021	diff=3.96587e-05
 -0.973438	 -0.976813	diff=0.00337457
 -0.009596	 -0.009644	diff=4.77818e-05
 -0.002327	 -0.005659	diff=0.00333203
  0.991124	  0.991085	diff=3.95783e-05
 -0.972414	 -0.975781	diff=0.00336772
  local_diff=0.013588
# Num params=182, abs_diff=0.0148659
Elapsed time is 2.184391 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 268, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtRare = 5
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 8
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 268
  src input 1: <s> <s> <s> z
  src mask: 0  0  0  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=3.44409e-14
  0.000000	  0.000000	diff=3.93732e-12
  0.000000	  0.000000	diff=3.77185e-10
  0.000000	  0.000000	diff=1.49433e-13
  0.000000	  0.000000	diff=5.36696e-16
  0.000000	  0.000000	diff=1.01258e-13
  0.000000	  0.000000	diff=2.98253e-22
  0.000000	 -0.000000	diff=6.40939e-20
 -0.031097	 -0.005026	diff=0.0260716
 -4.478277	 -0.885990	diff=3.59229
  0.000006	 -0.000016	diff=2.13791e-05
 -0.000344	 -0.000027	diff=0.000317491
 -0.031084	 -0.005013	diff=0.0260715
 -1.999115	 -0.393930	diff=1.60519
  0.000013	  0.000002	diff=1.10552e-05
 -0.000331	 -0.000065	diff=0.000266438
  0.000000	 -0.000000	diff=5.99927e-09
 -0.000000	 -0.000000	diff=3.06811e-07
  0.000000	 -0.000000	diff=3.52452e-11
 -0.000000	 -0.000000	diff=2.3453e-10
  0.000000	 -0.000000	diff=1.19542e-08
 -0.000000	 -0.000000	diff=1.36898e-07
  0.000000	  0.000000	diff=1.03595e-12
 -0.000000	 -0.000000	diff=2.23706e-11
 -0.000002	  0.000001	diff=3.01424e-06
  0.000276	  0.000021	diff=0.000254569
 -0.000000	  0.000000	diff=1.68928e-08
  0.000000	  0.000000	diff=1.95207e-07
 -0.000004	  0.000002	diff=5.86975e-06
  0.000123	  0.000009	diff=0.000113571
  0.000000	 -0.000000	diff=1.2901e-09
  0.000000	  0.000000	diff=1.8802e-08
  local_diff=5.25061
# W_src{2}, [8 4]
 -0.000003	 -0.000001	diff=1.56868e-06
 -0.000004	 -0.000002	diff=2.64045e-06
  0.000001	  0.000000	diff=4.22923e-07
 -0.000001	 -0.000000	diff=2.30142e-07
 -0.000003	 -0.000001	diff=1.44222e-06
 -0.000005	 -0.000001	diff=4.04115e-06
  0.000087	  0.000353	diff=0.000265375
 -0.004315	 -0.001157	diff=0.0031578
  0.000794	  0.000245	diff=0.000548809
  0.001596	  0.000487	diff=0.00110878
 -0.000160	 -0.000051	diff=0.000108776
  0.000190	  0.000086	diff=0.000103845
  0.000844	  0.000274	diff=0.000569966
  0.001827	  0.000401	diff=0.00142574
 -0.676828	 -0.189797	diff=0.487031
  1.765757	  0.459436	diff=1.30632
 -0.000087	 -0.000037	diff=5.00365e-05
 -0.000385	 -0.000143	diff=0.000242227
  0.000044	  0.000016	diff=2.7849e-05
 -0.000123	 -0.000059	diff=6.3724e-05
 -0.000056	 -0.000027	diff=2.92628e-05
 -0.000673	 -0.000256	diff=0.00041733
 -0.359942	 -0.127569	diff=0.232373
 -0.228206	 -0.062272	diff=0.165934
  0.000548	  0.000330	diff=0.000217619
  0.000740	  0.000625	diff=0.000114652
 -0.000171	 -0.000085	diff=8.56281e-05
  0.000230	  0.000250	diff=1.98847e-05
  0.000492	  0.000341	diff=0.000151098
  0.001052	  0.000661	diff=0.000391155
  0.529665	  0.100345	diff=0.42932
  0.534868	  0.311456	diff=0.223412
  local_diff=2.8535
# W_tgt{1}, [8 6]
  0.350090	  0.349683	diff=0.000406454
 -0.008341	 -0.008385	diff=4.39999e-05
  0.247685	  0.249075	diff=0.00139044
 -0.092794	 -0.092831	diff=3.62731e-05
  3.040528	  3.027456	diff=0.0130723
 -2.930556	 -2.960882	diff=0.0303254
 -0.000043	 -0.000043	diff=3.28841e-07
  0.000462	  0.000459	diff=3.52215e-06
  0.430277	  0.429579	diff=0.000697525
 -1.124228	 -1.129713	diff=0.00548476
  0.398493	  0.403473	diff=0.00498008
 -0.036945	 -0.037300	diff=0.000355356
  3.821205	  3.800161	diff=0.0210432
 -3.393191	 -3.499669	diff=0.106478
  0.158296	  0.157039	diff=0.00125681
-36.864358	-37.041411	diff=0.177053
 -0.129635	 -0.131495	diff=0.00186069
  0.010777	  0.010777	diff=3.13892e-08
  0.174934	  0.175313	diff=0.000379232
 -0.016445	 -0.016373	diff=7.23241e-05
  1.942094	  1.935042	diff=0.00705159
 -0.131798	 -0.135383	diff=0.00358487
  0.000642	  0.000643	diff=3.0477e-07
 -0.219252	 -0.219200	diff=5.15791e-05
 -0.070034	 -0.070471	diff=0.000436314
  0.032164	  0.032164	diff=5.80906e-07
  0.211493	  0.212021	diff=0.000528364
 -0.019769	 -0.019680	diff=8.97656e-05
  2.341153	  2.330986	diff=0.0101671
  0.054448	  0.053469	diff=0.000979473
  0.000035	  0.000034	diff=8.29317e-07
 -0.314041	 -0.313963	diff=7.82822e-05
 -0.002756	 -0.002746	diff=1.00921e-05
 -0.000551	 -0.000549	diff=2.24197e-06
 -0.145980	 -0.145722	diff=0.000257511
  0.018197	  0.018271	diff=7.38689e-05
 -1.595408	 -1.600176	diff=0.00476797
  0.017926	  0.017999	diff=7.24796e-05
  0.000000	  0.000000	diff=9.82803e-13
  0.000000	  0.000000	diff=1.6414e-12
  0.000091	  0.000092	diff=9.62895e-07
  0.000139	  0.000139	diff=1.36712e-07
 -0.046085	 -0.046039	diff=4.60164e-05
  0.007648	  0.007677	diff=2.8542e-05
 -0.420190	 -0.420614	diff=0.00042447
  0.011554	  0.011582	diff=2.78029e-05
  0.000000	  0.000000	diff=1.56222e-12
  0.000000	  0.000000	diff=4.42109e-12
  local_diff=0.39362
# W_tgt{2}, [8 4]
 -4.449665	 -4.450405	diff=0.000740011
  1.497795	  1.496646	diff=0.00114881
  0.064507	  0.064500	diff=6.69539e-06
  0.073800	  0.073740	diff=5.95562e-05
 -0.837812	 -0.841077	diff=0.00326448
 -0.874738	 -0.879698	diff=0.00496039
 -2.064369	 -2.062844	diff=0.0015246
  0.074065	  0.072794	diff=0.00127086
  1.440077	  1.442500	diff=0.00242335
  0.913485	  0.912846	diff=0.000639497
  0.818401	  0.818252	diff=0.000149913
  0.194260	  0.193815	diff=0.000445125
 -4.037714	 -4.052535	diff=0.0148204
  0.948923	  0.948044	diff=0.000878972
 -1.517941	 -1.516757	diff=0.00118368
  0.046934	  0.046835	diff=9.86846e-05
 -0.238807	 -0.234673	diff=0.00413405
 -0.056792	 -0.056990	diff=0.000197539
 -0.604708	 -0.604489	diff=0.000218961
 -0.130811	 -0.131064	diff=0.000253051
  2.766720	  2.758252	diff=0.0084683
 -0.479906	 -0.480956	diff=0.00105025
  0.312377	  0.356415	diff=0.0440384
 -3.326679	 -3.272561	diff=0.0541184
 -0.031331	 -0.033696	diff=0.00236523
 -0.005156	 -0.005768	diff=0.000611335
 -0.002655	 -0.002617	diff=3.76514e-05
  0.005859	  0.006444	diff=0.000585348
 -0.010046	 -0.013492	diff=0.0034458
 -0.006123	 -0.006148	diff=2.50985e-05
 -0.568885	  0.058352	diff=0.627237
 -0.569744	  0.110176	diff=0.67992
  local_diff=1.46032
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.01776e-11
 -0.000000	 -0.000000	diff=1.18035e-11
 -0.000000	 -0.000000	diff=9.05473e-10
 -0.000000	 -0.000000	diff=7.55468e-10
  local_diff=1.68292e-09
# W_src_char{1}, [8 4]
  0.000000	  0.000000	diff=1.05893e-14
 -0.000000	 -0.000000	diff=2.03506e-08
  0.000000	  0.000000	diff=1.22834e-20
  0.000000	  0.000000	diff=2.79261e-08
  0.000000	  0.000000	diff=1.4158e-14
  0.000000	  0.000000	diff=1.55338e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.78214e-14
  0.000000	  0.000000	diff=4.2864e-08
  0.000000	  0.000000	diff=2.82819e-21
  0.000000	  0.000000	diff=6.49608e-09
  0.000000	 -0.000000	diff=3.21927e-14
  0.000000	  0.000000	diff=7.01508e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=8.49772e-23
  0.000000	 -0.000000	diff=2.71255e-15
  0.000000	  0.000000	diff=6.13809e-24
  0.000000	  0.000000	diff=7.98626e-13
  0.000000	  0.000000	diff=8.35347e-15
  0.000000	 -0.000000	diff=2.37756e-33
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.77765e-15
 -0.000000	 -0.000000	diff=1.9948e-11
  0.000000	  0.000000	diff=9.1905e-24
  0.000000	  0.000000	diff=3.49693e-11
  0.000000	  0.000000	diff=4.53019e-15
  0.000000	 -0.000000	diff=8.47544e-18
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=9.76926e-08
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.34936e-08
  0.000000	  0.000000	diff=2.00732e-08
 -0.000000	 -0.000000	diff=3.46639e-08
 -0.000000	 -0.000000	diff=6.82783e-09
  0.000000	  0.000000	diff=2.96052e-10
 -0.000000	 -0.000000	diff=1.26316e-10
  0.000000	  0.000000	diff=2.3682e-13
 -0.000000	 -0.000000	diff=1.17417e-12
  local_diff=7.54823e-08
# W_emb_tgt, [2 4]
 -0.000072	 -0.000024	diff=4.75932e-05
  0.000043	  0.000017	diff=2.56788e-05
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.100977	  0.103444	diff=0.00246728
 -0.058248	 -0.057550	diff=0.000698045
 -2.093840	 -2.176246	diff=0.0824052
  1.163075	  1.143505	diff=0.0195702
  local_diff=0.105214
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.75576e-09
  0.000033	  0.000031	diff=1.17162e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.41462e-12
  0.000240	  0.000235	diff=5.01058e-06
  0.201873	  0.194658	diff=0.00721521
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.73151e-29
 -0.000000	 -0.000000	diff=6.11367e-09
 -0.000019	 -0.000019	diff=4.17459e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.03438e-11
  0.000453	  0.000435	diff=1.75957e-05
 -0.115915	 -0.118487	diff=0.00257176
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.66111e-27
  0.000000	  0.000000	diff=7.72156e-14
  0.000000	  0.000000	diff=1.51955e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.12913e-12
  0.000000	 -0.000000	diff=1.28185e-16
  0.000024	  0.000024	diff=8.17942e-09
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=6.36052e-28
 -0.000000	 -0.000000	diff=4.70811e-11
  0.000000	  0.000000	diff=7.29455e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.23529e-12
  0.000032	  0.000032	diff=1.18793e-07
  0.000319	  0.000320	diff=1.2145e-06
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=6.19035e-28
  local_diff=0.00981252
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.004171	 -0.004175	diff=4.59449e-06
 -0.041687	 -0.042016	diff=0.000329054
  0.000000	  0.000000	diff=2.34695e-12
  0.000000	  0.000000	diff=1.72091e-12
  0.000000	  0.000000	diff=6.05344e-12
  0.000000	  0.000000	diff=1.98892e-12
 -0.000081	 -0.000082	diff=6.04575e-07
 -0.000012	 -0.000012	diff=1.70396e-08
  local_diff=0.00033427
# W_pos, [2 2]
  0.002466	  0.002464	diff=1.31754e-06
 -0.001277	 -0.001278	diff=3.59012e-07
  0.000679	  0.000679	diff=9.70453e-08
 -0.000349	 -0.000349	diff=2.85563e-08
  local_diff=1.80215e-06
# v_pos, [1 2]
 -0.002329	 -0.002330	diff=1.22589e-06
  0.001299	  0.001298	diff=3.3957e-07
  local_diff=1.56546e-06
# W_h, [2 4]
 -0.008931	 -0.008931	diff=3.78623e-08
 -0.011886	 -0.011886	diff=2.83689e-08
  0.060004	  0.060005	diff=4.83103e-07
  0.037420	  0.037420	diff=3.12826e-07
 11.220669	 11.262340	diff=0.0416716
  2.340434	  2.340477	diff=4.3706e-05
  0.798619	  0.800195	diff=0.00157641
 -8.530888	 -8.563489	diff=0.0326005
  local_diff=0.0758931
# W_soft, [5 2]
 -0.543555	 -0.544652	diff=0.00109724
 -6.586993	 -6.587158	diff=0.00016514
 12.737045	 12.736882	diff=0.000163563
 -2.891551	 -2.892648	diff=0.00109678
 -2.712416	 -2.712423	diff=7.08973e-06
 -0.343751	 -0.344053	diff=0.000301937
 -4.505729	 -4.506474	diff=0.000744242
 12.348696	 12.348038	diff=0.000657855
 -3.056752	 -3.057104	diff=0.000352659
 -4.440338	 -4.440407	diff=6.89815e-05
  local_diff=0.00465549
# Num params=268, abs_diff=10.154
Elapsed time is 5.450934 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 396, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtRare = 5
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 8
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 396
  src input 1: <s> <s> xyz xz
  src mask: 0  0  1  1
  tgt input 1: <s> ac abc b c
  tgt output 1: ac abc b c </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 20.949769	  3.929574	diff=17.0202
  6.002671	  0.641333	diff=5.36134
 31.094006	  0.886352	diff=30.2077
 -0.971957	 -0.064331	diff=0.907627
 11.890882	  4.249841	diff=7.64104
  3.898484	  0.302992	diff=3.59549
-407.485878	-47.402657	diff=360.083
-59.808582	  0.128806	diff=59.9374
-14.752905	 -0.148935	diff=14.604
 38.000379	  1.091662	diff=36.9087
 12.526166	  0.122325	diff=12.4038
 -4.008243	 -0.430766	diff=3.57748
 28.165514	  2.626511	diff=25.539
 31.004086	  0.422071	diff=30.582
 17.239766	 -1.018929	diff=18.2587
 25.673066	  8.753714	diff=16.9194
 34.555540	 -4.198259	diff=38.7538
  8.766878	  1.020500	diff=7.74638
 -6.427673	 -0.891679	diff=5.53599
-11.993838	 -1.136864	diff=10.857
 15.613682	  3.870265	diff=11.7434
 -4.450637	 -0.205466	diff=4.24517
-105.588447	 22.230314	diff=127.819
 40.613690	  5.851643	diff=34.762
 17.780354	 -2.018127	diff=19.7985
 28.523522	  2.488637	diff=26.0349
 41.559776	  0.008318	diff=41.5515
-19.988793	 -1.801180	diff=18.1876
 22.646042	 10.767088	diff=11.879
  4.924281	  0.209050	diff=4.71523
-410.219123	-20.836798	diff=389.382
 13.618247	  3.046670	diff=10.5716
  local_diff=1407.13
# W_src{2}, [8 4]
 14.717636	 -2.144021	diff=16.8617
 -3.664950	  8.597530	diff=12.2625
-29.118497	  0.759619	diff=29.8781
  0.911166	  1.010395	diff=0.0992285
  4.838326	 -2.276666	diff=7.11499
-17.920918	  0.677381	diff=18.5983
 28.549392	-42.654129	diff=71.2035
-61.744678	-10.852435	diff=50.8922
-86.351780	 -0.647860	diff=85.7039
 -5.859369	 -7.347384	diff=1.48802
-52.968702	 -0.662012	diff=52.3067
 -1.991266	 -0.962741	diff=1.02853
-216.607587	 -6.723551	diff=209.884
-15.833089	-13.306832	diff=2.52626
-633.327867	  4.643216	diff=637.971
 25.351561	 -9.836819	diff=35.1884
-29.181776	 -2.579004	diff=26.6028
 22.789305	 19.451116	diff=3.33819
-16.455694	  0.747674	diff=17.2034
  2.829066	  2.420165	diff=0.408901
-52.624761	 -0.082691	diff=52.5421
  7.162279	  9.138402	diff=1.97612
 19.653115	-69.981004	diff=89.6341
-12.326278	 -5.178308	diff=7.14797
 41.618705	  3.600849	diff=38.0179
-28.584338	-26.278756	diff=2.30558
 31.036528	 -1.176238	diff=32.2128
 -3.480857	 -3.099822	diff=0.381035
 17.940391	  1.350735	diff=16.5897
 -4.564056	-10.311529	diff=5.74747
-263.299201	 95.523562	diff=358.823
 19.739080	  7.277594	diff=12.4615
  local_diff=1898.4
# W_tgt{1}, [8 6]
  0.213073	  0.073330	diff=0.139743
 -1.018286	 -0.995912	diff=0.0223738
-23.605199	 -8.911846	diff=14.6934
 -0.019153	 -0.019171	diff=1.81772e-05
-23.103966	-12.027749	diff=11.0762
  0.077404	  0.077537	diff=0.000132659
 -0.048277	 -0.048292	diff=1.48955e-05
 -0.018044	 -0.018035	diff=8.15079e-06
  0.187079	  0.071185	diff=0.115894
 -0.727823	 -0.717241	diff=0.0105826
-19.014134	 -7.063308	diff=11.9508
 -0.016141	 -0.016149	diff=7.42578e-06
-11.326726	 -2.252100	diff=9.07463
  0.076170	  0.076241	diff=7.11416e-05
 -0.026795	 -0.026794	diff=1.68309e-06
  0.014701	  0.014706	diff=5.42081e-06
  0.061090	  0.061162	diff=7.21732e-05
  2.879305	  3.169428	diff=0.290123
  0.410228	  0.410279	diff=5.08108e-05
  0.296624	  0.295838	diff=0.000785515
 21.328149	 21.566942	diff=0.238793
 -0.108039	 -0.106264	diff=0.0017752
  0.255295	  0.255171	diff=0.000123396
 -1.041489	 -1.015840	diff=0.0256491
  2.731260	  2.687635	diff=0.0436253
  6.154440	  6.969259	diff=0.814819
  3.201653	  3.118414	diff=0.0832385
 -2.714749	 -2.651736	diff=0.063013
-64.293454	-65.825929	diff=1.53247
 -6.636507	 -6.647358	diff=0.0108504
  0.160021	  0.158699	diff=0.00132184
  0.846589	  0.865481	diff=0.018892
 -2.993487	 -3.050916	diff=0.0574289
  1.061189	  1.085857	diff=0.0246682
 -0.523968	 -0.342878	diff=0.18109
 -0.060002	 -0.060176	diff=0.000173363
 20.451632	 20.786146	diff=0.334514
 -0.129097	 -0.128917	diff=0.000179651
  0.086526	  0.086623	diff=9.61886e-05
 -0.012783	 -0.012779	diff=4.10909e-06
 -0.027340	 -0.027461	diff=0.000120785
  1.953346	  1.966178	diff=0.0128323
 -0.087439	 -0.076378	diff=0.0110603
 -7.876626	 -6.994874	diff=0.881753
 -1.463143	 -1.465556	diff=0.00241275
 -5.095621	 -5.105822	diff=0.0102008
  0.029557	  0.029792	diff=0.000235185
  0.369957	  0.373469	diff=0.00351268
  local_diff=51.7298
# W_tgt{2}, [8 4]
 45.247979	 52.222438	diff=6.97446
 10.201225	  9.948957	diff=0.252268
-13.690981	-13.711954	diff=0.0209729
 -0.399115	 -0.400540	diff=0.00142475
 27.380588	 27.940530	diff=0.559942
 -0.507265	 -0.488586	diff=0.0186783
-106.308419	-109.456467	diff=3.14805
 28.782012	 27.702569	diff=1.07944
  0.333323	  0.406333	diff=0.0730095
 -2.823749	 -1.577007	diff=1.24674
  2.851361	  2.900420	diff=0.0490594
 -0.021535	 -0.019339	diff=0.0021965
 34.765114	 36.300317	diff=1.5352
 19.447640	 19.691588	diff=0.243948
  5.092341	 30.838710	diff=25.7464
  0.372421	  0.376027	diff=0.00360617
 -5.350785	 -5.321318	diff=0.029467
 -0.878657	 -0.867248	diff=0.0114092
 -0.496689	 -0.498539	diff=0.00185015
 -0.289857	 -0.289842	diff=1.53565e-05
 -4.966957	 -4.863973	diff=0.102984
-11.728374	-11.758426	diff=0.0300519
  0.062657	  2.211013	diff=2.14836
 -6.691307	 -6.326840	diff=0.364467
-24.389811	-24.584809	diff=0.194998
  0.134399	  0.134567	diff=0.000168424
  7.942331	  7.951231	diff=0.00890009
  1.389511	  1.400517	diff=0.0110057
  3.119233	  3.114609	diff=0.00462491
 -0.373316	 -0.369841	diff=0.00347548
 38.496102	 46.777437	diff=8.28133
  8.349540	  8.655132	diff=0.305591
  local_diff=52.4541
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -1.251174	 -1.267832	diff=0.0166578
 -0.000000	 -0.000000	diff=1.00156e-10
  0.000460	  0.000439	diff=2.11186e-05
  0.000420	  0.000403	diff=1.77512e-05
  local_diff=0.0166966
# W_src_char{1}, [8 4]
  0.223791	  0.003408	diff=0.220384
 -2.214693	 -0.025113	diff=2.18958
  0.040578	  0.000622	diff=0.0399556
  0.000000	  0.000000	diff=1.68815e-16
 -1.482907	 -0.025034	diff=1.45787
 -0.004147	 -0.000047	diff=0.0041001
 -0.004041	 -0.000060	diff=0.00398147
  0.143370	  0.001625	diff=0.141744
 13.611951	  0.202762	diff=13.4092
-792.415228	 22.474180	diff=814.889
  0.954813	  0.014085	diff=0.940728
  0.000000	 -0.000000	diff=1.21373e-13
-746.934628	 24.339780	diff=771.274
  3.720897	  0.042072	diff=3.67883
  3.636635	  0.053686	diff=3.58295
-124.380316	 -1.454483	diff=122.926
-15.189727	 -0.264124	diff=14.9256
-307.204151	-34.099439	diff=273.105
 -0.825096	 -0.015815	diff=0.809281
  0.000000	  0.000000	diff=1.84171e-13
-378.092920	-34.058682	diff=344.034
 -5.604599	 -0.063835	diff=5.54076
 -5.440864	 -0.081445	diff=5.35942
 22.545090	  2.206846	diff=20.3382
  0.000000	 -0.000000	diff=3.28391e-22
  0.000000	 -0.000000	diff=4.37474e-20
  0.000000	 -0.000000	diff=2.08167e-23
  0.000000	  0.000000	diff=2.36282e-34
  0.000000	 -0.000000	diff=4.16818e-20
  0.000000	 -0.000000	diff=8.18979e-23
  0.000000	 -0.000000	diff=9.19424e-23
  0.000000	  0.000000	diff=2.83124e-21
  local_diff=2398.87
# W_src_char{2}, [8 4]
-278.522542	  5.539841	diff=284.062
-383.207571	  5.801627	diff=389.009
 18.832243	  0.138946	diff=18.6933
 30.782145	  0.160553	diff=30.6216
 25.724221	  1.647241	diff=24.077
 25.162634	  0.581943	diff=24.5807
-354.134648	-13.133233	diff=341.001
 28.629631	  3.728901	diff=24.9007
-432.527289	 -7.275995	diff=425.251
-333.859100	 -8.200125	diff=325.659
-34.419647	 -0.266965	diff=34.1527
  4.479483	  0.103295	diff=4.37619
-289.396352	 -2.337129	diff=287.059
-67.121753	 -1.543957	diff=65.5778
-645.665771	  8.764537	diff=654.43
-380.329721	 -9.924805	diff=370.405
 -0.633919	 -0.004616	diff=0.629303
 -0.281745	 -0.003866	diff=0.277879
 -0.021382	 -0.000155	diff=0.0212261
 -0.018455	  0.000021	diff=0.0184754
 -0.299950	 -0.002095	diff=0.297855
 -0.031280	 -0.000704	diff=0.0305753
  2.242319	  0.014501	diff=2.22782
 -0.200235	 -0.004526	diff=0.195709
-11.686121	 -0.083965	diff=11.6022
 -4.840033	 -0.073497	diff=4.76654
 -0.397857	 -0.002855	diff=0.395002
 -0.271970	  0.000428	diff=0.272398
 -5.614327	 -0.037522	diff=5.57681
 -0.582946	 -0.013418	diff=0.569528
 39.027253	  0.254052	diff=38.7732
 -3.731306	 -0.086239	diff=3.64507
  local_diff=3373.16
# W_src_char{3}, [8 4]
-92.746540	 -2.009516	diff=90.737
  6.422477	  0.414475	diff=6.008
  2.783444	  0.073467	diff=2.70998
 -6.035975	 -0.111935	diff=5.92404
-113.866059	 -2.467452	diff=111.399
 -2.610201	  0.230731	diff=2.84093
-313.564621	-33.976197	diff=279.588
-814.099007	 29.009106	diff=843.108
 47.859171	  1.090812	diff=46.7684
-19.054299	 -0.315222	diff=18.7391
 -3.068908	 -0.039573	diff=3.02934
  4.283281	  0.060863	diff=4.22242
 17.160223	  1.339796	diff=15.8204
-12.466780	 -0.197166	diff=12.2696
  4.009511	 16.165113	diff=12.1556
-415.420713	-13.998276	diff=401.422
 -6.820033	 -0.202964	diff=6.61707
  4.536605	  0.033569	diff=4.50304
 -2.369051	  0.011730	diff=2.38078
  1.028538	 -0.012595	diff=1.04113
-11.304680	 -0.249136	diff=11.0555
  6.235150	  0.029464	diff=6.20569
 17.711565	 -2.950817	diff=20.6624
-294.728807	  3.171185	diff=297.9
-12.538178	 -0.260579	diff=12.2776
  5.972253	  0.070883	diff=5.90137
 -1.500770	  0.008974	diff=1.50974
  0.239749	 -0.016517	diff=0.256266
-17.570163	 -0.323509	diff=17.2467
  6.318947	  0.053805	diff=6.26514
 19.366905	 -3.165376	diff=22.5323
-122.656516	  3.845969	diff=126.502
  local_diff=2399.6
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-1347.064525	 59.111009	diff=1406.18
-1222.086760	 82.126774	diff=1304.21
  0.000000	 -0.000000	diff=1.75097e-38
  0.000000	 -0.000000	diff=3.54861e-39
  0.331850	  0.005132	diff=0.326719
 -0.045346	 -0.000686	diff=0.0446604
  0.000486	 -0.000001	diff=0.000487682
 -0.000001	 -0.000001	diff=9.88863e-08
  local_diff=2710.76
# W_emb_tgt, [2 4]
-23.486644	 -9.426419	diff=14.0602
 22.336288	  9.717903	diff=12.6184
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.181080	  0.187919	diff=0.00683808
  0.000000	  0.000000	diff=2.14336e-17
  0.000000	  0.000000	diff=2.50574e-11
 -0.000000	 -0.000000	diff=1.41797e-11
  local_diff=26.6854
# W_tgt_char{1}, [8 4]
 26.093649	151.748703	diff=125.655
  1.733653	  1.712141	diff=0.021512
 -0.004518	 -0.004557	diff=3.83242e-05
  0.000000	  0.000000	diff=1.22553e-12
 -0.000484	 -0.000480	diff=4.4798e-06
 -0.000001	 -0.000001	diff=3.19539e-09
-10.288511	 -7.443817	diff=2.84469
 -0.000000	 -0.000000	diff=2.74329e-12
 -0.001767	 -0.001773	diff=6.31957e-06
 -0.502383	 -0.504233	diff=0.00185068
 -0.011135	 -0.011392	diff=0.000256929
 -0.000000	 -0.000000	diff=3.03543e-12
 -0.001222	 -0.001199	diff=2.24226e-05
 -0.000002	 -0.000002	diff=4.89467e-08
  0.000000	  0.000000	diff=4.67293e-10
 -0.000000	 -0.000000	diff=4.96848e-12
  0.008991	  0.008965	diff=2.58172e-05
  0.000000	  0.000000	diff=3.31327e-12
 -0.000000	 -0.000000	diff=1.37242e-12
  0.000000	 -0.000000	diff=2.93142e-12
  0.000000	  0.000000	diff=1.06196e-11
  0.000000	 -0.000000	diff=1.2916e-12
  0.000001	  0.000001	diff=6.54671e-09
  0.000000	  0.000000	diff=4.74694e-24
 -0.015178	 -0.015253	diff=7.43138e-05
 -0.000000	 -0.000000	diff=3.49564e-12
  0.000000	  0.000000	diff=7.88027e-14
  0.000000	  0.000000	diff=1.69358e-12
 -0.000000	 -0.000000	diff=4.03601e-11
  0.000000	  0.000000	diff=6.44645e-13
 -0.000002	 -0.000002	diff=1.4304e-08
  0.000000	  0.000000	diff=4.68817e-23
  local_diff=128.524
# W_tgt_char{2}, [8 4]
  2.012310	  1.581469	diff=0.430841
 -0.222348	 -0.220104	diff=0.00224338
  0.000566	  0.000564	diff=1.85199e-06
  0.000000	  0.000000	diff=1.61699e-12
  2.167851	  1.698197	diff=0.469655
 -0.011299	 -0.011263	diff=3.55414e-05
-15.248469	-11.943667	diff=3.3048
 -0.000294	 -0.000275	diff=1.88345e-05
 -0.001194	 -0.001194	diff=1.42015e-11
  0.000175	  0.000175	diff=3.64214e-11
  0.000000	 -0.000000	diff=3.22583e-13
  0.000000	  0.000000	diff=5.76062e-14
 -0.001178	 -0.001178	diff=2.42961e-10
  0.000177	  0.000177	diff=5.41907e-12
 -0.169884	 -0.169884	diff=7.49466e-08
  0.064922	  0.064919	diff=3.35594e-06
  0.082430	  0.082831	diff=0.000401453
  0.000004	  0.000004	diff=1.15409e-08
 -0.015433	 -0.015381	diff=5.16633e-05
  0.000702	  0.000704	diff=1.99708e-06
  0.128873	  0.129703	diff=0.000830733
  0.032948	  0.032810	diff=0.000138969
 -0.012425	 -0.012340	diff=8.48685e-05
  0.002786	  0.002805	diff=1.95276e-05
  0.106760	  0.107312	diff=0.000552034
  0.000003	  0.000003	diff=9.22122e-09
 -0.013071	 -0.013029	diff=4.23801e-05
  0.000628	  0.000629	diff=1.59592e-06
  0.129136	  0.129888	diff=0.000751936
  0.029438	  0.029327	diff=0.000111019
 -0.011099	 -0.011031	diff=6.77684e-05
  0.002492	  0.002508	diff=1.56103e-05
  local_diff=4.21067
# W_tgt_char{3}, [8 4]
 -0.358901	 -0.356031	diff=0.00287007
 -0.619308	 -0.619668	diff=0.000359702
 -0.000843	 -0.000836	diff=6.87913e-06
 -0.019715	 -0.020137	diff=0.000421787
 -0.655828	 -0.652869	diff=0.00295815
 -0.290897	 -0.286940	diff=0.0039566
 -4.003105	 -4.005085	diff=0.00198031
  3.729256	  3.729465	diff=0.000208815
  0.000438	  0.000438	diff=2.89091e-10
  0.000123	  0.000123	diff=1.57968e-11
  0.000000	  0.000000	diff=1.13588e-13
  0.000000	  0.000000	diff=2.96401e-14
  0.000447	  0.000447	diff=2.16955e-10
  0.000122	  0.000122	diff=5.20916e-12
 -0.032324	 -0.032323	diff=1.199e-06
  0.011051	  0.011051	diff=1.80308e-07
  0.180925	  0.181428	diff=0.000503572
  0.760379	  0.775075	diff=0.0146955
  0.009760	  0.009725	diff=3.47222e-05
 -0.021541	 -0.021560	diff=1.96809e-05
  3.559214	  3.885825	diff=0.326611
  0.136971	  0.137376	diff=0.000405233
 -0.000353	 -0.000355	diff=2.58781e-06
 -0.000001	 -0.000001	diff=8.22348e-09
 -0.227959	 -0.226070	diff=0.00188874
 -0.013431	 -0.013428	diff=2.32624e-06
  0.001154	  0.001159	diff=4.87993e-06
  0.016300	  0.016010	diff=0.000290229
 -0.046845	 -0.046736	diff=0.000109383
 -0.310679	 -0.307886	diff=0.00279311
  0.000006	  0.000006	diff=7.94381e-10
  0.000000	  0.000000	diff=2.44549e-12
  local_diff=0.360124
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 33.528203	 27.980043	diff=5.54816
  0.014969	  0.014553	diff=0.000415389
  0.001572	  0.001573	diff=1.01594e-06
  0.000000	 -0.000000	diff=7.68229e-17
  0.000000	  0.000000	diff=3.69542e-22
  0.000000	 -0.000000	diff=1.33205e-23
 24.473916	 19.842102	diff=4.63181
  5.752490	  5.526322	diff=0.226168
  local_diff=10.4066
# W_pos, [2 2]
  5.959146	  5.934458	diff=0.0246883
  1.283800	  1.283657	diff=0.000143467
-24.418877	-24.838657	diff=0.419781
 -5.359637	 -5.363614	diff=0.00397712
  local_diff=0.44859
# v_pos, [1 2]
  5.754419	  5.752451	diff=0.00196771
-23.889829	-24.145364	diff=0.255535
  local_diff=0.257503
# W_h, [2 4]
-34.025842	-34.325502	diff=0.29966
 -5.383091	 -5.384950	diff=0.00185862
 46.749139	 59.135863	diff=12.3867
 13.449027	 13.535785	diff=0.0867584
 14.527228	 14.876942	diff=0.349714
  4.185558	  4.321136	diff=0.135578
-53.864046	-54.163898	diff=0.299852
 -0.357441	  0.006864	diff=0.364305
  local_diff=13.9244
# W_soft, [5 2]
 -3.930219	 -3.930943	diff=0.000723761
 -0.080895	 -0.081405	diff=0.000510808
  4.201872	  4.199374	diff=0.00249817
  2.195766	  2.193346	diff=0.00242027
 -2.379360	 -2.380371	diff=0.00101073
 -5.937444	 -5.939948	diff=0.00250416
 -2.812088	 -2.814809	diff=0.00272092
  5.964206	  5.955588	diff=0.00861708
  4.229841	  4.221576	diff=0.00826514
 -1.418697	 -1.422407	diff=0.00371001
  local_diff=0.0329811
# Num params=396, abs_diff=14477
Elapsed time is 11.629741 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 396, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtRare = 5
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 8
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 396
  src input 1: <s> <s> xyz xz
  src mask: 0  0  1  1
  tgt input 1: <s> ac abc b c
  tgt output 1: ac abc b c </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  7.190063	  4.301541	diff=2.88852
  1.264339	  0.694178	diff=0.570161
  0.463001	  0.437837	diff=0.0251637
  0.190747	  0.155082	diff=0.0356649
  3.669110	  1.226290	diff=2.44282
  0.992211	  0.414972	diff=0.577239
-161.780121	-39.957266	diff=121.823
 -2.828724	  2.496076	diff=5.3248
  1.474767	  0.743224	diff=0.731544
  0.310991	  0.174392	diff=0.136599
  0.118692	  0.112132	diff=0.00655987
  0.044470	  0.036041	diff=0.00842907
  0.723112	  0.140960	diff=0.582152
  0.251162	  0.113886	diff=0.137276
-28.390036	 -7.615296	diff=20.7747
 -0.477668	  0.749482	diff=1.22715
  1.718478	 -2.960508	diff=4.67899
 -1.869599	 -1.295048	diff=0.574551
  0.270674	 -0.609055	diff=0.879729
 -0.450527	 -0.414614	diff=0.0359132
 13.794453	  7.108362	diff=6.68609
 -1.421783	 -0.823254	diff=0.598529
 18.258073	 12.667548	diff=5.59052
  9.290622	  6.376938	diff=2.91368
  3.682672	 -0.127774	diff=3.81045
 -0.724937	 -0.613199	diff=0.111738
  0.713888	  0.008261	diff=0.705627
 -0.242242	 -0.234969	diff=0.00727272
 11.944008	  6.214203	diff=5.7298
 -0.442067	 -0.325668	diff=0.116398
  0.827093	  1.227012	diff=0.39992
  2.981139	  2.308091	diff=0.673048
  local_diff=190.804
# W_src{2}, [8 4]
 -0.966847	 -1.928231	diff=0.961384
  1.682488	  1.834751	diff=0.152263
 -0.425760	 -0.326606	diff=0.0991542
 -0.186236	 -0.186065	diff=0.000171333
-10.984882	-10.844286	diff=0.140597
 -3.475261	 -3.391196	diff=0.0840648
-10.691864	 -4.339963	diff=6.3519
-13.847018	-12.392936	diff=1.45408
 -1.412261	 -1.495761	diff=0.0834997
  1.521618	  1.590885	diff=0.0692676
 -0.269465	 -0.208896	diff=0.0605691
 -0.117126	 -0.117071	diff=5.49468e-05
 -7.726319	 -7.115175	diff=0.611144
 -1.844354	 -1.828380	diff=0.0159742
 -1.395662	 -1.104788	diff=0.290874
 -3.716000	 -3.534408	diff=0.181593
 -0.611479	 -0.441127	diff=0.170352
  5.981828	  6.438995	diff=0.457167
 -0.867312	 -0.806836	diff=0.0604761
  0.048505	  0.048879	diff=0.000373997
-11.158856	 -9.975713	diff=1.18314
  1.423957	  1.489991	diff=0.0660341
-16.422993	-16.526984	diff=0.103991
 -1.655469	 -1.630848	diff=0.0246214
  4.623146	  4.496676	diff=0.12647
-10.536016	 -9.496054	diff=1.03996
 -1.971604	 -2.049362	diff=0.0777582
  0.040034	  0.040504	diff=0.000470488
 10.496744	 11.261916	diff=0.765173
 -2.211233	 -2.006930	diff=0.204303
 18.836330	 24.393008	diff=5.55668
  2.719977	  2.752896	diff=0.0329192
  local_diff=20.4265
# W_tgt{1}, [8 6]
  0.231292	  0.238901	diff=0.00760902
  0.184009	  0.184127	diff=0.000118043
 -8.283717	 -7.853678	diff=0.430039
 -0.015895	 -0.015899	diff=3.46904e-06
-13.295851	-12.272782	diff=1.02307
  0.070871	  0.070915	diff=4.3737e-05
 -0.005050	 -0.005051	diff=7.59802e-07
  0.000042	  0.000042	diff=6.5618e-09
  0.188392	  0.193528	diff=0.00513551
 -0.148125	 -0.148049	diff=7.63029e-05
 -6.741399	 -6.453194	diff=0.288205
  0.012596	  0.012594	diff=2.35249e-06
-10.586542	 -9.908605	diff=0.677937
 -0.057049	 -0.057020	diff=2.82727e-05
  0.004062	  0.004061	diff=4.9131e-07
 -0.000034	 -0.000034	diff=4.24353e-09
 -0.053595	 -0.053760	diff=0.000165366
-23.193657	-20.317321	diff=2.87634
 -0.402553	 -0.400645	diff=0.00190846
  1.686133	  1.698362	diff=0.0122291
  1.240783	  1.214587	diff=0.0261959
 -8.857167	 -8.444513	diff=0.412654
 -0.052104	 -0.052309	diff=0.00020562
  0.003390	  0.003904	diff=0.000513662
 -0.091643	 -0.092002	diff=0.000358355
-50.508015	-39.794317	diff=10.7137
 -0.587729	 -0.583544	diff=0.00418466
  5.382677	  5.520250	diff=0.137573
 -2.122470	 -2.151795	diff=0.0293253
-14.934783	-13.663208	diff=1.27157
  0.218837	  0.217398	diff=0.00143898
 -0.013837	 -0.010964	diff=0.00287369
  0.046307	  0.046195	diff=0.00011193
-13.202776	-11.990717	diff=1.21206
  0.069667	  0.070194	diff=0.000526973
  0.238696	  0.238490	diff=0.000206646
 -2.362950	 -2.356719	diff=0.00623175
-10.603517	 -9.910897	diff=0.69262
  0.003056	  0.003064	diff=8.07073e-06
  0.000484	  0.000496	diff=1.14673e-05
 -0.005219	 -0.005224	diff=4.70505e-06
-18.496548	-16.859223	diff=1.63732
 -0.085600	 -0.085624	diff=2.32835e-05
  5.744254	  5.930194	diff=0.185939
 -7.496488	 -7.290152	diff=0.206337
  0.192511	  0.192321	diff=0.000189677
  0.000012	  0.000012	diff=1.18737e-07
  0.006095	  0.008678	diff=0.00258288
  local_diff=21.8677
# W_tgt{2}, [8 4]
  3.890916	  3.857036	diff=0.0338799
 -1.984998	 -1.889177	diff=0.0958206
  0.146156	  0.182913	diff=0.0367562
  2.008805	  2.025498	diff=0.0166935
  2.563555	  2.611108	diff=0.0475531
  1.970325	  1.978912	diff=0.00858622
-11.551639	-10.543573	diff=1.00807
 16.894809	 19.696359	diff=2.80155
 -2.816998	 -2.789058	diff=0.0279394
 15.937425	 17.166849	diff=1.22942
 -0.805732	 -0.787235	diff=0.0184975
 -3.237768	 -3.179936	diff=0.0578329
 17.292069	 20.531914	diff=3.23984
 15.942593	 17.742059	diff=1.79947
-22.564801	-21.798971	diff=0.76583
 -0.025194	 -0.025461	diff=0.000266563
  2.315783	  2.268238	diff=0.0475448
 -7.214369	 -6.972907	diff=0.241461
  0.303891	  0.318966	diff=0.015075
  2.110730	  2.130458	diff=0.0197286
 -2.459387	 -2.123641	diff=0.335746
 -6.401009	 -6.188087	diff=0.212922
  5.152087	  5.155428	diff=0.00334054
  4.583674	  4.949261	diff=0.365588
  7.003590	  7.725665	diff=0.722075
  1.185254	  1.193597	diff=0.00834295
 -0.121501	 -0.103501	diff=0.018
 -1.670843	 -1.658817	diff=0.0120264
  0.591585	  0.594341	diff=0.00275593
 -1.513566	 -1.501478	diff=0.0120874
  3.063636	  3.510549	diff=0.446913
-11.692360	-10.977267	diff=0.715093
  local_diff=14.3667
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=1.97483e-08
 -0.000000	 -0.000000	diff=1.66067e-08
  0.023023	  0.022163	diff=0.000860176
  0.021066	  0.020343	diff=0.000723178
  local_diff=0.00158339
# W_src_char{1}, [8 4]
 -0.115598	  0.013649	diff=0.129247
 -0.019890	 -0.000307	diff=0.0195829
 -0.117823	  0.013154	diff=0.130977
  0.000000	 -0.000000	diff=1.59943e-14
 -0.128110	 -0.014029	diff=0.114081
 -0.000035	 -0.000001	diff=3.45334e-05
 -0.000073	 -0.000009	diff=6.38464e-05
  0.004089	  0.000063	diff=0.00402625
  0.515850	  0.152433	diff=0.363417
 14.395536	  0.274513	diff=14.121
 -0.307304	  0.049253	diff=0.356557
 -0.000000	  0.000000	diff=2.91158e-11
265.908599	 13.709692	diff=252.199
  0.031441	  0.000484	diff=0.0309565
  0.065812	  0.008437	diff=0.0573747
 -3.791249	 -0.056457	diff=3.73479
 -1.675249	 -0.204855	diff=1.47039
-46.074083	 -0.520664	diff=45.5534
 -0.148386	 -0.009927	diff=0.138459
 -0.000000	 -0.000000	diff=1.91612e-11
-279.832259	-25.993725	diff=253.839
 -0.059344	 -0.000918	diff=0.0584262
 -0.123517	 -0.016002	diff=0.107516
  6.460627	  0.107082	diff=6.35355
  0.000000	 -0.000000	diff=2.02211e-17
  0.000000	  0.000000	diff=1.9661e-16
  0.000000	 -0.000000	diff=1.381e-18
  0.000000	 -0.000000	diff=6.87266e-28
  0.000000	 -0.000000	diff=2.51126e-15
  0.000000	  0.000000	diff=3.46805e-19
  0.000000	 -0.000000	diff=1.54582e-18
  0.000000	 -0.000000	diff=4.04333e-17
  local_diff=578.781
# W_src_char{2}, [8 4]
258.590326	  4.918846	diff=253.671
-81.888544	  1.937846	diff=83.8264
  2.066056	  0.189340	diff=1.87672
247.706433	 -0.132010	diff=247.838
 18.468117	  0.925760	diff=17.5424
  1.472036	  0.268672	diff=1.20336
-115.252009	 -6.652375	diff=108.6
 17.223814	  3.166728	diff=14.0571
-90.896852	 -5.954382	diff=84.9425
-16.723487	 -2.537459	diff=14.186
 -4.311748	 -0.370948	diff=3.9408
  0.721227	  0.101624	diff=0.619603
-37.205337	 -2.769882	diff=34.4355
 -3.543564	 -0.594322	diff=2.94924
242.045495	 12.447627	diff=229.598
-53.518998	 -7.128873	diff=46.3901
 -0.238713	 -0.021584	diff=0.217129
 -0.232519	 -0.007796	diff=0.224723
 -0.014450	 -0.001276	diff=0.0131735
 -0.033578	  0.000410	diff=0.0339875
 -0.096023	 -0.009541	diff=0.0864821
 -0.012203	 -0.001999	diff=0.010204
  0.475137	  0.042836	diff=0.432301
 -0.148380	 -0.023997	diff=0.124383
 -3.204404	 -0.261415	diff=2.94299
 -2.596837	 -0.091734	diff=2.5051
 -0.192218	 -0.015616	diff=0.176602
 -0.342797	  0.003561	diff=0.346358
 -1.317513	 -0.116247	diff=1.20127
 -0.158191	 -0.022243	diff=0.135947
  6.037244	  0.522503	diff=5.51474
 -1.959704	 -0.268448	diff=1.69126
  local_diff=1161.33
# W_src_char{3}, [8 4]
 -9.536790	 -1.267518	diff=8.26927
  4.165197	  0.294243	diff=3.87095
  0.792491	  0.141430	diff=0.651061
 -2.035463	 -0.156171	diff=1.87929
-12.161911	 -1.568036	diff=10.5939
  1.786502	  0.114208	diff=1.67229
-207.523093	-14.842516	diff=192.681
228.127121	 12.709970	diff=215.417
  7.070506	  0.494401	diff=6.5761
 -3.117479	 -0.114486	diff=3.00299
 -1.490590	 -0.044445	diff=1.44614
  1.499515	  0.057873	diff=1.44164
  7.521603	  0.616490	diff=6.90511
 -1.320979	 -0.003043	diff=1.31794
 16.852867	  7.852996	diff=8.99987
-23.586966	 -6.878835	diff=16.7081
 -2.212599	 -0.414925	diff=1.79767
  2.521792	  0.015946	diff=2.50585
 -1.553163	  0.082572	diff=1.63574
  0.546834	 -0.065095	diff=0.611929
 -4.682665	 -0.482448	diff=4.20022
  3.696048	 -0.026908	diff=3.72296
243.404434	 -6.932216	diff=250.337
-95.358559	  6.184118	diff=101.543
 -3.236026	 -0.381249	diff=2.85478
  2.618246	  0.055546	diff=2.5627
 -0.976125	  0.059391	diff=1.03552
  0.028768	 -0.060104	diff=0.0888713
 -5.464375	 -0.454224	diff=5.01015
  3.034606	  0.007081	diff=3.02753
252.019328	 -5.562228	diff=257.582
-24.838541	  5.331309	diff=30.1698
  local_diff=1150.12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-114.214745	-187.337002	diff=73.1223
234.346390	 -4.143411	diff=238.49
  0.000000	  0.000000	diff=4.25937e-10
 -0.000000	 -0.000000	diff=7.95533e-11
 -0.074466	  0.009612	diff=0.0840788
  0.064224	 -0.007649	diff=0.0718735
  0.000411	  0.000231	diff=0.000179606
  0.000168	  0.000094	diff=7.39887e-05
  local_diff=311.768
# W_emb_tgt, [2 4]
-14.908047	-13.735805	diff=1.17224
 13.251549	 14.514644	diff=1.2631
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.54551e-11
 -0.000000	 -0.000000	diff=2.89833e-12
  0.001426	  0.001436	diff=9.82382e-06
 -0.001051	 -0.001046	diff=5.35445e-06
  local_diff=2.43535
# W_tgt_char{1}, [8 4]
  0.055648	  0.055132	diff=0.00051555
  2.772788	  2.745015	diff=0.0277729
 -0.041328	 -0.041617	diff=0.000289284
 -0.000000	 -0.000000	diff=2.43857e-11
 -0.006528	 -0.006494	diff=3.39453e-05
 -0.000023	 -0.000023	diff=1.72141e-07
 -0.000021	 -0.000021	diff=4.1457e-07
  0.000000	  0.000000	diff=3.09168e-10
 -0.016226	 -0.016270	diff=4.4563e-05
 -0.807678	 -0.810093	diff=0.00241561
 -0.102478	 -0.104282	diff=0.00180461
 -0.000000	 -0.000000	diff=1.03675e-10
 -0.016486	 -0.016273	diff=0.00021365
 -0.000059	 -0.000058	diff=1.09536e-06
  0.000006	  0.000006	diff=3.55054e-08
  0.000000	  0.000000	diff=1.96613e-09
  0.000000	 -0.000000	diff=1.06616e-19
  0.000000	 -0.000000	diff=1.74179e-18
  0.000000	 -0.000000	diff=4.417e-12
  0.000000	 -0.000000	diff=7.43621e-20
  0.000000	 -0.000000	diff=3.08792e-12
  0.000000	 -0.000000	diff=8.72346e-16
  0.000000	  0.000000	diff=2.90946e-24
  0.000000	  0.000000	diff=5.45811e-19
  0.000000	  0.000000	diff=7.34983e-19
  0.000000	  0.000000	diff=1.42803e-16
 -0.000000	 -0.000000	diff=2.51371e-12
  0.000000	 -0.000000	diff=3.87105e-19
  0.000000	 -0.000000	diff=4.12144e-12
  0.000000	 -0.000000	diff=4.54114e-15
  0.000000	 -0.000000	diff=4.70782e-22
  0.000000	  0.000000	diff=2.84131e-18
  local_diff=0.0330919
# W_tgt_char{2}, [8 4]
 -0.000471	 -0.000471	diff=3.85687e-11
  0.000051	  0.000051	diff=9.5677e-12
  0.000000	 -0.000000	diff=9.30995e-12
  0.000000	  0.000000	diff=4.41324e-12
 -0.000455	 -0.000455	diff=2.24043e-11
  0.000052	  0.000052	diff=4.38239e-12
 -0.024802	 -0.024802	diff=1.00835e-07
  0.006479	  0.006478	diff=1.77264e-07
 -0.006085	 -0.006085	diff=5.90939e-09
  0.000656	  0.000656	diff=2.13421e-09
 -0.000000	 -0.000000	diff=7.7183e-12
  0.000000	  0.000000	diff=5.03957e-12
 -0.005871	 -0.005871	diff=2.6231e-09
  0.000676	  0.000676	diff=1.46422e-09
 -0.320148	 -0.320166	diff=1.70546e-05
  0.083657	  0.083627	diff=2.9532e-05
  0.000000	  0.000000	diff=2.45919e-12
 -0.000000	 -0.000000	diff=8.58177e-12
  0.000000	  0.000000	diff=5.71796e-18
  0.000000	 -0.000000	diff=7.80681e-19
  0.000000	  0.000000	diff=7.70971e-12
 -0.000000	 -0.000000	diff=8.78622e-13
  0.000000	  0.000000	diff=2.17121e-11
 -0.000000	 -0.000000	diff=5.47697e-12
  0.000000	  0.000000	diff=1.11076e-11
 -0.000000	 -0.000000	diff=5.37096e-13
  0.000000	  0.000000	diff=3.026e-18
  0.000000	 -0.000000	diff=4.13145e-19
  0.000000	  0.000000	diff=5.72615e-12
 -0.000000	 -0.000000	diff=4.28769e-14
  0.000000	  0.000000	diff=1.77297e-12
 -0.000000	 -0.000000	diff=8.93005e-12
  local_diff=4.6877e-05
# W_tgt_char{3}, [8 4]
  0.006014	  0.006014	diff=7.3832e-08
  0.000278	  0.000278	diff=7.77648e-09
  0.000000	  0.000000	diff=7.93692e-12
 -0.000000	  0.000000	diff=1.58974e-11
  0.006320	  0.006320	diff=6.5531e-08
  0.000272	  0.000272	diff=7.1944e-09
 -0.206263	 -0.206190	diff=7.28093e-05
  0.011562	  0.011548	diff=1.36841e-05
  0.002409	  0.002409	diff=1.18446e-08
  0.000111	  0.000111	diff=1.24609e-09
  0.000000	  0.000000	diff=4.37104e-12
 -0.000000	  0.000000	diff=7.49829e-12
  0.002532	  0.002532	diff=1.05204e-08
  0.000109	  0.000109	diff=1.14889e-09
 -0.082599	 -0.082587	diff=1.16838e-05
  0.004628	  0.004625	diff=2.19501e-06
 -0.000000	 -0.000000	diff=2.19402e-12
 -0.000000	 -0.000000	diff=4.24629e-12
  0.000000	 -0.000000	diff=6.21245e-18
  0.000000	 -0.000000	diff=2.55179e-19
 -0.000000	 -0.000000	diff=4.83205e-12
 -0.000000	 -0.000000	diff=4.56874e-12
  0.000000	  0.000000	diff=1.34614e-11
 -0.000000	 -0.000000	diff=3.03691e-12
  0.000000	  0.000000	diff=2.19351e-12
  0.000000	  0.000000	diff=2.59993e-12
  0.000000	  0.000000	diff=4.41708e-18
  0.000000	  0.000000	diff=1.81434e-19
  0.000000	  0.000000	diff=3.09476e-12
  0.000000	  0.000000	diff=1.08972e-11
 -0.000000	 -0.000000	diff=1.70562e-12
  0.000000	  0.000000	diff=1.36003e-11
  local_diff=0.000100551
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.273215	 -0.285104	diff=0.0118899
  0.140786	  0.137733	diff=0.00305268
  0.000000	 -0.000000	diff=2.86483e-12
  0.000000	  0.000000	diff=2.30528e-13
  0.000000	 -0.000000	diff=2.70163e-17
  0.000000	  0.000000	diff=7.12541e-19
 -0.802873	 -0.805262	diff=0.00238892
  9.315201	  9.025263	diff=0.289938
  local_diff=0.30727
# W_pos, [2 2]
 -6.459307	 -6.129605	diff=0.329703
 -0.752457	 -0.747585	diff=0.00487216
 15.448741	 17.691792	diff=2.24305
  2.410203	  2.436528	diff=0.0263249
  local_diff=2.60395
# v_pos, [1 2]
 -2.977945	 -2.930114	diff=0.0478305
 14.147688	 15.820811	diff=1.67312
  local_diff=1.72095
# W_h, [2 4]
 10.785021	 10.863698	diff=0.0786771
 -4.753735	 -4.683400	diff=0.0703354
 -6.547270	 -6.452247	diff=0.0950237
  5.049647	  5.144433	diff=0.0947853
 35.332693	 48.388154	diff=13.0555
-23.743053	-19.945588	diff=3.79746
-24.109615	-22.378892	diff=1.73072
  8.809102	  9.609482	diff=0.80038
  local_diff=19.7229
# W_soft, [5 2]
 -7.428943	 -7.429602	diff=0.000658683
 -0.447973	 -0.448388	diff=0.000414966
  5.874878	  5.872346	diff=0.00253111
  1.409506	  1.406915	diff=0.00259053
  0.599880	  0.598728	diff=0.0011522
 -9.338687	 -9.341132	diff=0.00244521
 -5.719384	 -5.721280	diff=0.00189611
  8.513708	  8.504760	diff=0.00894823
  3.363733	  3.353421	diff=0.0103126
  3.210301	  3.204232	diff=0.00606907
  local_diff=0.0370187
# Num params=396, abs_diff=3476.33
Elapsed time is 9.754607 seconds.
[?1l>