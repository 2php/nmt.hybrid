# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000010	  0.000010	diff=6.17714e-11
 -0.000011	 -0.000011	diff=6.72696e-11
  0.000004	  0.000004	diff=3.15016e-10
 -0.000003	 -0.000003	diff=2.69429e-10
  0.000000	  0.000000	diff=4.3928e-13
  0.000001	  0.000001	diff=4.75354e-12
  0.004421	  0.004421	diff=1.55788e-07
  0.006020	  0.006021	diff=9.30088e-08
 -0.000005	 -0.000005	diff=6.28422e-11
  0.000013	  0.000013	diff=1.74402e-11
 -0.000006	 -0.000006	diff=2.94658e-10
  0.000000	  0.000000	diff=4.27279e-11
 -0.000000	 -0.000000	diff=1.1015e-12
 -0.000001	 -0.000001	diff=1.29598e-12
 -0.000831	 -0.000831	diff=8.15894e-08
 -0.003179	 -0.003179	diff=4.09838e-08
 -0.000000	 -0.000000	diff=2.11932e-12
  0.000000	  0.000000	diff=2.29118e-13
 -0.000000	 -0.000000	diff=2.59559e-13
  0.000000	  0.000000	diff=4.41802e-15
  0.000000	  0.000000	diff=6.62351e-13
 -0.000000	 -0.000000	diff=4.75849e-13
 -0.000051	 -0.000051	diff=4.97827e-08
 -0.000075	 -0.000075	diff=2.70437e-11
  0.000000	  0.000000	diff=3.46346e-13
 -0.000000	 -0.000000	diff=5.79698e-13
  0.000000	  0.000000	diff=4.90412e-13
 -0.000000	 -0.000000	diff=2.13149e-13
 -0.000000	 -0.000000	diff=2.15859e-13
  0.000000	  0.000000	diff=1.96564e-14
  0.000012	  0.000012	diff=1.31192e-11
  0.000041	  0.000041	diff=3.99654e-08
  local_diff=4.62302e-07
# W_tgt{1}, [8 6]
 -0.000011	 -0.000011	diff=2.40903e-11
  0.000008	  0.000008	diff=6.29277e-11
 -0.000004	 -0.000004	diff=8.3275e-10
  0.000009	  0.000009	diff=2.96192e-10
  0.000000	  0.000000	diff=4.3047e-12
  0.000018	  0.000018	diff=2.80489e-13
 -0.003969	 -0.003969	diff=1.05323e-07
 -0.011719	 -0.011719	diff=3.27218e-08
 -0.000017	 -0.000017	diff=7.50905e-12
  0.000020	  0.000020	diff=3.55317e-11
 -0.000025	 -0.000025	diff=1.06332e-09
  0.000011	  0.000011	diff=1.28662e-09
 -0.000028	 -0.000028	diff=6.27872e-11
  0.000031	  0.000031	diff=9.20014e-12
 -0.008540	 -0.008540	diff=4.35927e-07
 -0.000826	 -0.000826	diff=3.14139e-07
 -0.000000	 -0.000000	diff=5.01594e-13
  0.000000	  0.000000	diff=5.78937e-13
 -0.000001	 -0.000001	diff=1.13911e-12
 -0.000000	 -0.000000	diff=3.4278e-13
 -0.000001	 -0.000001	diff=4.56117e-14
  0.000000	  0.000000	diff=3.65961e-13
 -0.000200	 -0.000200	diff=2.62442e-07
  0.000071	  0.000071	diff=1.39549e-08
  0.000000	  0.000000	diff=4.45994e-13
  0.000000	  0.000000	diff=8.10606e-13
  0.000000	  0.000000	diff=5.17207e-14
  0.000000	  0.000000	diff=1.96545e-13
  0.000000	  0.000000	diff=4.76632e-14
 -0.000000	 -0.000000	diff=2.93701e-13
  0.000123	  0.000123	diff=2.06469e-09
  0.000010	  0.000010	diff=1.85491e-07
 -0.000000	 -0.000000	diff=3.89233e-13
  0.000000	  0.000000	diff=2.29414e-13
 -0.000001	 -0.000001	diff=7.51087e-12
  0.000000	  0.000000	diff=1.06461e-12
 -0.000001	 -0.000001	diff=1.01553e-11
  0.000001	  0.000001	diff=5.14425e-13
 -0.000322	 -0.000321	diff=2.08661e-07
 -0.000175	 -0.000175	diff=2.39493e-08
  0.000000	  0.000000	diff=1.16091e-13
 -0.000000	 -0.000000	diff=4.31763e-13
  0.000001	  0.000001	diff=1.45715e-12
 -0.000000	 -0.000000	diff=6.29152e-13
  0.000000	  0.000000	diff=3.01951e-13
 -0.000000	 -0.000000	diff=4.29796e-13
  0.000170	  0.000170	diff=3.03361e-09
  0.000156	  0.000156	diff=2.24839e-07
  local_diff=1.81626e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001416	  0.001416	diff=2.24161e-07
  0.000149	  0.000148	diff=4.83014e-07
  0.000265	  0.000265	diff=1.04332e-07
  0.001956	  0.001955	diff=1.18718e-06
  local_diff=1.99869e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001049	  0.001049	diff=1.04602e-07
 -0.000958	 -0.000958	diff=6.36147e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003521	 -0.003520	diff=4.02644e-07
 -0.000193	 -0.000193	diff=2.0067e-07
 -0.004962	 -0.004962	diff=3.19252e-07
 -0.001412	 -0.001412	diff=3.428e-07
  local_diff=2.00611e-06
# W_soft, [5 2]
  0.007849	  0.007849	diff=6.5062e-08
  0.007849	  0.007849	diff=6.50646e-08
  0.004800	  0.004799	diff=6.50659e-08
 -0.013796	 -0.013797	diff=6.50577e-08
 -0.006701	 -0.006701	diff=6.50775e-08
 -0.002503	 -0.002503	diff=1.97754e-08
 -0.002503	 -0.002503	diff=1.97757e-08
 -0.004838	 -0.004839	diff=1.97772e-08
  0.007189	  0.007189	diff=1.97739e-08
  0.002656	  0.002656	diff=1.97791e-08
  local_diff=4.24209e-07
# Num params=110, abs_diff=6.70758e-06
Elapsed time is 0.909403 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.01201e-12
 -0.000000	 -0.000000	diff=6.35909e-13
  0.000000	  0.000000	diff=1.04485e-11
 -0.000000	 -0.000000	diff=1.67593e-12
  0.000001	  0.000001	diff=1.9472e-12
  0.000000	  0.000000	diff=1.72778e-13
 -0.000150	 -0.000150	diff=1.6814e-10
 -0.000020	 -0.000020	diff=2.66738e-10
 -0.000001	 -0.000001	diff=2.50322e-12
  0.000000	  0.000000	diff=9.02429e-13
 -0.000000	 -0.000000	diff=1.98496e-11
  0.000000	  0.000000	diff=2.57834e-12
 -0.000001	 -0.000001	diff=5.14255e-12
 -0.000000	 -0.000000	diff=1.14396e-12
  0.000218	  0.000218	diff=1.87396e-10
  0.000030	  0.000030	diff=5.61483e-10
 -0.000000	 -0.000000	diff=6.42337e-13
  0.000000	  0.000000	diff=4.63791e-13
 -0.000000	 -0.000000	diff=4.84313e-13
  0.000000	  0.000000	diff=7.00858e-13
 -0.000000	 -0.000000	diff=4.78397e-13
 -0.000000	 -0.000000	diff=1.0118e-13
  0.000004	  0.000004	diff=5.00007e-09
  0.000001	  0.000001	diff=5.07508e-12
  0.000000	  0.000000	diff=3.66703e-13
 -0.000000	 -0.000000	diff=4.97045e-14
  0.000000	  0.000000	diff=6.06628e-14
 -0.000000	 -0.000000	diff=8.31975e-13
  0.000000	  0.000000	diff=5.95507e-14
  0.000000	  0.000000	diff=5.59007e-13
 -0.000003	 -0.000003	diff=3.08146e-11
 -0.000001	 -0.000001	diff=5.66983e-10
  local_diff=6.84051e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=8.03802e-14
 -0.000000	 -0.000000	diff=9.53185e-13
 -0.000000	 -0.000000	diff=7.28831e-13
 -0.000000	 -0.000000	diff=3.31755e-14
  0.000000	  0.000000	diff=9.56569e-13
 -0.000000	 -0.000000	diff=8.66522e-14
  0.000154	  0.000154	diff=5.96133e-11
 -0.000141	 -0.000141	diff=8.25531e-11
  0.000000	  0.000000	diff=4.29653e-13
  0.000000	  0.000000	diff=3.05068e-13
  0.000000	  0.000000	diff=2.04698e-13
  0.000000	  0.000000	diff=1.31599e-13
 -0.000000	 -0.000000	diff=2.76807e-13
  0.000000	  0.000000	diff=1.29988e-13
 -0.000126	 -0.000126	diff=3.95108e-11
  0.000117	  0.000117	diff=5.44827e-11
 -0.000000	 -0.000000	diff=4.19572e-13
 -0.000000	 -0.000000	diff=2.81248e-13
 -0.000000	 -0.000000	diff=4.47843e-13
 -0.000000	 -0.000000	diff=1.26669e-13
  0.000000	  0.000000	diff=9.66914e-13
 -0.000000	 -0.000000	diff=6.50479e-13
  0.000003	  0.000003	diff=4.50443e-09
 -0.000003	 -0.000003	diff=4.91204e-14
  0.000000	  0.000000	diff=1.25299e-13
  0.000000	  0.000000	diff=7.31938e-13
  0.000000	  0.000000	diff=4.39996e-13
  0.000000	  0.000000	diff=2.79286e-13
 -0.000000	 -0.000000	diff=1.28328e-14
  0.000000	  0.000000	diff=1.31276e-12
 -0.000004	 -0.000004	diff=3.12506e-13
  0.000003	  0.000003	diff=4.67157e-09
  local_diff=9.42263e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.1358e-12
  0.000000	  0.000000	diff=7.17355e-13
 -0.000000	 -0.000000	diff=3.55204e-12
 -0.000000	 -0.000000	diff=2.5533e-12
 -0.000000	 -0.000000	diff=1.15237e-13
  0.000000	  0.000000	diff=8.5841e-13
  0.000075	  0.000075	diff=3.31281e-10
 -0.000089	 -0.000089	diff=6.88033e-10
  0.000000	  0.000000	diff=3.59578e-13
 -0.000000	 -0.000000	diff=3.93993e-13
  0.000000	  0.000000	diff=2.05753e-11
  0.000000	  0.000000	diff=1.09593e-11
  0.000000	  0.000000	diff=1.59798e-12
 -0.000000	 -0.000000	diff=8.16826e-13
 -0.000200	 -0.000200	diff=1.91575e-09
  0.000218	  0.000218	diff=1.40996e-09
 -0.000000	 -0.000000	diff=2.48619e-13
  0.000000	  0.000000	diff=6.71826e-13
  0.000000	  0.000000	diff=9.36701e-13
 -0.000000	 -0.000000	diff=2.57788e-13
  0.000000	  0.000000	diff=1.30817e-13
  0.000000	  0.000000	diff=4.0149e-15
 -0.000000	 -0.000000	diff=1.9846e-12
  0.000000	  0.000000	diff=7.72185e-15
  0.000000	  0.000000	diff=9.7026e-14
 -0.000000	 -0.000000	diff=1.07181e-13
 -0.000000	 -0.000000	diff=2.49916e-13
  0.000000	  0.000000	diff=3.32967e-13
 -0.000000	 -0.000000	diff=1.64263e-13
 -0.000000	 -0.000000	diff=3.16626e-13
  0.000000	  0.000000	diff=5.38418e-13
 -0.000000	 -0.000000	diff=5.78386e-12
  0.000000	  0.000000	diff=3.21581e-13
 -0.000000	 -0.000000	diff=2.1214e-13
  0.000000	  0.000000	diff=1.09172e-12
  0.000000	  0.000000	diff=6.37362e-13
  0.000000	  0.000000	diff=6.32383e-13
 -0.000000	 -0.000000	diff=3.52803e-13
 -0.000006	 -0.000006	diff=1.72576e-08
  0.000006	  0.000006	diff=2.70846e-10
 -0.000000	 -0.000000	diff=7.56398e-13
  0.000000	  0.000000	diff=1.32195e-12
 -0.000000	 -0.000000	diff=6.8749e-14
 -0.000000	 -0.000000	diff=1.47369e-12
 -0.000000	 -0.000000	diff=4.59041e-13
  0.000000	  0.000000	diff=3.97613e-13
  0.000003	  0.000003	diff=1.66925e-10
 -0.000003	 -0.000003	diff=4.75861e-09
  local_diff=2.68622e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=8.65635e-13
 -0.000000	 -0.000000	diff=4.34091e-13
 -0.000000	 -0.000000	diff=7.33809e-14
 -0.000000	 -0.000000	diff=1.18128e-12
 -0.000000	 -0.000000	diff=5.30703e-14
 -0.000000	 -0.000000	diff=1.62783e-13
  0.000182	  0.000182	diff=3.50528e-09
 -0.000127	 -0.000127	diff=2.63484e-09
  0.000000	  0.000000	diff=4.47805e-14
 -0.000000	 -0.000000	diff=2.77995e-14
 -0.000000	 -0.000000	diff=4.2504e-14
 -0.000000	 -0.000000	diff=8.06954e-13
 -0.000000	 -0.000000	diff=5.8054e-13
 -0.000000	 -0.000000	diff=2.58382e-13
  0.000015	  0.000015	diff=2.75182e-09
 -0.000013	 -0.000013	diff=1.13536e-09
  0.000000	  0.000000	diff=1.48656e-12
 -0.000000	 -0.000000	diff=5.3465e-13
 -0.000000	 -0.000000	diff=5.83813e-13
 -0.000000	 -0.000000	diff=8.1559e-14
 -0.000000	 -0.000000	diff=5.2296e-14
 -0.000000	 -0.000000	diff=2.16327e-13
  0.000011	  0.000011	diff=3.31133e-08
 -0.000008	 -0.000008	diff=3.27926e-10
 -0.000000	 -0.000000	diff=6.03095e-13
  0.000000	  0.000000	diff=3.68365e-13
  0.000000	  0.000000	diff=1.76702e-13
  0.000000	  0.000000	diff=2.50519e-13
  0.000000	  0.000000	diff=1.74047e-13
  0.000000	  0.000000	diff=6.5127e-13
 -0.000016	 -0.000016	diff=9.35584e-11
  0.000010	  0.000010	diff=1.98404e-08
  local_diff=6.34122e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000075	  0.000075	diff=2.82593e-08
 -0.000092	 -0.000092	diff=9.28177e-08
  0.000074	  0.000074	diff=2.53399e-08
 -0.000081	 -0.000081	diff=7.86173e-08
  local_diff=2.25034e-07
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000022	  0.000022	diff=6.25761e-08
 -0.000053	 -0.000053	diff=2.94624e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000070	 -0.000070	diff=9.6036e-08
 -0.000063	 -0.000063	diff=4.16344e-08
  0.000021	  0.000021	diff=4.15104e-08
 -0.000032	 -0.000032	diff=2.02925e-08
  local_diff=2.91512e-07
# W_soft, [5 2]
 -0.000086	 -0.000086	diff=8.19208e-12
 -0.000086	 -0.000086	diff=7.88968e-12
 -0.000024	 -0.000024	diff=8.03629e-12
  0.000187	  0.000187	diff=8.942e-12
  0.000009	  0.000009	diff=8.86197e-12
  0.000190	  0.000190	diff=3.24091e-11
  0.000190	  0.000190	diff=3.27182e-11
  0.000086	  0.000086	diff=3.28738e-11
 -0.000414	 -0.000414	diff=3.26647e-11
 -0.000051	 -0.000051	diff=3.27591e-11
  local_diff=2.05347e-10
# Num params=174, abs_diff=6.23289e-07
Elapsed time is 1.579411 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.70699e-13
  0.000000	  0.000000	diff=1.76517e-13
  0.000000	  0.000000	diff=1.4175e-11
  0.000000	  0.000000	diff=1.21093e-12
  0.000000	  0.000000	diff=2.94252e-12
  0.000000	  0.000000	diff=3.72169e-13
 -0.000088	 -0.000088	diff=9.05964e-10
  0.000004	  0.000004	diff=3.24596e-11
 -0.000000	 -0.000000	diff=1.47084e-12
  0.000000	  0.000000	diff=3.51307e-13
 -0.000000	 -0.000000	diff=2.88642e-11
  0.000000	  0.000000	diff=2.9091e-12
 -0.000000	 -0.000000	diff=4.0228e-12
 -0.000000	 -0.000000	diff=1.74188e-12
  0.000076	  0.000076	diff=1.09826e-09
  0.000034	  0.000034	diff=7.39404e-10
 -0.000000	 -0.000000	diff=5.59183e-13
  0.000000	  0.000000	diff=1.05866e-13
 -0.000000	 -0.000000	diff=1.89004e-13
  0.000000	  0.000000	diff=5.61954e-13
 -0.000000	 -0.000000	diff=1.62299e-13
 -0.000000	 -0.000000	diff=2.25475e-13
  0.000002	  0.000002	diff=4.92705e-09
  0.000000	  0.000000	diff=6.29919e-12
  0.000000	  0.000000	diff=1.48164e-12
 -0.000000	 -0.000000	diff=7.9407e-13
  0.000000	  0.000000	diff=9.11813e-14
 -0.000000	 -0.000000	diff=1.78877e-13
  0.000000	  0.000000	diff=1.18734e-13
  0.000000	  0.000000	diff=6.98045e-13
 -0.000002	 -0.000002	diff=3.65579e-11
 -0.000001	 -0.000001	diff=4.20082e-10
  local_diff=8.23016e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.39122e-13
 -0.000000	 -0.000000	diff=8.35316e-13
 -0.000000	 -0.000000	diff=7.53571e-13
 -0.000000	 -0.000000	diff=1.04244e-13
  0.000000	  0.000000	diff=7.26414e-15
 -0.000000	 -0.000000	diff=3.27244e-13
  0.000111	  0.000111	diff=7.47341e-11
 -0.000035	 -0.000035	diff=4.90506e-11
  0.000000	  0.000000	diff=3.64479e-13
  0.000000	  0.000000	diff=9.94459e-14
  0.000000	  0.000000	diff=9.29944e-13
  0.000000	  0.000000	diff=5.39092e-13
 -0.000000	 -0.000000	diff=1.08016e-13
  0.000000	  0.000000	diff=2.46041e-13
 -0.000163	 -0.000163	diff=7.90881e-11
  0.000135	  0.000135	diff=9.3633e-11
 -0.000000	 -0.000000	diff=1.15611e-13
 -0.000000	 -0.000000	diff=6.17457e-13
 -0.000000	 -0.000000	diff=2.26721e-13
 -0.000000	 -0.000000	diff=2.51084e-13
  0.000000	  0.000000	diff=7.79556e-13
 -0.000000	 -0.000000	diff=5.86092e-13
  0.000003	  0.000003	diff=4.91467e-09
 -0.000001	 -0.000001	diff=6.2867e-13
  0.000000	  0.000000	diff=1.39697e-13
  0.000000	  0.000000	diff=9.37538e-13
  0.000000	  0.000000	diff=4.67156e-14
  0.000000	  0.000000	diff=3.52655e-13
 -0.000000	 -0.000000	diff=2.00908e-13
  0.000000	  0.000000	diff=1.70998e-13
 -0.000004	 -0.000004	diff=8.47843e-13
  0.000002	  0.000002	diff=4.77479e-09
  local_diff=9.99663e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.59023e-13
  0.000000	  0.000000	diff=2.58292e-13
 -0.000000	 -0.000000	diff=3.58941e-12
 -0.000000	 -0.000000	diff=4.98908e-12
 -0.000000	 -0.000000	diff=1.00825e-12
  0.000000	  0.000000	diff=3.37876e-14
  0.000042	  0.000042	diff=2.90536e-10
 -0.000112	 -0.000112	diff=1.38789e-09
  0.000000	  0.000000	diff=5.45505e-13
 -0.000000	 -0.000000	diff=1.89052e-12
  0.000000	  0.000000	diff=2.94054e-11
  0.000000	  0.000000	diff=2.19001e-11
  0.000000	  0.000000	diff=1.73231e-12
 -0.000000	 -0.000000	diff=4.31294e-13
 -0.000158	 -0.000158	diff=2.53594e-09
  0.000233	  0.000233	diff=1.98497e-09
 -0.000000	 -0.000000	diff=2.98429e-13
  0.000000	  0.000000	diff=9.2267e-14
  0.000000	  0.000000	diff=3.69807e-13
 -0.000000	 -0.000000	diff=8.34184e-13
  0.000000	  0.000000	diff=9.33658e-13
  0.000000	  0.000000	diff=1.59363e-13
 -0.000000	 -0.000000	diff=1.21301e-12
  0.000000	  0.000000	diff=3.80376e-13
  0.000000	  0.000000	diff=1.52892e-13
 -0.000000	 -0.000000	diff=1.60575e-13
 -0.000000	 -0.000000	diff=5.20818e-13
  0.000000	  0.000000	diff=8.54171e-14
 -0.000000	 -0.000000	diff=1.17125e-12
  0.000000	  0.000000	diff=8.69386e-13
  0.000000	  0.000000	diff=1.38672e-13
 -0.000000	 -0.000000	diff=9.15253e-12
  0.000000	  0.000000	diff=4.43923e-13
 -0.000000	 -0.000000	diff=8.00218e-14
  0.000000	  0.000000	diff=1.96003e-13
  0.000000	  0.000000	diff=4.49582e-13
  0.000000	  0.000000	diff=2.4237e-13
 -0.000000	 -0.000000	diff=4.30746e-13
 -0.000004	 -0.000004	diff=1.16943e-08
  0.000005	  0.000005	diff=3.52506e-10
 -0.000000	 -0.000000	diff=9.6141e-14
  0.000000	  0.000000	diff=9.16034e-14
 -0.000000	 -0.000000	diff=5.0626e-14
 -0.000000	 -0.000000	diff=4.09526e-13
 -0.000000	 -0.000000	diff=1.91686e-13
  0.000000	  0.000000	diff=2.76682e-13
  0.000002	  0.000002	diff=1.09243e-10
 -0.000004	 -0.000004	diff=6.36185e-09
  local_diff=2.48032e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.01695e-12
 -0.000000	 -0.000000	diff=2.79277e-13
 -0.000000	 -0.000000	diff=4.14675e-13
 -0.000000	 -0.000000	diff=9.96538e-13
 -0.000000	 -0.000000	diff=1.59943e-13
 -0.000000	 -0.000000	diff=5.17265e-13
  0.000104	  0.000104	diff=2.3385e-09
  0.000012	  0.000012	diff=2.40086e-09
  0.000000	  0.000000	diff=2.45358e-13
 -0.000000	 -0.000000	diff=2.4845e-13
 -0.000000	 -0.000000	diff=5.49966e-13
 -0.000000	 -0.000000	diff=8.73966e-13
 -0.000000	 -0.000000	diff=1.00127e-13
 -0.000000	 -0.000000	diff=4.30607e-13
  0.000022	  0.000022	diff=4.77782e-09
 -0.000020	 -0.000020	diff=2.2462e-09
  0.000000	  0.000000	diff=1.13921e-13
  0.000000	  0.000000	diff=7.60806e-13
 -0.000000	 -0.000000	diff=1.66555e-13
 -0.000000	 -0.000000	diff=7.03774e-13
 -0.000000	 -0.000000	diff=5.38458e-13
 -0.000000	 -0.000000	diff=5.65232e-13
  0.000009	  0.000009	diff=2.80555e-08
 -0.000003	 -0.000003	diff=2.42601e-10
 -0.000000	 -0.000000	diff=1.4268e-12
  0.000000	  0.000000	diff=2.62208e-13
  0.000000	  0.000000	diff=3.31084e-13
  0.000000	  0.000000	diff=6.06037e-13
  0.000000	  0.000000	diff=2.41643e-13
  0.000000	  0.000000	diff=1.45481e-13
 -0.000015	 -0.000015	diff=7.61084e-11
  0.000005	  0.000005	diff=1.60776e-08
  local_diff=5.62269e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=1.72009e-08
 -0.000014	 -0.000014	diff=4.22729e-08
  0.000062	  0.000062	diff=2.32496e-08
 -0.000020	 -0.000020	diff=1.66708e-08
  local_diff=9.93941e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000107	  0.000107	diff=5.82653e-08
 -0.000042	 -0.000042	diff=2.80125e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=8.8686e-08
 -0.000040	 -0.000040	diff=2.87379e-08
  0.000068	  0.000068	diff=5.73714e-08
 -0.000034	 -0.000034	diff=2.63123e-08
  local_diff=2.87385e-07
# W_soft, [5 2]
 -0.000090	 -0.000090	diff=1.29046e-11
 -0.000090	 -0.000090	diff=1.25565e-11
 -0.000013	 -0.000013	diff=1.19156e-11
  0.000150	  0.000150	diff=1.24629e-11
  0.000042	  0.000042	diff=1.26882e-11
  0.000192	  0.000192	diff=4.55799e-11
  0.000192	  0.000192	diff=4.60538e-11
  0.000090	  0.000090	diff=4.51997e-11
 -0.000352	 -0.000352	diff=4.58334e-11
 -0.000122	 -0.000122	diff=4.54174e-11
  local_diff=2.90612e-10
# Num params=174, abs_diff=4.86327e-07
Elapsed time is 1.564631 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=7.30558e-13
 -0.000000	 -0.000000	diff=3.53748e-13
  0.000000	  0.000000	diff=8.56072e-14
 -0.000000	 -0.000000	diff=1.44345e-13
  0.000000	  0.000000	diff=3.78059e-13
  0.000000	  0.000000	diff=3.83548e-13
 -0.000003	 -0.000003	diff=3.37658e-11
 -0.000000	 -0.000000	diff=6.41082e-12
 -0.000000	 -0.000000	diff=9.21766e-13
  0.000000	  0.000000	diff=5.76396e-14
 -0.000000	 -0.000000	diff=4.87555e-13
  0.000000	  0.000000	diff=5.64176e-13
 -0.000000	 -0.000000	diff=4.97767e-13
 -0.000000	 -0.000000	diff=1.12706e-12
  0.000004	  0.000004	diff=4.04121e-11
  0.000002	  0.000002	diff=5.44747e-11
 -0.000000	 -0.000000	diff=5.42168e-13
  0.000000	  0.000000	diff=1.00129e-12
 -0.000000	 -0.000000	diff=2.59726e-13
  0.000000	  0.000000	diff=1.53424e-13
 -0.000000	 -0.000000	diff=1.38418e-13
 -0.000000	 -0.000000	diff=4.62475e-15
  0.000000	  0.000000	diff=9.0896e-11
  0.000000	  0.000000	diff=2.90327e-13
  0.000000	  0.000000	diff=9.04114e-13
 -0.000000	 -0.000000	diff=4.81035e-13
  0.000000	  0.000000	diff=2.44186e-13
 -0.000000	 -0.000000	diff=3.44238e-13
  0.000000	  0.000000	diff=2.17695e-13
  0.000000	  0.000000	diff=2.37221e-13
 -0.000000	 -0.000000	diff=6.16539e-13
 -0.000000	 -0.000000	diff=2.32895e-11
  local_diff=2.60416e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.7514e-13
 -0.000000	 -0.000000	diff=3.02987e-13
  0.000000	  0.000000	diff=4.46729e-13
 -0.000000	 -0.000000	diff=3.59273e-13
 -0.000000	 -0.000000	diff=8.70494e-13
 -0.000000	 -0.000000	diff=2.31972e-13
 -0.000002	 -0.000002	diff=2.82919e-13
 -0.000006	 -0.000006	diff=1.97732e-12
 -0.000000	 -0.000000	diff=3.3135e-13
  0.000000	  0.000000	diff=4.87588e-14
 -0.000000	 -0.000000	diff=2.27483e-13
  0.000000	  0.000000	diff=1.77047e-13
  0.000000	  0.000000	diff=6.6402e-13
  0.000000	  0.000000	diff=2.7252e-13
  0.000003	  0.000003	diff=1.94957e-13
  0.000007	  0.000007	diff=2.92656e-12
  0.000000	  0.000000	diff=1.02665e-12
 -0.000000	 -0.000000	diff=6.36301e-13
  0.000000	  0.000000	diff=5.55065e-13
 -0.000000	 -0.000000	diff=4.44166e-13
  0.000000	 -0.000000	diff=2.67035e-13
 -0.000000	 -0.000000	diff=3.52227e-13
 -0.000000	 -0.000000	diff=6.1593e-11
 -0.000000	 -0.000000	diff=1.19263e-12
 -0.000000	 -0.000000	diff=8.24502e-13
  0.000000	  0.000000	diff=4.84766e-13
 -0.000000	 -0.000000	diff=2.13293e-13
  0.000000	  0.000000	diff=3.1948e-13
  0.000000	  0.000000	diff=3.27929e-13
  0.000000	  0.000000	diff=1.1748e-12
  0.000000	  0.000000	diff=5.73847e-13
  0.000000	  0.000000	diff=1.78847e-10
  local_diff=2.58322e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.97487e-13
  0.000000	  0.000000	diff=3.86632e-15
 -0.000000	 -0.000000	diff=7.84031e-14
 -0.000000	 -0.000000	diff=1.45211e-12
  0.000000	  0.000000	diff=3.70046e-13
  0.000000	  0.000000	diff=1.50397e-13
  0.000000	  0.000000	diff=5.66907e-13
 -0.000007	 -0.000007	diff=4.81789e-11
 -0.000000	 -0.000000	diff=8.82906e-13
 -0.000000	 -0.000000	diff=9.15281e-13
  0.000000	  0.000000	diff=4.51061e-13
  0.000000	  0.000000	diff=1.41721e-12
 -0.000000	 -0.000000	diff=6.23775e-13
 -0.000000	 -0.000000	diff=6.99282e-13
 -0.000001	 -0.000001	diff=3.5108e-11
  0.000002	  0.000002	diff=1.66585e-10
  0.000000	  0.000000	diff=1.20105e-13
  0.000000	  0.000000	diff=1.79657e-13
  0.000000	 -0.000000	diff=2.43903e-13
  0.000000	  0.000000	diff=1.43603e-13
  0.000000	 -0.000000	diff=9.87865e-14
  0.000000	  0.000000	diff=3.11676e-13
  0.000000	  0.000000	diff=8.00094e-13
  0.000000	  0.000000	diff=1.29474e-12
  0.000000	  0.000000	diff=4.14207e-14
  0.000000	  0.000000	diff=8.14659e-14
  0.000000	 -0.000000	diff=8.17104e-14
  0.000000	  0.000000	diff=2.76634e-14
  0.000000	 -0.000000	diff=2.3187e-14
  0.000000	  0.000000	diff=8.63972e-14
  0.000000	  0.000000	diff=9.24202e-13
  0.000000	  0.000000	diff=1.01171e-12
 -0.000000	 -0.000000	diff=4.19603e-13
 -0.000000	 -0.000000	diff=1.06285e-13
  0.000000	  0.000000	diff=3.61493e-13
  0.000000	  0.000000	diff=3.43733e-14
 -0.000000	 -0.000000	diff=6.99114e-13
 -0.000000	 -0.000000	diff=1.18094e-13
 -0.000000	 -0.000000	diff=2.26806e-10
  0.000000	  0.000000	diff=3.42172e-11
 -0.000000	 -0.000000	diff=2.26795e-13
  0.000000	  0.000000	diff=7.51944e-13
 -0.000000	 -0.000000	diff=3.20696e-13
 -0.000000	 -0.000000	diff=1.34944e-12
  0.000000	  0.000000	diff=5.41022e-13
  0.000000	  0.000000	diff=7.34384e-14
  0.000000	  0.000000	diff=3.03559e-12
 -0.000000	 -0.000000	diff=2.02638e-10
  local_diff=7.3545e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.5559e-13
  0.000000	  0.000000	diff=3.18992e-13
  0.000000	  0.000000	diff=5.47194e-13
 -0.000000	 -0.000000	diff=9.14147e-13
  0.000000	  0.000000	diff=4.42876e-13
 -0.000000	 -0.000000	diff=3.93039e-13
 -0.000001	 -0.000001	diff=5.15393e-13
 -0.000004	 -0.000004	diff=5.63686e-12
  0.000000	  0.000000	diff=5.52836e-13
 -0.000000	 -0.000000	diff=1.91588e-13
 -0.000000	 -0.000000	diff=1.2746e-13
 -0.000000	 -0.000000	diff=2.92164e-13
 -0.000000	 -0.000000	diff=5.41141e-13
 -0.000000	 -0.000000	diff=2.09824e-14
 -0.000001	 -0.000001	diff=2.46439e-13
 -0.000002	 -0.000002	diff=5.36453e-13
 -0.000000	 -0.000000	diff=5.33346e-13
  0.000000	 -0.000000	diff=8.32935e-13
  0.000000	  0.000000	diff=8.62117e-13
 -0.000000	 -0.000000	diff=1.10782e-13
  0.000000	  0.000000	diff=2.54097e-13
 -0.000000	 -0.000000	diff=1.85759e-13
 -0.000000	 -0.000000	diff=4.1172e-10
 -0.000000	 -0.000000	diff=1.92156e-11
  0.000000	  0.000000	diff=4.67402e-13
  0.000000	  0.000000	diff=5.11687e-14
 -0.000000	 -0.000000	diff=2.95164e-13
  0.000000	  0.000000	diff=1.34745e-12
 -0.000000	 -0.000000	diff=1.36341e-13
  0.000000	  0.000000	diff=5.12304e-13
  0.000000	  0.000000	diff=2.59125e-12
  0.000000	  0.000000	diff=8.46193e-10
  local_diff=1.29684e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=6.29923e-10
 -0.000001	 -0.000001	diff=7.67336e-10
  0.000001	  0.000001	diff=6.90255e-10
 -0.000000	 -0.000000	diff=1.07011e-09
  local_diff=3.15762e-09
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=6.89482e-10
 -0.000000	 -0.000000	diff=8.65476e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000007	 -0.000007	diff=2.33954e-09
 -0.000001	 -0.000001	diff=6.92286e-10
 -0.000009	 -0.000009	diff=1.1099e-09
 -0.000000	 -0.000000	diff=2.59277e-10
  local_diff=5.17703e-09
# W_h, [2 4]
  0.000000	  0.000000	diff=2.03784e-12
 -0.000004	 -0.000004	diff=1.86989e-12
  0.000000	  0.000000	diff=2.16946e-12
  0.000004	  0.000004	diff=1.29881e-12
 -0.000003	 -0.000003	diff=8.35499e-12
  0.000001	  0.000001	diff=2.41188e-12
  0.000011	  0.000011	diff=8.07261e-11
 -0.000001	 -0.000001	diff=3.27002e-11
  local_diff=1.31569e-10
# W_soft, [5 2]
  0.000031	  0.000031	diff=1.22578e-12
  0.000031	  0.000031	diff=1.50155e-12
 -0.000005	 -0.000005	diff=2.14331e-12
 -0.000037	 -0.000037	diff=1.86112e-12
 -0.000020	 -0.000020	diff=1.79475e-12
  0.000024	  0.000024	diff=1.45646e-12
  0.000024	  0.000024	diff=1.02927e-12
 -0.000009	 -0.000009	diff=8.32395e-13
 -0.000027	 -0.000027	diff=1.32863e-12
 -0.000012	 -0.000012	diff=1.74813e-12
  local_diff=1.49214e-11
# Num params=182, abs_diff=1.10322e-08
Elapsed time is 3.029331 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.31621e-12
  0.000000	  0.000000	diff=5.52343e-13
  0.000000	  0.000000	diff=9.34988e-13
  0.000000	  0.000000	diff=4.50825e-13
  0.000000	  0.000000	diff=3.72512e-13
  0.000000	  0.000000	diff=1.98733e-13
 -0.000011	 -0.000011	diff=8.84253e-11
  0.000007	  0.000007	diff=8.7564e-11
 -0.000000	 -0.000000	diff=2.03204e-13
 -0.000000	 -0.000000	diff=1.03148e-12
 -0.000000	 -0.000000	diff=7.38361e-13
 -0.000000	 -0.000000	diff=1.78631e-12
 -0.000000	 -0.000000	diff=2.61349e-13
 -0.000000	 -0.000000	diff=3.06462e-13
  0.000016	  0.000016	diff=1.94511e-10
 -0.000015	 -0.000015	diff=2.57379e-10
 -0.000000	 -0.000000	diff=3.34199e-13
 -0.000000	 -0.000000	diff=7.65688e-13
 -0.000000	 -0.000000	diff=3.31081e-14
 -0.000000	 -0.000000	diff=6.6221e-13
 -0.000000	 -0.000000	diff=3.27686e-13
  0.000000	  0.000000	diff=8.45683e-14
  0.000000	  0.000000	diff=1.03373e-10
 -0.000000	 -0.000000	diff=8.36996e-13
  0.000000	  0.000000	diff=1.29982e-12
  0.000000	  0.000000	diff=2.74183e-13
  0.000000	  0.000000	diff=3.98802e-14
  0.000000	  0.000000	diff=2.93106e-13
  0.000000	  0.000000	diff=3.41689e-13
  0.000000	  0.000000	diff=2.37731e-13
 -0.000000	 -0.000000	diff=2.79537e-13
  0.000000	  0.000000	diff=3.90692e-10
  local_diff=1.13591e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.03599e-13
  0.000000	  0.000000	diff=5.17043e-13
 -0.000000	 -0.000000	diff=5.29157e-13
  0.000000	  0.000000	diff=4.75126e-13
 -0.000000	 -0.000000	diff=1.037e-12
 -0.000000	 -0.000000	diff=5.83128e-14
  0.000034	  0.000034	diff=9.90651e-12
  0.000007	  0.000007	diff=6.08391e-12
  0.000000	  0.000000	diff=3.49285e-13
 -0.000000	 -0.000000	diff=6.67091e-13
  0.000000	  0.000000	diff=5.39419e-13
 -0.000000	 -0.000000	diff=4.29655e-13
  0.000000	  0.000000	diff=1.21428e-13
  0.000000	  0.000000	diff=2.00178e-13
 -0.000039	 -0.000039	diff=8.96773e-12
 -0.000008	 -0.000008	diff=5.56894e-12
 -0.000000	 -0.000000	diff=1.21721e-12
  0.000000	  0.000000	diff=1.19084e-12
 -0.000000	 -0.000000	diff=4.70931e-13
  0.000000	  0.000000	diff=2.05496e-13
 -0.000000	 -0.000000	diff=1.17678e-12
 -0.000000	 -0.000000	diff=2.47211e-13
  0.000001	  0.000001	diff=3.98049e-10
  0.000000	  0.000000	diff=1.0367e-13
  0.000000	  0.000000	diff=1.08783e-12
 -0.000000	 -0.000000	diff=7.97024e-14
  0.000000	  0.000000	diff=4.48404e-13
 -0.000000	 -0.000000	diff=3.00847e-13
  0.000000	  0.000000	diff=6.25214e-13
  0.000000	  0.000000	diff=2.24392e-13
 -0.000001	 -0.000001	diff=2.11553e-13
 -0.000000	 -0.000000	diff=1.73813e-10
  local_diff=6.15407e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.69408e-13
 -0.000000	 -0.000000	diff=3.54196e-13
 -0.000000	 -0.000000	diff=9.29245e-13
  0.000000	  0.000000	diff=5.75577e-13
 -0.000000	 -0.000000	diff=6.72091e-14
 -0.000000	 -0.000000	diff=4.00273e-13
  0.000008	  0.000008	diff=3.87779e-11
  0.000009	  0.000009	diff=5.28238e-11
  0.000000	  0.000000	diff=8.30622e-13
  0.000000	  0.000000	diff=6.64333e-13
  0.000000	  0.000000	diff=2.03377e-12
 -0.000000	 -0.000000	diff=2.54673e-12
  0.000000	  0.000000	diff=4.05248e-13
  0.000000	  0.000000	diff=4.07635e-13
 -0.000011	 -0.000011	diff=1.48571e-10
 -0.000016	 -0.000016	diff=1.13949e-07
  0.000000	 -0.000000	diff=9.2997e-13
  0.000000	 -0.000000	diff=1.30477e-13
  0.000000	  0.000000	diff=9.94296e-13
  0.000000	 -0.000000	diff=1.16394e-13
  0.000000	  0.000000	diff=6.93982e-14
  0.000000	 -0.000000	diff=9.2571e-13
 -0.000000	 -0.000000	diff=1.7322e-14
 -0.000000	 -0.000000	diff=5.19932e-13
  0.000000	  0.000000	diff=7.9129e-15
  0.000000	 -0.000000	diff=4.87123e-15
 -0.000000	 -0.000000	diff=6.03213e-13
  0.000000	  0.000000	diff=6.35027e-13
  0.000000	 -0.000000	diff=9.33646e-14
  0.000000	  0.000000	diff=6.0571e-14
 -0.000000	 -0.000000	diff=1.33303e-12
 -0.000000	 -0.000000	diff=9.28898e-14
  0.000000	  0.000000	diff=5.3017e-13
  0.000000	  0.000000	diff=5.80599e-13
  0.000000	  0.000000	diff=7.84909e-13
 -0.000000	 -0.000000	diff=5.71754e-13
  0.000000	  0.000000	diff=8.22481e-13
 -0.000000	 -0.000000	diff=2.4971e-13
 -0.000001	 -0.000001	diff=1.4325e-09
 -0.000001	 -0.000001	diff=1.32523e-11
 -0.000000	 -0.000000	diff=6.48839e-13
 -0.000000	 -0.000000	diff=3.11391e-13
 -0.000000	 -0.000000	diff=3.6093e-14
  0.000000	  0.000000	diff=2.43318e-13
 -0.000000	 -0.000000	diff=3.64625e-13
  0.000000	  0.000000	diff=5.21646e-14
  0.000000	  0.000000	diff=9.16542e-12
  0.000001	  0.000001	diff=1.29954e-09
  local_diff=1.16965e-07
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.13942e-12
 -0.000000	 -0.000000	diff=7.13161e-13
 -0.000000	 -0.000000	diff=9.3051e-13
  0.000000	  0.000000	diff=1.00736e-12
 -0.000000	 -0.000000	diff=3.93491e-13
  0.000000	  0.000000	diff=1.80987e-13
  0.000032	  0.000032	diff=2.59374e-11
  0.000012	  0.000012	diff=8.02837e-12
  0.000000	  0.000000	diff=7.17968e-13
  0.000000	  0.000000	diff=1.41022e-13
 -0.000000	 -0.000000	diff=9.14003e-13
  0.000000	  0.000000	diff=1.83987e-13
 -0.000000	 -0.000000	diff=1.0263e-12
  0.000000	  0.000000	diff=7.45756e-13
 -0.000005	 -0.000005	diff=5.90308e-11
 -0.000002	 -0.000002	diff=7.37449e-12
  0.000000	  0.000000	diff=1.03869e-12
 -0.000000	 -0.000000	diff=7.83274e-13
 -0.000000	 -0.000000	diff=6.64925e-13
  0.000000	  0.000000	diff=1.02934e-13
 -0.000000	 -0.000000	diff=4.27355e-13
  0.000000	  0.000000	diff=7.87749e-13
  0.000001	  0.000001	diff=4.32714e-09
  0.000001	  0.000001	diff=1.53376e-11
 -0.000000	 -0.000000	diff=8.76852e-14
  0.000000	  0.000000	diff=4.95516e-13
  0.000000	  0.000000	diff=9.04981e-14
 -0.000000	 -0.000000	diff=5.61283e-13
  0.000000	  0.000000	diff=3.56602e-13
 -0.000000	 -0.000000	diff=6.54929e-14
 -0.000002	 -0.000002	diff=8.23861e-12
 -0.000001	 -0.000001	diff=2.08975e-09
  local_diff=6.55439e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=3.9544e-09
 -0.000017	 -0.000017	diff=1.69924e-08
  0.000007	  0.000007	diff=4.10764e-09
 -0.000015	 -0.000015	diff=1.58593e-08
  local_diff=4.09138e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.1248e-09
 -0.000003	 -0.000003	diff=2.18218e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.7246e-09
 -0.000002	 -0.000002	diff=1.66293e-09
 -0.000017	 -0.000017	diff=4.92777e-09
 -0.000001	 -0.000001	diff=1.11169e-09
  local_diff=1.5734e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=4.06858e-13
  0.000000	 -0.000000	diff=2.55439e-13
 -0.000000	 -0.000000	diff=3.45152e-14
  0.000000	  0.000000	diff=1.41914e-13
  local_diff=8.38726e-13
# v_pos, [1 2]
 -0.000000	 -0.000000	diff=7.59412e-13
 -0.000000	 -0.000000	diff=7.73219e-13
  local_diff=1.53263e-12
# W_h, [2 4]
  0.000023	  0.000023	diff=7.69881e-13
  0.000008	  0.000008	diff=1.07702e-13
 -0.000029	 -0.000029	diff=3.00442e-13
 -0.000010	 -0.000010	diff=1.55489e-14
  0.000013	  0.000013	diff=2.43289e-11
  0.000006	  0.000006	diff=2.95409e-13
 -0.000026	 -0.000026	diff=2.0875e-10
 -0.000014	 -0.000014	diff=1.84212e-11
  local_diff=2.52989e-10
# W_soft, [5 2]
 -0.000019	 -0.000019	diff=1.75008e-14
 -0.000019	 -0.000019	diff=5.77963e-13
  0.000008	  0.000008	diff=1.73708e-13
  0.000010	  0.000010	diff=1.36757e-13
  0.000020	  0.000020	diff=5.50159e-13
  0.000020	  0.000020	diff=2.72884e-13
  0.000020	  0.000020	diff=3.89366e-13
 -0.000005	 -0.000005	diff=5.23371e-13
 -0.000012	 -0.000012	diff=1.02778e-12
 -0.000022	 -0.000022	diff=8.17765e-14
  local_diff=3.75127e-12
# Num params=188, abs_diff=1.82177e-07
Elapsed time is 3.220158 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.2309e-12
 -0.000000	 -0.000000	diff=1.57639e-13
  0.000000	  0.000000	diff=2.6477e-12
 -0.000000	 -0.000000	diff=2.32505e-13
  0.000000	  0.000000	diff=1.02203e-13
  0.000000	  0.000000	diff=9.59383e-13
 -0.000019	 -0.000019	diff=3.89113e-11
 -0.000002	 -0.000002	diff=2.97361e-11
 -0.000000	 -0.000000	diff=1.7536e-13
  0.000000	  0.000000	diff=3.94897e-13
 -0.000000	 -0.000000	diff=1.49506e-12
  0.000000	  0.000000	diff=1.38769e-12
 -0.000000	 -0.000000	diff=4.84221e-13
 -0.000000	 -0.000000	diff=9.87191e-13
  0.000027	  0.000027	diff=8.60279e-11
  0.000006	  0.000006	diff=1.4218e-10
 -0.000000	 -0.000000	diff=1.0081e-12
  0.000000	  0.000000	diff=2.09958e-13
 -0.000000	 -0.000000	diff=1.24091e-12
  0.000000	  0.000000	diff=7.12224e-13
 -0.000000	 -0.000000	diff=9.345e-13
 -0.000000	 -0.000000	diff=1.5165e-13
  0.000000	  0.000000	diff=4.90604e-10
  0.000000	  0.000000	diff=5.52801e-13
  0.000000	  0.000000	diff=1.13917e-13
 -0.000000	 -0.000000	diff=2.69282e-13
  0.000000	  0.000000	diff=8.53703e-13
 -0.000000	 -0.000000	diff=7.33568e-13
  0.000000	  0.000000	diff=3.90127e-13
  0.000000	  0.000000	diff=8.9383e-13
 -0.000000	 -0.000000	diff=2.07015e-12
 -0.000000	 -0.000000	diff=2.18159e-10
  local_diff=1.02601e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=7.99871e-13
 -0.000000	 -0.000000	diff=6.88909e-13
  0.000000	  0.000000	diff=2.3206e-13
 -0.000000	 -0.000000	diff=9.26583e-13
 -0.000000	 -0.000000	diff=4.717e-13
 -0.000000	 -0.000000	diff=3.08333e-13
 -0.000011	 -0.000011	diff=5.30776e-12
 -0.000031	 -0.000031	diff=2.68974e-12
 -0.000000	 -0.000000	diff=4.46151e-13
  0.000000	  0.000000	diff=4.27714e-13
 -0.000000	 -0.000000	diff=6.04165e-13
  0.000000	  0.000000	diff=1.06084e-12
  0.000000	  0.000000	diff=5.77611e-13
  0.000000	  0.000000	diff=1.54805e-12
  0.000012	  0.000012	diff=3.85542e-12
  0.000035	  0.000035	diff=4.97097e-14
  0.000000	  0.000000	diff=8.23883e-13
 -0.000000	 -0.000000	diff=7.82645e-13
  0.000000	  0.000000	diff=4.80994e-13
 -0.000000	 -0.000000	diff=5.45734e-13
 -0.000000	 -0.000000	diff=3.47792e-13
 -0.000000	 -0.000000	diff=9.6984e-13
 -0.000000	 -0.000000	diff=3.03965e-10
 -0.000001	 -0.000001	diff=4.11468e-14
 -0.000000	 -0.000000	diff=3.6524e-13
  0.000000	  0.000000	diff=7.98009e-14
 -0.000000	 -0.000000	diff=1.48163e-13
  0.000000	  0.000000	diff=9.56211e-13
  0.000000	  0.000000	diff=1.572e-12
  0.000000	  0.000000	diff=6.76652e-13
  0.000000	  0.000000	diff=1.21539e-13
  0.000001	  0.000001	diff=7.32265e-10
  local_diff=1.06414e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.48229e-13
  0.000000	  0.000000	diff=1.05382e-12
  0.000000	  0.000000	diff=7.17694e-14
 -0.000000	 -0.000000	diff=2.89912e-13
  0.000000	  0.000000	diff=4.59649e-13
  0.000000	  0.000000	diff=1.47605e-12
 -0.000004	 -0.000004	diff=3.06655e-11
 -0.000014	 -0.000014	diff=8.67397e-11
 -0.000000	 -0.000000	diff=1.11918e-12
 -0.000000	 -0.000000	diff=8.24279e-13
 -0.000000	 -0.000000	diff=9.06094e-13
  0.000000	  0.000000	diff=6.71648e-12
 -0.000000	 -0.000000	diff=3.46381e-13
 -0.000000	 -0.000000	diff=8.78578e-13
  0.000011	  0.000011	diff=1.8881e-10
  0.000051	  0.000051	diff=5.86157e-11
 -0.000000	 -0.000000	diff=1.17611e-12
  0.000000	 -0.000000	diff=4.17005e-13
  0.000000	  0.000000	diff=9.44246e-13
  0.000000	 -0.000000	diff=6.80654e-14
  0.000000	  0.000000	diff=8.41557e-13
 -0.000000	 -0.000000	diff=9.03374e-13
 -0.000000	 -0.000000	diff=4.63123e-13
 -0.000000	 -0.000000	diff=3.29304e-13
  0.000000	 -0.000000	diff=3.45388e-14
  0.000000	 -0.000000	diff=8.78721e-14
  0.000000	 -0.000000	diff=7.18203e-15
  0.000000	  0.000000	diff=5.05752e-14
  0.000000	 -0.000000	diff=3.69317e-14
  0.000000	 -0.000000	diff=7.55868e-13
 -0.000000	 -0.000000	diff=2.47048e-13
 -0.000000	 -0.000000	diff=1.01103e-12
 -0.000000	 -0.000000	diff=5.27165e-13
 -0.000000	 -0.000000	diff=6.87187e-13
 -0.000000	 -0.000000	diff=8.28824e-13
  0.000000	  0.000000	diff=5.24819e-13
 -0.000000	 -0.000000	diff=1.0098e-12
  0.000000	  0.000000	diff=1.21192e-12
  0.000000	  0.000000	diff=7.23633e-10
  0.000001	  0.000001	diff=8.15818e-11
  0.000000	  0.000000	diff=1.7469e-13
  0.000000	  0.000000	diff=1.32867e-12
  0.000000	  0.000000	diff=3.06473e-13
 -0.000000	 -0.000000	diff=4.38738e-13
  0.000000	  0.000000	diff=6.81803e-14
 -0.000000	 -0.000000	diff=1.40311e-13
 -0.000000	 -0.000000	diff=5.61944e-12
 -0.000001	 -0.000001	diff=2.08168e-09
  local_diff=3.28646e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=5.9455e-13
  0.000000	  0.000000	diff=1.07781e-12
  0.000000	  0.000000	diff=1.29619e-12
 -0.000000	 -0.000000	diff=4.74204e-15
  0.000000	  0.000000	diff=8.94596e-13
 -0.000000	 -0.000000	diff=3.23382e-13
 -0.000013	 -0.000013	diff=1.93341e-11
 -0.000008	 -0.000008	diff=2.81251e-11
 -0.000000	 -0.000000	diff=1.06933e-13
 -0.000000	 -0.000000	diff=2.4917e-13
  0.000000	  0.000000	diff=2.26123e-13
  0.000000	  0.000000	diff=8.65334e-13
 -0.000000	 -0.000000	diff=1.12239e-12
  0.000000	  0.000000	diff=5.88617e-13
 -0.000001	 -0.000001	diff=2.42624e-11
  0.000001	  0.000001	diff=5.92268e-12
 -0.000000	 -0.000000	diff=8.08888e-13
  0.000000	  0.000000	diff=1.01681e-12
  0.000000	  0.000000	diff=1.02848e-12
 -0.000000	 -0.000000	diff=1.06918e-12
  0.000000	  0.000000	diff=4.19007e-13
 -0.000000	 -0.000000	diff=1.02074e-12
 -0.000001	 -0.000001	diff=2.01893e-09
 -0.000001	 -0.000001	diff=5.63943e-11
  0.000000	  0.000000	diff=1.04435e-12
 -0.000000	 -0.000000	diff=1.19681e-13
 -0.000000	 -0.000000	diff=4.80025e-14
  0.000000	  0.000000	diff=9.20859e-13
 -0.000000	 -0.000000	diff=1.50122e-13
  0.000000	  0.000000	diff=2.09358e-13
  0.000001	  0.000001	diff=5.87079e-12
  0.000001	  0.000001	diff=4.28731e-09
  local_diff=6.46135e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000010	  0.000010	diff=3.91357e-09
 -0.000012	 -0.000012	diff=1.04559e-08
  0.000009	  0.000009	diff=3.59209e-09
 -0.000006	 -0.000006	diff=6.42968e-09
  local_diff=2.43913e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000030	  0.000030	diff=1.6923e-09
  0.000002	  0.000002	diff=1.91118e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000044	  0.000044	diff=7.94871e-09
  0.000001	  0.000001	diff=1.67169e-09
  0.000026	  0.000026	diff=1.78527e-09
  0.000001	  0.000001	diff=9.93849e-10
  local_diff=1.6003e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.91363e-15
  0.000000	 -0.000000	diff=2.33469e-15
  0.000000	 -0.000000	diff=2.46117e-15
  0.000000	  0.000000	diff=3.01129e-15
  local_diff=9.72078e-15
# W_h, [2 4]
 -0.000030	 -0.000030	diff=4.56634e-13
 -0.000036	 -0.000036	diff=1.47777e-12
  0.000038	  0.000038	diff=1.11086e-12
  0.000045	  0.000045	diff=1.31355e-12
 -0.000009	 -0.000009	diff=1.6458e-11
 -0.000011	 -0.000011	diff=1.33404e-11
  0.000013	  0.000013	diff=1.80711e-10
  0.000022	  0.000022	diff=1.68781e-10
  local_diff=3.83649e-10
# W_soft, [5 2]
  0.000028	  0.000028	diff=7.23507e-13
  0.000028	  0.000028	diff=6.15663e-14
  0.000001	  0.000001	diff=3.93677e-13
 -0.000038	 -0.000038	diff=4.57176e-13
 -0.000020	 -0.000020	diff=4.95701e-13
  0.000003	  0.000003	diff=7.69384e-13
  0.000003	  0.000003	diff=1.2449e-12
 -0.000003	 -0.000003	diff=2.56793e-13
 -0.000001	 -0.000001	diff=4.67095e-14
 -0.000001	 -0.000001	diff=8.03285e-13
  local_diff=5.2527e-12
# Num params=186, abs_diff=5.26211e-08
Elapsed time is 2.527909 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=5.40697e-13
  0.000000	  0.000000	diff=6.18138e-13
  0.000000	  0.000000	diff=7.20277e-13
  0.000000	  0.000000	diff=7.03089e-13
  0.000000	  0.000000	diff=4.82951e-13
  0.000000	  0.000000	diff=3.75894e-13
 -0.000025	 -0.000025	diff=2.27635e-11
  0.000009	  0.000009	diff=1.11344e-10
 -0.000000	 -0.000000	diff=7.04633e-13
 -0.000000	 -0.000000	diff=7.91751e-15
 -0.000000	 -0.000000	diff=1.60735e-12
 -0.000000	 -0.000000	diff=2.05998e-12
 -0.000000	 -0.000000	diff=1.34315e-12
 -0.000000	 -0.000000	diff=5.18732e-13
  0.000036	  0.000036	diff=4.92781e-11
 -0.000019	 -0.000019	diff=3.30245e-10
 -0.000000	 -0.000000	diff=5.25377e-13
 -0.000000	 -0.000000	diff=4.63394e-13
 -0.000000	 -0.000000	diff=1.3933e-13
 -0.000000	 -0.000000	diff=1.07395e-12
 -0.000000	 -0.000000	diff=1.94008e-13
 -0.000000	 -0.000000	diff=1.21374e-13
  0.000000	  0.000000	diff=2.17339e-10
 -0.000000	 -0.000000	diff=4.86716e-13
  0.000000	  0.000000	diff=6.48939e-13
  0.000000	  0.000000	diff=4.74796e-13
  0.000000	  0.000000	diff=4.56167e-14
  0.000000	  0.000000	diff=1.74365e-14
  0.000000	  0.000000	diff=1.52424e-12
  0.000000	  0.000000	diff=6.82098e-13
 -0.000000	 -0.000000	diff=9.03721e-13
  0.000000	  0.000000	diff=4.54071e-10
  local_diff=1.20202e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.05154e-13
  0.000000	  0.000000	diff=7.75175e-13
 -0.000000	 -0.000000	diff=1.18732e-12
  0.000000	  0.000000	diff=9.61231e-13
 -0.000000	 -0.000000	diff=1.09592e-13
 -0.000000	 -0.000000	diff=4.73532e-13
  0.000054	  0.000054	diff=2.06052e-12
  0.000007	  0.000007	diff=5.09863e-12
  0.000000	  0.000000	diff=1.48051e-13
 -0.000000	 -0.000000	diff=7.16361e-13
  0.000000	  0.000000	diff=6.06142e-13
 -0.000000	 -0.000000	diff=4.59178e-14
  0.000000	  0.000000	diff=6.18243e-14
  0.000000	  0.000000	diff=1.10579e-13
 -0.000063	 -0.000063	diff=1.8987e-12
 -0.000007	 -0.000007	diff=5.17418e-12
 -0.000000	 -0.000000	diff=2.07554e-13
  0.000000	  0.000000	diff=1.09812e-12
 -0.000000	 -0.000000	diff=4.49226e-13
  0.000000	  0.000000	diff=1.68916e-13
 -0.000000	 -0.000000	diff=4.13639e-13
 -0.000000	 -0.000000	diff=1.3831e-12
  0.000001	  0.000001	diff=7.87117e-10
  0.000000	  0.000000	diff=2.91306e-13
  0.000000	  0.000000	diff=4.01329e-13
 -0.000000	 -0.000000	diff=1.39308e-13
  0.000000	  0.000000	diff=4.08373e-13
 -0.000000	 -0.000000	diff=2.69857e-13
  0.000000	  0.000000	diff=4.03687e-13
  0.000000	  0.000000	diff=1.95762e-13
 -0.000001	 -0.000001	diff=1.25012e-12
 -0.000000	 -0.000000	diff=1.75835e-10
  local_diff=9.89566e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.07141e-13
 -0.000000	 -0.000000	diff=6.33061e-13
 -0.000000	 -0.000000	diff=2.33595e-13
  0.000000	  0.000000	diff=5.29131e-13
 -0.000000	 -0.000000	diff=3.2592e-14
 -0.000000	 -0.000000	diff=6.72325e-13
  0.000008	  0.000008	diff=3.95013e-11
  0.000009	  0.000009	diff=5.22489e-11
  0.000000	  0.000000	diff=6.11253e-13
  0.000000	  0.000000	diff=2.59648e-13
  0.000000	  0.000000	diff=2.03292e-12
 -0.000000	 -0.000000	diff=2.64183e-12
  0.000000	  0.000000	diff=1.09764e-12
  0.000000	  0.000000	diff=7.40188e-14
 -0.000011	 -0.000011	diff=1.48201e-10
 -0.000016	 -0.000016	diff=1.51705e-11
  0.000000	 -0.000000	diff=6.37402e-13
  0.000000	 -0.000000	diff=3.46665e-13
  0.000000	  0.000000	diff=2.96721e-13
  0.000000	 -0.000000	diff=7.41248e-14
  0.000000	  0.000000	diff=6.17827e-14
  0.000000	 -0.000000	diff=3.75456e-13
 -0.000000	 -0.000000	diff=1.22097e-12
 -0.000000	 -0.000000	diff=2.38259e-14
  0.000000	  0.000000	diff=2.28325e-13
  0.000000	  0.000000	diff=6.53023e-14
  0.000000	 -0.000000	diff=4.62652e-13
  0.000000	  0.000000	diff=2.62421e-15
  0.000000	 -0.000000	diff=2.22004e-13
  0.000000	  0.000000	diff=6.22389e-14
  0.000000	  0.000000	diff=2.81633e-13
  0.000000	  0.000000	diff=5.13549e-14
  0.000000	  0.000000	diff=1.74128e-13
  0.000000	  0.000000	diff=1.60533e-12
  0.000000	  0.000000	diff=7.60329e-14
 -0.000000	 -0.000000	diff=1.45607e-13
  0.000000	  0.000000	diff=1.17786e-13
 -0.000000	 -0.000000	diff=5.06536e-13
 -0.000001	 -0.000001	diff=1.43254e-09
 -0.000001	 -0.000001	diff=1.31919e-11
 -0.000000	 -0.000000	diff=5.9177e-14
 -0.000000	 -0.000000	diff=1.11185e-12
 -0.000000	 -0.000000	diff=7.52937e-13
  0.000000	  0.000000	diff=2.4228e-13
 -0.000000	 -0.000000	diff=3.49152e-13
  0.000000	  0.000000	diff=5.56639e-14
  0.000000	  0.000000	diff=9.28521e-12
  0.000001	  0.000001	diff=1.3003e-09
  local_diff=3.02938e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=2.91971e-13
 -0.000000	 -0.000000	diff=1.33976e-14
 -0.000000	 -0.000000	diff=2.18641e-13
  0.000000	  0.000000	diff=2.91638e-13
 -0.000000	 -0.000000	diff=1.11047e-12
  0.000000	  0.000000	diff=9.05238e-13
  0.000032	  0.000032	diff=2.59906e-11
  0.000012	  0.000012	diff=9.03224e-12
  0.000000	  0.000000	diff=2.15891e-14
  0.000000	  0.000000	diff=5.59855e-13
 -0.000000	 -0.000000	diff=8.84211e-13
  0.000000	  0.000000	diff=9.21977e-13
 -0.000000	 -0.000000	diff=3.06835e-13
  0.000000	  0.000000	diff=7.55161e-13
 -0.000005	 -0.000005	diff=5.7663e-11
 -0.000002	 -0.000002	diff=8.51174e-12
  0.000000	  0.000000	diff=1.09311e-12
 -0.000000	 -0.000000	diff=7.83741e-13
 -0.000000	 -0.000000	diff=6.64998e-13
  0.000000	  0.000000	diff=6.07613e-13
 -0.000000	 -0.000000	diff=4.27229e-13
  0.000000	  0.000000	diff=7.69347e-14
  0.000001	  0.000001	diff=4.32908e-09
  0.000001	  0.000001	diff=1.55997e-11
 -0.000000	 -0.000000	diff=8.71241e-14
  0.000000	  0.000000	diff=9.24445e-13
  0.000000	  0.000000	diff=9.04911e-14
 -0.000000	 -0.000000	diff=1.48912e-13
  0.000000	  0.000000	diff=3.5693e-13
 -0.000000	 -0.000000	diff=6.43968e-13
 -0.000002	 -0.000002	diff=7.73204e-12
 -0.000001	 -0.000001	diff=2.08762e-09
  local_diff=6.55342e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000015	  0.000015	diff=7.6491e-09
 -0.000030	 -0.000030	diff=2.91299e-08
  0.000013	  0.000013	diff=7.01695e-09
 -0.000025	 -0.000025	diff=2.5038e-08
  local_diff=6.8834e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.12553e-09
 -0.000003	 -0.000003	diff=2.18158e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.72523e-09
 -0.000002	 -0.000002	diff=1.66217e-09
 -0.000017	 -0.000017	diff=4.92814e-09
 -0.000001	 -0.000001	diff=1.11168e-09
  local_diff=1.57343e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=6.57311e-21
  0.000000	 -0.000000	diff=8.778e-21
  0.000000	 -0.000000	diff=1.59249e-20
  0.000000	  0.000000	diff=2.13569e-20
  local_diff=5.26329e-20
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.15715e-12
  0.000000	  0.000000	diff=2.99665e-13
  local_diff=1.45681e-12
# W_h, [2 4]
  0.000055	  0.000055	diff=1.17061e-12
  0.000018	  0.000018	diff=1.11021e-12
 -0.000070	 -0.000070	diff=1.44588e-12
 -0.000023	 -0.000023	diff=3.90783e-13
  0.000013	  0.000013	diff=2.33728e-11
  0.000006	  0.000006	diff=6.03221e-13
 -0.000026	 -0.000026	diff=2.08052e-10
 -0.000014	 -0.000014	diff=1.85702e-11
  local_diff=2.54715e-10
# W_soft, [5 2]
 -0.000031	 -0.000031	diff=7.89404e-13
 -0.000031	 -0.000031	diff=1.9265e-13
  0.000013	  0.000013	diff=3.27006e-13
  0.000003	  0.000003	diff=1.33653e-12
  0.000045	  0.000045	diff=2.32821e-12
  0.000032	  0.000032	diff=1.68971e-12
  0.000032	  0.000032	diff=8.80479e-13
 -0.000010	 -0.000010	diff=7.8026e-13
 -0.000005	 -0.000005	diff=1.10666e-12
 -0.000048	 -0.000048	diff=1.22723e-12
  local_diff=1.06581e-11
# Num params=188, abs_diff=9.66095e-08
Elapsed time is 2.375780 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 230, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_src_char{1}=32 W_emb_src_char=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 230
  src input 1: z x y xy
  src mask: 1  1  1  1
  tgt input 1: <s> a c a </s>
  tgt output 1: a c a </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=2.01774e-12
  0.000000	  0.000000	diff=9.15348e-13
 -0.000000	 -0.000000	diff=7.35565e-13
  0.000000	  0.000000	diff=2.54797e-13
 -0.000000	 -0.000000	diff=7.83538e-13
  0.000000	  0.000000	diff=4.01143e-13
  0.000000	  0.000000	diff=3.83631e-12
  0.000000	  0.000000	diff=3.25867e-12
  0.000000	  0.000000	diff=6.42925e-13
 -0.000000	 -0.000000	diff=1.13019e-12
  0.000000	  0.000000	diff=3.66872e-13
 -0.000000	 -0.000000	diff=9.81337e-13
  0.000000	  0.000000	diff=1.07027e-12
  0.000000	  0.000000	diff=7.75499e-14
 -0.000000	 -0.000000	diff=9.10712e-12
 -0.000001	 -0.000001	diff=5.80734e-12
  0.000000	  0.000000	diff=6.99509e-13
 -0.000000	 -0.000000	diff=4.50124e-13
  0.000000	  0.000000	diff=3.69615e-14
 -0.000000	 -0.000000	diff=9.47401e-13
  0.000000	  0.000000	diff=1.17383e-12
  0.000000	  0.000000	diff=5.16284e-13
 -0.000000	 -0.000000	diff=4.18676e-11
 -0.000000	 -0.000000	diff=5.49138e-13
 -0.000000	 -0.000000	diff=2.05337e-13
  0.000000	  0.000000	diff=2.2204e-13
 -0.000000	 -0.000000	diff=4.29912e-13
  0.000000	  0.000000	diff=9.38715e-13
 -0.000000	 -0.000000	diff=3.26155e-14
 -0.000000	 -0.000000	diff=1.54743e-12
  0.000000	  0.000000	diff=6.68387e-14
  0.000000	  0.000000	diff=4.7228e-11
  local_diff=1.28298e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=8.54077e-13
  0.000000	  0.000000	diff=6.62743e-13
  0.000000	  0.000000	diff=1.00527e-12
  0.000000	  0.000000	diff=5.64211e-13
  0.000000	  0.000000	diff=5.86473e-13
 -0.000000	 -0.000000	diff=1.06535e-13
 -0.000000	 -0.000000	diff=1.66674e-13
  0.000000	  0.000000	diff=1.56425e-12
 -0.000000	 -0.000000	diff=2.63435e-13
 -0.000000	 -0.000000	diff=5.55589e-13
 -0.000000	 -0.000000	diff=6.14751e-13
 -0.000000	 -0.000000	diff=2.0942e-13
 -0.000000	 -0.000000	diff=2.03524e-13
  0.000000	  0.000000	diff=8.30133e-13
  0.000000	  0.000000	diff=2.00393e-10
 -0.000000	 -0.000000	diff=2.0976e-10
  0.000000	  0.000000	diff=4.80818e-13
  0.000000	  0.000000	diff=7.60995e-13
  0.000000	  0.000000	diff=5.73864e-13
  0.000000	  0.000000	diff=1.08756e-12
 -0.000000	 -0.000000	diff=7.0072e-13
 -0.000000	 -0.000000	diff=4.97886e-13
 -0.000000	 -0.000000	diff=9.71958e-12
  0.000000	  0.000000	diff=6.04563e-13
 -0.000000	 -0.000000	diff=8.48319e-13
 -0.000000	 -0.000000	diff=2.08139e-13
 -0.000000	 -0.000000	diff=7.33498e-13
 -0.000000	 -0.000000	diff=5.20196e-13
 -0.000000	  0.000000	diff=1.43768e-12
  0.000000	  0.000000	diff=3.25133e-13
  0.000000	  0.000000	diff=8.11972e-14
 -0.000000	 -0.000000	diff=5.83623e-11
  local_diff=4.95283e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=5.77922e-14
 -0.000000	 -0.000000	diff=4.79256e-13
  0.000000	  0.000000	diff=1.84993e-12
 -0.000000	 -0.000000	diff=1.50392e-12
  0.000000	  0.000000	diff=4.25127e-13
 -0.000000	 -0.000000	diff=8.13955e-13
  0.000002	  0.000002	diff=3.69499e-11
 -0.000005	 -0.000005	diff=2.22477e-11
  0.000000	  0.000000	diff=1.21804e-12
 -0.000000	 -0.000000	diff=7.99186e-13
  0.000000	  0.000000	diff=8.77694e-13
 -0.000000	 -0.000000	diff=7.0726e-13
  0.000000	  0.000000	diff=8.6896e-13
 -0.000000	 -0.000000	diff=5.56983e-13
  0.000002	  0.000002	diff=2.45123e-10
 -0.000007	 -0.000007	diff=1.99123e-10
  0.000000	  0.000000	diff=3.34883e-14
  0.000000	  0.000000	diff=1.81644e-14
  0.000000	  0.000000	diff=8.74174e-14
  0.000000	 -0.000000	diff=1.17558e-13
  0.000000	  0.000000	diff=1.2343e-13
  0.000000	 -0.000000	diff=1.31664e-13
  0.000000	  0.000000	diff=2.7075e-13
  0.000000	  0.000000	diff=9.27479e-13
  0.000000	  0.000000	diff=1.65442e-14
  0.000000	 -0.000000	diff=2.50094e-14
  0.000000	  0.000000	diff=1.12399e-14
  0.000000	 -0.000000	diff=1.9569e-14
  0.000000	  0.000000	diff=2.27997e-14
  0.000000	 -0.000000	diff=3.84415e-14
  0.000000	  0.000000	diff=4.94732e-13
 -0.000000	 -0.000000	diff=1.61141e-13
 -0.000000	 -0.000000	diff=1.67268e-13
  0.000000	  0.000000	diff=1.52118e-13
 -0.000000	 -0.000000	diff=1.03074e-12
  0.000000	  0.000000	diff=4.57306e-13
 -0.000000	 -0.000000	diff=9.07198e-14
  0.000000	  0.000000	diff=2.25921e-13
 -0.000000	 -0.000000	diff=2.07838e-12
  0.000000	  0.000000	diff=1.80608e-12
 -0.000000	 -0.000000	diff=2.12919e-13
  0.000000	  0.000000	diff=8.81903e-13
 -0.000000	 -0.000000	diff=1.11499e-12
  0.000000	  0.000000	diff=2.12225e-13
 -0.000000	 -0.000000	diff=3.08258e-13
  0.000000	  0.000000	diff=2.61865e-14
 -0.000000	 -0.000000	diff=1.13811e-12
  0.000000	  0.000000	diff=1.29175e-10
  local_diff=6.5518e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=4.136e-13
  0.000000	  0.000000	diff=5.97698e-13
 -0.000000	 -0.000000	diff=8.26259e-13
  0.000000	  0.000000	diff=8.52506e-13
 -0.000000	 -0.000000	diff=1.09468e-12
  0.000000	  0.000000	diff=5.03493e-13
  0.000005	  0.000005	diff=1.13485e-12
 -0.000007	 -0.000007	diff=2.83544e-12
 -0.000000	 -0.000000	diff=1.17555e-12
  0.000000	  0.000000	diff=1.54578e-12
 -0.000000	 -0.000000	diff=6.53382e-13
  0.000000	  0.000000	diff=8.83974e-13
 -0.000000	 -0.000000	diff=8.7859e-13
  0.000000	  0.000000	diff=4.68319e-13
  0.000004	  0.000004	diff=1.14962e-11
 -0.000006	 -0.000006	diff=2.3632e-11
  0.000000	  0.000000	diff=5.60892e-13
 -0.000000	 -0.000000	diff=6.2083e-14
  0.000000	  0.000000	diff=2.45401e-13
  0.000000	  0.000000	diff=4.97056e-14
  0.000000	  0.000000	diff=1.51079e-12
 -0.000000	 -0.000000	diff=8.34258e-13
 -0.000000	 -0.000000	diff=2.26577e-10
  0.000000	  0.000000	diff=5.58887e-12
  0.000000	  0.000000	diff=1.88492e-12
 -0.000000	 -0.000000	diff=7.76574e-14
  0.000000	  0.000000	diff=1.19468e-13
 -0.000000	 -0.000000	diff=3.00091e-13
  0.000000	  0.000000	diff=6.34806e-13
 -0.000000	 -0.000000	diff=2.84989e-13
 -0.000000	 -0.000000	diff=1.35332e-12
 -0.000000	 -0.000000	diff=3.44302e-10
  local_diff=6.33378e-10
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.7326e-12
 -0.000000	 -0.000000	diff=6.31573e-11
 -0.000000	 -0.000000	diff=8.11863e-11
  0.000000	  0.000000	diff=1.11956e-10
  local_diff=2.65033e-10
# W_src_char{1}, [8 4]
  0.000000	  0.000000	diff=5.35799e-13
  0.000000	  0.000000	diff=1.29125e-12
 -0.000000	 -0.000000	diff=2.16372e-13
 -0.000000	 -0.000000	diff=5.63425e-16
 -0.000000	 -0.000000	diff=3.36912e-14
 -0.000000	 -0.000000	diff=2.60037e-13
  0.000000	  0.000000	diff=6.4481e-13
  0.000000	  0.000000	diff=2.07899e-13
 -0.000000	 -0.000000	diff=7.91254e-14
  0.000000	  0.000000	diff=2.36748e-13
  0.000000	  0.000000	diff=5.4928e-13
  0.000000	  0.000000	diff=7.33577e-13
  0.000000	  0.000000	diff=1.06199e-12
  0.000000	  0.000000	diff=8.01278e-13
  0.000000	  0.000000	diff=3.50079e-13
 -0.000000	 -0.000000	diff=2.41624e-12
 -0.000000	  0.000000	diff=8.39088e-13
  0.000000	 -0.000000	diff=9.08769e-14
 -0.000000	 -0.000000	diff=1.33179e-12
 -0.000000	  0.000000	diff=8.18245e-13
  0.000000	  0.000000	diff=1.14124e-13
 -0.000000	  0.000000	diff=1.53701e-12
  0.000000	  0.000000	diff=5.21078e-13
 -0.000000	 -0.000000	diff=1.52405e-13
 -0.000000	 -0.000000	diff=1.27858e-12
 -0.000000	  0.000000	diff=1.46372e-12
 -0.000000	  0.000000	diff=7.83089e-13
 -0.000000	 -0.000000	diff=5.63602e-13
 -0.000000	 -0.000000	diff=1.27646e-12
 -0.000000	 -0.000000	diff=1.21778e-12
 -0.000000	 -0.000000	diff=7.76358e-13
  0.000000	  0.000000	diff=2.57408e-13
  local_diff=2.24404e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.84306e-13
  0.000000	  0.000000	diff=2.76116e-14
  0.000000	  0.000000	diff=1.20701e-12
  0.000000	  0.000000	diff=7.43377e-13
  0.000000	  0.000000	diff=2.51262e-13
  0.000000	  0.000000	diff=1.30459e-13
  0.000000	  0.000000	diff=1.01831e-12
 -0.000000	 -0.000000	diff=1.82235e-13
  local_diff=4.54457e-12
# W_emb_tgt, [2 5]
 -0.000005	 -0.000005	diff=3.62253e-09
  0.000002	  0.000002	diff=1.002e-09
 -0.000003	 -0.000003	diff=1.07088e-09
  0.000001	  0.000001	diff=5.58276e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=3.97761e-10
  0.000000	  0.000000	diff=1.37543e-10
 -0.000000	 -0.000000	diff=1.28542e-10
  0.000000	  0.000000	diff=6.3974e-11
  local_diff=6.9815e-09
# W_pos, [2 2]
  0.000000	  0.000000	diff=2.62825e-07
 -0.000000	 -0.000000	diff=5.74757e-13
  0.000000	  0.000000	diff=2.31433e-13
  0.000000	 -0.000000	diff=2.62826e-07
  local_diff=5.25652e-07
# v_pos, [1 2]
  0.000000	 -0.000000	diff=2.62826e-07
  0.000000	 -0.000000	diff=2.62826e-07
  local_diff=5.25652e-07
# W_h, [2 4]
  0.000002	  0.000002	diff=4.07207e-13
 -0.000004	 -0.000004	diff=9.46018e-13
 -0.000002	 -0.000002	diff=3.68441e-13
  0.000005	  0.000005	diff=6.74224e-13
  0.000003	  0.000003	diff=2.47665e-12
  0.000007	  0.000007	diff=2.46203e-11
  0.000000	  0.000000	diff=1.40156e-11
  0.000031	  0.000031	diff=1.2102e-10
  local_diff=1.64528e-10
# W_soft, [5 2]
 -0.000003	 -0.000003	diff=3.93999e-13
 -0.000007	 -0.000007	diff=1.52511e-12
  0.000020	  0.000020	diff=9.33197e-14
 -0.000005	 -0.000005	diff=1.03897e-12
 -0.000005	 -0.000005	diff=7.65406e-13
  0.000002	  0.000002	diff=3.8616e-13
 -0.000002	 -0.000002	diff=6.10691e-13
  0.000002	  0.000002	diff=4.69374e-13
 -0.000001	 -0.000001	diff=4.21574e-13
 -0.000002	 -0.000002	diff=7.5467e-13
  local_diff=6.45928e-12
# Num params=230, abs_diff=1.06066e-06
Elapsed time is 4.905182 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=7.43621e-14
 -0.000000	 -0.000000	diff=2.89158e-13
 -0.000000	 -0.000000	diff=4.68003e-14
 -0.000000	 -0.000000	diff=5.33458e-13
 -0.000000	 -0.000000	diff=4.23308e-14
 -0.000000	 -0.000000	diff=2.81938e-13
  0.000001	  0.000001	diff=1.24704e-11
 -0.000000	 -0.000000	diff=1.61604e-12
  0.000000	  0.000000	diff=1.13054e-13
 -0.000000	 -0.000000	diff=2.29737e-13
  0.000000	  0.000000	diff=1.80872e-13
 -0.000000	 -0.000000	diff=4.93724e-14
  0.000000	  0.000000	diff=2.66837e-13
  0.000000	  0.000000	diff=1.49638e-13
 -0.000002	 -0.000002	diff=2.83515e-11
 -0.000000	 -0.000000	diff=4.20002e-12
  0.000000	  0.000000	diff=9.8993e-13
  0.000000	 -0.000000	diff=8.93959e-13
  0.000000	  0.000000	diff=5.41216e-13
 -0.000000	 -0.000000	diff=2.61427e-13
  0.000000	  0.000000	diff=3.09383e-13
  0.000000	  0.000000	diff=1.49898e-13
 -0.000000	 -0.000000	diff=2.72912e-11
 -0.000000	 -0.000000	diff=2.46059e-13
 -0.000000	 -0.000000	diff=1.55407e-12
  0.000000	  0.000000	diff=1.24186e-13
 -0.000000	 -0.000000	diff=3.91708e-13
  0.000000	  0.000000	diff=3.84014e-13
 -0.000000	 -0.000000	diff=7.66007e-13
 -0.000000	 -0.000000	diff=5.13079e-13
  0.000000	  0.000000	diff=1.36559e-13
  0.000000	  0.000000	diff=2.32816e-11
  local_diff=1.0673e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=6.95786e-13
  0.000000	  0.000000	diff=4.20803e-13
 -0.000000	 -0.000000	diff=8.11425e-14
  0.000000	  0.000000	diff=1.94405e-13
  0.000000	  0.000000	diff=6.14644e-13
 -0.000000	 -0.000000	diff=1.50464e-12
  0.000000	  0.000000	diff=7.25996e-13
  0.000002	  0.000002	diff=6.03486e-14
  0.000000	  0.000000	diff=3.90936e-13
 -0.000000	 -0.000000	diff=8.30432e-14
  0.000000	  0.000000	diff=6.59151e-13
 -0.000000	 -0.000000	diff=9.93536e-13
 -0.000000	 -0.000000	diff=6.56888e-13
  0.000000	  0.000000	diff=2.44956e-13
 -0.000000	 -0.000000	diff=8.66763e-13
 -0.000001	 -0.000001	diff=5.64388e-13
 -0.000000	 -0.000000	diff=1.75312e-14
  0.000000	  0.000000	diff=2.34892e-13
 -0.000000	 -0.000000	diff=3.03197e-13
  0.000000	  0.000000	diff=6.17223e-14
  0.000000	  0.000000	diff=5.6939e-14
  0.000000	 -0.000000	diff=3.03934e-13
  0.000000	  0.000000	diff=9.25575e-11
  0.000000	  0.000000	diff=2.48813e-13
  0.000000	  0.000000	diff=2.60842e-13
 -0.000000	 -0.000000	diff=3.34704e-13
  0.000000	  0.000000	diff=1.17829e-13
 -0.000000	 -0.000000	diff=7.37628e-13
 -0.000000	 -0.000000	diff=1.06268e-12
  0.000000	  0.000000	diff=3.69712e-13
 -0.000000	 -0.000000	diff=2.70573e-13
 -0.000000	 -0.000000	diff=1.18253e-10
  local_diff=2.23949e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=8.65414e-13
  0.000000	  0.000000	diff=1.09725e-13
 -0.000000	 -0.000000	diff=8.20947e-13
  0.000000	  0.000000	diff=2.41067e-12
  0.000000	  0.000000	diff=2.33312e-13
  0.000000	  0.000000	diff=1.80367e-13
 -0.000008	 -0.000008	diff=1.2246e-10
 -0.000019	 -0.000019	diff=8.50833e-11
 -0.000000	 -0.000000	diff=3.21876e-14
 -0.000000	 -0.000000	diff=9.86098e-13
 -0.000000	 -0.000000	diff=1.2833e-12
 -0.000000	 -0.000000	diff=3.71608e-12
 -0.000000	 -0.000000	diff=2.94758e-13
 -0.000000	 -0.000000	diff=4.946e-13
  0.000014	  0.000014	diff=3.57314e-10
  0.000029	  0.000029	diff=1.32889e-10
  0.000000	 -0.000000	diff=5.02503e-14
  0.000000	  0.000000	diff=1.36806e-12
  0.000000	  0.000000	diff=5.75682e-13
  0.000000	  0.000000	diff=2.63554e-13
  0.000000	  0.000000	diff=5.86545e-13
  0.000000	  0.000000	diff=3.39518e-13
 -0.000000	 -0.000000	diff=1.04434e-13
 -0.000000	 -0.000000	diff=5.51196e-15
  0.000000	  0.000000	diff=6.96939e-13
  0.000000	  0.000000	diff=5.22982e-13
  0.000000	  0.000000	diff=1.85624e-14
  0.000000	  0.000000	diff=1.34017e-12
  0.000000	  0.000000	diff=1.38878e-12
  0.000000	  0.000000	diff=4.48697e-13
 -0.000000	 -0.000000	diff=2.63186e-13
 -0.000000	 -0.000000	diff=2.47392e-13
  0.000000	  0.000000	diff=2.54671e-13
  0.000000	  0.000000	diff=3.2543e-13
 -0.000000	 -0.000000	diff=8.27584e-13
 -0.000000	 -0.000000	diff=6.85306e-13
 -0.000000	 -0.000000	diff=3.36973e-13
 -0.000000	 -0.000000	diff=6.33506e-13
  0.000000	  0.000000	diff=1.55749e-10
  0.000000	  0.000000	diff=9.78718e-12
  0.000000	  0.000000	diff=1.64838e-13
 -0.000000	 -0.000000	diff=1.01131e-13
 -0.000000	 -0.000000	diff=1.73074e-13
 -0.000000	 -0.000000	diff=7.86739e-13
 -0.000000	 -0.000000	diff=1.68821e-13
 -0.000000	 -0.000000	diff=4.72415e-13
  0.000000	  0.000000	diff=3.43531e-12
  0.000000	  0.000000	diff=3.58307e-11
  local_diff=9.27128e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.02692e-13
 -0.000000	 -0.000000	diff=8.53997e-13
 -0.000000	 -0.000000	diff=3.37772e-14
 -0.000000	 -0.000000	diff=9.51997e-13
 -0.000000	 -0.000000	diff=1.05188e-13
 -0.000000	 -0.000000	diff=7.55263e-13
 -0.000004	 -0.000004	diff=3.15046e-12
 -0.000005	 -0.000005	diff=2.32177e-12
 -0.000000	 -0.000000	diff=5.33897e-13
 -0.000000	 -0.000000	diff=2.60283e-13
  0.000000	  0.000000	diff=5.03295e-15
 -0.000000	 -0.000000	diff=1.80549e-12
 -0.000000	 -0.000000	diff=3.58035e-13
 -0.000000	 -0.000000	diff=1.0069e-13
 -0.000018	 -0.000018	diff=7.64067e-11
 -0.000016	 -0.000016	diff=4.13262e-11
  0.000000	 -0.000000	diff=3.1781e-13
 -0.000000	 -0.000000	diff=6.33117e-13
 -0.000000	 -0.000000	diff=6.28287e-13
  0.000000	  0.000000	diff=2.06543e-13
 -0.000000	 -0.000000	diff=4.19365e-14
  0.000000	  0.000000	diff=5.52481e-13
  0.000000	  0.000000	diff=4.52798e-10
  0.000000	  0.000000	diff=1.46619e-11
  0.000000	  0.000000	diff=5.38883e-13
  0.000000	  0.000000	diff=6.0078e-13
  0.000000	  0.000000	diff=1.47981e-13
  0.000000	  0.000000	diff=4.62257e-13
  0.000000	  0.000000	diff=3.08168e-13
  0.000000	  0.000000	diff=4.67089e-13
  0.000000	  0.000000	diff=3.35133e-12
  0.000000	  0.000000	diff=9.45827e-10
  local_diff=1.55072e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=2.57632e-10
  0.000001	  0.000001	diff=7.89601e-10
 -0.000001	 -0.000001	diff=1.66119e-10
  0.000001	  0.000001	diff=4.69606e-10
  local_diff=1.68296e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=2.11334e-14
  0.000000	  0.000000	diff=6.9633e-13
  0.000000	  0.000000	diff=7.58201e-15
  0.000000	 -0.000000	diff=4.61583e-15
  0.000000	 -0.000000	diff=6.78005e-15
  0.000000	  0.000000	diff=7.0459e-13
 -0.000000	 -0.000000	diff=2.59436e-14
 -0.000000	 -0.000000	diff=1.60708e-12
  0.000000	 -0.000000	diff=2.64346e-14
  0.000000	  0.000000	diff=6.97707e-13
  0.000000	  0.000000	diff=6.22763e-15
  0.000000	 -0.000000	diff=3.17755e-15
  0.000000	 -0.000000	diff=9.80431e-15
  0.000000	  0.000000	diff=5.11589e-15
 -0.000000	 -0.000000	diff=4.05199e-14
 -0.000000	 -0.000000	diff=1.9413e-13
  0.000000	  0.000000	diff=7.6698e-17
  0.000000	 -0.000000	diff=4.73345e-17
  0.000000	 -0.000000	diff=7.63479e-17
  0.000000	  0.000000	diff=3.17925e-17
  0.000000	  0.000000	diff=1.1293e-17
  0.000000	 -0.000000	diff=1.84112e-17
 -0.000000	 -0.000000	diff=5.80744e-13
  0.000000	 -0.000000	diff=4.74472e-14
  0.000000	 -0.000000	diff=1.04938e-16
  0.000000	  0.000000	diff=6.98351e-17
  0.000000	  0.000000	diff=8.87735e-17
  0.000000	 -0.000000	diff=3.96426e-17
  0.000000	 -0.000000	diff=2.41768e-17
  0.000000	  0.000000	diff=3.12391e-17
  0.000000	  0.000000	diff=5.86059e-13
  0.000000	  0.000000	diff=6.65583e-13
  local_diff=5.93763e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=1.10802e-17
  0.000000	 -0.000000	diff=2.16521e-17
  0.000000	  0.000000	diff=2.84204e-18
  0.000000	  0.000000	diff=1.30187e-18
  0.000000	  0.000000	diff=5.34477e-19
  0.000000	 -0.000000	diff=4.75427e-18
  0.000000	  0.000000	diff=2.2487e-13
 -0.000000	 -0.000000	diff=1.16605e-14
  0.000000	  0.000000	diff=1.09913e-17
  0.000000	  0.000000	diff=1.83906e-17
  0.000000	 -0.000000	diff=6.62785e-18
  0.000000	 -0.000000	diff=3.03901e-18
  0.000000	 -0.000000	diff=5.81041e-18
  0.000000	  0.000000	diff=5.88945e-19
 -0.000000	 -0.000000	diff=6.28535e-13
  0.000000	  0.000000	diff=2.79968e-13
  0.000000	  0.000000	diff=5.83138e-20
  0.000000	  0.000000	diff=3.28738e-21
  0.000000	 -0.000000	diff=1.79668e-19
  0.000000	 -0.000000	diff=3.34027e-19
  0.000000	 -0.000000	diff=5.15754e-21
  0.000000	 -0.000000	diff=1.2942e-19
  0.000000	 -0.000000	diff=2.29983e-14
  0.000000	 -0.000000	diff=7.70303e-13
  0.000000	  0.000000	diff=4.32759e-20
  0.000000	  0.000000	diff=7.44547e-21
  0.000000	 -0.000000	diff=1.5078e-19
  0.000000	 -0.000000	diff=3.02188e-19
  0.000000	 -0.000000	diff=8.75624e-21
  0.000000	 -0.000000	diff=1.21295e-19
  0.000000	 -0.000000	diff=2.16454e-14
  0.000000	 -0.000000	diff=5.48675e-14
  local_diff=2.01494e-12
# W_src_char{3}, [8 4]
  0.000000	  0.000000	diff=1.18651e-20
  0.000000	 -0.000000	diff=2.09362e-19
  0.000000	 -0.000000	diff=1.62282e-20
  0.000000	 -0.000000	diff=4.40498e-20
  0.000000	  0.000000	diff=5.11861e-21
  0.000000	  0.000000	diff=8.38334e-20
  0.000000	  0.000000	diff=5.10422e-14
  0.000000	  0.000000	diff=2.89083e-13
  0.000000	  0.000000	diff=1.73729e-20
  0.000000	 -0.000000	diff=2.57134e-19
  0.000000	 -0.000000	diff=1.11494e-20
  0.000000	 -0.000000	diff=5.17326e-20
  0.000000	  0.000000	diff=1.63078e-20
  0.000000	  0.000000	diff=2.10417e-20
  0.000000	  0.000000	diff=5.91799e-13
  0.000000	  0.000000	diff=4.12844e-13
  0.000000	  0.000000	diff=1.55258e-22
  0.000000	  0.000000	diff=1.37443e-21
  0.000000	  0.000000	diff=7.7359e-23
  0.000000	  0.000000	diff=5.82367e-21
  0.000000	  0.000000	diff=3.25458e-22
  0.000000	  0.000000	diff=2.27551e-21
  0.000000	 -0.000000	diff=8.09256e-16
  0.000000	 -0.000000	diff=7.55194e-13
  0.000000	  0.000000	diff=1.87176e-22
  0.000000	  0.000000	diff=2.12036e-21
  0.000000	  0.000000	diff=2.9867e-23
  0.000000	  0.000000	diff=1.08858e-20
  0.000000	  0.000000	diff=4.87326e-22
  0.000000	  0.000000	diff=2.99601e-21
  0.000000	 -0.000000	diff=1.28674e-15
  0.000000	 -0.000000	diff=8.13074e-14
  local_diff=2.18337e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.81609e-13
 -0.000000	 -0.000000	diff=4.52484e-13
  0.000000	  0.000000	diff=6.18457e-13
 -0.000000	 -0.000000	diff=6.8346e-13
  0.000000	  0.000000	diff=2.41253e-14
 -0.000000	 -0.000000	diff=9.43203e-14
  0.000000	  0.000000	diff=6.62264e-13
 -0.000000	 -0.000000	diff=5.18772e-13
  local_diff=3.23549e-12
# W_emb_tgt, [2 5]
  0.000030	  0.000030	diff=8.49512e-11
  0.000003	  0.000003	diff=2.54202e-09
  0.000006	  0.000006	diff=4.60931e-10
  0.000001	  0.000001	diff=6.55594e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000004	  0.000004	diff=2.62668e-10
  0.000000	  0.000000	diff=2.13619e-10
  0.000004	  0.000004	diff=2.37538e-10
  0.000000	  0.000000	diff=1.86469e-10
  local_diff=4.64379e-09
# W_pos, [2 2]
  0.000000	  0.000000	diff=4.76323e-13
  0.000000	  0.000000	diff=4.76766e-13
  0.000000	  0.000000	diff=9.53803e-13
  0.000000	  0.000000	diff=9.54687e-13
  local_diff=2.86158e-12
# v_pos, [1 2]
  0.000000	 -0.000000	diff=3.05062e-13
 -0.000000	 -0.000000	diff=1.97262e-13
  local_diff=5.02323e-13
# W_h, [2 4]
 -0.000001	 -0.000001	diff=2.75426e-13
  0.000002	  0.000002	diff=1.27876e-12
  0.000001	  0.000001	diff=4.75057e-13
 -0.000002	 -0.000002	diff=4.95265e-13
  0.000007	  0.000007	diff=1.71392e-12
 -0.000006	 -0.000006	diff=1.50848e-12
  0.000017	  0.000017	diff=1.10148e-10
 -0.000010	 -0.000010	diff=1.04381e-10
  local_diff=2.20276e-10
# W_soft, [5 2]
  0.000003	  0.000003	diff=5.61915e-13
  0.000010	  0.000010	diff=3.88511e-13
 -0.000019	 -0.000019	diff=3.31098e-13
  0.000008	  0.000008	diff=2.58993e-13
 -0.000002	 -0.000002	diff=1.1091e-12
 -0.000002	 -0.000002	diff=5.23452e-13
  0.000001	  0.000001	diff=6.1301e-14
 -0.000003	 -0.000003	diff=7.83908e-13
  0.000002	  0.000002	diff=1.3466e-14
  0.000002	  0.000002	diff=7.76433e-13
  local_diff=4.80817e-12
# Num params=294, abs_diff=9.37709e-09
Elapsed time is 7.242472 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=2.13661e-13
 -0.000000	 -0.000000	diff=5.59888e-13
 -0.000000	 -0.000000	diff=7.55704e-13
 -0.000000	 -0.000000	diff=9.79818e-13
 -0.000000	 -0.000000	diff=7.88551e-15
 -0.000000	 -0.000000	diff=1.56849e-13
  0.000002	  0.000002	diff=2.92207e-11
 -0.000000	 -0.000000	diff=2.19045e-13
  0.000000	  0.000000	diff=9.03622e-13
  0.000000	  0.000000	diff=1.18643e-12
  0.000000	  0.000000	diff=9.14766e-13
 -0.000000	 -0.000000	diff=6.59616e-13
  0.000000	  0.000000	diff=1.7461e-12
  0.000000	  0.000000	diff=7.02798e-13
 -0.000002	 -0.000002	diff=6.54891e-11
  0.000000	  0.000000	diff=8.14202e-12
  0.000000	  0.000000	diff=1.69517e-13
 -0.000000	 -0.000000	diff=1.85591e-12
  0.000000	  0.000000	diff=4.54406e-13
 -0.000000	 -0.000000	diff=8.65853e-13
  0.000000	  0.000000	diff=3.56291e-13
  0.000000	  0.000000	diff=8.97682e-13
 -0.000000	 -0.000000	diff=4.17886e-11
 -0.000000	 -0.000000	diff=8.24745e-13
 -0.000000	 -0.000000	diff=2.21978e-13
  0.000000	  0.000000	diff=2.03551e-13
 -0.000000	 -0.000000	diff=4.96983e-13
  0.000000	  0.000000	diff=3.39849e-13
 -0.000000	 -0.000000	diff=6.24318e-13
 -0.000000	 -0.000000	diff=2.8405e-13
  0.000000	  0.000000	diff=1.47062e-13
  0.000000	  0.000000	diff=3.55188e-11
  local_diff=1.96908e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=3.61688e-14
  0.000000	  0.000000	diff=1.89753e-13
 -0.000000	 -0.000000	diff=8.6615e-14
  0.000000	  0.000000	diff=2.72912e-13
  0.000000	  0.000000	diff=8.76603e-13
 -0.000000	 -0.000000	diff=1.1472e-12
  0.000000	  0.000000	diff=1.12633e-12
  0.000002	  0.000002	diff=3.74207e-13
 -0.000000	 -0.000000	diff=1.4414e-12
 -0.000000	 -0.000000	diff=1.12146e-12
  0.000000	  0.000000	diff=1.17538e-12
 -0.000000	 -0.000000	diff=2.56228e-13
 -0.000000	 -0.000000	diff=1.0345e-13
  0.000000	  0.000000	diff=3.4876e-13
 -0.000000	 -0.000000	diff=3.67852e-13
 -0.000002	 -0.000002	diff=1.23209e-12
 -0.000000	 -0.000000	diff=1.80484e-13
  0.000000	  0.000000	diff=4.0124e-15
 -0.000000	 -0.000000	diff=4.60343e-13
  0.000000	  0.000000	diff=1.79134e-14
  0.000000	  0.000000	diff=7.59726e-13
 -0.000000	 -0.000000	diff=3.03113e-14
  0.000000	  0.000000	diff=1.43304e-10
  0.000000	  0.000000	diff=2.66289e-14
  0.000000	  0.000000	diff=6.09326e-13
 -0.000000	 -0.000000	diff=1.5956e-13
  0.000000	  0.000000	diff=1.09624e-13
 -0.000000	 -0.000000	diff=3.32583e-13
 -0.000000	 -0.000000	diff=6.52091e-13
  0.000000	  0.000000	diff=5.19828e-13
 -0.000000	 -0.000000	diff=7.31491e-13
 -0.000000	 -0.000000	diff=1.84879e-10
  local_diff=3.42933e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=4.9091e-13
  0.000000	  0.000000	diff=1.00469e-14
  0.000000	  0.000000	diff=2.17734e-13
  0.000000	  0.000000	diff=5.47973e-12
  0.000000	  0.000000	diff=5.41376e-13
  0.000000	  0.000000	diff=1.90726e-12
 -0.000008	 -0.000008	diff=2.0099e-10
 -0.000024	 -0.000024	diff=2.22004e-10
 -0.000000	 -0.000000	diff=8.24807e-13
 -0.000000	 -0.000000	diff=1.50854e-12
  0.000000	  0.000000	diff=1.31917e-13
 -0.000000	 -0.000000	diff=7.82098e-12
 -0.000000	 -0.000000	diff=4.84958e-13
 -0.000000	 -0.000000	diff=1.16088e-12
  0.000019	  0.000019	diff=7.2215e-10
  0.000046	  0.000046	diff=5.77707e-11
  0.000000	  0.000000	diff=5.86682e-13
  0.000000	  0.000000	diff=2.76534e-13
 -0.000000	  0.000000	diff=1.63498e-12
  0.000000	  0.000000	diff=2.61085e-13
  0.000000	  0.000000	diff=4.06471e-13
  0.000000	  0.000000	diff=1.74334e-13
 -0.000000	 -0.000000	diff=6.33439e-13
 -0.000000	 -0.000000	diff=5.33589e-13
  0.000000	  0.000000	diff=3.2896e-14
  0.000000	  0.000000	diff=3.38738e-13
 -0.000000	  0.000000	diff=7.66457e-13
  0.000000	  0.000000	diff=1.5528e-13
  0.000000	  0.000000	diff=7.48376e-14
 -0.000000	  0.000000	diff=1.1522e-12
 -0.000000	 -0.000000	diff=5.00222e-13
 -0.000000	 -0.000000	diff=9.67295e-14
 -0.000000	 -0.000000	diff=6.95947e-13
 -0.000000	 -0.000000	diff=6.43525e-13
 -0.000000	 -0.000000	diff=1.1932e-12
 -0.000000	 -0.000000	diff=3.35078e-13
 -0.000000	 -0.000000	diff=1.02995e-12
 -0.000000	 -0.000000	diff=7.79521e-14
 -0.000000	 -0.000000	diff=1.16996e-10
  0.000000	  0.000000	diff=1.26669e-11
 -0.000000	 -0.000000	diff=9.57422e-13
 -0.000000	 -0.000000	diff=2.00963e-13
 -0.000000	 -0.000000	diff=8.04717e-13
 -0.000000	 -0.000000	diff=1.63647e-12
 -0.000000	 -0.000000	diff=1.22917e-12
 -0.000000	 -0.000000	diff=7.15985e-14
  0.000000	  0.000000	diff=2.97873e-12
  0.000000	  0.000000	diff=4.05319e-11
  local_diff=1.41317e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.02271e-12
 -0.000000	 -0.000000	diff=4.61336e-13
 -0.000000	 -0.000000	diff=1.3284e-12
 -0.000000	 -0.000000	diff=1.82194e-13
 -0.000000	 -0.000000	diff=1.13367e-13
 -0.000000	 -0.000000	diff=5.83961e-13
  0.000001	  0.000001	diff=1.41442e-12
 -0.000002	 -0.000002	diff=4.22878e-12
 -0.000000	 -0.000000	diff=2.14177e-13
 -0.000000	 -0.000000	diff=2.50555e-13
  0.000000	  0.000000	diff=1.00918e-12
 -0.000000	 -0.000000	diff=7.61379e-13
 -0.000000	 -0.000000	diff=7.27639e-13
 -0.000000	 -0.000000	diff=7.2763e-14
 -0.000022	 -0.000022	diff=1.14518e-10
 -0.000021	 -0.000021	diff=5.86769e-11
  0.000000	  0.000000	diff=1.14382e-12
 -0.000000	 -0.000000	diff=2.36084e-13
 -0.000000	 -0.000000	diff=2.89397e-13
  0.000000	  0.000000	diff=1.46348e-12
 -0.000000	 -0.000000	diff=6.77268e-13
  0.000000	  0.000000	diff=5.12047e-13
  0.000000	  0.000000	diff=5.95825e-10
  0.000000	  0.000000	diff=1.86616e-11
  0.000000	  0.000000	diff=5.81175e-14
  0.000000	  0.000000	diff=9.51682e-13
  0.000000	  0.000000	diff=6.81752e-13
  0.000000	  0.000000	diff=4.12256e-13
  0.000000	  0.000000	diff=6.05057e-13
  0.000000	  0.000000	diff=1.9368e-13
  0.000000	  0.000000	diff=2.71771e-12
  0.000000	  0.000000	diff=1.38819e-09
  local_diff=2.19819e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=4.71651e-10
  0.000001	  0.000001	diff=1.39325e-09
 -0.000001	 -0.000001	diff=3.20918e-10
  0.000001	  0.000001	diff=9.23249e-10
  local_diff=3.10906e-09
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=6.28677e-13
 -0.000000	  0.000000	diff=1.4757e-12
  0.000000	  0.000000	diff=2.76132e-14
  0.000000	 -0.000000	diff=1.73116e-14
 -0.000000	 -0.000000	diff=1.39334e-12
 -0.000000	  0.000000	diff=7.33792e-13
 -0.000000	 -0.000000	diff=9.15211e-13
 -0.000000	 -0.000000	diff=6.23316e-14
  0.000000	 -0.000000	diff=1.02991e-13
 -0.000000	  0.000000	diff=1.47041e-12
 -0.000000	  0.000000	diff=7.33946e-13
  0.000000	 -0.000000	diff=1.20289e-14
 -0.000000	 -0.000000	diff=6.71703e-13
 -0.000000	  0.000000	diff=7.30338e-13
 -0.000000	 -0.000000	diff=9.78082e-13
 -0.000000	 -0.000000	diff=3.88734e-13
  0.000000	  0.000000	diff=2.88998e-16
  0.000000	 -0.000000	diff=1.7829e-16
  0.000000	 -0.000000	diff=3.00146e-16
  0.000000	  0.000000	diff=1.22871e-16
  0.000000	  0.000000	diff=3.37053e-17
  0.000000	 -0.000000	diff=6.72763e-17
  0.000000	 -0.000000	diff=4.11779e-13
  0.000000	 -0.000000	diff=1.47234e-13
  0.000000	 -0.000000	diff=3.95815e-16
  0.000000	  0.000000	diff=2.63513e-16
  0.000000	  0.000000	diff=3.48791e-16
  0.000000	 -0.000000	diff=1.53071e-16
  0.000000	 -0.000000	diff=8.07366e-17
  0.000000	  0.000000	diff=1.15348e-16
  0.000000	  0.000000	diff=3.98657e-13
  0.000000	  0.000000	diff=1.40182e-13
  local_diff=1.14424e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=6.78798e-17
  0.000000	 -0.000000	diff=1.01088e-16
  0.000000	  0.000000	diff=6.27624e-18
  0.000000	  0.000000	diff=7.72937e-18
  0.000000	 -0.000000	diff=9.51503e-18
  0.000000	 -0.000000	diff=2.1103e-17
 -0.000000	 -0.000000	diff=3.94102e-13
 -0.000000	 -0.000000	diff=9.2037e-13
  0.000000	  0.000000	diff=7.23768e-17
  0.000000	  0.000000	diff=8.52174e-17
  0.000000	 -0.000000	diff=1.75636e-17
  0.000000	 -0.000000	diff=1.73033e-17
  0.000000	 -0.000000	diff=6.44951e-18
  0.000000	  0.000000	diff=2.47817e-20
  0.000000	  0.000000	diff=6.33537e-13
  0.000000	  0.000000	diff=1.67195e-13
  0.000000	  0.000000	diff=1.39573e-19
  0.000000	  0.000000	diff=2.98716e-20
  0.000000	 -0.000000	diff=1.04275e-18
  0.000000	 -0.000000	diff=1.55384e-18
  0.000000	 -0.000000	diff=2.5514e-19
  0.000000	 -0.000000	diff=5.83355e-19
  0.000000	 -0.000000	diff=8.59521e-14
 -0.000000	 -0.000000	diff=5.32417e-13
  0.000000	  0.000000	diff=9.14132e-20
  0.000000	  0.000000	diff=4.80463e-20
  0.000000	 -0.000000	diff=8.70577e-19
  0.000000	 -0.000000	diff=1.40851e-18
  0.000000	 -0.000000	diff=2.25333e-19
  0.000000	 -0.000000	diff=5.50408e-19
  0.000000	 -0.000000	diff=7.89296e-14
 -0.000000	 -0.000000	diff=5.46625e-13
  local_diff=3.35955e-12
# W_src_char{3}, [8 4]
  0.000000	  0.000000	diff=1.3354e-19
  0.000000	 -0.000000	diff=1.60356e-18
  0.000000	 -0.000000	diff=9.99902e-21
  0.000000	 -0.000000	diff=5.04013e-19
  0.000000	  0.000000	diff=7.55863e-20
  0.000000	  0.000000	diff=1.97161e-19
  0.000000	  0.000000	diff=5.66286e-13
  0.000000	  0.000000	diff=8.77713e-13
  0.000000	  0.000000	diff=1.57797e-19
  0.000000	 -0.000000	diff=1.77173e-18
  0.000000	 -0.000000	diff=1.87518e-20
  0.000000	 -0.000000	diff=4.35798e-19
  0.000000	  0.000000	diff=1.16233e-19
  0.000000	 -0.000000	diff=1.08621e-20
  0.000000	  0.000000	diff=6.47535e-13
  0.000000	  0.000000	diff=8.13177e-13
  0.000000	  0.000000	diff=6.6655e-22
  0.000000	  0.000000	diff=1.10155e-20
  0.000000	 -0.000000	diff=5.7124e-22
  0.000000	  0.000000	diff=3.75872e-20
  0.000000	  0.000000	diff=1.31397e-21
  0.000000	  0.000000	diff=1.73074e-20
  0.000000	  0.000000	diff=4.78525e-15
  0.000000	 -0.000000	diff=1.45892e-13
  0.000000	  0.000000	diff=6.93637e-22
  0.000000	  0.000000	diff=1.84254e-20
  0.000000	 -0.000000	diff=1.97778e-21
  0.000000	  0.000000	diff=7.09941e-20
  0.000000	  0.000000	diff=1.52458e-21
  0.000000	  0.000000	diff=2.62367e-20
 -0.000000	  0.000000	diff=7.21719e-13
  0.000000	 -0.000000	diff=2.68274e-13
  local_diff=4.04539e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.01234e-12
 -0.000000	 -0.000000	diff=9.58522e-13
  0.000000	  0.000000	diff=4.55375e-13
 -0.000000	 -0.000000	diff=6.98163e-13
  0.000000	  0.000000	diff=6.45262e-14
 -0.000000	 -0.000000	diff=3.4225e-13
  0.000000	  0.000000	diff=2.3925e-13
 -0.000000	 -0.000000	diff=2.44537e-13
  local_diff=4.01497e-12
# W_emb_tgt, [2 5]
  0.000036	  0.000036	diff=2.40095e-09
  0.000003	  0.000003	diff=4.06503e-09
 -0.000002	 -0.000002	diff=1.40437e-09
  0.000002	  0.000002	diff=1.29645e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.15697e-10
  0.000006	  0.000006	diff=5.5432e-10
  0.000000	  0.000000	diff=2.99753e-10
  local_diff=1.04366e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=5.09096e-13
  0.000000	  0.000000	diff=5.08133e-13
  0.000000	  0.000000	diff=3.31661e-13
  0.000000	  0.000000	diff=3.2969e-13
  local_diff=1.67858e-12
# v_pos, [1 2]
 -0.000000	 -0.000000	diff=4.92702e-14
 -0.000000	 -0.000000	diff=1.5459e-12
  local_diff=1.59517e-12
# W_h, [2 4]
 -0.000001	 -0.000001	diff=5.49594e-13
  0.000003	  0.000003	diff=4.05782e-13
  0.000001	  0.000001	diff=5.44281e-13
 -0.000003	 -0.000003	diff=1.12297e-12
  0.000007	  0.000007	diff=8.82302e-12
 -0.000009	 -0.000009	diff=7.21933e-12
  0.000021	  0.000021	diff=1.84132e-10
 -0.000015	 -0.000015	diff=2.08898e-10
  local_diff=4.11695e-10
# W_soft, [5 2]
  0.000001	  0.000001	diff=2.85857e-14
  0.000012	  0.000012	diff=1.90707e-13
 -0.000022	 -0.000022	diff=4.16675e-14
  0.000014	  0.000014	diff=1.3064e-13
 -0.000005	 -0.000005	diff=3.18943e-13
 -0.000004	 -0.000004	diff=4.12685e-13
  0.000002	  0.000002	diff=1.00693e-12
 -0.000004	 -0.000004	diff=1.26165e-13
  0.000003	  0.000003	diff=1.70899e-12
  0.000003	  0.000003	diff=1.26081e-12
  local_diff=5.22613e-12
# Num params=294, abs_diff=1.81399e-08
Elapsed time is 6.249902 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.89253e-14
 -0.000000	 -0.000000	diff=3.80665e-13
  0.011919	  0.012356	diff=0.000436738
  0.000000	 -0.000000	diff=1.29395e-40
  0.000000	 -0.000000	diff=2.65023e-25
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.41404e-45
  0.000000	 -0.000000	diff=2.22235e-14
  0.000000	  0.000000	diff=7.91298e-13
 -0.015140	 -0.014509	diff=0.000631498
  0.000000	  0.000000	diff=1.39212e-40
  0.000000	 -0.000000	diff=3.6014e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.27927e-45
  0.000000	 -0.000000	diff=1.78724e-15
  0.000000	  0.000000	diff=5.13634e-39
 -0.001200	 -0.001196	diff=4.19215e-06
  0.000000	  0.000000	diff=1.24599e-41
  0.000000	  0.000000	diff=2.39132e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.35452e-56
  0.000000	  0.000000	diff=1.78724e-15
  0.000000	 -0.000000	diff=5.13634e-39
  0.001192	  0.001196	diff=4.17447e-06
  0.000000	 -0.000000	diff=1.23898e-41
  0.000000	 -0.000000	diff=2.36631e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.3542e-56
  local_diff=0.0010766
# W_tgt{1}, [8 6]
 -0.766914	 -0.785267	diff=0.018353
  0.000000	  0.000000	diff=1.06531e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.8815e-12
 -9.037399	 -9.410081	diff=0.372682
  0.054244	  0.055534	diff=0.00128949
 -0.000000	 -0.000000	diff=3.22055e-11
  0.000000	 -0.000000	diff=2.24719e-27
  1.007635	  0.981278	diff=0.0263573
  0.000000	  0.000000	diff=1.39069e-11
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.38594e-09
 12.379994	 11.758937	diff=0.621058
 -0.071480	 -0.069396	diff=0.00208473
  0.000000	  0.000000	diff=1.10955e-09
  0.000000	  0.000000	diff=1.34546e-26
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=1.49381e-27
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
  0.000000	 -0.000000	diff=2.84648e-29
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=3.20479e-13
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
 -0.000000	 -0.000000	diff=3.90064e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  local_diff=1.04184
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.35585e-26
  0.000000	  0.000000	diff=2.8781e-25
  0.011324	  0.011717	diff=0.000393193
  0.010423	  0.010755	diff=0.000331839
  local_diff=0.000725031
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.22647e-11
 -0.000000	 -0.000000	diff=7.69642e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-11.591312	-12.408891	diff=0.817579
-10.192270	-10.804343	diff=0.612073
  0.000000	  0.000000	diff=1.82339e-09
  0.000000	  0.000000	diff=2.75363e-10
  local_diff=1.42965
# W_soft, [5 2]
  0.117985	  0.117958	diff=2.65055e-05
  0.128902	  0.128874	diff=2.84991e-05
 -0.253645	 -0.253670	diff=2.57773e-05
 -0.106455	 -0.106480	diff=2.53615e-05
  0.113363	  0.113319	diff=4.41675e-05
 -0.001808	 -0.001808	diff=8.08635e-09
 -0.001955	 -0.001955	diff=8.59921e-09
  0.002521	  0.002521	diff=7.92679e-09
  0.001512	  0.001512	diff=7.7748e-09
 -0.000270	 -0.000270	diff=1.26002e-08
  local_diff=0.000150356
# Num params=110, abs_diff=2.47345
Elapsed time is 0.743563 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.34816e-20
 -0.000000	 -0.000000	diff=2.53023e-09
  0.000000	  0.000000	diff=4.3787e-23
  0.000000	 -0.000000	diff=2.83846e-15
  0.000000	 -0.000000	diff=2.28652e-28
  0.000000	  0.000000	diff=3.16321e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.98503e-20
  0.000000	  0.000000	diff=3.93833e-09
  0.000000	 -0.000000	diff=5.56607e-23
  0.000000	  0.000000	diff=3.60822e-15
  0.000000	  0.000000	diff=2.87025e-28
  0.000000	 -0.000000	diff=4.73009e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.51073e-51
  0.000000	  0.000000	diff=5.03598e-38
  0.000000	 -0.000000	diff=6.16669e-54
  0.000000	  0.000000	diff=7.00845e-46
  0.000000	  0.000000	diff=1.10983e-58
  0.000000	  0.000000	diff=2.51678e-53
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.8831e-45
  0.000000	 -0.000000	diff=2.23274e-32
  0.000000	  0.000000	diff=5.80397e-48
  0.000000	 -0.000000	diff=3.76267e-40
  0.000000	 -0.000000	diff=1.84266e-52
  0.000000	 -0.000000	diff=2.51047e-47
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=6.46857e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.55428e-54
  0.000000	  0.000000	diff=8.76417e-53
  0.000000	 -0.000000	diff=1.31334e-54
  0.000000	  0.000000	diff=3.68385e-53
  0.000000	  0.000000	diff=1.67269e-54
  0.000000	  0.000000	diff=2.26763e-52
  0.000000	  0.000000	diff=1.02191e-29
  0.000000	  0.000000	diff=1.48421e-29
  0.000000	  0.000000	diff=1.97708e-48
  0.000000	 -0.000000	diff=1.69155e-47
  0.000000	  0.000000	diff=5.19604e-49
  0.000000	 -0.000000	diff=1.38666e-47
  0.000000	  0.000000	diff=3.01272e-48
  0.000000	 -0.000000	diff=8.27168e-47
  0.000000	 -0.000000	diff=9.0586e-24
  0.000000	  0.000000	diff=2.23467e-23
  0.000000	 -0.000000	diff=1.84561e-48
  0.000000	  0.000000	diff=3.1409e-48
  0.000000	  0.000000	diff=4.54393e-49
  0.000000	  0.000000	diff=1.14558e-48
  0.000000	 -0.000000	diff=1.83828e-48
  0.000000	  0.000000	diff=9.21113e-48
  0.000000	  0.000000	diff=6.85573e-25
  0.000000	 -0.000000	diff=2.36092e-24
  0.000000	 -0.000000	diff=1.01887e-47
  0.000000	 -0.000000	diff=7.26663e-47
  0.000000	  0.000000	diff=2.82651e-48
  0.000000	 -0.000000	diff=2.63008e-47
  0.000000	 -0.000000	diff=1.01827e-47
  0.000000	 -0.000000	diff=2.60012e-46
  0.000000	 -0.000000	diff=2.47598e-24
  0.000000	  0.000000	diff=1.0339e-24
  local_diff=3.79617e-23
# W_tgt{1}, [8 6]
 -0.000004	 -0.000004	diff=4.98508e-09
  0.050148	  0.048173	diff=0.00197547
 -0.000001	 -0.000001	diff=9.19684e-10
 -0.004852	 -0.004846	diff=6.11891e-06
 -0.000004	 -0.000004	diff=5.01857e-09
-16.861985	-16.882693	diff=0.0207085
 -0.000000	 -0.000000	diff=2.24089e-12
 -0.075760	 -0.075641	diff=0.000118743
 -0.000018	 -0.000018	diff=1.17178e-07
  0.286069	  0.239398	diff=0.0466703
 -0.000004	 -0.000004	diff=1.53264e-08
 -0.023675	 -0.023531	diff=0.000144739
 -0.000018	 -0.000019	diff=1.17959e-07
-64.009606	-64.502290	diff=0.492685
 -0.000000	 -0.000000	diff=5.06447e-12
 -0.370083	 -0.367324	diff=0.00275931
 -0.000003	 -0.000003	diff=2.8759e-09
 -0.092075	 -0.092172	diff=9.71693e-05
 -0.000000	 -0.000000	diff=5.83548e-11
  0.000138	  0.000138	diff=1.60813e-08
 -0.000003	 -0.000003	diff=2.98059e-09
  0.268381	  0.268231	diff=0.000150384
 -0.000000	 -0.000000	diff=1.88724e-12
 -0.095132	 -0.094937	diff=0.000195029
  0.000005	  0.000005	diff=6.1152e-09
  0.080428	  0.079878	diff=0.00055015
  0.000000	  0.000000	diff=3.99928e-12
  0.000395	  0.000395	diff=1.31383e-07
  0.000004	  0.000004	diff=5.45053e-09
  0.823579	  0.822744	diff=0.000835628
  0.000000	  0.000000	diff=1.41454e-12
  0.120081	  0.120523	diff=0.000441736
  0.000000	  0.000000	diff=2.37094e-13
 -0.000000	 -0.000000	diff=1.57625e-12
  0.000000	  0.000000	diff=5.50291e-13
  0.000000	  0.000000	diff=1.12205e-12
  0.000000	  0.000000	diff=1.65518e-13
  0.000001	  0.000001	diff=7.18465e-13
  0.000000	  0.000000	diff=3.33371e-17
 -0.000000	 -0.000000	diff=6.37372e-13
 -0.000002	 -0.000002	diff=1.67656e-09
  0.167861	  0.166870	diff=0.000990917
  0.000000	  0.000000	diff=3.56582e-11
 -0.000657	 -0.000656	diff=7.12819e-07
 -0.000001	 -0.000001	diff=4.07367e-10
 -0.704294	 -0.705065	diff=0.00077068
 -0.000000	 -0.000000	diff=1.96455e-12
 -0.007005	 -0.007064	diff=5.90446e-05
  local_diff=0.56916
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.80799e-13
  0.000003	  0.000003	diff=1.17527e-12
  0.000001	  0.000001	diff=1.04317e-12
  0.000000	  0.000000	diff=1.1646e-12
  0.000000	  0.000000	diff=1.85515e-13
  0.000004	  0.000004	diff=8.67471e-13
 -0.000003	 -0.000003	diff=7.61113e-13
  0.000003	  0.000003	diff=7.73975e-13
  0.050823	  0.050903	diff=8.01664e-05
 -2.046568	 -2.047222	diff=0.000653766
 -0.207671	 -0.207474	diff=0.000197039
 -0.402314	 -0.402361	diff=4.70955e-05
 -0.077828	 -0.076264	diff=0.00156383
 -2.684246	 -2.690338	diff=0.00609235
  0.696532	  0.700552	diff=0.00401905
 -3.778872	 -3.779618	diff=0.000745874
 -0.128987	 -0.129030	diff=4.26756e-05
  0.061208	  0.061151	diff=5.68663e-05
 -0.126904	 -0.126919	diff=1.4947e-05
 -0.070657	 -0.070722	diff=6.55408e-05
 -0.291341	 -0.291436	diff=9.54034e-05
 -0.097532	 -0.097713	diff=0.000181571
  1.118120	  1.118619	diff=0.000499494
  0.380550	  0.379815	diff=0.000735855
  0.012946	  0.013209	diff=0.000263206
  0.461725	  0.461779	diff=5.36815e-05
  0.191919	  0.191890	diff=2.89226e-05
  0.679034	  0.678886	diff=0.000147656
  0.083802	  0.084460	diff=0.000658393
  1.541852	  1.540874	diff=0.000977706
 -1.205213	 -1.205056	diff=0.000157264
  4.465138	  4.463566	diff=0.00157229
  local_diff=0.0189506
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.02828e-09
 -0.000000	 -0.000000	diff=9.2605e-09
 -0.000000	 -0.000000	diff=2.94841e-12
 -0.000000	 -0.000000	diff=4.24691e-12
  local_diff=1.6296e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.57964e-09
  0.000000	  0.000000	diff=3.29025e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-46.634814	-48.192947	diff=1.55813
 23.595116	 22.914322	diff=0.680794
-63.733324	-63.722799	diff=0.0105255
 32.900101	 32.948650	diff=0.0485487
  local_diff=2.298
# W_soft, [5 2]
 -0.194189	 -0.194362	diff=0.000173622
 -0.792482	 -0.792957	diff=0.00047466
  0.789507	  0.789365	diff=0.00014269
  0.710923	  0.710812	diff=0.00011126
 -0.512379	 -0.512858	diff=0.000478206
  0.259154	  0.258965	diff=0.000189717
  1.222390	  1.221652	diff=0.000737428
 -0.731666	 -0.731842	diff=0.000175899
 -1.237164	 -1.237267	diff=0.000103252
  0.489267	  0.488492	diff=0.000774967
  local_diff=0.0033617
# Num params=174, abs_diff=2.88947
Elapsed time is 1.391980 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.05792e-13
  0.000000	  0.000000	diff=2.53484e-11
  0.000000	  0.000000	diff=1.75957e-17
  0.000000	 -0.000000	diff=4.30662e-21
  0.000165	  0.000169	diff=3.88032e-06
  0.000000	  0.000000	diff=2.26316e-19
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.31863e-18
  0.000000	 -0.000000	diff=3.43153e-26
 -0.000000	 -0.000000	diff=3.86931e-11
  0.000000	 -0.000000	diff=6.93468e-30
  0.000000	  0.000000	diff=5.47442e-21
  0.000000	 -0.000000	diff=2.10102e-35
  0.000000	 -0.000000	diff=1.15918e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.72548e-14
  0.000000	 -0.000000	diff=1.60375e-31
  0.000000	 -0.000000	diff=2.86987e-18
  0.000000	  0.000000	diff=6.57819e-32
 -0.000028	 -0.000028	diff=1.05142e-07
  0.000000	 -0.000000	diff=3.6913e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.77983e-19
  0.000000	  0.000000	diff=9.96869e-30
  0.000000	  0.000000	diff=1.84957e-41
  0.000000	  0.000000	diff=1.65824e-33
  0.000000	 -0.000000	diff=3.60782e-48
  0.000000	  0.000000	diff=1.59079e-20
  0.000000	 -0.000000	diff=1.27157e-36
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.78485e-34
  local_diff=3.98552e-06
# W_src{2}, [8 4]
  0.000156	  0.000155	diff=7.41308e-07
 -0.051950	 -0.051700	diff=0.000249554
  0.000002	  0.000002	diff=9.04276e-09
 -0.000395	 -0.000397	diff=1.88223e-06
  0.074041	  0.074211	diff=0.000169735
  0.015131	  0.015085	diff=4.60317e-05
  0.000000	  0.000000	diff=1.70435e-09
 -0.000000	 -0.000000	diff=8.95798e-11
  0.000000	 -0.000000	diff=1.04337e-60
  0.000000	  0.000000	diff=7.70033e-59
  0.000000	 -0.000000	diff=1.38359e-60
  0.000000	  0.000000	diff=1.86874e-59
  0.000000	 -0.000000	diff=3.10002e-60
  0.000000	  0.000000	diff=8.22314e-59
  0.000000	  0.000000	diff=1.00804e-29
  0.000000	  0.000000	diff=6.01278e-29
 -0.000001	 -0.000001	diff=3.38417e-09
 -0.025529	 -0.025469	diff=6.0629e-05
  0.000000	  0.000000	diff=6.1963e-11
 -0.000195	 -0.000195	diff=4.56596e-07
 -0.014545	 -0.014577	diff=3.201e-05
  0.008044	  0.008026	diff=1.81218e-05
  0.000000	  0.000000	diff=4.27358e-10
 -0.000000	 -0.000000	diff=7.18604e-11
  0.000001	  0.000001	diff=1.38785e-09
  0.020501	  0.020540	diff=3.89527e-05
 -0.000001	 -0.000001	diff=5.53349e-09
  0.000158	  0.000158	diff=2.98779e-07
 -0.077118	 -0.077009	diff=0.000109619
  0.006137	  0.006129	diff=7.8771e-06
 -0.000000	 -0.000000	diff=2.57831e-10
  0.000000	  0.000000	diff=4.56238e-11
  local_diff=0.000735931
# W_tgt{1}, [8 6]
  0.000068	  0.000068	diff=1.77923e-07
 -0.377777	 -0.375082	diff=0.00269499
  0.000038	  0.000038	diff=5.64938e-10
  0.179689	  0.179851	diff=0.000162355
  0.000086	  0.000086	diff=1.94569e-07
  0.430188	  0.390988	diff=0.0392
  0.000015	  0.000015	diff=5.30743e-08
 -0.037834	 -0.037604	diff=0.000229806
 -0.000000	 -0.000000	diff=2.53059e-09
 -0.335776	 -0.257176	diff=0.0786002
  0.000000	  0.000000	diff=2.89869e-09
  0.002525	  0.002506	diff=1.96204e-05
 -0.000000	 -0.000000	diff=2.47296e-09
  4.101734	  3.545747	diff=0.555988
 -0.000000	 -0.000000	diff=5.12821e-13
 -0.129065	 -0.124496	diff=0.00456849
 -0.000000	 -0.000000	diff=1.44817e-11
  0.016114	  0.016652	diff=0.000537924
  0.000000	  0.000000	diff=2.58485e-12
 -0.000028	 -0.000028	diff=1.18119e-10
  0.000001	  0.000001	diff=9.44108e-12
 -0.009378	 -0.009462	diff=8.34718e-05
  0.000000	  0.000000	diff=3.45116e-13
  0.003196	  0.003198	diff=1.76973e-06
  0.000000	  0.000000	diff=1.08825e-10
  0.004006	  0.005904	diff=0.00189828
  0.000005	  0.000005	diff=1.34465e-10
 -0.000122	 -0.000122	diff=7.82769e-08
  0.000009	  0.000009	diff=2.47621e-09
 -0.774061	 -0.774462	diff=0.00040099
  0.000000	  0.000000	diff=1.11953e-12
  0.008891	  0.008938	diff=4.66139e-05
 -0.000000	 -0.000000	diff=1.24573e-09
  0.000263	  0.000262	diff=7.83304e-07
 -0.000018	 -0.000018	diff=1.62356e-09
  0.000036	  0.000036	diff=1.03458e-07
 -0.000030	 -0.000030	diff=3.13933e-08
  0.000281	  0.000280	diff=8.98631e-07
 -0.000000	 -0.000000	diff=2.92322e-13
  0.000000	  0.000000	diff=1.08686e-12
 -0.000000	 -0.000000	diff=7.96117e-12
  0.002446	  0.003417	diff=0.000971146
 -0.000001	 -0.000001	diff=1.05707e-11
  0.000058	  0.000058	diff=1.59554e-08
 -0.000002	 -0.000002	diff=1.94472e-10
  0.417876	  0.417789	diff=8.67988e-05
 -0.000000	 -0.000000	diff=3.22329e-13
 -0.003831	 -0.003815	diff=1.58554e-05
  local_diff=0.685509
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=6.66348e-13
  0.000000	  0.000000	diff=6.10105e-13
  0.000000	  0.000000	diff=9.65873e-13
  0.000000	  0.000000	diff=1.90049e-12
 -0.000000	 -0.000000	diff=1.11083e-12
  0.000000	  0.000000	diff=1.87989e-12
 -0.000000	 -0.000000	diff=1.35319e-12
  0.000000	  0.000000	diff=5.8262e-13
  0.217844	  0.218061	diff=0.00021704
 -0.472190	 -0.469976	diff=0.00221478
 -0.097230	 -0.097174	diff=5.5989e-05
 -0.325293	 -0.325539	diff=0.000246364
  0.557278	  0.559871	diff=0.00259358
 -1.526243	 -1.518094	diff=0.00814958
 -1.531277	 -1.529493	diff=0.00178395
 -0.515424	 -0.514534	diff=0.000889868
  0.068274	  0.068202	diff=7.15025e-05
 -0.053350	 -0.053277	diff=7.3371e-05
 -0.124763	 -0.124748	diff=1.50754e-05
 -0.005424	 -0.005436	diff=1.22185e-05
 -0.075474	 -0.075506	diff=3.23948e-05
 -0.183737	 -0.183720	diff=1.71131e-05
  0.407739	  0.407946	diff=0.000207326
 -0.249140	 -0.250224	diff=0.00108407
  0.072757	  0.072690	diff=6.67605e-05
  0.288081	  0.288275	diff=0.000194448
  0.089550	  0.089540	diff=9.712e-06
  0.362486	  0.363060	diff=0.000573974
 -0.168338	 -0.167893	diff=0.000445409
  1.041265	  1.041665	diff=0.000400359
 -0.279811	 -0.279331	diff=0.000480321
  3.008567	  3.001825	diff=0.00674267
  local_diff=0.0265779
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.09246e-10
  0.000000	  0.000000	diff=9.31547e-11
  0.000118	  0.000120	diff=1.95821e-06
  0.000000	 -0.000000	diff=6.74767e-15
  local_diff=1.95882e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.02899e-11
 -0.000000	 -0.000000	diff=3.4354e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 29.868986	 30.897636	diff=1.02865
-15.147911	-14.914619	diff=0.233291
 -4.963032	 -5.462542	diff=0.49951
  2.964002	  2.824189	diff=0.139814
  local_diff=1.90126
# W_soft, [5 2]
 -0.169247	 -0.169422	diff=0.000174874
 -0.453029	 -0.453367	diff=0.000338023
  0.500466	  0.500293	diff=0.000173735
  0.537580	  0.537427	diff=0.000153904
 -0.414584	 -0.414930	diff=0.000346442
 -0.109892	 -0.110159	diff=0.000267945
  0.622417	  0.621976	diff=0.000441468
  0.210969	  0.210769	diff=0.00019921
 -1.050254	 -1.050476	diff=0.000222186
  0.328336	  0.327891	diff=0.000444995
  local_diff=0.00276278
# Num params=174, abs_diff=2.61686
Elapsed time is 1.555278 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=4.93503e-18
  0.000000	 -0.000000	diff=3.19414e-09
  0.000000	 -0.000000	diff=2.44249e-21
  0.000000	 -0.000000	diff=3.08856e-20
 -0.000024	 -0.000025	diff=7.41198e-07
  0.000000	  0.000000	diff=2.83662e-21
  0.000000	  0.000000	diff=0
 -0.004338	 -0.003739	diff=0.000598602
  0.000000	  0.000000	diff=8.36234e-18
 -0.000000	  0.000000	diff=5.10538e-09
  0.000000	 -0.000000	diff=5.85081e-30
  0.000000	  0.000000	diff=3.92607e-20
  0.000000	  0.000000	diff=2.00075e-35
  0.000000	  0.000000	diff=1.93182e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.37043e-65
  0.000000	  0.000000	diff=6.32063e-49
  0.000000	  0.000000	diff=3.04085e-22
  0.000000	  0.000000	diff=9.55397e-59
  0.000003	  0.000003	diff=1.18872e-08
  0.000000	 -0.000000	diff=3.52699e-22
  0.000000	  0.000000	diff=0
  0.000457	  0.000465	diff=8.08051e-06
  0.000000	  0.000000	diff=5.91871e-58
  0.000000	 -0.000000	diff=1.94462e-41
  0.000000	  0.000000	diff=4.20975e-41
  0.000000	 -0.000000	diff=2.93941e-51
  0.000000	  0.000000	diff=4.3221e-25
  0.000000	 -0.000000	diff=1.53881e-40
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.70234e-24
  local_diff=0.000607444
# W_src{2}, [8 4]
  0.000176	  0.000175	diff=8.10861e-07
 -0.001072	 -0.001068	diff=4.8646e-06
 -0.000006	 -0.000006	diff=2.76992e-08
  0.000009	  0.000009	diff=4.11615e-08
 -0.095347	 -0.095019	diff=0.000327664
  0.921614	  0.892052	diff=0.0295616
  0.000001	  0.000001	diff=7.21874e-09
 -0.000000	 -0.000000	diff=7.24867e-10
  0.000000	  0.000000	diff=6.51802e-61
  0.000000	 -0.000000	diff=9.79139e-59
  0.000000	 -0.000000	diff=1.92999e-60
  0.000000	  0.000000	diff=2.65102e-60
  0.000000	  0.000000	diff=1.80523e-60
  0.000000	 -0.000000	diff=6.46001e-59
  0.000000	  0.000000	diff=5.0982e-29
  0.000000	 -0.000000	diff=3.59476e-28
 -0.000006	 -0.000006	diff=1.38662e-08
 -0.001520	 -0.001516	diff=3.57357e-06
 -0.000000	 -0.000000	diff=2.80933e-10
 -0.000011	 -0.000011	diff=2.82381e-08
  0.051977	  0.051983	diff=6.17477e-06
  0.022476	  0.022467	diff=8.61443e-06
  0.000000	  0.000000	diff=1.73889e-09
 -0.000000	 -0.000000	diff=4.40835e-12
  0.000005	  0.000005	diff=1.0826e-08
 -0.000529	 -0.000533	diff=4.35019e-06
  0.000004	  0.000004	diff=1.62897e-08
 -0.000016	 -0.000016	diff=7.8695e-08
  0.183422	  0.182336	diff=0.00108665
 -0.719404	 -0.740052	diff=0.0206481
 -0.000000	 -0.000000	diff=1.18566e-09
  0.000000	  0.000000	diff=1.08773e-12
  local_diff=0.0516526
# W_tgt{1}, [8 6]
  0.000001	  0.000001	diff=2.19747e-09
  0.002266	  0.002363	diff=9.72871e-05
  0.000000	  0.000000	diff=4.32551e-12
  0.011301	  0.011283	diff=1.85713e-05
  0.000001	  0.000001	diff=2.20818e-09
  0.118309	  0.130815	diff=0.0125056
  0.000000	  0.000000	diff=1.1398e-12
  0.001645	  0.001653	diff=8.50111e-06
  0.000006	  0.000006	diff=5.15827e-08
  0.065185	  0.067860	diff=0.00267472
  0.000000	  0.000000	diff=4.87833e-11
  0.055231	  0.054791	diff=0.000439789
  0.000006	  0.000007	diff=5.18455e-08
 -1.550383	 -1.247777	diff=0.302606
  0.000000	  0.000000	diff=1.44921e-12
 -0.118018	 -0.118740	diff=0.000721926
  0.000001	  0.000001	diff=2.09766e-09
 -0.001827	 -0.001725	diff=0.000101285
 -0.000000	 -0.000000	diff=1.23039e-10
 -0.026644	 -0.026746	diff=0.000102817
 -0.000316	 -0.000315	diff=7.61028e-07
 -0.047123	 -0.046817	diff=0.000306806
  0.000001	  0.000001	diff=6.13507e-09
 -0.000442	 -0.000433	diff=8.51723e-06
 -0.000004	 -0.000004	diff=8.85394e-09
  0.010328	  0.010447	diff=0.00011902
 -0.000000	 -0.000000	diff=8.68028e-10
 -0.000704	 -0.000704	diff=2.19909e-08
 -0.000847	 -0.000842	diff=5.33828e-06
 -0.300936	 -0.301531	diff=0.000595316
  0.000003	  0.000003	diff=4.33726e-08
 -0.002802	 -0.002771	diff=3.04059e-05
 -0.000083	 -0.000083	diff=2.86866e-07
 -0.000050	 -0.000050	diff=1.97653e-07
 -0.000117	 -0.000116	diff=4.79512e-07
 -0.000064	 -0.000064	diff=2.61839e-07
  0.000484	  0.000486	diff=2.09958e-06
 -0.000011	 -0.000011	diff=4.4027e-08
 -0.000002	 -0.000002	diff=1.57142e-08
  0.000000	  0.000000	diff=1.02258e-11
  0.000001	  0.000001	diff=6.88076e-09
  0.000927	  0.000916	diff=1.04522e-05
  0.000000	  0.000000	diff=4.89584e-10
  0.002259	  0.002258	diff=7.12133e-07
  0.000627	  0.000630	diff=2.97819e-06
  0.079501	  0.079544	diff=4.22841e-05
 -0.000003	 -0.000003	diff=2.40266e-08
  0.000580	  0.000581	diff=7.55174e-07
  local_diff=0.320404
# W_tgt{2}, [8 4]
  0.000623	  0.000626	diff=2.82309e-06
 -0.000521	 -0.000521	diff=2.5315e-07
 -0.000003	 -0.000003	diff=1.36912e-08
  0.000336	  0.000335	diff=1.38493e-06
 -0.000708	 -0.000704	diff=3.80235e-06
  0.002136	  0.002146	diff=9.99194e-06
  0.000001	  0.000001	diff=3.62809e-09
  0.001020	  0.001025	diff=4.68635e-06
 -0.028184	 -0.028198	diff=1.35057e-05
 -0.698397	 -0.698107	diff=0.000289259
  0.005698	  0.005695	diff=3.21144e-06
 -0.012854	 -0.012841	diff=1.27889e-05
 -0.269652	 -0.271364	diff=0.00171247
 -1.439698	 -1.439778	diff=7.97449e-05
 -3.502950	 -3.498598	diff=0.00435172
 -1.256629	 -1.254933	diff=0.00169609
  0.055009	  0.055023	diff=1.35538e-05
  0.032590	  0.032581	diff=8.61794e-06
  0.014903	  0.014895	diff=7.44831e-06
 -0.059815	 -0.059821	diff=5.41646e-06
 -0.107267	 -0.106750	diff=0.000516204
 -0.001726	 -0.001739	diff=1.38488e-05
 -0.224488	 -0.224554	diff=6.61953e-05
 -0.754026	 -0.754435	diff=0.000408903
  0.807687	  0.806899	diff=0.000787914
  0.294375	  0.294421	diff=4.58131e-05
 -0.040411	 -0.040401	diff=9.91927e-06
 -0.375986	 -0.376130	diff=0.000144564
  0.350550	  0.350486	diff=6.32274e-05
  0.076409	  0.076324	diff=8.51704e-05
 -0.469218	 -0.469692	diff=0.000474252
 -4.537947	 -4.547018	diff=0.0090705
  local_diff=0.0199033
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000749	 -0.000730	diff=1.96452e-05
 -0.000000	 -0.000000	diff=2.39108e-11
  0.000000	  0.000000	diff=7.15057e-09
  0.000000	  0.000000	diff=8.25471e-09
  local_diff=1.96606e-05
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.54862e-12
 -0.000000	 -0.000000	diff=1.45275e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-30.217535	-26.560473	diff=3.65706
 12.763276	 13.667926	diff=0.90465
  7.149709	  7.083902	diff=0.0658071
 -3.640520	 -3.660044	diff=0.0195236
  local_diff=4.64704
# W_h, [2 4]
  0.361054	  0.356239	diff=0.00481585
 -0.000253	 -0.000252	diff=6.80117e-07
 -0.589500	 -0.603836	diff=0.0143357
  0.000514	  0.000516	diff=2.82851e-06
  3.893030	  3.840736	diff=0.0522934
 -2.774627	 -2.775989	diff=0.0013617
  2.929506	  2.932247	diff=0.00274088
 -2.944228	 -2.940896	diff=0.00333148
  local_diff=0.0788825
# W_soft, [5 2]
 -0.956667	 -0.957174	diff=0.000506976
  5.213387	  5.206646	diff=0.00674059
  0.155391	  0.148653	diff=0.0067377
 -2.569958	 -2.570744	diff=0.000785518
 -1.827009	 -1.827381	diff=0.000371877
  2.047773	  2.046128	diff=0.0016451
  0.008199	  0.004965	diff=0.0032344
  1.898402	  1.894751	diff=0.00365141
 -1.834499	 -1.836127	diff=0.00162829
 -2.109547	 -2.109716	diff=0.000168959
  local_diff=0.0254708
# Num params=182, abs_diff=5.14398
Elapsed time is 2.265486 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.6908e-34
  0.000000	  0.000000	diff=6.52136e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.14811e-34
  0.000000	 -0.000000	diff=8.31817e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78785e-73
  0.000000	 -0.000000	diff=5.70539e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.11556e-65
  0.000000	  0.000000	diff=3.2557e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.98983e-66
  0.000000	 -0.000000	diff=1.35318e-65
  0.000000	 -0.000000	diff=6.80857e-67
  0.000000	 -0.000000	diff=2.33138e-66
  0.000000	  0.000000	diff=1.85977e-66
  0.000000	 -0.000000	diff=1.05465e-65
  0.000000	  0.000000	diff=1.86755e-36
  0.000000	 -0.000000	diff=8.34134e-36
  0.000000	 -0.000000	diff=7.79664e-59
  0.000000	  0.000000	diff=5.83381e-58
  0.000000	  0.000000	diff=1.82474e-59
  0.000000	  0.000000	diff=9.23776e-59
  0.000000	 -0.000000	diff=8.49407e-59
  0.000000	  0.000000	diff=5.16748e-58
  0.000000	  0.000000	diff=1.11184e-29
  0.000000	  0.000000	diff=3.97523e-28
  0.000000	  0.000000	diff=1.29167e-59
  0.000000	 -0.000000	diff=5.90976e-59
  0.000000	 -0.000000	diff=5.78638e-60
  0.000000	 -0.000000	diff=8.1766e-60
  0.000000	  0.000000	diff=8.49742e-60
  0.000000	 -0.000000	diff=4.77459e-59
  0.000000	  0.000000	diff=1.60399e-29
  0.000000	 -0.000000	diff=2.8376e-29
  0.000000	 -0.000000	diff=2.05037e-59
  0.000000	  0.000000	diff=5.8094e-58
  0.000000	  0.000000	diff=1.34231e-59
  0.000000	  0.000000	diff=2.23857e-58
  0.000000	 -0.000000	diff=9.57301e-60
  0.000000	  0.000000	diff=8.27746e-58
  0.000000	  0.000000	diff=6.35455e-29
  0.000000	  0.000000	diff=2.21817e-28
  local_diff=7.38419e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_pos, [2 2]
  0.000000	 -0.000000	diff=1.5568e-29
  0.000000	  0.000000	diff=1.31341e-29
  0.000000	 -0.000000	diff=1.2133e-30
  0.000000	  0.000000	diff=1.25461e-30
  local_diff=3.117e-29
# v_pos, [1 2]
  0.000000	 -0.000000	diff=1.01433e-29
  0.000000	 -0.000000	diff=1.01748e-29
  local_diff=2.03181e-29
# W_h, [2 4]
  0.000000	 -0.000000	diff=3.05378e-30
  0.000000	 -0.000000	diff=3.65282e-30
  0.000000	 -0.000000	diff=1.54583e-30
  0.000000	  0.000000	diff=6.8135e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 3.180775 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.84136e-12
 -0.000000	 -0.000000	diff=1.08734e-08
  0.000000	  0.000000	diff=4.35354e-28
  0.000000	 -0.000000	diff=3.7902e-19
  0.000001	  0.000001	diff=3.47287e-08
  0.000000	 -0.000000	diff=3.04848e-21
  0.000000	  0.000000	diff=0
 -0.000601	 -0.000638	diff=3.74958e-05
 -0.000000	 -0.000000	diff=2.84079e-12
  0.000000	  0.000000	diff=1.70572e-08
  0.000000	 -0.000000	diff=5.53448e-28
  0.000000	  0.000000	diff=4.81797e-19
  0.000000	  0.000000	diff=4.00668e-34
  0.000000	  0.000000	diff=1.37967e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.36393e-63
  0.000000	  0.000000	diff=7.75651e-48
  0.000000	 -0.000000	diff=1.12218e-66
  0.000000	  0.000000	diff=1.17244e-57
  0.000000	  0.000000	diff=4.96915e-73
  0.000000	  0.000000	diff=1.09456e-65
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.34168e-56
  0.000000	 -0.000000	diff=2.3864e-40
  0.000000	  0.000000	diff=4.14312e-59
  0.000000	 -0.000000	diff=3.60717e-50
  0.000000	 -0.000000	diff=2.18632e-65
  0.000000	 -0.000000	diff=6.30844e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=3.75585e-05
# W_src{2}, [8 4]
  0.331666	  0.330350	diff=0.00131562
 -0.002764	 -0.002751	diff=1.31345e-05
  0.000000	  0.000000	diff=1.92861e-67
  0.000000	  0.000000	diff=1.29805e-65
  0.293465	  0.294808	diff=0.00134283
 -0.777347	 -0.773645	diff=0.0037022
 -0.000003	 -0.000003	diff=3.17688e-08
 -0.000001	 -0.000001	diff=1.19257e-08
  0.000000	  0.000000	diff=1.26232e-58
  0.000000	 -0.000000	diff=1.41688e-57
  0.000000	 -0.000000	diff=1.3576e-59
  0.000000	 -0.000000	diff=3.6559e-58
  0.000000	  0.000000	diff=1.69409e-58
  0.000000	 -0.000000	diff=1.23259e-57
  0.000000	 -0.000000	diff=1.35871e-28
  0.000000	 -0.000000	diff=6.03963e-28
  0.000000	  0.000000	diff=1.40596e-60
  0.000000	  0.000000	diff=8.13129e-59
  0.000000	  0.000000	diff=8.05466e-61
  0.000000	  0.000000	diff=1.58832e-59
  0.000000	  0.000000	diff=1.32401e-60
  0.000000	  0.000000	diff=1.70636e-59
  0.000000	 -0.000000	diff=5.96654e-29
  0.000000	  0.000000	diff=5.20489e-29
  0.000000	  0.000000	diff=2.1071e-58
  0.000000	 -0.000000	diff=1.86114e-57
  0.000000	 -0.000000	diff=4.88898e-59
  0.000000	 -0.000000	diff=6.66062e-58
  0.000000	  0.000000	diff=2.12671e-58
  0.000000	 -0.000000	diff=1.86368e-57
  0.000000	 -0.000000	diff=1.13055e-28
  0.000000	 -0.000000	diff=6.45202e-28
  local_diff=0.00637384
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.36612e-10
  0.141449	  0.139208	diff=0.00224101
 -0.000000	 -0.000000	diff=6.64415e-12
 -0.051303	 -0.051210	diff=9.27442e-05
  0.000000	  0.000000	diff=7.34172e-10
-10.081949	-10.300090	diff=0.218141
  0.000000	  0.000000	diff=1.7283e-12
 -0.427313	 -0.429863	diff=0.00255021
  0.000002	  0.000002	diff=1.72471e-08
  0.645249	  0.589195	diff=0.056054
 -0.000000	 -0.000000	diff=1.07554e-10
 -0.250880	 -0.248682	diff=0.00219798
  0.000002	  0.000002	diff=1.7243e-08
-39.052507	-48.093148	diff=9.04064
  0.000000	  0.000000	diff=2.85422e-12
 -1.833732	 -1.891739	diff=0.0580063
 -0.000080	 -0.000080	diff=3.73224e-07
  0.001548	  0.001542	diff=6.01329e-06
  0.856652	  0.854887	diff=0.00176502
  0.119273	  0.119784	diff=0.000510345
  0.100424	  0.100992	diff=0.000568028
  4.015067	  4.058219	diff=0.0431522
  0.000002	  0.000002	diff=2.03843e-08
 -0.000000	 -0.000000	diff=3.46268e-10
 -0.000061	 -0.000061	diff=2.11903e-07
 -0.195365	 -0.195682	diff=0.000317279
 -0.855340	 -0.857150	diff=0.00181043
  0.054962	  0.055070	diff=0.000108537
 -0.108978	 -0.108419	diff=0.000559092
  1.272769	  1.254360	diff=0.0184092
  0.000002	  0.000002	diff=1.1463e-08
  0.476651	  0.473620	diff=0.00303052
  0.122645	  0.123101	diff=0.000455664
 -0.311660	 -0.310889	diff=0.000770932
 -0.348081	 -0.349501	diff=0.00141992
  0.359056	  0.358154	diff=0.000901679
 -0.026671	 -0.026604	diff=6.66915e-05
 -0.000266	 -0.000265	diff=1.00308e-06
 -0.000001	 -0.000001	diff=5.54706e-09
  0.000007	  0.000007	diff=5.53458e-08
 -0.000000	 -0.000000	diff=4.02612e-12
 -0.033422	 -0.040448	diff=0.00702548
 -0.021014	 -0.021015	diff=1.07779e-06
 -0.010037	 -0.010033	diff=3.62453e-06
 -0.002583	 -0.002583	diff=3.30602e-07
  0.001963	 -0.000637	diff=0.00259928
 -0.000000	 -0.000000	diff=2.0484e-12
 -0.084897	 -0.085000	diff=0.000102408
  local_diff=9.46351
# W_tgt{2}, [8 4]
 -0.067048	 -0.066879	diff=0.000168609
 -0.002022	 -0.002027	diff=5.6241e-06
  2.639224	  2.643445	diff=0.00422108
 -0.001868	 -0.001863	diff=4.68043e-06
 -0.144376	 -0.144327	diff=4.93138e-05
 -0.021750	 -0.021742	diff=8.26169e-06
 -0.000377	 -0.000384	diff=6.88706e-06
 -0.097278	 -0.097820	diff=0.000541516
 -0.337594	 -0.338006	diff=0.000412173
 -0.848844	 -0.849370	diff=0.000525751
  0.017127	  0.017046	diff=8.08078e-05
 -0.150090	 -0.150266	diff=0.000175417
 -2.244617	 -2.263791	diff=0.0191747
 -0.301278	 -0.302497	diff=0.00121896
-11.097586	-15.471111	diff=4.37352
 -1.705289	 -1.706050	diff=0.000761059
 -0.815940	 -0.813121	diff=0.00281954
 -0.011686	 -0.011894	diff=0.000208274
 -0.081805	 -0.081996	diff=0.000191557
 -0.395191	 -0.395126	diff=6.58093e-05
 -1.088422	 -1.085797	diff=0.00262517
 -0.390058	 -0.390263	diff=0.000204916
  0.968236	  0.970129	diff=0.00189272
 -2.979695	 -2.973407	diff=0.00628751
  0.058841	  0.060224	diff=0.00138282
 -0.476163	 -0.476089	diff=7.34199e-05
 -1.821014	 -1.818654	diff=0.00236011
  1.162310	  1.162279	diff=3.12909e-05
  0.155519	  0.155486	diff=3.28991e-05
  0.274470	  0.275019	diff=0.000549244
 -1.069853	 -1.080967	diff=0.0111139
 11.627334	 11.615886	diff=0.0114484
  local_diff=4.44217
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000120	 -0.000122	diff=1.41149e-06
 -0.000000	 -0.000000	diff=2.86601e-10
 -0.000000	 -0.000000	diff=2.41099e-08
 -0.000000	 -0.000000	diff=2.78275e-08
  local_diff=1.46371e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.57234e-11
  0.000000	  0.000000	diff=2.2417e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
559.422329	-167.970287	diff=727.393
 86.801647	 78.323606	diff=8.47804
 -7.093948	 -7.355292	diff=0.261344
  3.874106	  3.800851	diff=0.0732549
  local_diff=736.205
# W_a, [2 2]
 -0.000008	 -0.000008	diff=1.2119e-08
  0.000294	  0.000315	diff=2.02761e-05
  0.001069	  0.001069	diff=1.51793e-09
 -0.043733	 -0.043731	diff=2.53705e-06
  local_diff=2.28268e-05
# W_h, [2 4]
 -0.023336	 -0.023335	diff=7.74494e-07
 -0.040031	 -0.040030	diff=9.22895e-07
  0.953211	  0.954506	diff=0.00129503
  1.635845	  1.637389	diff=0.00154428
  0.495630	  0.493584	diff=0.00204581
  3.290073	  3.285275	diff=0.00479753
  0.108388	  0.120890	diff=0.0125022
  9.094417	  8.793549	diff=0.300869
  local_diff=0.323055
# W_soft, [5 2]
  5.084964	  5.080611	diff=0.00435259
  3.185797	  3.184884	diff=0.000913657
 -0.403325	 -0.404028	diff=0.000702595
 -4.004497	 -4.005270	diff=0.000772983
 -3.852635	 -3.856197	diff=0.0035624
 -5.137220	 -5.143014	diff=0.00579312
  4.933049	  4.932879	diff=0.000169774
 -0.674094	 -0.674468	diff=0.00037425
  0.078470	  0.077928	diff=0.000541492
  0.812158	  0.806674	diff=0.00548365
  local_diff=0.0226665
# Num params=186, abs_diff=750.463
Elapsed time is 2.253749 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 2
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.65218e-34
  0.000000	  0.000000	diff=5.91556e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.09858e-34
  0.000000	 -0.000000	diff=7.47991e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78914e-73
  0.000000	 -0.000000	diff=5.65567e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.14971e-65
  0.000000	  0.000000	diff=3.21759e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.67058e-66
  0.000000	 -0.000000	diff=1.32023e-65
  0.000000	 -0.000000	diff=6.30511e-67
  0.000000	 -0.000000	diff=2.40542e-66
  0.000000	  0.000000	diff=1.58221e-66
  0.000000	 -0.000000	diff=1.03471e-65
  0.000000	  0.000000	diff=2.21115e-36
  0.000000	 -0.000000	diff=7.89148e-36
  0.000000	 -0.000000	diff=6.91426e-59
  0.000000	  0.000000	diff=5.43438e-58
  0.000000	  0.000000	diff=1.75048e-59
  0.000000	  0.000000	diff=9.03782e-59
  0.000000	 -0.000000	diff=7.68126e-59
  0.000000	  0.000000	diff=4.82943e-58
  0.000000	 -0.000000	diff=3.70742e-31
  0.000000	  0.000000	diff=3.56301e-28
  0.000000	  0.000000	diff=1.05848e-59
  0.000000	 -0.000000	diff=5.8891e-59
  0.000000	 -0.000000	diff=5.03736e-60
  0.000000	 -0.000000	diff=8.12493e-60
  0.000000	  0.000000	diff=7.41006e-60
  0.000000	 -0.000000	diff=4.89434e-59
  0.000000	  0.000000	diff=1.78997e-29
  0.000000	 -0.000000	diff=2.65034e-29
  0.000000	 -0.000000	diff=2.66933e-59
  0.000000	  0.000000	diff=5.54468e-58
  0.000000	  0.000000	diff=1.53992e-59
  0.000000	  0.000000	diff=2.12029e-58
  0.000000	 -0.000000	diff=1.51282e-59
  0.000000	  0.000000	diff=7.93366e-58
  0.000000	  0.000000	diff=7.42823e-29
  0.000000	  0.000000	diff=2.02294e-28
  local_diff=6.77651e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.57509e-45
  0.000000	  0.000000	diff=1.6093e-45
  0.000000	  0.000000	diff=3.50325e-45
  0.000000	 -0.000000	diff=8.75812e-47
  local_diff=7.77522e-45
# v_a, [1 2]
  0.000000	 -0.000000	diff=1.26117e-44
  0.000000	 -0.000000	diff=2.1742e-44
  local_diff=3.43537e-44
# W_h, [2 4]
  0.000000	 -0.000000	diff=7.31179e-31
  0.000000	 -0.000000	diff=5.18298e-31
  0.000000	  0.000000	diff=1.27282e-29
  0.000000	 -0.000000	diff=2.22416e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 2.304224 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 230, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_src_char{1}=32 W_emb_src_char=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 230
  src input 1: z x y xy
  src mask: 1  1  1  1
  tgt input 1: <s> a c a </s>
  tgt output 1: a c a </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.022445	  0.022435	diff=9.9253e-06
  0.002451	  0.002451	diff=1.63449e-08
  0.013789	  0.013806	diff=1.68323e-05
 -0.000000	 -0.000000	diff=5.80858e-11
  0.036538	  0.036534	diff=4.28191e-06
  0.015722	  0.015683	diff=3.85263e-05
 -0.610189	 -0.614756	diff=0.00456725
  0.268013	  0.268029	diff=1.61286e-05
 -0.000022	 -0.000022	diff=1.16993e-07
 -0.000000	 -0.000000	diff=1.1654e-08
 -0.001245	 -0.001231	diff=1.44071e-05
  0.000000	  0.000000	diff=9.05745e-11
 -0.000746	 -0.000749	diff=3.00816e-06
  0.018110	  0.018032	diff=7.78611e-05
 -0.142456	 -0.142762	diff=0.000306574
  0.001638	  0.001644	diff=5.38273e-06
  0.000010	  0.000010	diff=3.31669e-08
 -0.000000	 -0.000000	diff=1.90477e-12
 -0.000389	 -0.000387	diff=2.08617e-06
 -0.000000	 -0.000000	diff=2.04148e-12
  0.000014	  0.000014	diff=1.83291e-08
 -0.000100	 -0.000100	diff=8.93763e-09
  0.003463	  0.003462	diff=1.00335e-06
  0.001333	  0.001337	diff=3.79331e-06
 -0.000000	 -0.000000	diff=2.19665e-12
  0.000000	  0.000000	diff=1.15858e-12
 -0.000007	 -0.000007	diff=7.17573e-11
  0.000000	  0.000000	diff=1.44296e-12
 -0.000002	 -0.000002	diff=4.10434e-11
  0.000019	  0.000019	diff=4.66969e-10
 -0.000665	 -0.000665	diff=3.73119e-08
 -0.000001	 -0.000001	diff=4.21144e-11
  local_diff=0.0050673
# W_src{2}, [8 4]
  4.195288	  4.196274	diff=0.000986709
 -0.047922	 -0.047713	diff=0.000209037
  0.063061	  0.063029	diff=3.15413e-05
  0.030490	  0.030599	diff=0.000109078
  0.681531	  0.682182	diff=0.000650802
 -0.335430	 -0.335417	diff=1.3058e-05
 -0.183375	 -0.183200	diff=0.00017496
 -0.722848	 -0.722838	diff=9.64373e-06
 -0.005428	 -0.005429	diff=4.3192e-07
  0.019165	  0.019165	diff=5.3018e-09
  0.001806	  0.001806	diff=3.13423e-08
 -0.000164	 -0.000164	diff=3.95167e-09
 -0.006239	 -0.006240	diff=5.38668e-07
  0.005295	  0.005295	diff=1.16836e-07
  0.122794	  0.122779	diff=1.48399e-05
  0.135787	  0.135786	diff=5.97615e-07
  0.035952	  0.036086	diff=0.000133746
 -0.010708	 -0.010713	diff=5.55488e-06
  0.054641	  0.054625	diff=1.5745e-05
 -0.017145	 -0.017146	diff=5.82361e-07
  0.056614	  0.056614	diff=3.9023e-08
 -0.090461	 -0.090518	diff=5.69146e-05
 -0.095092	 -0.096075	diff=0.000983178
  0.006888	  0.006702	diff=0.000186307
 -0.001780	 -0.001772	diff=7.95641e-06
  0.045635	  0.045629	diff=6.64848e-06
 -0.009259	 -0.009269	diff=1.03753e-05
  0.025779	  0.025776	diff=2.80706e-06
  0.012681	  0.012618	diff=6.35338e-05
  0.001398	  0.001300	diff=9.82471e-05
  0.144241	  0.141508	diff=0.00273283
  0.236558	  0.236521	diff=3.69729e-05
  local_diff=0.00654284
# W_tgt{1}, [8 6]
  0.013021	  0.013312	diff=0.00029081
 -0.013609	 -0.013740	diff=0.000131634
 -1.026305	 -1.045916	diff=0.0196111
  0.004515	  0.004607	diff=9.22918e-05
 -0.159613	 -0.155490	diff=0.00412286
  0.000006	  0.000006	diff=1.69261e-07
  0.000000	 -0.000000	diff=4.50687e-20
  0.000000	  0.000000	diff=2.17341e-11
  0.011925	  0.012148	diff=0.000222488
  0.035276	  0.034431	diff=0.000845668
 -0.392244	 -0.395075	diff=0.00283106
  0.004033	  0.004107	diff=7.34056e-05
 -0.053239	 -0.052547	diff=0.000691622
  0.000009	  0.000008	diff=3.14071e-07
  0.000000	  0.000000	diff=1.12932e-19
 -0.000000	 -0.000000	diff=1.16948e-10
 -0.000987	 -0.000986	diff=1.23454e-06
  0.000000	  0.000000	diff=1.42548e-12
  0.160669	  0.160105	diff=0.000564192
 -0.000308	 -0.000308	diff=4.18282e-07
  0.029122	  0.029248	diff=0.000126285
  0.000001	  0.000001	diff=3.16621e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000333	 -0.000333	diff=1.52908e-07
  0.000000	  0.000000	diff=3.47009e-13
  0.022008	  0.021995	diff=1.3133e-05
 -0.000106	 -0.000106	diff=4.91047e-08
  0.004742	  0.004746	diff=3.79236e-06
 -0.000000	 -0.000000	diff=1.01222e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=2.92971e-08
 -0.001462	 -0.001464	diff=1.66056e-06
  0.165852	  0.165347	diff=0.000504324
  0.000000	  0.000000	diff=7.2139e-13
  0.026595	  0.026694	diff=9.86129e-05
 -0.000000	 -0.000000	diff=5.81948e-13
  0.000000	  0.000000	diff=1.61605e-21
  0.000000	  0.000000	diff=5.18795e-12
 -0.000115	 -0.000115	diff=4.27256e-07
 -0.000035	 -0.000035	diff=8.96869e-10
  0.000000	  0.000000	diff=3.23298e-12
 -0.000000	 -0.000000	diff=1.27259e-11
 -0.000000	 -0.000000	diff=1.47909e-09
  0.000000	  0.000000	diff=6.54313e-13
  0.000000	 -0.000000	diff=1.46884e-22
  0.000000	  0.000000	diff=1.04901e-14
  local_diff=0.0302277
# W_tgt{2}, [8 4]
  1.099884	  1.100207	diff=0.000323022
  6.601326	  6.633553	diff=0.0322264
  0.000039	  0.000038	diff=3.03135e-07
  0.732515	  0.729994	diff=0.00252081
  1.020275	  1.016302	diff=0.00397352
  0.146497	  0.146963	diff=0.000466065
 -0.099890	 -0.099228	diff=0.000662279
 43.071041	 42.686564	diff=0.384477
 -0.000113	 -0.000113	diff=2.16769e-07
 -0.012911	 -0.012955	diff=4.47095e-05
  0.000038	  0.000038	diff=9.83294e-08
  0.004113	  0.004128	diff=1.49815e-05
 -0.090807	 -0.091064	diff=0.000257081
  0.000324	  0.000325	diff=1.16693e-06
 -0.000585	 -0.000582	diff=3.01369e-06
  0.000174	  0.000174	diff=5.02488e-10
 -0.287589	 -0.287562	diff=2.69987e-05
 -0.282803	 -0.283139	diff=0.000335278
  0.036983	  0.036952	diff=3.09675e-05
  0.187720	  0.187796	diff=7.59539e-05
 -0.185402	 -0.185387	diff=1.47128e-05
  0.161243	  0.161383	diff=0.000140762
 -0.368082	 -0.368695	diff=0.000613626
 -2.173317	 -2.183944	diff=0.0106267
  0.592567	  0.591687	diff=0.00087984
 -0.275615	 -0.276022	diff=0.00040729
  0.463755	  0.463469	diff=0.000286235
  0.414530	  0.414453	diff=7.63197e-05
  0.459266	  0.459097	diff=0.000168445
 -0.299596	 -0.299744	diff=0.000148085
 -0.822094	 -0.821777	diff=0.000316943
 12.747132	 12.713447	diff=0.0336854
  local_diff=0.472804
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000284	 -0.000274	diff=1.04778e-05
 -0.000260	 -0.000251	diff=8.79963e-06
 -0.000002	 -0.000002	diff=6.52427e-08
 -0.000002	 -0.000002	diff=5.48537e-08
  local_diff=1.93975e-05
# W_src_char{1}, [8 4]
 -8.232336	 -9.967133	diff=1.7348
  0.000093	  0.000090	diff=3.73107e-06
  0.000012	  0.000012	diff=2.24861e-07
  0.000003	  0.000003	diff=1.56094e-08
 -0.000002	 -0.000002	diff=3.10959e-08
  0.000000	  0.000000	diff=2.07987e-12
  0.000000	 -0.000000	diff=1.24499e-14
  0.000000	  0.000000	diff=8.79501e-17
 31.656145	 22.341463	diff=9.31468
  0.000112	  0.000106	diff=5.26509e-06
 -0.000028	 -0.000027	diff=1.17685e-06
  0.000017	  0.000016	diff=6.45655e-07
  0.000003	  0.000004	diff=1.49978e-07
 -0.000000	 -0.000000	diff=2.87466e-13
  0.000000	 -0.000000	diff=5.6224e-14
  0.000000	  0.000000	diff=3.97183e-16
 -1.873680	 -1.948147	diff=0.0744677
  0.000000	 -0.000000	diff=1.41146e-12
  0.000002	  0.000002	diff=9.22571e-09
  0.000000	  0.000000	diff=8.90632e-12
 -0.000000	 -0.000000	diff=1.25017e-09
  0.000000	 -0.000000	diff=3.90636e-18
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.6758e-31
 -0.000000	 -0.000000	diff=6.46332e-13
  0.000000	 -0.000000	diff=9.21172e-20
  0.000000	  0.000000	diff=1.26255e-12
  0.000000	  0.000000	diff=1.78603e-16
  0.000000	 -0.000000	diff=2.13744e-14
  0.000000	 -0.000000	diff=2.54944e-25
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.74633e-38
  local_diff=11.124
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -6.088522	 -6.939588	diff=0.851066
 -2.666618	 -2.808020	diff=0.141402
  0.000554	  0.000546	diff=7.25449e-06
  0.000222	  0.000221	diff=1.18158e-06
  0.000028	  0.000028	diff=3.52477e-07
 -0.000042	 -0.000043	diff=8.20022e-07
  0.000018	  0.000017	diff=7.50612e-07
 -0.000000	 -0.000000	diff=4.81643e-10
  local_diff=0.992478
# W_emb_tgt, [2 5]
 -0.521925	 -0.517169	diff=0.00475605
  0.453755	  0.460643	diff=0.00688847
 -0.042223	 -0.043522	diff=0.00129836
 -0.011394	 -0.011487	diff=9.32295e-05
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000042	 -0.000043	diff=4.54486e-07
  0.000033	  0.000032	diff=2.19252e-07
  0.023673	  0.025709	diff=0.00203569
 -0.041162	 -0.037812	diff=0.0033499
  local_diff=0.0184224
# W_pos, [2 2]
 -0.200560	 -0.200813	diff=0.000252369
  0.414028	  0.415075	diff=0.0010466
  0.992163	  0.986528	diff=0.00563485
 -3.465643	 -3.483041	diff=0.0173977
  local_diff=0.0243315
# v_pos, [1 2]
 -3.343574	 -3.358286	diff=0.0147115
 -2.510616	 -2.515989	diff=0.00537238
  local_diff=0.0200839
# W_h, [2 4]
 -0.265583	 -0.265533	diff=4.98123e-05
  0.312601	  0.311937	diff=0.00066446
  0.214777	  0.214782	diff=4.62355e-06
  0.702791	  0.702249	diff=0.000541763
 -2.845526	 -2.847380	diff=0.0018538
 -4.518704	 -4.561559	diff=0.0428553
  1.616230	  1.618157	diff=0.00192671
 14.932402	 14.904123	diff=0.0282794
  local_diff=0.0761759
# W_soft, [5 2]
 -9.134140	 -9.136047	diff=0.00190649
 -1.010044	 -1.010623	diff=0.00057963
 -4.121565	 -4.126090	diff=0.00452574
 -1.562317	 -1.565870	diff=0.0035535
 15.846896	 15.838630	diff=0.00826537
 -1.404851	 -1.404915	diff=6.40732e-05
  0.110550	  0.110526	diff=2.41472e-05
 -0.883739	 -0.883911	diff=0.000172781
 -0.576502	 -0.576594	diff=9.14808e-05
  2.755157	  2.754894	diff=0.000262934
  local_diff=0.0194462
# Num params=230, abs_diff=12.7896
Elapsed time is 4.052608 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.001142	  0.000310	diff=0.000831923
 -0.000021	  0.000005	diff=2.57663e-05
  0.000088	  0.000028	diff=6.06954e-05
 -0.000015	 -0.000014	diff=8.50485e-07
  0.001078	  0.000298	diff=0.000779709
 -0.000021	  0.000004	diff=2.51815e-05
 -1.403715	 -0.311596	diff=1.09212
 -0.216219	  0.125801	diff=0.34202
  0.000000	 -0.000000	diff=5.34276e-07
 -0.000001	 -0.000001	diff=9.56026e-08
  0.000000	  0.000000	diff=4.5954e-08
 -0.000000	 -0.000000	diff=6.54859e-10
  0.000000	 -0.000000	diff=5.1442e-07
 -0.000000	 -0.000000	diff=1.09143e-08
  0.003746	  0.004559	diff=0.000812608
 -0.001645	 -0.001554	diff=9.108e-05
 -0.001102	 -0.000598	diff=0.000504734
 -0.000037	  0.000007	diff=4.479e-05
 -0.000234	 -0.000110	diff=0.000123786
  0.000079	  0.000077	diff=1.84767e-06
 -0.001305	 -0.000676	diff=0.000628914
  0.000011	  0.000054	diff=4.2889e-05
  0.559965	  0.182015	diff=0.37795
 -0.085589	 -0.112199	diff=0.0266105
 -0.000338	 -0.000444	diff=0.000106295
 -0.000017	 -0.000026	diff=9.4327e-06
 -0.000048	 -0.000074	diff=2.60686e-05
  0.000075	  0.000076	diff=3.89134e-07
 -0.000393	 -0.000526	diff=0.000132446
  0.000065	  0.000056	diff=9.03237e-06
  0.001266	  0.080775	diff=0.0795087
 -0.096668	 -0.091178	diff=0.00549013
  local_diff=1.92796
# W_src{2}, [8 4]
  0.007650	  0.007395	diff=0.000255063
 -0.016919	 -0.016756	diff=0.000163194
  0.000062	  0.000126	diff=6.35091e-05
 -0.002439	 -0.002414	diff=2.51504e-05
  0.010095	  0.009865	diff=0.00022957
 -0.023263	 -0.023084	diff=0.000178932
 -0.598231	 -0.506714	diff=0.0915171
 -1.304973	 -1.241847	diff=0.0631258
  0.000432	  0.000510	diff=7.86932e-05
 -0.002642	 -0.002671	diff=2.87893e-05
 -0.000173	 -0.000128	diff=4.57147e-05
 -0.000450	 -0.000454	diff=4.22296e-06
  0.000331	  0.000464	diff=0.000132624
 -0.002967	 -0.002999	diff=3.10185e-05
  0.242603	  0.161520	diff=0.0810822
 -0.229070	 -0.241060	diff=0.0119903
  0.000594	  0.000591	diff=2.93836e-06
 -0.003771	 -0.003901	diff=0.00012988
 -0.000056	  0.000011	diff=6.75442e-05
 -0.000669	 -0.000680	diff=1.04429e-05
  0.000742	  0.000794	diff=5.23795e-05
 -0.004511	 -0.004677	diff=0.000165144
  0.394829	  0.235087	diff=0.159742
 -0.414359	 -0.413030	diff=0.00132927
 -0.007135	 -0.006840	diff=0.000295102
  0.015616	  0.015367	diff=0.000249574
  0.000042	 -0.000072	diff=0.000113621
  0.002448	  0.002384	diff=6.34032e-05
 -0.009272	 -0.009077	diff=0.000195932
  0.021746	  0.021457	diff=0.000288842
  0.300473	  0.413375	diff=0.112902
  1.274544	  1.174948	diff=0.0995963
  local_diff=0.624157
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.22065e-38
 -0.000000	 -0.000000	diff=1.39419e-12
  0.000000	  0.000000	diff=2.44682e-18
  0.000000	  0.000000	diff=1.76417e-50
  0.000000	  0.000000	diff=5.41412e-30
 -0.000000	 -0.000000	diff=8.93586e-11
  0.000000	  0.000000	diff=0
 -0.000000	  0.000000	diff=1.49394e-12
  0.001436	  0.001441	diff=5.13407e-06
 -0.774502	 -0.776758	diff=0.00225584
 -0.000000	 -0.000000	diff=9.14395e-10
 -0.000068	 -0.000067	diff=2.13247e-07
  0.001434	  0.001439	diff=5.10931e-06
 -0.843958	 -0.846902	diff=0.00294385
  0.000064	  0.000063	diff=4.60272e-07
  3.999283	  3.981653	diff=0.0176297
  0.000030	  0.000030	diff=4.253e-08
  0.073564	  0.073465	diff=9.81915e-05
  0.000000	 -0.000000	diff=4.51416e-15
  0.000034	  0.000034	diff=4.46839e-08
  0.000030	  0.000030	diff=4.32863e-08
  0.073056	  0.072961	diff=9.47467e-05
  0.000007	  0.000007	diff=1.91574e-08
 -0.000206	 -0.000205	diff=5.98971e-07
  0.000011	  0.000011	diff=5.96406e-09
  0.027551	  0.027537	diff=1.37702e-05
  0.000000	  0.000000	diff=3.46738e-14
  0.000013	  0.000013	diff=6.27243e-09
  0.000011	  0.000011	diff=6.07083e-09
  0.027363	  0.027350	diff=1.32875e-05
  0.000003	  0.000003	diff=2.68976e-09
 -0.000200	 -0.000200	diff=8.39219e-08
  0.000000	  0.000000	diff=1.13043e-32
 -0.000000	 -0.000000	diff=1.00844e-12
  0.000000	 -0.000000	diff=7.93012e-14
  0.000000	  0.000000	diff=1.38422e-38
  0.000000	  0.000000	diff=5.28845e-32
  0.000000	  0.000000	diff=4.71344e-13
  0.000000	  0.000000	diff=6.53846e-38
  0.000000	  0.000000	diff=3.42806e-13
  0.000000	 -0.000000	diff=5.7167e-16
  0.000000	  0.000000	diff=7.89471e-13
  0.000000	  0.000000	diff=2.13177e-13
  0.000000	 -0.000000	diff=6.5748e-18
  0.000000	 -0.000000	diff=5.70956e-16
  0.000000	  0.000000	diff=1.93776e-13
  0.000000	 -0.000000	diff=3.09052e-17
 -0.000000	 -0.000000	diff=7.3518e-14
  local_diff=0.0230612
# W_tgt{2}, [8 4]
  0.532543	  0.534150	diff=0.00160736
  0.767557	  0.807868	diff=0.0403114
 -0.000001	 -0.000001	diff=9.82914e-10
 -0.003537	 -0.003522	diff=1.54607e-05
 -0.078752	 -0.078372	diff=0.000379984
  0.002627	  0.002641	diff=1.39208e-05
 -0.006969	 -0.006897	diff=7.20084e-05
  1.137011	  1.365454	diff=0.228443
 -0.004574	 -0.004574	diff=7.11123e-08
 -0.004388	 -0.004388	diff=2.39222e-08
  0.000843	  0.000843	diff=5.79328e-10
 -0.000142	 -0.000142	diff=3.04117e-10
 -0.003616	 -0.003616	diff=3.79597e-08
 -0.004574	 -0.004574	diff=2.65065e-08
 -0.119441	 -0.119547	diff=0.000105938
 -0.150522	 -0.150543	diff=2.06913e-05
 -0.044056	 -0.044055	diff=7.86324e-07
 -0.043010	 -0.043009	diff=7.41469e-07
  0.000125	  0.000125	diff=2.1514e-07
  0.008896	  0.008896	diff=7.52785e-08
 -0.045907	 -0.045907	diff=4.86345e-07
  0.002293	  0.002293	diff=8.99781e-08
 -0.141082	 -0.140275	diff=0.000807243
  0.639183	  0.639103	diff=8.07681e-05
  0.609943	  0.609821	diff=0.000122334
 -0.058495	 -0.058532	diff=3.69896e-05
  0.407462	  0.407303	diff=0.000158292
  0.032985	  0.033005	diff=1.95921e-05
  0.361313	  0.361490	diff=0.000177387
 -0.051517	 -0.051539	diff=2.23044e-05
 -1.469395	 -1.470107	diff=0.000712305
 -0.485516	 -0.487738	diff=0.00222223
  local_diff=0.275331
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=1.72931e-07
  0.000001	  0.000001	diff=2.0444e-07
 -0.000000	 -0.000000	diff=9.73596e-10
 -0.000000	 -0.000000	diff=8.90335e-10
  local_diff=3.79235e-07
# W_src_char{1}, [8 4]
 -0.000014	 -0.000003	diff=1.17542e-05
  0.000052	  0.000006	diff=4.56787e-05
  0.000000	 -0.000000	diff=9.00575e-28
  0.000000	 -0.000000	diff=1.08009e-34
  0.000000	 -0.000000	diff=3.95634e-47
  0.000000	  0.000000	diff=7.8755e-36
 -0.000000	 -0.000000	diff=6.0771e-11
  0.000000	  0.000000	diff=3.98471e-11
 -0.000045	 -0.000008	diff=3.72053e-05
  0.000013	  0.000002	diff=1.19281e-05
  0.000000	 -0.000000	diff=7.38655e-28
  0.000000	 -0.000000	diff=2.93204e-35
  0.000000	 -0.000000	diff=3.245e-47
  0.000000	  0.000000	diff=6.45951e-36
 -0.000000	 -0.000000	diff=1.63477e-11
  0.000000	  0.000000	diff=8.79024e-12
  0.000000	 -0.000000	diff=8.76932e-18
  0.000000	  0.000000	diff=2.09833e-14
  0.000000	  0.000000	diff=3.48217e-36
  0.000000	 -0.000000	diff=3.27537e-43
  0.000000	  0.000000	diff=1.73204e-55
  0.000000	 -0.000000	diff=3.43286e-44
  0.000000	 -0.000000	diff=5.74305e-22
  0.000000	  0.000000	diff=1.21042e-20
  0.000000	  0.000000	diff=1.08395e-10
  0.000000	  0.000000	diff=7.75654e-08
  0.000000	 -0.000000	diff=1.01237e-29
  0.000000	  0.000000	diff=8.08164e-36
  0.000000	 -0.000000	diff=6.64824e-52
  0.000000	 -0.000000	diff=6.22043e-39
 -0.000000	 -0.000000	diff=7.2086e-13
 -0.000000	 -0.000000	diff=3.88945e-12
  local_diff=0.000106644
# W_src_char{2}, [8 4]
  0.002171	  0.000356	diff=0.00181546
  0.000764	  0.000227	diff=0.000536925
 -0.000000	 -0.000000	diff=6.35282e-10
 -0.000412	 -0.000414	diff=1.93857e-06
  1.408773	  0.238242	diff=1.17053
  0.000179	  0.000034	diff=0.000145449
  0.000000	  0.000000	diff=3.353e-08
 -0.000001	 -0.000000	diff=4.12683e-07
  0.131161	  0.014319	diff=0.116842
 -0.000817	  0.000062	diff=0.000879174
 -0.016804	 -0.001726	diff=0.0150781
  2.285992	  0.233544	diff=2.05245
  2.034915	  0.306745	diff=1.72817
  1.245030	  0.126682	diff=1.11835
 -0.039972	 -0.004399	diff=0.035573
 -0.143136	 -0.014804	diff=0.128331
  0.001131	  0.000495	diff=0.00063653
 -0.000002	 -0.000003	diff=3.09727e-07
 -0.001598	 -0.000200	diff=0.00139808
  0.211407	  0.021840	diff=0.189567
 -0.000952	 -0.000098	diff=0.000853568
  0.120435	  0.008876	diff=0.111559
  0.000013	  0.000001	diff=1.14373e-05
 -0.015610	 -0.003348	diff=0.0122616
  0.009649	  0.004229	diff=0.00541961
 -0.000030	 -0.000033	diff=2.62409e-06
 -0.013644	 -0.001713	diff=0.0119304
  1.809454	  0.186756	diff=1.6227
 -0.009440	 -0.002189	diff=0.00725055
  1.035628	  0.075887	diff=0.959741
  0.000111	  0.000012	diff=9.89911e-05
 -0.132480	 -0.028626	diff=0.103854
  local_diff=9.39598
# W_src_char{3}, [8 4]
 -0.282537	 -0.052964	diff=0.229573
  0.000682	  0.000271	diff=0.000410865
  0.000593	  0.000593	diff=5.88427e-07
 -0.013958	 -0.013990	diff=3.18226e-05
 -0.480474	 -0.066317	diff=0.414157
 -0.013091	 -0.013531	diff=0.00043951
  0.000450	  0.000453	diff=3.55797e-06
 -0.001208	 -0.001209	diff=1.76866e-07
 -0.859979	 -0.172593	diff=0.687386
  0.010006	  0.004595	diff=0.00541144
  0.009377	  0.009377	diff=9.25467e-08
 -0.037676	 -0.037912	diff=0.000236274
 -5.935079	 -0.658320	diff=5.27676
 -0.025182	 -0.030739	diff=0.00555644
  0.007370	  0.007347	diff=2.30319e-05
 -0.019537	 -0.019571	diff=3.47691e-05
 -0.004049	 -0.004083	diff=3.40169e-05
  0.000007	  0.000008	diff=1.31895e-06
  0.000024	  0.000024	diff=2.1058e-08
 -0.007464	 -0.007474	diff=9.0695e-06
  0.004915	  0.003624	diff=0.00129091
 -0.007434	 -0.007442	diff=7.66379e-06
  0.000012	  0.000012	diff=1.11201e-07
 -0.000031	 -0.000031	diff=1.98582e-07
 -0.008722	 -0.008828	diff=0.000106242
  0.000005	  0.000005	diff=1.04728e-08
  0.000020	  0.000020	diff=4.02582e-08
 -0.016229	 -0.016272	diff=4.29541e-05
  0.007634	  0.007580	diff=5.38599e-05
 -0.016183	 -0.016226	diff=4.2634e-05
  0.000000	  0.000000	diff=1.44872e-07
 -0.000000	  0.000000	diff=2.58116e-07
  local_diff=6.62161
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000000	diff=1.10016e-06
 -0.000002	 -0.000000	diff=1.78059e-06
  0.000016	  0.000003	diff=1.26236e-05
  0.000006	  0.000001	diff=5.16914e-06
  0.000020	  0.000002	diff=1.78362e-05
 -0.000032	 -0.000003	diff=2.8739e-05
  0.000000	  0.000000	diff=4.08023e-12
  0.000000	  0.000000	diff=2.16185e-12
  local_diff=6.72486e-05
# W_emb_tgt, [2 5]
  0.000000	 -0.000000	diff=4.4583e-19
  0.000000	  0.000000	diff=9.37055e-10
 -0.000000	 -0.000000	diff=1.71099e-09
  0.000096	  0.000095	diff=9.444e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  3.895624	  3.854453	diff=0.0411707
  0.000000	  0.000000	diff=4.52279e-23
  0.000000	  0.000000	diff=1.20148e-23
  local_diff=0.0411716
# W_pos, [2 2]
 -0.009453	 -0.009441	diff=1.20196e-05
 -0.009385	 -0.009373	diff=1.18805e-05
 -0.001479	 -0.001479	diff=4.89726e-07
 -0.001448	 -0.001447	diff=3.70557e-07
  local_diff=2.47603e-05
# v_pos, [1 2]
  0.013830	  0.013855	diff=2.48897e-05
  0.014924	  0.014953	diff=2.93114e-05
  local_diff=5.42011e-05
# W_h, [2 4]
 -0.027283	 -0.027287	diff=3.88535e-06
 -0.075121	 -0.075127	diff=6.01089e-06
  0.058741	  0.058727	diff=1.44602e-05
  0.140324	  0.140301	diff=2.2431e-05
  0.249136	  0.248847	diff=0.000288365
  3.513913	  3.515812	diff=0.00189934
  1.751658	  1.753650	diff=0.00199191
  2.827783	  2.827925	diff=0.000142214
  local_diff=0.00436862
# W_soft, [5 2]
 -0.693463	 -0.693617	diff=0.000154276
  1.857957	  1.857820	diff=0.000137399
  0.483627	  0.483481	diff=0.000145975
 -1.561241	 -1.561535	diff=0.000294481
 -0.085909	 -0.086149	diff=0.000239994
  0.176072	  0.176060	diff=1.24269e-05
 -0.222284	 -0.222293	diff=9.4079e-06
  0.793420	  0.793402	diff=1.80963e-05
 -0.704105	 -0.704153	diff=4.74673e-05
 -0.042977	 -0.043015	diff=3.87617e-05
  local_diff=0.00109829
# Num params=294, abs_diff=18.915
Elapsed time is 5.829832 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 294, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 294
  src input 1: <s> xy xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ab a </s> </s>
  tgt output 1: ab a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.028370	  0.013286	diff=0.0150846
 -0.000537	 -0.000196	diff=0.000341127
  0.001570	  0.001059	diff=0.000510807
 -0.000096	 -0.000096	diff=1.05917e-09
  0.026449	  0.011809	diff=0.0146402
 -0.000547	 -0.000180	diff=0.000367165
 -6.515600	 -2.875147	diff=3.64045
 -0.172048	  0.152629	diff=0.324678
 -0.000085	 -0.000011	diff=7.43606e-05
  0.000189	  0.000008	diff=0.000181601
  0.000006	  0.000004	diff=1.85734e-06
 -0.000000	 -0.000000	diff=4.50803e-12
 -0.000041	  0.000004	diff=4.49661e-05
  0.000256	  0.000053	diff=0.000202125
  0.300084	  0.093129	diff=0.206955
  0.257914	  0.042738	diff=0.215176
 -0.026706	 -0.022511	diff=0.00419461
 -0.000663	 -0.000663	diff=5.74343e-08
 -0.005922	 -0.004794	diff=0.00112815
  0.001116	  0.001116	diff=6.25962e-10
 -0.031928	 -0.026586	diff=0.00534193
 -0.000024	 -0.000024	diff=5.17926e-08
  2.424975	  1.785947	diff=0.639029
 -0.260265	 -0.260254	diff=1.10406e-05
 -0.010229	 -0.011296	diff=0.00106621
 -0.000977	 -0.000977	diff=1.39331e-08
 -0.001418	 -0.001695	diff=0.00027692
  0.001233	  0.001233	diff=1.43863e-09
 -0.011947	 -0.013295	diff=0.00134732
  0.000347	  0.000347	diff=1.01813e-08
 -0.200107	  0.081001	diff=0.281108
 -0.159132	 -0.159158	diff=2.59127e-05
  local_diff=5.35224
# W_src{2}, [8 4]
  0.065538	  0.051417	diff=0.0141212
 -0.175630	 -0.161922	diff=0.0137076
 -0.004050	 -0.002617	diff=0.00143307
 -0.025120	 -0.023318	diff=0.00180133
  0.093038	  0.079182	diff=0.0138558
 -0.236931	 -0.220605	diff=0.0163262
 -1.659308	 -0.553807	diff=1.1055
 -4.804323	 -3.682733	diff=1.12159
 -0.001906	  0.000528	diff=0.00243349
 -0.024761	 -0.027082	diff=0.00232146
 -0.003512	 -0.003766	diff=0.000253877
 -0.005247	 -0.005566	diff=0.000319145
 -0.006328	 -0.003928	diff=0.00239988
 -0.021959	 -0.024730	diff=0.00277099
  1.173279	  1.029448	diff=0.143831
 -0.719435	 -0.862855	diff=0.143421
 -0.016023	 -0.008751	diff=0.007272
 -0.040316	 -0.049292	diff=0.00897554
 -0.000047	 -0.000261	diff=0.0002147
 -0.012320	 -0.012860	diff=0.000540469
 -0.018302	 -0.011513	diff=0.00678803
 -0.047838	 -0.059597	diff=0.0117589
  1.942161	  0.619904	diff=1.32226
 -1.906682	 -1.924690	diff=0.0180089
 -0.046853	 -0.029755	diff=0.0170979
  0.200617	  0.185936	diff=0.0146812
  0.001329	 -0.001233	diff=0.00256236
  0.045139	  0.042209	diff=0.00292919
 -0.071077	 -0.054879	diff=0.0161985
  0.294887	  0.277240	diff=0.017647
  1.332140	  1.427243	diff=0.0951025
  6.191271	  4.718858	diff=1.47241
  local_diff=5.60053
# W_tgt{1}, [8 6]
 -0.000131	 -0.000131	diff=5.95923e-09
  0.010159	  0.010158	diff=3.12633e-07
 -0.000000	 -0.000000	diff=8.50656e-11
  0.007947	  0.007947	diff=2.38423e-07
 -0.000131	 -0.000131	diff=5.91095e-09
  0.020170	  0.020169	diff=7.38914e-07
 -0.000019	 -0.000019	diff=1.683e-09
 -0.078150	 -0.078156	diff=5.29493e-06
  0.008034	  0.008056	diff=2.23562e-05
 -0.622752	 -0.623894	diff=0.00114225
 -0.000003	 -0.000003	diff=1.06323e-07
 -0.486255	 -0.487150	diff=0.000895897
  0.008012	  0.008034	diff=2.2175e-05
 -1.233459	 -1.236421	diff=0.00296155
  0.001156	  0.001150	diff=6.34454e-06
  4.814289	  4.794773	diff=0.0195159
  0.000085	  0.000085	diff=5.2944e-08
  0.094264	  0.093898	diff=0.000366459
 -0.000000	 -0.000000	diff=4.99781e-13
  0.645653	  0.644089	diff=0.00156406
  0.000083	  0.000083	diff=6.51222e-08
  0.799391	  0.796881	diff=0.00250987
  0.000034	  0.000034	diff=8.45057e-08
  0.059463	  0.059460	diff=3.07668e-06
 -0.000017	 -0.000017	diff=1.33525e-08
  0.053012	  0.052913	diff=9.85599e-05
  0.000000	  0.000000	diff=6.72784e-13
  0.334694	  0.334273	diff=0.000421254
 -0.000018	 -0.000018	diff=1.66336e-08
  0.419042	  0.418367	diff=0.000675528
  0.000009	  0.000009	diff=2.25139e-08
 -0.005767	 -0.005767	diff=2.89476e-08
  0.000000	  0.000000	diff=1.67027e-25
 -0.000000	 -0.000000	diff=3.25775e-12
 -0.000000	 -0.000000	diff=2.89207e-13
  0.000000	  0.000000	diff=6.12502e-30
  0.000000	  0.000000	diff=1.59379e-24
  0.000000	  0.000000	diff=6.00168e-10
  0.000000	  0.000000	diff=3.41858e-29
  0.000000	  0.000000	diff=1.06323e-11
 -0.000000	 -0.000000	diff=2.32368e-13
  0.000000	  0.000000	diff=1.93553e-13
  0.000000	  0.000000	diff=3.20502e-13
  0.000000	 -0.000000	diff=7.97462e-14
 -0.000000	 -0.000000	diff=2.23636e-13
  0.000000	  0.000000	diff=1.04861e-10
 -0.000000	 -0.000000	diff=9.75996e-13
 -0.000000	 -0.000000	diff=1.51349e-12
  local_diff=0.0302122
# W_tgt{2}, [8 4]
  0.795289	  0.797287	diff=0.00199819
  3.606518	  3.632048	diff=0.0255297
  0.001028	  0.001024	diff=3.90346e-06
 -0.059172	 -0.058959	diff=0.000213344
 -0.448477	 -0.446724	diff=0.00175268
  0.105206	  0.105613	diff=0.000407264
 -0.374699	 -0.371878	diff=0.00282078
  6.976771	  7.244491	diff=0.26772
 -0.048506	 -0.048507	diff=1.15594e-06
 -0.006173	 -0.006173	diff=2.98446e-08
  0.012406	  0.012407	diff=3.38937e-07
 -0.001289	 -0.001289	diff=3.23347e-08
 -0.029683	 -0.029683	diff=7.45043e-08
 -0.007283	 -0.007283	diff=1.61744e-09
 -0.152077	 -0.152198	diff=0.000121131
 -0.271668	 -0.271698	diff=2.99464e-05
 -0.263061	 -0.262163	diff=0.000897685
 -0.399606	 -0.397822	diff=0.00178369
 -0.074473	 -0.072678	diff=0.00179463
  0.107858	  0.104294	diff=0.00356412
 -0.387562	 -0.385181	diff=0.00238163
  0.009264	  0.007383	diff=0.00188149
 -1.545709	 -1.740783	diff=0.195074
  2.329631	  1.959231	diff=0.3704
  1.063663	  1.063045	diff=0.000617868
 -0.058464	 -0.060299	diff=0.00183555
  0.621296	  0.619274	diff=0.00202191
 -0.123731	 -0.119811	diff=0.00392003
  1.042441	  1.040282	diff=0.00215951
 -0.098599	 -0.096564	diff=0.00203515
 -5.834616	 -5.616721	diff=0.217895
 -4.996530	 -4.590247	diff=0.406283
  local_diff=1.51514
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000073	  0.000041	diff=3.24574e-05
  0.000084	  0.000047	diff=3.76944e-05
 -0.000000	 -0.000000	diff=2.18356e-07
 -0.000000	 -0.000000	diff=1.99579e-07
  local_diff=7.05698e-05
# W_src_char{1}, [8 4]
 -0.000609	 -0.000311	diff=0.00029809
  0.002229	  0.000652	diff=0.00157637
  0.000000	  0.000000	diff=5.96082e-20
  0.000000	 -0.000000	diff=2.51351e-26
  0.000000	 -0.000000	diff=9.12706e-37
  0.000000	  0.000000	diff=6.8105e-28
 -0.000000	 -0.000000	diff=1.54491e-07
  0.000001	  0.000000	diff=4.70736e-07
 -0.001924	 -0.000954	diff=0.000969922
  0.000579	  0.000167	diff=0.000411925
  0.000000	  0.000000	diff=1.42684e-20
  0.000000	 -0.000000	diff=6.82322e-27
  0.000000	 -0.000000	diff=7.48605e-37
  0.000000	  0.000000	diff=5.58599e-28
 -0.000000	 -0.000000	diff=1.53965e-07
  0.000000	  0.000000	diff=1.18172e-07
  0.000000	  0.000000	diff=2.25493e-13
  0.000000	  0.000000	diff=2.35934e-10
  0.000000	  0.000000	diff=9.89563e-27
  0.000000	 -0.000000	diff=3.07433e-33
  0.000000	  0.000000	diff=6.3234e-44
  0.000000	 -0.000000	diff=4.72576e-35
  0.000000	  0.000000	diff=1.24884e-14
  0.000000	  0.000000	diff=1.76359e-14
 -0.000000	 -0.000000	diff=9.66503e-08
  0.000010	  0.000002	diff=7.10849e-06
  0.000000	 -0.000000	diff=4.02766e-23
  0.000000	  0.000000	diff=2.35324e-27
  0.000000	  0.000000	diff=2.18291e-41
  0.000000	  0.000000	diff=9.66544e-31
 -0.000000	 -0.000000	diff=2.57131e-08
 -0.000000	 -0.000000	diff=3.99314e-08
  local_diff=0.00326447
# W_src_char{2}, [8 4]
  0.031555	  0.015910	diff=0.0156458
  0.005200	  0.007763	diff=0.00256252
 -0.000010	 -0.000002	diff=8.17461e-06
  0.014236	 -0.002163	diff=0.0163991
  6.248867	  2.909851	diff=3.33902
  0.004386	  0.002724	diff=0.00166133
  0.000001	 -0.000001	diff=1.60974e-06
 -0.000031	 -0.000015	diff=1.58658e-05
  0.486443	  0.125665	diff=0.360778
 -0.030031	 -0.000930	diff=0.0291004
 -0.018250	 -0.004646	diff=0.0136034
  6.215921	  1.577894	diff=4.63803
  7.922348	  3.314128	diff=4.60822
  7.703431	  1.958476	diff=5.74496
 -0.268813	 -0.065404	diff=0.203409
 -2.597581	 -0.666701	diff=1.93088
  0.011826	  0.002624	diff=0.00920198
  0.000202	 -0.000005	diff=0.000207467
 -0.003483	 -0.000852	diff=0.00263126
  0.883997	  0.226978	diff=0.65702
 -0.015511	 -0.003059	diff=0.0124514
  1.476760	  0.340154	diff=1.13661
  0.000014	  0.000002	diff=1.19034e-05
 -0.295543	 -0.090115	diff=0.205428
  0.078931	  0.017573	diff=0.0613585
  0.002066	 -0.000141	diff=0.00220686
 -0.023372	 -0.005727	diff=0.0176455
  5.935611	  1.526280	diff=4.40933
 -0.242034	 -0.048147	diff=0.193887
  9.959213	  2.286987	diff=7.67223
  0.000113	  0.000026	diff=8.6788e-05
 -1.964740	 -0.605882	diff=1.35886
  local_diff=36.6434
# W_src_char{3}, [8 4]
 -1.668915	 -0.771744	diff=0.897171
  0.011524	  0.005251	diff=0.00627334
  0.013314	  0.004155	diff=0.00915964
 -0.032008	 -0.048333	diff=0.0163248
 -1.754310	 -0.977863	diff=0.776447
 -0.021669	 -0.042943	diff=0.0212747
  0.012709	  0.004106	diff=0.00860321
  0.005352	 -0.004222	diff=0.00957454
 -5.175310	 -2.202759	diff=2.97255
  0.101855	  0.043586	diff=0.0582686
  0.151983	  0.049423	diff=0.10256
 -0.081479	 -0.123416	diff=0.0419369
-21.433653	 -6.774657	diff=14.659
  0.002840	 -0.079530	diff=0.0823697
  0.174839	  0.057110	diff=0.11773
  0.072716	 -0.057059	diff=0.129774
 -0.180331	 -0.043328	diff=0.137003
 -0.000261	  0.000099	diff=0.000359726
  0.002643	  0.000753	diff=0.00189048
 -0.017316	 -0.026146	diff=0.0088292
  0.097851	  0.023846	diff=0.074005
 -0.017669	 -0.025948	diff=0.00827855
  0.001629	  0.000536	diff=0.00109313
  0.000655	 -0.000529	diff=0.00118468
 -0.376528	 -0.090152	diff=0.286377
  0.000054	  0.000084	diff=2.98797e-05
  0.002696	  0.000644	diff=0.00205271
 -0.036564	 -0.055210	diff=0.0186456
  0.137836	  0.032972	diff=0.104864
 -0.036379	 -0.054927	diff=0.0185478
  0.000016	  0.000008	diff=8.66467e-06
 -0.000005	  0.000000	diff=5.06664e-06
  local_diff=20.5722
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000085	  0.000047	diff=3.84976e-05
 -0.000137	 -0.000073	diff=6.4523e-05
  0.000671	  0.000349	diff=0.000321487
  0.000273	  0.000141	diff=0.000132108
  0.000818	  0.000205	diff=0.000612849
 -0.001306	 -0.000318	diff=0.000988594
 -0.000000	 -0.000000	diff=7.91535e-09
  0.000000	  0.000000	diff=1.02644e-07
  local_diff=0.00215817
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=8.77843e-15
  0.000000	  0.000000	diff=2.89038e-15
  0.001830	  0.001767	diff=6.32231e-05
  0.000047	  0.000047	diff=5.36829e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 66.151473	 63.797826	diff=2.35365
 -1.425461	 -1.435598	diff=0.0101374
  0.000000	 -0.000000	diff=7.48106e-17
  0.000000	 -0.000000	diff=1.98712e-17
  local_diff=2.36385
# W_pos, [2 2]
  0.009633	  0.009627	diff=5.8148e-06
  0.009617	  0.009611	diff=5.70771e-06
  0.006311	  0.006303	diff=8.00796e-06
  0.004787	  0.004781	diff=6.00118e-06
  local_diff=2.55317e-05
# v_pos, [1 2]
 -0.013655	 -0.013667	diff=1.18876e-05
 -0.020527	 -0.020551	diff=2.37767e-05
  local_diff=3.56643e-05
# W_h, [2 4]
 -0.049152	 -0.049190	diff=3.72355e-05
 -0.357265	 -0.357335	diff=7.05235e-05
  0.292125	  0.292015	diff=0.000110112
  0.983294	  0.983080	diff=0.000213962
  1.631754	  1.630789	diff=0.000965516
 11.534773	 11.538051	diff=0.00327825
  2.485170	  2.486825	diff=0.00165532
  3.978450	  3.978654	diff=0.000203458
  local_diff=0.00653438
# W_soft, [5 2]
 -1.161258	 -1.161579	diff=0.000321432
  4.228739	  4.228467	diff=0.000271801
  2.242610	  2.241772	diff=0.000838301
 -5.818291	 -5.820157	diff=0.00186652
  0.512812	  0.511497	diff=0.00131519
  0.289453	  0.289430	diff=2.24129e-05
  0.510891	  0.510875	diff=1.61854e-05
  1.702633	  1.702550	diff=8.27952e-05
 -2.615996	 -2.616214	diff=0.000217361
  0.113519	  0.113359	diff=0.00016006
  local_diff=0.00511206
# Num params=294, abs_diff=72.0948
Elapsed time is 5.716346 seconds.
[?1l>