# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000010	  0.000010	diff=6.17714e-11
 -0.000011	 -0.000011	diff=6.72696e-11
  0.000004	  0.000004	diff=3.15016e-10
 -0.000003	 -0.000003	diff=2.69429e-10
  0.000000	  0.000000	diff=4.3928e-13
  0.000001	  0.000001	diff=4.75354e-12
  0.004421	  0.004421	diff=1.55788e-07
  0.006020	  0.006021	diff=9.30088e-08
 -0.000005	 -0.000005	diff=6.28422e-11
  0.000013	  0.000013	diff=1.74402e-11
 -0.000006	 -0.000006	diff=2.94658e-10
  0.000000	  0.000000	diff=4.27279e-11
 -0.000000	 -0.000000	diff=1.1015e-12
 -0.000001	 -0.000001	diff=1.29598e-12
 -0.000831	 -0.000831	diff=8.15894e-08
 -0.003179	 -0.003179	diff=4.09838e-08
 -0.000000	 -0.000000	diff=2.11932e-12
  0.000000	  0.000000	diff=2.29118e-13
 -0.000000	 -0.000000	diff=2.59559e-13
  0.000000	  0.000000	diff=4.41802e-15
  0.000000	  0.000000	diff=6.62351e-13
 -0.000000	 -0.000000	diff=4.75849e-13
 -0.000051	 -0.000051	diff=4.97827e-08
 -0.000075	 -0.000075	diff=2.70437e-11
  0.000000	  0.000000	diff=3.46346e-13
 -0.000000	 -0.000000	diff=5.79698e-13
  0.000000	  0.000000	diff=4.90412e-13
 -0.000000	 -0.000000	diff=2.13149e-13
 -0.000000	 -0.000000	diff=2.15859e-13
  0.000000	  0.000000	diff=1.96564e-14
  0.000012	  0.000012	diff=1.31192e-11
  0.000041	  0.000041	diff=3.99654e-08
  local_diff=4.62302e-07
# W_tgt{1}, [8 6]
 -0.000011	 -0.000011	diff=2.40903e-11
  0.000008	  0.000008	diff=6.29277e-11
 -0.000004	 -0.000004	diff=8.3275e-10
  0.000009	  0.000009	diff=2.96192e-10
  0.000000	  0.000000	diff=4.3047e-12
  0.000018	  0.000018	diff=2.80489e-13
 -0.003969	 -0.003969	diff=1.05323e-07
 -0.011719	 -0.011719	diff=3.27218e-08
 -0.000017	 -0.000017	diff=7.50905e-12
  0.000020	  0.000020	diff=3.55317e-11
 -0.000025	 -0.000025	diff=1.06332e-09
  0.000011	  0.000011	diff=1.28662e-09
 -0.000028	 -0.000028	diff=6.27872e-11
  0.000031	  0.000031	diff=9.20014e-12
 -0.008540	 -0.008540	diff=4.35927e-07
 -0.000826	 -0.000826	diff=3.14139e-07
 -0.000000	 -0.000000	diff=5.01594e-13
  0.000000	  0.000000	diff=5.78937e-13
 -0.000001	 -0.000001	diff=1.13911e-12
 -0.000000	 -0.000000	diff=3.4278e-13
 -0.000001	 -0.000001	diff=4.56117e-14
  0.000000	  0.000000	diff=3.65961e-13
 -0.000200	 -0.000200	diff=2.62442e-07
  0.000071	  0.000071	diff=1.39549e-08
  0.000000	  0.000000	diff=4.45994e-13
  0.000000	  0.000000	diff=8.10606e-13
  0.000000	  0.000000	diff=5.17207e-14
  0.000000	  0.000000	diff=1.96545e-13
  0.000000	  0.000000	diff=4.76632e-14
 -0.000000	 -0.000000	diff=2.93701e-13
  0.000123	  0.000123	diff=2.06469e-09
  0.000010	  0.000010	diff=1.85491e-07
 -0.000000	 -0.000000	diff=3.89233e-13
  0.000000	  0.000000	diff=2.29414e-13
 -0.000001	 -0.000001	diff=7.51087e-12
  0.000000	  0.000000	diff=1.06461e-12
 -0.000001	 -0.000001	diff=1.01553e-11
  0.000001	  0.000001	diff=5.14425e-13
 -0.000322	 -0.000321	diff=2.08661e-07
 -0.000175	 -0.000175	diff=2.39493e-08
  0.000000	  0.000000	diff=1.16091e-13
 -0.000000	 -0.000000	diff=4.31763e-13
  0.000001	  0.000001	diff=1.45715e-12
 -0.000000	 -0.000000	diff=6.29152e-13
  0.000000	  0.000000	diff=3.01951e-13
 -0.000000	 -0.000000	diff=4.29796e-13
  0.000170	  0.000170	diff=3.03361e-09
  0.000156	  0.000156	diff=2.24839e-07
  local_diff=1.81626e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001416	  0.001416	diff=2.24161e-07
  0.000149	  0.000148	diff=4.83014e-07
  0.000265	  0.000265	diff=1.04332e-07
  0.001956	  0.001955	diff=1.18718e-06
  local_diff=1.99869e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001049	  0.001049	diff=1.04602e-07
 -0.000958	 -0.000958	diff=6.36147e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003521	 -0.003520	diff=4.02644e-07
 -0.000193	 -0.000193	diff=2.0067e-07
 -0.004962	 -0.004962	diff=3.19252e-07
 -0.001412	 -0.001412	diff=3.428e-07
  local_diff=2.00611e-06
# W_soft, [5 2]
  0.007849	  0.007849	diff=6.5062e-08
  0.007849	  0.007849	diff=6.50646e-08
  0.004800	  0.004799	diff=6.50659e-08
 -0.013796	 -0.013797	diff=6.50577e-08
 -0.006701	 -0.006701	diff=6.50775e-08
 -0.002503	 -0.002503	diff=1.97754e-08
 -0.002503	 -0.002503	diff=1.97757e-08
 -0.004838	 -0.004839	diff=1.97772e-08
  0.007189	  0.007189	diff=1.97739e-08
  0.002656	  0.002656	diff=1.97791e-08
  local_diff=4.24209e-07
# Num params=110, abs_diff=6.70758e-06
Elapsed time is 0.724004 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.01201e-12
 -0.000000	 -0.000000	diff=6.35909e-13
  0.000000	  0.000000	diff=1.04485e-11
 -0.000000	 -0.000000	diff=1.67593e-12
  0.000001	  0.000001	diff=1.9472e-12
  0.000000	  0.000000	diff=1.72778e-13
 -0.000150	 -0.000150	diff=1.6814e-10
 -0.000020	 -0.000020	diff=2.66738e-10
 -0.000001	 -0.000001	diff=2.50322e-12
  0.000000	  0.000000	diff=9.02429e-13
 -0.000000	 -0.000000	diff=1.98496e-11
  0.000000	  0.000000	diff=2.57834e-12
 -0.000001	 -0.000001	diff=5.14255e-12
 -0.000000	 -0.000000	diff=1.14396e-12
  0.000218	  0.000218	diff=1.87396e-10
  0.000030	  0.000030	diff=5.61483e-10
 -0.000000	 -0.000000	diff=6.42337e-13
  0.000000	  0.000000	diff=4.63791e-13
 -0.000000	 -0.000000	diff=4.84313e-13
  0.000000	  0.000000	diff=7.00858e-13
 -0.000000	 -0.000000	diff=4.78397e-13
 -0.000000	 -0.000000	diff=1.0118e-13
  0.000004	  0.000004	diff=5.00007e-09
  0.000001	  0.000001	diff=5.07508e-12
  0.000000	  0.000000	diff=3.66703e-13
 -0.000000	 -0.000000	diff=4.97045e-14
  0.000000	  0.000000	diff=6.06628e-14
 -0.000000	 -0.000000	diff=8.31975e-13
  0.000000	  0.000000	diff=5.95507e-14
  0.000000	  0.000000	diff=5.59007e-13
 -0.000003	 -0.000003	diff=3.08146e-11
 -0.000001	 -0.000001	diff=5.66983e-10
  local_diff=6.84051e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=8.03802e-14
 -0.000000	 -0.000000	diff=9.53185e-13
 -0.000000	 -0.000000	diff=7.28831e-13
 -0.000000	 -0.000000	diff=3.31755e-14
  0.000000	  0.000000	diff=9.56569e-13
 -0.000000	 -0.000000	diff=8.66522e-14
  0.000154	  0.000154	diff=5.96133e-11
 -0.000141	 -0.000141	diff=8.25531e-11
  0.000000	  0.000000	diff=4.29653e-13
  0.000000	  0.000000	diff=3.05068e-13
  0.000000	  0.000000	diff=2.04698e-13
  0.000000	  0.000000	diff=1.31599e-13
 -0.000000	 -0.000000	diff=2.76807e-13
  0.000000	  0.000000	diff=1.29988e-13
 -0.000126	 -0.000126	diff=3.95108e-11
  0.000117	  0.000117	diff=5.44827e-11
 -0.000000	 -0.000000	diff=4.19572e-13
 -0.000000	 -0.000000	diff=2.81248e-13
 -0.000000	 -0.000000	diff=4.47843e-13
 -0.000000	 -0.000000	diff=1.26669e-13
  0.000000	  0.000000	diff=9.66914e-13
 -0.000000	 -0.000000	diff=6.50479e-13
  0.000003	  0.000003	diff=4.50443e-09
 -0.000003	 -0.000003	diff=4.91204e-14
  0.000000	  0.000000	diff=1.25299e-13
  0.000000	  0.000000	diff=7.31938e-13
  0.000000	  0.000000	diff=4.39996e-13
  0.000000	  0.000000	diff=2.79286e-13
 -0.000000	 -0.000000	diff=1.28328e-14
  0.000000	  0.000000	diff=1.31276e-12
 -0.000004	 -0.000004	diff=3.12506e-13
  0.000003	  0.000003	diff=4.67157e-09
  local_diff=9.42263e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.1358e-12
  0.000000	  0.000000	diff=7.17355e-13
 -0.000000	 -0.000000	diff=3.55204e-12
 -0.000000	 -0.000000	diff=2.5533e-12
 -0.000000	 -0.000000	diff=1.15237e-13
  0.000000	  0.000000	diff=8.5841e-13
  0.000075	  0.000075	diff=3.31281e-10
 -0.000089	 -0.000089	diff=6.88033e-10
  0.000000	  0.000000	diff=3.59578e-13
 -0.000000	 -0.000000	diff=3.93993e-13
  0.000000	  0.000000	diff=2.05753e-11
  0.000000	  0.000000	diff=1.09593e-11
  0.000000	  0.000000	diff=1.59798e-12
 -0.000000	 -0.000000	diff=8.16826e-13
 -0.000200	 -0.000200	diff=1.91575e-09
  0.000218	  0.000218	diff=1.40996e-09
 -0.000000	 -0.000000	diff=2.48619e-13
  0.000000	  0.000000	diff=6.71826e-13
  0.000000	  0.000000	diff=9.36701e-13
 -0.000000	 -0.000000	diff=2.57788e-13
  0.000000	  0.000000	diff=1.30817e-13
  0.000000	  0.000000	diff=4.0149e-15
 -0.000000	 -0.000000	diff=1.9846e-12
  0.000000	  0.000000	diff=7.72185e-15
  0.000000	  0.000000	diff=9.7026e-14
 -0.000000	 -0.000000	diff=1.07181e-13
 -0.000000	 -0.000000	diff=2.49916e-13
  0.000000	  0.000000	diff=3.32967e-13
 -0.000000	 -0.000000	diff=1.64263e-13
 -0.000000	 -0.000000	diff=3.16626e-13
  0.000000	  0.000000	diff=5.38418e-13
 -0.000000	 -0.000000	diff=5.78386e-12
  0.000000	  0.000000	diff=3.21581e-13
 -0.000000	 -0.000000	diff=2.1214e-13
  0.000000	  0.000000	diff=1.09172e-12
  0.000000	  0.000000	diff=6.37362e-13
  0.000000	  0.000000	diff=6.32383e-13
 -0.000000	 -0.000000	diff=3.52803e-13
 -0.000006	 -0.000006	diff=1.72576e-08
  0.000006	  0.000006	diff=2.70846e-10
 -0.000000	 -0.000000	diff=7.56398e-13
  0.000000	  0.000000	diff=1.32195e-12
 -0.000000	 -0.000000	diff=6.8749e-14
 -0.000000	 -0.000000	diff=1.47369e-12
 -0.000000	 -0.000000	diff=4.59041e-13
  0.000000	  0.000000	diff=3.97613e-13
  0.000003	  0.000003	diff=1.66925e-10
 -0.000003	 -0.000003	diff=4.75861e-09
  local_diff=2.68622e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=8.65635e-13
 -0.000000	 -0.000000	diff=4.34091e-13
 -0.000000	 -0.000000	diff=7.33809e-14
 -0.000000	 -0.000000	diff=1.18128e-12
 -0.000000	 -0.000000	diff=5.30703e-14
 -0.000000	 -0.000000	diff=1.62783e-13
  0.000182	  0.000182	diff=3.50528e-09
 -0.000127	 -0.000127	diff=2.63484e-09
  0.000000	  0.000000	diff=4.47805e-14
 -0.000000	 -0.000000	diff=2.77995e-14
 -0.000000	 -0.000000	diff=4.2504e-14
 -0.000000	 -0.000000	diff=8.06954e-13
 -0.000000	 -0.000000	diff=5.8054e-13
 -0.000000	 -0.000000	diff=2.58382e-13
  0.000015	  0.000015	diff=2.75182e-09
 -0.000013	 -0.000013	diff=1.13536e-09
  0.000000	  0.000000	diff=1.48656e-12
 -0.000000	 -0.000000	diff=5.3465e-13
 -0.000000	 -0.000000	diff=5.83813e-13
 -0.000000	 -0.000000	diff=8.1559e-14
 -0.000000	 -0.000000	diff=5.2296e-14
 -0.000000	 -0.000000	diff=2.16327e-13
  0.000011	  0.000011	diff=3.31133e-08
 -0.000008	 -0.000008	diff=3.27926e-10
 -0.000000	 -0.000000	diff=6.03095e-13
  0.000000	  0.000000	diff=3.68365e-13
  0.000000	  0.000000	diff=1.76702e-13
  0.000000	  0.000000	diff=2.50519e-13
  0.000000	  0.000000	diff=1.74047e-13
  0.000000	  0.000000	diff=6.5127e-13
 -0.000016	 -0.000016	diff=9.35584e-11
  0.000010	  0.000010	diff=1.98404e-08
  local_diff=6.34122e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000075	  0.000075	diff=2.82593e-08
 -0.000092	 -0.000092	diff=9.28177e-08
  0.000074	  0.000074	diff=2.53399e-08
 -0.000081	 -0.000081	diff=7.86173e-08
  local_diff=2.25034e-07
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000022	  0.000022	diff=6.25761e-08
 -0.000053	 -0.000053	diff=2.94624e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000070	 -0.000070	diff=9.6036e-08
 -0.000063	 -0.000063	diff=4.16344e-08
  0.000021	  0.000021	diff=4.15104e-08
 -0.000032	 -0.000032	diff=2.02925e-08
  local_diff=2.91512e-07
# W_soft, [5 2]
 -0.000086	 -0.000086	diff=8.19208e-12
 -0.000086	 -0.000086	diff=7.88968e-12
 -0.000024	 -0.000024	diff=8.03629e-12
  0.000187	  0.000187	diff=8.942e-12
  0.000009	  0.000009	diff=8.86197e-12
  0.000190	  0.000190	diff=3.24091e-11
  0.000190	  0.000190	diff=3.27182e-11
  0.000086	  0.000086	diff=3.28738e-11
 -0.000414	 -0.000414	diff=3.26647e-11
 -0.000051	 -0.000051	diff=3.27591e-11
  local_diff=2.05347e-10
# Num params=174, abs_diff=6.23289e-07
Elapsed time is 1.467927 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.70699e-13
  0.000000	  0.000000	diff=1.76517e-13
  0.000000	  0.000000	diff=1.4175e-11
  0.000000	  0.000000	diff=1.21093e-12
  0.000000	  0.000000	diff=2.94252e-12
  0.000000	  0.000000	diff=3.72169e-13
 -0.000088	 -0.000088	diff=9.05964e-10
  0.000004	  0.000004	diff=3.24596e-11
 -0.000000	 -0.000000	diff=1.47084e-12
  0.000000	  0.000000	diff=3.51307e-13
 -0.000000	 -0.000000	diff=2.88642e-11
  0.000000	  0.000000	diff=2.9091e-12
 -0.000000	 -0.000000	diff=4.0228e-12
 -0.000000	 -0.000000	diff=1.74188e-12
  0.000076	  0.000076	diff=1.09826e-09
  0.000034	  0.000034	diff=7.39404e-10
 -0.000000	 -0.000000	diff=5.59183e-13
  0.000000	  0.000000	diff=1.05866e-13
 -0.000000	 -0.000000	diff=1.89004e-13
  0.000000	  0.000000	diff=5.61954e-13
 -0.000000	 -0.000000	diff=1.62299e-13
 -0.000000	 -0.000000	diff=2.25475e-13
  0.000002	  0.000002	diff=4.92705e-09
  0.000000	  0.000000	diff=6.29919e-12
  0.000000	  0.000000	diff=1.48164e-12
 -0.000000	 -0.000000	diff=7.9407e-13
  0.000000	  0.000000	diff=9.11813e-14
 -0.000000	 -0.000000	diff=1.78877e-13
  0.000000	  0.000000	diff=1.18734e-13
  0.000000	  0.000000	diff=6.98045e-13
 -0.000002	 -0.000002	diff=3.65579e-11
 -0.000001	 -0.000001	diff=4.20082e-10
  local_diff=8.23016e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.39122e-13
 -0.000000	 -0.000000	diff=8.35316e-13
 -0.000000	 -0.000000	diff=7.53571e-13
 -0.000000	 -0.000000	diff=1.04244e-13
  0.000000	  0.000000	diff=7.26414e-15
 -0.000000	 -0.000000	diff=3.27244e-13
  0.000111	  0.000111	diff=7.47341e-11
 -0.000035	 -0.000035	diff=4.90506e-11
  0.000000	  0.000000	diff=3.64479e-13
  0.000000	  0.000000	diff=9.94459e-14
  0.000000	  0.000000	diff=9.29944e-13
  0.000000	  0.000000	diff=5.39092e-13
 -0.000000	 -0.000000	diff=1.08016e-13
  0.000000	  0.000000	diff=2.46041e-13
 -0.000163	 -0.000163	diff=7.90881e-11
  0.000135	  0.000135	diff=9.3633e-11
 -0.000000	 -0.000000	diff=1.15611e-13
 -0.000000	 -0.000000	diff=6.17457e-13
 -0.000000	 -0.000000	diff=2.26721e-13
 -0.000000	 -0.000000	diff=2.51084e-13
  0.000000	  0.000000	diff=7.79556e-13
 -0.000000	 -0.000000	diff=5.86092e-13
  0.000003	  0.000003	diff=4.91467e-09
 -0.000001	 -0.000001	diff=6.2867e-13
  0.000000	  0.000000	diff=1.39697e-13
  0.000000	  0.000000	diff=9.37538e-13
  0.000000	  0.000000	diff=4.67156e-14
  0.000000	  0.000000	diff=3.52655e-13
 -0.000000	 -0.000000	diff=2.00908e-13
  0.000000	  0.000000	diff=1.70998e-13
 -0.000004	 -0.000004	diff=8.47843e-13
  0.000002	  0.000002	diff=4.77479e-09
  local_diff=9.99663e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.59023e-13
  0.000000	  0.000000	diff=2.58292e-13
 -0.000000	 -0.000000	diff=3.58941e-12
 -0.000000	 -0.000000	diff=4.98908e-12
 -0.000000	 -0.000000	diff=1.00825e-12
  0.000000	  0.000000	diff=3.37876e-14
  0.000042	  0.000042	diff=2.90536e-10
 -0.000112	 -0.000112	diff=1.38789e-09
  0.000000	  0.000000	diff=5.45505e-13
 -0.000000	 -0.000000	diff=1.89052e-12
  0.000000	  0.000000	diff=2.94054e-11
  0.000000	  0.000000	diff=2.19001e-11
  0.000000	  0.000000	diff=1.73231e-12
 -0.000000	 -0.000000	diff=4.31294e-13
 -0.000158	 -0.000158	diff=2.53594e-09
  0.000233	  0.000233	diff=1.98497e-09
 -0.000000	 -0.000000	diff=2.98429e-13
  0.000000	  0.000000	diff=9.2267e-14
  0.000000	  0.000000	diff=3.69807e-13
 -0.000000	 -0.000000	diff=8.34184e-13
  0.000000	  0.000000	diff=9.33658e-13
  0.000000	  0.000000	diff=1.59363e-13
 -0.000000	 -0.000000	diff=1.21301e-12
  0.000000	  0.000000	diff=3.80376e-13
  0.000000	  0.000000	diff=1.52892e-13
 -0.000000	 -0.000000	diff=1.60575e-13
 -0.000000	 -0.000000	diff=5.20818e-13
  0.000000	  0.000000	diff=8.54171e-14
 -0.000000	 -0.000000	diff=1.17125e-12
  0.000000	  0.000000	diff=8.69386e-13
  0.000000	  0.000000	diff=1.38672e-13
 -0.000000	 -0.000000	diff=9.15253e-12
  0.000000	  0.000000	diff=4.43923e-13
 -0.000000	 -0.000000	diff=8.00218e-14
  0.000000	  0.000000	diff=1.96003e-13
  0.000000	  0.000000	diff=4.49582e-13
  0.000000	  0.000000	diff=2.4237e-13
 -0.000000	 -0.000000	diff=4.30746e-13
 -0.000004	 -0.000004	diff=1.16943e-08
  0.000005	  0.000005	diff=3.52506e-10
 -0.000000	 -0.000000	diff=9.6141e-14
  0.000000	  0.000000	diff=9.16034e-14
 -0.000000	 -0.000000	diff=5.0626e-14
 -0.000000	 -0.000000	diff=4.09526e-13
 -0.000000	 -0.000000	diff=1.91686e-13
  0.000000	  0.000000	diff=2.76682e-13
  0.000002	  0.000002	diff=1.09243e-10
 -0.000004	 -0.000004	diff=6.36185e-09
  local_diff=2.48032e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.01695e-12
 -0.000000	 -0.000000	diff=2.79277e-13
 -0.000000	 -0.000000	diff=4.14675e-13
 -0.000000	 -0.000000	diff=9.96538e-13
 -0.000000	 -0.000000	diff=1.59943e-13
 -0.000000	 -0.000000	diff=5.17265e-13
  0.000104	  0.000104	diff=2.3385e-09
  0.000012	  0.000012	diff=2.40086e-09
  0.000000	  0.000000	diff=2.45358e-13
 -0.000000	 -0.000000	diff=2.4845e-13
 -0.000000	 -0.000000	diff=5.49966e-13
 -0.000000	 -0.000000	diff=8.73966e-13
 -0.000000	 -0.000000	diff=1.00127e-13
 -0.000000	 -0.000000	diff=4.30607e-13
  0.000022	  0.000022	diff=4.77782e-09
 -0.000020	 -0.000020	diff=2.2462e-09
  0.000000	  0.000000	diff=1.13921e-13
  0.000000	  0.000000	diff=7.60806e-13
 -0.000000	 -0.000000	diff=1.66555e-13
 -0.000000	 -0.000000	diff=7.03774e-13
 -0.000000	 -0.000000	diff=5.38458e-13
 -0.000000	 -0.000000	diff=5.65232e-13
  0.000009	  0.000009	diff=2.80555e-08
 -0.000003	 -0.000003	diff=2.42601e-10
 -0.000000	 -0.000000	diff=1.4268e-12
  0.000000	  0.000000	diff=2.62208e-13
  0.000000	  0.000000	diff=3.31084e-13
  0.000000	  0.000000	diff=6.06037e-13
  0.000000	  0.000000	diff=2.41643e-13
  0.000000	  0.000000	diff=1.45481e-13
 -0.000015	 -0.000015	diff=7.61084e-11
  0.000005	  0.000005	diff=1.60776e-08
  local_diff=5.62269e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=1.72009e-08
 -0.000014	 -0.000014	diff=4.22729e-08
  0.000062	  0.000062	diff=2.32496e-08
 -0.000020	 -0.000020	diff=1.66708e-08
  local_diff=9.93941e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000107	  0.000107	diff=5.82653e-08
 -0.000042	 -0.000042	diff=2.80125e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=8.8686e-08
 -0.000040	 -0.000040	diff=2.87379e-08
  0.000068	  0.000068	diff=5.73714e-08
 -0.000034	 -0.000034	diff=2.63123e-08
  local_diff=2.87385e-07
# W_soft, [5 2]
 -0.000090	 -0.000090	diff=1.29046e-11
 -0.000090	 -0.000090	diff=1.25565e-11
 -0.000013	 -0.000013	diff=1.19156e-11
  0.000150	  0.000150	diff=1.24629e-11
  0.000042	  0.000042	diff=1.26882e-11
  0.000192	  0.000192	diff=4.55799e-11
  0.000192	  0.000192	diff=4.60538e-11
  0.000090	  0.000090	diff=4.51997e-11
 -0.000352	 -0.000352	diff=4.58334e-11
 -0.000122	 -0.000122	diff=4.54174e-11
  local_diff=2.90612e-10
# Num params=174, abs_diff=4.86327e-07
Elapsed time is 1.461958 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.10696e-12
  0.000000	  0.000000	diff=6.70375e-13
  0.000000	  0.000000	diff=2.47699e-12
  0.000000	  0.000000	diff=1.51055e-13
 -0.000000	 -0.000000	diff=7.73048e-13
  0.000000	  0.000000	diff=9.05343e-13
  0.000012	  0.000012	diff=5.69556e-11
 -0.000005	 -0.000005	diff=1.1581e-11
  0.000000	  0.000000	diff=2.2595e-12
  0.000000	  0.000000	diff=1.24361e-12
  0.000000	  0.000000	diff=1.74161e-12
 -0.000000	 -0.000000	diff=2.91956e-12
  0.000000	  0.000000	diff=6.8421e-13
  0.000000	  0.000000	diff=1.38577e-12
  0.000011	  0.000011	diff=8.12106e-11
 -0.000005	 -0.000005	diff=1.41798e-11
 -0.000000	 -0.000000	diff=1.15436e-12
 -0.000000	 -0.000000	diff=1.25316e-12
  0.000000	  0.000000	diff=1.57941e-13
  0.000000	  0.000000	diff=1.19224e-12
  0.000000	  0.000000	diff=2.51838e-12
  0.000000	  0.000000	diff=3.93528e-12
  0.000000	  0.000000	diff=7.19831e-11
 -0.000000	 -0.000000	diff=2.32948e-12
  0.000000	  0.000000	diff=1.85803e-12
  0.000000	  0.000000	diff=1.71013e-13
 -0.000000	 -0.000000	diff=2.44952e-12
 -0.000000	 -0.000000	diff=1.78813e-13
 -0.000000	 -0.000000	diff=2.04398e-12
 -0.000000	 -0.000000	diff=1.90341e-12
 -0.000000	 -0.000000	diff=1.10745e-12
  0.000000	  0.000000	diff=5.97914e-11
  local_diff=3.34272e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=8.76675e-14
  0.000000	  0.000000	diff=2.8484e-12
 -0.000000	 -0.000000	diff=2.04158e-12
  0.000000	  0.000000	diff=2.75283e-13
 -0.000000	 -0.000000	diff=1.00612e-12
  0.000000	  0.000000	diff=1.67419e-12
 -0.000000	 -0.000000	diff=5.39373e-13
 -0.000001	 -0.000001	diff=2.18537e-12
 -0.000000	 -0.000000	diff=7.88696e-13
 -0.000000	 -0.000000	diff=2.38741e-12
 -0.000000	 -0.000000	diff=2.32875e-12
 -0.000000	 -0.000000	diff=1.93567e-14
  0.000000	  0.000000	diff=7.34106e-13
 -0.000000	 -0.000000	diff=1.11336e-12
 -0.000000	 -0.000000	diff=9.13076e-13
  0.000007	  0.000007	diff=1.33655e-14
  0.000000	 -0.000000	diff=4.22083e-14
  0.000000	  0.000000	diff=1.04469e-12
  0.000000	  0.000000	diff=2.3057e-13
  0.000000	  0.000000	diff=6.36955e-14
  0.000000	 -0.000000	diff=2.2974e-13
  0.000000	  0.000000	diff=8.10708e-13
  0.000000	  0.000000	diff=2.91412e-12
 -0.000000	 -0.000000	diff=4.03544e-13
  0.000000	  0.000000	diff=2.80106e-12
 -0.000000	 -0.000000	diff=3.38959e-13
  0.000000	 -0.000000	diff=2.88294e-13
 -0.000000	 -0.000000	diff=1.02002e-12
  0.000000	  0.000000	diff=2.54787e-12
 -0.000000	 -0.000000	diff=1.61238e-13
 -0.000000	 -0.000000	diff=8.84062e-13
  0.000000	  0.000000	diff=1.42572e-10
  local_diff=1.75309e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.50753e-13
  0.000000	  0.000000	diff=1.14975e-12
 -0.000000	 -0.000000	diff=6.26084e-13
 -0.000000	 -0.000000	diff=7.55906e-13
  0.000000	  0.000000	diff=2.5278e-12
  0.000000	  0.000000	diff=1.84075e-12
 -0.000004	 -0.000004	diff=1.10834e-11
  0.000013	  0.000013	diff=8.82487e-12
 -0.000000	 -0.000000	diff=2.52258e-12
 -0.000000	 -0.000000	diff=3.40192e-13
 -0.000000	 -0.000000	diff=3.49635e-14
 -0.000000	 -0.000000	diff=2.47154e-12
 -0.000000	 -0.000000	diff=2.23102e-12
 -0.000000	 -0.000000	diff=9.61752e-13
  0.000006	  0.000006	diff=4.85525e-11
  0.000001	  0.000001	diff=2.48229e-11
  0.000000	 -0.000000	diff=2.87996e-12
  0.000000	 -0.000000	diff=9.9274e-13
  0.000000	  0.000000	diff=4.91792e-14
  0.000000	  0.000000	diff=1.9065e-12
  0.000000	 -0.000000	diff=2.86755e-12
  0.000000	 -0.000000	diff=2.40343e-13
 -0.000000	 -0.000000	diff=2.55512e-12
 -0.000000	 -0.000000	diff=1.8255e-12
  0.000000	  0.000000	diff=2.01185e-14
  0.000000	 -0.000000	diff=5.06188e-13
  0.000000	  0.000000	diff=4.05646e-14
  0.000000	  0.000000	diff=1.74604e-13
  0.000000	  0.000000	diff=4.1754e-14
  0.000000	 -0.000000	diff=3.58072e-13
  0.000000	  0.000000	diff=6.46484e-13
 -0.000000	 -0.000000	diff=2.96825e-12
  0.000000	  0.000000	diff=1.02916e-13
 -0.000000	 -0.000000	diff=3.83878e-13
 -0.000000	 -0.000000	diff=1.03183e-12
 -0.000000	 -0.000000	diff=1.57589e-12
 -0.000000	 -0.000000	diff=1.53904e-12
 -0.000000	 -0.000000	diff=6.41085e-13
  0.000000	  0.000000	diff=2.55348e-11
 -0.000000	 -0.000000	diff=1.473e-11
  0.000000	  0.000000	diff=5.27348e-13
  0.000000	  0.000000	diff=5.74814e-13
  0.000000	  0.000000	diff=1.45353e-12
 -0.000000	 -0.000000	diff=2.74128e-15
  0.000000	  0.000000	diff=1.73407e-12
 -0.000000	 -0.000000	diff=6.35648e-13
  0.000000	  0.000000	diff=3.85359e-12
  0.000000	  0.000000	diff=2.09692e-09
  local_diff=2.27831e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.51658e-12
 -0.000000	 -0.000000	diff=3.09176e-12
  0.000000	  0.000000	diff=3.14035e-13
  0.000000	  0.000000	diff=6.16043e-13
  0.000000	  0.000000	diff=6.19598e-14
 -0.000000	 -0.000000	diff=1.89743e-12
 -0.000002	 -0.000002	diff=2.66835e-12
  0.000012	  0.000012	diff=3.76343e-12
 -0.000000	 -0.000000	diff=2.09972e-12
 -0.000000	 -0.000000	diff=1.37549e-12
 -0.000000	 -0.000000	diff=1.38739e-12
 -0.000000	 -0.000000	diff=1.45123e-12
 -0.000000	 -0.000000	diff=1.38814e-12
 -0.000000	 -0.000000	diff=2.4335e-12
 -0.000007	 -0.000007	diff=5.46363e-12
  0.000011	  0.000011	diff=1.74144e-10
  0.000000	 -0.000000	diff=6.32704e-13
 -0.000000	 -0.000000	diff=1.96219e-12
  0.000000	  0.000000	diff=7.39636e-13
  0.000000	  0.000000	diff=2.6106e-12
  0.000000	  0.000000	diff=2.24219e-12
  0.000000	  0.000000	diff=1.20115e-12
  0.000000	  0.000000	diff=3.43733e-11
 -0.000000	 -0.000000	diff=1.59907e-11
  0.000000	  0.000000	diff=2.53195e-12
  0.000000	  0.000000	diff=4.13598e-13
 -0.000000	 -0.000000	diff=1.33424e-12
  0.000000	 -0.000000	diff=6.09292e-13
  0.000000	 -0.000000	diff=7.25697e-14
  0.000000	 -0.000000	diff=3.34069e-12
  0.000000	  0.000000	diff=7.36568e-13
  0.000000	  0.000000	diff=1.30927e-09
  local_diff=1.58273e-09
# W_emb_src, [2 5]
 -0.000015	 -0.000015	diff=5.08607e-09
  0.000028	  0.000028	diff=2.03796e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=1.03462e-09
  0.000005	  0.000005	diff=3.65579e-09
 -0.000000	 -0.000000	diff=7.05836e-11
 -0.000000	 -0.000000	diff=1.58752e-10
  local_diff=3.03854e-08
# W_emb_tgt, [2 5]
  0.000037	  0.000037	diff=9.64444e-09
 -0.000003	 -0.000003	diff=1.0634e-09
  0.000009	  0.000009	diff=1.08925e-10
  0.000002	  0.000002	diff=1.04583e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000009	  0.000009	diff=1.85823e-09
  0.000000	  0.000000	diff=5.14693e-10
  0.000015	  0.000015	diff=2.03721e-09
 -0.000001	 -0.000001	diff=1.84446e-11
  local_diff=1.62912e-08
# W_tgt_char{1}, [8 4]
  0.000008	  0.000008	diff=4.20131e-12
  0.000007	  0.000007	diff=2.72057e-11
  0.000003	  0.000003	diff=1.11172e-10
 -0.000001	 -0.000001	diff=1.09929e-10
  0.000010	  0.000010	diff=2.16775e-12
  0.000004	  0.000004	diff=3.08557e-11
 -0.015995	 -0.015995	diff=1.43672e-07
  0.016736	  0.016736	diff=7.1125e-08
  0.000000	  0.000000	diff=1.07011e-11
  0.000004	  0.000004	diff=3.91624e-11
  0.000003	  0.000003	diff=3.24987e-10
 -0.000001	 -0.000001	diff=1.77656e-10
  0.000005	  0.000005	diff=1.66466e-11
 -0.000000	 -0.000000	diff=4.00819e-11
 -0.010151	 -0.010151	diff=1.0108e-07
  0.021186	  0.021186	diff=1.09109e-07
 -0.000000	 -0.000000	diff=1.07553e-12
  0.000000	  0.000000	diff=2.66835e-12
  0.000000	  0.000000	diff=4.33089e-13
 -0.000000	 -0.000000	diff=1.47793e-12
  0.000000	  0.000000	diff=2.64844e-12
  0.000000	  0.000000	diff=1.64856e-12
 -0.000087	 -0.000087	diff=1.51246e-07
  0.000027	  0.000027	diff=1.07306e-10
 -0.000000	 -0.000000	diff=9.63825e-13
  0.000000	  0.000000	diff=2.42477e-13
  0.000000	  0.000000	diff=9.31386e-13
 -0.000000	 -0.000000	diff=1.96057e-12
  0.000000	  0.000000	diff=1.20719e-12
 -0.000000	 -0.000000	diff=2.13593e-12
 -0.000026	 -0.000026	diff=6.58706e-12
  0.000057	  0.000057	diff=2.19237e-08
  local_diff=5.99182e-07
# W_emb_tgt_char, [2 5]
  0.012873	  0.012871	diff=1.91179e-06
 -0.011693	 -0.011695	diff=1.15829e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.003822	  0.003823	diff=2.29114e-07
 -0.010428	 -0.010424	diff=3.94919e-06
  0.004255	  0.004255	diff=7.36839e-07
 -0.001888	 -0.001890	diff=1.46235e-06
  0.002597	  0.002596	diff=8.22657e-07
  0.004580	  0.004576	diff=4.55604e-06
  local_diff=1.48263e-05
# W_h, [2 4]
  0.000002	  0.000002	diff=1.54902e-12
  0.000000	  0.000000	diff=8.35504e-13
 -0.000003	 -0.000003	diff=3.00103e-13
 -0.000001	 -0.000001	diff=2.24329e-12
 -0.000005	 -0.000005	diff=5.59786e-13
 -0.000005	 -0.000005	diff=1.62963e-12
 -0.000005	 -0.000005	diff=8.03889e-11
 -0.000009	 -0.000009	diff=3.09414e-11
  local_diff=1.18448e-10
# W_soft, [5 2]
 -0.000016	 -0.000016	diff=4.37937e-13
  0.000012	  0.000012	diff=7.48704e-13
  0.000018	  0.000018	diff=1.26094e-13
 -0.000016	 -0.000016	diff=3.94884e-14
  0.000002	  0.000002	diff=1.10004e-12
 -0.000006	 -0.000006	diff=2.30782e-13
  0.000007	  0.000007	diff=1.01095e-12
 -0.000000	 -0.000000	diff=3.7718e-13
 -0.000003	 -0.000003	diff=1.21102e-13
  0.000002	  0.000002	diff=5.24088e-13
  local_diff=4.71636e-12
# W_soft_char, [5 2]
 -0.004081	 -0.004081	diff=7.73885e-09
  0.000061	  0.000061	diff=7.73893e-09
  0.002733	  0.002733	diff=7.73961e-09
 -0.000336	 -0.000336	diff=7.73684e-09
  0.001623	  0.001623	diff=7.73909e-09
  0.000812	  0.000812	diff=3.79262e-09
 -0.005105	 -0.005105	diff=3.79342e-09
 -0.000615	 -0.000615	diff=3.79456e-09
  0.003165	  0.003165	diff=3.79321e-09
  0.001743	  0.001743	diff=3.79483e-09
  local_diff=5.7662e-08
# Num params=234, abs_diff=1.55343e-05
Elapsed time is 3.904370 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=7.80896e-13
 -0.000000	 -0.000000	diff=3.13078e-12
 -0.000000	 -0.000000	diff=3.81437e-12
 -0.000000	 -0.000000	diff=4.23118e-13
 -0.000000	 -0.000000	diff=1.4373e-12
 -0.000000	 -0.000000	diff=3.32853e-12
  0.000020	  0.000020	diff=6.34948e-11
 -0.000007	 -0.000007	diff=5.21889e-11
  0.000000	  0.000000	diff=5.49311e-13
  0.000000	  0.000000	diff=1.39687e-12
  0.000000	  0.000000	diff=2.12541e-12
  0.000000	  0.000000	diff=7.99923e-13
  0.000000	  0.000000	diff=6.89381e-13
  0.000000	  0.000000	diff=6.79471e-13
 -0.000027	 -0.000027	diff=1.307e-10
  0.000010	  0.000010	diff=1.14148e-10
  0.000000	  0.000000	diff=3.02323e-12
  0.000000	  0.000000	diff=4.12572e-12
  0.000000	  0.000000	diff=1.06964e-12
  0.000000	  0.000000	diff=1.72528e-12
  0.000000	  0.000000	diff=1.25717e-12
 -0.000000	 -0.000000	diff=1.67459e-12
 -0.000000	 -0.000000	diff=2.9142e-10
  0.000000	  0.000000	diff=3.04722e-12
 -0.000000	 -0.000000	diff=3.22296e-12
 -0.000000	 -0.000000	diff=1.51869e-12
 -0.000000	 -0.000000	diff=1.07862e-12
 -0.000000	 -0.000000	diff=3.35696e-14
 -0.000000	 -0.000000	diff=2.18728e-12
  0.000000	  0.000000	diff=3.11049e-12
  0.000000	  0.000000	diff=2.94716e-12
 -0.000000	 -0.000000	diff=6.23536e-10
  local_diff=1.32466e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.0182e-12
 -0.000000	 -0.000000	diff=9.09243e-13
  0.000000	  0.000000	diff=2.63977e-12
 -0.000000	 -0.000000	diff=3.38283e-12
  0.000000	  0.000000	diff=1.68778e-12
  0.000000	  0.000000	diff=5.70012e-14
 -0.000039	 -0.000039	diff=4.75707e-12
 -0.000010	 -0.000010	diff=2.03716e-12
 -0.000000	 -0.000000	diff=1.80542e-12
  0.000000	  0.000000	diff=3.4256e-12
 -0.000000	 -0.000000	diff=8.64027e-13
  0.000000	  0.000000	diff=1.45706e-12
 -0.000000	 -0.000000	diff=2.99959e-12
 -0.000000	 -0.000000	diff=9.80672e-13
  0.000031	  0.000031	diff=5.04728e-12
  0.000008	  0.000008	diff=5.31109e-12
  0.000000	  0.000000	diff=6.95164e-13
 -0.000000	 -0.000000	diff=2.29668e-12
  0.000000	  0.000000	diff=8.82348e-13
 -0.000000	 -0.000000	diff=2.04968e-12
  0.000000	  0.000000	diff=1.71285e-12
  0.000000	  0.000000	diff=2.91306e-12
 -0.000001	 -0.000001	diff=1.00812e-09
 -0.000000	 -0.000000	diff=7.06429e-13
 -0.000000	 -0.000000	diff=2.2601e-13
  0.000000	  0.000000	diff=9.27367e-13
 -0.000000	 -0.000000	diff=9.13891e-13
  0.000000	  0.000000	diff=1.23182e-12
 -0.000000	 -0.000000	diff=1.39579e-12
 -0.000000	 -0.000000	diff=1.08507e-12
  0.000001	  0.000001	diff=2.73915e-12
  0.000000	  0.000000	diff=8.49472e-10
  local_diff=1.91575e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.25429e-12
  0.000000	  0.000000	diff=5.22829e-13
 -0.000000	 -0.000000	diff=2.41845e-12
 -0.000000	 -0.000000	diff=1.82639e-12
 -0.000000	 -0.000000	diff=1.15447e-12
  0.000000	  0.000000	diff=1.3253e-12
  0.000005	  0.000005	diff=2.87122e-11
 -0.000005	 -0.000005	diff=1.47394e-10
  0.000000	  0.000000	diff=1.90989e-12
 -0.000000	 -0.000000	diff=4.54135e-13
  0.000000	  0.000000	diff=1.79725e-12
  0.000000	  0.000000	diff=1.73059e-12
  0.000000	  0.000000	diff=1.71347e-12
 -0.000000	 -0.000000	diff=1.56064e-12
 -0.000005	 -0.000005	diff=4.08655e-11
  0.000027	  0.000027	diff=3.41311e-10
  0.000000	 -0.000000	diff=2.17904e-13
  0.000000	 -0.000000	diff=2.67384e-12
  0.000000	  0.000000	diff=9.27302e-14
  0.000000	  0.000000	diff=3.94131e-13
  0.000000	 -0.000000	diff=9.99062e-14
  0.000000	 -0.000000	diff=1.75478e-12
 -0.000000	 -0.000000	diff=5.70613e-13
 -0.000000	 -0.000000	diff=5.00792e-13
  0.000000	  0.000000	diff=8.33467e-14
  0.000000	  0.000000	diff=2.44918e-12
  0.000000	  0.000000	diff=2.77668e-12
  0.000000	  0.000000	diff=2.14584e-12
  0.000000	  0.000000	diff=2.71069e-12
  0.000000	  0.000000	diff=1.86983e-12
  0.000000	  0.000000	diff=1.93782e-12
  0.000000	  0.000000	diff=1.88399e-12
  0.000000	  0.000000	diff=1.1725e-12
 -0.000000	 -0.000000	diff=1.66821e-12
 -0.000000	 -0.000000	diff=5.1071e-13
  0.000000	  0.000000	diff=1.32361e-14
  0.000000	  0.000000	diff=3.94218e-12
 -0.000000	 -0.000000	diff=5.35004e-13
 -0.000000	 -0.000000	diff=3.68462e-10
  0.000001	  0.000001	diff=3.67729e-11
 -0.000000	 -0.000000	diff=1.03865e-14
  0.000000	  0.000000	diff=1.30472e-12
 -0.000000	 -0.000000	diff=6.98414e-13
 -0.000000	 -0.000000	diff=8.48533e-13
 -0.000000	 -0.000000	diff=2.32873e-13
  0.000000	  0.000000	diff=2.64601e-12
 -0.000000	 -0.000000	diff=7.45062e-13
 -0.000000	 -0.000000	diff=6.7104e-11
  local_diff=1.08478e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=5.77405e-13
 -0.000000	 -0.000000	diff=4.98992e-13
 -0.000000	 -0.000000	diff=1.72456e-12
 -0.000000	 -0.000000	diff=3.84911e-12
 -0.000000	 -0.000000	diff=8.4802e-13
 -0.000000	 -0.000000	diff=2.92465e-12
  0.000007	  0.000007	diff=9.25245e-12
 -0.000007	 -0.000007	diff=3.37963e-11
 -0.000000	 -0.000000	diff=1.82084e-12
 -0.000000	 -0.000000	diff=2.40993e-13
 -0.000000	 -0.000000	diff=1.43033e-12
 -0.000000	 -0.000000	diff=1.75213e-12
 -0.000000	 -0.000000	diff=1.23042e-12
 -0.000000	 -0.000000	diff=3.44881e-12
  0.000011	  0.000011	diff=1.44283e-11
  0.000001	  0.000001	diff=8.46726e-11
  0.000000	  0.000000	diff=1.72157e-12
 -0.000000	 -0.000000	diff=9.58181e-13
 -0.000000	 -0.000000	diff=1.90185e-12
 -0.000000	 -0.000000	diff=1.11262e-12
 -0.000000	 -0.000000	diff=2.7826e-12
 -0.000000	 -0.000000	diff=6.59314e-13
  0.000000	  0.000000	diff=7.52145e-10
 -0.000001	 -0.000001	diff=5.53775e-11
  0.000000	 -0.000000	diff=3.3829e-12
  0.000000	  0.000000	diff=1.86303e-12
  0.000000	  0.000000	diff=1.66565e-12
  0.000000	  0.000000	diff=2.3625e-12
  0.000000	  0.000000	diff=2.09679e-12
  0.000000	  0.000000	diff=2.44318e-12
 -0.000000	 -0.000000	diff=5.16726e-12
  0.000001	  0.000001	diff=4.62008e-09
  local_diff=5.61821e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000016	 -0.000016	diff=6.01322e-09
  0.000025	  0.000025	diff=1.84266e-08
 -0.000005	 -0.000005	diff=2.1608e-09
  0.000013	  0.000013	diff=8.17923e-09
  local_diff=3.47798e-08
# W_emb_tgt, [2 5]
  0.000072	  0.000072	diff=8.84946e-09
  0.000002	  0.000002	diff=2.85791e-09
  0.000036	  0.000036	diff=7.49699e-09
 -0.000002	 -0.000002	diff=1.00609e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=1.98981e-10
  0.000000	  0.000000	diff=4.71259e-10
  0.000009	  0.000009	diff=2.72854e-11
  0.000000	  0.000000	diff=3.69947e-10
  local_diff=2.12779e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.79744e-12
 -0.000000	 -0.000000	diff=8.98666e-13
  0.000000	 -0.000000	diff=2.18326e-12
  0.000000	  0.000000	diff=5.64123e-13
 -0.000000	 -0.000000	diff=2.64494e-12
  0.000000	  0.000000	diff=2.05413e-12
  0.000000	  0.000000	diff=1.26897e-13
 -0.000000	 -0.000000	diff=5.51505e-14
  0.000000	  0.000000	diff=3.83117e-13
 -0.000000	 -0.000000	diff=3.81273e-13
 -0.000000	 -0.000000	diff=2.30533e-12
 -0.000000	 -0.000000	diff=1.26463e-12
  0.000000	  0.000000	diff=4.06938e-12
 -0.000000	 -0.000000	diff=1.03917e-12
  0.000000	  0.000000	diff=1.54416e-12
 -0.000000	 -0.000000	diff=9.80704e-12
  0.000000	  0.000000	diff=5.00116e-13
  0.000000	 -0.000000	diff=1.23479e-12
  0.000000	 -0.000000	diff=9.63172e-14
  0.000000	  0.000000	diff=2.66633e-12
  0.000000	  0.000000	diff=4.15496e-13
  0.000000	 -0.000000	diff=7.63299e-13
  0.000000	  0.000000	diff=4.49308e-13
 -0.000000	 -0.000000	diff=9.99929e-13
  0.000000	 -0.000000	diff=1.63604e-12
  0.000000	  0.000000	diff=1.28607e-12
  0.000000	 -0.000000	diff=2.66679e-14
  0.000000	  0.000000	diff=1.56729e-12
  0.000000	 -0.000000	diff=1.65847e-12
  0.000000	  0.000000	diff=2.65906e-12
 -0.000000	 -0.000000	diff=3.85261e-12
  0.000000	  0.000000	diff=3.1803e-12
  local_diff=5.41108e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.80361e-11
 -0.000000	 -0.000000	diff=1.47888e-10
 -0.000000	 -0.000000	diff=1.44536e-13
 -0.000000	 -0.000000	diff=1.70744e-11
 -0.000000	 -0.000000	diff=2.52507e-12
 -0.000000	 -0.000000	diff=1.6802e-11
 -0.000000	 -0.000000	diff=5.95712e-13
 -0.000000	 -0.000000	diff=5.68945e-11
  local_diff=2.69961e-10
# W_tgt_char{1}, [8 4]
  0.000023	  0.000023	diff=3.71608e-10
  0.000011	  0.000011	diff=2.07472e-10
  0.000013	  0.000013	diff=3.12752e-10
  0.000031	  0.000031	diff=1.35704e-09
  0.000068	  0.000068	diff=2.82653e-10
  0.000075	  0.000075	diff=7.29925e-11
 -0.026173	 -0.026174	diff=2.97355e-07
 -0.030773	 -0.030773	diff=5.62781e-07
 -0.000047	 -0.000047	diff=1.94386e-10
  0.000044	  0.000044	diff=8.09591e-11
  0.000028	  0.000028	diff=6.89831e-10
  0.000033	  0.000033	diff=1.04935e-09
 -0.000031	 -0.000031	diff=1.31079e-10
  0.000050	  0.000050	diff=9.80852e-11
 -0.006718	 -0.006718	diff=2.51365e-07
 -0.021207	 -0.021207	diff=1.58331e-07
  0.000001	  0.000001	diff=3.40213e-13
 -0.000001	 -0.000001	diff=1.7666e-12
 -0.000001	 -0.000001	diff=3.20815e-12
 -0.000001	 -0.000001	diff=3.06432e-12
  0.000000	  0.000000	diff=1.63186e-12
 -0.000001	 -0.000001	diff=1.73021e-12
  0.000314	  0.000314	diff=1.46756e-07
  0.000556	  0.000556	diff=7.53364e-10
  0.000001	  0.000001	diff=1.23208e-12
 -0.000000	 -0.000000	diff=1.89854e-12
 -0.000001	 -0.000001	diff=2.17393e-12
 -0.000001	 -0.000001	diff=2.90624e-12
  0.000000	  0.000000	diff=3.74999e-12
 -0.000001	 -0.000001	diff=1.35021e-12
  0.000310	  0.000310	diff=1.63047e-09
  0.000620	  0.000620	diff=4.26615e-07
  local_diff=1.85046e-06
# W_emb_tgt_char, [2 5]
  0.019313	  0.019311	diff=1.13234e-06
 -0.003571	 -0.003571	diff=2.89182e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.033827	 -0.033830	diff=3.14029e-06
  0.018269	  0.018267	diff=1.94274e-06
 -0.005612	 -0.005614	diff=2.39203e-06
  0.005518	  0.005517	diff=7.63406e-07
 -0.006433	 -0.006433	diff=4.3076e-07
  0.001249	  0.001249	diff=1.1884e-07
  local_diff=1.02096e-05
# W_h, [2 4]
  0.000012	  0.000012	diff=4.73009e-12
 -0.000061	 -0.000061	diff=3.90937e-12
 -0.000015	 -0.000015	diff=7.15103e-13
  0.000073	  0.000073	diff=2.92214e-12
  0.000003	  0.000003	diff=5.18852e-13
 -0.000015	 -0.000015	diff=2.02057e-11
 -0.000022	 -0.000022	diff=7.51252e-12
  0.000026	  0.000026	diff=2.39725e-10
  local_diff=2.80239e-10
# W_soft, [5 2]
 -0.000040	 -0.000040	diff=9.91793e-13
  0.000016	  0.000016	diff=2.0318e-12
  0.000000	  0.000000	diff=5.30629e-13
  0.000008	  0.000008	diff=3.3936e-12
  0.000016	  0.000016	diff=1.57869e-12
  0.000002	  0.000002	diff=3.45968e-12
 -0.000005	 -0.000005	diff=1.29697e-12
  0.000012	  0.000012	diff=2.2856e-12
 -0.000005	 -0.000005	diff=3.14775e-12
 -0.000005	 -0.000005	diff=1.17869e-12
  local_diff=1.98952e-11
# W_soft_char, [5 2]
  0.001081	  0.001081	diff=9.06092e-08
 -0.026076	 -0.026076	diff=9.06097e-08
  0.029185	  0.029185	diff=9.06092e-08
 -0.002364	 -0.002364	diff=9.06056e-08
 -0.001826	 -0.001826	diff=9.06084e-08
 -0.005737	 -0.005737	diff=6.63907e-08
 -0.022733	 -0.022733	diff=6.63891e-08
  0.016765	  0.016765	diff=6.63902e-08
  0.012345	  0.012345	diff=6.63828e-08
 -0.000640	 -0.000640	diff=6.63843e-08
  local_diff=7.84979e-07
# Num params=276, abs_diff=1.29116e-05
Elapsed time is 5.157117 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.8725e-12
  0.000000	  0.000000	diff=1.58875e-14
  0.000000	  0.000000	diff=1.16744e-13
  0.000000	  0.000000	diff=1.23174e-13
 -0.000000	 -0.000000	diff=1.5964e-12
 -0.000000	 -0.000000	diff=7.81839e-13
  0.000004	  0.000004	diff=1.56611e-11
  0.000001	  0.000001	diff=8.26549e-12
  0.000000	  0.000000	diff=1.20017e-12
 -0.000000	 -0.000000	diff=1.92646e-12
 -0.000000	 -0.000000	diff=7.64767e-13
 -0.000000	 -0.000000	diff=4.27904e-13
  0.000000	  0.000000	diff=8.0174e-13
  0.000000	  0.000000	diff=2.83679e-14
 -0.000005	 -0.000005	diff=3.57426e-11
 -0.000001	 -0.000001	diff=1.89974e-11
 -0.000000	 -0.000000	diff=3.42648e-14
 -0.000000	 -0.000000	diff=2.10967e-12
  0.000000	  0.000000	diff=4.66548e-13
 -0.000000	 -0.000000	diff=1.18586e-12
  0.000000	  0.000000	diff=4.70315e-14
  0.000000	  0.000000	diff=4.13425e-15
 -0.000000	 -0.000000	diff=2.34309e-10
 -0.000000	 -0.000000	diff=2.07574e-12
  0.000000	  0.000000	diff=4.34393e-13
  0.000000	  0.000000	diff=2.01128e-13
 -0.000000	 -0.000000	diff=2.20792e-12
  0.000000	  0.000000	diff=5.06123e-13
 -0.000000	 -0.000000	diff=1.95041e-12
 -0.000000	 -0.000000	diff=3.14361e-13
  0.000000	  0.000000	diff=3.34371e-12
  0.000000	  0.000000	diff=5.15075e-11
  local_diff=3.8902e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=3.08428e-13
  0.000000	  0.000000	diff=2.24639e-12
 -0.000000	 -0.000000	diff=2.32342e-13
  0.000000	  0.000000	diff=9.04466e-13
 -0.000000	 -0.000000	diff=2.22653e-13
  0.000000	  0.000000	diff=1.47762e-12
  0.000002	  0.000002	diff=8.56158e-13
  0.000006	  0.000006	diff=2.51527e-12
  0.000000	  0.000000	diff=1.29453e-12
 -0.000000	 -0.000000	diff=1.98211e-12
  0.000000	  0.000000	diff=7.49623e-13
 -0.000000	 -0.000000	diff=2.5562e-12
  0.000000	  0.000000	diff=2.45531e-12
 -0.000000	 -0.000000	diff=1.07781e-12
 -0.000002	 -0.000002	diff=1.29943e-12
 -0.000005	 -0.000005	diff=1.88705e-12
 -0.000000	 -0.000000	diff=3.81183e-13
  0.000000	  0.000000	diff=1.09363e-12
  0.000000	 -0.000000	diff=1.41289e-12
  0.000000	  0.000000	diff=2.70963e-13
  0.000000	 -0.000000	diff=1.09816e-12
  0.000000	  0.000000	diff=5.09697e-13
  0.000000	  0.000000	diff=6.71933e-11
  0.000000	  0.000000	diff=2.60133e-12
  0.000000	  0.000000	diff=8.38292e-13
 -0.000000	 -0.000000	diff=5.05543e-13
  0.000000	  0.000000	diff=1.10121e-12
 -0.000000	 -0.000000	diff=1.54122e-12
  0.000000	  0.000000	diff=1.45158e-12
 -0.000000	 -0.000000	diff=1.64666e-14
 -0.000000	 -0.000000	diff=1.77541e-12
 -0.000000	 -0.000000	diff=3.23808e-10
  local_diff=4.27665e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=2.12441e-13
 -0.000000	 -0.000000	diff=1.24557e-12
 -0.000000	 -0.000000	diff=8.22815e-13
  0.000000	  0.000000	diff=7.4522e-13
 -0.000000	 -0.000000	diff=1.73216e-12
 -0.000000	 -0.000000	diff=1.01271e-12
  0.000001	  0.000001	diff=2.28651e-11
  0.000013	  0.000013	diff=1.03542e-10
  0.000000	  0.000000	diff=2.04522e-12
  0.000000	  0.000000	diff=4.79092e-13
  0.000000	  0.000000	diff=3.788e-13
 -0.000000	 -0.000000	diff=2.48033e-12
  0.000000	  0.000000	diff=1.34726e-12
  0.000000	  0.000000	diff=9.26865e-13
 -0.000004	 -0.000004	diff=5.99578e-11
 -0.000023	 -0.000023	diff=1.91308e-10
  0.000000	  0.000000	diff=1.19976e-13
  0.000000	  0.000000	diff=7.05247e-15
  0.000000	 -0.000000	diff=1.09949e-13
  0.000000	 -0.000000	diff=2.27843e-13
  0.000000	 -0.000000	diff=2.42457e-14
  0.000000	 -0.000000	diff=1.79603e-13
  0.000000	  0.000000	diff=3.11388e-14
  0.000000	  0.000000	diff=2.00706e-12
  0.000000	  0.000000	diff=1.57019e-13
  0.000000	  0.000000	diff=2.95527e-13
  0.000000	 -0.000000	diff=1.52901e-13
  0.000000	 -0.000000	diff=3.92817e-13
  0.000000	 -0.000000	diff=3.60098e-14
  0.000000	 -0.000000	diff=4.90439e-14
  0.000000	  0.000000	diff=1.85352e-12
  0.000000	  0.000000	diff=5.66502e-13
  0.000000	  0.000000	diff=7.26253e-13
  0.000000	  0.000000	diff=2.71998e-13
  0.000000	  0.000000	diff=8.01697e-13
 -0.000000	 -0.000000	diff=2.36827e-12
  0.000000	  0.000000	diff=1.75509e-12
  0.000000	  0.000000	diff=2.20127e-14
 -0.000000	 -0.000000	diff=1.34823e-10
 -0.000000	 -0.000000	diff=1.73939e-12
 -0.000000	 -0.000000	diff=3.94812e-13
 -0.000000	 -0.000000	diff=6.27526e-13
 -0.000000	 -0.000000	diff=2.25386e-12
  0.000000	  0.000000	diff=3.19353e-13
 -0.000000	 -0.000000	diff=6.05891e-13
 -0.000000	 -0.000000	diff=2.15424e-13
  0.000000	  0.000000	diff=1.43494e-12
 -0.000000	 -0.000000	diff=1.6767e-10
  local_diff=7.13341e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.40249e-12
  0.000000	  0.000000	diff=5.04987e-13
 -0.000000	 -0.000000	diff=1.53473e-12
  0.000000	  0.000000	diff=6.35361e-13
 -0.000000	 -0.000000	diff=1.29905e-12
  0.000000	  0.000000	diff=1.87157e-12
  0.000002	  0.000002	diff=8.14259e-13
  0.000006	  0.000006	diff=4.04085e-12
  0.000000	  0.000000	diff=7.47564e-13
  0.000000	  0.000000	diff=8.76135e-13
 -0.000000	 -0.000000	diff=3.37395e-13
  0.000000	  0.000000	diff=4.03439e-13
  0.000000	  0.000000	diff=2.47953e-12
  0.000000	  0.000000	diff=2.16167e-12
  0.000001	  0.000001	diff=1.54449e-11
  0.000010	  0.000010	diff=6.38905e-11
  0.000000	  0.000000	diff=2.19942e-12
  0.000000	  0.000000	diff=4.33362e-13
 -0.000000	 -0.000000	diff=3.98244e-13
  0.000000	  0.000000	diff=1.21578e-13
 -0.000000	 -0.000000	diff=9.58235e-13
  0.000000	  0.000000	diff=1.70763e-12
  0.000000	  0.000000	diff=2.77931e-10
  0.000000	  0.000000	diff=2.41483e-12
 -0.000000	 -0.000000	diff=1.36314e-12
 -0.000000	 -0.000000	diff=6.0234e-13
  0.000000	  0.000000	diff=7.9408e-13
 -0.000000	 -0.000000	diff=3.05744e-13
  0.000000	  0.000000	diff=1.39168e-12
 -0.000000	 -0.000000	diff=5.50346e-14
 -0.000000	 -0.000000	diff=1.30203e-12
 -0.000000	 -0.000000	diff=2.10634e-11
  local_diff=4.11486e-10
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=8.65718e-10
  0.000002	  0.000002	diff=1.87279e-09
 -0.000001	 -0.000001	diff=4.10162e-10
  0.000002	  0.000002	diff=8.87961e-10
  local_diff=4.03663e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=4.09644e-09
 -0.000003	 -0.000003	diff=2.12269e-09
 -0.000025	 -0.000025	diff=4.31602e-10
 -0.000001	 -0.000001	diff=9.39137e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.34761e-10
 -0.000001	 -0.000001	diff=3.65779e-10
 -0.000004	 -0.000004	diff=1.28977e-10
 -0.000000	 -0.000000	diff=2.88814e-10
  local_diff=9.2082e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=9.67714e-13
  0.000000	  0.000000	diff=1.1252e-14
  0.000000	  0.000000	diff=1.2103e-13
  0.000000	  0.000000	diff=1.41726e-15
  0.000000	 -0.000000	diff=4.87326e-13
  0.000000	  0.000000	diff=8.73032e-15
 -0.000000	 -0.000000	diff=1.90736e-13
 -0.000000	 -0.000000	diff=8.96194e-13
  0.000000	  0.000000	diff=2.29092e-13
  0.000000	 -0.000000	diff=1.31737e-14
  0.000000	 -0.000000	diff=1.17132e-13
  0.000000	  0.000000	diff=2.83932e-15
  0.000000	  0.000000	diff=1.59326e-13
  0.000000	 -0.000000	diff=8.03638e-15
 -0.000000	 -0.000000	diff=1.23867e-12
  0.000000	  0.000000	diff=2.73392e-12
  0.000000	  0.000000	diff=7.32364e-15
  0.000000	 -0.000000	diff=3.00779e-16
  0.000000	 -0.000000	diff=4.42331e-15
  0.000000	  0.000000	diff=8.65471e-17
  0.000000	  0.000000	diff=1.89346e-15
  0.000000	 -0.000000	diff=1.9707e-16
  0.000000	 -0.000000	diff=1.35782e-12
  0.000000	 -0.000000	diff=1.54061e-13
  0.000000	 -0.000000	diff=2.19222e-16
  0.000000	 -0.000000	diff=5.36782e-17
  0.000000	 -0.000000	diff=2.78903e-16
  0.000000	  0.000000	diff=3.16673e-17
  0.000000	 -0.000000	diff=1.90915e-16
  0.000000	 -0.000000	diff=2.67153e-17
  0.000000	  0.000000	diff=1.44488e-12
  0.000000	 -0.000000	diff=5.98631e-14
  local_diff=1.02182e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=3.5989e-15
  0.000000	 -0.000000	diff=5.3374e-15
  0.000000	  0.000000	diff=2.86811e-16
  0.000000	  0.000000	diff=2.17696e-16
  0.000000	 -0.000000	diff=1.91509e-15
  0.000000	 -0.000000	diff=3.43254e-15
  0.000000	  0.000000	diff=6.08789e-14
  0.000000	  0.000000	diff=1.51225e-12
  0.000000	 -0.000000	diff=2.68152e-16
  0.000000	 -0.000000	diff=2.11662e-15
  0.000000	  0.000000	diff=2.34141e-16
  0.000000	  0.000000	diff=3.12344e-16
  0.000000	 -0.000000	diff=3.14455e-16
  0.000000	 -0.000000	diff=1.41187e-15
 -0.000000	 -0.000000	diff=8.70521e-13
 -0.000000	 -0.000000	diff=4.45641e-13
  0.000000	  0.000000	diff=1.40958e-20
  0.000000	 -0.000000	diff=8.31185e-18
  0.000000	  0.000000	diff=2.67893e-17
  0.000000	  0.000000	diff=1.16284e-17
  0.000000	  0.000000	diff=2.07658e-17
  0.000000	  0.000000	diff=1.47617e-17
  0.000000	 -0.000000	diff=1.55434e-12
  0.000000	 -0.000000	diff=1.0506e-12
  0.000000	  0.000000	diff=6.96299e-18
  0.000000	 -0.000000	diff=2.11464e-17
  0.000000	  0.000000	diff=2.2162e-17
  0.000000	  0.000000	diff=3.75488e-17
  0.000000	  0.000000	diff=2.52647e-17
  0.000000	  0.000000	diff=2.39061e-17
  0.000000	  0.000000	diff=2.43134e-12
  0.000000	  0.000000	diff=7.45815e-14
  local_diff=8.01982e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.87302e-17
  0.000000	  0.000000	diff=8.39459e-17
  0.000000	 -0.000000	diff=3.13081e-18
  0.000000	  0.000000	diff=2.27343e-17
  0.000000	 -0.000000	diff=1.98365e-17
  0.000000	  0.000000	diff=7.60317e-17
  0.000000	  0.000000	diff=4.62514e-13
 -0.000000	 -0.000000	diff=7.4878e-13
  0.000000	 -0.000000	diff=8.14716e-17
  0.000000	  0.000000	diff=2.48424e-16
  0.000000	 -0.000000	diff=7.35033e-18
  0.000000	  0.000000	diff=4.0633e-17
  0.000000	 -0.000000	diff=5.26581e-17
  0.000000	  0.000000	diff=2.16394e-16
  0.000000	  0.000000	diff=2.86727e-13
 -0.000000	 -0.000000	diff=1.4126e-12
  0.000000	 -0.000000	diff=8.82558e-20
  0.000000	  0.000000	diff=2.98731e-19
  0.000000	 -0.000000	diff=3.87585e-19
  0.000000	  0.000000	diff=5.36797e-19
  0.000000	 -0.000000	diff=4.56219e-19
  0.000000	  0.000000	diff=8.25931e-19
  0.000000	 -0.000000	diff=1.01963e-12
  0.000000	  0.000000	diff=1.02361e-12
  0.000000	 -0.000000	diff=3.74104e-19
  0.000000	  0.000000	diff=2.00509e-18
  0.000000	 -0.000000	diff=5.75815e-19
  0.000000	  0.000000	diff=1.6485e-18
  0.000000	 -0.000000	diff=1.30386e-18
  0.000000	  0.000000	diff=3.84593e-18
  0.000000	  0.000000	diff=1.03942e-13
  0.000000	 -0.000000	diff=4.26501e-13
  local_diff=5.48519e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=9.1127e-13
  0.000000	  0.000000	diff=2.4357e-12
 -0.000000	 -0.000000	diff=1.73246e-12
  0.000000	  0.000000	diff=1.94258e-12
 -0.000000	 -0.000000	diff=9.59301e-13
  0.000000	  0.000000	diff=2.01634e-13
 -0.000000	 -0.000000	diff=1.15252e-13
  0.000000	  0.000000	diff=3.00362e-14
  local_diff=8.32823e-12
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=4.07477e-13
  0.000000	  0.000000	diff=7.82517e-13
  0.000000	  0.000000	diff=8.51259e-14
  0.000000	  0.000000	diff=1.86947e-13
 -0.000000	 -0.000000	diff=9.95516e-13
  0.000000	  0.000000	diff=5.25774e-13
 -0.000001	 -0.000001	diff=3.96384e-12
  0.000001	  0.000001	diff=8.88659e-12
  0.000000	  0.000000	diff=1.03748e-12
 -0.000000	 -0.000000	diff=2.39952e-13
 -0.000000	 -0.000000	diff=7.94327e-13
  0.000000	  0.000000	diff=1.10628e-13
  0.000000	  0.000000	diff=3.24414e-13
 -0.000000	 -0.000000	diff=4.56351e-13
  0.000002	  0.000002	diff=4.60943e-11
  0.000003	  0.000003	diff=5.26234e-11
  0.000000	  0.000000	diff=1.28126e-12
 -0.000000	 -0.000000	diff=1.20127e-12
 -0.000000	 -0.000000	diff=4.37163e-13
  0.000000	  0.000000	diff=3.36398e-13
  0.000000	  0.000000	diff=1.46088e-12
 -0.000000	 -0.000000	diff=1.11275e-12
  0.000000	  0.000000	diff=4.18244e-11
  0.000000	  0.000000	diff=7.26596e-13
  0.000000	  0.000000	diff=6.72794e-13
  0.000000	 -0.000000	diff=6.66665e-13
  0.000000	  0.000000	diff=4.61555e-13
 -0.000000	 -0.000000	diff=1.51904e-13
  0.000000	  0.000000	diff=5.48538e-13
 -0.000000	 -0.000000	diff=1.31465e-12
  0.000000	  0.000000	diff=9.7382e-13
  0.000000	  0.000000	diff=1.88067e-12
  local_diff=1.72566e-10
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=1.40241e-12
  0.000000	  0.000000	diff=1.55306e-12
  0.000000	  0.000000	diff=1.54109e-12
  0.000000	  0.000000	diff=1.34424e-12
 -0.000000	 -0.000000	diff=2.3328e-13
  0.000000	  0.000000	diff=3.28563e-13
 -0.000000	 -0.000000	diff=9.01052e-13
 -0.000000	 -0.000000	diff=1.71777e-12
  0.000000	  0.000000	diff=2.17501e-12
 -0.000000	 -0.000000	diff=1.37649e-12
 -0.000000	 -0.000000	diff=1.06829e-12
 -0.000000	 -0.000000	diff=1.12607e-13
  0.000000	  0.000000	diff=7.24565e-13
 -0.000000	 -0.000000	diff=2.48169e-13
  0.000001	  0.000001	diff=1.01988e-12
  0.000002	  0.000002	diff=1.21862e-12
  0.000000	  0.000000	diff=8.14528e-14
  0.000000	 -0.000000	diff=4.81711e-13
  0.000000	  0.000000	diff=6.53366e-14
  0.000000	 -0.000000	diff=1.67405e-13
  0.000000	  0.000000	diff=1.76695e-13
  0.000000	 -0.000000	diff=5.37627e-13
 -0.000000	 -0.000000	diff=1.85117e-11
  0.000000	  0.000000	diff=7.47049e-14
  0.000000	  0.000000	diff=2.17671e-13
  0.000000	 -0.000000	diff=5.00702e-13
  0.000000	  0.000000	diff=2.0542e-14
  0.000000	 -0.000000	diff=1.93917e-13
  0.000000	  0.000000	diff=2.50713e-13
  0.000000	 -0.000000	diff=6.17451e-13
  0.000000	  0.000000	diff=8.89372e-13
  0.000000	  0.000000	diff=1.86575e-11
  local_diff=5.84096e-11
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=2.58887e-13
  0.000000	  0.000000	diff=2.24703e-13
  0.000000	  0.000000	diff=2.9277e-13
  0.000000	 -0.000000	diff=1.97359e-14
  0.000000	  0.000000	diff=2.32281e-13
  0.000000	  0.000000	diff=5.65917e-13
  0.000001	  0.000001	diff=5.84093e-14
  0.000000	  0.000000	diff=7.66325e-13
  0.000000	  0.000000	diff=1.48594e-13
 -0.000000	 -0.000000	diff=1.25294e-12
  0.000000	  0.000000	diff=1.14856e-13
  0.000000	 -0.000000	diff=5.33947e-13
  0.000000	  0.000000	diff=1.6384e-13
  0.000000	 -0.000000	diff=1.8336e-12
  0.000000	  0.000000	diff=1.29214e-13
 -0.000004	 -0.000004	diff=7.07125e-13
  0.000000	 -0.000000	diff=1.19266e-14
  0.000000	  0.000000	diff=2.35618e-14
  0.000000	 -0.000000	diff=4.62855e-15
  0.000000	  0.000000	diff=1.02264e-14
  0.000000	 -0.000000	diff=1.9626e-14
  0.000000	  0.000000	diff=3.16893e-14
 -0.000000	 -0.000000	diff=2.4499e-11
  0.000000	  0.000000	diff=7.6968e-13
  0.000000	 -0.000000	diff=5.09017e-15
  0.000000	  0.000000	diff=1.08407e-14
  0.000000	 -0.000000	diff=1.57336e-15
  0.000000	  0.000000	diff=4.75861e-15
  0.000000	 -0.000000	diff=8.04192e-15
  0.000000	  0.000000	diff=1.46401e-14
 -0.000000	 -0.000000	diff=1.53804e-13
  0.000000	  0.000000	diff=1.43902e-11
  local_diff=4.72625e-11
# W_emb_tgt_char, [2 5]
  0.000001	  0.000001	diff=3.82051e-10
 -0.000002	 -0.000002	diff=4.9486e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=1.41123e-10
 -0.000002	 -0.000002	diff=8.67335e-11
 -0.000000	 -0.000000	diff=4.44484e-11
 -0.000000	 -0.000000	diff=1.35496e-10
 -0.000000	 -0.000000	diff=2.43801e-11
 -0.000000	 -0.000000	diff=1.34412e-10
  local_diff=9.9813e-10
# W_h, [2 4]
 -0.000002	 -0.000002	diff=6.89737e-13
  0.000006	  0.000006	diff=6.24583e-13
  0.000003	  0.000003	diff=2.76791e-12
 -0.000008	 -0.000008	diff=7.07582e-13
 -0.000003	 -0.000003	diff=6.19934e-12
  0.000002	  0.000002	diff=1.30532e-12
 -0.000011	 -0.000011	diff=4.90876e-11
 -0.000009	 -0.000009	diff=4.77995e-11
  local_diff=1.09182e-10
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=2.95413e-12
  0.000011	  0.000011	diff=2.73981e-12
 -0.000003	 -0.000003	diff=1.34567e-12
  0.000008	  0.000008	diff=2.85658e-12
 -0.000002	 -0.000002	diff=1.47251e-12
 -0.000018	 -0.000018	diff=1.69866e-12
  0.000011	  0.000011	diff=1.77743e-12
  0.000005	  0.000005	diff=2.10383e-12
  0.000008	  0.000008	diff=1.48779e-12
 -0.000006	 -0.000006	diff=1.4588e-12
  local_diff=1.98952e-11
# W_soft_char, [5 2]
  0.000003	  0.000003	diff=8.34652e-13
 -0.000002	 -0.000002	diff=2.39294e-13
 -0.000000	 -0.000000	diff=2.06296e-12
 -0.000000	 -0.000000	diff=7.91298e-13
 -0.000000	 -0.000000	diff=9.75152e-13
  0.000002	  0.000002	diff=7.84891e-13
 -0.000004	 -0.000004	diff=9.76395e-13
  0.000001	  0.000001	diff=9.55952e-13
  0.000000	  0.000000	diff=9.52527e-13
  0.000000	  0.000000	diff=1.07746e-12
  local_diff=9.65058e-12
# Num params=404, abs_diff=1.66335e-08
Elapsed time is 9.077869 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.14024e-11
  0.000000	  0.000000	diff=2.98208e-12
  0.000000	  0.000000	diff=3.20668e-13
  0.000000	  0.000000	diff=3.00746e-12
 -0.000000	 -0.000000	diff=8.11305e-12
 -0.000000	 -0.000000	diff=1.51222e-11
  0.000004	  0.000004	diff=9.07591e-12
  0.000001	  0.000001	diff=2.00305e-11
  0.000000	  0.000000	diff=1.34545e-14
 -0.000000	 -0.000000	diff=2.08171e-12
 -0.000000	 -0.000000	diff=4.58539e-12
 -0.000000	 -0.000000	diff=5.18749e-12
  0.000000	  0.000000	diff=2.16616e-12
  0.000000	  0.000000	diff=8.33059e-12
 -0.000005	 -0.000005	diff=2.98857e-11
 -0.000001	 -0.000001	diff=1.5515e-11
 -0.000000	 -0.000000	diff=1.94274e-14
 -0.000000	 -0.000000	diff=2.10669e-12
  0.000000	  0.000000	diff=3.32661e-12
 -0.000000	 -0.000000	diff=4.49648e-12
  0.000000	  0.000000	diff=2.91522e-12
  0.000000	  0.000000	diff=1.39426e-15
 -0.000000	 -0.000000	diff=2.45317e-10
 -0.000000	 -0.000000	diff=9.17581e-12
  0.000000	  0.000000	diff=2.3956e-12
  0.000000	  0.000000	diff=2.03627e-13
 -0.000000	 -0.000000	diff=3.49187e-12
  0.000000	  0.000000	diff=5.07778e-13
 -0.000000	 -0.000000	diff=9.13635e-13
 -0.000000	 -0.000000	diff=5.37462e-12
  0.000000	  0.000000	diff=1.87025e-12
  0.000000	  0.000000	diff=3.84572e-11
  local_diff=4.58393e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.3532e-12
  0.000000	  0.000000	diff=2.27314e-12
 -0.000000	 -0.000000	diff=5.45822e-12
  0.000000	  0.000000	diff=4.76317e-12
 -0.000000	 -0.000000	diff=5.48685e-12
  0.000000	  0.000000	diff=4.3256e-12
  0.000002	  0.000002	diff=1.51059e-11
  0.000006	  0.000006	diff=3.90026e-12
  0.000000	  0.000000	diff=1.31381e-12
 -0.000000	 -0.000000	diff=3.72471e-12
  0.000000	  0.000000	diff=2.09761e-12
 -0.000000	 -0.000000	diff=3.14202e-12
  0.000000	  0.000000	diff=2.43423e-12
 -0.000000	 -0.000000	diff=1.76927e-12
 -0.000002	 -0.000002	diff=8.75618e-13
 -0.000005	 -0.000005	diff=4.37712e-12
  0.000000	 -0.000000	diff=5.30346e-12
  0.000000	  0.000000	diff=3.93661e-12
  0.000000	 -0.000000	diff=1.4131e-12
  0.000000	  0.000000	diff=5.41382e-12
  0.000000	 -0.000000	diff=1.09876e-12
  0.000000	  0.000000	diff=2.33232e-12
  0.000000	  0.000000	diff=6.13274e-11
  0.000000	  0.000000	diff=1.10267e-11
  0.000000	  0.000000	diff=4.84569e-12
 -0.000000	 -0.000000	diff=2.33762e-12
  0.000000	  0.000000	diff=1.74121e-12
 -0.000000	 -0.000000	diff=4.14366e-12
  0.000000	  0.000000	diff=1.39133e-12
  0.000000	 -0.000000	diff=2.82552e-12
 -0.000000	 -0.000000	diff=3.1798e-12
 -0.000000	 -0.000000	diff=3.28374e-10
  local_diff=5.07092e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.33495e-12
 -0.000000	 -0.000000	diff=1.20503e-12
 -0.000000	 -0.000000	diff=3.70078e-12
  0.000000	  0.000000	diff=3.76232e-12
 -0.000000	 -0.000000	diff=3.83989e-12
 -0.000000	 -0.000000	diff=1.00957e-11
  0.000001	  0.000001	diff=2.32819e-11
  0.000013	  0.000013	diff=9.69473e-11
  0.000000	  0.000000	diff=1.9034e-12
  0.000000	  0.000000	diff=2.21235e-12
  0.000000	  0.000000	diff=2.52327e-12
 -0.000000	 -0.000000	diff=1.40833e-11
  0.000000	  0.000000	diff=1.6276e-12
  0.000000	  0.000000	diff=4.02187e-12
 -0.000004	 -0.000004	diff=5.17548e-11
 -0.000023	 -0.000023	diff=1.91501e-10
  0.000000	  0.000000	diff=1.1998e-13
  0.000000	  0.000000	diff=7.05896e-15
  0.000000	 -0.000000	diff=1.0995e-13
  0.000000	 -0.000000	diff=2.27845e-13
  0.000000	 -0.000000	diff=2.42436e-14
  0.000000	 -0.000000	diff=1.79596e-13
  0.000000	  0.000000	diff=3.7093e-14
  0.000000	  0.000000	diff=1.99316e-12
  0.000000	  0.000000	diff=1.57025e-13
  0.000000	  0.000000	diff=2.95532e-13
  0.000000	 -0.000000	diff=1.52903e-13
  0.000000	 -0.000000	diff=3.92815e-13
  0.000000	 -0.000000	diff=3.60076e-14
  0.000000	 -0.000000	diff=4.90345e-14
  0.000000	  0.000000	diff=1.84508e-12
  0.000000	  0.000000	diff=3.39665e-12
  0.000000	  0.000000	diff=4.95763e-12
  0.000000	  0.000000	diff=5.41791e-12
  0.000000	  0.000000	diff=2.03859e-12
 -0.000000	 -0.000000	diff=3.3217e-12
  0.000000	  0.000000	diff=1.08876e-12
  0.000000	  0.000000	diff=2.07684e-14
 -0.000000	 -0.000000	diff=1.45011e-10
 -0.000000	 -0.000000	diff=5.69938e-12
 -0.000000	 -0.000000	diff=3.23858e-12
 -0.000000	 -0.000000	diff=6.20354e-13
 -0.000000	 -0.000000	diff=5.0961e-12
  0.000000	  0.000000	diff=5.3723e-12
 -0.000000	 -0.000000	diff=3.44885e-12
 -0.000000	 -0.000000	diff=2.62678e-12
  0.000000	  0.000000	diff=2.10862e-12
 -0.000000	 -0.000000	diff=1.68437e-10
  local_diff=7.85323e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.24281e-12
  0.000000	  0.000000	diff=5.02904e-13
 -0.000000	 -0.000000	diff=1.30934e-12
  0.000000	  0.000000	diff=3.46062e-12
 -0.000000	 -0.000000	diff=1.54696e-12
  0.000000	  0.000000	diff=1.88536e-12
  0.000002	  0.000002	diff=1.53455e-11
  0.000006	  0.000006	diff=1.09483e-12
  0.000000	  0.000000	diff=2.09741e-12
  0.000000	  0.000000	diff=1.96993e-12
 -0.000000	 -0.000000	diff=5.34739e-12
  0.000000	  0.000000	diff=2.43403e-12
  0.000000	  0.000000	diff=3.65188e-13
  0.000000	  0.000000	diff=3.52736e-12
  0.000001	  0.000001	diff=1.3871e-11
  0.000010	  0.000010	diff=6.98565e-11
  0.000000	  0.000000	diff=3.48489e-12
  0.000000	  0.000000	diff=6.11776e-12
 -0.000000	 -0.000000	diff=2.44408e-12
  0.000000	  0.000000	diff=1.22567e-13
  0.000000	 -0.000000	diff=3.80027e-12
  0.000000	  0.000000	diff=4.55086e-12
  0.000000	  0.000000	diff=2.71857e-10
  0.000000	  0.000000	diff=2.15899e-12
  0.000000	 -0.000000	diff=4.20526e-12
  0.000000	 -0.000000	diff=5.08186e-12
  0.000000	  0.000000	diff=7.94267e-13
 -0.000000	 -0.000000	diff=5.37728e-12
  0.000000	  0.000000	diff=4.29251e-12
 -0.000000	 -0.000000	diff=5.34797e-14
 -0.000000	 -0.000000	diff=9.75793e-12
 -0.000000	 -0.000000	diff=3.11547e-11
  local_diff=4.84111e-10
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=8.79896e-10
  0.000002	  0.000002	diff=1.86754e-09
 -0.000001	 -0.000001	diff=4.32076e-10
  0.000002	  0.000002	diff=8.83395e-10
  local_diff=4.06291e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=4.1051e-09
 -0.000003	 -0.000003	diff=2.11471e-09
 -0.000025	 -0.000025	diff=4.36766e-10
 -0.000001	 -0.000001	diff=9.3722e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.4179e-10
 -0.000001	 -0.000001	diff=3.62327e-10
 -0.000004	 -0.000004	diff=1.13892e-10
 -0.000000	 -0.000000	diff=2.95181e-10
  local_diff=9.20698e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=9.67698e-13
  0.000000	  0.000000	diff=1.12535e-14
  0.000000	  0.000000	diff=1.21029e-13
  0.000000	  0.000000	diff=1.41743e-15
  0.000000	 -0.000000	diff=4.87315e-13
  0.000000	  0.000000	diff=8.7314e-15
 -0.000000	 -0.000000	diff=2.6599e-12
 -0.000000	 -0.000000	diff=1.94413e-12
  0.000000	  0.000000	diff=2.29079e-13
  0.000000	 -0.000000	diff=1.31743e-14
  0.000000	 -0.000000	diff=1.17125e-13
  0.000000	  0.000000	diff=2.83956e-15
  0.000000	  0.000000	diff=1.59323e-13
  0.000000	 -0.000000	diff=8.0366e-15
 -0.000000	 -0.000000	diff=4.08068e-12
  0.000000	  0.000000	diff=2.95062e-12
  0.000000	  0.000000	diff=7.32341e-15
  0.000000	 -0.000000	diff=3.00814e-16
  0.000000	 -0.000000	diff=4.42322e-15
  0.000000	  0.000000	diff=8.65586e-17
  0.000000	  0.000000	diff=1.89337e-15
  0.000000	 -0.000000	diff=1.97091e-16
  0.000000	 -0.000000	diff=1.35795e-12
  0.000000	 -0.000000	diff=1.54089e-13
  0.000000	 -0.000000	diff=2.19236e-16
  0.000000	 -0.000000	diff=5.36827e-17
  0.000000	 -0.000000	diff=2.78851e-16
  0.000000	  0.000000	diff=3.167e-17
  0.000000	 -0.000000	diff=1.90892e-16
  0.000000	 -0.000000	diff=2.67177e-17
  0.000000	  0.000000	diff=1.44487e-12
  0.000000	 -0.000000	diff=5.98661e-14
  local_diff=1.67941e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=3.59885e-15
  0.000000	 -0.000000	diff=5.33727e-15
  0.000000	  0.000000	diff=2.86793e-16
  0.000000	  0.000000	diff=2.17678e-16
  0.000000	 -0.000000	diff=1.91508e-15
  0.000000	 -0.000000	diff=3.43252e-15
  0.000000	  0.000000	diff=2.89891e-12
  0.000000	  0.000000	diff=1.33393e-12
  0.000000	 -0.000000	diff=2.68135e-16
  0.000000	 -0.000000	diff=2.11658e-15
  0.000000	  0.000000	diff=2.34126e-16
  0.000000	  0.000000	diff=3.12315e-16
  0.000000	 -0.000000	diff=3.14469e-16
  0.000000	 -0.000000	diff=1.41189e-15
 -0.000000	 -0.000000	diff=8.70094e-13
 -0.000000	 -0.000000	diff=5.23919e-12
  0.000000	  0.000000	diff=1.41761e-20
  0.000000	 -0.000000	diff=8.3102e-18
  0.000000	  0.000000	diff=2.67894e-17
  0.000000	  0.000000	diff=1.16278e-17
  0.000000	  0.000000	diff=2.07657e-17
  0.000000	  0.000000	diff=1.47624e-17
  0.000000	 -0.000000	diff=1.55439e-12
  0.000000	 -0.000000	diff=1.05065e-12
  0.000000	  0.000000	diff=6.9625e-18
  0.000000	 -0.000000	diff=2.11445e-17
  0.000000	  0.000000	diff=2.21613e-17
  0.000000	  0.000000	diff=3.75462e-17
  0.000000	  0.000000	diff=2.52632e-17
  0.000000	  0.000000	diff=2.39054e-17
  0.000000	  0.000000	diff=4.10738e-13
  0.000000	  0.000000	diff=7.44977e-14
  local_diff=1.34521e-11
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.873e-17
  0.000000	  0.000000	diff=8.39451e-17
  0.000000	 -0.000000	diff=3.13049e-18
  0.000000	  0.000000	diff=2.27333e-17
  0.000000	 -0.000000	diff=1.98364e-17
  0.000000	  0.000000	diff=7.6031e-17
  0.000000	  0.000000	diff=5.22405e-12
 -0.000000	 -0.000000	diff=4.93914e-12
  0.000000	 -0.000000	diff=8.14713e-17
  0.000000	  0.000000	diff=2.48422e-16
  0.000000	 -0.000000	diff=7.34996e-18
  0.000000	  0.000000	diff=4.06326e-17
  0.000000	 -0.000000	diff=5.26584e-17
  0.000000	  0.000000	diff=2.16397e-16
  0.000000	  0.000000	diff=2.82912e-13
 -0.000000	 -0.000000	diff=4.27818e-12
  0.000000	 -0.000000	diff=8.82541e-20
  0.000000	  0.000000	diff=2.98701e-19
  0.000000	 -0.000000	diff=3.87576e-19
  0.000000	  0.000000	diff=5.36755e-19
  0.000000	 -0.000000	diff=4.56209e-19
  0.000000	  0.000000	diff=8.2586e-19
  0.000000	 -0.000000	diff=1.01961e-12
  0.000000	  0.000000	diff=1.02358e-12
  0.000000	 -0.000000	diff=3.74106e-19
  0.000000	  0.000000	diff=2.00506e-18
  0.000000	 -0.000000	diff=5.75788e-19
  0.000000	  0.000000	diff=1.6484e-18
  0.000000	 -0.000000	diff=1.30383e-18
  0.000000	  0.000000	diff=3.84579e-18
  0.000000	  0.000000	diff=1.04045e-13
  0.000000	 -0.000000	diff=4.26662e-13
  local_diff=1.72991e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=6.59447e-12
  0.000000	  0.000000	diff=2.43686e-12
 -0.000000	 -0.000000	diff=1.7344e-12
  0.000000	  0.000000	diff=9.01607e-13
 -0.000000	 -0.000000	diff=4.72064e-12
  0.000000	  0.000000	diff=2.64513e-12
 -0.000000	 -0.000000	diff=2.72293e-12
  0.000000	  0.000000	diff=2.86799e-12
  local_diff=2.4624e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.60957e-12
  0.000000	  0.000000	diff=7.82517e-12
  0.000000	  0.000000	diff=4.83308e-12
  0.000000	  0.000000	diff=7.55381e-12
 -0.000000	 -0.000000	diff=1.41352e-12
  0.000000	  0.000000	diff=4.26598e-13
 -0.000005	 -0.000005	diff=5.66914e-11
  0.000007	  0.000007	diff=8.88659e-11
  0.000000	  0.000000	diff=9.93933e-13
 -0.000000	 -0.000000	diff=3.28483e-12
 -0.000000	 -0.000000	diff=9.10976e-12
  0.000000	  0.000000	diff=6.79062e-12
  0.000000	  0.000000	diff=2.4402e-12
 -0.000000	 -0.000000	diff=4.56351e-12
  0.000024	  0.000024	diff=4.60943e-10
  0.000029	  0.000029	diff=5.37603e-10
  0.000000	  0.000000	diff=9.92475e-12
 -0.000000	 -0.000000	diff=6.32834e-12
 -0.000000	 -0.000000	diff=1.31271e-12
  0.000000	  0.000000	diff=9.04832e-12
  0.000000	  0.000000	diff=8.92442e-12
 -0.000000	 -0.000000	diff=2.41141e-13
  0.000000	  0.000000	diff=4.23928e-10
  0.000000	  0.000000	diff=7.26596e-12
  0.000000	  0.000000	diff=1.80966e-11
  0.000000	 -0.000000	diff=6.66665e-12
  0.000000	  0.000000	diff=1.06879e-12
 -0.000000	 -0.000000	diff=4.16531e-12
  0.000000	  0.000000	diff=1.15676e-11
 -0.000000	 -0.000000	diff=3.90652e-12
  0.000000	  0.000000	diff=1.63048e-12
  0.000000	  0.000000	diff=3.01754e-11
  local_diff=1.7392e-09
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=3.02894e-12
  0.000000	  0.000000	diff=9.84631e-12
  0.000000	  0.000000	diff=1.54109e-11
  0.000000	  0.000000	diff=2.07369e-12
 -0.000000	 -0.000000	diff=2.3328e-12
  0.000000	  0.000000	diff=3.28563e-12
 -0.000004	 -0.000004	diff=1.46949e-11
 -0.000002	 -0.000002	diff=1.24713e-13
  0.000000	  0.000000	diff=2.17501e-11
 -0.000000	 -0.000000	diff=1.94492e-11
 -0.000000	 -0.000000	diff=4.99853e-12
 -0.000000	 -0.000000	diff=4.55827e-12
  0.000000	  0.000000	diff=9.80738e-12
 -0.000000	 -0.000000	diff=3.20265e-12
  0.000007	  0.000007	diff=1.16989e-12
  0.000016	  0.000016	diff=8.1755e-13
  0.000000	  0.000000	diff=8.14528e-13
  0.000000	 -0.000000	diff=4.81711e-12
  0.000000	  0.000000	diff=6.53366e-13
  0.000000	 -0.000000	diff=1.67405e-12
  0.000000	  0.000000	diff=1.76695e-12
  0.000000	 -0.000000	diff=5.37627e-12
 -0.000000	 -0.000000	diff=1.96486e-10
  0.000000	  0.000000	diff=6.43139e-12
  0.000000	  0.000000	diff=2.17671e-12
 -0.000000	 -0.000000	diff=6.36166e-12
  0.000000	  0.000000	diff=2.0542e-13
  0.000000	 -0.000000	diff=1.93917e-12
  0.000000	  0.000000	diff=2.50713e-12
 -0.000000	 -0.000000	diff=5.19417e-12
  0.000000	  0.000000	diff=1.38436e-11
  0.000000	  0.000000	diff=1.92259e-10
  local_diff=5.59058e-10
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=2.58887e-12
  0.000000	  0.000000	diff=2.24703e-12
  0.000000	  0.000000	diff=2.9277e-12
 -0.000000	 -0.000000	diff=1.11713e-11
  0.000000	  0.000000	diff=2.32281e-12
  0.000000	  0.000000	diff=5.65917e-12
  0.000008	  0.000008	diff=6.26844e-12
  0.000002	  0.000002	diff=7.66325e-12
  0.000000	  0.000000	diff=1.48594e-12
 -0.000000	 -0.000000	diff=6.84506e-12
  0.000000	  0.000000	diff=1.14856e-12
  0.000000	 -0.000000	diff=5.33947e-12
  0.000000	  0.000000	diff=1.6384e-12
 -0.000000	 -0.000000	diff=6.96727e-12
  0.000003	  0.000003	diff=4.3922e-12
 -0.000036	 -0.000036	diff=7.07125e-12
  0.000000	 -0.000000	diff=1.19266e-13
  0.000000	  0.000000	diff=2.35618e-13
  0.000000	 -0.000000	diff=4.62855e-14
  0.000000	  0.000000	diff=1.02264e-13
  0.000000	 -0.000000	diff=1.9626e-13
  0.000000	  0.000000	diff=3.16893e-13
 -0.000000	 -0.000000	diff=2.4499e-10
  0.000001	  0.000001	diff=7.6968e-12
  0.000000	 -0.000000	diff=5.09017e-14
  0.000000	  0.000000	diff=1.08407e-13
  0.000000	 -0.000000	diff=1.57336e-14
  0.000000	  0.000000	diff=4.75861e-14
  0.000000	 -0.000000	diff=8.04192e-14
  0.000000	  0.000000	diff=1.46401e-13
 -0.000000	 -0.000000	diff=1.53804e-12
  0.000000	  0.000000	diff=1.32534e-10
  local_diff=4.63962e-10
# W_emb_tgt_char, [2 5]
  0.000014	  0.000014	diff=3.80914e-09
 -0.000018	 -0.000018	diff=4.9486e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000016	  0.000016	diff=1.4226e-09
 -0.000020	 -0.000020	diff=8.61651e-10
 -0.000002	 -0.000002	diff=4.21747e-10
 -0.000005	 -0.000005	diff=1.36064e-09
 -0.000001	 -0.000001	diff=2.32432e-10
 -0.000005	 -0.000005	diff=1.35549e-09
  local_diff=9.95856e-09
# W_h, [2 4]
 -0.000002	 -0.000002	diff=1.21912e-11
  0.000006	  0.000006	diff=4.49094e-12
  0.000003	  0.000003	diff=2.6515e-12
 -0.000008	 -0.000008	diff=7.93922e-12
 -0.000003	 -0.000003	diff=1.24697e-11
  0.000002	  0.000002	diff=2.12788e-12
 -0.000011	 -0.000011	diff=4.79155e-11
 -0.000009	 -0.000009	diff=5.36875e-11
  local_diff=1.43473e-10
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=2.95413e-12
  0.000011	  0.000011	diff=2.73981e-12
 -0.000003	 -0.000003	diff=7.03001e-12
  0.000008	  0.000008	diff=2.85658e-12
 -0.000002	 -0.000002	diff=4.21184e-12
 -0.000018	 -0.000018	diff=7.383e-12
  0.000011	  0.000011	diff=3.90691e-12
  0.000005	  0.000005	diff=7.38339e-13
  0.000008	  0.000008	diff=1.48779e-12
 -0.000006	 -0.000006	diff=4.22554e-12
  local_diff=3.75339e-11
# W_soft_char, [5 2]
  0.000029	  0.000029	diff=3.02216e-12
 -0.000022	 -0.000022	diff=2.39294e-12
 -0.000003	 -0.000003	diff=3.57656e-12
 -0.000002	 -0.000002	diff=7.91298e-12
 -0.000002	 -0.000002	diff=1.61717e-12
  0.000021	  0.000021	diff=2.16457e-12
 -0.000035	 -0.000035	diff=7.28908e-12
  0.000007	  0.000007	diff=3.87518e-12
  0.000004	  0.000004	diff=1.52096e-11
  0.000004	  0.000004	diff=6.27843e-12
  local_diff=5.33387e-11
# Num params=404, abs_diff=2.85321e-08
Elapsed time is 9.322116 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.3784e-12
  0.000000	  0.000000	diff=2.21452e-13
 -0.000000	 -0.000000	diff=1.12586e-12
  0.000000	  0.000000	diff=8.34709e-13
 -0.000000	 -0.000000	diff=1.50728e-12
 -0.000000	 -0.000000	diff=8.00372e-14
  0.000010	  0.000010	diff=5.66474e-11
  0.000002	  0.000002	diff=3.72137e-11
  0.000000	  0.000000	diff=3.87319e-13
 -0.000000	 -0.000000	diff=2.08343e-12
  0.000000	  0.000000	diff=1.33272e-12
 -0.000000	 -0.000000	diff=4.17537e-13
  0.000000	  0.000000	diff=2.89521e-13
  0.000000	  0.000000	diff=1.00892e-13
 -0.000014	 -0.000014	diff=9.8738e-11
 -0.000002	 -0.000002	diff=6.16544e-11
  0.000000	  0.000000	diff=5.27494e-13
 -0.000000	 -0.000000	diff=2.50159e-13
  0.000000	  0.000000	diff=7.00981e-13
 -0.000000	 -0.000000	diff=9.70779e-13
  0.000000	  0.000000	diff=6.1049e-13
  0.000000	  0.000000	diff=1.06844e-12
 -0.000000	 -0.000000	diff=6.40517e-10
 -0.000000	 -0.000000	diff=3.29423e-13
 -0.000000	 -0.000000	diff=1.14923e-12
  0.000000	  0.000000	diff=1.6948e-12
 -0.000000	 -0.000000	diff=9.28046e-13
  0.000000	  0.000000	diff=1.62702e-12
 -0.000000	 -0.000000	diff=1.59484e-12
 -0.000000	 -0.000000	diff=1.84956e-12
  0.000000	  0.000000	diff=4.55213e-12
  0.000000	  0.000000	diff=1.72599e-10
  local_diff=1.09498e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=7.95462e-13
  0.000000	  0.000000	diff=5.45477e-14
 -0.000000	 -0.000000	diff=1.87853e-14
  0.000000	  0.000000	diff=8.61997e-13
 -0.000000	 -0.000000	diff=4.63003e-13
  0.000000	  0.000000	diff=2.97824e-13
  0.000017	  0.000017	diff=2.09459e-12
  0.000032	  0.000032	diff=1.8273e-12
  0.000000	  0.000000	diff=2.23345e-13
 -0.000000	 -0.000000	diff=7.58281e-13
  0.000000	  0.000000	diff=7.02514e-14
 -0.000000	 -0.000000	diff=2.65854e-13
  0.000000	  0.000000	diff=2.9376e-13
 -0.000000	 -0.000000	diff=1.31764e-12
 -0.000014	 -0.000014	diff=1.61808e-12
 -0.000026	 -0.000026	diff=2.43118e-12
 -0.000000	 -0.000000	diff=1.52872e-13
  0.000000	  0.000000	diff=1.26147e-12
 -0.000000	 -0.000000	diff=2.84932e-12
  0.000000	  0.000000	diff=5.47096e-13
 -0.000000	 -0.000000	diff=1.3675e-12
  0.000000	  0.000000	diff=1.42219e-12
  0.000000	  0.000000	diff=3.31726e-10
  0.000001	  0.000001	diff=1.87175e-12
  0.000000	  0.000000	diff=1.21518e-12
 -0.000000	 -0.000000	diff=3.88786e-14
  0.000000	  0.000000	diff=9.16183e-14
 -0.000000	 -0.000000	diff=9.75017e-13
  0.000000	  0.000000	diff=2.29464e-12
 -0.000000	 -0.000000	diff=4.70577e-13
 -0.000000	 -0.000000	diff=1.39022e-12
 -0.000001	 -0.000001	diff=1.37834e-09
  local_diff=1.7394e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.35966e-14
 -0.000000	 -0.000000	diff=2.28086e-12
  0.000000	  0.000000	diff=1.28451e-13
  0.000000	  0.000000	diff=2.70606e-12
  0.000000	  0.000000	diff=2.59083e-12
 -0.000000	 -0.000000	diff=1.00832e-13
 -0.000004	 -0.000004	diff=2.42262e-11
  0.000011	  0.000011	diff=1.59856e-10
 -0.000000	 -0.000000	diff=7.68119e-14
  0.000000	  0.000000	diff=5.61193e-13
 -0.000000	 -0.000000	diff=3.31836e-14
 -0.000000	 -0.000000	diff=1.1141e-12
 -0.000000	 -0.000000	diff=5.49007e-13
  0.000000	  0.000000	diff=1.48633e-12
  0.000010	  0.000010	diff=6.80903e-11
 -0.000030	 -0.000030	diff=2.91438e-10
  0.000000	  0.000000	diff=1.07214e-13
  0.000000	 -0.000000	diff=4.94439e-13
  0.000000	 -0.000000	diff=9.48977e-14
  0.000000	  0.000000	diff=5.73468e-13
  0.000000	  0.000000	diff=1.29965e-15
  0.000000	  0.000000	diff=9.74792e-14
  0.000000	  0.000000	diff=3.1906e-13
 -0.000000	 -0.000000	diff=1.33768e-12
  0.000000	 -0.000000	diff=1.46365e-13
  0.000000	  0.000000	diff=7.21499e-13
  0.000000	  0.000000	diff=2.34066e-13
  0.000000	 -0.000000	diff=2.20749e-13
  0.000000	  0.000000	diff=9.51813e-14
  0.000000	  0.000000	diff=4.52453e-13
 -0.000000	 -0.000000	diff=3.62458e-13
  0.000000	  0.000000	diff=5.09212e-14
 -0.000000	 -0.000000	diff=6.70879e-13
  0.000000	  0.000000	diff=7.82905e-13
 -0.000000	 -0.000000	diff=6.83061e-13
 -0.000000	 -0.000000	diff=9.98431e-14
 -0.000000	 -0.000000	diff=2.71428e-14
  0.000000	  0.000000	diff=2.64355e-13
  0.000000	  0.000000	diff=2.97229e-10
 -0.000001	 -0.000001	diff=1.02171e-11
  0.000000	  0.000000	diff=1.21268e-14
 -0.000000	 -0.000000	diff=3.39614e-14
  0.000000	  0.000000	diff=1.08764e-12
  0.000000	  0.000000	diff=6.15173e-13
  0.000000	  0.000000	diff=2.65612e-13
 -0.000000	 -0.000000	diff=8.69768e-13
 -0.000000	 -0.000000	diff=1.44678e-12
  0.000000	  0.000000	diff=8.57465e-11
  local_diff=9.60634e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.25604e-12
  0.000000	  0.000000	diff=2.24687e-14
  0.000000	  0.000000	diff=1.35735e-12
  0.000000	  0.000000	diff=1.91528e-13
  0.000000	  0.000000	diff=1.75172e-12
  0.000000	  0.000000	diff=8.69148e-14
 -0.000006	 -0.000006	diff=5.30134e-12
  0.000011	  0.000011	diff=5.35444e-12
 -0.000000	 -0.000000	diff=1.66529e-13
  0.000000	  0.000000	diff=7.19723e-13
  0.000000	  0.000000	diff=6.32967e-13
  0.000000	  0.000000	diff=3.10579e-13
 -0.000000	 -0.000000	diff=2.52471e-13
  0.000000	  0.000000	diff=3.05181e-13
 -0.000002	 -0.000002	diff=1.47212e-11
  0.000002	  0.000002	diff=7.04307e-11
 -0.000000	 -0.000000	diff=1.34624e-12
  0.000000	  0.000000	diff=1.48017e-12
  0.000000	  0.000000	diff=1.77965e-13
  0.000000	  0.000000	diff=4.21567e-14
  0.000000	  0.000000	diff=9.55582e-13
  0.000000	  0.000000	diff=4.09066e-13
 -0.000000	 -0.000000	diff=5.63281e-10
  0.000001	  0.000001	diff=6.37934e-12
  0.000000	  0.000000	diff=4.02311e-13
  0.000000	 -0.000000	diff=1.12057e-12
 -0.000000	 -0.000000	diff=1.1865e-12
 -0.000000	 -0.000000	diff=5.8991e-14
 -0.000000	 -0.000000	diff=4.05096e-13
 -0.000000	 -0.000000	diff=3.34687e-13
  0.000001	  0.000001	diff=3.22242e-14
 -0.000001	 -0.000001	diff=2.60837e-09
  local_diff=3.28884e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000006	 -0.000006	diff=1.98258e-09
  0.000005	  0.000005	diff=5.55303e-09
 -0.000004	 -0.000004	diff=1.04047e-09
  0.000006	  0.000006	diff=3.52292e-09
  local_diff=1.2099e-08
# W_emb_tgt, [2 5]
 -0.000033	 -0.000033	diff=1.49621e-08
  0.000007	  0.000007	diff=4.08773e-09
 -0.000026	 -0.000025	diff=1.02144e-08
  0.000006	  0.000006	diff=2.94399e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=9.37708e-10
  0.000001	  0.000001	diff=3.48284e-10
 -0.000004	 -0.000004	diff=2.01108e-09
  0.000001	  0.000001	diff=4.0939e-10
  local_diff=3.59146e-08
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=9.68298e-13
  0.000000	  0.000000	diff=1.717e-14
  0.000000	  0.000000	diff=7.32759e-14
  0.000000	  0.000000	diff=5.41371e-15
  0.000000	 -0.000000	diff=5.08122e-13
  0.000000	  0.000000	diff=1.36415e-14
 -0.000000	 -0.000000	diff=9.38891e-14
 -0.000000	 -0.000000	diff=1.37558e-13
  0.000000	  0.000000	diff=2.53019e-13
  0.000000	  0.000000	diff=1.62504e-14
  0.000000	 -0.000000	diff=7.49926e-14
  0.000000	 -0.000000	diff=6.1319e-16
  0.000000	  0.000000	diff=2.33194e-13
  0.000000	  0.000000	diff=1.57005e-14
 -0.000000	 -0.000000	diff=1.34579e-12
  0.000000	  0.000000	diff=1.3022e-12
  0.000000	  0.000000	diff=4.61819e-15
  0.000000	 -0.000000	diff=4.89247e-16
  0.000000	 -0.000000	diff=5.16236e-15
  0.000000	  0.000000	diff=1.11281e-16
  0.000000	 -0.000000	diff=6.79426e-16
  0.000000	 -0.000000	diff=3.17092e-16
  0.000000	 -0.000000	diff=1.98764e-12
  0.000000	 -0.000000	diff=3.61976e-13
  0.000000	  0.000000	diff=4.20315e-16
  0.000000	  0.000000	diff=2.81044e-17
  0.000000	 -0.000000	diff=1.06659e-16
  0.000000	  0.000000	diff=2.52901e-17
  0.000000	  0.000000	diff=3.33913e-16
  0.000000	  0.000000	diff=3.38657e-17
  0.000000	  0.000000	diff=1.36117e-12
  0.000000	  0.000000	diff=1.46582e-14
  local_diff=8.7969e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.28026e-15
  0.000000	 -0.000000	diff=7.71632e-15
  0.000000	 -0.000000	diff=3.86519e-16
  0.000000	 -0.000000	diff=4.38898e-16
  0.000000	 -0.000000	diff=2.84705e-15
  0.000000	 -0.000000	diff=5.93628e-15
  0.000000	  0.000000	diff=1.2307e-12
  0.000000	  0.000000	diff=4.67672e-13
  0.000000	 -0.000000	diff=3.2914e-16
  0.000000	 -0.000000	diff=2.76764e-15
  0.000000	  0.000000	diff=4.24811e-17
  0.000000	  0.000000	diff=1.59311e-16
  0.000000	 -0.000000	diff=5.45181e-16
  0.000000	 -0.000000	diff=2.29942e-15
 -0.000000	 -0.000000	diff=8.24088e-13
  0.000000	  0.000000	diff=2.69014e-13
  0.000000	  0.000000	diff=1.32263e-17
  0.000000	  0.000000	diff=3.31117e-17
  0.000000	  0.000000	diff=3.50518e-17
  0.000000	  0.000000	diff=2.634e-17
  0.000000	  0.000000	diff=3.7017e-17
  0.000000	  0.000000	diff=5.92309e-17
  0.000000	 -0.000000	diff=1.78964e-12
  0.000000	 -0.000000	diff=1.37781e-12
  0.000000	  0.000000	diff=1.76846e-17
  0.000000	  0.000000	diff=1.18302e-17
  0.000000	  0.000000	diff=3.25001e-17
  0.000000	  0.000000	diff=4.94845e-17
  0.000000	  0.000000	diff=4.3038e-17
  0.000000	  0.000000	diff=6.17566e-17
  0.000000	  0.000000	diff=4.73289e-14
  0.000000	 -0.000000	diff=2.57226e-13
  local_diff=6.29165e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.45176e-17
  0.000000	  0.000000	diff=1.50719e-16
  0.000000	 -0.000000	diff=3.69193e-18
  0.000000	  0.000000	diff=4.67047e-17
  0.000000	 -0.000000	diff=2.51653e-17
  0.000000	  0.000000	diff=1.4129e-16
  0.000000	  0.000000	diff=1.11642e-12
 -0.000000	 -0.000000	diff=3.25671e-13
  0.000000	 -0.000000	diff=9.07241e-17
  0.000000	  0.000000	diff=3.77317e-16
  0.000000	 -0.000000	diff=6.57931e-18
  0.000000	  0.000000	diff=8.47465e-17
  0.000000	 -0.000000	diff=6.51265e-17
  0.000000	  0.000000	diff=3.65644e-16
  0.000000	  0.000000	diff=1.58104e-12
 -0.000000	 -0.000000	diff=6.00804e-13
  0.000000	 -0.000000	diff=6.39682e-20
  0.000000	  0.000000	diff=3.37376e-19
  0.000000	 -0.000000	diff=3.3309e-19
  0.000000	  0.000000	diff=5.60986e-19
  0.000000	 -0.000000	diff=3.82401e-19
  0.000000	  0.000000	diff=9.18325e-19
  0.000000	 -0.000000	diff=9.00009e-13
  0.000000	  0.000000	diff=9.20689e-13
  0.000000	 -0.000000	diff=5.75368e-19
  0.000000	  0.000000	diff=4.19305e-18
  0.000000	 -0.000000	diff=5.27536e-19
  0.000000	  0.000000	diff=2.56191e-18
  0.000000	 -0.000000	diff=1.40955e-18
  0.000000	  0.000000	diff=6.52677e-18
  0.000000	  0.000000	diff=4.94218e-13
  0.000000	 -0.000000	diff=1.10309e-12
  local_diff=7.04334e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.62246e-12
  0.000000	  0.000000	diff=1.7904e-12
 -0.000000	 -0.000000	diff=7.2786e-13
  0.000000	  0.000000	diff=9.48147e-13
 -0.000000	 -0.000000	diff=1.38019e-12
  0.000000	  0.000000	diff=1.98961e-13
 -0.000000	 -0.000000	diff=1.33717e-12
  0.000000	  0.000000	diff=8.30041e-13
  local_diff=8.83523e-12
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=8.54576e-13
  0.000000	  0.000000	diff=2.72884e-12
  0.000000	  0.000000	diff=2.67557e-12
  0.000000	  0.000000	diff=1.73514e-12
 -0.000000	 -0.000000	diff=1.50417e-12
  0.000000	  0.000000	diff=1.73648e-12
  0.000007	  0.000007	diff=6.4635e-11
  0.000004	  0.000004	diff=9.50709e-11
 -0.000000	 -0.000000	diff=3.35152e-13
 -0.000000	 -0.000000	diff=1.90291e-12
 -0.000000	 -0.000000	diff=2.49267e-12
  0.000000	  0.000000	diff=1.18145e-12
  0.000000	  0.000000	diff=1.1694e-14
 -0.000000	 -0.000000	diff=4.16874e-12
  0.000031	  0.000031	diff=3.57303e-10
  0.000016	  0.000016	diff=3.73845e-10
  0.000000	  0.000000	diff=1.86746e-13
 -0.000000	 -0.000000	diff=4.96651e-13
 -0.000000	 -0.000000	diff=1.70959e-12
  0.000000	  0.000000	diff=9.38791e-13
  0.000000	  0.000000	diff=2.06315e-12
 -0.000000	 -0.000000	diff=1.88525e-12
  0.000000	  0.000000	diff=2.76452e-10
  0.000000	  0.000000	diff=5.67538e-14
  0.000000	  0.000000	diff=2.6946e-12
 -0.000000	 -0.000000	diff=2.04643e-12
  0.000000	  0.000000	diff=3.94283e-12
 -0.000000	 -0.000000	diff=3.29599e-13
  0.000000	  0.000000	diff=2.73533e-12
 -0.000000	 -0.000000	diff=1.56999e-13
  0.000000	  0.000000	diff=1.04421e-12
  0.000000	  0.000000	diff=2.10272e-11
  local_diff=1.22995e-09
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=2.29491e-12
  0.000000	  0.000000	diff=1.27903e-12
  0.000000	  0.000000	diff=3.33323e-12
  0.000000	  0.000000	diff=2.31955e-12
 -0.000000	 -0.000000	diff=2.62058e-12
  0.000000	  0.000000	diff=2.01355e-12
 -0.000001	 -0.000001	diff=2.71104e-12
 -0.000000	 -0.000000	diff=1.1051e-12
  0.000000	  0.000000	diff=1.28656e-12
 -0.000000	 -0.000000	diff=1.81844e-12
 -0.000000	 -0.000000	diff=1.48443e-12
 -0.000000	 -0.000000	diff=3.28234e-13
  0.000000	  0.000000	diff=2.48493e-12
 -0.000000	 -0.000000	diff=7.74547e-13
  0.000008	  0.000008	diff=2.14829e-12
  0.000009	  0.000009	diff=1.00479e-12
  0.000000	  0.000000	diff=2.02385e-12
  0.000000	 -0.000000	diff=2.41226e-12
  0.000000	 -0.000000	diff=8.13645e-13
  0.000000	 -0.000000	diff=8.33983e-13
  0.000000	  0.000000	diff=1.99654e-13
  0.000000	 -0.000000	diff=2.51457e-12
  0.000000	  0.000000	diff=1.33221e-10
  0.000000	  0.000000	diff=3.07715e-12
  0.000000	  0.000000	diff=1.00608e-12
  0.000000	 -0.000000	diff=3.11534e-12
  0.000000	 -0.000000	diff=6.32575e-13
  0.000000	 -0.000000	diff=1.10533e-12
  0.000000	  0.000000	diff=1.5619e-12
 -0.000000	 -0.000000	diff=8.78466e-13
  0.000000	  0.000000	diff=8.71611e-13
  0.000000	  0.000000	diff=1.24329e-10
  local_diff=3.07603e-10
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=4.64125e-13
  0.000000	  0.000000	diff=1.5769e-12
  0.000000	  0.000000	diff=1.74236e-12
  0.000000	  0.000000	diff=4.23786e-13
  0.000000	  0.000000	diff=3.36965e-12
  0.000000	  0.000000	diff=6.51298e-13
  0.000002	  0.000002	diff=1.64134e-12
  0.000002	  0.000002	diff=6.12402e-13
 -0.000000	 -0.000000	diff=1.94376e-12
 -0.000000	 -0.000000	diff=1.45199e-12
  0.000000	 -0.000000	diff=2.91554e-12
  0.000000	 -0.000000	diff=1.22133e-12
 -0.000000	 -0.000000	diff=9.05531e-13
 -0.000000	 -0.000000	diff=1.93245e-12
 -0.000010	 -0.000010	diff=2.95145e-12
 -0.000008	 -0.000008	diff=2.94546e-12
  0.000000	  0.000000	diff=3.85309e-14
  0.000000	  0.000000	diff=4.26551e-14
  0.000000	  0.000000	diff=3.56327e-14
  0.000000	  0.000000	diff=2.36494e-14
  0.000000	  0.000000	diff=5.37937e-14
  0.000000	  0.000000	diff=5.29712e-14
  0.000000	  0.000000	diff=1.76681e-10
  0.000000	  0.000000	diff=1.24682e-12
  0.000000	  0.000000	diff=1.84893e-14
  0.000000	  0.000000	diff=2.13969e-14
  0.000000	  0.000000	diff=1.84662e-14
  0.000000	  0.000000	diff=1.22281e-14
  0.000000	  0.000000	diff=2.77322e-14
  0.000000	  0.000000	diff=2.76604e-14
  0.000000	  0.000000	diff=1.74254e-12
  0.000000	  0.000000	diff=8.22734e-11
  local_diff=2.89066e-10
# W_emb_tgt_char, [2 5]
 -0.000002	 -0.000002	diff=8.34519e-10
 -0.000007	 -0.000007	diff=1.30308e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.92591e-10
 -0.000006	 -0.000006	diff=1.24985e-09
 -0.000001	 -0.000001	diff=2.5079e-10
 -0.000003	 -0.000003	diff=7.44044e-10
 -0.000002	 -0.000002	diff=2.74153e-10
 -0.000003	 -0.000003	diff=9.52425e-10
  local_diff=6.20145e-09
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.58942e-17
  0.000000	  0.000000	diff=3.19848e-17
  0.000000	  0.000000	diff=8.89731e-17
  0.000000	 -0.000000	diff=1.08721e-16
  local_diff=2.55573e-16
# W_h, [2 4]
 -0.000021	 -0.000021	diff=4.88245e-13
  0.000029	  0.000029	diff=1.28757e-12
  0.000026	  0.000026	diff=8.70976e-13
 -0.000036	 -0.000036	diff=7.06723e-13
 -0.000008	 -0.000008	diff=5.83542e-12
  0.000011	  0.000011	diff=5.3429e-12
  0.000013	  0.000013	diff=1.33669e-10
 -0.000025	 -0.000025	diff=1.4638e-10
  local_diff=2.94581e-10
# W_h_char, [2 4]
 -0.000000	 -0.000000	diff=9.62998e-13
 -0.000000	 -0.000000	diff=1.94287e-13
  0.000000	  0.000000	diff=4.85267e-13
  0.000000	  0.000000	diff=3.09356e-13
 -0.000000	 -0.000000	diff=1.03346e-12
 -0.000000	 -0.000000	diff=2.47827e-12
  0.000000	  0.000000	diff=1.91783e-13
  0.000000	  0.000000	diff=2.01149e-12
  local_diff=7.66691e-12
# W_soft, [5 2]
  0.000007	  0.000007	diff=2.23331e-12
  0.000002	  0.000002	diff=1.77331e-12
 -0.000015	 -0.000015	diff=1.05965e-12
  0.000003	  0.000003	diff=9.44122e-13
  0.000003	  0.000003	diff=3.26047e-13
 -0.000017	 -0.000017	diff=2.20474e-12
  0.000010	  0.000010	diff=2.02905e-12
 -0.000003	 -0.000003	diff=2.11427e-12
  0.000008	  0.000008	diff=7.75914e-13
  0.000002	  0.000002	diff=1.12197e-13
  local_diff=1.35726e-11
# W_soft_char, [5 2]
  0.000003	  0.000003	diff=4.52933e-13
 -0.000002	 -0.000002	diff=6.31169e-13
 -0.000001	 -0.000001	diff=1.77284e-12
 -0.000000	 -0.000000	diff=9.60908e-13
 -0.000000	 -0.000000	diff=1.86649e-12
  0.000002	  0.000002	diff=1.69985e-12
 -0.000004	 -0.000004	diff=1.87387e-14
  0.000001	  0.000001	diff=2.37964e-12
  0.000000	  0.000000	diff=2.01645e-12
  0.000000	  0.000000	diff=2.41183e-12
  local_diff=1.42109e-11
# Num params=416, abs_diff=6.34865e-08
Elapsed time is 9.494258 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.17615e-11
  0.000000	  0.000000	diff=4.69795e-13
 -0.000000	 -0.000000	diff=8.99234e-12
  0.000000	  0.000000	diff=7.03533e-12
 -0.000000	 -0.000000	diff=3.07075e-12
 -0.000000	 -0.000000	diff=2.68437e-12
  0.000010	  0.000010	diff=6.36279e-11
  0.000002	  0.000002	diff=5.46493e-11
  0.000000	  0.000000	diff=1.40239e-11
 -0.000000	 -0.000000	diff=1.02039e-11
  0.000000	  0.000000	diff=5.32072e-12
 -0.000000	 -0.000000	diff=1.07651e-12
  0.000000	  0.000000	diff=5.57957e-12
  0.000000	  0.000000	diff=1.69768e-12
 -0.000014	 -0.000014	diff=9.90793e-11
 -0.000002	 -0.000002	diff=6.31764e-11
  0.000000	  0.000000	diff=7.44204e-13
 -0.000000	 -0.000000	diff=3.06479e-12
  0.000000	  0.000000	diff=5.10783e-13
 -0.000000	 -0.000000	diff=4.68611e-12
  0.000000	  0.000000	diff=3.70047e-12
  0.000000	  0.000000	diff=1.14061e-12
 -0.000000	 -0.000000	diff=6.55124e-10
 -0.000000	 -0.000000	diff=1.02485e-11
 -0.000000	 -0.000000	diff=4.35298e-12
  0.000000	  0.000000	diff=4.01322e-12
 -0.000000	 -0.000000	diff=3.6096e-12
  0.000000	  0.000000	diff=1.60325e-12
 -0.000000	 -0.000000	diff=1.8052e-12
 -0.000000	 -0.000000	diff=1.90989e-12
  0.000000	  0.000000	diff=1.09466e-11
  0.000000	  0.000000	diff=1.74033e-10
  local_diff=1.23394e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=8.69768e-13
  0.000000	  0.000000	diff=2.14119e-12
 -0.000000	 -0.000000	diff=2.88632e-12
  0.000000	  0.000000	diff=6.00073e-13
 -0.000000	 -0.000000	diff=2.13283e-12
  0.000000	  0.000000	diff=6.02693e-12
  0.000017	  0.000017	diff=1.07919e-12
  0.000032	  0.000032	diff=6.21894e-12
  0.000000	  0.000000	diff=5.85293e-12
 -0.000000	 -0.000000	diff=1.55552e-12
  0.000000	  0.000000	diff=2.86354e-12
 -0.000000	 -0.000000	diff=6.15716e-12
  0.000000	  0.000000	diff=2.74674e-12
 -0.000000	 -0.000000	diff=1.8327e-12
 -0.000014	 -0.000014	diff=3.20772e-12
 -0.000026	 -0.000026	diff=1.05984e-11
 -0.000000	 -0.000000	diff=1.49852e-13
  0.000000	  0.000000	diff=4.41011e-12
 -0.000000	 -0.000000	diff=2.85136e-12
  0.000000	  0.000000	diff=2.30293e-12
 -0.000000	 -0.000000	diff=4.31088e-12
  0.000000	  0.000000	diff=4.27755e-12
  0.000000	  0.000000	diff=3.22198e-10
  0.000001	  0.000001	diff=8.07637e-12
  0.000000	  0.000000	diff=4.47285e-12
 -0.000000	 -0.000000	diff=5.42913e-14
  0.000000	  0.000000	diff=5.77845e-12
 -0.000000	 -0.000000	diff=9.84505e-13
  0.000000	  0.000000	diff=3.38248e-12
 -0.000000	 -0.000000	diff=3.33136e-12
 -0.000000	 -0.000000	diff=1.21217e-11
 -0.000001	 -0.000001	diff=1.38198e-09
  local_diff=1.81745e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.52725e-12
 -0.000000	 -0.000000	diff=6.85678e-12
  0.000000	  0.000000	diff=5.22377e-12
  0.000000	  0.000000	diff=1.70564e-12
  0.000000	  0.000000	diff=9.48153e-12
 -0.000000	 -0.000000	diff=1.32206e-12
 -0.000004	 -0.000004	diff=1.34165e-11
  0.000011	  0.000011	diff=1.54214e-10
 -0.000000	 -0.000000	diff=6.89535e-12
  0.000000	  0.000000	diff=7.12984e-12
 -0.000000	 -0.000000	diff=8.54652e-13
 -0.000000	 -0.000000	diff=1.69363e-11
 -0.000000	 -0.000000	diff=6.12767e-12
  0.000000	  0.000000	diff=1.3656e-11
  0.000010	  0.000010	diff=7.69887e-11
 -0.000030	 -0.000030	diff=3.00946e-10
  0.000000	  0.000000	diff=1.07179e-13
  0.000000	 -0.000000	diff=4.94465e-13
  0.000000	 -0.000000	diff=9.48706e-14
  0.000000	  0.000000	diff=5.7349e-13
  0.000000	  0.000000	diff=1.29501e-15
  0.000000	  0.000000	diff=9.74758e-14
  0.000000	  0.000000	diff=2.57908e-12
 -0.000000	 -0.000000	diff=1.36376e-12
  0.000000	 -0.000000	diff=1.46326e-13
  0.000000	  0.000000	diff=7.2152e-13
  0.000000	  0.000000	diff=2.34003e-13
  0.000000	 -0.000000	diff=2.2076e-13
  0.000000	  0.000000	diff=9.51514e-14
  0.000000	  0.000000	diff=4.52464e-13
 -0.000000	 -0.000000	diff=5.38589e-12
  0.000000	  0.000000	diff=8.0286e-14
 -0.000000	 -0.000000	diff=7.04152e-13
  0.000000	  0.000000	diff=4.85971e-12
 -0.000000	 -0.000000	diff=8.15759e-13
 -0.000000	 -0.000000	diff=5.55449e-12
 -0.000000	 -0.000000	diff=5.79303e-12
  0.000000	  0.000000	diff=2.56965e-12
  0.000000	  0.000000	diff=3.10308e-10
 -0.000001	 -0.000001	diff=8.30941e-12
  0.000000	  0.000000	diff=2.8846e-12
 -0.000000	 -0.000000	diff=1.71835e-14
  0.000000	  0.000000	diff=1.01834e-12
  0.000000	  0.000000	diff=5.11208e-12
  0.000000	  0.000000	diff=5.32146e-12
 -0.000000	 -0.000000	diff=3.7183e-12
 -0.000000	 -0.000000	diff=3.28915e-12
  0.000000	  0.000000	diff=8.39873e-11
  local_diff=1.08119e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.1489e-12
  0.000000	  0.000000	diff=2.81453e-12
  0.000000	  0.000000	diff=4.44487e-12
  0.000000	  0.000000	diff=5.46804e-12
  0.000000	  0.000000	diff=4.03716e-12
  0.000000	  0.000000	diff=1.08852e-13
 -0.000006	 -0.000006	diff=2.39677e-11
  0.000011	  0.000011	diff=4.91653e-12
 -0.000000	 -0.000000	diff=3.0562e-12
  0.000000	  0.000000	diff=7.0891e-13
  0.000000	  0.000000	diff=6.02567e-13
  0.000000	  0.000000	diff=3.13315e-13
 -0.000000	 -0.000000	diff=3.08206e-12
  0.000000	  0.000000	diff=2.5447e-12
 -0.000002	 -0.000002	diff=1.89031e-11
  0.000002	  0.000002	diff=7.16651e-11
 -0.000000	 -0.000000	diff=1.50059e-12
  0.000000	  0.000000	diff=1.48022e-12
  0.000000	  0.000000	diff=5.51993e-12
  0.000000	  0.000000	diff=4.07649e-14
  0.000000	  0.000000	diff=1.87997e-12
  0.000000	  0.000000	diff=4.10124e-13
 -0.000000	 -0.000000	diff=5.70722e-10
  0.000001	  0.000001	diff=2.29679e-12
  0.000000	  0.000000	diff=3.96838e-13
  0.000000	 -0.000000	diff=1.1206e-12
 -0.000000	 -0.000000	diff=1.16978e-12
 -0.000000	 -0.000000	diff=5.62729e-12
 -0.000000	 -0.000000	diff=5.27079e-12
 -0.000000	 -0.000000	diff=2.50604e-12
  0.000001	  0.000001	diff=4.0252e-12
 -0.000001	 -0.000001	diff=2.61096e-09
  local_diff=3.36271e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000006	 -0.000006	diff=1.98376e-09
  0.000005	  0.000005	diff=5.54846e-09
 -0.000004	 -0.000004	diff=1.03197e-09
  0.000006	  0.000006	diff=3.52508e-09
  local_diff=1.20893e-08
# W_emb_tgt, [2 5]
 -0.000033	 -0.000033	diff=1.49504e-08
  0.000007	  0.000007	diff=4.092e-09
 -0.000026	 -0.000026	diff=1.02106e-08
  0.000006	  0.000006	diff=2.94496e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=9.28311e-10
  0.000001	  0.000001	diff=3.5706e-10
 -0.000004	 -0.000004	diff=2.00525e-09
  0.000001	  0.000001	diff=4.03972e-10
  local_diff=3.58926e-08
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=9.69228e-13
  0.000000	  0.000000	diff=1.71757e-14
  0.000000	  0.000000	diff=7.3361e-14
  0.000000	  0.000000	diff=5.40805e-15
  0.000000	 -0.000000	diff=5.08603e-13
  0.000000	  0.000000	diff=1.36364e-14
 -0.000000	 -0.000000	diff=3.0802e-12
 -0.000000	 -0.000000	diff=1.68921e-13
  0.000000	  0.000000	diff=2.53257e-13
  0.000000	  0.000000	diff=1.6317e-14
  0.000000	 -0.000000	diff=7.5078e-14
  0.000000	 -0.000000	diff=6.21219e-16
  0.000000	  0.000000	diff=2.33397e-13
  0.000000	  0.000000	diff=1.57474e-14
 -0.000000	 -0.000000	diff=4.31233e-12
  0.000000	  0.000000	diff=1.29866e-12
  0.000000	  0.000000	diff=4.62348e-15
  0.000000	 -0.000000	diff=4.88821e-16
  0.000000	 -0.000000	diff=5.16709e-15
  0.000000	  0.000000	diff=1.11246e-16
  0.000000	 -0.000000	diff=6.79291e-16
  0.000000	 -0.000000	diff=3.16811e-16
  0.000000	 -0.000000	diff=1.98931e-12
  0.000000	 -0.000000	diff=3.62363e-13
  0.000000	  0.000000	diff=4.2051e-16
  0.000000	  0.000000	diff=2.82507e-17
  0.000000	 -0.000000	diff=1.06826e-16
  0.000000	  0.000000	diff=2.51666e-17
  0.000000	  0.000000	diff=3.34062e-16
  0.000000	  0.000000	diff=3.39204e-17
  0.000000	  0.000000	diff=1.48241e-12
  0.000000	  0.000000	diff=1.49752e-14
  local_diff=1.49033e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.28356e-15
  0.000000	 -0.000000	diff=7.72419e-15
  0.000000	 -0.000000	diff=3.86837e-16
  0.000000	 -0.000000	diff=4.39027e-16
  0.000000	 -0.000000	diff=2.84928e-15
  0.000000	 -0.000000	diff=5.94185e-15
  0.000000	  0.000000	diff=1.28819e-12
  0.000000	  0.000000	diff=4.11854e-13
  0.000000	 -0.000000	diff=3.29386e-16
  0.000000	 -0.000000	diff=2.77057e-15
  0.000000	  0.000000	diff=4.25002e-17
  0.000000	  0.000000	diff=1.59621e-16
  0.000000	 -0.000000	diff=5.45624e-16
  0.000000	 -0.000000	diff=2.30158e-15
  0.000000	 -0.000000	diff=2.01962e-12
  0.000000	  0.000000	diff=5.4148e-12
  0.000000	  0.000000	diff=1.32367e-17
  0.000000	  0.000000	diff=3.31256e-17
  0.000000	  0.000000	diff=3.50789e-17
  0.000000	  0.000000	diff=2.63635e-17
  0.000000	  0.000000	diff=3.70459e-17
  0.000000	  0.000000	diff=5.92749e-17
  0.000000	 -0.000000	diff=1.79106e-12
  0.000000	 -0.000000	diff=1.37917e-12
  0.000000	  0.000000	diff=1.76981e-17
  0.000000	  0.000000	diff=1.18234e-17
  0.000000	  0.000000	diff=3.25246e-17
  0.000000	  0.000000	diff=4.95393e-17
  0.000000	  0.000000	diff=4.30706e-17
  0.000000	  0.000000	diff=6.18091e-17
  0.000000	  0.000000	diff=4.73447e-14
  0.000000	 -0.000000	diff=2.57226e-13
  local_diff=1.26375e-11
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.45357e-17
  0.000000	  0.000000	diff=1.50841e-16
  0.000000	 -0.000000	diff=3.69411e-18
  0.000000	  0.000000	diff=4.67421e-17
  0.000000	 -0.000000	diff=2.51836e-17
  0.000000	  0.000000	diff=1.41404e-16
  0.000000	  0.000000	diff=1.15232e-12
 -0.000000	 -0.000000	diff=2.67305e-13
  0.000000	 -0.000000	diff=9.07876e-17
  0.000000	  0.000000	diff=3.77633e-16
  0.000000	 -0.000000	diff=6.58319e-18
  0.000000	  0.000000	diff=8.48152e-17
  0.000000	 -0.000000	diff=6.51746e-17
  0.000000	  0.000000	diff=3.65946e-16
  0.000000	  0.000000	diff=4.46898e-12
 -0.000000	 -0.000000	diff=5.00673e-12
  0.000000	 -0.000000	diff=6.40055e-20
  0.000000	  0.000000	diff=3.37672e-19
  0.000000	 -0.000000	diff=3.33289e-19
  0.000000	  0.000000	diff=5.61495e-19
  0.000000	 -0.000000	diff=3.82628e-19
  0.000000	  0.000000	diff=9.19141e-19
  0.000000	 -0.000000	diff=9.00552e-13
  0.000000	  0.000000	diff=9.21547e-13
  0.000000	 -0.000000	diff=5.75846e-19
  0.000000	  0.000000	diff=4.19644e-18
  0.000000	 -0.000000	diff=5.27857e-19
  0.000000	  0.000000	diff=2.56404e-18
  0.000000	 -0.000000	diff=1.41052e-18
  0.000000	  0.000000	diff=6.53217e-18
  0.000000	  0.000000	diff=4.94712e-13
  0.000000	 -0.000000	diff=1.10392e-12
  local_diff=1.43175e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=4.19048e-12
  0.000000	  0.000000	diff=1.92679e-12
 -0.000000	 -0.000000	diff=3.39018e-12
  0.000000	  0.000000	diff=1.13752e-12
 -0.000000	 -0.000000	diff=4.18948e-12
  0.000000	  0.000000	diff=3.20358e-13
 -0.000000	 -0.000000	diff=4.25894e-12
  0.000000	  0.000000	diff=1.91935e-12
  local_diff=2.13331e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=8.54576e-12
  0.000000	  0.000000	diff=1.02354e-11
  0.000000	  0.000000	diff=1.66599e-12
  0.000000	  0.000000	diff=5.98268e-12
 -0.000000	 -0.000000	diff=2.0113e-12
  0.000000	  0.000000	diff=5.9961e-12
  0.000075	  0.000075	diff=6.4635e-10
  0.000040	  0.000040	diff=9.73447e-10
 -0.000000	 -0.000000	diff=2.33282e-12
 -0.000000	 -0.000000	diff=1.97606e-12
 -0.000000	 -0.000000	diff=7.87371e-12
  0.000000	  0.000000	diff=1.18145e-11
  0.000000	  0.000000	diff=1.12517e-11
 -0.000000	 -0.000000	diff=1.895e-11
  0.000308	  0.000308	diff=3.56734e-09
  0.000157	  0.000157	diff=3.72709e-09
  0.000000	  0.000000	diff=1.86746e-12
 -0.000000	 -0.000000	diff=7.17835e-13
 -0.000000	 -0.000000	diff=5.72721e-12
  0.000000	  0.000000	diff=1.50722e-11
  0.000000	  0.000000	diff=3.57844e-12
 -0.000000	 -0.000000	diff=1.79943e-12
  0.000002	  0.000002	diff=2.76452e-09
  0.000001	  0.000001	diff=1.19362e-11
  0.000000	  0.000000	diff=9.89296e-12
 -0.000000	 -0.000000	diff=9.09564e-12
  0.000000	  0.000000	diff=1.66909e-11
 -0.000000	 -0.000000	diff=3.29599e-12
  0.000000	  0.000000	diff=4.61588e-12
 -0.000000	 -0.000000	diff=1.56999e-12
  0.000000	  0.000000	diff=9.26613e-13
  0.000000	  0.000000	diff=2.2164e-10
  local_diff=1.20758e-08
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=2.11738e-13
  0.000000	  0.000000	diff=1.27903e-11
  0.000000	  0.000000	diff=7.73731e-13
  0.000000	  0.000000	diff=6.14244e-12
 -0.000000	 -0.000000	diff=7.90021e-12
  0.000000	  0.000000	diff=3.08249e-12
 -0.000005	 -0.000005	diff=4.37306e-12
 -0.000005	 -0.000005	diff=1.1051e-11
  0.000000	  0.000000	diff=7.18127e-12
 -0.000000	 -0.000000	diff=1.25e-11
 -0.000000	 -0.000000	diff=9.15996e-12
 -0.000000	 -0.000000	diff=3.28234e-12
  0.000000	  0.000000	diff=7.79631e-12
 -0.000000	 -0.000000	diff=7.74547e-12
  0.000081	  0.000081	diff=1.26231e-11
  0.000091	  0.000091	diff=1.00479e-11
  0.000000	  0.000000	diff=3.18546e-12
 -0.000000	 -0.000000	diff=9.98345e-12
  0.000000	 -0.000000	diff=8.13645e-12
 -0.000000	 -0.000000	diff=3.02885e-12
  0.000000	  0.000000	diff=9.37215e-12
 -0.000000	 -0.000000	diff=2.4083e-12
  0.000001	  0.000001	diff=1.30947e-09
  0.000001	  0.000001	diff=8.03418e-12
  0.000000	  0.000000	diff=4.3765e-12
 -0.000000	 -0.000000	diff=2.95267e-12
  0.000000	 -0.000000	diff=6.32575e-12
 -0.000000	 -0.000000	diff=3.1539e-13
  0.000000	  0.000000	diff=9.9347e-12
 -0.000000	 -0.000000	diff=3.10031e-12
  0.000001	  0.000001	diff=8.71611e-12
  0.000001	  0.000001	diff=1.22055e-09
  local_diff=2.72655e-09
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=4.64125e-12
  0.000000	  0.000000	diff=1.28405e-12
  0.000000	  0.000000	diff=3.70587e-13
  0.000000	  0.000000	diff=4.23786e-12
  0.000000	  0.000000	diff=1.09591e-11
  0.000000	  0.000000	diff=1.21973e-11
  0.000024	  0.000024	diff=1.07291e-11
  0.000018	  0.000018	diff=5.24466e-12
 -0.000000	 -0.000000	diff=8.98413e-12
 -0.000000	 -0.000000	diff=2.53318e-12
 -0.000000	 -0.000000	diff=6.41802e-12
 -0.000000	 -0.000000	diff=8.4461e-13
 -0.000000	 -0.000000	diff=9.05531e-12
 -0.000000	 -0.000000	diff=2.27144e-12
 -0.000102	 -0.000102	diff=4.59157e-12
 -0.000078	 -0.000078	diff=1.24016e-11
  0.000000	  0.000000	diff=3.85309e-13
  0.000000	  0.000000	diff=4.26551e-13
  0.000000	  0.000000	diff=3.56327e-13
  0.000000	  0.000000	diff=2.36494e-13
  0.000000	  0.000000	diff=5.37937e-13
  0.000000	  0.000000	diff=5.29712e-13
  0.000001	  0.000001	diff=1.75544e-09
  0.000001	  0.000001	diff=1.09949e-12
  0.000000	  0.000000	diff=1.84893e-13
  0.000000	  0.000000	diff=2.13969e-13
  0.000000	  0.000000	diff=1.84662e-13
  0.000000	  0.000000	diff=1.22281e-13
  0.000000	  0.000000	diff=2.77322e-13
  0.000000	  0.000000	diff=2.76604e-13
  0.000001	  0.000001	diff=6.05674e-12
  0.000001	  0.000001	diff=8.05681e-10
  local_diff=2.66877e-09
# W_emb_tgt_char, [2 5]
 -0.000022	 -0.000022	diff=8.32245e-09
 -0.000068	 -0.000068	diff=1.30308e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000013	 -0.000013	diff=5.91454e-09
 -0.000060	 -0.000060	diff=1.24757e-08
 -0.000007	 -0.000007	diff=2.50221e-09
 -0.000028	 -0.000029	diff=7.41771e-09
 -0.000016	 -0.000016	diff=2.73016e-09
 -0.000026	 -0.000026	diff=9.5072e-09
  local_diff=6.19008e-08
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.61082e-17
  0.000000	  0.000000	diff=3.22473e-17
  0.000000	  0.000000	diff=8.93838e-17
  0.000000	 -0.000000	diff=1.09223e-16
  local_diff=2.56962e-16
# W_h, [2 4]
 -0.000021	 -0.000021	diff=2.39031e-12
  0.000029	  0.000029	diff=1.2487e-12
  0.000026	  0.000026	diff=3.66895e-12
 -0.000036	 -0.000036	diff=6.59498e-13
 -0.000008	 -0.000008	diff=5.84245e-12
  0.000011	  0.000011	diff=1.10197e-11
  0.000013	  0.000013	diff=1.33743e-10
 -0.000025	 -0.000025	diff=1.46301e-10
  local_diff=3.04874e-10
# W_h_char, [2 4]
 -0.000000	 -0.000000	diff=9.62998e-12
 -0.000000	 -0.000000	diff=7.62721e-12
  0.000000	  0.000000	diff=8.3167e-13
  0.000000	  0.000000	diff=3.09356e-12
 -0.000000	 -0.000000	diff=1.0341e-12
 -0.000000	 -0.000000	diff=2.04531e-12
  0.000000	  0.000000	diff=1.91783e-12
  0.000000	  0.000000	diff=8.74626e-12
  local_diff=3.49259e-11
# W_soft, [5 2]
  0.000007	  0.000007	diff=2.23331e-12
  0.000002	  0.000002	diff=1.77331e-12
 -0.000015	 -0.000015	diff=1.05965e-12
  0.000003	  0.000003	diff=3.78629e-12
  0.000003	  0.000003	diff=2.51612e-12
 -0.000017	 -0.000017	diff=2.20474e-12
  0.000010	  0.000010	diff=3.65529e-12
 -0.000003	 -0.000003	diff=2.11427e-12
  0.000008	  0.000008	diff=7.75914e-13
  0.000002	  0.000002	diff=1.12197e-13
  local_diff=2.02311e-11
# W_soft_char, [5 2]
  0.000034	  0.000034	diff=1.15501e-12
 -0.000023	 -0.000023	diff=5.05699e-12
 -0.000007	 -0.000007	diff=6.75414e-13
 -0.000001	 -0.000001	diff=1.31283e-11
 -0.000002	 -0.000002	diff=4.07249e-12
  0.000024	  0.000024	diff=5.62982e-12
 -0.000039	 -0.000039	diff=1.87387e-13
  0.000006	  0.000006	diff=6.74336e-12
  0.000005	  0.000005	diff=2.57284e-12
  0.000004	  0.000004	diff=1.38095e-12
  local_diff=4.06026e-11
# Num params=416, abs_diff=1.35313e-07
Elapsed time is 9.459642 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.89253e-14
 -0.000000	 -0.000000	diff=3.80665e-13
  0.011919	  0.012356	diff=0.000436738
  0.000000	 -0.000000	diff=1.29395e-40
  0.000000	 -0.000000	diff=2.65023e-25
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.41404e-45
  0.000000	 -0.000000	diff=2.22235e-14
  0.000000	  0.000000	diff=7.91298e-13
 -0.015140	 -0.014509	diff=0.000631498
  0.000000	  0.000000	diff=1.39212e-40
  0.000000	 -0.000000	diff=3.6014e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.27927e-45
  0.000000	 -0.000000	diff=1.78724e-15
  0.000000	  0.000000	diff=5.13634e-39
 -0.001200	 -0.001196	diff=4.19215e-06
  0.000000	  0.000000	diff=1.24599e-41
  0.000000	  0.000000	diff=2.39132e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.35452e-56
  0.000000	  0.000000	diff=1.78724e-15
  0.000000	 -0.000000	diff=5.13634e-39
  0.001192	  0.001196	diff=4.17447e-06
  0.000000	 -0.000000	diff=1.23898e-41
  0.000000	 -0.000000	diff=2.36631e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.3542e-56
  local_diff=0.0010766
# W_tgt{1}, [8 6]
 -0.766914	 -0.785267	diff=0.018353
  0.000000	  0.000000	diff=1.06531e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.8815e-12
 -9.037399	 -9.410081	diff=0.372682
  0.054244	  0.055534	diff=0.00128949
 -0.000000	 -0.000000	diff=3.22055e-11
  0.000000	 -0.000000	diff=2.24719e-27
  1.007635	  0.981278	diff=0.0263573
  0.000000	  0.000000	diff=1.39069e-11
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.38594e-09
 12.379994	 11.758937	diff=0.621058
 -0.071480	 -0.069396	diff=0.00208473
  0.000000	  0.000000	diff=1.10955e-09
  0.000000	  0.000000	diff=1.34546e-26
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=1.49381e-27
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
  0.000000	 -0.000000	diff=2.84648e-29
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=3.20479e-13
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
 -0.000000	 -0.000000	diff=3.90064e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  local_diff=1.04184
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.35585e-26
  0.000000	  0.000000	diff=2.8781e-25
  0.011324	  0.011717	diff=0.000393193
  0.010423	  0.010755	diff=0.000331839
  local_diff=0.000725031
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.22647e-11
 -0.000000	 -0.000000	diff=7.69642e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-11.591312	-12.408891	diff=0.817579
-10.192270	-10.804343	diff=0.612073
  0.000000	  0.000000	diff=1.82339e-09
  0.000000	  0.000000	diff=2.75363e-10
  local_diff=1.42965
# W_soft, [5 2]
  0.117985	  0.117958	diff=2.65055e-05
  0.128902	  0.128874	diff=2.84991e-05
 -0.253645	 -0.253670	diff=2.57773e-05
 -0.106455	 -0.106480	diff=2.53615e-05
  0.113363	  0.113319	diff=4.41675e-05
 -0.001808	 -0.001808	diff=8.08635e-09
 -0.001955	 -0.001955	diff=8.59921e-09
  0.002521	  0.002521	diff=7.92679e-09
  0.001512	  0.001512	diff=7.7748e-09
 -0.000270	 -0.000270	diff=1.26002e-08
  local_diff=0.000150356
# Num params=110, abs_diff=2.47345
Elapsed time is 0.820462 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.34816e-20
 -0.000000	 -0.000000	diff=2.53023e-09
  0.000000	  0.000000	diff=4.3787e-23
  0.000000	 -0.000000	diff=2.83846e-15
  0.000000	 -0.000000	diff=2.28652e-28
  0.000000	  0.000000	diff=3.16321e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.98503e-20
  0.000000	  0.000000	diff=3.93833e-09
  0.000000	 -0.000000	diff=5.56607e-23
  0.000000	  0.000000	diff=3.60822e-15
  0.000000	  0.000000	diff=2.87025e-28
  0.000000	 -0.000000	diff=4.73009e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.51073e-51
  0.000000	  0.000000	diff=5.03598e-38
  0.000000	 -0.000000	diff=6.16669e-54
  0.000000	  0.000000	diff=7.00845e-46
  0.000000	  0.000000	diff=1.10983e-58
  0.000000	  0.000000	diff=2.51678e-53
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.8831e-45
  0.000000	 -0.000000	diff=2.23274e-32
  0.000000	  0.000000	diff=5.80397e-48
  0.000000	 -0.000000	diff=3.76267e-40
  0.000000	 -0.000000	diff=1.84266e-52
  0.000000	 -0.000000	diff=2.51047e-47
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=6.46857e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.55428e-54
  0.000000	  0.000000	diff=8.76417e-53
  0.000000	 -0.000000	diff=1.31334e-54
  0.000000	  0.000000	diff=3.68385e-53
  0.000000	  0.000000	diff=1.67269e-54
  0.000000	  0.000000	diff=2.26763e-52
  0.000000	  0.000000	diff=1.02191e-29
  0.000000	  0.000000	diff=1.48421e-29
  0.000000	  0.000000	diff=1.97708e-48
  0.000000	 -0.000000	diff=1.69155e-47
  0.000000	  0.000000	diff=5.19604e-49
  0.000000	 -0.000000	diff=1.38666e-47
  0.000000	  0.000000	diff=3.01272e-48
  0.000000	 -0.000000	diff=8.27168e-47
  0.000000	 -0.000000	diff=9.0586e-24
  0.000000	  0.000000	diff=2.23467e-23
  0.000000	 -0.000000	diff=1.84561e-48
  0.000000	  0.000000	diff=3.1409e-48
  0.000000	  0.000000	diff=4.54393e-49
  0.000000	  0.000000	diff=1.14558e-48
  0.000000	 -0.000000	diff=1.83828e-48
  0.000000	  0.000000	diff=9.21113e-48
  0.000000	  0.000000	diff=6.85573e-25
  0.000000	 -0.000000	diff=2.36092e-24
  0.000000	 -0.000000	diff=1.01887e-47
  0.000000	 -0.000000	diff=7.26663e-47
  0.000000	  0.000000	diff=2.82651e-48
  0.000000	 -0.000000	diff=2.63008e-47
  0.000000	 -0.000000	diff=1.01827e-47
  0.000000	 -0.000000	diff=2.60012e-46
  0.000000	 -0.000000	diff=2.47598e-24
  0.000000	  0.000000	diff=1.0339e-24
  local_diff=3.79617e-23
# W_tgt{1}, [8 6]
 -0.000004	 -0.000004	diff=4.98508e-09
  0.050148	  0.048173	diff=0.00197547
 -0.000001	 -0.000001	diff=9.19684e-10
 -0.004852	 -0.004846	diff=6.11891e-06
 -0.000004	 -0.000004	diff=5.01857e-09
-16.861985	-16.882693	diff=0.0207085
 -0.000000	 -0.000000	diff=2.24089e-12
 -0.075760	 -0.075641	diff=0.000118743
 -0.000018	 -0.000018	diff=1.17178e-07
  0.286069	  0.239398	diff=0.0466703
 -0.000004	 -0.000004	diff=1.53264e-08
 -0.023675	 -0.023531	diff=0.000144739
 -0.000018	 -0.000019	diff=1.17959e-07
-64.009606	-64.502290	diff=0.492685
 -0.000000	 -0.000000	diff=5.06447e-12
 -0.370083	 -0.367324	diff=0.00275931
 -0.000003	 -0.000003	diff=2.8759e-09
 -0.092075	 -0.092172	diff=9.71693e-05
 -0.000000	 -0.000000	diff=5.83548e-11
  0.000138	  0.000138	diff=1.60813e-08
 -0.000003	 -0.000003	diff=2.98059e-09
  0.268381	  0.268231	diff=0.000150384
 -0.000000	 -0.000000	diff=1.88724e-12
 -0.095132	 -0.094937	diff=0.000195029
  0.000005	  0.000005	diff=6.1152e-09
  0.080428	  0.079878	diff=0.00055015
  0.000000	  0.000000	diff=3.99928e-12
  0.000395	  0.000395	diff=1.31383e-07
  0.000004	  0.000004	diff=5.45053e-09
  0.823579	  0.822744	diff=0.000835628
  0.000000	  0.000000	diff=1.41454e-12
  0.120081	  0.120523	diff=0.000441736
  0.000000	  0.000000	diff=2.37094e-13
 -0.000000	 -0.000000	diff=1.57625e-12
  0.000000	  0.000000	diff=5.50291e-13
  0.000000	  0.000000	diff=1.12205e-12
  0.000000	  0.000000	diff=1.65518e-13
  0.000001	  0.000001	diff=7.18465e-13
  0.000000	  0.000000	diff=3.33371e-17
 -0.000000	 -0.000000	diff=6.37372e-13
 -0.000002	 -0.000002	diff=1.67656e-09
  0.167861	  0.166870	diff=0.000990917
  0.000000	  0.000000	diff=3.56582e-11
 -0.000657	 -0.000656	diff=7.12819e-07
 -0.000001	 -0.000001	diff=4.07367e-10
 -0.704294	 -0.705065	diff=0.00077068
 -0.000000	 -0.000000	diff=1.96455e-12
 -0.007005	 -0.007064	diff=5.90446e-05
  local_diff=0.56916
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.80799e-13
  0.000003	  0.000003	diff=1.17527e-12
  0.000001	  0.000001	diff=1.04317e-12
  0.000000	  0.000000	diff=1.1646e-12
  0.000000	  0.000000	diff=1.85515e-13
  0.000004	  0.000004	diff=8.67471e-13
 -0.000003	 -0.000003	diff=7.61113e-13
  0.000003	  0.000003	diff=7.73975e-13
  0.050823	  0.050903	diff=8.01664e-05
 -2.046568	 -2.047222	diff=0.000653766
 -0.207671	 -0.207474	diff=0.000197039
 -0.402314	 -0.402361	diff=4.70955e-05
 -0.077828	 -0.076264	diff=0.00156383
 -2.684246	 -2.690338	diff=0.00609235
  0.696532	  0.700552	diff=0.00401905
 -3.778872	 -3.779618	diff=0.000745874
 -0.128987	 -0.129030	diff=4.26756e-05
  0.061208	  0.061151	diff=5.68663e-05
 -0.126904	 -0.126919	diff=1.4947e-05
 -0.070657	 -0.070722	diff=6.55408e-05
 -0.291341	 -0.291436	diff=9.54034e-05
 -0.097532	 -0.097713	diff=0.000181571
  1.118120	  1.118619	diff=0.000499494
  0.380550	  0.379815	diff=0.000735855
  0.012946	  0.013209	diff=0.000263206
  0.461725	  0.461779	diff=5.36815e-05
  0.191919	  0.191890	diff=2.89226e-05
  0.679034	  0.678886	diff=0.000147656
  0.083802	  0.084460	diff=0.000658393
  1.541852	  1.540874	diff=0.000977706
 -1.205213	 -1.205056	diff=0.000157264
  4.465138	  4.463566	diff=0.00157229
  local_diff=0.0189506
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.02828e-09
 -0.000000	 -0.000000	diff=9.2605e-09
 -0.000000	 -0.000000	diff=2.94841e-12
 -0.000000	 -0.000000	diff=4.24691e-12
  local_diff=1.6296e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.57964e-09
  0.000000	  0.000000	diff=3.29025e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-46.634814	-48.192947	diff=1.55813
 23.595116	 22.914322	diff=0.680794
-63.733324	-63.722799	diff=0.0105255
 32.900101	 32.948650	diff=0.0485487
  local_diff=2.298
# W_soft, [5 2]
 -0.194189	 -0.194362	diff=0.000173622
 -0.792482	 -0.792957	diff=0.00047466
  0.789507	  0.789365	diff=0.00014269
  0.710923	  0.710812	diff=0.00011126
 -0.512379	 -0.512858	diff=0.000478206
  0.259154	  0.258965	diff=0.000189717
  1.222390	  1.221652	diff=0.000737428
 -0.731666	 -0.731842	diff=0.000175899
 -1.237164	 -1.237267	diff=0.000103252
  0.489267	  0.488492	diff=0.000774967
  local_diff=0.0033617
# Num params=174, abs_diff=2.88947
Elapsed time is 1.456183 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.05792e-13
  0.000000	  0.000000	diff=2.53484e-11
  0.000000	  0.000000	diff=1.75957e-17
  0.000000	 -0.000000	diff=4.30662e-21
  0.000165	  0.000169	diff=3.88032e-06
  0.000000	  0.000000	diff=2.26316e-19
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.31863e-18
  0.000000	 -0.000000	diff=3.43153e-26
 -0.000000	 -0.000000	diff=3.86931e-11
  0.000000	 -0.000000	diff=6.93468e-30
  0.000000	  0.000000	diff=5.47442e-21
  0.000000	 -0.000000	diff=2.10102e-35
  0.000000	 -0.000000	diff=1.15918e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.72548e-14
  0.000000	 -0.000000	diff=1.60375e-31
  0.000000	 -0.000000	diff=2.86987e-18
  0.000000	  0.000000	diff=6.57819e-32
 -0.000028	 -0.000028	diff=1.05142e-07
  0.000000	 -0.000000	diff=3.6913e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.77983e-19
  0.000000	  0.000000	diff=9.96869e-30
  0.000000	  0.000000	diff=1.84957e-41
  0.000000	  0.000000	diff=1.65824e-33
  0.000000	 -0.000000	diff=3.60782e-48
  0.000000	  0.000000	diff=1.59079e-20
  0.000000	 -0.000000	diff=1.27157e-36
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.78485e-34
  local_diff=3.98552e-06
# W_src{2}, [8 4]
  0.000156	  0.000155	diff=7.41308e-07
 -0.051950	 -0.051700	diff=0.000249554
  0.000002	  0.000002	diff=9.04276e-09
 -0.000395	 -0.000397	diff=1.88223e-06
  0.074041	  0.074211	diff=0.000169735
  0.015131	  0.015085	diff=4.60317e-05
  0.000000	  0.000000	diff=1.70435e-09
 -0.000000	 -0.000000	diff=8.95798e-11
  0.000000	 -0.000000	diff=1.04337e-60
  0.000000	  0.000000	diff=7.70033e-59
  0.000000	 -0.000000	diff=1.38359e-60
  0.000000	  0.000000	diff=1.86874e-59
  0.000000	 -0.000000	diff=3.10002e-60
  0.000000	  0.000000	diff=8.22314e-59
  0.000000	  0.000000	diff=1.00804e-29
  0.000000	  0.000000	diff=6.01278e-29
 -0.000001	 -0.000001	diff=3.38417e-09
 -0.025529	 -0.025469	diff=6.0629e-05
  0.000000	  0.000000	diff=6.1963e-11
 -0.000195	 -0.000195	diff=4.56596e-07
 -0.014545	 -0.014577	diff=3.201e-05
  0.008044	  0.008026	diff=1.81218e-05
  0.000000	  0.000000	diff=4.27358e-10
 -0.000000	 -0.000000	diff=7.18604e-11
  0.000001	  0.000001	diff=1.38785e-09
  0.020501	  0.020540	diff=3.89527e-05
 -0.000001	 -0.000001	diff=5.53349e-09
  0.000158	  0.000158	diff=2.98779e-07
 -0.077118	 -0.077009	diff=0.000109619
  0.006137	  0.006129	diff=7.8771e-06
 -0.000000	 -0.000000	diff=2.57831e-10
  0.000000	  0.000000	diff=4.56238e-11
  local_diff=0.000735931
# W_tgt{1}, [8 6]
  0.000068	  0.000068	diff=1.77923e-07
 -0.377777	 -0.375082	diff=0.00269499
  0.000038	  0.000038	diff=5.64938e-10
  0.179689	  0.179851	diff=0.000162355
  0.000086	  0.000086	diff=1.94569e-07
  0.430188	  0.390988	diff=0.0392
  0.000015	  0.000015	diff=5.30743e-08
 -0.037834	 -0.037604	diff=0.000229806
 -0.000000	 -0.000000	diff=2.53059e-09
 -0.335776	 -0.257176	diff=0.0786002
  0.000000	  0.000000	diff=2.89869e-09
  0.002525	  0.002506	diff=1.96204e-05
 -0.000000	 -0.000000	diff=2.47296e-09
  4.101734	  3.545747	diff=0.555988
 -0.000000	 -0.000000	diff=5.12821e-13
 -0.129065	 -0.124496	diff=0.00456849
 -0.000000	 -0.000000	diff=1.44817e-11
  0.016114	  0.016652	diff=0.000537924
  0.000000	  0.000000	diff=2.58485e-12
 -0.000028	 -0.000028	diff=1.18119e-10
  0.000001	  0.000001	diff=9.44108e-12
 -0.009378	 -0.009462	diff=8.34718e-05
  0.000000	  0.000000	diff=3.45116e-13
  0.003196	  0.003198	diff=1.76973e-06
  0.000000	  0.000000	diff=1.08825e-10
  0.004006	  0.005904	diff=0.00189828
  0.000005	  0.000005	diff=1.34465e-10
 -0.000122	 -0.000122	diff=7.82769e-08
  0.000009	  0.000009	diff=2.47621e-09
 -0.774061	 -0.774462	diff=0.00040099
  0.000000	  0.000000	diff=1.11953e-12
  0.008891	  0.008938	diff=4.66139e-05
 -0.000000	 -0.000000	diff=1.24573e-09
  0.000263	  0.000262	diff=7.83304e-07
 -0.000018	 -0.000018	diff=1.62356e-09
  0.000036	  0.000036	diff=1.03458e-07
 -0.000030	 -0.000030	diff=3.13933e-08
  0.000281	  0.000280	diff=8.98631e-07
 -0.000000	 -0.000000	diff=2.92322e-13
  0.000000	  0.000000	diff=1.08686e-12
 -0.000000	 -0.000000	diff=7.96117e-12
  0.002446	  0.003417	diff=0.000971146
 -0.000001	 -0.000001	diff=1.05707e-11
  0.000058	  0.000058	diff=1.59554e-08
 -0.000002	 -0.000002	diff=1.94472e-10
  0.417876	  0.417789	diff=8.67988e-05
 -0.000000	 -0.000000	diff=3.22329e-13
 -0.003831	 -0.003815	diff=1.58554e-05
  local_diff=0.685509
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=6.66348e-13
  0.000000	  0.000000	diff=6.10105e-13
  0.000000	  0.000000	diff=9.65873e-13
  0.000000	  0.000000	diff=1.90049e-12
 -0.000000	 -0.000000	diff=1.11083e-12
  0.000000	  0.000000	diff=1.87989e-12
 -0.000000	 -0.000000	diff=1.35319e-12
  0.000000	  0.000000	diff=5.8262e-13
  0.217844	  0.218061	diff=0.00021704
 -0.472190	 -0.469976	diff=0.00221478
 -0.097230	 -0.097174	diff=5.5989e-05
 -0.325293	 -0.325539	diff=0.000246364
  0.557278	  0.559871	diff=0.00259358
 -1.526243	 -1.518094	diff=0.00814958
 -1.531277	 -1.529493	diff=0.00178395
 -0.515424	 -0.514534	diff=0.000889868
  0.068274	  0.068202	diff=7.15025e-05
 -0.053350	 -0.053277	diff=7.3371e-05
 -0.124763	 -0.124748	diff=1.50754e-05
 -0.005424	 -0.005436	diff=1.22185e-05
 -0.075474	 -0.075506	diff=3.23948e-05
 -0.183737	 -0.183720	diff=1.71131e-05
  0.407739	  0.407946	diff=0.000207326
 -0.249140	 -0.250224	diff=0.00108407
  0.072757	  0.072690	diff=6.67605e-05
  0.288081	  0.288275	diff=0.000194448
  0.089550	  0.089540	diff=9.712e-06
  0.362486	  0.363060	diff=0.000573974
 -0.168338	 -0.167893	diff=0.000445409
  1.041265	  1.041665	diff=0.000400359
 -0.279811	 -0.279331	diff=0.000480321
  3.008567	  3.001825	diff=0.00674267
  local_diff=0.0265779
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.09246e-10
  0.000000	  0.000000	diff=9.31547e-11
  0.000118	  0.000120	diff=1.95821e-06
  0.000000	 -0.000000	diff=6.74767e-15
  local_diff=1.95882e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.02899e-11
 -0.000000	 -0.000000	diff=3.4354e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 29.868986	 30.897636	diff=1.02865
-15.147911	-14.914619	diff=0.233291
 -4.963032	 -5.462542	diff=0.49951
  2.964002	  2.824189	diff=0.139814
  local_diff=1.90126
# W_soft, [5 2]
 -0.169247	 -0.169422	diff=0.000174874
 -0.453029	 -0.453367	diff=0.000338023
  0.500466	  0.500293	diff=0.000173735
  0.537580	  0.537427	diff=0.000153904
 -0.414584	 -0.414930	diff=0.000346442
 -0.109892	 -0.110159	diff=0.000267945
  0.622417	  0.621976	diff=0.000441468
  0.210969	  0.210769	diff=0.00019921
 -1.050254	 -1.050476	diff=0.000222186
  0.328336	  0.327891	diff=0.000444995
  local_diff=0.00276278
# Num params=174, abs_diff=2.61686
Elapsed time is 1.489038 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=6.67043e-20
 -0.001022	 -0.000997	diff=2.48127e-05
  0.000000	  0.000000	diff=1.27597e-12
  0.003509	  0.003424	diff=8.51443e-05
  0.000000	  0.000000	diff=8.57292e-16
 -0.000000	 -0.000000	diff=6.96634e-12
  0.000000	  0.000000	diff=4.25752e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.4857e-20
  0.001229	  0.001268	diff=3.86369e-05
 -0.000000	 -0.000000	diff=4.06238e-12
 -0.004220	 -0.004353	diff=0.000132585
  0.000000	 -0.000000	diff=1.08976e-15
 -0.000000	 -0.000000	diff=9.22642e-12
  0.000000	  0.000000	diff=4.69444e-12
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.03569e-20
 -0.000156	 -0.000155	diff=5.92663e-07
  0.000000	  0.000000	diff=1.98569e-13
  0.000535	  0.000533	diff=2.03373e-06
  0.000000	  0.000000	diff=1.33414e-16
  0.000000	 -0.000000	diff=3.20504e-13
  0.000000	  0.000000	diff=4.5761e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.51649e-32
  0.000000	  0.000000	diff=4.42661e-16
  0.000000	 -0.000000	diff=4.82481e-25
  0.000000	 -0.000000	diff=8.92872e-16
  0.000000	 -0.000000	diff=1.17033e-27
  0.000000	  0.000000	diff=7.66711e-25
  0.000000	 -0.000000	diff=2.09341e-37
  0.000000	  0.000000	diff=0
  local_diff=0.000283806
# W_src{2}, [8 4]
-30.558228	-29.844251	diff=0.713978
  0.209417	  0.208607	diff=0.000809461
 -0.042198	 -0.042037	diff=0.000161168
  0.001173	  0.001178	diff=4.38467e-06
 -1.578482	 -1.582313	diff=0.00383039
  0.180621	  0.180010	diff=0.000611677
 -0.000212	 -0.000214	diff=1.6212e-06
 -0.000001	 -0.000001	diff=4.42521e-09
  0.000000	  0.000000	diff=5.62131e-12
 -0.000000	 -0.000000	diff=4.721e-12
  0.000000	 -0.000000	diff=4.36816e-14
  0.000000	 -0.000000	diff=7.56142e-16
  0.000000	  0.000000	diff=2.23728e-12
 -0.000000	 -0.000000	diff=5.34644e-12
  0.000000	  0.000000	diff=1.72533e-16
  0.000000	  0.000000	diff=2.67216e-18
 -1.021426	 -1.020243	diff=0.00118301
  0.005150	  0.005149	diff=8.98638e-07
 -0.012633	 -0.012633	diff=2.16174e-07
  0.000771	  0.000771	diff=1.66887e-08
  0.029397	  0.029378	diff=1.89312e-05
  0.007477	  0.007476	diff=1.0768e-06
 -0.638903	 -0.639543	diff=0.000639694
 -1.464840	 -1.465486	diff=0.000645947
  0.003645	  0.003645	diff=1.52291e-08
 -0.000019	 -0.000019	diff=1.84305e-11
  0.000023	  0.000023	diff=2.78428e-12
 -0.000002	 -0.000002	diff=3.22779e-12
  0.000037	  0.000037	diff=6.95407e-11
 -0.000027	 -0.000027	diff=4.67897e-11
  0.001214	  0.001214	diff=3.60014e-10
  0.002859	  0.002859	diff=7.41018e-10
  local_diff=0.721886
# W_tgt{1}, [8 6]
 -0.135492	 -0.135538	diff=4.54253e-05
 20.676176	 20.911802	diff=0.235626
 -0.130266	 -0.138285	diff=0.00801924
 -0.389091	 -0.388426	diff=0.000664166
  0.011424	  0.011439	diff=1.49369e-05
  0.882785	  0.872250	diff=0.0105353
 -0.000005	 -0.000005	diff=1.56112e-08
  0.004808	  0.004795	diff=1.26938e-05
 -0.657110	 -0.658188	diff=0.00107809
-20.175613	-19.954141	diff=0.221472
  0.119819	  0.112340	diff=0.00747932
 -1.901864	 -1.886241	diff=0.0156229
  0.055201	  0.055552	diff=0.000351017
  3.052794	  2.912170	diff=0.140624
 -0.000024	 -0.000023	diff=3.0579e-07
  0.023587	  0.023285	diff=0.000301384
 -0.052167	 -0.052490	diff=0.000322805
  3.563431	  3.566405	diff=0.0029734
  0.286574	  0.284858	diff=0.00171601
  0.897582	  0.901166	diff=0.0035838
  0.033945	  0.034078	diff=0.00013264
  0.313144	  0.311458	diff=0.001686
 -0.000014	 -0.000014	diff=1.08931e-07
  0.016322	  0.016175	diff=0.000146573
  0.267543	  0.267404	diff=0.000139616
 -3.166293	 -3.161810	diff=0.00448219
  0.213537	  0.212545	diff=0.000992333
 -1.089434	 -1.084259	diff=0.00517477
 -0.025659	 -0.025584	diff=7.49371e-05
 -0.225852	 -0.227110	diff=0.00125876
  0.000009	  0.000010	diff=4.97615e-08
 -0.010791	 -0.010863	diff=7.20767e-05
  0.174858	  0.174681	diff=0.000176912
 -0.000156	 -0.000156	diff=6.33793e-07
  0.086406	  0.085029	diff=0.00137708
  0.000143	  0.000143	diff=3.22852e-08
  0.000000	  0.000000	diff=3.45199e-10
  0.000221	  0.000220	diff=8.42481e-07
  0.000000	  0.000000	diff=1.87186e-11
  0.000005	  0.000005	diff=3.42957e-08
  0.001796	  0.001796	diff=3.3606e-07
  0.865945	  0.870552	diff=0.00460709
 -0.018321	 -0.018296	diff=2.47819e-05
  0.000043	  0.000043	diff=1.98584e-07
  0.000000	  0.000000	diff=1.58158e-10
  0.519537	  0.517827	diff=0.00171055
 -0.000000	 -0.000000	diff=1.8117e-12
  0.000000	  0.000000	diff=1.53537e-10
  local_diff=0.672501
# W_tgt{2}, [8 4]
  0.349816	  0.352640	diff=0.00282421
 22.064941	 22.127726	diff=0.0627858
 -0.000484	 -0.000485	diff=1.42216e-06
  1.514655	  1.511513	diff=0.00314105
 -0.190586	 -0.189734	diff=0.000852067
  0.596883	  0.599269	diff=0.00238603
 -0.023072	 -0.022761	diff=0.000311681
127.012492	128.847257	diff=1.83477
 -0.165363	 -0.164644	diff=0.000718412
 -6.125900	 -6.120700	diff=0.00520063
 -0.025435	 -0.025405	diff=3.03408e-05
 -0.283234	 -0.282788	diff=0.000446348
 -6.118739	 -6.098752	diff=0.0199863
 -0.194710	 -0.194784	diff=7.36115e-05
 -1.110032	 -1.097028	diff=0.0130039
  0.792457	  0.792873	diff=0.000415772
 -1.691729	 -1.693321	diff=0.00159242
  1.389923	  1.391690	diff=0.00176682
  0.307274	  0.307092	diff=0.000182421
  0.016365	  0.016499	diff=0.000134034
 -1.246759	 -1.246780	diff=2.02749e-05
  0.057430	  0.057485	diff=5.55194e-05
  5.212943	  5.225570	diff=0.012627
 -2.288095	 -2.244027	diff=0.044068
  0.099888	  0.099699	diff=0.000188227
 -1.739377	 -1.740372	diff=0.000995273
  0.355968	  0.355997	diff=2.96591e-05
  0.597948	  0.597888	diff=6.01265e-05
  0.122022	  0.122183	diff=0.000161117
  0.071059	  0.071145	diff=8.5975e-05
 -0.433078	 -0.432639	diff=0.000439269
  7.394804	  7.407425	diff=0.012621
  local_diff=2.02197
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=2.38159e-11
  0.000000	  0.000000	diff=3.7844e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.004307	  0.004130	diff=0.000176831
  0.004919	  0.004690	diff=0.000228906
 -0.000000	 -0.000000	diff=3.27639e-12
 -0.000000	 -0.000000	diff=2.92571e-12
  local_diff=0.000405737
# W_emb_tgt, [2 5]
-49.038406	-47.775057	diff=1.26335
-12.712141	-12.620681	diff=0.0914603
  0.000000	  0.000000	diff=6.72055e-09
  0.000000	  0.000000	diff=3.16384e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  5.157647	  6.085725	diff=0.928078
 -5.580492	 -4.995387	diff=0.585106
  5.029135	  4.823373	diff=0.205762
 -2.437863	 -2.489801	diff=0.0519374
  local_diff=3.12569
# W_tgt_char{1}, [8 4]
-15.655789	-15.318231	diff=0.337558
 -1.460095	 -1.501622	diff=0.0415268
  0.000000	  0.000000	diff=6.37652e-32
 -0.000001	 -0.000001	diff=2.18591e-08
  0.130734	  0.133760	diff=0.00302562
 -2.895066	 -2.919601	diff=0.0245349
 -0.000000	 -0.000000	diff=2.38697e-10
  0.133707	  0.139382	diff=0.00567483
 -5.826084	 -5.778429	diff=0.0476553
 -0.560563	 -0.566549	diff=0.00598639
  0.000000	  0.000000	diff=5.68336e-32
 -0.000001	 -0.000001	diff=1.7575e-08
  0.050061	  0.050496	diff=0.000435289
 -5.893160	 -5.996181	diff=0.103021
 -0.000000	 -0.000000	diff=1.65578e-10
  0.051766	  0.052588	diff=0.000821876
 -2.301953	 -2.290196	diff=0.0117578
 -0.300189	 -0.301895	diff=0.00170558
  0.000000	  0.000000	diff=2.26495e-34
 -0.000000	 -0.000000	diff=7.19934e-10
  0.026710	  0.026833	diff=0.000123264
  0.001008	  0.001008	diff=9.70632e-09
 -0.000000	 -0.000000	diff=7.06231e-12
  0.027472	  0.027709	diff=0.000236407
  2.463465	  2.472920	diff=0.00945489
  0.294492	  0.292869	diff=0.0016223
  0.000000	  0.000000	diff=2.17966e-34
 -0.000000	 -0.000000	diff=6.43627e-10
 -0.025906	 -0.025792	diff=0.000114562
  0.006819	  0.006818	diff=4.57215e-07
 -0.000000	 -0.000000	diff=2.47103e-12
 -0.026271	 -0.026055	diff=0.000216208
  local_diff=0.595471
# W_emb_tgt_char, [2 5]
  0.505305	  0.506916	diff=0.00161006
 -6.656129	 -6.680091	diff=0.0239619
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  3.480720	  3.446219	diff=0.0345014
 -2.454356	 -2.471956	diff=0.0176002
  0.000000	  0.000000	diff=3.05152e-13
  0.000000	  0.000000	diff=1.90493e-13
  0.000002	  0.000001	diff=3.99121e-08
  0.000000	  0.000000	diff=7.43924e-10
  local_diff=0.0776735
# W_h, [2 4]
  1.493844	  1.494572	diff=0.000728813
 -1.246980	 -1.246354	diff=0.000626451
 -0.011631	 -0.011631	diff=3.00254e-08
  0.003238	  0.003238	diff=1.28875e-08
 -0.223936	 -0.217922	diff=0.00601327
  3.902743	  3.902246	diff=0.000497085
  5.690652	  5.696963	diff=0.00631122
  7.292014	  7.296153	diff=0.00413865
  local_diff=0.0183155
# W_soft, [5 2]
 -1.189027	 -1.197234	diff=0.00820673
 -0.434854	 -0.437344	diff=0.00249
 -7.858412	 -7.865210	diff=0.00679784
 -1.836825	 -1.843846	diff=0.00702107
 11.344741	 11.343634	diff=0.00110696
  0.447493	  0.440709	diff=0.00678373
  0.316286	  0.313902	diff=0.00238458
 -4.448612	 -4.454413	diff=0.00580124
  1.182404	  1.176529	diff=0.00587509
  2.524998	  2.523273	diff=0.00172436
  local_diff=0.0481916
# W_soft_char, [5 2]
 -0.001425	 -0.001425	diff=1.75133e-08
 -0.001439	 -0.001439	diff=4.05209e-08
  0.006653	  0.006653	diff=1.97767e-07
  5.154428	  5.154427	diff=4.08045e-07
 -5.158215	 -5.158216	diff=6.14801e-07
 -0.009820	 -0.009821	diff=8.50911e-07
 -0.009875	 -0.009876	diff=8.75564e-07
  0.046371	  0.046370	diff=1.05707e-06
  4.852471	  4.852469	diff=1.46214e-06
 -4.879141	 -4.879143	diff=1.64245e-06
  local_diff=7.16679e-06
# Num params=234, abs_diff=7.2824
Elapsed time is 3.949457 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.006248	  0.006248	diff=8.17844e-09
 -0.000962	 -0.000962	diff=1.32929e-07
  0.000343	  0.000343	diff=5.57016e-10
  0.000039	  0.000039	diff=2.52372e-12
  0.006276	  0.006276	diff=8.14736e-09
 -0.000966	 -0.000966	diff=2.14546e-09
 -1.442460	 -1.441986	diff=0.000473752
  0.012518	  0.012605	diff=8.60997e-05
 -0.000000	 -0.000000	diff=2.05041e-10
 -0.000007	 -0.000007	diff=2.10267e-07
  0.000000	  0.000000	diff=2.44597e-09
  0.000000	  0.000000	diff=6.47122e-16
  0.000000	 -0.000000	diff=1.74327e-16
  0.000000	  0.000000	diff=5.0601e-17
  0.000000	  0.000000	diff=5.70183e-14
  0.000000	 -0.000000	diff=1.38184e-14
 -0.002216	 -0.002216	diff=9.82367e-09
  0.001004	  0.001004	diff=3.40886e-10
 -0.000438	 -0.000438	diff=3.40667e-10
 -0.000043	 -0.000043	diff=4.50584e-12
 -0.002666	 -0.002666	diff=1.40143e-08
  0.000960	  0.000960	diff=3.06733e-10
  0.249644	  0.249767	diff=0.000123243
 -0.115581	 -0.115576	diff=4.51647e-06
  0.000466	  0.000466	diff=4.27112e-10
 -0.000211	 -0.000211	diff=1.36739e-11
  0.000092	  0.000092	diff=1.39149e-11
  0.000009	  0.000009	diff=7.00113e-12
  0.000560	  0.000560	diff=6.13715e-10
 -0.000202	 -0.000202	diff=1.16826e-11
 -0.052498	 -0.052493	diff=5.44244e-06
  0.024290	  0.024290	diff=1.99505e-07
  local_diff=0.000693644
# W_src{2}, [8 4]
  0.003236	  0.003236	diff=7.39428e-08
 -0.021143	 -0.021143	diff=7.31683e-08
  0.001042	  0.001042	diff=1.42487e-09
 -0.002641	 -0.002641	diff=4.34382e-09
  0.004342	  0.004342	diff=8.79868e-08
 -0.016727	 -0.016727	diff=1.61843e-07
 -0.395461	 -0.395587	diff=0.00012573
 -1.129322	 -1.129430	diff=0.00010724
  0.001133	  0.001133	diff=4.98098e-09
 -0.011674	 -0.011674	diff=4.93204e-09
  0.000948	  0.000948	diff=5.07055e-10
 -0.002007	 -0.002007	diff=2.20975e-09
  0.002352	  0.002352	diff=5.74601e-09
 -0.010287	 -0.010287	diff=4.79147e-08
 -0.213588	 -0.213592	diff=3.83676e-06
 -0.347530	 -0.347540	diff=9.19821e-06
 -0.005710	 -0.005710	diff=1.7833e-07
 -0.017506	 -0.017506	diff=1.71792e-08
  0.002537	  0.002537	diff=5.02086e-09
 -0.004571	 -0.004571	diff=2.74389e-10
 -0.003966	 -0.003966	diff=2.17933e-07
 -0.019067	 -0.019067	diff=7.08511e-08
 -0.448523	 -0.448507	diff=1.64195e-05
 -0.696117	 -0.696047	diff=6.98779e-05
  0.008003	  0.008003	diff=1.58622e-07
  0.028308	  0.028308	diff=1.92005e-07
 -0.003545	 -0.003545	diff=9.66721e-09
  0.009366	  0.009366	diff=1.78565e-10
  0.006325	  0.006324	diff=3.29232e-07
  0.029007	  0.029007	diff=5.67082e-08
  0.937029	  0.937037	diff=7.61975e-06
  1.037056	  1.036848	diff=0.000207747
  local_diff=0.000549375
# W_tgt{1}, [8 6]
 -0.004683	 -0.004678	diff=5.623e-06
  0.024554	  0.027255	diff=0.00270088
 -6.904713	 -6.873361	diff=0.031352
 -0.000535	 -0.000535	diff=7.0769e-07
  0.000004	  0.000004	diff=4.94165e-09
 -1.150997	 -1.149717	diff=0.00127948
 -0.000000	 -0.000000	diff=3.81043e-11
  0.333633	  0.334049	diff=0.000416168
 -0.022847	 -0.022714	diff=0.000133023
 -1.123485	 -1.124088	diff=0.000603567
  6.535395	  6.564062	diff=0.0286665
 -0.002614	 -0.002597	diff=1.67457e-05
  0.000017	  0.000018	diff=1.12181e-07
 -5.613299	 -5.583191	diff=0.0301079
 -0.000000	 -0.000000	diff=4.02342e-11
  1.612340	  1.622184	diff=0.00984363
  0.005831	  0.005840	diff=8.73937e-06
  0.235041	  0.234842	diff=0.000199789
  0.841477	  0.841614	diff=0.000136995
 -0.000020	 -0.000020	diff=5.3e-10
  0.000000	  0.000000	diff=9.93854e-11
  0.301753	  0.301167	diff=0.000586439
  0.000000	  0.000000	diff=4.34162e-12
 -0.414812	 -0.414157	diff=0.000654536
  0.014090	  0.014141	diff=5.1178e-05
  0.562576	  0.561384	diff=0.0011917
  1.988140	  1.989940	diff=0.00179963
 -0.000009	 -0.000009	diff=8.26196e-09
  0.000000	  0.000000	diff=6.0202e-10
  0.798623	  0.795167	diff=0.00345621
  0.000000	  0.000000	diff=7.89286e-12
 -1.006856	 -1.003023	diff=0.00383226
  0.013447	  0.013494	diff=4.66051e-05
  0.528210	  0.527185	diff=0.00102586
  2.276841	  2.279303	diff=0.00246193
 -0.000002	 -0.000002	diff=7.60663e-09
  0.000000	  0.000000	diff=5.40461e-10
  0.771704	  0.768557	diff=0.00314688
  0.000000	  0.000000	diff=5.0097e-12
 -0.960628	 -0.957138	diff=0.00348989
  0.000000	  0.000000	diff=1.42943e-12
  0.000006	  0.000006	diff=1.822e-10
  0.000184	  0.000184	diff=2.74654e-11
 -0.000000	 -0.000000	diff=1.13667e-12
  0.000000	  0.000000	diff=3.72668e-12
  0.000008	  0.000008	diff=7.29884e-13
  0.000000	  0.000000	diff=1.21626e-14
 -0.000010	 -0.000010	diff=4.56933e-12
  local_diff=0.127215
# W_tgt{2}, [8 4]
 -0.615957	 -0.617382	diff=0.00142553
 34.490781	 34.618576	diff=0.127795
 -0.000427	 -0.000426	diff=1.60942e-06
  2.078394	  2.070901	diff=0.00749351
 -0.218541	 -0.217774	diff=0.000767085
  0.817791	  0.820681	diff=0.00288945
  0.185011	  0.184505	diff=0.000506031
170.601637	173.088295	diff=2.48666
 -0.080545	 -0.080528	diff=1.74609e-05
 -0.376681	 -0.376602	diff=7.83393e-05
  0.017016	  0.017016	diff=3.91207e-07
 -0.007392	 -0.007392	diff=3.81097e-08
 -0.153630	 -0.153643	diff=1.2894e-05
 -0.461401	 -0.461344	diff=5.68853e-05
 -2.549695	 -2.548598	diff=0.00109688
 -0.665581	 -0.665040	diff=0.000541661
  0.022014	  0.022014	diff=1.7039e-07
 -1.604226	 -1.605425	diff=0.00119908
  0.004526	  0.004526	diff=1.72482e-07
  0.019027	  0.019069	diff=4.23575e-05
  0.005243	  0.005248	diff=5.01938e-06
 -0.146829	 -0.146724	diff=0.000104524
  0.071173	  0.071234	diff=6.13396e-05
 -2.821428	 -2.819413	diff=0.00201467
 -0.402471	 -0.402458	diff=1.35885e-05
  0.849400	  0.850385	diff=0.00098493
 -0.341505	 -0.341430	diff=7.51827e-05
  0.554961	  0.554769	diff=0.00019173
 -0.270186	 -0.270326	diff=0.000139298
 -0.157771	 -0.157807	diff=3.59235e-05
 -1.003819	 -1.004385	diff=0.000565365
 21.945916	 21.945942	diff=2.6529e-05
  local_diff=2.6348
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000009	  0.000009	diff=3.75637e-07
  0.000011	  0.000010	diff=4.95173e-07
  0.000000	  0.000000	diff=3.40556e-09
  0.000000	  0.000000	diff=2.86809e-09
  local_diff=8.77083e-07
# W_emb_tgt, [2 5]
 -4.102115	 -4.077678	diff=0.0244372
  2.469295	  2.474717	diff=0.00542131
  0.000000	  0.000000	diff=6.58942e-10
  0.000000	  0.000000	diff=7.36868e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -8.081643	 -7.131565	diff=0.950078
 11.460057	 11.546129	diff=0.0860722
 -0.000246	 -0.000248	diff=1.23009e-06
  0.000096	  0.000096	diff=4.80402e-07
  local_diff=1.06601
# W_src_char{1}, [8 4]
  0.000003	  0.000003	diff=4.71702e-09
  0.000000	 -0.000000	diff=6.27083e-13
 -0.000000	 -0.000000	diff=5.5265e-12
  0.000000	  0.000000	diff=1.72376e-13
 12.315415	 12.090164	diff=0.225251
  0.000000	  0.000000	diff=3.63944e-12
  0.000000	  0.000000	diff=3.39783e-12
  0.000000	 -0.000000	diff=1.28835e-22
 -0.000009	 -0.000008	diff=2.92543e-07
  0.000000	 -0.000000	diff=5.58916e-13
  0.000000	  0.000000	diff=1.23195e-12
  0.000000	  0.000000	diff=2.75539e-12
-30.039356	-30.295237	diff=0.255881
  0.000000	  0.000000	diff=4.87614e-12
  0.000000	  0.000000	diff=6.73598e-12
  0.000000	 -0.000000	diff=7.86034e-23
  0.000000	 -0.000000	diff=7.21492e-16
  0.000000	 -0.000000	diff=5.75917e-23
  0.000000	  0.000000	diff=7.43207e-20
  0.000000	  0.000000	diff=2.70907e-16
 -0.000000	 -0.000000	diff=6.17231e-11
  0.000000	  0.000000	diff=2.61319e-16
  0.000000	 -0.000000	diff=9.87368e-19
  0.000000	 -0.000000	diff=2.94074e-37
  0.000000	  0.000000	diff=7.56357e-17
  0.000000	 -0.000000	diff=8.47259e-18
  0.000000	  0.000000	diff=1.99309e-22
  0.000000	  0.000000	diff=5.62034e-12
 -0.000000	 -0.000000	diff=2.33216e-12
  0.000000	  0.000000	diff=1.34645e-12
  0.000000	 -0.000000	diff=1.45256e-13
  0.000000	 -0.000000	diff=4.32698e-32
  local_diff=0.481133
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 18.802365	 18.386745	diff=0.41562
 15.929183	 15.603843	diff=0.32534
  0.000000	  0.000000	diff=7.31178e-12
 -0.000000	 -0.000000	diff=5.36965e-12
  0.000000	 -0.000000	diff=4.79513e-17
  0.000000	 -0.000000	diff=4.2228e-17
  0.000000	  0.000000	diff=1.55586e-09
  0.000000	  0.000000	diff=1.24307e-09
  local_diff=0.74096
# W_tgt_char{1}, [8 4]
 -0.010460	 -0.010238	diff=0.000221542
 -2.074004	 -1.815233	diff=0.258771
  0.000000	  0.000000	diff=1.38039e-14
  0.000000	  0.000000	diff=1.1774e-23
  0.000076	  0.000079	diff=3.0212e-06
  0.000000	  0.000000	diff=3.21999e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.020216	 -0.019414	diff=0.000802345
  0.671034	  0.709762	diff=0.0387279
  0.000000	 -0.000000	diff=2.09887e-14
  0.000000	 -0.000000	diff=4.76059e-24
 -0.000031	 -0.000031	diff=4.78975e-07
  0.000000	  0.000000	diff=6.04536e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.01269e-10
  0.271944	  0.273191	diff=0.00124724
  0.000000	 -0.000000	diff=2.24113e-23
  0.000000	  0.000000	diff=4.73637e-32
  0.000009	  0.000009	diff=4.4926e-08
  0.000000	 -0.000000	diff=4.05413e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000098	  0.000098	diff=9.63136e-08
  0.253920	  0.254689	diff=0.000768531
  0.000000	 -0.000000	diff=2.60025e-15
  0.000000	 -0.000000	diff=1.72417e-24
  0.000008	  0.000008	diff=3.00064e-08
  0.000000	 -0.000000	diff=2.1891e-14
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.300542
# W_emb_tgt_char, [2 5]
  0.036111	  0.036214	diff=0.000103583
  0.352253	  0.362388	diff=0.0101351
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.003612	  0.003640	diff=2.7435e-05
  0.000546	  0.000547	diff=6.21684e-07
 -0.000016	 -0.000016	diff=1.22765e-07
 -0.000002	 -0.000002	diff=2.78376e-09
  0.000000	  0.000000	diff=1.0359e-12
  0.000000	  0.000000	diff=4.19538e-12
  local_diff=0.0102669
# W_h, [2 4]
  0.115245	  0.115232	diff=1.31954e-05
 -0.288882	 -0.288885	diff=3.40101e-06
 -0.383081	 -0.383168	diff=8.65285e-05
  0.739505	  0.739489	diff=1.5532e-05
  2.321340	  2.322116	diff=0.000775807
 -1.493660	 -1.494456	diff=0.000795884
  2.801460	  2.763994	diff=0.0374666
 13.976403	 13.981247	diff=0.00484375
  local_diff=0.0440007
# W_soft, [5 2]
  0.384720	  0.384665	diff=5.50966e-05
 -0.061216	 -0.061312	diff=9.60372e-05
 -5.577569	 -5.577785	diff=0.000215938
  2.027702	  2.024828	diff=0.00287394
  3.232356	  3.229605	diff=0.00275074
 -4.473456	 -4.473472	diff=1.62259e-05
  0.039907	  0.039757	diff=0.000149724
 -7.701641	 -7.701673	diff=3.21034e-05
  5.006434	  4.992138	diff=0.0142966
  7.157534	  7.143250	diff=0.0142834
  local_diff=0.0347698
# W_soft_char, [5 2]
  0.000115	  0.000115	diff=5.44722e-11
 -0.000036	 -0.000036	diff=5.52561e-11
  0.000117	  0.000117	diff=5.46824e-11
 -0.000249	 -0.000249	diff=5.40058e-11
  0.000053	  0.000053	diff=5.44319e-11
 -7.996375	 -8.008560	diff=0.0121847
 -0.021617	 -0.021654	diff=3.72173e-05
  5.814763	  5.802597	diff=0.0121665
 -0.009963	 -0.009965	diff=1.87122e-06
  2.237584	  2.237583	diff=1.87562e-06
  local_diff=0.0243922
# Num params=276, abs_diff=5.46533
Elapsed time is 5.190086 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.691405	 -0.691743	diff=0.000337805
  0.109100	  0.109154	diff=5.31832e-05
 -0.076941	 -0.076942	diff=1.40501e-06
  0.019474	  0.019478	diff=3.93594e-06
 -0.916165	 -0.917427	diff=0.00126215
  0.062011	  0.062076	diff=6.49418e-05
  2.660038	  2.651240	diff=0.00879727
 -0.735502	 -0.734559	diff=0.000943254
  0.328295	  0.328502	diff=0.000206264
 -0.029671	 -0.029669	diff=2.29805e-06
  0.038573	  0.038580	diff=6.67911e-06
 -0.001899	 -0.001899	diff=6.12204e-08
  0.467264	  0.467744	diff=0.000479771
 -0.025137	 -0.025130	diff=7.21335e-06
 -1.246078	 -1.243675	diff=0.00240289
 -0.126766	 -0.126593	diff=0.000173077
  0.614896	  0.614943	diff=4.69425e-05
 -0.175302	 -0.175200	diff=0.000101611
  0.146887	  0.146921	diff=3.46869e-05
 -0.069144	 -0.069121	diff=2.32774e-05
  1.129490	  1.129715	diff=0.000224944
 -0.087604	 -0.087556	diff=4.78206e-05
 -1.076674	 -1.076777	diff=0.000103321
  0.338879	  0.339194	diff=0.000314866
 -0.206467	 -0.206121	diff=0.000345314
 -0.002600	 -0.002634	diff=3.41299e-05
 -0.055140	 -0.055116	diff=2.40471e-05
 -0.059944	 -0.059945	diff=1.05251e-06
 -0.378009	 -0.376692	diff=0.00131623
  0.003480	  0.003488	diff=8.17998e-06
  0.404421	  0.405056	diff=0.000634971
  0.100124	  0.100380	diff=0.000255873
  local_diff=0.0182595
# W_src{2}, [8 4]
  0.063318	  0.063487	diff=0.000168515
  0.173821	  0.174602	diff=0.000781222
  0.141952	  0.141855	diff=9.68613e-05
 -0.006953	 -0.006959	diff=6.32612e-06
 -0.172201	 -0.171488	diff=0.000713175
 -0.451258	 -0.450343	diff=0.000915228
 -2.564440	 -2.564990	diff=0.000549915
  0.798811	  0.800365	diff=0.00155373
 -0.050656	 -0.050750	diff=9.33388e-05
 -0.352668	 -0.352287	diff=0.000380259
  0.102880	  0.102824	diff=5.66145e-05
 -0.004325	 -0.004328	diff=2.6953e-06
 -0.363652	 -0.363368	diff=0.000284003
  0.063772	  0.063996	diff=0.000223589
 -1.581986	 -1.579315	diff=0.00267089
 -0.380220	 -0.379765	diff=0.000454894
 -0.703518	 -0.705575	diff=0.00205701
 -0.584458	 -0.581090	diff=0.00336776
  0.210563	  0.209987	diff=0.000576647
 -0.240307	 -0.240819	diff=0.000512021
 -0.113112	 -0.113934	diff=0.000822041
 -0.414963	 -0.414585	diff=0.000377339
 -2.042622	 -2.036283	diff=0.00633901
 -0.140749	 -0.140346	diff=0.000402918
  0.621290	  0.620476	diff=0.000813909
  0.639386	  0.640798	diff=0.00141222
 -0.404277	 -0.404830	diff=0.000552949
  0.205797	  0.205499	diff=0.000298267
  0.310502	  0.310062	diff=0.000440746
  0.502444	  0.502378	diff=6.56046e-05
  3.581260	  3.599124	diff=0.0178633
  0.142165	  0.142550	diff=0.00038472
  local_diff=0.0452378
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=2.14714e-07
-29.606912	-30.003694	diff=0.396782
 -0.133275	 -0.133114	diff=0.00016116
 -0.445404	 -0.445331	diff=7.35941e-05
 -0.000000	 -0.000000	diff=1.55232e-10
 -3.253594	 -3.277302	diff=0.0237075
  0.000004	  0.000004	diff=9.39245e-08
  0.000015	  0.000015	diff=5.49083e-08
  0.000617	  0.000622	diff=5.04575e-06
 27.481829	 27.175352	diff=0.306477
  0.126979	  0.127146	diff=0.000166677
 -2.163983	 -2.162475	diff=0.00150803
  0.000000	  0.000000	diff=3.53706e-10
-11.701605	-12.042780	diff=0.341175
  0.000001	  0.000001	diff=1.39344e-07
  0.000076	  0.000077	diff=9.79702e-07
 -0.000487	 -0.000484	diff=3.08253e-06
  0.543767	  0.541306	diff=0.00246065
  0.026318	  0.026313	diff=5.2227e-06
  1.682238	  1.683450	diff=0.00121195
 -0.000000	 -0.000000	diff=1.63272e-10
  3.003588	  2.991584	diff=0.0120048
 -0.000004	 -0.000004	diff=4.14423e-08
 -0.000041	 -0.000040	diff=2.7959e-07
 -0.000487	 -0.000484	diff=3.08654e-06
 11.595165	 11.548338	diff=0.0468267
  0.031681	  0.031704	diff=2.28135e-05
  1.683279	  1.684492	diff=0.00121349
 -0.000000	 -0.000000	diff=1.57619e-10
  3.236260	  3.222264	diff=0.0139957
 -0.000005	 -0.000005	diff=4.72471e-08
 -0.000051	 -0.000051	diff=4.41125e-07
 -0.000000	 -0.000000	diff=9.92359e-13
  0.035246	  0.035115	diff=0.000130846
  0.031894	  0.031957	diff=6.31285e-05
 -0.000002	 -0.000002	diff=3.33145e-10
  0.000000	  0.000000	diff=1.45213e-11
  0.035906	  0.035768	diff=0.000138101
  0.000000	  0.000000	diff=2.7796e-12
 -0.000047	 -0.000047	diff=3.74165e-07
  0.000093	  0.000093	diff=1.14507e-07
 -0.177655	 -0.177742	diff=8.68111e-05
  0.000006	  0.000006	diff=1.75611e-08
 -0.325147	 -0.325108	diff=3.93595e-05
  0.000000	  0.000000	diff=3.85526e-12
 -0.072507	 -0.072456	diff=5.14456e-05
  0.000001	  0.000001	diff=1.31686e-09
 -0.000000	 -0.000000	diff=1.06718e-12
  local_diff=1.14832
# W_tgt{2}, [8 4]
  1.027805	  1.027388	diff=0.000417553
  2.056299	  2.070618	diff=0.014319
  0.000066	  0.000066	diff=2.72499e-07
 -0.189975	 -0.189084	diff=0.000890206
  0.166263	  0.165631	diff=0.000631313
  0.037910	  0.038051	diff=0.000141117
 -0.011984	 -0.011893	diff=9.10122e-05
-20.795821	-20.618381	diff=0.177441
 -0.567012	 -0.567547	diff=0.000535363
  0.378179	  0.377430	diff=0.000748911
  0.031890	  0.031976	diff=8.62177e-05
  0.118672	  0.118576	diff=9.61573e-05
 -1.293311	 -1.300273	diff=0.00696206
  1.618284	  1.612390	diff=0.00589447
  0.573986	  0.574177	diff=0.0001905
 -1.285446	 -1.285687	diff=0.000240657
 -6.546063	 -6.549362	diff=0.00329876
 -0.220779	 -0.219662	diff=0.00111622
  1.416752	  1.424254	diff=0.00750166
  0.832676	  0.833848	diff=0.00117239
 -6.234002	 -6.250060	diff=0.0160584
  0.301439	  0.301555	diff=0.000116419
 -2.981867	 -2.974323	diff=0.00754351
 -0.719680	 -0.654143	diff=0.0655371
  5.770252	  5.776029	diff=0.0057773
  0.985410	  0.987417	diff=0.00200685
  0.446748	  0.449892	diff=0.0031439
 -1.989924	 -1.985309	diff=0.00461466
  3.663866	  3.661701	diff=0.00216506
 -1.073404	 -1.075621	diff=0.0022164
 -1.852681	 -1.843532	diff=0.0091489
-13.383236	-13.135998	diff=0.247238
  local_diff=0.587341
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=8.55881e-08
  0.000002	  0.000002	diff=1.12783e-07
 -0.000000	 -0.000000	diff=3.19954e-12
 -0.000000	 -0.000000	diff=1.10052e-12
  local_diff=1.98375e-07
# W_emb_tgt, [2 5]
 69.329519	 67.805384	diff=1.52414
 18.205118	 18.079464	diff=0.125654
  0.000000	  0.000000	diff=3.40986e-10
  0.000000	  0.000000	diff=1.13112e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 17.585257	 17.924772	diff=0.339515
 -9.562389	 -9.544795	diff=0.0175942
-13.582187	-14.118878	diff=0.53669
  7.408896	  7.295975	diff=0.112921
  local_diff=2.65651
# W_src_char{1}, [8 4]
 -0.023575	 -0.024851	diff=0.00127562
 -0.013093	 -0.013006	diff=8.72586e-05
 -0.000000	 -0.000000	diff=8.20893e-13
  0.504667	  0.501925	diff=0.00274144
 -0.538853	 -0.538238	diff=0.000615083
  0.636113	  0.632812	diff=0.00330092
 -0.001786	 -0.001787	diff=1.61953e-07
 -0.000527	 -0.000523	diff=3.61942e-06
  3.999655	  4.023721	diff=0.0240654
  0.798814	  0.797302	diff=0.00151148
  0.000007	  0.000007	diff=1.82933e-08
-33.125959	-30.769144	diff=2.35682
 30.595654	 32.995213	diff=2.39956
-42.350295	-38.749932	diff=3.60036
  0.110128	  0.109518	diff=0.000610795
  0.032351	  0.031959	diff=0.000392505
 -0.000108	 -0.000108	diff=1.66685e-11
 -0.000022	 -0.000021	diff=1.42301e-07
 -0.000000	 -0.000000	diff=7.75593e-12
  0.000834	  0.000828	diff=5.49008e-06
 -0.000888	 -0.000888	diff=1.6436e-09
  0.001050	  0.001043	diff=6.91363e-06
 -0.000003	 -0.000003	diff=3.84804e-12
 -0.000001	 -0.000001	diff=5.7026e-09
  0.000001	  0.000001	diff=1.39475e-12
  0.000000	  0.000000	diff=9.29166e-10
  0.000000	  0.000000	diff=1.13685e-12
 -0.000005	 -0.000005	diff=3.55691e-08
  0.000006	  0.000006	diff=2.24822e-11
 -0.000007	 -0.000007	diff=4.47993e-08
  0.000000	  0.000000	diff=5.46464e-12
  0.000000	  0.000000	diff=4.24084e-11
  local_diff=8.39136
# W_src_char{2}, [8 4]
  4.322075	  4.376186	diff=0.0541113
 -0.814293	 -0.812989	diff=0.00130409
  0.000216	  0.000216	diff=2.9572e-08
 -0.000235	 -0.000235	diff=5.22371e-08
  3.211557	  3.237895	diff=0.0263378
 -0.488880	 -0.488498	diff=0.000381836
 -2.208273	 -2.191946	diff=0.0163269
  8.776168	  8.936632	diff=0.160464
 -3.009919	 -2.984932	diff=0.0249871
  0.284032	  0.270849	diff=0.0131837
 -0.001239	 -0.001210	diff=2.94458e-05
  0.000007	  0.000007	diff=4.85843e-07
 -2.159339	 -2.147533	diff=0.0118067
  0.128350	  0.120779	diff=0.00757098
  1.460012	  1.467310	diff=0.00729797
 -6.055530	 -5.985172	diff=0.0703583
  2.995351	  3.014551	diff=0.0191997
 -1.157391	 -1.155301	diff=0.00208978
  1.152869	 -0.237646	diff=1.39052
 -0.161822	 -0.162296	diff=0.00047394
  2.682151	  2.693148	diff=0.0109975
 -0.811201	 -0.812704	diff=0.00150296
 -0.149943	 -0.150290	diff=0.000347786
  1.055356	  1.059626	diff=0.00427075
  0.846263	  0.847315	diff=0.00105162
 -0.307978	 -0.307829	diff=0.000148811
  5.533040	  4.479738	diff=1.0533
 -0.046061	 -0.046485	diff=0.000423857
  0.733028	  0.733807	diff=0.000778848
 -0.223370	 -0.225997	diff=0.00262652
 -0.039655	 -0.039680	diff=2.48126e-05
  0.280585	  0.280885	diff=0.000299993
  local_diff=2.88221
# W_src_char{3}, [8 4]
  0.781874	  0.544803	diff=0.237071
 -0.382579	 -0.492977	diff=0.110398
  0.370032	  0.369611	diff=0.000421312
 -0.024942	 -0.024983	diff=4.06268e-05
  1.034086	  0.842342	diff=0.191743
 -0.062754	 -0.062895	diff=0.000140748
-16.486760	-15.838315	diff=0.648445
 -0.204518	 -0.205117	diff=0.000599046
 -1.098824	 -1.349945	diff=0.251121
  0.306767	  0.228668	diff=0.078099
  0.321319	  0.321285	diff=3.37798e-05
 -0.000248	 -0.000257	diff=8.64844e-06
  2.842495	  2.820845	diff=0.0216502
 -0.028394	 -0.028393	diff=1.52446e-06
 -2.587003	 -2.573153	diff=0.0138505
  0.121543	  0.121547	diff=4.27208e-06
 -0.008540	 -0.008559	diff=1.91667e-05
 -0.249896	 -0.248606	diff=0.00128954
 -0.734655	 -0.735468	diff=0.000813525
  0.042114	  0.042009	diff=0.000105331
 -5.581278	 -5.878908	diff=0.29763
  0.049831	  0.049947	diff=0.00011661
 -6.916819	 -6.850988	diff=0.0658309
  0.340579	  0.339111	diff=0.00146712
  0.001531	  0.001530	diff=3.8726e-07
 -0.127981	 -0.127837	diff=0.00014395
  0.124598	  0.124587	diff=1.06248e-05
  0.000419	  0.000417	diff=1.59115e-06
  1.281475	  1.277866	diff=0.0036085
 -0.007249	 -0.007246	diff=2.33993e-06
  0.984630	  0.985841	diff=0.0012119
  0.047101	  0.047094	diff=7.17398e-06
  local_diff=1.92589
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=1.11293e-08
  0.000001	  0.000001	diff=8.29195e-09
  0.000533	  0.000544	diff=1.01132e-05
 -0.012079	 -0.012500	diff=0.000421239
-20.748497	-16.320752	diff=4.42775
 36.433487	 40.172969	diff=3.73948
  0.000000	 -0.000000	diff=4.66421e-12
  0.000000	  0.000000	diff=1.49751e-12
  local_diff=8.16766
# W_tgt_char{1}, [8 4]
  0.000001	  0.000001	diff=5.93572e-09
  0.000003	  0.000003	diff=3.06162e-08
 -2.643955	 -2.608636	diff=0.0353191
 -0.000001	 -0.000001	diff=1.32808e-08
 -0.000421	 -0.000425	diff=4.15535e-06
  0.000000	 -0.000000	diff=1.00836e-12
  0.000000	  0.000000	diff=1.28912e-14
  0.000000	  0.000000	diff=2.27111e-08
 -0.000000	 -0.000000	diff=1.26355e-10
 -0.000001	 -0.000001	diff=2.67122e-09
  0.766744	  0.769846	diff=0.00310181
  0.000000	  0.000000	diff=1.14545e-09
  0.000126	  0.000125	diff=3.64987e-07
 -0.000000	 -0.000000	diff=6.14166e-14
  0.000000	 -0.000000	diff=3.80759e-15
  0.000000	  0.000000	diff=2.04703e-08
  0.000000	  0.000000	diff=8.31121e-13
  0.000000	 -0.000000	diff=3.36934e-13
  0.000000	  0.000000	diff=1.15237e-33
  0.000000	 -0.000000	diff=3.08494e-17
  0.000000	 -0.000000	diff=5.42163e-31
  0.000000	  0.000000	diff=2.0688e-12
  0.000000	  0.000000	diff=5.926e-21
 -0.000000	 -0.000000	diff=3.05548e-10
  0.000000	 -0.000000	diff=1.46721e-15
  0.000000	 -0.000000	diff=2.47358e-19
  0.000000	 -0.000000	diff=3.46105e-15
  0.000000	 -0.000000	diff=7.1387e-21
  0.000000	 -0.000000	diff=2.21084e-19
  0.000000	  0.000000	diff=1.63649e-12
  0.000000	  0.000000	diff=2.0759e-26
  0.000000	  0.000000	diff=1.32922e-10
  local_diff=0.0384256
# W_tgt_char{2}, [8 4]
  0.010165	  0.010164	diff=1.02649e-07
  0.002555	  0.002555	diff=8.03407e-08
 -0.000359	 -0.000359	diff=1.43849e-08
 -0.000912	 -0.000912	diff=1.17127e-09
  0.011256	  0.011256	diff=9.38089e-09
  0.002686	  0.002686	diff=1.02754e-07
 -0.192307	 -0.192318	diff=1.14067e-05
  0.058636	  0.058622	diff=1.45012e-05
  0.000000	  0.000000	diff=8.16017e-13
 -0.000000	 -0.000000	diff=8.28877e-14
  0.000000	 -0.000000	diff=1.15701e-13
  0.000000	  0.000000	diff=2.25231e-14
  0.000000	  0.000000	diff=4.14213e-13
  0.000000	  0.000000	diff=6.43346e-13
 -0.000001	 -0.000001	diff=1.25848e-12
  0.000000	  0.000000	diff=7.51375e-13
  0.004186	  0.004181	diff=5.50966e-06
  0.016336	  0.016336	diff=2.65597e-07
 -0.000791	 -0.000791	diff=2.83757e-07
 -0.003906	 -0.003906	diff=3.58886e-08
  0.004618	  0.004615	diff=2.95712e-06
  0.011924	  0.011924	diff=9.33941e-09
  0.096729	  0.096720	diff=9.51319e-06
  0.094045	  0.094041	diff=3.6973e-06
  0.004366	  0.004362	diff=4.03945e-06
  0.014980	  0.014980	diff=5.24319e-07
 -0.000830	 -0.000830	diff=2.09376e-07
 -0.003606	 -0.003606	diff=7.28709e-08
  0.004683	  0.004681	diff=2.10517e-06
  0.010943	  0.010943	diff=4.34044e-07
  0.089602	  0.089548	diff=5.42075e-05
  0.092925	  0.092850	diff=7.55637e-05
  local_diff=0.000185647
# W_tgt_char{3}, [8 4]
 -0.002955	 -0.002978	diff=2.35272e-05
 -0.069739	 -0.069815	diff=7.62398e-05
  0.007573	  0.007573	diff=5.55482e-07
  0.024246	  0.024240	diff=6.39005e-06
  0.011641	  0.011633	diff=8.54216e-06
 -0.008457	 -0.008468	diff=1.1765e-05
  0.289008	  0.288981	diff=2.66471e-05
 -0.359968	 -0.359959	diff=8.6706e-06
 -0.001046	 -0.001063	diff=1.68713e-05
 -0.052241	 -0.052284	diff=4.27808e-05
  0.006741	  0.006740	diff=3.89444e-07
  0.016854	  0.016851	diff=3.17805e-06
  0.012239	  0.012233	diff=5.82908e-06
 -0.007305	 -0.007314	diff=9.2685e-06
  0.269148	  0.269123	diff=2.59023e-05
 -0.331584	 -0.331586	diff=2.93192e-06
 -0.032868	 -0.032885	diff=1.6878e-05
 -0.017407	 -0.017455	diff=4.8058e-05
  0.012329	  0.012328	diff=1.82781e-06
  0.011299	  0.011297	diff=1.91485e-06
 -0.019729	 -0.019734	diff=5.49023e-06
  0.030457	  0.030429	diff=2.84811e-05
  0.220487	  0.219605	diff=0.00088195
 -0.039332	 -0.039365	diff=3.32571e-05
 -0.020535	 -0.020548	diff=1.36008e-05
 -0.065984	 -0.066073	diff=8.84762e-05
  0.006574	  0.006574	diff=6.19588e-07
  0.030502	  0.030493	diff=9.41471e-06
 -0.013143	 -0.013149	diff=5.981e-06
  0.007247	  0.007240	diff=7.09613e-06
  0.104524	  0.104351	diff=0.000173167
 -0.058545	 -0.058521	diff=2.41385e-05
  local_diff=0.00160984
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=2.42794e-08
 -0.000000	 -0.000000	diff=2.17057e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.576292	 -0.574611	diff=0.0016809
-13.313056	-12.524363	diff=0.788694
  0.000000	  0.000000	diff=2.10469e-09
 -0.000000	 -0.000000	diff=2.67572e-10
 -0.000000	 -0.000000	diff=2.27752e-11
  0.000000	  0.000000	diff=5.43623e-13
  local_diff=0.790375
# W_h, [2 4]
  0.603586	  0.600405	diff=0.00318155
  0.993623	  0.993821	diff=0.000198542
 -2.573749	 -2.589262	diff=0.0155131
 -0.859339	 -0.858998	diff=0.00034027
-20.150531	-20.296556	diff=0.146025
  4.728161	  4.728434	diff=0.000272382
  1.350753	  1.353489	diff=0.00273567
  0.358089	  0.357958	diff=0.00013047
  local_diff=0.168397
# W_soft, [5 2]
 -9.831373	 -9.841868	diff=0.0104952
 -0.037506	 -0.037775	diff=0.000268984
 -7.423825	 -7.423851	diff=2.61601e-05
 -1.014743	 -1.018057	diff=0.00331411
 18.335154	 18.321551	diff=0.0136029
 -4.193480	 -4.206446	diff=0.0129656
 -0.585552	 -0.586476	diff=0.00092402
 -7.516441	 -7.517209	diff=0.000768216
 -2.553731	 -2.557016	diff=0.0032845
 14.882311	 14.867146	diff=0.0151652
  local_diff=0.0608149
# W_soft_char, [5 2]
  0.101632	  0.101565	diff=6.68623e-05
  0.300605	  0.300530	diff=7.43265e-05
  0.111750	  0.111683	diff=6.68224e-05
 -0.492766	 -0.492852	diff=8.57968e-05
 -0.020853	 -0.020926	diff=7.32239e-05
 -0.029314	 -0.029403	diff=8.8315e-05
  0.480581	  0.480460	diff=0.000121318
 -0.018095	 -0.018181	diff=8.60968e-05
 -0.518479	 -0.518632	diff=0.000153708
  0.085873	  0.085756	diff=0.000116542
  local_diff=0.000933011
# Num params=404, abs_diff=26.8835
Elapsed time is 9.076503 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1

! Exception: identifier=MATLAB:nonStrucReference, name=Attempt to reference field of non-structure array.
stack 1: file=/Users/lmthang/RA/nmt.matlab/code/layers/rnnLayerBackprop.m, name=rnnLayerBackprop, line=43
stack 2: file=/Users/lmthang/RA/nmt.matlab/code/lstmCostGrad.m, name=lstmCostGrad, line=120
stack 3: file=/Users/lmthang/RA/nmt.matlab/code/gradCheck.m, name=gradCheck, line=54
stack 4: file=/Users/lmthang/RA/nmt.matlab/code/trainLSTM.m, name=trainLSTM, line=221
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.691405	 -0.691743	diff=0.0003378
  0.109100	  0.109154	diff=5.31834e-05
 -0.076941	 -0.076942	diff=1.40492e-06
  0.019474	  0.019478	diff=3.93595e-06
 -0.916166	 -0.917428	diff=0.00126214
  0.062011	  0.062076	diff=6.49422e-05
  2.660040	  2.651242	diff=0.00879718
 -0.735503	 -0.734560	diff=0.000943264
  0.328296	  0.328502	diff=0.000206265
 -0.029671	 -0.029669	diff=2.29807e-06
  0.038573	  0.038580	diff=6.67913e-06
 -0.001899	 -0.001899	diff=6.12147e-08
  0.467264	  0.467744	diff=0.000479773
 -0.025137	 -0.025130	diff=7.2134e-06
 -1.246079	 -1.243676	diff=0.0024029
 -0.126765	 -0.126592	diff=0.000173079
  0.614897	  0.614944	diff=4.69447e-05
 -0.175302	 -0.175200	diff=0.000101611
  0.146887	  0.146921	diff=3.46871e-05
 -0.069144	 -0.069121	diff=2.32775e-05
  1.129491	  1.129716	diff=0.000224951
 -0.087604	 -0.087556	diff=4.78207e-05
 -1.076675	 -1.076778	diff=0.000103295
  0.338879	  0.339194	diff=0.000314866
 -0.206467	 -0.206122	diff=0.000345317
 -0.002600	 -0.002634	diff=3.41299e-05
 -0.055140	 -0.055116	diff=2.40473e-05
 -0.059944	 -0.059945	diff=1.05246e-06
 -0.378009	 -0.376693	diff=0.00131624
  0.003480	  0.003488	diff=8.18002e-06
  0.404421	  0.405056	diff=0.000634978
  0.100124	  0.100380	diff=0.000255874
  local_diff=0.0182594
# W_src{2}, [8 4]
  0.063318	  0.063486	diff=0.000168517
  0.173821	  0.174602	diff=0.000781223
  0.141952	  0.141855	diff=9.68607e-05
 -0.006953	 -0.006959	diff=6.32613e-06
 -0.172202	 -0.171488	diff=0.000713178
 -0.451258	 -0.450343	diff=0.000915228
 -2.564442	 -2.564992	diff=0.000549832
  0.798812	  0.800366	diff=0.00155373
 -0.050656	 -0.050750	diff=9.33388e-05
 -0.352668	 -0.352288	diff=0.000380261
  0.102880	  0.102824	diff=5.66141e-05
 -0.004325	 -0.004328	diff=2.6953e-06
 -0.363651	 -0.363367	diff=0.00028401
  0.063772	  0.063995	diff=0.00022359
 -1.581988	 -1.579317	diff=0.00267097
 -0.380220	 -0.379765	diff=0.000454894
 -0.703519	 -0.705576	diff=0.002057
 -0.584459	 -0.581091	diff=0.00336778
  0.210564	  0.209987	diff=0.000576646
 -0.240307	 -0.240819	diff=0.000512021
 -0.113112	 -0.113934	diff=0.000822041
 -0.414963	 -0.414586	diff=0.000377341
 -2.042624	 -2.036285	diff=0.00633907
 -0.140749	 -0.140346	diff=0.000402918
  0.621291	  0.620477	diff=0.000813906
  0.639386	  0.640798	diff=0.00141223
 -0.404277	 -0.404830	diff=0.000552948
  0.205797	  0.205499	diff=0.000298268
  0.310502	  0.310061	diff=0.000440742
  0.502444	  0.502379	diff=6.56028e-05
  3.581263	  3.599127	diff=0.0178636
  0.142166	  0.142550	diff=0.00038472
  local_diff=0.0452381
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=2.14711e-07
-29.606912	-30.003694	diff=0.396782
 -0.133275	 -0.133114	diff=0.00016116
 -0.445404	 -0.445331	diff=7.35941e-05
 -0.000000	 -0.000000	diff=1.55232e-10
 -3.253594	 -3.277302	diff=0.0237075
  0.000004	  0.000004	diff=9.39245e-08
  0.000015	  0.000015	diff=5.4914e-08
  0.000617	  0.000622	diff=5.04575e-06
 27.481829	 27.175352	diff=0.306477
  0.126979	  0.127146	diff=0.000166677
 -2.163983	 -2.162475	diff=0.00150803
  0.000000	  0.000000	diff=3.48022e-10
-11.701605	-12.042780	diff=0.341175
  0.000001	  0.000001	diff=1.39347e-07
  0.000076	  0.000077	diff=9.79696e-07
 -0.000487	 -0.000484	diff=3.08253e-06
  0.543767	  0.541306	diff=0.00246065
  0.026318	  0.026313	diff=5.22271e-06
  1.682238	  1.683450	diff=0.00121195
 -0.000000	 -0.000000	diff=1.66115e-10
  3.003588	  2.991584	diff=0.0120048
 -0.000004	 -0.000004	diff=4.14366e-08
 -0.000041	 -0.000040	diff=2.79596e-07
 -0.000487	 -0.000484	diff=3.08654e-06
 11.595165	 11.548338	diff=0.0468267
  0.031681	  0.031704	diff=2.28135e-05
  1.683279	  1.684492	diff=0.00121349
 -0.000000	 -0.000000	diff=1.57619e-10
  3.236260	  3.222264	diff=0.0139957
 -0.000005	 -0.000005	diff=4.72442e-08
 -0.000051	 -0.000051	diff=4.41125e-07
 -0.000000	 -0.000000	diff=1.84981e-12
  0.035246	  0.035115	diff=0.000130846
  0.031894	  0.031957	diff=6.31285e-05
 -0.000002	 -0.000002	diff=3.35987e-10
  0.000000	  0.000000	diff=8.83698e-12
  0.035906	  0.035768	diff=0.000138101
  0.000000	  0.000000	diff=2.90474e-12
 -0.000047	 -0.000047	diff=3.74159e-07
  0.000093	  0.000093	diff=1.14507e-07
 -0.177655	 -0.177742	diff=8.68111e-05
  0.000006	  0.000006	diff=1.75611e-08
 -0.325147	 -0.325108	diff=3.93595e-05
  0.000000	  0.000000	diff=9.5396e-12
 -0.072507	 -0.072456	diff=5.14455e-05
  0.000001	  0.000001	diff=1.32254e-09
 -0.000000	 -0.000000	diff=1.77499e-12
  local_diff=1.14832
# W_tgt{2}, [8 4]
  1.027805	  1.027388	diff=0.000417553
  2.056299	  2.070618	diff=0.014319
  0.000066	  0.000066	diff=2.72505e-07
 -0.189975	 -0.189084	diff=0.000890206
  0.166263	  0.165631	diff=0.000631313
  0.037910	  0.038051	diff=0.000141117
 -0.011984	 -0.011893	diff=9.10122e-05
-20.795821	-20.618381	diff=0.177441
 -0.567012	 -0.567547	diff=0.000535363
  0.378179	  0.377430	diff=0.000748911
  0.031890	  0.031976	diff=8.62177e-05
  0.118672	  0.118576	diff=9.61573e-05
 -1.293311	 -1.300273	diff=0.00696206
  1.618284	  1.612390	diff=0.00589447
  0.573986	  0.574177	diff=0.0001905
 -1.285446	 -1.285687	diff=0.000240657
 -6.546063	 -6.549362	diff=0.00329876
 -0.220779	 -0.219662	diff=0.00111622
  1.416752	  1.424254	diff=0.00750166
  0.832676	  0.833849	diff=0.00117239
 -6.234002	 -6.250060	diff=0.0160584
  0.301439	  0.301555	diff=0.000116419
 -2.981867	 -2.974323	diff=0.00754351
 -0.719680	 -0.654142	diff=0.0655372
  5.770252	  5.776030	diff=0.00577731
  0.985411	  0.987417	diff=0.00200685
  0.446748	  0.449892	diff=0.0031439
 -1.989924	 -1.985310	diff=0.00461466
  3.663866	  3.661701	diff=0.00216506
 -1.073404	 -1.075621	diff=0.0022164
 -1.852681	 -1.843532	diff=0.0091489
-13.383240	-13.136002	diff=0.247238
  local_diff=0.587341
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=8.55881e-08
  0.000002	  0.000002	diff=1.12783e-07
 -0.000000	 -0.000000	diff=3.57373e-13
 -0.000000	 -0.000000	diff=6.78487e-12
  local_diff=1.98378e-07
# W_emb_tgt, [2 5]
 69.329519	 67.805384	diff=1.52414
 18.205118	 18.079464	diff=0.125654
  0.000000	  0.000000	diff=3.40986e-10
  0.000000	  0.000000	diff=1.41533e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 17.585257	 17.924772	diff=0.339515
 -9.562389	 -9.544795	diff=0.0175942
-13.582187	-14.118878	diff=0.53669
  7.408896	  7.295975	diff=0.112921
  local_diff=2.65651
# W_src_char{1}, [8 4]
 -0.023575	 -0.024851	diff=0.00127555
 -0.013093	 -0.013006	diff=8.72674e-05
 -0.000000	 -0.000000	diff=4.79202e-12
  0.504667	  0.501925	diff=0.00274178
 -0.538854	 -0.538239	diff=0.000615086
  0.636114	  0.632812	diff=0.00330134
 -0.001786	 -0.001787	diff=1.61954e-07
 -0.000527	 -0.000523	diff=3.61976e-06
  3.999658	  4.023724	diff=0.0240656
  0.798814	  0.797302	diff=0.00151201
  0.000007	  0.000007	diff=1.82863e-08
-33.125992	-30.769144	diff=2.35685
 30.595667	 32.995236	diff=2.39957
-42.350341	-38.749932	diff=3.60041
  0.110128	  0.109518	diff=0.000610795
  0.032351	  0.031959	diff=0.000392526
 -0.000108	 -0.000108	diff=3.94147e-12
 -0.000022	 -0.000021	diff=1.42307e-07
 -0.000000	 -0.000000	diff=4.91388e-12
  0.000834	  0.000828	diff=5.49066e-06
 -0.000888	 -0.000888	diff=1.64119e-09
  0.001050	  0.001043	diff=6.91435e-06
 -0.000003	 -0.000003	diff=5.82782e-12
 -0.000001	 -0.000001	diff=5.7026e-09
  0.000001	  0.000001	diff=3.7677e-12
  0.000000	  0.000000	diff=9.23481e-10
  0.000000	  0.000000	diff=1.13686e-12
 -0.000005	 -0.000005	diff=3.55748e-08
  0.000006	  0.000006	diff=3.00097e-11
 -0.000007	 -0.000007	diff=4.47965e-08
  0.000000	  0.000000	diff=2.32536e-13
  0.000000	  0.000000	diff=4.24084e-11
  local_diff=8.39144
# W_src_char{2}, [8 4]
  4.322078	  4.376189	diff=0.0541115
 -0.814294	 -0.812989	diff=0.00130409
  0.000216	  0.000216	diff=2.95627e-08
 -0.000235	 -0.000235	diff=5.22317e-08
  3.211559	  3.237897	diff=0.0263379
 -0.488880	 -0.488498	diff=0.000381838
 -2.208275	 -2.191948	diff=0.0163269
  8.776173	  8.936638	diff=0.160464
 -3.009921	 -2.984934	diff=0.0249872
  0.284033	  0.270849	diff=0.0131837
 -0.001239	 -0.001210	diff=2.94458e-05
  0.000007	  0.000007	diff=4.85839e-07
 -2.159341	 -2.147534	diff=0.0118068
  0.128350	  0.120779	diff=0.00757097
  1.460013	  1.467311	diff=0.007298
 -6.055535	 -5.985176	diff=0.0703587
  2.995353	  3.014552	diff=0.0191997
 -1.157392	 -1.155302	diff=0.0020898
  1.152872	 -0.237643	diff=1.39051
 -0.161822	 -0.162296	diff=0.00047394
  2.682152	  2.693150	diff=0.0109976
 -0.811202	 -0.812705	diff=0.00150295
 -0.149943	 -0.150290	diff=0.000347786
  1.055356	  1.059627	diff=0.00427077
  0.846264	  0.847315	diff=0.00105163
 -0.307978	 -0.307829	diff=0.000148813
  5.533040	  4.479738	diff=1.0533
 -0.046061	 -0.046485	diff=0.000423857
  0.733029	  0.733808	diff=0.000778852
 -0.223370	 -0.225997	diff=0.00262652
 -0.039655	 -0.039680	diff=2.48126e-05
  0.280585	  0.280885	diff=0.000299995
  local_diff=2.88222
# W_src_char{3}, [8 4]
  0.781873	  0.544803	diff=0.237071
 -0.382579	 -0.492977	diff=0.110398
  0.370032	  0.369611	diff=0.000421311
 -0.024942	 -0.024983	diff=4.06268e-05
  1.034087	  0.842344	diff=0.191743
 -0.062754	 -0.062895	diff=0.000140748
-16.486775	-15.838326	diff=0.648449
 -0.204518	 -0.205117	diff=0.000599047
 -1.098824	 -1.349945	diff=0.251121
  0.306767	  0.228668	diff=0.078099
  0.321319	  0.321285	diff=3.37789e-05
 -0.000248	 -0.000257	diff=8.64844e-06
  2.842496	  2.820846	diff=0.0216502
 -0.028394	 -0.028393	diff=1.52442e-06
 -2.587005	 -2.573155	diff=0.0138506
  0.121543	  0.121547	diff=4.27199e-06
 -0.008540	 -0.008559	diff=1.91667e-05
 -0.249897	 -0.248607	diff=0.00128956
 -0.734655	 -0.735469	diff=0.00081352
  0.042114	  0.042009	diff=0.000105331
 -5.581284	 -5.878913	diff=0.297629
  0.049830	  0.049947	diff=0.00011661
 -6.916824	 -6.850992	diff=0.0658314
  0.340579	  0.339112	diff=0.00146712
  0.001531	  0.001530	diff=3.87264e-07
 -0.127981	 -0.127837	diff=0.00014395
  0.124598	  0.124587	diff=1.06247e-05
  0.000419	  0.000417	diff=1.59115e-06
  1.281475	  1.277867	diff=0.00360848
 -0.007249	 -0.007246	diff=2.33992e-06
  0.984630	  0.985842	diff=0.00121191
  0.047101	  0.047094	diff=7.174e-06
  local_diff=1.92589
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=1.11258e-08
  0.000001	  0.000001	diff=8.29707e-09
  0.000533	  0.000544	diff=1.01145e-05
 -0.012079	 -0.012500	diff=0.000421263
-20.748515	-16.320864	diff=4.42765
 36.433502	 40.172890	diff=3.73939
  0.000000	 -0.000000	diff=4.66421e-12
  0.000000	  0.000000	diff=4.18683e-12
  local_diff=8.16747
# W_tgt_char{1}, [8 4]
  0.000006	  0.000006	diff=5.93629e-08
  0.000031	  0.000031	diff=3.06162e-07
-26.439554	-26.086363	diff=0.353191
 -0.000014	 -0.000013	diff=1.32825e-07
 -0.004205	 -0.004247	diff=4.15535e-05
  0.000000	 -0.000000	diff=1.00836e-11
  0.000000	  0.000000	diff=1.28912e-13
  0.000005	  0.000005	diff=2.271e-07
 -0.000002	 -0.000002	diff=1.2806e-09
 -0.000009	 -0.000009	diff=2.67406e-08
  7.667441	  7.698459	diff=0.0310181
  0.000004	  0.000004	diff=1.14659e-08
  0.001257	  0.001253	diff=3.64988e-06
 -0.000000	 -0.000000	diff=6.14166e-13
  0.000000	 -0.000000	diff=3.80759e-14
  0.000004	  0.000004	diff=2.04703e-07
  0.000000	  0.000000	diff=8.74182e-12
  0.000000	 -0.000000	diff=3.36934e-12
  0.000000	  0.000000	diff=1.15237e-32
  0.000000	 -0.000000	diff=3.08494e-16
  0.000000	 -0.000000	diff=5.42163e-30
  0.000000	  0.000000	diff=1.50036e-11
  0.000000	  0.000000	diff=5.926e-20
 -0.000001	 -0.000001	diff=3.04412e-09
  0.000000	 -0.000000	diff=1.46721e-14
  0.000000	 -0.000000	diff=2.47358e-18
  0.000000	 -0.000000	diff=3.46105e-14
  0.000000	 -0.000000	diff=7.1387e-20
  0.000000	 -0.000000	diff=2.21084e-18
  0.000000	  0.000000	diff=1.06805e-11
  0.000000	  0.000000	diff=2.0759e-25
  0.000000	  0.000000	diff=1.31785e-09
  local_diff=0.384256
# W_tgt_char{2}, [8 4]
  0.101646	  0.101645	diff=1.02649e-06
  0.025548	  0.025548	diff=8.03407e-07
 -0.003586	 -0.003586	diff=1.43871e-07
 -0.009115	 -0.009115	diff=1.16956e-08
  0.112565	  0.112565	diff=9.37975e-08
  0.026860	  0.026861	diff=1.02752e-06
 -1.923066	 -1.923180	diff=0.000114067
  0.586360	  0.586215	diff=0.000145012
  0.000000	  0.000000	diff=2.02615e-11
 -0.000000	 -0.000000	diff=6.51322e-12
  0.000000	 -0.000000	diff=1.15701e-12
  0.000000	  0.000000	diff=2.25231e-13
  0.000000	  0.000000	diff=9.82647e-12
  0.000000	  0.000000	diff=7.49123e-13
 -0.000005	 -0.000005	diff=6.90045e-12
  0.000000	  0.000000	diff=1.31981e-11
  0.041863	  0.041808	diff=5.50966e-05
  0.163362	  0.163359	diff=2.65596e-06
 -0.007909	 -0.007912	diff=2.83757e-06
 -0.039062	 -0.039061	diff=3.58869e-07
  0.046180	  0.046151	diff=2.95712e-05
  0.119242	  0.119242	diff=9.33998e-08
  0.967295	  0.967199	diff=9.51319e-05
  0.940450	  0.940413	diff=3.69729e-05
  0.043663	  0.043623	diff=4.03945e-05
  0.149797	  0.149802	diff=5.2432e-06
 -0.008299	 -0.008301	diff=2.09378e-06
 -0.036062	 -0.036062	diff=7.28704e-07
  0.046829	  0.046808	diff=2.10518e-05
  0.109429	  0.109434	diff=4.34043e-06
  0.896022	  0.895480	diff=0.000542075
  0.929252	  0.928496	diff=0.000755637
  local_diff=0.00185647
# W_tgt_char{3}, [8 4]
 -0.029549	 -0.029784	diff=0.000235272
 -0.697391	 -0.698153	diff=0.000762398
  0.075732	  0.075726	diff=5.55482e-06
  0.242463	  0.242399	diff=6.39005e-05
  0.116411	  0.116325	diff=8.54216e-05
 -0.084565	 -0.084683	diff=0.00011765
  2.890080	  2.889813	diff=0.000266471
 -3.599676	 -3.599589	diff=8.6706e-05
 -0.010463	 -0.010632	diff=0.000168713
 -0.522411	 -0.522839	diff=0.000427808
  0.067409	  0.067405	diff=3.89446e-06
  0.168545	  0.168513	diff=3.17806e-05
  0.122388	  0.122330	diff=5.82908e-05
 -0.073048	 -0.073141	diff=9.2685e-05
  2.691484	  2.691225	diff=0.000259023
 -3.315836	 -3.315865	diff=2.93192e-05
 -0.328685	 -0.328854	diff=0.00016878
 -0.174071	 -0.174552	diff=0.00048058
  0.123294	  0.123276	diff=1.82781e-05
  0.112991	  0.112972	diff=1.91485e-05
 -0.197288	 -0.197343	diff=5.49023e-05
  0.304571	  0.304286	diff=0.000284811
  2.204866	  2.196046	diff=0.0088195
 -0.393320	 -0.393653	diff=0.000332571
 -0.205348	 -0.205484	diff=0.000136008
 -0.659843	 -0.660728	diff=0.000884762
  0.065743	  0.065736	diff=6.19586e-06
  0.305024	  0.304929	diff=9.41471e-05
 -0.131427	 -0.131487	diff=5.98101e-05
  0.072471	  0.072400	diff=7.09613e-05
  1.045238	  1.043506	diff=0.00173167
 -0.585451	 -0.585210	diff=0.000241385
  local_diff=0.0160984
# W_emb_tgt_char, [2 5]
  0.000005	  0.000005	diff=2.42794e-07
 -0.000005	 -0.000005	diff=2.17074e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -5.762916	 -5.746107	diff=0.016809
-133.130563	-125.243626	diff=7.88694
  0.000000	  0.000000	diff=2.10185e-08
 -0.000000	 -0.000000	diff=2.66435e-09
 -0.000000	 -0.000000	diff=2.44805e-10
  0.000000	  0.000000	diff=2.48109e-13
  local_diff=7.90375
# W_h, [2 4]
  0.603586	  0.600405	diff=0.00318155
  0.993623	  0.993822	diff=0.000198545
 -2.573749	 -2.589262	diff=0.0155131
 -0.859339	 -0.858999	diff=0.000340274
-20.150531	-20.296556	diff=0.146025
  4.728162	  4.728434	diff=0.000272388
  1.350753	  1.353489	diff=0.00273567
  0.358089	  0.357958	diff=0.00013047
  local_diff=0.168397
# W_soft, [5 2]
 -9.831373	 -9.841868	diff=0.0104952
 -0.037506	 -0.037775	diff=0.000268984
 -7.423825	 -7.423851	diff=2.61601e-05
 -1.014743	 -1.018057	diff=0.00331411
 18.335154	 18.321551	diff=0.0136029
 -4.193480	 -4.206446	diff=0.0129656
 -0.585552	 -0.586476	diff=0.00092402
 -7.516441	 -7.517209	diff=0.000768216
 -2.553731	 -2.557016	diff=0.0032845
 14.882311	 14.867146	diff=0.0151652
  local_diff=0.0608149
# W_soft_char, [5 2]
  1.016318	  1.015649	diff=0.000668623
  3.006048	  3.005305	diff=0.000743265
  1.117500	  1.116832	diff=0.000668224
 -4.927665	 -4.928523	diff=0.000857968
 -0.208530	 -0.209262	diff=0.000732239
 -0.293145	 -0.294028	diff=0.00088315
  4.805814	  4.804601	diff=0.00121318
 -0.180949	 -0.181810	diff=0.000860968
 -5.184788	 -5.186325	diff=0.00153708
  0.858727	  0.857562	diff=0.00116542
  local_diff=0.00933011
# Num params=404, abs_diff=34.3672
Elapsed time is 9.123026 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  2.282348	  2.282784	diff=0.000435698
  0.290734	  0.290808	diff=7.45305e-05
  0.252202	  0.252185	diff=1.71744e-05
  0.021109	  0.021100	diff=9.25654e-06
  3.117029	  3.118790	diff=0.00176078
  0.330954	  0.331009	diff=5.50648e-05
-10.785561	-10.766884	diff=0.0186773
  2.926816	  2.935376	diff=0.00856014
 -0.621897	 -0.622251	diff=0.000354108
 -0.111255	 -0.111262	diff=6.94166e-06
 -0.009014	 -0.009020	diff=6.50628e-06
 -0.002013	 -0.002013	diff=1.99785e-07
 -0.646462	 -0.647145	diff=0.000683833
 -0.136666	 -0.136680	diff=1.39764e-05
  3.459214	  3.453236	diff=0.00597832
 -1.302266	 -1.302376	diff=0.000109659
 -1.147685	 -1.148735	diff=0.00105035
 -0.028990	 -0.028891	diff=9.9608e-05
 -0.325039	 -0.325152	diff=0.000113372
 -0.068731	 -0.068814	diff=8.38782e-05
 -2.228680	 -2.233272	diff=0.00459205
  0.008028	  0.008084	diff=5.6206e-05
  3.373255	  3.375924	diff=0.00266886
  0.130728	  0.130688	diff=4.03349e-05
  0.512818	  0.512244	diff=0.000574472
 -0.028442	 -0.028480	diff=3.86242e-05
  0.165476	  0.165410	diff=6.61537e-05
 -0.050053	 -0.050086	diff=3.30607e-05
  0.966674	  0.963970	diff=0.00270307
 -0.008592	 -0.008587	diff=5.15537e-06
 -2.021516	 -2.023330	diff=0.00181396
  0.111353	  0.111246	diff=0.000106691
  local_diff=0.0507893
# W_src{2}, [8 4]
  0.112300	  0.113693	diff=0.00139318
  1.028006	  1.023632	diff=0.00437392
 -0.793570	 -0.792933	diff=0.000637027
  0.068707	  0.068781	diff=7.45659e-05
 -0.482233	 -0.479602	diff=0.00263156
  2.657073	  2.654131	diff=0.00294231
  8.816672	  8.823565	diff=0.00689345
 -2.622152	 -2.621292	diff=0.000859371
 -1.071917	 -1.071608	diff=0.000309218
  2.547979	  2.545870	diff=0.00210921
 -0.607271	 -0.606913	diff=0.000357902
  0.052632	  0.052675	diff=4.31246e-05
 -4.672626	 -4.673431	diff=0.000805162
  4.324680	  4.323266	diff=0.00141462
  8.999625	  9.009680	diff=0.0100547
  1.411855	  1.411978	diff=0.000123404
  4.263532	  4.254898	diff=0.00863412
  2.084389	  2.069572	diff=0.0148171
 -1.218735	 -1.216381	diff=0.00235465
  0.883170	  0.885143	diff=0.00197236
 -3.904770	 -3.907746	diff=0.00297639
  2.901305	  2.899675	diff=0.00163006
  6.915135	  6.918353	diff=0.00321858
  0.246098	  0.244923	diff=0.0011753
 -3.297617	 -3.300580	diff=0.00296284
 -3.557875	 -3.569310	diff=0.0114348
  2.035705	  2.037895	diff=0.0021892
 -0.700067	 -0.699011	diff=0.00105506
  6.491787	  6.488928	diff=0.00285925
 -5.555871	 -5.559333	diff=0.00346218
-12.805557	-12.793729	diff=0.0118277
 -0.459764	 -0.460988	diff=0.00122453
  local_diff=0.108817
# W_tgt{1}, [8 6]
 -0.001843	 -0.001845	diff=2.39586e-06
-32.848209	-34.972351	diff=2.12414
 -0.424587	 -0.512170	diff=0.0875825
  0.085400	  0.085375	diff=2.47314e-05
  0.000000	  0.000000	diff=1.1099e-10
  0.380857	  0.377105	diff=0.00375232
 -0.000035	 -0.000035	diff=8.27832e-08
 -0.031772	 -0.031760	diff=1.1247e-05
 -0.008903	 -0.008959	diff=5.63014e-05
 16.751521	 14.997132	diff=1.75439
  0.571469	  0.489205	diff=0.0822636
  0.415163	  0.414585	diff=0.000578102
  0.000000	  0.000000	diff=3.45255e-10
  1.625844	  1.577801	diff=0.0480428
 -0.000174	 -0.000172	diff=2.19035e-06
 -0.115681	 -0.115574	diff=0.000107077
  0.006480	  0.006450	diff=2.93894e-05
-13.257228	-13.435627	diff=0.178399
  0.212025	  0.207727	diff=0.00429854
 -0.298203	 -0.298509	diff=0.000305051
 -0.000000	 -0.000000	diff=2.56148e-10
 -3.144032	 -3.139050	diff=0.00498119
  0.000122	  0.000123	diff=1.12256e-06
  0.001737	  0.001737	diff=3.7402e-08
  0.004008	  0.003997	diff=1.12699e-05
  6.701365	  6.636528	diff=0.0648365
  0.134375	  0.128483	diff=0.00589198
 -0.184831	 -0.184948	diff=0.000116765
 -0.000000	 -0.000000	diff=1.85861e-11
 -0.799404	 -0.801029	diff=0.00162467
  0.000076	  0.000076	diff=4.3168e-07
  0.023626	  0.023633	diff=7.38192e-06
  0.000000	  0.000000	diff=2.91325e-15
 12.230172	 12.053547	diff=0.176625
  0.169893	  0.162510	diff=0.00738225
  0.000000	  0.000000	diff=6.63845e-13
  0.000000	  0.000000	diff=1.20048e-11
  2.202787	  2.204667	diff=0.00187964
  0.000000	  0.000000	diff=2.04915e-13
  0.000000	  0.000000	diff=6.41205e-13
 -0.000001	 -0.000001	diff=6.60225e-13
  0.202757	  0.203370	diff=0.000612997
  0.001518	  0.001518	diff=1.11599e-07
  0.000040	  0.000040	diff=1.6398e-11
  0.000000	  0.000000	diff=8.18199e-12
  0.001112	  0.001112	diff=2.69263e-08
 -0.000000	 -0.000000	diff=7.59345e-12
 -0.000000	 -0.000000	diff=5.16753e-13
  local_diff=4.54796
# W_tgt{2}, [8 4]
 -0.143717	 -0.143642	diff=7.43886e-05
 63.616988	 58.996578	diff=4.62041
  0.000400	  0.000399	diff=1.52205e-06
  0.713346	  0.711666	diff=0.00168015
  1.164752	  1.159400	diff=0.00535234
  1.042472	  1.045011	diff=0.00253911
  0.006522	  0.006463	diff=5.91649e-05
218.810949	180.537426	diff=38.2735
 -0.336352	 -0.336153	diff=0.000199224
 -0.936596	 -0.939007	diff=0.00241121
 -0.056572	 -0.056596	diff=2.37882e-05
 -0.091789	 -0.091860	diff=7.18155e-05
 -4.226770	 -4.229837	diff=0.00306705
  0.177503	  0.177648	diff=0.000144301
 -0.505039	 -0.502953	diff=0.00208682
 -1.749269	 -1.752696	diff=0.00342694
 -2.012260	 -2.007589	diff=0.00467025
  1.029044	  1.027529	diff=0.00151452
  1.005965	  1.004651	diff=0.00131386
 -0.362164	 -0.363942	diff=0.0017775
 -4.588276	 -4.586650	diff=0.00162588
  0.091953	  0.091996	diff=4.31153e-05
 -1.842199	 -1.841456	diff=0.000743552
  5.453352	  5.386666	diff=0.0666862
 -1.276117	 -1.277026	diff=0.000909065
 -0.035653	 -0.039123	diff=0.00346996
 -0.589017	 -0.588786	diff=0.000230796
  0.619514	  0.613430	diff=0.00608473
 -0.545593	 -0.545963	diff=0.000370702
  0.406098	  0.406211	diff=0.000113549
  0.649092	  0.647056	diff=0.00203635
 -4.143846	 -4.462329	diff=0.318483
  local_diff=43.3251
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000001	diff=6.23753e-08
  0.000002	  0.000002	diff=8.25552e-08
  0.000000	  0.000000	diff=1.38202e-12
  0.000000	  0.000000	diff=7.99821e-13
  local_diff=1.44933e-07
# W_emb_tgt, [2 5]
 79.236261	 70.384523	diff=8.85174
 19.774987	 18.960753	diff=0.814235
 -0.000000	 -0.000000	diff=5.7258e-09
  0.000000	  0.000000	diff=1.15695e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.396031	  0.319280	diff=0.0767504
  0.834251	  0.782373	diff=0.0518777
 23.198234	 23.303113	diff=0.104879
  5.575172	  5.532335	diff=0.0428368
  local_diff=9.94232
# W_src_char{1}, [8 4]
 -0.270936	 -0.140754	diff=0.130182
  0.014453	 -0.000000	diff=0.0144528
  0.000000	  0.000000	diff=7.16015e-08
 -0.556323	 -0.000000	diff=0.556323
  0.379090	  0.015270	diff=0.36382
 -0.699715	  0.000111	diff=0.699826
  0.001254	  0.000051	diff=0.00120288
  0.000582	 -0.000000	diff=0.000581571
 -2.877185	 -0.177011	diff=2.70017
 -0.879911	  0.000000	diff=0.879911
 -0.000005	 -0.000000	diff=4.37668e-06
 39.369762	 -0.000001	diff=39.3698
-17.990386	 -0.936089	diff=17.0543
 51.215036	  0.000048	diff=51.215
 -0.077241	 -0.003107	diff=0.0741342
 -0.035706	  0.000000	diff=0.0357062
  0.000076	  0.000003	diff=7.25953e-05
  0.000024	 -0.000000	diff=2.38426e-05
  0.000000	  0.000000	diff=1.14394e-10
 -0.000920	  0.000000	diff=0.000920119
  0.000623	  0.000025	diff=0.000597971
 -0.001159	  0.000000	diff=0.00115878
  0.000002	  0.000000	diff=1.98477e-06
  0.000001	 -0.000000	diff=9.55725e-07
 -0.000000	 -0.000000	diff=4.7041e-07
 -0.000000	 -0.000000	diff=1.54512e-07
  0.000000	 -0.000000	diff=3.22533e-14
  0.000006	 -0.000000	diff=5.96233e-06
 -0.000004	 -0.000000	diff=3.87481e-06
  0.000007	 -0.000000	diff=7.50887e-06
 -0.000000	 -0.000000	diff=1.28703e-08
 -0.000000	  0.000000	diff=6.19309e-09
  local_diff=113.098
# W_src_char{2}, [8 4]
 -7.378050	 -7.510004	diff=0.131954
  0.539902	  0.536940	diff=0.00296248
 -0.000370	 -0.000370	diff=5.08337e-08
  0.000155	  0.000155	diff=3.46695e-08
 -5.517922	 -5.575262	diff=0.0573398
  0.448216	  0.447120	diff=0.0010956
  3.800051	  3.761595	diff=0.0384552
 -5.540560	 -5.901892	diff=0.361332
  4.888731	  4.810097	diff=0.0786336
 -0.398200	 -0.360479	diff=0.0377209
 -0.039914	 -0.042903	diff=0.00298908
  0.052197	  0.052248	diff=5.16964e-05
  3.791309	  3.763800	diff=0.0275086
 -0.187779	 -0.165408	diff=0.0223715
 -2.499508	 -2.516471	diff=0.0169623
  4.113394	  3.952885	diff=0.160508
 -5.457483	 -5.494090	diff=0.0366077
  4.570077	  4.565461	diff=0.00461539
-31.414776	-27.952892	diff=3.46188
  0.856064	  0.855475	diff=0.000588969
 -4.722531	 -4.739451	diff=0.0169198
  3.656698	  3.650555	diff=0.00614314
  0.258505	  0.259111	diff=0.000606426
 -4.261225	 -4.275258	diff=0.0140333
 -1.249073	 -1.251254	diff=0.00218082
  1.216227	  1.215902	diff=0.000325673
 14.448578	 17.950990	diff=3.50241
  0.027482	  0.026991	diff=0.000491388
 -1.156848	 -1.157521	diff=0.000672719
  0.546965	  0.546098	diff=0.000866416
  0.068371	  0.068414	diff=4.32754e-05
 -1.137493	 -1.138481	diff=0.000988099
  local_diff=7.98926
# W_src_char{3}, [8 4]
 -0.220958	  0.505397	diff=0.726355
 -4.629481	 -4.303472	diff=0.326009
 -1.387916	 -1.387758	diff=0.000157687
 -0.101435	 -0.101442	diff=7.09632e-06
 -2.253762	 -1.779618	diff=0.474144
 -0.532882	 -0.532034	diff=0.000847734
 26.648582	 25.143809	diff=1.50477
  0.240815	  0.242261	diff=0.00144524
  0.266015	  0.984957	diff=0.718942
 -2.531946	 -2.248579	diff=0.283366
 -0.603432	 -0.603141	diff=0.000291295
 -0.131983	 -0.131933	diff=4.95617e-05
-14.850412	-14.770455	diff=0.0799574
 -0.333022	 -0.332812	diff=0.000209932
  3.069475	  3.028031	diff=0.0414438
  0.384106	  0.385281	diff=0.0011744
 -0.214871	 -0.215289	diff=0.000417879
  7.127025	  7.113812	diff=0.0132124
  2.487773	  2.487838	diff=6.45428e-05
  0.250266	  0.249738	diff=0.000527472
 23.197436	 23.961457	diff=0.76402
  0.831828	  0.832945	diff=0.00111628
 17.188398	 17.068868	diff=0.11953
 -0.413905	 -0.411197	diff=0.00270779
  0.030552	  0.030544	diff=8.27847e-06
 -1.068720	 -1.069305	diff=0.000584451
 -0.271198	 -0.271126	diff=7.19911e-05
 -0.033679	 -0.033689	diff=9.68049e-06
 -1.514653	 -1.496239	diff=0.0184144
 -0.116764	 -0.116742	diff=2.18536e-05
 -2.330570	 -2.331994	diff=0.00142392
  0.116196	  0.116247	diff=5.12164e-05
  local_diff=5.08136
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=4.36974e-08
 -0.000003	 -0.000003	diff=3.17923e-08
 -0.005479	 -0.002563	diff=0.00291635
  0.092772	  0.044491	diff=0.0482809
-46.409105	  4.739648	diff=51.1488
-82.779616	  3.347319	diff=86.1269
 -0.000000	 -0.000000	diff=5.2482e-13
  0.000000	  0.000000	diff=3.53447e-12
  local_diff=137.327
# W_tgt_char{1}, [8 4]
  0.000001	  0.000001	diff=7.212e-09
  0.000004	  0.000004	diff=4.30176e-08
 -2.981416	 -3.093356	diff=0.11194
 -0.000001	 -0.000001	diff=6.06711e-09
 -0.000449	 -0.000454	diff=4.44219e-06
  0.000000	  0.000000	diff=4.74481e-13
  0.000142	  0.000152	diff=9.67582e-06
  0.000002	  0.000002	diff=1.2914e-07
 -0.000000	 -0.000000	diff=3.34701e-10
 -0.000001	 -0.000001	diff=3.84613e-09
  0.922291	  0.912894	diff=0.00939773
  0.000000	  0.000000	diff=5.24857e-10
  0.000134	  0.000134	diff=3.90183e-07
 -0.000000	 -0.000000	diff=5.36871e-13
  0.000135	  0.000144	diff=8.73212e-06
  0.000001	  0.000002	diff=1.16389e-07
  0.000000	  0.000000	diff=1.1137e-13
 -0.000000	 -0.000000	diff=1.21558e-12
  0.000000	  0.000000	diff=1.17362e-37
  0.000000	 -0.000000	diff=3.19918e-17
  0.000000	  0.000000	diff=3.18902e-35
  0.000000	  0.000000	diff=3.90106e-16
  0.000022	  0.000022	diff=2.19131e-07
  0.000000	  0.000000	diff=2.8597e-09
  0.000000	 -0.000000	diff=1.65692e-16
  0.000000	 -0.000000	diff=1.27394e-18
  0.000000	 -0.000000	diff=2.46838e-18
  0.000000	 -0.000000	diff=3.29613e-24
  0.000000	 -0.000000	diff=4.0884e-21
  0.000000	 -0.000000	diff=1.82365e-16
  0.000020	  0.000020	diff=1.72982e-07
  0.000000	  0.000000	diff=2.12232e-09
  local_diff=0.121362
# W_tgt_char{2}, [8 4]
  0.007184	  0.007184	diff=6.89101e-08
  0.003911	  0.003911	diff=1.25495e-08
  0.000600	  0.000600	diff=2.062e-08
 -0.001462	 -0.001462	diff=7.65771e-09
  0.010219	  0.010219	diff=3.37998e-07
  0.003694	  0.003694	diff=1.97503e-08
 -0.257876	 -0.258040	diff=0.000164035
  0.098991	  0.098860	diff=0.000131947
  0.000000	  0.000000	diff=1.8824e-12
 -0.000000	 -0.000000	diff=1.19284e-13
  0.000000	 -0.000000	diff=4.60933e-13
  0.000000	  0.000000	diff=8.4433e-14
  0.000000	  0.000000	diff=1.75918e-12
 -0.000000	 -0.000000	diff=1.04841e-13
 -0.000000	 -0.000000	diff=2.96535e-12
  0.000000	  0.000000	diff=4.77601e-13
  0.015081	  0.015071	diff=1.0419e-05
  0.056942	  0.056940	diff=1.37115e-06
 -0.001780	 -0.001780	diff=5.24009e-07
 -0.012194	 -0.012194	diff=1.40585e-07
  0.015754	  0.015748	diff=5.71767e-06
  0.040126	  0.040126	diff=2.77009e-07
  0.187254	  0.187414	diff=0.000160054
  0.126895	  0.127069	diff=0.000174187
  0.015075	  0.015067	diff=7.67317e-06
  0.051550	  0.051552	diff=2.34703e-06
 -0.001842	 -0.001842	diff=3.8495e-07
 -0.011092	 -0.011091	diff=3.19116e-07
  0.015534	  0.015530	diff=4.08928e-06
  0.036305	  0.036306	diff=1.76903e-06
  0.173494	  0.173540	diff=4.53043e-05
  0.137637	  0.137438	diff=0.00019932
  local_diff=0.000910348
# W_tgt_char{3}, [8 4]
 -0.179672	 -0.179727	diff=5.54e-05
 -0.294960	 -0.295077	diff=0.000116408
  0.030272	  0.030273	diff=1.66405e-06
  0.090028	  0.090024	diff=4.56044e-06
 -0.124653	 -0.124678	diff=2.41967e-05
 -0.108119	 -0.108137	diff=1.75906e-05
  0.110261	  0.110117	diff=0.000143212
 -0.030135	 -0.030215	diff=8.0331e-05
 -0.143360	 -0.143397	diff=3.70583e-05
 -0.225102	 -0.225167	diff=6.46725e-05
  0.025632	  0.025633	diff=8.57466e-07
  0.064500	  0.064498	diff=2.11157e-06
 -0.097100	 -0.097115	diff=1.55322e-05
 -0.089489	 -0.089503	diff=1.43564e-05
  0.129423	  0.129269	diff=0.000154054
 -0.013937	 -0.014045	diff=0.000108166
 -0.135400	 -0.135410	diff=1.05505e-05
 -0.295820	 -0.295891	diff=7.09558e-05
  0.030957	  0.030957	diff=1.84627e-07
  0.057922	  0.057923	diff=3.18662e-07
 -0.093144	 -0.093148	diff=3.71217e-06
 -0.182036	 -0.182067	diff=3.0902e-05
  0.373227	  0.371540	diff=0.00168742
  0.353911	  0.353733	diff=0.000177947
 -0.174995	 -0.175044	diff=4.8736e-05
 -0.334320	 -0.334438	diff=0.000118792
  0.027237	  0.027240	diff=2.37292e-06
  0.110167	  0.110161	diff=6.00684e-06
 -0.131595	 -0.131620	diff=2.43325e-05
 -0.115735	 -0.115740	diff=4.47761e-06
  0.073727	  0.073495	diff=0.00023216
  0.047265	  0.047335	diff=7.00304e-05
  local_diff=0.00332907
# W_emb_tgt_char, [2 5]
 -0.000103	 -0.000098	diff=4.62695e-06
  0.000028	  0.000029	diff=5.21951e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.675881	 -0.681227	diff=0.0053463
-11.990041	-14.851405	diff=2.86136
  0.000000	  0.000000	diff=1.57655e-09
 -0.000000	 -0.000000	diff=1.99991e-10
 -0.000000	 -0.000000	diff=1.12485e-10
  0.000000	  0.000000	diff=2.04328e-13
  local_diff=2.86672
# W_a, [2 2]
 -1.020017	 -1.019938	diff=7.86893e-05
  0.013358	  0.013373	diff=1.48226e-05
  0.041040	  0.036642	diff=0.00439861
  0.551632	  0.550360	diff=0.00127207
  local_diff=0.0057642
# W_h, [2 4]
 -2.582305	 -2.671099	diff=0.0887945
  8.427428	  8.425055	diff=0.0023738
  1.760999	  1.632752	diff=0.128247
 -6.174678	 -6.181418	diff=0.00674058
  1.446569	  1.439939	diff=0.0066299
 -4.593671	 -4.596152	diff=0.00248027
 -8.449186	 -8.588529	diff=0.139343
 26.238171	 25.861808	diff=0.376363
  local_diff=0.750972
# W_h_char, [2 4]
  0.000000	  0.000000	diff=4.46547e-11
 -0.000011	 -0.000011	diff=2.89856e-08
 -0.000000	 -0.000000	diff=2.8568e-11
  0.000010	  0.000010	diff=2.13587e-08
  0.000000	  0.000000	diff=4.06254e-11
  0.000009	  0.000009	diff=2.00239e-08
 -0.000000	 -0.000000	diff=4.3307e-12
  0.000000	  0.000000	diff=1.27773e-09
  local_diff=7.1764e-08
# W_soft, [5 2]
 -4.437705	 -4.444747	diff=0.00704181
  1.469418	  1.465037	diff=0.00438146
 -1.476827	 -1.478105	diff=0.00127821
  3.700084	  3.692711	diff=0.0073726
  0.770093	  0.765104	diff=0.00498943
  5.742682	  5.736411	diff=0.00627046
  0.012772	  0.011918	diff=0.000854515
 -4.559954	 -4.561304	diff=0.00134969
 -0.628785	 -0.631638	diff=0.00285255
 -0.551160	 -0.555387	diff=0.0042272
  local_diff=0.0406179
# W_soft_char, [5 2]
  0.315275	  0.315190	diff=8.50356e-05
  0.312547	  0.312446	diff=0.000101647
  0.107124	  0.107046	diff=7.84484e-05
 -0.474193	 -0.474275	diff=8.2021e-05
 -0.260296	 -0.260405	diff=0.000109435
  0.139936	  0.139862	diff=7.37613e-05
  0.508722	  0.508532	diff=0.000189445
 -0.040127	 -0.040225	diff=9.82053e-05
 -0.366062	 -0.366177	diff=0.000115073
 -0.241800	 -0.241992	diff=0.000192792
  local_diff=0.00112586
# Num params=416, abs_diff=325.261
Elapsed time is 9.541366 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  2.282359	  2.282795	diff=0.000435607
  0.290735	  0.290810	diff=7.45302e-05
  0.252204	  0.252187	diff=1.71763e-05
  0.021109	  0.021099	diff=9.25653e-06
  3.117044	  3.118805	diff=0.00176058
  0.330956	  0.331011	diff=5.50632e-05
-10.785615	-10.766940	diff=0.0186756
  2.926840	  2.935399	diff=0.0085599
 -0.621898	 -0.622252	diff=0.00035411
 -0.111255	 -0.111262	diff=6.94167e-06
 -0.009014	 -0.009020	diff=6.50629e-06
 -0.002013	 -0.002013	diff=1.99783e-07
 -0.646463	 -0.647147	diff=0.000683835
 -0.136667	 -0.136681	diff=1.39764e-05
  3.459222	  3.453244	diff=0.00597836
 -1.302269	 -1.302379	diff=0.000109662
 -1.147688	 -1.148739	diff=0.00105038
 -0.028991	 -0.028891	diff=9.96088e-05
 -0.325040	 -0.325153	diff=0.000113375
 -0.068730	 -0.068814	diff=8.3878e-05
 -2.228686	 -2.233278	diff=0.00459216
  0.008028	  0.008084	diff=5.62065e-05
  3.373273	  3.375942	diff=0.00266854
  0.130728	  0.130688	diff=4.03324e-05
  0.512824	  0.512250	diff=0.000574494
 -0.028441	 -0.028480	diff=3.86239e-05
  0.165477	  0.165411	diff=6.61543e-05
 -0.050052	 -0.050085	diff=3.30605e-05
  0.966685	  0.963982	diff=0.00270316
 -0.008592	 -0.008587	diff=5.1553e-06
 -2.021523	 -2.023337	diff=0.001814
  0.111352	  0.111245	diff=0.000106692
  local_diff=0.0507871
# W_src{2}, [8 4]
  0.112307	  0.113700	diff=0.00139315
  1.028018	  1.023644	diff=0.00437393
 -0.793574	 -0.792937	diff=0.000637021
  0.068707	  0.068782	diff=7.45664e-05
 -0.482225	 -0.479593	diff=0.00263154
  2.657086	  2.654143	diff=0.00294231
  8.816718	  8.823611	diff=0.00689239
 -2.622162	 -2.621303	diff=0.00085936
 -1.071919	 -1.071610	diff=0.000309217
  2.547994	  2.545885	diff=0.00210923
 -0.607274	 -0.606917	diff=0.000357899
  0.052632	  0.052675	diff=4.31249e-05
 -4.672642	 -4.673447	diff=0.000805225
  4.324699	  4.323285	diff=0.00141462
  8.999672	  9.009725	diff=0.0100538
  1.411859	  1.411982	diff=0.000123402
  4.263554	  4.254919	diff=0.00863446
  2.084421	  2.069603	diff=0.0148172
 -1.218742	 -1.216387	diff=0.00235463
  0.883173	  0.885146	diff=0.00197237
 -3.904787	 -3.907764	diff=0.00297652
  2.901323	  2.899693	diff=0.00163007
  6.915174	  6.918392	diff=0.00321791
  0.246101	  0.244926	diff=0.00117531
 -3.297631	 -3.300594	diff=0.00296297
 -3.557907	 -3.569342	diff=0.0114349
  2.035714	  2.037903	diff=0.00218918
 -0.700069	 -0.699014	diff=0.00105506
  6.491808	  6.488948	diff=0.00285939
 -5.555899	 -5.559361	diff=0.00346219
-12.805626	-12.793800	diff=0.0118256
 -0.459765	 -0.460990	diff=0.00122454
  local_diff=0.108813
# W_tgt{1}, [8 6]
 -0.001843	 -0.001845	diff=2.39586e-06
-32.848210	-34.972351	diff=2.12414
 -0.424587	 -0.512170	diff=0.0875825
  0.085396	  0.085371	diff=2.47307e-05
  0.000000	  0.000000	diff=1.13185e-10
  0.380858	  0.377106	diff=0.00375236
 -0.000035	 -0.000035	diff=8.27993e-08
 -0.031772	 -0.031760	diff=1.1247e-05
 -0.008903	 -0.008959	diff=5.63014e-05
 16.751521	 14.997132	diff=1.75439
  0.571469	  0.489205	diff=0.0822636
  0.415146	  0.414568	diff=0.000578085
  0.000000	  0.000000	diff=3.42111e-10
  1.625839	  1.577796	diff=0.0480434
 -0.000174	 -0.000172	diff=2.19036e-06
 -0.115681	 -0.115574	diff=0.000107077
  0.006480	  0.006450	diff=2.93894e-05
-13.257228	-13.435627	diff=0.178399
  0.212025	  0.207727	diff=0.00429854
 -0.298191	 -0.298496	diff=0.000305042
 -0.000000	 -0.000000	diff=2.58412e-10
 -3.144013	 -3.139032	diff=0.00498105
  0.000122	  0.000123	diff=1.12256e-06
  0.001737	  0.001737	diff=3.74076e-08
  0.004008	  0.003997	diff=1.12699e-05
  6.701365	  6.636528	diff=0.0648365
  0.134375	  0.128483	diff=0.00589198
 -0.184823	 -0.184940	diff=0.000116762
 -0.000000	 -0.000000	diff=1.99887e-11
 -0.799394	 -0.801019	diff=0.00162473
  0.000076	  0.000076	diff=4.31686e-07
  0.023626	  0.023633	diff=7.38192e-06
  0.000000	  0.000000	diff=2.91325e-15
 12.230172	 12.053547	diff=0.176625
  0.169893	  0.162510	diff=0.00738225
  0.000000	  0.000000	diff=6.63845e-13
  0.000000	  0.000000	diff=1.4847e-11
  2.202787	  2.204667	diff=0.00187964
  0.000000	  0.000000	diff=2.04915e-13
  0.000000	  0.000000	diff=6.41205e-13
 -0.000001	 -0.000001	diff=5.02382e-12
  0.202757	  0.203370	diff=0.000612997
  0.001518	  0.001518	diff=1.11599e-07
  0.000040	  0.000040	diff=5.85114e-12
  0.000000	  0.000000	diff=8.18169e-12
  0.001112	  0.001112	diff=2.69263e-08
 -0.000000	 -0.000000	diff=1.32778e-11
 -0.000000	 -0.000000	diff=5.1485e-13
  local_diff=4.54796
# W_tgt{2}, [8 4]
 -0.143717	 -0.143642	diff=7.43886e-05
 63.616987	 58.996577	diff=4.62041
  0.000400	  0.000399	diff=1.52204e-06
  0.713346	  0.711666	diff=0.00168015
  1.164752	  1.159400	diff=0.00535234
  1.042472	  1.045011	diff=0.00253911
  0.006522	  0.006463	diff=5.91655e-05
218.810948	180.537425	diff=38.2735
 -0.336348	 -0.336149	diff=0.000199222
 -0.936596	 -0.939007	diff=0.00241121
 -0.056573	 -0.056597	diff=2.37882e-05
 -0.091789	 -0.091860	diff=7.18155e-05
 -4.226756	 -4.229823	diff=0.00306705
  0.177503	  0.177647	diff=0.000144301
 -0.505035	 -0.502948	diff=0.0020868
 -1.749268	 -1.752695	diff=0.00342694
 -2.012244	 -2.007574	diff=0.0046702
  1.029045	  1.027530	diff=0.00151452
  1.005961	  1.004648	diff=0.00131387
 -0.362165	 -0.363942	diff=0.0017775
 -4.588254	 -4.586628	diff=0.00162585
  0.091953	  0.091996	diff=4.31154e-05
 -1.842199	 -1.841455	diff=0.000743516
  5.453344	  5.386657	diff=0.066687
 -1.276110	 -1.277019	diff=0.000909065
 -0.035653	 -0.039123	diff=0.00346996
 -0.589019	 -0.588788	diff=0.000230796
  0.619514	  0.613430	diff=0.00608473
 -0.545569	 -0.545940	diff=0.000370684
  0.406097	  0.406211	diff=0.000113549
  0.649103	  0.647066	diff=0.00203636
 -4.143848	 -4.462332	diff=0.318484
  local_diff=43.3251
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000001	diff=6.23724e-08
  0.000002	  0.000002	diff=8.25552e-08
  0.000000	  0.000000	diff=4.22529e-12
  0.000000	  0.000000	diff=6.48543e-12
  local_diff=1.44938e-07
# W_emb_tgt, [2 5]
 79.236261	 70.384523	diff=8.85174
 19.774987	 18.960753	diff=0.814235
 -0.000000	 -0.000000	diff=5.71997e-09
  0.000000	  0.000000	diff=1.157e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.396013	  0.319266	diff=0.0767473
  0.834219	  0.782343	diff=0.0518757
 23.198269	 23.303147	diff=0.104878
  5.575154	  5.532317	diff=0.0428369
  local_diff=9.94231
# W_src_char{1}, [8 4]
 -0.270936	 -0.140753	diff=0.130183
  0.014453	 -0.000000	diff=0.0144528
  0.000000	  0.000000	diff=7.15963e-08
 -0.556323	 -0.000000	diff=0.556323
  0.379090	  0.015268	diff=0.363822
 -0.699715	  0.000111	diff=0.699826
  0.001254	  0.000051	diff=0.00120289
  0.000582	 -0.000000	diff=0.000581571
 -2.877181	 -0.176992	diff=2.70019
 -0.879911	  0.000000	diff=0.879911
 -0.000005	 -0.000000	diff=4.37672e-06
 39.369759	 -0.000001	diff=39.3698
-17.990347	 -0.935935	diff=17.0544
 51.215033	  0.000048	diff=51.215
 -0.077241	 -0.003107	diff=0.0741346
 -0.035706	  0.000000	diff=0.0357062
  0.000076	  0.000003	diff=7.25957e-05
  0.000024	 -0.000000	diff=2.38426e-05
  0.000000	  0.000000	diff=1.0871e-10
 -0.000920	  0.000000	diff=0.000920119
  0.000623	  0.000025	diff=0.000597975
 -0.001159	  0.000000	diff=0.00115878
  0.000002	  0.000000	diff=1.98477e-06
  0.000001	 -0.000000	diff=9.5572e-07
 -0.000000	 -0.000000	diff=4.70424e-07
 -0.000000	 -0.000000	diff=1.54512e-07
  0.000000	 -0.000000	diff=3.2248e-14
  0.000006	 -0.000000	diff=5.96232e-06
 -0.000004	 -0.000000	diff=3.87483e-06
  0.000007	 -0.000000	diff=7.50885e-06
 -0.000000	 -0.000000	diff=1.28733e-08
 -0.000000	  0.000000	diff=6.19593e-09
  local_diff=113.098
# W_src_char{2}, [8 4]
 -7.378054	 -7.510008	diff=0.131955
  0.539901	  0.536939	diff=0.00296248
 -0.000370	 -0.000370	diff=5.08331e-08
  0.000155	  0.000155	diff=3.46742e-08
 -5.517926	 -5.575266	diff=0.0573398
  0.448216	  0.447120	diff=0.0010956
  3.800053	  3.761598	diff=0.0384552
 -5.540549	 -5.901882	diff=0.361333
  4.888742	  4.810108	diff=0.0786338
 -0.398225	 -0.360505	diff=0.0377202
 -0.039914	 -0.042903	diff=0.00298908
  0.052197	  0.052248	diff=5.16965e-05
  3.791314	  3.763806	diff=0.0275086
 -0.187799	 -0.165428	diff=0.0223712
 -2.499510	 -2.516472	diff=0.0169624
  4.113387	  3.952879	diff=0.160508
 -5.457493	 -5.494100	diff=0.0366078
  4.570083	  4.565468	diff=0.00461542
-31.415012	-27.953182	diff=3.46183
  0.856067	  0.855478	diff=0.000588969
 -4.722538	 -4.739458	diff=0.0169199
  3.656707	  3.650564	diff=0.00614312
  0.258505	  0.259112	diff=0.000606427
 -4.261231	 -4.275264	diff=0.0140333
 -1.249072	 -1.251253	diff=0.00218084
  1.216229	  1.215903	diff=0.000325675
 14.448918	 17.951256	diff=3.50234
  0.027481	  0.026989	diff=0.000491387
 -1.156849	 -1.157522	diff=0.000672719
  0.546961	  0.546095	diff=0.000866376
  0.068371	  0.068414	diff=4.32754e-05
 -1.137494	 -1.138482	diff=0.000988102
  local_diff=7.98914
# W_src_char{3}, [8 4]
 -0.220836	  0.505504	diff=0.72634
 -4.629560	 -4.303556	diff=0.326004
 -1.387923	 -1.387765	diff=0.00015765
 -0.101434	 -0.101441	diff=7.09541e-06
 -2.253848	 -1.779712	diff=0.474135
 -0.532883	 -0.532035	diff=0.000847734
 26.648588	 25.143815	diff=1.50477
  0.240820	  0.242266	diff=0.00144526
  0.265923	  0.984854	diff=0.718932
 -2.531876	 -2.248514	diff=0.283361
 -0.603431	 -0.603140	diff=0.000291291
 -0.131983	 -0.131934	diff=4.9562e-05
-14.850409	-14.770453	diff=0.0799552
 -0.333023	 -0.332813	diff=0.000209933
  3.069476	  3.028032	diff=0.0414438
  0.384106	  0.385280	diff=0.00117441
 -0.214872	 -0.215290	diff=0.00041788
  7.127049	  7.113836	diff=0.0132126
  2.487784	  2.487849	diff=6.44531e-05
  0.250266	  0.249738	diff=0.000527472
 23.197655	 23.961645	diff=0.76399
  0.831829	  0.832946	diff=0.00111629
 17.188433	 17.068902	diff=0.119531
 -0.413913	 -0.411205	diff=0.00270781
  0.030552	  0.030544	diff=8.27849e-06
 -1.068721	 -1.069305	diff=0.000584455
 -0.271198	 -0.271126	diff=7.19903e-05
 -0.033680	 -0.033689	diff=9.68047e-06
 -1.514638	 -1.496224	diff=0.0184141
 -0.116764	 -0.116742	diff=2.18536e-05
 -2.330572	 -2.331996	diff=0.00142393
  0.116195	  0.116246	diff=5.12167e-05
  local_diff=5.08128
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=4.3694e-08
 -0.000003	 -0.000003	diff=3.17866e-08
 -0.005479	 -0.002563	diff=0.00291638
  0.092772	  0.044491	diff=0.0482814
-46.409244	  4.738868	diff=51.1481
-82.779704	  3.346768	diff=86.1265
 -0.000000	 -0.000000	diff=6.20873e-12
  0.000000	  0.000000	diff=3.5348e-12
  local_diff=137.326
# W_tgt_char{1}, [8 4]
  0.000007	  0.000007	diff=7.21257e-08
  0.000044	  0.000043	diff=4.30182e-07
-29.814159	-30.933562	diff=1.1194
 -0.000006	 -0.000006	diff=6.06597e-08
 -0.004494	 -0.004538	diff=4.44219e-05
  0.000000	  0.000000	diff=1.04292e-11
  0.001423	  0.001520	diff=9.67582e-05
  0.000015	  0.000017	diff=1.29141e-06
 -0.000002	 -0.000002	diff=3.34701e-09
 -0.000013	 -0.000013	diff=3.84499e-08
  9.222914	  9.128936	diff=0.0939773
  0.000002	  0.000002	diff=5.24857e-09
  0.001343	  0.001339	diff=3.90182e-06
 -0.000000	 -0.000000	diff=1.1053e-11
  0.001355	  0.001442	diff=8.73212e-05
  0.000015	  0.000016	diff=1.16388e-06
  0.000000	  0.000000	diff=4.57064e-12
 -0.000000	 -0.000000	diff=6.47146e-12
  0.000000	  0.000000	diff=1.17362e-36
  0.000000	 -0.000000	diff=3.19918e-16
  0.000000	  0.000000	diff=3.18902e-34
  0.000000	  0.000000	diff=3.90106e-15
  0.000222	  0.000225	diff=2.19131e-06
  0.000002	  0.000002	diff=2.8597e-08
  0.000000	 -0.000000	diff=1.65692e-15
  0.000000	 -0.000000	diff=1.27394e-17
  0.000000	 -0.000000	diff=2.46838e-17
  0.000000	 -0.000000	diff=3.29613e-23
  0.000000	 -0.000000	diff=4.0884e-20
  0.000000	 -0.000000	diff=1.82365e-15
  0.000198	  0.000200	diff=1.72982e-06
  0.000002	  0.000002	diff=2.12119e-08
  local_diff=1.21362
# W_tgt_char{2}, [8 4]
  0.071838	  0.071839	diff=6.89095e-07
  0.039114	  0.039114	diff=1.255e-07
  0.005997	  0.005996	diff=2.06212e-07
 -0.014620	 -0.014619	diff=7.65714e-08
  0.102187	  0.102190	diff=3.37997e-06
  0.036944	  0.036944	diff=1.97491e-07
 -2.578761	 -2.580402	diff=0.00164035
  0.989915	  0.988595	diff=0.00131947
  0.000000	  0.000000	diff=7.45532e-12
 -0.000000	 -0.000000	diff=1.25615e-11
  0.000000	 -0.000000	diff=4.60933e-12
  0.000000	  0.000000	diff=8.4433e-13
  0.000000	  0.000000	diff=6.2231e-12
 -0.000000	 -0.000000	diff=1.24171e-11
 -0.000002	 -0.000002	diff=6.91614e-12
  0.000002	  0.000002	diff=1.04604e-11
  0.150811	  0.150707	diff=0.00010419
  0.569419	  0.569405	diff=1.37115e-05
 -0.017798	 -0.017803	diff=5.24009e-06
 -0.121937	 -0.121936	diff=1.40585e-06
  0.157542	  0.157485	diff=5.71767e-05
  0.401259	  0.401256	diff=2.77009e-06
  1.872536	  1.874136	diff=0.00160054
  1.268948	  1.270690	diff=0.00174187
  0.150750	  0.150674	diff=7.67317e-05
  0.515496	  0.515520	diff=2.34703e-05
 -0.018421	 -0.018425	diff=3.8495e-06
 -0.110916	 -0.110913	diff=3.19117e-06
  0.155342	  0.155301	diff=4.08928e-05
  0.363046	  0.363063	diff=1.76903e-05
  1.734943	  1.735396	diff=0.000453043
  1.376370	  1.374377	diff=0.0019932
  local_diff=0.00910348
# W_tgt_char{3}, [8 4]
 -1.796720	 -1.797274	diff=0.000554
 -2.949605	 -2.950769	diff=0.00116408
  0.302717	  0.302734	diff=1.66405e-05
  0.900284	  0.900238	diff=4.56044e-05
 -1.246534	 -1.246776	diff=0.000241967
 -1.081194	 -1.081370	diff=0.000175906
  1.102607	  1.101175	diff=0.00143212
 -0.301348	 -0.302151	diff=0.00080331
 -1.433597	 -1.433968	diff=0.000370583
 -2.251022	 -2.251668	diff=0.000646725
  0.256319	  0.256328	diff=8.57465e-06
  0.645002	  0.644981	diff=2.11157e-05
 -0.970998	 -0.971153	diff=0.000155322
 -0.894888	 -0.895031	diff=0.000143564
  1.294235	  1.292694	diff=0.00154054
 -0.139372	 -0.140453	diff=0.00108166
 -1.353995	 -1.354101	diff=0.000105505
 -2.958201	 -2.958910	diff=0.000709558
  0.309566	  0.309567	diff=1.84628e-06
  0.579223	  0.579226	diff=3.1866e-06
 -0.931443	 -0.931480	diff=3.71217e-05
 -1.820360	 -1.820669	diff=0.00030902
  3.732273	  3.715399	diff=0.0168742
  3.539112	  3.537333	diff=0.00177947
 -1.749953	 -1.750440	diff=0.00048736
 -3.343195	 -3.344383	diff=0.00118792
  0.272373	  0.272397	diff=2.37292e-05
  1.101666	  1.101606	diff=6.00684e-05
 -1.315955	 -1.316198	diff=0.000243325
 -1.157352	 -1.157396	diff=4.47761e-05
  0.737267	  0.734946	diff=0.0023216
  0.472649	  0.473349	diff=0.000700304
  local_diff=0.0332907
# W_emb_tgt_char, [2 5]
 -0.001028	 -0.000982	diff=4.62695e-05
  0.000282	  0.000288	diff=5.2195e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -6.758811	 -6.812274	diff=0.053463
-119.900413	-148.514054	diff=28.6136
  0.000000	  0.000000	diff=1.57484e-08
 -0.000000	 -0.000000	diff=1.99991e-09
 -0.000000	 -0.000000	diff=1.11916e-09
  0.000000	  0.000000	diff=3.64106e-12
  local_diff=28.6672
# W_a, [2 2]
 -1.020011	 -1.019933	diff=7.86897e-05
  0.013353	  0.013368	diff=1.48229e-05
  0.041040	  0.036641	diff=0.00439861
  0.551632	  0.550360	diff=0.00127207
  local_diff=0.0057642
# W_h, [2 4]
 -2.582302	 -2.671096	diff=0.0887945
  8.427412	  8.425038	diff=0.00237389
  1.760996	  1.632749	diff=0.128247
 -6.174660	 -6.181401	diff=0.00674069
  1.446571	  1.439941	diff=0.0066299
 -4.593681	 -4.596162	diff=0.00248029
 -8.449183	 -8.588526	diff=0.139343
 26.238159	 25.861796	diff=0.376363
  local_diff=0.750972
# W_h_char, [2 4]
  0.000000	  0.000000	diff=4.46547e-10
 -0.000115	 -0.000115	diff=2.8985e-07
 -0.000000	 -0.000000	diff=2.8568e-10
  0.000100	  0.000101	diff=2.13598e-07
  0.000000	  0.000000	diff=4.0057e-10
  0.000087	  0.000087	diff=2.00227e-07
 -0.000000	 -0.000000	diff=3.76227e-11
  0.000003	  0.000003	diff=1.27887e-08
  local_diff=7.17634e-07
# W_soft, [5 2]
 -4.437705	 -4.444747	diff=0.00704181
  1.469418	  1.465037	diff=0.00438146
 -1.476827	 -1.478105	diff=0.00127821
  3.700084	  3.692711	diff=0.0073726
  0.770093	  0.765104	diff=0.00498943
  5.742682	  5.736411	diff=0.00627046
  0.012772	  0.011918	diff=0.000854515
 -4.559954	 -4.561304	diff=0.00134969
 -0.628785	 -0.631638	diff=0.00285255
 -0.551160	 -0.555387	diff=0.0042272
  local_diff=0.0406179
# W_soft_char, [5 2]
  3.152746	  3.151895	diff=0.000850356
  3.125472	  3.124455	diff=0.00101647
  1.071240	  1.070455	diff=0.000784484
 -4.741932	 -4.742752	diff=0.00082021
 -2.602960	 -2.604054	diff=0.00109435
  1.399358	  1.398620	diff=0.000737613
  5.087219	  5.085324	diff=0.00189445
 -0.401268	 -0.402250	diff=0.000982053
 -3.660620	 -3.661771	diff=0.00115073
 -2.417996	 -2.419924	diff=0.00192792
  local_diff=0.0112586
# Num params=416, abs_diff=352.201
Elapsed time is 9.315398 seconds.
[?1l>