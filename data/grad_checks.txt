# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000010	  0.000010	diff=6.17714e-11
 -0.000011	 -0.000011	diff=6.72696e-11
  0.000004	  0.000004	diff=3.15016e-10
 -0.000003	 -0.000003	diff=2.69429e-10
  0.000000	  0.000000	diff=4.3928e-13
  0.000001	  0.000001	diff=4.75354e-12
  0.004421	  0.004421	diff=1.55788e-07
  0.006020	  0.006021	diff=9.30088e-08
 -0.000005	 -0.000005	diff=6.28422e-11
  0.000013	  0.000013	diff=1.74402e-11
 -0.000006	 -0.000006	diff=2.94658e-10
  0.000000	  0.000000	diff=4.27279e-11
 -0.000000	 -0.000000	diff=1.1015e-12
 -0.000001	 -0.000001	diff=1.29598e-12
 -0.000831	 -0.000831	diff=8.15894e-08
 -0.003179	 -0.003179	diff=4.09838e-08
 -0.000000	 -0.000000	diff=2.11932e-12
  0.000000	  0.000000	diff=2.29118e-13
 -0.000000	 -0.000000	diff=2.59559e-13
  0.000000	  0.000000	diff=4.41802e-15
  0.000000	  0.000000	diff=6.62351e-13
 -0.000000	 -0.000000	diff=4.75849e-13
 -0.000051	 -0.000051	diff=4.97827e-08
 -0.000075	 -0.000075	diff=2.70437e-11
  0.000000	  0.000000	diff=3.46346e-13
 -0.000000	 -0.000000	diff=5.79698e-13
  0.000000	  0.000000	diff=4.90412e-13
 -0.000000	 -0.000000	diff=2.13149e-13
 -0.000000	 -0.000000	diff=2.15859e-13
  0.000000	  0.000000	diff=1.96564e-14
  0.000012	  0.000012	diff=1.31192e-11
  0.000041	  0.000041	diff=3.99654e-08
  local_diff=4.62302e-07
# W_tgt{1}, [8 6]
 -0.000011	 -0.000011	diff=2.40903e-11
  0.000008	  0.000008	diff=6.29277e-11
 -0.000004	 -0.000004	diff=8.3275e-10
  0.000009	  0.000009	diff=2.96192e-10
  0.000000	  0.000000	diff=4.3047e-12
  0.000018	  0.000018	diff=2.80489e-13
 -0.003969	 -0.003969	diff=1.05323e-07
 -0.011719	 -0.011719	diff=3.27218e-08
 -0.000017	 -0.000017	diff=7.50905e-12
  0.000020	  0.000020	diff=3.55317e-11
 -0.000025	 -0.000025	diff=1.06332e-09
  0.000011	  0.000011	diff=1.28662e-09
 -0.000028	 -0.000028	diff=6.27872e-11
  0.000031	  0.000031	diff=9.20014e-12
 -0.008540	 -0.008540	diff=4.35927e-07
 -0.000826	 -0.000826	diff=3.14139e-07
 -0.000000	 -0.000000	diff=5.01594e-13
  0.000000	  0.000000	diff=5.78937e-13
 -0.000001	 -0.000001	diff=1.13911e-12
 -0.000000	 -0.000000	diff=3.4278e-13
 -0.000001	 -0.000001	diff=4.56117e-14
  0.000000	  0.000000	diff=3.65961e-13
 -0.000200	 -0.000200	diff=2.62442e-07
  0.000071	  0.000071	diff=1.39549e-08
  0.000000	  0.000000	diff=4.45994e-13
  0.000000	  0.000000	diff=8.10606e-13
  0.000000	  0.000000	diff=5.17207e-14
  0.000000	  0.000000	diff=1.96545e-13
  0.000000	  0.000000	diff=4.76632e-14
 -0.000000	 -0.000000	diff=2.93701e-13
  0.000123	  0.000123	diff=2.06469e-09
  0.000010	  0.000010	diff=1.85491e-07
 -0.000000	 -0.000000	diff=3.89233e-13
  0.000000	  0.000000	diff=2.29414e-13
 -0.000001	 -0.000001	diff=7.51087e-12
  0.000000	  0.000000	diff=1.06461e-12
 -0.000001	 -0.000001	diff=1.01553e-11
  0.000001	  0.000001	diff=5.14425e-13
 -0.000322	 -0.000321	diff=2.08661e-07
 -0.000175	 -0.000175	diff=2.39493e-08
  0.000000	  0.000000	diff=1.16091e-13
 -0.000000	 -0.000000	diff=4.31763e-13
  0.000001	  0.000001	diff=1.45715e-12
 -0.000000	 -0.000000	diff=6.29152e-13
  0.000000	  0.000000	diff=3.01951e-13
 -0.000000	 -0.000000	diff=4.29796e-13
  0.000170	  0.000170	diff=3.03361e-09
  0.000156	  0.000156	diff=2.24839e-07
  local_diff=1.81626e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001416	  0.001416	diff=2.24161e-07
  0.000149	  0.000148	diff=4.83014e-07
  0.000265	  0.000265	diff=1.04332e-07
  0.001956	  0.001955	diff=1.18718e-06
  local_diff=1.99869e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001049	  0.001049	diff=1.04602e-07
 -0.000958	 -0.000958	diff=6.36147e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003521	 -0.003520	diff=4.02644e-07
 -0.000193	 -0.000193	diff=2.0067e-07
 -0.004962	 -0.004962	diff=3.19252e-07
 -0.001412	 -0.001412	diff=3.428e-07
  local_diff=2.00611e-06
# W_soft, [5 2]
  0.007849	  0.007849	diff=6.5062e-08
  0.007849	  0.007849	diff=6.50646e-08
  0.004800	  0.004799	diff=6.50659e-08
 -0.013796	 -0.013797	diff=6.50577e-08
 -0.006701	 -0.006701	diff=6.50775e-08
 -0.002503	 -0.002503	diff=1.97754e-08
 -0.002503	 -0.002503	diff=1.97757e-08
 -0.004838	 -0.004839	diff=1.97772e-08
  0.007189	  0.007189	diff=1.97739e-08
  0.002656	  0.002656	diff=1.97791e-08
  local_diff=4.24209e-07
# Num params=110, abs_diff=6.70758e-06
Elapsed time is 0.905734 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.01201e-12
 -0.000000	 -0.000000	diff=6.35909e-13
  0.000000	  0.000000	diff=1.04485e-11
 -0.000000	 -0.000000	diff=1.67593e-12
  0.000001	  0.000001	diff=1.9472e-12
  0.000000	  0.000000	diff=1.72778e-13
 -0.000150	 -0.000150	diff=1.6814e-10
 -0.000020	 -0.000020	diff=2.66738e-10
 -0.000001	 -0.000001	diff=2.50322e-12
  0.000000	  0.000000	diff=9.02429e-13
 -0.000000	 -0.000000	diff=1.98496e-11
  0.000000	  0.000000	diff=2.57834e-12
 -0.000001	 -0.000001	diff=5.14255e-12
 -0.000000	 -0.000000	diff=1.14396e-12
  0.000218	  0.000218	diff=1.87396e-10
  0.000030	  0.000030	diff=5.61483e-10
 -0.000000	 -0.000000	diff=6.42337e-13
  0.000000	  0.000000	diff=4.63791e-13
 -0.000000	 -0.000000	diff=4.84313e-13
  0.000000	  0.000000	diff=7.00858e-13
 -0.000000	 -0.000000	diff=4.78397e-13
 -0.000000	 -0.000000	diff=1.0118e-13
  0.000004	  0.000004	diff=5.00007e-09
  0.000001	  0.000001	diff=5.07508e-12
  0.000000	  0.000000	diff=3.66703e-13
 -0.000000	 -0.000000	diff=4.97045e-14
  0.000000	  0.000000	diff=6.06628e-14
 -0.000000	 -0.000000	diff=8.31975e-13
  0.000000	  0.000000	diff=5.95507e-14
  0.000000	  0.000000	diff=5.59007e-13
 -0.000003	 -0.000003	diff=3.08146e-11
 -0.000001	 -0.000001	diff=5.66983e-10
  local_diff=6.84051e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=8.03802e-14
 -0.000000	 -0.000000	diff=9.53185e-13
 -0.000000	 -0.000000	diff=7.28831e-13
 -0.000000	 -0.000000	diff=3.31755e-14
  0.000000	  0.000000	diff=9.56569e-13
 -0.000000	 -0.000000	diff=8.66522e-14
  0.000154	  0.000154	diff=5.96133e-11
 -0.000141	 -0.000141	diff=8.25531e-11
  0.000000	  0.000000	diff=4.29653e-13
  0.000000	  0.000000	diff=3.05068e-13
  0.000000	  0.000000	diff=2.04698e-13
  0.000000	  0.000000	diff=1.31599e-13
 -0.000000	 -0.000000	diff=2.76807e-13
  0.000000	  0.000000	diff=1.29988e-13
 -0.000126	 -0.000126	diff=3.95108e-11
  0.000117	  0.000117	diff=5.44827e-11
 -0.000000	 -0.000000	diff=4.19572e-13
 -0.000000	 -0.000000	diff=2.81248e-13
 -0.000000	 -0.000000	diff=4.47843e-13
 -0.000000	 -0.000000	diff=1.26669e-13
  0.000000	  0.000000	diff=9.66914e-13
 -0.000000	 -0.000000	diff=6.50479e-13
  0.000003	  0.000003	diff=4.50443e-09
 -0.000003	 -0.000003	diff=4.91204e-14
  0.000000	  0.000000	diff=1.25299e-13
  0.000000	  0.000000	diff=7.31938e-13
  0.000000	  0.000000	diff=4.39996e-13
  0.000000	  0.000000	diff=2.79286e-13
 -0.000000	 -0.000000	diff=1.28328e-14
  0.000000	  0.000000	diff=1.31276e-12
 -0.000004	 -0.000004	diff=3.12506e-13
  0.000003	  0.000003	diff=4.67157e-09
  local_diff=9.42263e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.1358e-12
  0.000000	  0.000000	diff=7.17355e-13
 -0.000000	 -0.000000	diff=3.55204e-12
 -0.000000	 -0.000000	diff=2.5533e-12
 -0.000000	 -0.000000	diff=1.15237e-13
  0.000000	  0.000000	diff=8.5841e-13
  0.000075	  0.000075	diff=3.31281e-10
 -0.000089	 -0.000089	diff=6.88033e-10
  0.000000	  0.000000	diff=3.59578e-13
 -0.000000	 -0.000000	diff=3.93993e-13
  0.000000	  0.000000	diff=2.05753e-11
  0.000000	  0.000000	diff=1.09593e-11
  0.000000	  0.000000	diff=1.59798e-12
 -0.000000	 -0.000000	diff=8.16826e-13
 -0.000200	 -0.000200	diff=1.91575e-09
  0.000218	  0.000218	diff=1.40996e-09
 -0.000000	 -0.000000	diff=2.48619e-13
  0.000000	  0.000000	diff=6.71826e-13
  0.000000	  0.000000	diff=9.36701e-13
 -0.000000	 -0.000000	diff=2.57788e-13
  0.000000	  0.000000	diff=1.30817e-13
  0.000000	  0.000000	diff=4.0149e-15
 -0.000000	 -0.000000	diff=1.9846e-12
  0.000000	  0.000000	diff=7.72185e-15
  0.000000	  0.000000	diff=9.7026e-14
 -0.000000	 -0.000000	diff=1.07181e-13
 -0.000000	 -0.000000	diff=2.49916e-13
  0.000000	  0.000000	diff=3.32967e-13
 -0.000000	 -0.000000	diff=1.64263e-13
 -0.000000	 -0.000000	diff=3.16626e-13
  0.000000	  0.000000	diff=5.38418e-13
 -0.000000	 -0.000000	diff=5.78386e-12
  0.000000	  0.000000	diff=3.21581e-13
 -0.000000	 -0.000000	diff=2.1214e-13
  0.000000	  0.000000	diff=1.09172e-12
  0.000000	  0.000000	diff=6.37362e-13
  0.000000	  0.000000	diff=6.32383e-13
 -0.000000	 -0.000000	diff=3.52803e-13
 -0.000006	 -0.000006	diff=1.72576e-08
  0.000006	  0.000006	diff=2.70846e-10
 -0.000000	 -0.000000	diff=7.56398e-13
  0.000000	  0.000000	diff=1.32195e-12
 -0.000000	 -0.000000	diff=6.8749e-14
 -0.000000	 -0.000000	diff=1.47369e-12
 -0.000000	 -0.000000	diff=4.59041e-13
  0.000000	  0.000000	diff=3.97613e-13
  0.000003	  0.000003	diff=1.66925e-10
 -0.000003	 -0.000003	diff=4.75861e-09
  local_diff=2.68622e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=8.65635e-13
 -0.000000	 -0.000000	diff=4.34091e-13
 -0.000000	 -0.000000	diff=7.33809e-14
 -0.000000	 -0.000000	diff=1.18128e-12
 -0.000000	 -0.000000	diff=5.30703e-14
 -0.000000	 -0.000000	diff=1.62783e-13
  0.000182	  0.000182	diff=3.50528e-09
 -0.000127	 -0.000127	diff=2.63484e-09
  0.000000	  0.000000	diff=4.47805e-14
 -0.000000	 -0.000000	diff=2.77995e-14
 -0.000000	 -0.000000	diff=4.2504e-14
 -0.000000	 -0.000000	diff=8.06954e-13
 -0.000000	 -0.000000	diff=5.8054e-13
 -0.000000	 -0.000000	diff=2.58382e-13
  0.000015	  0.000015	diff=2.75182e-09
 -0.000013	 -0.000013	diff=1.13536e-09
  0.000000	  0.000000	diff=1.48656e-12
 -0.000000	 -0.000000	diff=5.3465e-13
 -0.000000	 -0.000000	diff=5.83813e-13
 -0.000000	 -0.000000	diff=8.1559e-14
 -0.000000	 -0.000000	diff=5.2296e-14
 -0.000000	 -0.000000	diff=2.16327e-13
  0.000011	  0.000011	diff=3.31133e-08
 -0.000008	 -0.000008	diff=3.27926e-10
 -0.000000	 -0.000000	diff=6.03095e-13
  0.000000	  0.000000	diff=3.68365e-13
  0.000000	  0.000000	diff=1.76702e-13
  0.000000	  0.000000	diff=2.50519e-13
  0.000000	  0.000000	diff=1.74047e-13
  0.000000	  0.000000	diff=6.5127e-13
 -0.000016	 -0.000016	diff=9.35584e-11
  0.000010	  0.000010	diff=1.98404e-08
  local_diff=6.34122e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000075	  0.000075	diff=2.82593e-08
 -0.000092	 -0.000092	diff=9.28177e-08
  0.000074	  0.000074	diff=2.53399e-08
 -0.000081	 -0.000081	diff=7.86173e-08
  local_diff=2.25034e-07
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000022	  0.000022	diff=6.25761e-08
 -0.000053	 -0.000053	diff=2.94624e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000070	 -0.000070	diff=9.6036e-08
 -0.000063	 -0.000063	diff=4.16344e-08
  0.000021	  0.000021	diff=4.15104e-08
 -0.000032	 -0.000032	diff=2.02925e-08
  local_diff=2.91512e-07
# W_soft, [5 2]
 -0.000086	 -0.000086	diff=8.19208e-12
 -0.000086	 -0.000086	diff=7.88968e-12
 -0.000024	 -0.000024	diff=8.03629e-12
  0.000187	  0.000187	diff=8.942e-12
  0.000009	  0.000009	diff=8.86197e-12
  0.000190	  0.000190	diff=3.24091e-11
  0.000190	  0.000190	diff=3.27182e-11
  0.000086	  0.000086	diff=3.28738e-11
 -0.000414	 -0.000414	diff=3.26647e-11
 -0.000051	 -0.000051	diff=3.27591e-11
  local_diff=2.05347e-10
# Num params=174, abs_diff=6.23289e-07
Elapsed time is 1.632005 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.70699e-13
  0.000000	  0.000000	diff=1.76517e-13
  0.000000	  0.000000	diff=1.4175e-11
  0.000000	  0.000000	diff=1.21093e-12
  0.000000	  0.000000	diff=2.94252e-12
  0.000000	  0.000000	diff=3.72169e-13
 -0.000088	 -0.000088	diff=9.05964e-10
  0.000004	  0.000004	diff=3.24596e-11
 -0.000000	 -0.000000	diff=1.47084e-12
  0.000000	  0.000000	diff=3.51307e-13
 -0.000000	 -0.000000	diff=2.88642e-11
  0.000000	  0.000000	diff=2.9091e-12
 -0.000000	 -0.000000	diff=4.0228e-12
 -0.000000	 -0.000000	diff=1.74188e-12
  0.000076	  0.000076	diff=1.09826e-09
  0.000034	  0.000034	diff=7.39404e-10
 -0.000000	 -0.000000	diff=5.59183e-13
  0.000000	  0.000000	diff=1.05866e-13
 -0.000000	 -0.000000	diff=1.89004e-13
  0.000000	  0.000000	diff=5.61954e-13
 -0.000000	 -0.000000	diff=1.62299e-13
 -0.000000	 -0.000000	diff=2.25475e-13
  0.000002	  0.000002	diff=4.92705e-09
  0.000000	  0.000000	diff=6.29919e-12
  0.000000	  0.000000	diff=1.48164e-12
 -0.000000	 -0.000000	diff=7.9407e-13
  0.000000	  0.000000	diff=9.11813e-14
 -0.000000	 -0.000000	diff=1.78877e-13
  0.000000	  0.000000	diff=1.18734e-13
  0.000000	  0.000000	diff=6.98045e-13
 -0.000002	 -0.000002	diff=3.65579e-11
 -0.000001	 -0.000001	diff=4.20082e-10
  local_diff=8.23016e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.39122e-13
 -0.000000	 -0.000000	diff=8.35316e-13
 -0.000000	 -0.000000	diff=7.53571e-13
 -0.000000	 -0.000000	diff=1.04244e-13
  0.000000	  0.000000	diff=7.26414e-15
 -0.000000	 -0.000000	diff=3.27244e-13
  0.000111	  0.000111	diff=7.47341e-11
 -0.000035	 -0.000035	diff=4.90506e-11
  0.000000	  0.000000	diff=3.64479e-13
  0.000000	  0.000000	diff=9.94459e-14
  0.000000	  0.000000	diff=9.29944e-13
  0.000000	  0.000000	diff=5.39092e-13
 -0.000000	 -0.000000	diff=1.08016e-13
  0.000000	  0.000000	diff=2.46041e-13
 -0.000163	 -0.000163	diff=7.90881e-11
  0.000135	  0.000135	diff=9.3633e-11
 -0.000000	 -0.000000	diff=1.15611e-13
 -0.000000	 -0.000000	diff=6.17457e-13
 -0.000000	 -0.000000	diff=2.26721e-13
 -0.000000	 -0.000000	diff=2.51084e-13
  0.000000	  0.000000	diff=7.79556e-13
 -0.000000	 -0.000000	diff=5.86092e-13
  0.000003	  0.000003	diff=4.91467e-09
 -0.000001	 -0.000001	diff=6.2867e-13
  0.000000	  0.000000	diff=1.39697e-13
  0.000000	  0.000000	diff=9.37538e-13
  0.000000	  0.000000	diff=4.67156e-14
  0.000000	  0.000000	diff=3.52655e-13
 -0.000000	 -0.000000	diff=2.00908e-13
  0.000000	  0.000000	diff=1.70998e-13
 -0.000004	 -0.000004	diff=8.47843e-13
  0.000002	  0.000002	diff=4.77479e-09
  local_diff=9.99663e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.59023e-13
  0.000000	  0.000000	diff=2.58292e-13
 -0.000000	 -0.000000	diff=3.58941e-12
 -0.000000	 -0.000000	diff=4.98908e-12
 -0.000000	 -0.000000	diff=1.00825e-12
  0.000000	  0.000000	diff=3.37876e-14
  0.000042	  0.000042	diff=2.90536e-10
 -0.000112	 -0.000112	diff=1.38789e-09
  0.000000	  0.000000	diff=5.45505e-13
 -0.000000	 -0.000000	diff=1.89052e-12
  0.000000	  0.000000	diff=2.94054e-11
  0.000000	  0.000000	diff=2.19001e-11
  0.000000	  0.000000	diff=1.73231e-12
 -0.000000	 -0.000000	diff=4.31294e-13
 -0.000158	 -0.000158	diff=2.53594e-09
  0.000233	  0.000233	diff=1.98497e-09
 -0.000000	 -0.000000	diff=2.98429e-13
  0.000000	  0.000000	diff=9.2267e-14
  0.000000	  0.000000	diff=3.69807e-13
 -0.000000	 -0.000000	diff=8.34184e-13
  0.000000	  0.000000	diff=9.33658e-13
  0.000000	  0.000000	diff=1.59363e-13
 -0.000000	 -0.000000	diff=1.21301e-12
  0.000000	  0.000000	diff=3.80376e-13
  0.000000	  0.000000	diff=1.52892e-13
 -0.000000	 -0.000000	diff=1.60575e-13
 -0.000000	 -0.000000	diff=5.20818e-13
  0.000000	  0.000000	diff=8.54171e-14
 -0.000000	 -0.000000	diff=1.17125e-12
  0.000000	  0.000000	diff=8.69386e-13
  0.000000	  0.000000	diff=1.38672e-13
 -0.000000	 -0.000000	diff=9.15253e-12
  0.000000	  0.000000	diff=4.43923e-13
 -0.000000	 -0.000000	diff=8.00218e-14
  0.000000	  0.000000	diff=1.96003e-13
  0.000000	  0.000000	diff=4.49582e-13
  0.000000	  0.000000	diff=2.4237e-13
 -0.000000	 -0.000000	diff=4.30746e-13
 -0.000004	 -0.000004	diff=1.16943e-08
  0.000005	  0.000005	diff=3.52506e-10
 -0.000000	 -0.000000	diff=9.6141e-14
  0.000000	  0.000000	diff=9.16034e-14
 -0.000000	 -0.000000	diff=5.0626e-14
 -0.000000	 -0.000000	diff=4.09526e-13
 -0.000000	 -0.000000	diff=1.91686e-13
  0.000000	  0.000000	diff=2.76682e-13
  0.000002	  0.000002	diff=1.09243e-10
 -0.000004	 -0.000004	diff=6.36185e-09
  local_diff=2.48032e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.01695e-12
 -0.000000	 -0.000000	diff=2.79277e-13
 -0.000000	 -0.000000	diff=4.14675e-13
 -0.000000	 -0.000000	diff=9.96538e-13
 -0.000000	 -0.000000	diff=1.59943e-13
 -0.000000	 -0.000000	diff=5.17265e-13
  0.000104	  0.000104	diff=2.3385e-09
  0.000012	  0.000012	diff=2.40086e-09
  0.000000	  0.000000	diff=2.45358e-13
 -0.000000	 -0.000000	diff=2.4845e-13
 -0.000000	 -0.000000	diff=5.49966e-13
 -0.000000	 -0.000000	diff=8.73966e-13
 -0.000000	 -0.000000	diff=1.00127e-13
 -0.000000	 -0.000000	diff=4.30607e-13
  0.000022	  0.000022	diff=4.77782e-09
 -0.000020	 -0.000020	diff=2.2462e-09
  0.000000	  0.000000	diff=1.13921e-13
  0.000000	  0.000000	diff=7.60806e-13
 -0.000000	 -0.000000	diff=1.66555e-13
 -0.000000	 -0.000000	diff=7.03774e-13
 -0.000000	 -0.000000	diff=5.38458e-13
 -0.000000	 -0.000000	diff=5.65232e-13
  0.000009	  0.000009	diff=2.80555e-08
 -0.000003	 -0.000003	diff=2.42601e-10
 -0.000000	 -0.000000	diff=1.4268e-12
  0.000000	  0.000000	diff=2.62208e-13
  0.000000	  0.000000	diff=3.31084e-13
  0.000000	  0.000000	diff=6.06037e-13
  0.000000	  0.000000	diff=2.41643e-13
  0.000000	  0.000000	diff=1.45481e-13
 -0.000015	 -0.000015	diff=7.61084e-11
  0.000005	  0.000005	diff=1.60776e-08
  local_diff=5.62269e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=1.72009e-08
 -0.000014	 -0.000014	diff=4.22729e-08
  0.000062	  0.000062	diff=2.32496e-08
 -0.000020	 -0.000020	diff=1.66708e-08
  local_diff=9.93941e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000107	  0.000107	diff=5.82653e-08
 -0.000042	 -0.000042	diff=2.80125e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=8.8686e-08
 -0.000040	 -0.000040	diff=2.87379e-08
  0.000068	  0.000068	diff=5.73714e-08
 -0.000034	 -0.000034	diff=2.63123e-08
  local_diff=2.87385e-07
# W_soft, [5 2]
 -0.000090	 -0.000090	diff=1.29046e-11
 -0.000090	 -0.000090	diff=1.25565e-11
 -0.000013	 -0.000013	diff=1.19156e-11
  0.000150	  0.000150	diff=1.24629e-11
  0.000042	  0.000042	diff=1.26882e-11
  0.000192	  0.000192	diff=4.55799e-11
  0.000192	  0.000192	diff=4.60538e-11
  0.000090	  0.000090	diff=4.51997e-11
 -0.000352	 -0.000352	diff=4.58334e-11
 -0.000122	 -0.000122	diff=4.54174e-11
  local_diff=2.90612e-10
# Num params=174, abs_diff=4.86327e-07
Elapsed time is 1.750207 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=7.30558e-13
 -0.000000	 -0.000000	diff=3.53748e-13
  0.000000	  0.000000	diff=8.56072e-14
 -0.000000	 -0.000000	diff=1.44345e-13
  0.000000	  0.000000	diff=3.78059e-13
  0.000000	  0.000000	diff=3.83548e-13
 -0.000003	 -0.000003	diff=3.37658e-11
 -0.000000	 -0.000000	diff=6.41082e-12
 -0.000000	 -0.000000	diff=9.21766e-13
  0.000000	  0.000000	diff=5.76396e-14
 -0.000000	 -0.000000	diff=4.87555e-13
  0.000000	  0.000000	diff=5.64176e-13
 -0.000000	 -0.000000	diff=4.97767e-13
 -0.000000	 -0.000000	diff=1.12706e-12
  0.000004	  0.000004	diff=4.04121e-11
  0.000002	  0.000002	diff=5.44747e-11
 -0.000000	 -0.000000	diff=5.42168e-13
  0.000000	  0.000000	diff=1.00129e-12
 -0.000000	 -0.000000	diff=2.59726e-13
  0.000000	  0.000000	diff=1.53424e-13
 -0.000000	 -0.000000	diff=1.38418e-13
 -0.000000	 -0.000000	diff=4.62475e-15
  0.000000	  0.000000	diff=9.0896e-11
  0.000000	  0.000000	diff=2.90327e-13
  0.000000	  0.000000	diff=9.04114e-13
 -0.000000	 -0.000000	diff=4.81035e-13
  0.000000	  0.000000	diff=2.44186e-13
 -0.000000	 -0.000000	diff=3.44238e-13
  0.000000	  0.000000	diff=2.17695e-13
  0.000000	  0.000000	diff=2.37221e-13
 -0.000000	 -0.000000	diff=6.16539e-13
 -0.000000	 -0.000000	diff=2.32895e-11
  local_diff=2.60416e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.7514e-13
 -0.000000	 -0.000000	diff=3.02987e-13
  0.000000	  0.000000	diff=4.46729e-13
 -0.000000	 -0.000000	diff=3.59273e-13
 -0.000000	 -0.000000	diff=8.70494e-13
 -0.000000	 -0.000000	diff=2.31972e-13
 -0.000002	 -0.000002	diff=2.82919e-13
 -0.000006	 -0.000006	diff=1.97732e-12
 -0.000000	 -0.000000	diff=3.3135e-13
  0.000000	  0.000000	diff=4.87588e-14
 -0.000000	 -0.000000	diff=2.27483e-13
  0.000000	  0.000000	diff=1.77047e-13
  0.000000	  0.000000	diff=6.6402e-13
  0.000000	  0.000000	diff=2.7252e-13
  0.000003	  0.000003	diff=1.94957e-13
  0.000007	  0.000007	diff=2.92656e-12
  0.000000	  0.000000	diff=1.02665e-12
 -0.000000	 -0.000000	diff=6.36301e-13
  0.000000	  0.000000	diff=5.55065e-13
 -0.000000	 -0.000000	diff=4.44166e-13
  0.000000	 -0.000000	diff=2.67035e-13
 -0.000000	 -0.000000	diff=3.52227e-13
 -0.000000	 -0.000000	diff=6.1593e-11
 -0.000000	 -0.000000	diff=1.19263e-12
 -0.000000	 -0.000000	diff=8.24502e-13
  0.000000	  0.000000	diff=4.84766e-13
 -0.000000	 -0.000000	diff=2.13293e-13
  0.000000	  0.000000	diff=3.1948e-13
  0.000000	  0.000000	diff=3.27929e-13
  0.000000	  0.000000	diff=1.1748e-12
  0.000000	  0.000000	diff=5.73847e-13
  0.000000	  0.000000	diff=1.78847e-10
  local_diff=2.58322e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.97487e-13
  0.000000	  0.000000	diff=3.86632e-15
 -0.000000	 -0.000000	diff=7.84031e-14
 -0.000000	 -0.000000	diff=1.45211e-12
  0.000000	  0.000000	diff=3.70046e-13
  0.000000	  0.000000	diff=1.50397e-13
  0.000000	  0.000000	diff=5.66907e-13
 -0.000007	 -0.000007	diff=4.81789e-11
 -0.000000	 -0.000000	diff=8.82906e-13
 -0.000000	 -0.000000	diff=9.15281e-13
  0.000000	  0.000000	diff=4.51061e-13
  0.000000	  0.000000	diff=1.41721e-12
 -0.000000	 -0.000000	diff=6.23775e-13
 -0.000000	 -0.000000	diff=6.99282e-13
 -0.000001	 -0.000001	diff=3.5108e-11
  0.000002	  0.000002	diff=1.66585e-10
  0.000000	  0.000000	diff=1.20105e-13
  0.000000	  0.000000	diff=1.79657e-13
  0.000000	 -0.000000	diff=2.43903e-13
  0.000000	  0.000000	diff=1.43603e-13
  0.000000	 -0.000000	diff=9.87865e-14
  0.000000	  0.000000	diff=3.11676e-13
  0.000000	  0.000000	diff=8.00094e-13
  0.000000	  0.000000	diff=1.29474e-12
  0.000000	  0.000000	diff=4.14207e-14
  0.000000	  0.000000	diff=8.14659e-14
  0.000000	 -0.000000	diff=8.17104e-14
  0.000000	  0.000000	diff=2.76634e-14
  0.000000	 -0.000000	diff=2.3187e-14
  0.000000	  0.000000	diff=8.63972e-14
  0.000000	  0.000000	diff=9.24202e-13
  0.000000	  0.000000	diff=1.01171e-12
 -0.000000	 -0.000000	diff=4.19603e-13
 -0.000000	 -0.000000	diff=1.06285e-13
  0.000000	  0.000000	diff=3.61493e-13
  0.000000	  0.000000	diff=3.43733e-14
 -0.000000	 -0.000000	diff=6.99114e-13
 -0.000000	 -0.000000	diff=1.18094e-13
 -0.000000	 -0.000000	diff=2.26806e-10
  0.000000	  0.000000	diff=3.42172e-11
 -0.000000	 -0.000000	diff=2.26795e-13
  0.000000	  0.000000	diff=7.51944e-13
 -0.000000	 -0.000000	diff=3.20696e-13
 -0.000000	 -0.000000	diff=1.34944e-12
  0.000000	  0.000000	diff=5.41022e-13
  0.000000	  0.000000	diff=7.34384e-14
  0.000000	  0.000000	diff=3.03559e-12
 -0.000000	 -0.000000	diff=2.02638e-10
  local_diff=7.3545e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.5559e-13
  0.000000	  0.000000	diff=3.18992e-13
  0.000000	  0.000000	diff=5.47194e-13
 -0.000000	 -0.000000	diff=9.14147e-13
  0.000000	  0.000000	diff=4.42876e-13
 -0.000000	 -0.000000	diff=3.93039e-13
 -0.000001	 -0.000001	diff=5.15393e-13
 -0.000004	 -0.000004	diff=5.63686e-12
  0.000000	  0.000000	diff=5.52836e-13
 -0.000000	 -0.000000	diff=1.91588e-13
 -0.000000	 -0.000000	diff=1.2746e-13
 -0.000000	 -0.000000	diff=2.92164e-13
 -0.000000	 -0.000000	diff=5.41141e-13
 -0.000000	 -0.000000	diff=2.09824e-14
 -0.000001	 -0.000001	diff=2.46439e-13
 -0.000002	 -0.000002	diff=5.36453e-13
 -0.000000	 -0.000000	diff=5.33346e-13
  0.000000	 -0.000000	diff=8.32935e-13
  0.000000	  0.000000	diff=8.62117e-13
 -0.000000	 -0.000000	diff=1.10782e-13
  0.000000	  0.000000	diff=2.54097e-13
 -0.000000	 -0.000000	diff=1.85759e-13
 -0.000000	 -0.000000	diff=4.1172e-10
 -0.000000	 -0.000000	diff=1.92156e-11
  0.000000	  0.000000	diff=4.67402e-13
  0.000000	  0.000000	diff=5.11687e-14
 -0.000000	 -0.000000	diff=2.95164e-13
  0.000000	  0.000000	diff=1.34745e-12
 -0.000000	 -0.000000	diff=1.36341e-13
  0.000000	  0.000000	diff=5.12304e-13
  0.000000	  0.000000	diff=2.59125e-12
  0.000000	  0.000000	diff=8.46193e-10
  local_diff=1.29684e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=6.29923e-10
 -0.000001	 -0.000001	diff=7.67336e-10
  0.000001	  0.000001	diff=6.90255e-10
 -0.000000	 -0.000000	diff=1.07011e-09
  local_diff=3.15762e-09
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=6.89482e-10
 -0.000000	 -0.000000	diff=8.65476e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000007	 -0.000007	diff=2.33954e-09
 -0.000001	 -0.000001	diff=6.92286e-10
 -0.000009	 -0.000009	diff=1.1099e-09
 -0.000000	 -0.000000	diff=2.59277e-10
  local_diff=5.17703e-09
# W_h, [2 4]
  0.000000	  0.000000	diff=2.03784e-12
 -0.000004	 -0.000004	diff=1.86989e-12
  0.000000	  0.000000	diff=2.16946e-12
  0.000004	  0.000004	diff=1.29881e-12
 -0.000003	 -0.000003	diff=8.35499e-12
  0.000001	  0.000001	diff=2.41188e-12
  0.000011	  0.000011	diff=8.07261e-11
 -0.000001	 -0.000001	diff=3.27002e-11
  local_diff=1.31569e-10
# W_soft, [5 2]
  0.000031	  0.000031	diff=1.22578e-12
  0.000031	  0.000031	diff=1.50155e-12
 -0.000005	 -0.000005	diff=2.14331e-12
 -0.000037	 -0.000037	diff=1.86112e-12
 -0.000020	 -0.000020	diff=1.79475e-12
  0.000024	  0.000024	diff=1.45646e-12
  0.000024	  0.000024	diff=1.02927e-12
 -0.000009	 -0.000009	diff=8.32395e-13
 -0.000027	 -0.000027	diff=1.32863e-12
 -0.000012	 -0.000012	diff=1.74813e-12
  local_diff=1.49214e-11
# Num params=182, abs_diff=1.10322e-08
Elapsed time is 2.474019 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.31621e-12
  0.000000	  0.000000	diff=5.52343e-13
  0.000000	  0.000000	diff=9.34988e-13
  0.000000	  0.000000	diff=4.50825e-13
  0.000000	  0.000000	diff=3.72512e-13
  0.000000	  0.000000	diff=1.98733e-13
 -0.000011	 -0.000011	diff=8.84253e-11
  0.000007	  0.000007	diff=8.7564e-11
 -0.000000	 -0.000000	diff=2.03204e-13
 -0.000000	 -0.000000	diff=1.03148e-12
 -0.000000	 -0.000000	diff=7.38361e-13
 -0.000000	 -0.000000	diff=1.78631e-12
 -0.000000	 -0.000000	diff=2.61349e-13
 -0.000000	 -0.000000	diff=3.06462e-13
  0.000016	  0.000016	diff=1.94511e-10
 -0.000015	 -0.000015	diff=2.57379e-10
 -0.000000	 -0.000000	diff=3.34199e-13
 -0.000000	 -0.000000	diff=7.65688e-13
 -0.000000	 -0.000000	diff=3.31081e-14
 -0.000000	 -0.000000	diff=6.6221e-13
 -0.000000	 -0.000000	diff=3.27686e-13
  0.000000	  0.000000	diff=8.45683e-14
  0.000000	  0.000000	diff=1.03373e-10
 -0.000000	 -0.000000	diff=8.36996e-13
  0.000000	  0.000000	diff=1.29982e-12
  0.000000	  0.000000	diff=2.74183e-13
  0.000000	  0.000000	diff=3.98802e-14
  0.000000	  0.000000	diff=2.93106e-13
  0.000000	  0.000000	diff=3.41689e-13
  0.000000	  0.000000	diff=2.37731e-13
 -0.000000	 -0.000000	diff=2.79537e-13
  0.000000	  0.000000	diff=3.90692e-10
  local_diff=1.13591e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.03599e-13
  0.000000	  0.000000	diff=5.17043e-13
 -0.000000	 -0.000000	diff=5.29157e-13
  0.000000	  0.000000	diff=4.75126e-13
 -0.000000	 -0.000000	diff=1.037e-12
 -0.000000	 -0.000000	diff=5.83128e-14
  0.000034	  0.000034	diff=9.90651e-12
  0.000007	  0.000007	diff=6.08391e-12
  0.000000	  0.000000	diff=3.49285e-13
 -0.000000	 -0.000000	diff=6.67091e-13
  0.000000	  0.000000	diff=5.39419e-13
 -0.000000	 -0.000000	diff=4.29655e-13
  0.000000	  0.000000	diff=1.21428e-13
  0.000000	  0.000000	diff=2.00178e-13
 -0.000039	 -0.000039	diff=8.96773e-12
 -0.000008	 -0.000008	diff=5.56894e-12
 -0.000000	 -0.000000	diff=1.21721e-12
  0.000000	  0.000000	diff=1.19084e-12
 -0.000000	 -0.000000	diff=4.70931e-13
  0.000000	  0.000000	diff=2.05496e-13
 -0.000000	 -0.000000	diff=1.17678e-12
 -0.000000	 -0.000000	diff=2.47211e-13
  0.000001	  0.000001	diff=3.98049e-10
  0.000000	  0.000000	diff=1.0367e-13
  0.000000	  0.000000	diff=1.08783e-12
 -0.000000	 -0.000000	diff=7.97024e-14
  0.000000	  0.000000	diff=4.48404e-13
 -0.000000	 -0.000000	diff=3.00847e-13
  0.000000	  0.000000	diff=6.25214e-13
  0.000000	  0.000000	diff=2.24392e-13
 -0.000001	 -0.000001	diff=2.11553e-13
 -0.000000	 -0.000000	diff=1.73813e-10
  local_diff=6.15407e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.69408e-13
 -0.000000	 -0.000000	diff=3.54196e-13
 -0.000000	 -0.000000	diff=9.29245e-13
  0.000000	  0.000000	diff=5.75577e-13
 -0.000000	 -0.000000	diff=6.72091e-14
 -0.000000	 -0.000000	diff=4.00273e-13
  0.000008	  0.000008	diff=3.87779e-11
  0.000009	  0.000009	diff=5.28238e-11
  0.000000	  0.000000	diff=8.30622e-13
  0.000000	  0.000000	diff=6.64333e-13
  0.000000	  0.000000	diff=2.03377e-12
 -0.000000	 -0.000000	diff=2.54673e-12
  0.000000	  0.000000	diff=4.05248e-13
  0.000000	  0.000000	diff=4.07635e-13
 -0.000011	 -0.000011	diff=1.48571e-10
 -0.000016	 -0.000016	diff=1.13949e-07
  0.000000	 -0.000000	diff=9.2997e-13
  0.000000	 -0.000000	diff=1.30477e-13
  0.000000	  0.000000	diff=9.94296e-13
  0.000000	 -0.000000	diff=1.16394e-13
  0.000000	  0.000000	diff=6.93982e-14
  0.000000	 -0.000000	diff=9.2571e-13
 -0.000000	 -0.000000	diff=1.7322e-14
 -0.000000	 -0.000000	diff=5.19932e-13
  0.000000	  0.000000	diff=7.9129e-15
  0.000000	 -0.000000	diff=4.87123e-15
 -0.000000	 -0.000000	diff=6.03213e-13
  0.000000	  0.000000	diff=6.35027e-13
  0.000000	 -0.000000	diff=9.33646e-14
  0.000000	  0.000000	diff=6.0571e-14
 -0.000000	 -0.000000	diff=1.33303e-12
 -0.000000	 -0.000000	diff=9.28898e-14
  0.000000	  0.000000	diff=5.3017e-13
  0.000000	  0.000000	diff=5.80599e-13
  0.000000	  0.000000	diff=7.84909e-13
 -0.000000	 -0.000000	diff=5.71754e-13
  0.000000	  0.000000	diff=8.22481e-13
 -0.000000	 -0.000000	diff=2.4971e-13
 -0.000001	 -0.000001	diff=1.4325e-09
 -0.000001	 -0.000001	diff=1.32523e-11
 -0.000000	 -0.000000	diff=6.48839e-13
 -0.000000	 -0.000000	diff=3.11391e-13
 -0.000000	 -0.000000	diff=3.6093e-14
  0.000000	  0.000000	diff=2.43318e-13
 -0.000000	 -0.000000	diff=3.64625e-13
  0.000000	  0.000000	diff=5.21646e-14
  0.000000	  0.000000	diff=9.16542e-12
  0.000001	  0.000001	diff=1.29954e-09
  local_diff=1.16965e-07
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.13942e-12
 -0.000000	 -0.000000	diff=7.13161e-13
 -0.000000	 -0.000000	diff=9.3051e-13
  0.000000	  0.000000	diff=1.00736e-12
 -0.000000	 -0.000000	diff=3.93491e-13
  0.000000	  0.000000	diff=1.80987e-13
  0.000032	  0.000032	diff=2.59374e-11
  0.000012	  0.000012	diff=8.02837e-12
  0.000000	  0.000000	diff=7.17968e-13
  0.000000	  0.000000	diff=1.41022e-13
 -0.000000	 -0.000000	diff=9.14003e-13
  0.000000	  0.000000	diff=1.83987e-13
 -0.000000	 -0.000000	diff=1.0263e-12
  0.000000	  0.000000	diff=7.45756e-13
 -0.000005	 -0.000005	diff=5.90308e-11
 -0.000002	 -0.000002	diff=7.37449e-12
  0.000000	  0.000000	diff=1.03869e-12
 -0.000000	 -0.000000	diff=7.83274e-13
 -0.000000	 -0.000000	diff=6.64925e-13
  0.000000	  0.000000	diff=1.02934e-13
 -0.000000	 -0.000000	diff=4.27355e-13
  0.000000	  0.000000	diff=7.87749e-13
  0.000001	  0.000001	diff=4.32714e-09
  0.000001	  0.000001	diff=1.53376e-11
 -0.000000	 -0.000000	diff=8.76852e-14
  0.000000	  0.000000	diff=4.95516e-13
  0.000000	  0.000000	diff=9.04981e-14
 -0.000000	 -0.000000	diff=5.61283e-13
  0.000000	  0.000000	diff=3.56602e-13
 -0.000000	 -0.000000	diff=6.54929e-14
 -0.000002	 -0.000002	diff=8.23861e-12
 -0.000001	 -0.000001	diff=2.08975e-09
  local_diff=6.55439e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=3.9544e-09
 -0.000017	 -0.000017	diff=1.69924e-08
  0.000007	  0.000007	diff=4.10764e-09
 -0.000015	 -0.000015	diff=1.58593e-08
  local_diff=4.09138e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.1248e-09
 -0.000003	 -0.000003	diff=2.18218e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.7246e-09
 -0.000002	 -0.000002	diff=1.66293e-09
 -0.000017	 -0.000017	diff=4.92777e-09
 -0.000001	 -0.000001	diff=1.11169e-09
  local_diff=1.5734e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=4.06858e-13
  0.000000	 -0.000000	diff=2.55439e-13
 -0.000000	 -0.000000	diff=3.45152e-14
  0.000000	  0.000000	diff=1.41914e-13
  local_diff=8.38726e-13
# v_pos, [1 2]
 -0.000000	 -0.000000	diff=7.59412e-13
 -0.000000	 -0.000000	diff=7.73219e-13
  local_diff=1.53263e-12
# W_h, [2 4]
  0.000023	  0.000023	diff=7.69881e-13
  0.000008	  0.000008	diff=1.07702e-13
 -0.000029	 -0.000029	diff=3.00442e-13
 -0.000010	 -0.000010	diff=1.55489e-14
  0.000013	  0.000013	diff=2.43289e-11
  0.000006	  0.000006	diff=2.95409e-13
 -0.000026	 -0.000026	diff=2.0875e-10
 -0.000014	 -0.000014	diff=1.84212e-11
  local_diff=2.52989e-10
# W_soft, [5 2]
 -0.000019	 -0.000019	diff=1.75008e-14
 -0.000019	 -0.000019	diff=5.77963e-13
  0.000008	  0.000008	diff=1.73708e-13
  0.000010	  0.000010	diff=1.36757e-13
  0.000020	  0.000020	diff=5.50159e-13
  0.000020	  0.000020	diff=2.72884e-13
  0.000020	  0.000020	diff=3.89366e-13
 -0.000005	 -0.000005	diff=5.23371e-13
 -0.000012	 -0.000012	diff=1.02778e-12
 -0.000022	 -0.000022	diff=8.17765e-14
  local_diff=3.75127e-12
# Num params=188, abs_diff=1.82177e-07
Elapsed time is 3.606807 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.2309e-12
 -0.000000	 -0.000000	diff=1.57639e-13
  0.000000	  0.000000	diff=2.6477e-12
 -0.000000	 -0.000000	diff=2.32505e-13
  0.000000	  0.000000	diff=1.02203e-13
  0.000000	  0.000000	diff=9.59383e-13
 -0.000019	 -0.000019	diff=3.89113e-11
 -0.000002	 -0.000002	diff=2.97361e-11
 -0.000000	 -0.000000	diff=1.7536e-13
  0.000000	  0.000000	diff=3.94897e-13
 -0.000000	 -0.000000	diff=1.49506e-12
  0.000000	  0.000000	diff=1.38769e-12
 -0.000000	 -0.000000	diff=4.84221e-13
 -0.000000	 -0.000000	diff=9.87191e-13
  0.000027	  0.000027	diff=8.60279e-11
  0.000006	  0.000006	diff=1.4218e-10
 -0.000000	 -0.000000	diff=1.0081e-12
  0.000000	  0.000000	diff=2.09958e-13
 -0.000000	 -0.000000	diff=1.24091e-12
  0.000000	  0.000000	diff=7.12224e-13
 -0.000000	 -0.000000	diff=9.345e-13
 -0.000000	 -0.000000	diff=1.5165e-13
  0.000000	  0.000000	diff=4.90604e-10
  0.000000	  0.000000	diff=5.52801e-13
  0.000000	  0.000000	diff=1.13917e-13
 -0.000000	 -0.000000	diff=2.69282e-13
  0.000000	  0.000000	diff=8.53703e-13
 -0.000000	 -0.000000	diff=7.33568e-13
  0.000000	  0.000000	diff=3.90127e-13
  0.000000	  0.000000	diff=8.9383e-13
 -0.000000	 -0.000000	diff=2.07015e-12
 -0.000000	 -0.000000	diff=2.18159e-10
  local_diff=1.02601e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=7.99871e-13
 -0.000000	 -0.000000	diff=6.88909e-13
  0.000000	  0.000000	diff=2.3206e-13
 -0.000000	 -0.000000	diff=9.26583e-13
 -0.000000	 -0.000000	diff=4.717e-13
 -0.000000	 -0.000000	diff=3.08333e-13
 -0.000011	 -0.000011	diff=5.30776e-12
 -0.000031	 -0.000031	diff=2.68974e-12
 -0.000000	 -0.000000	diff=4.46151e-13
  0.000000	  0.000000	diff=4.27714e-13
 -0.000000	 -0.000000	diff=6.04165e-13
  0.000000	  0.000000	diff=1.06084e-12
  0.000000	  0.000000	diff=5.77611e-13
  0.000000	  0.000000	diff=1.54805e-12
  0.000012	  0.000012	diff=3.85542e-12
  0.000035	  0.000035	diff=4.97097e-14
  0.000000	  0.000000	diff=8.23883e-13
 -0.000000	 -0.000000	diff=7.82645e-13
  0.000000	  0.000000	diff=4.80994e-13
 -0.000000	 -0.000000	diff=5.45734e-13
 -0.000000	 -0.000000	diff=3.47792e-13
 -0.000000	 -0.000000	diff=9.6984e-13
 -0.000000	 -0.000000	diff=3.03965e-10
 -0.000001	 -0.000001	diff=4.11468e-14
 -0.000000	 -0.000000	diff=3.6524e-13
  0.000000	  0.000000	diff=7.98009e-14
 -0.000000	 -0.000000	diff=1.48163e-13
  0.000000	  0.000000	diff=9.56211e-13
  0.000000	  0.000000	diff=1.572e-12
  0.000000	  0.000000	diff=6.76652e-13
  0.000000	  0.000000	diff=1.21539e-13
  0.000001	  0.000001	diff=7.32265e-10
  local_diff=1.06414e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.48229e-13
  0.000000	  0.000000	diff=1.05382e-12
  0.000000	  0.000000	diff=7.17694e-14
 -0.000000	 -0.000000	diff=2.89912e-13
  0.000000	  0.000000	diff=4.59649e-13
  0.000000	  0.000000	diff=1.47605e-12
 -0.000004	 -0.000004	diff=3.06655e-11
 -0.000014	 -0.000014	diff=8.67397e-11
 -0.000000	 -0.000000	diff=1.11918e-12
 -0.000000	 -0.000000	diff=8.24279e-13
 -0.000000	 -0.000000	diff=9.06094e-13
  0.000000	  0.000000	diff=6.71648e-12
 -0.000000	 -0.000000	diff=3.46381e-13
 -0.000000	 -0.000000	diff=8.78578e-13
  0.000011	  0.000011	diff=1.8881e-10
  0.000051	  0.000051	diff=5.86157e-11
 -0.000000	 -0.000000	diff=1.17611e-12
  0.000000	 -0.000000	diff=4.17005e-13
  0.000000	  0.000000	diff=9.44246e-13
  0.000000	 -0.000000	diff=6.80654e-14
  0.000000	  0.000000	diff=8.41557e-13
 -0.000000	 -0.000000	diff=9.03374e-13
 -0.000000	 -0.000000	diff=4.63123e-13
 -0.000000	 -0.000000	diff=3.29304e-13
  0.000000	 -0.000000	diff=3.45388e-14
  0.000000	 -0.000000	diff=8.78721e-14
  0.000000	 -0.000000	diff=7.18203e-15
  0.000000	  0.000000	diff=5.05752e-14
  0.000000	 -0.000000	diff=3.69317e-14
  0.000000	 -0.000000	diff=7.55868e-13
 -0.000000	 -0.000000	diff=2.47048e-13
 -0.000000	 -0.000000	diff=1.01103e-12
 -0.000000	 -0.000000	diff=5.27165e-13
 -0.000000	 -0.000000	diff=6.87187e-13
 -0.000000	 -0.000000	diff=8.28824e-13
  0.000000	  0.000000	diff=5.24819e-13
 -0.000000	 -0.000000	diff=1.0098e-12
  0.000000	  0.000000	diff=1.21192e-12
  0.000000	  0.000000	diff=7.23633e-10
  0.000001	  0.000001	diff=8.15818e-11
  0.000000	  0.000000	diff=1.7469e-13
  0.000000	  0.000000	diff=1.32867e-12
  0.000000	  0.000000	diff=3.06473e-13
 -0.000000	 -0.000000	diff=4.38738e-13
  0.000000	  0.000000	diff=6.81803e-14
 -0.000000	 -0.000000	diff=1.40311e-13
 -0.000000	 -0.000000	diff=5.61944e-12
 -0.000001	 -0.000001	diff=2.08168e-09
  local_diff=3.28646e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=5.9455e-13
  0.000000	  0.000000	diff=1.07781e-12
  0.000000	  0.000000	diff=1.29619e-12
 -0.000000	 -0.000000	diff=4.74204e-15
  0.000000	  0.000000	diff=8.94596e-13
 -0.000000	 -0.000000	diff=3.23382e-13
 -0.000013	 -0.000013	diff=1.93341e-11
 -0.000008	 -0.000008	diff=2.81251e-11
 -0.000000	 -0.000000	diff=1.06933e-13
 -0.000000	 -0.000000	diff=2.4917e-13
  0.000000	  0.000000	diff=2.26123e-13
  0.000000	  0.000000	diff=8.65334e-13
 -0.000000	 -0.000000	diff=1.12239e-12
  0.000000	  0.000000	diff=5.88617e-13
 -0.000001	 -0.000001	diff=2.42624e-11
  0.000001	  0.000001	diff=5.92268e-12
 -0.000000	 -0.000000	diff=8.08888e-13
  0.000000	  0.000000	diff=1.01681e-12
  0.000000	  0.000000	diff=1.02848e-12
 -0.000000	 -0.000000	diff=1.06918e-12
  0.000000	  0.000000	diff=4.19007e-13
 -0.000000	 -0.000000	diff=1.02074e-12
 -0.000001	 -0.000001	diff=2.01893e-09
 -0.000001	 -0.000001	diff=5.63943e-11
  0.000000	  0.000000	diff=1.04435e-12
 -0.000000	 -0.000000	diff=1.19681e-13
 -0.000000	 -0.000000	diff=4.80025e-14
  0.000000	  0.000000	diff=9.20859e-13
 -0.000000	 -0.000000	diff=1.50122e-13
  0.000000	  0.000000	diff=2.09358e-13
  0.000001	  0.000001	diff=5.87079e-12
  0.000001	  0.000001	diff=4.28731e-09
  local_diff=6.46135e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000010	  0.000010	diff=3.91357e-09
 -0.000012	 -0.000012	diff=1.04559e-08
  0.000009	  0.000009	diff=3.59209e-09
 -0.000006	 -0.000006	diff=6.42968e-09
  local_diff=2.43913e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000030	  0.000030	diff=1.6923e-09
  0.000002	  0.000002	diff=1.91118e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000044	  0.000044	diff=7.94871e-09
  0.000001	  0.000001	diff=1.67169e-09
  0.000026	  0.000026	diff=1.78527e-09
  0.000001	  0.000001	diff=9.93849e-10
  local_diff=1.6003e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.91363e-15
  0.000000	 -0.000000	diff=2.33469e-15
  0.000000	 -0.000000	diff=2.46117e-15
  0.000000	  0.000000	diff=3.01129e-15
  local_diff=9.72078e-15
# W_h, [2 4]
 -0.000030	 -0.000030	diff=4.56634e-13
 -0.000036	 -0.000036	diff=1.47777e-12
  0.000038	  0.000038	diff=1.11086e-12
  0.000045	  0.000045	diff=1.31355e-12
 -0.000009	 -0.000009	diff=1.6458e-11
 -0.000011	 -0.000011	diff=1.33404e-11
  0.000013	  0.000013	diff=1.80711e-10
  0.000022	  0.000022	diff=1.68781e-10
  local_diff=3.83649e-10
# W_soft, [5 2]
  0.000028	  0.000028	diff=7.23507e-13
  0.000028	  0.000028	diff=6.15663e-14
  0.000001	  0.000001	diff=3.93677e-13
 -0.000038	 -0.000038	diff=4.57176e-13
 -0.000020	 -0.000020	diff=4.95701e-13
  0.000003	  0.000003	diff=7.69384e-13
  0.000003	  0.000003	diff=1.2449e-12
 -0.000003	 -0.000003	diff=2.56793e-13
 -0.000001	 -0.000001	diff=4.67095e-14
 -0.000001	 -0.000001	diff=8.03285e-13
  local_diff=5.2527e-12
# Num params=186, abs_diff=5.26211e-08
Elapsed time is 2.719634 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=5.40697e-13
  0.000000	  0.000000	diff=6.18138e-13
  0.000000	  0.000000	diff=7.20277e-13
  0.000000	  0.000000	diff=7.03089e-13
  0.000000	  0.000000	diff=4.82951e-13
  0.000000	  0.000000	diff=3.75894e-13
 -0.000025	 -0.000025	diff=2.27635e-11
  0.000009	  0.000009	diff=1.11344e-10
 -0.000000	 -0.000000	diff=7.04633e-13
 -0.000000	 -0.000000	diff=7.91751e-15
 -0.000000	 -0.000000	diff=1.60735e-12
 -0.000000	 -0.000000	diff=2.05998e-12
 -0.000000	 -0.000000	diff=1.34315e-12
 -0.000000	 -0.000000	diff=5.18732e-13
  0.000036	  0.000036	diff=4.92781e-11
 -0.000019	 -0.000019	diff=3.30245e-10
 -0.000000	 -0.000000	diff=5.25377e-13
 -0.000000	 -0.000000	diff=4.63394e-13
 -0.000000	 -0.000000	diff=1.3933e-13
 -0.000000	 -0.000000	diff=1.07395e-12
 -0.000000	 -0.000000	diff=1.94008e-13
 -0.000000	 -0.000000	diff=1.21374e-13
  0.000000	  0.000000	diff=2.17339e-10
 -0.000000	 -0.000000	diff=4.86716e-13
  0.000000	  0.000000	diff=6.48939e-13
  0.000000	  0.000000	diff=4.74796e-13
  0.000000	  0.000000	diff=4.56167e-14
  0.000000	  0.000000	diff=1.74365e-14
  0.000000	  0.000000	diff=1.52424e-12
  0.000000	  0.000000	diff=6.82098e-13
 -0.000000	 -0.000000	diff=9.03721e-13
  0.000000	  0.000000	diff=4.54071e-10
  local_diff=1.20202e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.05154e-13
  0.000000	  0.000000	diff=7.75175e-13
 -0.000000	 -0.000000	diff=1.18732e-12
  0.000000	  0.000000	diff=9.61231e-13
 -0.000000	 -0.000000	diff=1.09592e-13
 -0.000000	 -0.000000	diff=4.73532e-13
  0.000054	  0.000054	diff=2.06052e-12
  0.000007	  0.000007	diff=5.09863e-12
  0.000000	  0.000000	diff=1.48051e-13
 -0.000000	 -0.000000	diff=7.16361e-13
  0.000000	  0.000000	diff=6.06142e-13
 -0.000000	 -0.000000	diff=4.59178e-14
  0.000000	  0.000000	diff=6.18243e-14
  0.000000	  0.000000	diff=1.10579e-13
 -0.000063	 -0.000063	diff=1.8987e-12
 -0.000007	 -0.000007	diff=5.17418e-12
 -0.000000	 -0.000000	diff=2.07554e-13
  0.000000	  0.000000	diff=1.09812e-12
 -0.000000	 -0.000000	diff=4.49226e-13
  0.000000	  0.000000	diff=1.68916e-13
 -0.000000	 -0.000000	diff=4.13639e-13
 -0.000000	 -0.000000	diff=1.3831e-12
  0.000001	  0.000001	diff=7.87117e-10
  0.000000	  0.000000	diff=2.91306e-13
  0.000000	  0.000000	diff=4.01329e-13
 -0.000000	 -0.000000	diff=1.39308e-13
  0.000000	  0.000000	diff=4.08373e-13
 -0.000000	 -0.000000	diff=2.69857e-13
  0.000000	  0.000000	diff=4.03687e-13
  0.000000	  0.000000	diff=1.95762e-13
 -0.000001	 -0.000001	diff=1.25012e-12
 -0.000000	 -0.000000	diff=1.75835e-10
  local_diff=9.89566e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.07141e-13
 -0.000000	 -0.000000	diff=6.33061e-13
 -0.000000	 -0.000000	diff=2.33595e-13
  0.000000	  0.000000	diff=5.29131e-13
 -0.000000	 -0.000000	diff=3.2592e-14
 -0.000000	 -0.000000	diff=6.72325e-13
  0.000008	  0.000008	diff=3.95013e-11
  0.000009	  0.000009	diff=5.22489e-11
  0.000000	  0.000000	diff=6.11253e-13
  0.000000	  0.000000	diff=2.59648e-13
  0.000000	  0.000000	diff=2.03292e-12
 -0.000000	 -0.000000	diff=2.64183e-12
  0.000000	  0.000000	diff=1.09764e-12
  0.000000	  0.000000	diff=7.40188e-14
 -0.000011	 -0.000011	diff=1.48201e-10
 -0.000016	 -0.000016	diff=1.51705e-11
  0.000000	 -0.000000	diff=6.37402e-13
  0.000000	 -0.000000	diff=3.46665e-13
  0.000000	  0.000000	diff=2.96721e-13
  0.000000	 -0.000000	diff=7.41248e-14
  0.000000	  0.000000	diff=6.17827e-14
  0.000000	 -0.000000	diff=3.75456e-13
 -0.000000	 -0.000000	diff=1.22097e-12
 -0.000000	 -0.000000	diff=2.38259e-14
  0.000000	  0.000000	diff=2.28325e-13
  0.000000	  0.000000	diff=6.53023e-14
  0.000000	 -0.000000	diff=4.62652e-13
  0.000000	  0.000000	diff=2.62421e-15
  0.000000	 -0.000000	diff=2.22004e-13
  0.000000	  0.000000	diff=6.22389e-14
  0.000000	  0.000000	diff=2.81633e-13
  0.000000	  0.000000	diff=5.13549e-14
  0.000000	  0.000000	diff=1.74128e-13
  0.000000	  0.000000	diff=1.60533e-12
  0.000000	  0.000000	diff=7.60329e-14
 -0.000000	 -0.000000	diff=1.45607e-13
  0.000000	  0.000000	diff=1.17786e-13
 -0.000000	 -0.000000	diff=5.06536e-13
 -0.000001	 -0.000001	diff=1.43254e-09
 -0.000001	 -0.000001	diff=1.31919e-11
 -0.000000	 -0.000000	diff=5.9177e-14
 -0.000000	 -0.000000	diff=1.11185e-12
 -0.000000	 -0.000000	diff=7.52937e-13
  0.000000	  0.000000	diff=2.4228e-13
 -0.000000	 -0.000000	diff=3.49152e-13
  0.000000	  0.000000	diff=5.56639e-14
  0.000000	  0.000000	diff=9.28521e-12
  0.000001	  0.000001	diff=1.3003e-09
  local_diff=3.02938e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=2.91971e-13
 -0.000000	 -0.000000	diff=1.33976e-14
 -0.000000	 -0.000000	diff=2.18641e-13
  0.000000	  0.000000	diff=2.91638e-13
 -0.000000	 -0.000000	diff=1.11047e-12
  0.000000	  0.000000	diff=9.05238e-13
  0.000032	  0.000032	diff=2.59906e-11
  0.000012	  0.000012	diff=9.03224e-12
  0.000000	  0.000000	diff=2.15891e-14
  0.000000	  0.000000	diff=5.59855e-13
 -0.000000	 -0.000000	diff=8.84211e-13
  0.000000	  0.000000	diff=9.21977e-13
 -0.000000	 -0.000000	diff=3.06835e-13
  0.000000	  0.000000	diff=7.55161e-13
 -0.000005	 -0.000005	diff=5.7663e-11
 -0.000002	 -0.000002	diff=8.51174e-12
  0.000000	  0.000000	diff=1.09311e-12
 -0.000000	 -0.000000	diff=7.83741e-13
 -0.000000	 -0.000000	diff=6.64998e-13
  0.000000	  0.000000	diff=6.07613e-13
 -0.000000	 -0.000000	diff=4.27229e-13
  0.000000	  0.000000	diff=7.69347e-14
  0.000001	  0.000001	diff=4.32908e-09
  0.000001	  0.000001	diff=1.55997e-11
 -0.000000	 -0.000000	diff=8.71241e-14
  0.000000	  0.000000	diff=9.24445e-13
  0.000000	  0.000000	diff=9.04911e-14
 -0.000000	 -0.000000	diff=1.48912e-13
  0.000000	  0.000000	diff=3.5693e-13
 -0.000000	 -0.000000	diff=6.43968e-13
 -0.000002	 -0.000002	diff=7.73204e-12
 -0.000001	 -0.000001	diff=2.08762e-09
  local_diff=6.55342e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000015	  0.000015	diff=7.6491e-09
 -0.000030	 -0.000030	diff=2.91299e-08
  0.000013	  0.000013	diff=7.01695e-09
 -0.000025	 -0.000025	diff=2.5038e-08
  local_diff=6.8834e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.12553e-09
 -0.000003	 -0.000003	diff=2.18158e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.72523e-09
 -0.000002	 -0.000002	diff=1.66217e-09
 -0.000017	 -0.000017	diff=4.92814e-09
 -0.000001	 -0.000001	diff=1.11168e-09
  local_diff=1.57343e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=6.57311e-21
  0.000000	 -0.000000	diff=8.778e-21
  0.000000	 -0.000000	diff=1.59249e-20
  0.000000	  0.000000	diff=2.13569e-20
  local_diff=5.26329e-20
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.15715e-12
  0.000000	  0.000000	diff=2.99665e-13
  local_diff=1.45681e-12
# W_h, [2 4]
  0.000055	  0.000055	diff=1.17061e-12
  0.000018	  0.000018	diff=1.11021e-12
 -0.000070	 -0.000070	diff=1.44588e-12
 -0.000023	 -0.000023	diff=3.90783e-13
  0.000013	  0.000013	diff=2.33728e-11
  0.000006	  0.000006	diff=6.03221e-13
 -0.000026	 -0.000026	diff=2.08052e-10
 -0.000014	 -0.000014	diff=1.85702e-11
  local_diff=2.54715e-10
# W_soft, [5 2]
 -0.000031	 -0.000031	diff=7.89404e-13
 -0.000031	 -0.000031	diff=1.9265e-13
  0.000013	  0.000013	diff=3.27006e-13
  0.000003	  0.000003	diff=1.33653e-12
  0.000045	  0.000045	diff=2.32821e-12
  0.000032	  0.000032	diff=1.68971e-12
  0.000032	  0.000032	diff=8.80479e-13
 -0.000010	 -0.000010	diff=7.8026e-13
 -0.000005	 -0.000005	diff=1.10666e-12
 -0.000048	 -0.000048	diff=1.22723e-12
  local_diff=1.06581e-11
# Num params=188, abs_diff=9.66095e-08
Elapsed time is 2.890601 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.5358e-12
 -0.000000	 -0.000000	diff=8.61893e-13
 -0.000000	 -0.000000	diff=8.6042e-13
 -0.000000	 -0.000000	diff=1.00231e-12
 -0.000000	 -0.000000	diff=1.45578e-12
 -0.000000	 -0.000000	diff=1.51699e-12
  0.000013	  0.000013	diff=3.25265e-11
 -0.000006	 -0.000006	diff=3.56242e-11
  0.000000	  0.000000	diff=5.06928e-13
  0.000000	  0.000000	diff=1.39424e-12
  0.000000	  0.000000	diff=5.34452e-13
  0.000000	  0.000000	diff=1.06995e-12
  0.000000	  0.000000	diff=1.12006e-12
  0.000000	  0.000000	diff=1.19792e-12
 -0.000017	 -0.000017	diff=5.85925e-11
  0.000008	  0.000008	diff=6.28768e-11
  0.000000	  0.000000	diff=1.12036e-12
  0.000000	  0.000000	diff=6.12508e-13
  0.000000	  0.000000	diff=1.33228e-12
  0.000000	  0.000000	diff=1.10868e-12
  0.000000	  0.000000	diff=1.26708e-12
  0.000000	  0.000000	diff=1.00023e-12
 -0.000000	 -0.000000	diff=3.38239e-10
  0.000000	  0.000000	diff=3.13636e-12
 -0.000000	 -0.000000	diff=1.1701e-12
 -0.000000	 -0.000000	diff=3.6056e-13
 -0.000000	 -0.000000	diff=1.15296e-12
 -0.000000	 -0.000000	diff=1.0862e-12
 -0.000000	 -0.000000	diff=6.11602e-13
 -0.000000	 -0.000000	diff=1.53388e-12
  0.000000	  0.000000	diff=2.00108e-12
 -0.000000	 -0.000000	diff=3.88149e-10
  local_diff=9.46558e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.76038e-12
  0.000000	  0.000000	diff=1.18757e-12
  0.000000	  0.000000	diff=3.9994e-13
  0.000000	  0.000000	diff=1.74196e-12
 -0.000000	 -0.000000	diff=2.83885e-13
  0.000000	  0.000000	diff=1.45269e-12
  0.000000	  0.000000	diff=6.4573e-13
  0.000019	  0.000019	diff=7.07894e-12
  0.000000	  0.000000	diff=1.49531e-12
 -0.000000	 -0.000000	diff=1.44909e-12
 -0.000000	 -0.000000	diff=1.56034e-12
 -0.000000	 -0.000000	diff=5.14131e-13
  0.000000	  0.000000	diff=8.03901e-13
 -0.000000	 -0.000000	diff=1.21518e-12
 -0.000000	 -0.000000	diff=6.73289e-13
 -0.000015	 -0.000015	diff=4.6172e-12
  0.000000	  0.000000	diff=1.41934e-12
  0.000000	  0.000000	diff=3.36386e-13
  0.000000	  0.000000	diff=1.5128e-12
  0.000000	  0.000000	diff=7.36814e-13
 -0.000000	 -0.000000	diff=1.89665e-12
  0.000000	  0.000000	diff=4.45026e-13
 -0.000000	 -0.000000	diff=1.4509e-10
  0.000000	  0.000000	diff=5.49019e-13
 -0.000000	 -0.000000	diff=6.14498e-13
 -0.000000	 -0.000000	diff=1.61442e-12
 -0.000000	 -0.000000	diff=9.43286e-13
 -0.000000	 -0.000000	diff=8.45298e-13
  0.000000	  0.000000	diff=1.40288e-12
 -0.000000	 -0.000000	diff=2.10209e-12
  0.000000	  0.000000	diff=1.78679e-12
 -0.000000	 -0.000000	diff=4.36281e-10
  local_diff=6.24456e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.82071e-13
  0.000000	  0.000000	diff=1.39598e-12
  0.000000	  0.000000	diff=5.3069e-13
 -0.000000	 -0.000000	diff=2.03233e-12
  0.000000	  0.000000	diff=2.52281e-14
  0.000000	  0.000000	diff=1.95953e-12
 -0.000003	 -0.000003	diff=5.56473e-12
  0.000003	  0.000003	diff=2.87149e-11
 -0.000000	 -0.000000	diff=1.91357e-12
 -0.000000	 -0.000000	diff=1.05934e-12
 -0.000000	 -0.000000	diff=1.12265e-12
  0.000000	  0.000000	diff=1.12746e-12
 -0.000000	 -0.000000	diff=6.82812e-13
 -0.000000	 -0.000000	diff=3.88625e-13
  0.000004	  0.000004	diff=2.12158e-11
  0.000011	  0.000011	diff=6.94152e-11
  0.000000	 -0.000000	diff=2.81727e-14
  0.000000	  0.000000	diff=6.04818e-13
  0.000000	 -0.000000	diff=7.69668e-13
  0.000000	  0.000000	diff=5.89213e-13
  0.000000	 -0.000000	diff=7.21594e-14
  0.000000	  0.000000	diff=1.50914e-12
 -0.000000	 -0.000000	diff=1.1301e-12
  0.000000	  0.000000	diff=3.76405e-13
  0.000000	 -0.000000	diff=2.20418e-14
  0.000000	  0.000000	diff=1.20286e-12
  0.000000	  0.000000	diff=3.12646e-15
  0.000000	  0.000000	diff=1.67148e-12
  0.000000	 -0.000000	diff=1.39511e-14
  0.000000	  0.000000	diff=8.83225e-13
 -0.000000	 -0.000000	diff=1.68177e-12
  0.000000	  0.000000	diff=1.03896e-12
 -0.000000	 -0.000000	diff=9.26995e-13
 -0.000000	 -0.000000	diff=4.08883e-13
 -0.000000	 -0.000000	diff=1.61728e-12
 -0.000000	 -0.000000	diff=2.04502e-12
 -0.000000	 -0.000000	diff=1.15225e-12
 -0.000000	 -0.000000	diff=1.84036e-12
  0.000000	  0.000000	diff=3.12127e-11
  0.000000	  0.000000	diff=3.19763e-11
  0.000000	  0.000000	diff=7.73356e-13
  0.000000	  0.000000	diff=4.61084e-13
  0.000000	  0.000000	diff=5.0132e-13
 -0.000000	 -0.000000	diff=1.61335e-12
  0.000000	  0.000000	diff=1.73892e-12
 -0.000000	 -0.000000	diff=2.05018e-12
  0.000000	  0.000000	diff=3.22962e-13
  0.000000	  0.000000	diff=1.53526e-10
  local_diff=3.81695e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=3.03344e-13
 -0.000000	 -0.000000	diff=1.71405e-12
  0.000000	  0.000000	diff=1.25083e-12
 -0.000000	 -0.000000	diff=1.48057e-12
  0.000000	  0.000000	diff=1.37361e-12
 -0.000000	 -0.000000	diff=6.16609e-13
 -0.000004	 -0.000004	diff=3.15039e-12
  0.000003	  0.000003	diff=2.31524e-11
 -0.000000	 -0.000000	diff=1.5346e-12
 -0.000000	 -0.000000	diff=1.41156e-12
  0.000000	  0.000000	diff=9.2051e-13
 -0.000000	 -0.000000	diff=1.03496e-12
  0.000000	  0.000000	diff=9.07658e-13
 -0.000000	 -0.000000	diff=2.45557e-13
 -0.000005	 -0.000005	diff=4.4159e-12
  0.000005	  0.000005	diff=9.57413e-11
 -0.000000	 -0.000000	diff=1.55948e-12
 -0.000000	 -0.000000	diff=1.02906e-12
  0.000000	  0.000000	diff=1.65737e-12
 -0.000000	 -0.000000	diff=9.45597e-13
  0.000000	  0.000000	diff=1.33956e-12
 -0.000000	 -0.000000	diff=1.40279e-12
 -0.000000	 -0.000000	diff=4.38472e-10
 -0.000000	 -0.000000	diff=4.44171e-11
  0.000000	  0.000000	diff=8.28977e-13
  0.000000	  0.000000	diff=1.18036e-12
 -0.000000	 -0.000000	diff=1.3417e-12
  0.000000	  0.000000	diff=1.87251e-12
 -0.000000	 -0.000000	diff=1.05276e-12
  0.000000	  0.000000	diff=6.56655e-13
  0.000000	  0.000000	diff=7.25683e-13
  0.000001	  0.000001	diff=3.07597e-09
  local_diff=3.7137e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=3.72117e-09
  0.000019	  0.000019	diff=1.29788e-08
 -0.000003	 -0.000003	diff=1.40956e-09
  0.000007	  0.000007	diff=4.88036e-09
  local_diff=2.29899e-08
# W_emb_tgt, [2 5]
  0.000043	  0.000043	diff=1.04284e-08
 -0.000002	 -0.000002	diff=4.58964e-11
  0.000022	  0.000022	diff=1.98808e-09
  0.000001	  0.000001	diff=1.08152e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=1.93765e-09
 -0.000001	 -0.000001	diff=1.96815e-10
  0.000005	  0.000005	diff=7.04624e-10
 -0.000001	 -0.000001	diff=2.6021e-10
  local_diff=1.66432e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.51525e-12
 -0.000000	 -0.000000	diff=1.23319e-12
 -0.000000	 -0.000000	diff=1.83514e-12
  0.000000	  0.000000	diff=5.35816e-13
 -0.000000	 -0.000000	diff=1.58231e-12
  0.000000	  0.000000	diff=1.49179e-12
  0.000000	  0.000000	diff=1.22137e-12
 -0.000000	 -0.000000	diff=3.3389e-13
  0.000000	  0.000000	diff=1.78542e-12
 -0.000000	 -0.000000	diff=1.06261e-12
 -0.000000	 -0.000000	diff=1.2158e-12
 -0.000000	 -0.000000	diff=7.33369e-13
  0.000000	  0.000000	diff=1.41131e-12
 -0.000000	 -0.000000	diff=1.35372e-12
  0.000000	  0.000000	diff=2.44421e-13
 -0.000001	 -0.000001	diff=1.10412e-11
  0.000000	  0.000000	diff=2.27274e-12
  0.000000	 -0.000000	diff=1.39501e-12
  0.000000	 -0.000000	diff=8.9087e-13
  0.000000	  0.000000	diff=1.83044e-12
  0.000000	  0.000000	diff=2.4251e-12
  0.000000	 -0.000000	diff=1.33957e-12
  0.000000	  0.000000	diff=3.04983e-12
 -0.000000	 -0.000000	diff=1.66169e-12
 -0.000000	 -0.000000	diff=1.43757e-12
  0.000000	  0.000000	diff=1.10427e-12
  0.000000	 -0.000000	diff=8.29171e-13
  0.000000	  0.000000	diff=1.97147e-12
 -0.000000	 -0.000000	diff=8.16662e-13
  0.000000	  0.000000	diff=1.92502e-12
 -0.000000	 -0.000000	diff=1.22951e-12
  0.000000	  0.000000	diff=3.99955e-12
  local_diff=5.6775e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.87044e-11
 -0.000000	 -0.000000	diff=1.76976e-10
 -0.000000	 -0.000000	diff=1.35661e-12
 -0.000000	 -0.000000	diff=2.58209e-11
 -0.000000	 -0.000000	diff=1.55753e-12
 -0.000000	 -0.000000	diff=2.95208e-11
 -0.000000	 -0.000000	diff=1.04461e-13
 -0.000000	 -0.000000	diff=5.81833e-11
  local_diff=3.32224e-10
# W_h, [2 4]
 -0.000023	 -0.000023	diff=1.38179e-12
 -0.000005	 -0.000005	diff=1.56151e-12
  0.000028	  0.000028	diff=1.27093e-12
  0.000006	  0.000006	diff=1.32908e-12
 -0.000005	 -0.000005	diff=6.88211e-12
 -0.000002	 -0.000002	diff=2.36272e-12
  0.000004	  0.000004	diff=1.35456e-10
 -0.000006	 -0.000006	diff=4.04394e-11
  local_diff=1.90684e-10
# W_soft, [5 2]
  0.000006	  0.000006	diff=2.04642e-12
 -0.000011	 -0.000011	diff=2.6137e-13
  0.000014	  0.000014	diff=7.83184e-13
  0.000001	  0.000001	diff=2.53685e-12
 -0.000011	 -0.000011	diff=2.18815e-12
  0.000000	  0.000000	diff=1.14232e-12
 -0.000003	 -0.000003	diff=1.04457e-12
  0.000006	  0.000006	diff=1.29526e-12
  0.000000	  0.000000	diff=2.13308e-12
 -0.000003	 -0.000003	diff=2.20074e-12
  local_diff=1.56319e-11
# Num params=224, abs_diff=4.58948e-08
Elapsed time is 3.557430 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=5.21224e-10
  0.000000	  0.000000	diff=5.32156e-10
  0.000000	  0.000000	diff=1.81534e-10
  0.000000	  0.000000	diff=1.33431e-10
 -0.000000	 -0.000000	diff=2.59411e-10
  0.000000	  0.000000	diff=1.26992e-10
  0.000011	  0.000012	diff=2.42588e-07
 -0.000005	 -0.000005	diff=1.79861e-07
  0.000000	  0.000000	diff=7.63961e-10
  0.000000	  0.000000	diff=3.36975e-10
  0.000000	  0.000000	diff=4.707e-10
 -0.000000	 -0.000000	diff=3.63875e-10
  0.000000	  0.000000	diff=7.027e-10
  0.000000	  0.000000	diff=5.82998e-11
  0.000011	  0.000011	diff=1.55758e-07
 -0.000004	 -0.000005	diff=4.76245e-07
 -0.000000	 -0.000000	diff=1.2523e-11
 -0.000000	 -0.000000	diff=4.09533e-12
  0.000000	  0.000000	diff=3.00011e-12
  0.000000	  0.000000	diff=1.64993e-12
  0.000000	  0.000000	diff=6.00813e-12
  0.000000	  0.000000	diff=6.77745e-12
  0.000000	  0.000000	diff=6.95572e-09
 -0.000000	 -0.000000	diff=2.65976e-09
  0.000000	  0.000000	diff=1.23528e-11
  0.000000	  0.000000	diff=1.43819e-11
 -0.000000	 -0.000000	diff=3.23482e-12
 -0.000000	 -0.000000	diff=8.70533e-12
 -0.000000	 -0.000000	diff=7.98194e-13
 -0.000000	 -0.000000	diff=1.90341e-12
 -0.000000	 -0.000000	diff=4.95564e-09
  0.000000	  0.000000	diff=5.22096e-09
  local_diff=1.07877e-06
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.71407e-11
  0.000000	  0.000000	diff=5.69057e-12
  0.000000	 -0.000000	diff=8.00587e-13
  0.000000	  0.000000	diff=5.95963e-12
 -0.000000	 -0.000000	diff=1.00612e-12
  0.000000	  0.000000	diff=6.85232e-12
 -0.000000	 -0.000000	diff=2.37751e-07
 -0.000002	 -0.000001	diff=2.75651e-07
 -0.000000	 -0.000000	diff=2.63682e-11
 -0.000000	 -0.000000	diff=1.18234e-11
  0.000000	 -0.000000	diff=6.19777e-12
 -0.000000	 -0.000000	diff=5.66499e-12
  0.000000	  0.000000	diff=2.10807e-12
 -0.000000	 -0.000000	diff=4.57099e-12
  0.000000	 -0.000000	diff=7.81695e-07
  0.000008	  0.000007	diff=4.19567e-07
  0.000000	 -0.000000	diff=4.22083e-14
  0.000000	  0.000000	diff=1.04469e-12
  0.000000	  0.000000	diff=2.3057e-13
  0.000000	  0.000000	diff=2.77848e-12
  0.000000	 -0.000000	diff=2.2974e-13
  0.000000	  0.000000	diff=3.65288e-12
  0.000000	  0.000000	diff=2.02654e-09
 -0.000000	 -0.000000	diff=5.12484e-09
  0.000000	  0.000000	diff=5.64323e-12
  0.000000	 -0.000000	diff=2.50321e-12
  0.000000	 -0.000000	diff=2.88294e-13
 -0.000000	 -0.000000	diff=1.82215e-12
  0.000000	  0.000000	diff=2.54787e-12
  0.000000	 -0.000000	diff=2.68093e-12
 -0.000000	 -0.000000	diff=4.29256e-09
  0.000000	  0.000000	diff=6.69662e-09
  local_diff=1.73292e-06
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.11956e-09
  0.000000	  0.000000	diff=9.76014e-10
  0.000000	 -0.000000	diff=3.77383e-10
 -0.000000	 -0.000000	diff=9.8832e-10
  0.000000	  0.000000	diff=4.80012e-10
  0.000000	  0.000000	diff=1.27998e-09
 -0.000003	 -0.000004	diff=8.21404e-07
  0.000014	  0.000013	diff=5.53235e-07
 -0.000000	 -0.000000	diff=1.38446e-09
 -0.000000	 -0.000000	diff=1.42995e-09
 -0.000000	 -0.000000	diff=5.54189e-10
  0.000000	 -0.000000	diff=1.93589e-09
 -0.000000	 -0.000000	diff=5.39401e-10
 -0.000000	 -0.000000	diff=2.2207e-09
  0.000004	  0.000006	diff=1.74692e-06
 -0.000000	  0.000001	diff=9.40194e-07
  0.000000	 -0.000000	diff=2.87996e-12
  0.000000	 -0.000000	diff=9.9274e-13
  0.000000	  0.000000	diff=4.91792e-14
  0.000000	  0.000000	diff=1.9065e-12
  0.000000	 -0.000000	diff=2.86755e-12
  0.000000	 -0.000000	diff=2.40343e-13
  0.000000	 -0.000000	diff=9.06624e-11
 -0.000000	 -0.000000	diff=2.7405e-11
  0.000000	  0.000000	diff=2.01185e-14
  0.000000	 -0.000000	diff=5.06188e-13
  0.000000	  0.000000	diff=4.05646e-14
  0.000000	  0.000000	diff=1.74604e-13
  0.000000	  0.000000	diff=4.1754e-14
  0.000000	 -0.000000	diff=3.58072e-13
  0.000000	  0.000000	diff=1.76995e-11
 -0.000000	 -0.000000	diff=5.55826e-12
  0.000000	  0.000000	diff=2.94509e-12
 -0.000000	 -0.000000	diff=2.59634e-11
 -0.000000	 -0.000000	diff=1.52427e-11
 -0.000000	 -0.000000	diff=6.95062e-12
 -0.000000	 -0.000000	diff=1.00655e-11
 -0.000000	 -0.000000	diff=2.05363e-11
  0.000000	  0.000000	diff=5.8464e-09
 -0.000000	 -0.000000	diff=1.98236e-08
  0.000000	  0.000000	diff=5.15699e-12
  0.000000	  0.000000	diff=3.92156e-11
  0.000000	  0.000000	diff=7.07298e-12
 -0.000000	 -0.000000	diff=4.26353e-11
  0.000000	  0.000000	diff=1.02606e-11
 -0.000000	 -0.000000	diff=5.62078e-11
  0.000000	  0.000000	diff=5.16433e-08
  0.000000	  0.000000	diff=2.90959e-08
  local_diff=4.18184e-06
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.38853e-11
 -0.000000	 -0.000000	diff=5.43475e-12
  0.000000	  0.000000	diff=5.37031e-12
  0.000000	  0.000000	diff=3.45821e-12
  0.000000	  0.000000	diff=2.78021e-12
 -0.000000	 -0.000000	diff=9.44742e-13
 -0.000002	 -0.000002	diff=3.54066e-07
  0.000012	  0.000012	diff=2.11313e-07
 -0.000000	 -0.000000	diff=2.19949e-11
 -0.000000	 -0.000000	diff=3.83237e-11
 -0.000000	 -0.000000	diff=3.54934e-11
 -0.000000	 -0.000000	diff=1.56621e-11
 -0.000000	 -0.000000	diff=2.41255e-11
 -0.000000	 -0.000000	diff=1.94865e-11
 -0.000005	 -0.000007	diff=2.67306e-06
  0.000012	  0.000011	diff=6.60675e-07
  0.000000	 -0.000000	diff=6.32704e-13
  0.000000	 -0.000000	diff=8.79981e-13
  0.000000	  0.000000	diff=7.39636e-13
  0.000000	  0.000000	diff=2.6106e-12
  0.000000	  0.000000	diff=2.24219e-12
  0.000000	  0.000000	diff=1.20115e-12
  0.000000	  0.000000	diff=3.98811e-08
 -0.000000	 -0.000000	diff=1.74726e-08
  0.000000	  0.000000	diff=2.53195e-12
  0.000000	  0.000000	diff=3.25577e-12
  0.000000	 -0.000000	diff=1.50793e-12
  0.000000	 -0.000000	diff=6.09292e-13
  0.000000	 -0.000000	diff=7.25696e-14
  0.000000	 -0.000000	diff=4.98519e-13
  0.000000	  0.000000	diff=2.35097e-08
  0.000000	  0.000000	diff=2.19633e-08
  local_diff=4.00214e-06
# W_emb_src, [2 5]
 -0.000015	 -0.000015	diff=1.51773e-07
  0.000027	  0.000028	diff=6.90055e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=1.54407e-07
  0.000005	  0.000005	diff=1.29713e-07
 -0.000000	 -0.000000	diff=3.04443e-09
 -0.000000	 -0.000000	diff=6.28932e-09
  local_diff=1.13528e-06
# W_emb_tgt, [2 5]
  0.000036	  0.000037	diff=8.15986e-07
 -0.000003	 -0.000003	diff=4.33863e-07
  0.000006	  0.000009	diff=2.25026e-06
  0.000001	  0.000002	diff=6.41273e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000008	  0.000009	diff=9.3483e-07
 -0.000000	  0.000000	diff=4.08334e-07
  0.000014	  0.000015	diff=3.20904e-07
 -0.000001	 -0.000001	diff=3.88511e-08
  local_diff=5.8443e-06
# W_tgt_char{1}, [8 4]
  0.000008	  0.000008	diff=5.10431e-12
  0.000007	  0.000007	diff=3.09542e-11
  0.000003	  0.000003	diff=1.12398e-10
 -0.000001	 -0.000001	diff=1.08835e-10
  0.000010	  0.000010	diff=1.25887e-12
  0.000004	  0.000004	diff=3.10884e-11
 -0.015995	 -0.015995	diff=1.43681e-07
  0.016736	  0.016736	diff=7.11278e-08
  0.000000	  0.000000	diff=1.03931e-11
  0.000004	  0.000004	diff=4.04353e-11
  0.000003	  0.000003	diff=3.27961e-10
 -0.000001	 -0.000001	diff=1.80125e-10
  0.000005	  0.000005	diff=1.37982e-11
 -0.000000	 -0.000000	diff=3.95605e-11
 -0.010151	 -0.010151	diff=1.01076e-07
  0.021186	  0.021186	diff=1.09113e-07
 -0.000000	 -0.000000	diff=3.63032e-12
  0.000000	  0.000000	diff=5.73989e-13
  0.000000	  0.000000	diff=3.12182e-12
 -0.000000	 -0.000000	diff=2.93061e-12
  0.000000	  0.000000	diff=1.21131e-13
  0.000000	  0.000000	diff=1.42925e-12
 -0.000087	 -0.000087	diff=1.50683e-07
  0.000027	  0.000027	diff=1.08277e-10
 -0.000000	 -0.000000	diff=2.05684e-13
  0.000000	  0.000000	diff=4.18774e-12
  0.000000	  0.000000	diff=2.23587e-12
 -0.000000	 -0.000000	diff=2.87079e-13
  0.000000	  0.000000	diff=3.18166e-12
 -0.000000	 -0.000000	diff=3.02808e-13
 -0.000022	 -0.000022	diff=1.00605e-11
  0.000057	  0.000057	diff=2.30114e-08
  local_diff=5.99734e-07
# W_emb_tgt_char, [2 5]
  0.012873	  0.012871	diff=1.91179e-06
 -0.011693	 -0.011695	diff=1.15829e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.003822	  0.003823	diff=2.29116e-07
 -0.010428	 -0.010424	diff=3.94919e-06
  0.004255	  0.004255	diff=7.36839e-07
 -0.001888	 -0.001890	diff=1.46235e-06
  0.002597	  0.002596	diff=8.22659e-07
  0.004580	  0.004576	diff=4.55605e-06
  local_diff=1.48263e-05
# W_h, [2 4]
  0.000002	  0.000002	diff=6.77302e-08
  0.000000	  0.000000	diff=4.53917e-08
 -0.000003	 -0.000003	diff=1.0412e-07
 -0.000001	 -0.000001	diff=5.91265e-08
 -0.000005	 -0.000005	diff=4.00126e-08
 -0.000005	 -0.000005	diff=2.81729e-08
 -0.000005	 -0.000005	diff=1.87996e-07
 -0.000009	 -0.000009	diff=4.98741e-08
  local_diff=5.82425e-07
# W_soft, [5 2]
 -0.000016	 -0.000016	diff=4.37937e-13
  0.000012	  0.000012	diff=7.48704e-13
  0.000018	  0.000018	diff=2.71608e-12
 -0.000016	 -0.000016	diff=3.94884e-14
  0.000002	  0.000002	diff=1.74213e-12
 -0.000006	 -0.000006	diff=3.07295e-12
  0.000007	  0.000007	diff=1.83122e-12
 -0.000000	 -0.000000	diff=3.7718e-13
 -0.000003	 -0.000003	diff=2.72107e-12
  0.000002	  0.000002	diff=5.24088e-13
  local_diff=1.42109e-11
# W_soft_char, [5 2]
 -0.004081	 -0.004081	diff=7.74028e-09
  0.000061	  0.000061	diff=7.74257e-09
  0.002733	  0.002733	diff=7.73908e-09
 -0.000336	 -0.000336	diff=7.74114e-09
  0.001623	  0.001623	diff=7.74161e-09
  0.000811	  0.000811	diff=3.79333e-09
 -0.005105	 -0.005105	diff=3.79824e-09
 -0.000614	 -0.000614	diff=3.79506e-09
  0.003165	  0.003165	diff=3.79592e-09
  0.001744	  0.001744	diff=3.79746e-09
  local_diff=5.76847e-08
# Num params=234, abs_diff=3.40414e-05
Elapsed time is 4.903528 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=2.42366e-10
 -0.000000	 -0.000000	diff=8.15992e-10
 -0.000000	 -0.000000	diff=2.46073e-11
 -0.000000	 -0.000000	diff=3.27273e-10
 -0.000000	 -0.000000	diff=2.62884e-10
 -0.000000	 -0.000000	diff=3.91733e-10
  0.000020	  0.000020	diff=9.8974e-08
 -0.000007	 -0.000007	diff=3.68e-07
  0.000000	  0.000000	diff=4.15507e-10
  0.000000	  0.000000	diff=1.252e-09
  0.000000	  0.000000	diff=2.77048e-11
  0.000000	  0.000000	diff=4.75442e-10
  0.000000	  0.000000	diff=3.5174e-10
  0.000000	  0.000000	diff=5.8765e-10
 -0.000027	 -0.000027	diff=1.44868e-07
  0.000010	  0.000010	diff=5.17226e-07
  0.000000	  0.000000	diff=3.02322e-12
  0.000000	  0.000000	diff=1.86116e-11
  0.000000	  0.000000	diff=2.16677e-11
  0.000000	  0.000000	diff=6.08025e-11
  0.000000	  0.000000	diff=2.43224e-11
  0.000000	 -0.000000	diff=2.15698e-11
 -0.000000	 -0.000000	diff=1.31153e-08
  0.000000	  0.000000	diff=3.81304e-08
 -0.000000	 -0.000000	diff=2.46137e-12
 -0.000000	 -0.000000	diff=1.55343e-11
 -0.000000	 -0.000000	diff=1.81316e-11
 -0.000000	 -0.000000	diff=4.83505e-11
 -0.000000	 -0.000000	diff=1.92403e-11
 -0.000000	  0.000000	diff=1.67847e-11
  0.000000	  0.000000	diff=1.01523e-08
 -0.000000	 -0.000000	diff=2.98445e-08
  local_diff=1.22576e-06
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.83723e-10
 -0.000000	 -0.000000	diff=1.82808e-10
  0.000000	  0.000000	diff=1.30942e-10
 -0.000000	 -0.000000	diff=1.25596e-10
  0.000000	  0.000000	diff=1.15439e-12
  0.000000	  0.000000	diff=2.89917e-12
 -0.000036	 -0.000039	diff=2.21163e-06
 -0.000008	 -0.000010	diff=1.83329e-06
 -0.000000	 -0.000000	diff=1.46756e-10
  0.000000	  0.000000	diff=1.44367e-10
 -0.000000	 -0.000000	diff=9.8612e-11
  0.000000	  0.000000	diff=9.23346e-11
 -0.000000	 -0.000000	diff=2.99958e-12
 -0.000000	 -0.000000	diff=1.8615e-12
  0.000029	  0.000031	diff=1.70488e-06
  0.000006	  0.000008	diff=1.41981e-06
  0.000000	  0.000000	diff=6.37951e-12
 -0.000000	 -0.000000	diff=7.98102e-12
  0.000000	  0.000000	diff=7.64416e-12
 -0.000000	 -0.000000	diff=7.73402e-12
  0.000000	  0.000000	diff=1.71285e-12
  0.000000	  0.000000	diff=7.08873e-14
 -0.000001	 -0.000001	diff=8.79262e-08
 -0.000000	 -0.000000	diff=7.12426e-08
 -0.000000	 -0.000000	diff=8.3005e-12
  0.000000	  0.000000	diff=7.59915e-12
 -0.000000	 -0.000000	diff=1.04548e-11
  0.000000	  0.000000	diff=7.2947e-12
 -0.000000	 -0.000000	diff=1.44638e-12
 -0.000000	 -0.000000	diff=1.08507e-12
  0.000001	  0.000001	diff=1.07264e-07
  0.000000	  0.000000	diff=8.54104e-08
  local_diff=7.52262e-06
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=9.594e-10
  0.000000	  0.000000	diff=6.64447e-09
 -0.000000	 -0.000000	diff=8.47391e-10
 -0.000000	 -0.000000	diff=2.0084e-09
 -0.000000	 -0.000000	diff=1.67573e-09
  0.000000	  0.000000	diff=4.11982e-09
  0.000006	  0.000005	diff=1.00994e-06
 -0.000002	 -0.000005	diff=2.66442e-06
  0.000000	  0.000000	diff=1.40026e-09
 -0.000000	 -0.000000	diff=9.80504e-09
  0.000000	  0.000000	diff=1.30067e-09
  0.000000	  0.000000	diff=2.85749e-09
  0.000000	  0.000000	diff=2.50567e-09
 -0.000000	 -0.000000	diff=6.16339e-09
 -0.000006	 -0.000005	diff=1.56666e-06
  0.000023	  0.000027	diff=4.10715e-06
  0.000000	 -0.000000	diff=2.17904e-13
 -0.000000	 -0.000000	diff=1.68327e-13
  0.000000	  0.000000	diff=9.27302e-14
  0.000000	  0.000000	diff=3.94131e-13
  0.000000	 -0.000000	diff=9.99062e-14
 -0.000000	 -0.000000	diff=1.08739e-12
 -0.000000	 -0.000000	diff=9.09713e-12
 -0.000000	 -0.000000	diff=2.22366e-11
  0.000000	  0.000000	diff=8.33467e-14
  0.000000	  0.000000	diff=3.9299e-13
  0.000000	  0.000000	diff=6.54914e-14
  0.000000	  0.000000	diff=6.96336e-13
  0.000000	  0.000000	diff=1.31485e-13
  0.000000	  0.000000	diff=9.72338e-13
  0.000000	  0.000000	diff=4.78e-12
  0.000000	  0.000000	diff=1.32527e-11
  0.000000	  0.000000	diff=1.25412e-11
 -0.000000	 -0.000000	diff=8.97755e-11
 -0.000000	 -0.000000	diff=2.32481e-11
  0.000000	  0.000000	diff=3.69615e-11
  0.000000	  0.000000	diff=3.23639e-11
 -0.000000	 -0.000000	diff=5.06241e-11
 -0.000000	 -0.000000	diff=1.80971e-08
  0.000001	  0.000001	diff=4.8257e-08
 -0.000000	 -0.000000	diff=1.13583e-11
  0.000000	  0.000000	diff=7.82761e-11
 -0.000000	 -0.000000	diff=1.35124e-11
 -0.000000	 -0.000000	diff=4.06389e-11
 -0.000000	 -0.000000	diff=2.53467e-11
  0.000000	  0.000000	diff=3.71444e-11
  0.000000	 -0.000000	diff=7.33355e-09
 -0.000000	 -0.000000	diff=2.16243e-08
  local_diff=9.48428e-06
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.03678e-11
 -0.000000	 -0.000000	diff=4.02894e-11
 -0.000000	 -0.000000	diff=1.0912e-10
 -0.000000	 -0.000000	diff=1.20378e-10
 -0.000000	 -0.000000	diff=6.73641e-11
 -0.000000	 -0.000000	diff=1.50718e-10
  0.000009	  0.000007	diff=1.81606e-06
 -0.000006	 -0.000007	diff=1.67903e-06
  0.000000	 -0.000000	diff=3.30847e-11
 -0.000000	 -0.000000	diff=5.14001e-11
 -0.000000	 -0.000000	diff=6.67818e-11
 -0.000000	 -0.000000	diff=6.99642e-11
 -0.000000	 -0.000000	diff=3.28756e-11
 -0.000000	 -0.000000	diff=1.08609e-10
  0.000012	  0.000011	diff=1.71533e-06
  0.000002	  0.000001	diff=1.58406e-06
  0.000000	  0.000000	diff=4.56374e-12
 -0.000000	 -0.000000	diff=3.80035e-12
 -0.000000	 -0.000000	diff=6.62466e-12
 -0.000000	 -0.000000	diff=9.63913e-12
 -0.000000	 -0.000000	diff=2.90174e-12
 -0.000000	 -0.000000	diff=9.18583e-12
  0.000000	  0.000000	diff=1.06563e-07
 -0.000001	 -0.000001	diff=9.36339e-08
 -0.000000	 -0.000000	diff=2.30145e-12
  0.000000	  0.000000	diff=9.79143e-13
  0.000000	  0.000000	diff=1.01922e-11
  0.000000	  0.000000	diff=9.00619e-12
  0.000000	  0.000000	diff=7.78114e-12
  0.000000	  0.000000	diff=1.17677e-11
 -0.000000	 -0.000000	diff=1.47593e-07
  0.000001	  0.000001	diff=1.22703e-07
  local_diff=7.26595e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000016	 -0.000016	diff=2.56343e-08
  0.000025	  0.000025	diff=1.81861e-07
 -0.000005	 -0.000005	diff=5.8217e-08
  0.000012	  0.000013	diff=2.49793e-07
  local_diff=5.15506e-07
# W_emb_tgt, [2 5]
  0.000072	  0.000072	diff=9.47246e-07
  0.000002	  0.000002	diff=9.43245e-08
  0.000031	  0.000036	diff=5.17539e-06
 -0.000003	 -0.000002	diff=4.67884e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=5.47518e-08
  0.000000	  0.000000	diff=5.52465e-09
  0.000009	  0.000009	diff=7.63817e-09
  0.000000	  0.000000	diff=8.43674e-10
  local_diff=6.7536e-06
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.04474e-12
 -0.000000	 -0.000000	diff=8.98665e-13
 -0.000000	 -0.000000	diff=6.58909e-13
  0.000000	  0.000000	diff=3.40629e-12
 -0.000000	 -0.000000	diff=3.0394e-12
  0.000000	  0.000000	diff=6.47238e-12
  0.000000	  0.000000	diff=2.54525e-11
 -0.000000	 -0.000000	diff=2.27429e-10
  0.000000	  0.000000	diff=8.90963e-12
 -0.000000	 -0.000000	diff=1.74343e-11
 -0.000000	 -0.000000	diff=5.36837e-13
 -0.000000	 -0.000000	diff=1.26463e-12
  0.000000	  0.000000	diff=9.75372e-12
 -0.000000	 -0.000000	diff=1.525e-11
  0.000000	  0.000000	diff=4.54049e-09
 -0.000000	 -0.000000	diff=1.47237e-08
  0.000000	  0.000000	diff=5.00116e-13
  0.000000	 -0.000000	diff=1.23479e-12
  0.000000	 -0.000000	diff=9.63172e-14
  0.000000	  0.000000	diff=1.75837e-13
  0.000000	  0.000000	diff=4.15496e-13
  0.000000	 -0.000000	diff=7.63299e-13
  0.000000	  0.000000	diff=2.03445e-11
 -0.000000	 -0.000000	diff=4.93168e-11
  0.000000	 -0.000000	diff=1.63604e-12
  0.000000	  0.000000	diff=1.28607e-12
  0.000000	 -0.000000	diff=2.66679e-14
  0.000000	  0.000000	diff=1.56729e-12
  0.000000	 -0.000000	diff=1.65847e-12
  0.000000	  0.000000	diff=2.65906e-12
 -0.000000	 -0.000000	diff=7.51608e-12
  0.000000	  0.000000	diff=2.87598e-11
  local_diff=1.97037e-08
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=6.05913e-09
 -0.000000	 -0.000000	diff=1.3216e-08
 -0.000000	 -0.000000	diff=1.27031e-09
 -0.000000	 -0.000000	diff=2.75688e-09
 -0.000000	 -0.000000	diff=8.84232e-10
 -0.000000	 -0.000000	diff=2.31378e-09
 -0.000000	 -0.000000	diff=2.16633e-09
 -0.000000	 -0.000000	diff=4.13531e-09
  local_diff=3.2802e-08
# W_tgt_char{1}, [8 4]
  0.000023	  0.000023	diff=3.68972e-10
  0.000011	  0.000011	diff=2.07788e-10
  0.000013	  0.000013	diff=3.09861e-10
  0.000031	  0.000031	diff=1.35465e-09
  0.000068	  0.000068	diff=2.84663e-10
  0.000075	  0.000075	diff=7.20933e-11
 -0.026173	 -0.026174	diff=2.97375e-07
 -0.030773	 -0.030773	diff=5.62773e-07
 -0.000047	 -0.000047	diff=1.93217e-10
  0.000044	  0.000044	diff=8.03739e-11
  0.000028	  0.000028	diff=6.8903e-10
  0.000033	  0.000033	diff=1.0505e-09
 -0.000031	 -0.000031	diff=1.32368e-10
  0.000050	  0.000050	diff=9.85076e-11
 -0.006718	 -0.006718	diff=2.51367e-07
 -0.021207	 -0.021207	diff=1.58329e-07
  0.000001	  0.000001	diff=1.51972e-12
 -0.000001	 -0.000001	diff=5.73372e-14
 -0.000001	 -0.000001	diff=1.24753e-12
 -0.000001	 -0.000001	diff=1.36073e-13
  0.000000	  0.000000	diff=1.52215e-12
 -0.000001	 -0.000001	diff=1.12634e-12
  0.000312	  0.000312	diff=1.49186e-07
  0.000555	  0.000555	diff=7.96433e-10
  0.000001	  0.000001	diff=1.42598e-13
 -0.000000	 -0.000000	diff=2.85383e-12
 -0.000001	 -0.000001	diff=1.00017e-12
 -0.000001	 -0.000001	diff=2.59419e-12
  0.000000	  0.000000	diff=9.86295e-14
 -0.000001	 -0.000001	diff=4.47653e-13
  0.000317	  0.000317	diff=1.54062e-09
  0.000623	  0.000622	diff=3.92923e-07
  local_diff=1.81914e-06
# W_emb_tgt_char, [2 5]
  0.019313	  0.019311	diff=1.13237e-06
 -0.003571	 -0.003571	diff=2.89187e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.033827	 -0.033830	diff=3.14029e-06
  0.018269	  0.018267	diff=1.94273e-06
 -0.005612	 -0.005614	diff=2.39202e-06
  0.005518	  0.005517	diff=7.63405e-07
 -0.006433	 -0.006433	diff=4.30762e-07
  0.001249	  0.001249	diff=1.18842e-07
  local_diff=1.02096e-05
# W_h, [2 4]
  0.000012	  0.000012	diff=3.75352e-07
 -0.000061	 -0.000061	diff=3.29558e-07
 -0.000014	 -0.000015	diff=4.55098e-07
  0.000074	  0.000073	diff=3.99564e-07
  0.000003	  0.000003	diff=7.94165e-08
 -0.000015	 -0.000015	diff=6.80135e-08
 -0.000021	 -0.000022	diff=2.99589e-07
  0.000026	  0.000026	diff=2.43985e-07
  local_diff=2.25057e-06
# W_soft, [5 2]
 -0.000040	 -0.000040	diff=9.91793e-13
  0.000016	  0.000016	diff=8.10367e-13
  0.000000	  0.000000	diff=5.30629e-13
  0.000008	  0.000008	diff=5.51426e-13
  0.000016	  0.000016	diff=1.26348e-12
  0.000002	  0.000002	diff=6.17507e-13
 -0.000005	 -0.000005	diff=1.54521e-12
  0.000012	  0.000012	diff=2.2856e-12
 -0.000005	 -0.000005	diff=3.05582e-13
 -0.000005	 -0.000005	diff=1.17869e-12
  local_diff=1.00803e-11
# W_soft_char, [5 2]
  0.001078	  0.001078	diff=9.0623e-08
 -0.026076	 -0.026077	diff=9.06205e-08
  0.029189	  0.029189	diff=9.062e-08
 -0.002364	 -0.002364	diff=9.06216e-08
 -0.001826	 -0.001826	diff=9.06195e-08
 -0.005736	 -0.005736	diff=6.63796e-08
 -0.022732	 -0.022732	diff=6.63778e-08
  0.016763	  0.016763	diff=6.63801e-08
  0.012345	  0.012345	diff=6.63712e-08
 -0.000639	 -0.000639	diff=6.63745e-08
  local_diff=7.84988e-07
# Num params=276, abs_diff=4.78845e-05
Elapsed time is 6.073232 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=4.52613e-10
  0.000000	  0.000000	diff=1.80375e-10
  0.000000	  0.000000	diff=1.19653e-10
  0.000000	  0.000000	diff=7.42384e-11
 -0.000000	 -0.000000	diff=6.12181e-10
 -0.000000	 -0.000000	diff=2.18297e-11
  0.000004	  0.000004	diff=1.63447e-07
  0.000001	  0.000001	diff=7.59006e-08
  0.000000	  0.000000	diff=7.58857e-10
 -0.000000	 -0.000000	diff=3.01192e-10
 -0.000000	 -0.000000	diff=1.99631e-10
 -0.000000	 -0.000000	diff=1.21344e-10
  0.000000	  0.000000	diff=1.03601e-09
  0.000000	  0.000000	diff=3.70537e-11
 -0.000005	 -0.000005	diff=2.77354e-07
 -0.000001	 -0.000001	diff=1.28014e-07
 -0.000000	 -0.000000	diff=8.61902e-12
 -0.000000	 -0.000000	diff=4.56514e-12
  0.000000	  0.000000	diff=5.83343e-12
 -0.000000	 -0.000000	diff=1.55415e-12
  0.000000	  0.000000	diff=2.17044e-11
  0.000000	  0.000000	diff=8.74927e-13
 -0.000000	 -0.000000	diff=6.03407e-09
 -0.000000	 -0.000000	diff=2.44772e-09
  0.000000	  0.000000	diff=8.60515e-12
  0.000000	  0.000000	diff=5.14654e-12
 -0.000000	 -0.000000	diff=5.6727e-12
  0.000000	  0.000000	diff=2.25099e-12
 -0.000000	 -0.000000	diff=1.90298e-11
 -0.000000	 -0.000000	diff=3.27786e-12
  0.000000	  0.000000	diff=4.97397e-09
  0.000000	  0.000000	diff=2.06024e-09
  local_diff=6.64233e-07
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.43111e-11
  0.000000	  0.000000	diff=1.00014e-11
 -0.000000	 -0.000000	diff=1.84607e-11
  0.000000	  0.000000	diff=5.40139e-12
 -0.000000	 -0.000000	diff=1.51665e-12
  0.000000	  0.000000	diff=2.37155e-12
  0.000002	  0.000002	diff=4.7863e-07
  0.000006	  0.000006	diff=7.912e-08
  0.000000	  0.000000	diff=3.90187e-11
 -0.000000	 -0.000000	diff=9.25896e-12
  0.000000	  0.000000	diff=2.05233e-11
 -0.000000	 -0.000000	diff=6.35962e-12
  0.000000	  0.000000	diff=1.4487e-12
 -0.000000	 -0.000000	diff=5.37036e-12
 -0.000001	 -0.000002	diff=4.06666e-07
 -0.000005	 -0.000005	diff=6.80806e-08
 -0.000000	 -0.000000	diff=3.01624e-13
  0.000000	  0.000000	diff=1.63991e-12
  0.000000	 -0.000000	diff=1.45851e-12
  0.000000	  0.000000	diff=3.05574e-12
 -0.000000	 -0.000000	diff=1.64163e-12
  0.000000	  0.000000	diff=2.31282e-12
  0.000000	  0.000000	diff=1.10628e-08
  0.000000	  0.000000	diff=1.54503e-09
  0.000000	  0.000000	diff=3.77729e-12
 -0.000000	 -0.000000	diff=2.46894e-12
  0.000000	  0.000000	diff=1.79634e-12
 -0.000000	 -0.000000	diff=1.37085e-12
  0.000000	  0.000000	diff=1.51521e-12
 -0.000000	 -0.000000	diff=2.88256e-12
 -0.000000	 -0.000000	diff=1.35174e-08
 -0.000000	 -0.000000	diff=1.55294e-09
  local_diff=1.06036e-06
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=4.25869e-10
 -0.000000	 -0.000000	diff=9.15302e-10
 -0.000000	 -0.000000	diff=2.56063e-10
  0.000000	  0.000000	diff=3.52924e-10
 -0.000000	 -0.000000	diff=5.74174e-10
 -0.000000	 -0.000000	diff=2.93868e-10
  0.000000	  0.000001	diff=2.7217e-07
  0.000013	  0.000013	diff=1.79338e-07
  0.000000	  0.000000	diff=5.86839e-10
  0.000000	  0.000000	diff=1.27759e-09
  0.000000	  0.000000	diff=4.04264e-10
 -0.000000	 -0.000000	diff=4.55275e-10
  0.000000	  0.000000	diff=8.32021e-10
  0.000000	  0.000000	diff=4.13364e-10
 -0.000003	 -0.000004	diff=4.998e-07
 -0.000022	 -0.000022	diff=3.71768e-07
  0.000000	  0.000000	diff=1.19959e-13
  0.000000	  0.000000	diff=6.04366e-15
  0.000000	 -0.000000	diff=1.09973e-13
  0.000000	 -0.000000	diff=2.2694e-13
  0.000000	 -0.000000	diff=2.4265e-14
  0.000000	 -0.000000	diff=1.79784e-13
  0.000000	  0.000000	diff=5.69188e-12
  0.000000	  0.000000	diff=8.07237e-12
  0.000000	  0.000000	diff=1.57033e-13
  0.000000	  0.000000	diff=2.93021e-13
  0.000000	 -0.000000	diff=1.52942e-13
  0.000000	 -0.000000	diff=3.90372e-13
  0.000000	 -0.000000	diff=3.601e-14
  0.000000	 -0.000000	diff=4.91859e-14
  0.000000	  0.000000	diff=1.52311e-11
  0.000000	  0.000000	diff=1.65873e-11
  0.000000	  0.000000	diff=6.44122e-12
  0.000000	  0.000000	diff=9.78652e-12
  0.000000	  0.000000	diff=1.51127e-11
 -0.000000	 -0.000000	diff=6.61153e-12
  0.000000	  0.000000	diff=1.82779e-11
  0.000000	  0.000000	diff=5.3222e-12
 -0.000000	 -0.000000	diff=6.96468e-09
 -0.000000	 -0.000000	diff=5.87659e-09
 -0.000000	 -0.000000	diff=6.13732e-12
 -0.000000	 -0.000000	diff=1.48741e-11
 -0.000000	 -0.000000	diff=8.01032e-12
  0.000000	  0.000000	diff=1.48097e-11
 -0.000000	 -0.000000	diff=1.49577e-11
 -0.000000	 -0.000000	diff=4.27843e-14
  0.000000	  0.000000	diff=9.06898e-10
 -0.000000	 -0.000000	diff=4.79499e-10
  local_diff=1.34426e-06
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.27542e-11
  0.000000	  0.000000	diff=4.68496e-12
 -0.000000	 -0.000000	diff=3.55787e-11
  0.000000	  0.000000	diff=1.18321e-11
 -0.000000	 -0.000000	diff=2.11764e-11
  0.000000	  0.000000	diff=1.19542e-11
  0.000001	  0.000002	diff=4.26819e-07
  0.000006	  0.000006	diff=8.99365e-08
  0.000000	  0.000000	diff=7.75022e-12
  0.000000	  0.000000	diff=3.70398e-12
 -0.000000	 -0.000000	diff=2.51975e-12
  0.000000	  0.000000	diff=2.10472e-12
  0.000000	  0.000000	diff=2.50988e-12
  0.000000	  0.000000	diff=1.26343e-13
  0.000000	  0.000001	diff=3.18678e-07
  0.000010	  0.000010	diff=4.90435e-08
  0.000000	  0.000000	diff=6.41666e-13
  0.000000	  0.000000	diff=2.40552e-12
 -0.000000	 -0.000000	diff=3.95132e-13
  0.000000	  0.000000	diff=2.56102e-12
 -0.000000	 -0.000000	diff=9.56042e-13
  0.000000	  0.000000	diff=9.70062e-13
  0.000000	  0.000000	diff=1.86388e-08
  0.000000	  0.000000	diff=4.58029e-09
 -0.000000	 -0.000000	diff=1.36198e-12
 -0.000000	 -0.000000	diff=6.06347e-13
  0.000000	  0.000000	diff=4.88682e-12
 -0.000000	 -0.000000	diff=5.26091e-13
  0.000000	  0.000000	diff=4.29037e-12
 -0.000000	 -0.000000	diff=1.68415e-13
 -0.000000	 -0.000000	diff=3.90942e-08
 -0.000000	 -0.000000	diff=9.62038e-09
  local_diff=9.56547e-07
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=1.59906e-10
  0.000002	  0.000002	diff=2.54704e-09
 -0.000001	 -0.000001	diff=2.15727e-07
  0.000002	  0.000002	diff=4.05542e-07
  local_diff=6.23975e-07
# W_emb_tgt, [2 5]
 -0.000013	 -0.000014	diff=8.48988e-07
 -0.000003	 -0.000003	diff=1.51221e-07
 -0.000024	 -0.000025	diff=9.7931e-07
 -0.000001	 -0.000001	diff=2.10577e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.79975e-08
 -0.000001	 -0.000001	diff=3.79561e-09
 -0.000003	 -0.000004	diff=2.46827e-08
 -0.000000	 -0.000000	diff=4.15504e-09
  local_diff=2.27073e-06
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.88527e-12
  0.000000	  0.000000	diff=1.12183e-14
  0.000000	  0.000000	diff=1.20263e-13
  0.000000	  0.000000	diff=1.40995e-15
  0.000000	 -0.000000	diff=4.81488e-13
  0.000000	  0.000000	diff=8.72385e-15
 -0.000000	 -0.000000	diff=4.34902e-12
 -0.000000	 -0.000000	diff=2.08147e-12
  0.000000	  0.000000	diff=2.25806e-13
  0.000000	 -0.000000	diff=1.35333e-14
  0.000000	 -0.000000	diff=1.16076e-13
  0.000000	  0.000000	diff=2.88431e-15
  0.000000	  0.000000	diff=1.567e-13
  0.000000	 -0.000000	diff=8.30593e-15
 -0.000000	 -0.000000	diff=1.77398e-12
  0.000000	  0.000000	diff=4.54386e-14
  0.000000	  0.000000	diff=7.26726e-15
  0.000000	 -0.000000	diff=3.01013e-16
  0.000000	 -0.000000	diff=4.3647e-15
  0.000000	  0.000000	diff=8.66375e-17
  0.000000	  0.000000	diff=1.89827e-15
  0.000000	 -0.000000	diff=1.97169e-16
  0.000000	 -0.000000	diff=1.34339e-12
  0.000000	 -0.000000	diff=1.52211e-13
  0.000000	 -0.000000	diff=2.24594e-16
  0.000000	 -0.000000	diff=5.46129e-17
  0.000000	 -0.000000	diff=2.75432e-16
  0.000000	  0.000000	diff=3.20594e-17
  0.000000	 -0.000000	diff=1.93584e-16
  0.000000	 -0.000000	diff=2.7265e-17
  0.000000	  0.000000	diff=1.42904e-12
  0.000000	 -0.000000	diff=6.11524e-14
  local_diff=1.42823e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=3.55242e-15
  0.000000	 -0.000000	diff=5.24647e-15
  0.000000	  0.000000	diff=2.91935e-16
  0.000000	  0.000000	diff=2.21239e-16
  0.000000	 -0.000000	diff=1.88364e-15
  0.000000	 -0.000000	diff=3.3673e-15
  0.000000	  0.000000	diff=2.18684e-12
  0.000000	  0.000000	diff=8.17891e-13
  0.000000	 -0.000000	diff=2.63968e-16
  0.000000	 -0.000000	diff=2.08407e-15
  0.000000	  0.000000	diff=2.33713e-16
  0.000000	  0.000000	diff=3.08969e-16
  0.000000	 -0.000000	diff=3.08879e-16
  0.000000	 -0.000000	diff=1.3881e-15
 -0.000000	 -0.000000	diff=8.61006e-13
 -0.000000	 -0.000000	diff=4.73245e-13
  0.000000	 -0.000000	diff=1.53208e-19
  0.000000	 -0.000000	diff=8.56887e-18
  0.000000	  0.000000	diff=2.64251e-17
  0.000000	  0.000000	diff=1.13142e-17
  0.000000	  0.000000	diff=2.03429e-17
  0.000000	  0.000000	diff=1.4169e-17
  0.000000	 -0.000000	diff=1.53856e-12
  0.000000	 -0.000000	diff=1.0385e-12
  0.000000	  0.000000	diff=6.73396e-18
  0.000000	 -0.000000	diff=2.11576e-17
  0.000000	  0.000000	diff=2.17824e-17
  0.000000	  0.000000	diff=3.68709e-17
  0.000000	  0.000000	diff=2.47256e-17
  0.000000	  0.000000	diff=2.32012e-17
  0.000000	  0.000000	diff=4.07293e-13
  0.000000	  0.000000	diff=7.26068e-14
  local_diff=7.4153e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.84478e-17
  0.000000	  0.000000	diff=8.22678e-17
  0.000000	 -0.000000	diff=3.07918e-18
  0.000000	  0.000000	diff=2.21745e-17
  0.000000	 -0.000000	diff=1.95542e-17
  0.000000	  0.000000	diff=7.44554e-17
  0.000000	  0.000000	diff=8.75532e-13
 -0.000000	 -0.000000	diff=1.30615e-12
  0.000000	 -0.000000	diff=8.05071e-17
  0.000000	  0.000000	diff=2.44309e-16
  0.000000	 -0.000000	diff=7.27477e-18
  0.000000	  0.000000	diff=3.96724e-17
  0.000000	 -0.000000	diff=5.19544e-17
  0.000000	  0.000000	diff=2.12564e-16
  0.000000	  0.000000	diff=2.05352e-12
 -0.000000	 -0.000000	diff=2.1976e-12
  0.000000	 -0.000000	diff=8.76747e-20
  0.000000	  0.000000	diff=2.93799e-19
  0.000000	 -0.000000	diff=3.84292e-19
  0.000000	  0.000000	diff=5.28982e-19
  0.000000	 -0.000000	diff=4.52471e-19
  0.000000	  0.000000	diff=8.13013e-19
 -0.000000	 -0.000000	diff=1.83149e-12
  0.000000	  0.000000	diff=1.0127e-12
  0.000000	 -0.000000	diff=3.67064e-19
  0.000000	  0.000000	diff=1.9571e-18
  0.000000	 -0.000000	diff=5.69706e-19
  0.000000	  0.000000	diff=1.61621e-18
  0.000000	 -0.000000	diff=1.28835e-18
  0.000000	  0.000000	diff=3.76814e-18
  0.000000	  0.000000	diff=1.01469e-13
  0.000000	 -0.000000	diff=4.22056e-13
  local_diff=9.8014e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=6.32323e-12
  0.000000	  0.000000	diff=3.98903e-12
 -0.000000	 -0.000000	diff=5.85517e-12
  0.000000	  0.000000	diff=6.65539e-12
 -0.000000	 -0.000000	diff=3.18699e-12
  0.000000	  0.000000	diff=1.52697e-12
 -0.000000	 -0.000000	diff=6.89141e-12
  0.000000	  0.000000	diff=3.87394e-12
  local_diff=3.83021e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.55425e-12
  0.000000	  0.000000	diff=1.96525e-12
  0.000000	  0.000000	diff=3.05266e-12
  0.000000	  0.000000	diff=1.00962e-13
 -0.000000	 -0.000000	diff=1.41447e-12
  0.000000	  0.000000	diff=3.38076e-13
 -0.000001	 -0.000001	diff=3.9175e-12
  0.000001	  0.000001	diff=1.2238e-11
  0.000000	  0.000000	diff=1.8009e-13
 -0.000000	 -0.000000	diff=9.14085e-13
 -0.000000	 -0.000000	diff=1.72195e-12
  0.000000	  0.000000	diff=2.08276e-13
  0.000000	  0.000000	diff=2.30954e-12
 -0.000000	 -0.000000	diff=3.01686e-13
  0.000002	  0.000002	diff=4.33072e-11
  0.000003	  0.000003	diff=5.59469e-11
  0.000000	  0.000000	diff=1.33653e-12
 -0.000000	 -0.000000	diff=1.23234e-12
 -0.000000	 -0.000000	diff=2.39955e-12
  0.000000	  0.000000	diff=3.42967e-13
  0.000000	  0.000000	diff=1.27897e-12
 -0.000000	 -0.000000	diff=1.73717e-12
  0.000000	  0.000000	diff=4.13666e-11
  0.000000	  0.000000	diff=3.07884e-13
  0.000000	  0.000000	diff=1.16014e-12
 -0.000000	 -0.000000	diff=2.1012e-12
  0.000000	  0.000000	diff=2.38729e-12
 -0.000000	 -0.000000	diff=2.68838e-12
  0.000000	  0.000000	diff=2.56618e-12
 -0.000000	 -0.000000	diff=1.508e-12
  0.000000	  0.000000	diff=1.16617e-12
  0.000000	  0.000000	diff=5.90272e-12
  local_diff=1.98953e-10
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=1.3514e-12
  0.000000	  0.000000	diff=1.25931e-12
  0.000000	  0.000000	diff=1.56581e-12
  0.000000	  0.000000	diff=1.49544e-12
 -0.000000	 -0.000000	diff=2.5481e-12
  0.000000	  0.000000	diff=2.49167e-12
 -0.000000	 -0.000000	diff=7.82421e-13
 -0.000000	 -0.000000	diff=2.80217e-12
  0.000000	  0.000000	diff=2.19952e-12
 -0.000000	 -0.000000	diff=1.4068e-12
 -0.000000	 -0.000000	diff=9.70675e-13
 -0.000000	 -0.000000	diff=1.24248e-13
  0.000000	  0.000000	diff=2.04966e-12
 -0.000000	 -0.000000	diff=3.09865e-12
  0.000001	  0.000001	diff=3.1651e-12
  0.000002	  0.000002	diff=6.89941e-13
 -0.000000	  0.000000	diff=2.87959e-12
 -0.000000	 -0.000000	diff=2.33016e-12
 -0.000000	  0.000000	diff=2.90726e-12
 -0.000000	 -0.000000	diff=2.67275e-12
 -0.000000	  0.000000	diff=2.98241e-12
 -0.000000	 -0.000000	diff=2.31067e-12
 -0.000000	 -0.000000	diff=2.34625e-11
  0.000000	  0.000000	diff=2.03774e-12
  0.000000	  0.000000	diff=3.92355e-13
  0.000000	 -0.000000	diff=3.8396e-13
 -0.000000	  0.000000	diff=2.8626e-12
 -0.000000	 -0.000000	diff=2.6483e-12
  0.000000	  0.000000	diff=4.19808e-13
  0.000000	 -0.000000	diff=6.34948e-13
 -0.000000	 -0.000000	diff=1.59529e-12
  0.000000	  0.000000	diff=3.28964e-11
  local_diff=1.11418e-10
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=3.34248e-13
  0.000000	  0.000000	diff=1.65429e-13
  0.000000	  0.000000	diff=2.59302e-13
 -0.000000	  0.000000	diff=2.84417e-12
  0.000000	  0.000000	diff=3.04627e-13
  0.000000	  0.000000	diff=4.1475e-13
  0.000001	  0.000001	diff=2.65972e-12
  0.000000	  0.000000	diff=1.56588e-12
  0.000000	  0.000000	diff=1.9394e-13
 -0.000000	 -0.000000	diff=1.20653e-12
 -0.000000	  0.000000	diff=2.96138e-12
 -0.000000	 -0.000000	diff=2.4598e-12
 -0.000000	  0.000000	diff=3.06876e-12
 -0.000000	 -0.000000	diff=1.03796e-12
  0.000000	  0.000000	diff=1.68998e-12
 -0.000004	 -0.000004	diff=1.44909e-12
  0.000000	  0.000000	diff=1.67045e-14
  0.000000	  0.000000	diff=1.45409e-13
  0.000000	 -0.000000	diff=3.49481e-15
  0.000000	  0.000000	diff=7.75455e-15
  0.000000	 -0.000000	diff=5.90406e-14
  0.000000	  0.000000	diff=3.91064e-13
 -0.000000	 -0.000000	diff=2.81062e-10
  0.000000	  0.000000	diff=1.3496e-12
 -0.000000	  0.000000	diff=2.94298e-12
 -0.000000	 -0.000000	diff=2.68834e-12
  0.000000	 -0.000000	diff=1.42495e-15
  0.000000	  0.000000	diff=1.20046e-14
  0.000000	  0.000000	diff=2.34914e-13
  0.000000	  0.000000	diff=2.43263e-13
  0.000001	  0.000001	diff=1.41769e-11
 -0.000001	 -0.000001	diff=5.39071e-09
  local_diff=5.71666e-09
# W_emb_tgt_char, [2 5]
  0.000001	  0.000001	diff=3.83917e-10
 -0.000002	 -0.000002	diff=4.84613e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=1.44194e-10
 -0.000002	 -0.000002	diff=8.36779e-11
 -0.000000	 -0.000000	diff=4.15631e-11
 -0.000000	 -0.000000	diff=1.32681e-10
 -0.000000	 -0.000000	diff=2.12508e-11
 -0.000000	 -0.000000	diff=1.33972e-10
  local_diff=9.89717e-10
# W_h, [2 4]
 -0.000002	 -0.000002	diff=5.55314e-08
  0.000006	  0.000006	diff=1.69178e-08
  0.000003	  0.000003	diff=6.7638e-08
 -0.000008	 -0.000008	diff=2.06131e-08
 -0.000003	 -0.000003	diff=2.62127e-08
  0.000002	  0.000002	diff=8.69211e-09
 -0.000011	 -0.000011	diff=7.83325e-08
 -0.000009	 -0.000009	diff=2.2862e-08
  local_diff=2.968e-07
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=1.11954e-13
  0.000011	  0.000011	diff=1.02365e-13
 -0.000003	 -0.000003	diff=1.34567e-12
  0.000008	  0.000008	diff=1.44094e-14
 -0.000002	 -0.000002	diff=1.47251e-12
 -0.000018	 -0.000018	diff=1.69866e-12
  0.000011	  0.000011	diff=1.06474e-12
  0.000005	  0.000005	diff=7.38339e-13
  0.000008	  0.000008	diff=1.48779e-12
 -0.000006	 -0.000006	diff=1.4588e-12
  local_diff=9.49522e-12
# W_soft_char, [5 2]
  0.000003	  0.000003	diff=2.1843e-12
 -0.000002	 -0.000002	diff=6.6634e-13
  0.000000	  0.000000	diff=6.84086e-14
 -0.000000	 -0.000000	diff=5.22265e-13
  0.000000	  0.000000	diff=2.37985e-12
  0.000002	  0.000002	diff=3.54791e-13
 -0.000003	 -0.000003	diff=1.70262e-12
  0.000001	  0.000001	diff=2.18079e-12
  0.000000	  0.000000	diff=1.42278e-12
  0.000001	  0.000001	diff=2.86553e-12
  local_diff=1.43477e-11
# Num params=404, abs_diff=7.22401e-06
Elapsed time is 10.461363 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.63664e-13
  0.000000	  0.000000	diff=4.35402e-13
  0.000000	  0.000000	diff=1.53979e-13
  0.000000	  0.000000	diff=8.8441e-13
  0.000000	  0.000000	diff=7.66865e-14
  0.000000	  0.000000	diff=5.33883e-13
 -0.000001	 -0.000001	diff=4.96034e-11
  0.000000	  0.000000	diff=5.06322e-12
 -0.000000	 -0.000000	diff=8.08706e-13
 -0.000000	 -0.000000	diff=7.79394e-14
 -0.000000	 -0.000000	diff=1.06896e-13
 -0.000000	 -0.000000	diff=2.76668e-13
 -0.000000	 -0.000000	diff=2.22852e-13
 -0.000000	 -0.000000	diff=2.36946e-13
  0.000002	  0.000002	diff=1.17868e-10
 -0.000001	 -0.000001	diff=1.00996e-11
 -0.000000	 -0.000000	diff=9.4589e-13
 -0.000000	 -0.000000	diff=2.59092e-13
 -0.000000	 -0.000000	diff=1.17999e-13
  0.000000	  0.000000	diff=9.31756e-13
 -0.000000	 -0.000000	diff=9.65724e-13
 -0.000000	 -0.000000	diff=8.64469e-14
  0.000000	  0.000000	diff=2.48677e-11
  0.000000	  0.000000	diff=3.06156e-13
  0.000000	  0.000000	diff=3.6359e-14
  0.000000	  0.000000	diff=1.8982e-13
  0.000000	  0.000000	diff=4.18404e-13
 -0.000000	 -0.000000	diff=4.5814e-13
  0.000000	  0.000000	diff=4.87665e-13
  0.000000	  0.000000	diff=8.49808e-13
 -0.000000	 -0.000000	diff=4.24145e-13
 -0.000000	 -0.000000	diff=6.4146e-11
  local_diff=2.82203e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.59886e-13
 -0.000000	 -0.000000	diff=5.24496e-13
  0.000000	  0.000000	diff=2.05963e-13
 -0.000000	 -0.000000	diff=7.43901e-13
  0.000000	  0.000000	diff=5.96495e-13
 -0.000000	 -0.000000	diff=1.38971e-13
 -0.000010	 -0.000010	diff=2.22676e-12
 -0.000013	 -0.000013	diff=5.86683e-13
 -0.000000	 -0.000000	diff=6.85085e-13
  0.000000	  0.000000	diff=2.97558e-13
 -0.000000	 -0.000000	diff=3.51835e-13
  0.000000	  0.000000	diff=4.70278e-14
 -0.000000	 -0.000000	diff=5.78358e-13
  0.000000	  0.000000	diff=2.6538e-13
  0.000015	  0.000015	diff=2.20174e-12
  0.000018	  0.000018	diff=2.10027e-12
  0.000000	  0.000000	diff=5.10188e-13
 -0.000000	 -0.000000	diff=3.30091e-13
  0.000000	  0.000000	diff=7.41814e-13
 -0.000000	 -0.000000	diff=2.95706e-13
  0.000000	  0.000000	diff=1.35796e-12
 -0.000000	 -0.000000	diff=4.11499e-13
 -0.000000	 -0.000000	diff=9.04327e-11
 -0.000000	 -0.000000	diff=4.98324e-13
 -0.000000	 -0.000000	diff=4.8434e-13
  0.000000	  0.000000	diff=4.12431e-13
 -0.000000	 -0.000000	diff=7.81639e-14
  0.000000	  0.000000	diff=1.99982e-13
 -0.000000	 -0.000000	diff=1.20611e-12
  0.000000	  0.000000	diff=2.73237e-13
  0.000000	  0.000000	diff=1.36994e-13
  0.000000	  0.000000	diff=2.45198e-10
  local_diff=3.54278e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.30836e-13
  0.000000	  0.000000	diff=7.52078e-14
 -0.000000	 -0.000000	diff=7.18008e-13
 -0.000000	 -0.000000	diff=4.16529e-13
 -0.000000	 -0.000000	diff=2.63437e-13
  0.000000	  0.000000	diff=4.50158e-13
 -0.000003	 -0.000003	diff=5.3978e-11
 -0.000002	 -0.000002	diff=1.10085e-10
  0.000000	  0.000000	diff=7.14665e-14
 -0.000000	 -0.000000	diff=3.97704e-13
  0.000000	  0.000000	diff=8.93229e-13
  0.000000	  0.000000	diff=1.24955e-12
  0.000000	  0.000000	diff=4.93469e-13
 -0.000000	 -0.000000	diff=2.35032e-13
 -0.000005	 -0.000005	diff=1.017e-10
  0.000008	  0.000008	diff=1.5084e-10
  0.000000	  0.000000	diff=3.83775e-13
  0.000000	 -0.000000	diff=1.02176e-12
 -0.000000	 -0.000000	diff=9.51102e-13
  0.000000	  0.000000	diff=8.28164e-13
  0.000000	 -0.000000	diff=5.38481e-14
  0.000000	 -0.000000	diff=3.37974e-13
  0.000000	  0.000000	diff=2.15015e-14
 -0.000000	 -0.000000	diff=2.22737e-13
 -0.000000	 -0.000000	diff=7.20568e-13
  0.000000	  0.000000	diff=5.21513e-13
  0.000000	  0.000000	diff=7.1079e-13
  0.000000	 -0.000000	diff=4.86628e-13
  0.000000	 -0.000000	diff=6.24178e-15
  0.000000	  0.000000	diff=3.14755e-13
 -0.000000	 -0.000000	diff=4.69408e-13
  0.000000	  0.000000	diff=3.96809e-13
  0.000000	  0.000000	diff=3.24405e-13
 -0.000000	 -0.000000	diff=5.48932e-13
  0.000000	  0.000000	diff=6.67862e-13
  0.000000	  0.000000	diff=8.66756e-13
  0.000000	  0.000000	diff=2.93909e-13
 -0.000000	 -0.000000	diff=6.34497e-13
 -0.000000	 -0.000000	diff=7.84869e-10
  0.000000	  0.000000	diff=8.2932e-12
 -0.000000	 -0.000000	diff=7.21058e-13
  0.000000	  0.000000	diff=6.47989e-13
  0.000000	  0.000000	diff=1.95446e-13
 -0.000000	 -0.000000	diff=2.79047e-13
 -0.000000	 -0.000000	diff=6.54214e-13
  0.000000	  0.000000	diff=9.55887e-14
 -0.000000	 -0.000000	diff=4.73683e-12
 -0.000000	 -0.000000	diff=1.64656e-10
  local_diff=1.39793e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.56627e-13
 -0.000000	 -0.000000	diff=2.8651e-13
 -0.000000	 -0.000000	diff=1.292e-12
 -0.000000	 -0.000000	diff=4.18776e-13
  0.000000	  0.000000	diff=5.84184e-13
 -0.000000	 -0.000000	diff=2.85181e-13
 -0.000005	 -0.000005	diff=2.94386e-11
 -0.000002	 -0.000002	diff=1.44854e-12
  0.000000	  0.000000	diff=1.97406e-13
 -0.000000	 -0.000000	diff=9.85751e-14
 -0.000000	 -0.000000	diff=9.73774e-14
 -0.000000	 -0.000000	diff=6.79093e-13
  0.000000	  0.000000	diff=1.51153e-12
 -0.000000	 -0.000000	diff=4.1157e-13
 -0.000012	 -0.000012	diff=1.92866e-10
  0.000003	  0.000003	diff=2.25878e-13
  0.000000	  0.000000	diff=2.23205e-13
 -0.000000	 -0.000000	diff=5.12979e-13
 -0.000000	 -0.000000	diff=3.25277e-13
 -0.000000	 -0.000000	diff=7.48068e-13
 -0.000000	 -0.000000	diff=6.01617e-14
 -0.000000	 -0.000000	diff=2.72222e-13
  0.000000	  0.000000	diff=1.01678e-09
 -0.000000	 -0.000000	diff=6.86145e-12
 -0.000000	 -0.000000	diff=2.40609e-13
  0.000000	  0.000000	diff=8.5436e-14
  0.000000	  0.000000	diff=1.08708e-13
  0.000000	  0.000000	diff=1.84543e-14
  0.000000	  0.000000	diff=1.48858e-13
  0.000000	  0.000000	diff=3.26713e-13
 -0.000001	 -0.000001	diff=6.75238e-12
  0.000000	  0.000000	diff=1.78311e-09
  local_diff=3.04688e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.13257e-10
 -0.000002	 -0.000002	diff=1.1607e-09
  0.000001	  0.000001	diff=2.30419e-10
 -0.000001	 -0.000001	diff=9.34861e-10
  local_diff=2.53924e-09
# W_emb_tgt, [2 5]
 -0.000001	 -0.000001	diff=2.17298e-08
 -0.000007	 -0.000007	diff=5.1282e-09
  0.000006	  0.000006	diff=6.3696e-09
 -0.000002	 -0.000002	diff=1.20515e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.02644e-09
 -0.000003	 -0.000003	diff=2.43642e-09
 -0.000001	 -0.000001	diff=3.43747e-09
 -0.000002	 -0.000002	diff=1.7029e-09
  local_diff=4.7036e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=2.00027e-13
  0.000000	 -0.000000	diff=3.53876e-15
  0.000000	  0.000000	diff=1.03515e-13
  0.000000	 -0.000000	diff=1.2221e-14
  0.000000	 -0.000000	diff=4.70004e-13
  0.000000	 -0.000000	diff=1.68453e-14
 -0.000000	 -0.000000	diff=8.99824e-13
 -0.000000	 -0.000000	diff=1.63797e-13
  0.000000	  0.000000	diff=4.42753e-13
 -0.000000	  0.000000	diff=1.47472e-12
 -0.000000	 -0.000000	diff=5.68026e-13
  0.000000	 -0.000000	diff=5.20854e-15
  0.000000	  0.000000	diff=1.41086e-13
 -0.000000	  0.000000	diff=7.45126e-13
 -0.000000	 -0.000000	diff=5.52633e-13
 -0.000000	 -0.000000	diff=7.52671e-14
  0.000000	  0.000000	diff=7.5239e-15
  0.000000	  0.000000	diff=7.89914e-16
  0.000000	 -0.000000	diff=4.65839e-15
  0.000000	 -0.000000	diff=8.22771e-17
  0.000000	  0.000000	diff=2.10675e-15
  0.000000	  0.000000	diff=5.02055e-16
  0.000000	 -0.000000	diff=5.62703e-13
  0.000000	 -0.000000	diff=3.52206e-13
  0.000000	  0.000000	diff=1.96603e-16
  0.000000	  0.000000	diff=7.09577e-17
  0.000000	 -0.000000	diff=4.95015e-16
  0.000000	 -0.000000	diff=1.65985e-16
  0.000000	 -0.000000	diff=1.21208e-16
  0.000000	 -0.000000	diff=3.38057e-17
  0.000000	  0.000000	diff=3.51135e-13
  0.000000	  0.000000	diff=2.89279e-13
  local_diff=7.44667e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=2.91691e-15
  0.000000	 -0.000000	diff=8.63635e-15
  0.000000	  0.000000	diff=7.1753e-16
  0.000000	  0.000000	diff=7.12669e-16
  0.000000	 -0.000000	diff=1.0178e-15
  0.000000	 -0.000000	diff=4.6243e-15
 -0.000000	 -0.000000	diff=2.15322e-13
  0.000000	  0.000000	diff=3.44698e-13
  0.000000	 -0.000000	diff=2.80882e-16
  0.000000	 -0.000000	diff=2.98484e-15
  0.000000	  0.000000	diff=4.12756e-16
  0.000000	  0.000000	diff=7.5103e-16
  0.000000	  0.000000	diff=8.56392e-18
  0.000000	 -0.000000	diff=1.45252e-15
 -0.000000	 -0.000000	diff=6.02947e-15
 -0.000000	 -0.000000	diff=2.05732e-13
  0.000000	 -0.000000	diff=6.85058e-18
  0.000000	 -0.000000	diff=4.09826e-17
  0.000000	  0.000000	diff=2.09996e-17
  0.000000	  0.000000	diff=2.36121e-17
  0.000000	  0.000000	diff=8.94147e-18
  0.000000	  0.000000	diff=2.94921e-18
  0.000000	 -0.000000	diff=6.68004e-13
  0.000000	 -0.000000	diff=7.71103e-13
  0.000000	  0.000000	diff=2.49194e-18
  0.000000	 -0.000000	diff=5.8912e-17
  0.000000	  0.000000	diff=2.12741e-17
  0.000000	  0.000000	diff=7.37673e-17
  0.000000	  0.000000	diff=2.07938e-17
  0.000000	  0.000000	diff=2.95272e-17
 -0.000000	  0.000000	diff=1.11573e-12
  0.000000	  0.000000	diff=3.3953e-13
  local_diff=3.69097e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=5.16122e-18
  0.000000	  0.000000	diff=7.88773e-17
  0.000000	 -0.000000	diff=4.33758e-18
  0.000000	  0.000000	diff=2.18858e-17
  0.000000	 -0.000000	diff=5.95911e-18
  0.000000	  0.000000	diff=6.17915e-17
 -0.000000	 -0.000000	diff=2.73834e-13
 -0.000000	 -0.000000	diff=2.06292e-13
  0.000000	 -0.000000	diff=3.10174e-17
  0.000000	  0.000000	diff=2.35991e-16
  0.000000	 -0.000000	diff=5.66031e-18
  0.000000	  0.000000	diff=1.67227e-17
  0.000000	 -0.000000	diff=9.24582e-18
  0.000000	  0.000000	diff=1.49581e-16
 -0.000000	 -0.000000	diff=9.25256e-13
  0.000000	  0.000000	diff=1.24379e-12
  0.000000	 -0.000000	diff=3.77938e-20
  0.000000	  0.000000	diff=5.71002e-19
  0.000000	 -0.000000	diff=2.76035e-19
  0.000000	  0.000000	diff=8.01838e-19
  0.000000	 -0.000000	diff=3.05801e-19
  0.000000	  0.000000	diff=1.36358e-18
 -0.000000	 -0.000000	diff=3.18071e-13
  0.000000	  0.000000	diff=2.74981e-14
  0.000000	  0.000000	diff=3.00703e-19
  0.000000	  0.000000	diff=1.01094e-18
  0.000000	 -0.000000	diff=3.94516e-19
  0.000000	  0.000000	diff=2.1505e-18
  0.000000	 -0.000000	diff=4.86068e-19
  0.000000	  0.000000	diff=3.73957e-18
 -0.000000	 -0.000000	diff=5.29717e-13
  0.000000	  0.000000	diff=1.01136e-13
  local_diff=3.62623e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.07627e-13
  0.000000	  0.000000	diff=5.274e-13
 -0.000000	 -0.000000	diff=1.61956e-13
  0.000000	  0.000000	diff=7.24399e-13
 -0.000000	 -0.000000	diff=7.95117e-13
  0.000000	  0.000000	diff=2.56264e-13
 -0.000000	 -0.000000	diff=3.86068e-14
  0.000000	  0.000000	diff=8.81761e-13
  local_diff=4.09313e-12
# W_h, [2 4]
  0.000003	  0.000003	diff=4.51324e-13
  0.000012	  0.000012	diff=5.05197e-13
 -0.000004	 -0.000004	diff=9.37328e-13
 -0.000016	 -0.000016	diff=2.25139e-13
  0.000003	  0.000003	diff=2.26244e-12
  0.000006	  0.000006	diff=1.0405e-11
  0.000008	  0.000008	diff=1.30059e-10
  0.000002	  0.000002	diff=1.53516e-10
  local_diff=2.98361e-10
# W_soft, [5 2]
 -0.000027	 -0.000027	diff=2.57295e-13
  0.000009	  0.000009	diff=4.11853e-13
  0.000004	  0.000004	diff=5.48978e-13
  0.000005	  0.000005	diff=4.69364e-13
  0.000009	  0.000009	diff=2.48185e-13
  0.000026	  0.000026	diff=2.82412e-14
 -0.000009	 -0.000009	diff=1.07672e-12
 -0.000005	 -0.000005	diff=1.51291e-13
 -0.000005	 -0.000005	diff=1.12215e-12
 -0.000008	 -0.000008	diff=8.22836e-13
  local_diff=5.13691e-12
# Num params=288, abs_diff=5.49789e-08
Elapsed time is 5.102817 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=4.49039e-09
 -0.000000	  0.000000	diff=1.79521e-09
 -0.000000	  0.000000	diff=1.19568e-09
 -0.000000	  0.000000	diff=7.2924e-10
 -0.000000	 -0.000000	diff=6.09122e-09
 -0.000000	 -0.000000	diff=2.14233e-10
  0.000005	  0.000003	diff=1.63434e-06
 -0.000000	  0.000001	diff=7.58915e-07
  0.000000	  0.000000	diff=7.59932e-09
  0.000000	 -0.000000	diff=3.0061e-09
  0.000000	 -0.000000	diff=1.99544e-09
  0.000000	 -0.000000	diff=1.24564e-09
  0.000000	  0.000000	diff=1.03543e-08
  0.000000	  0.000000	diff=3.56806e-10
 -0.000007	 -0.000004	diff=2.77387e-06
  0.000000	 -0.000001	diff=1.28032e-06
  0.000000	 -0.000000	diff=8.65134e-11
  0.000000	 -0.000000	diff=4.37143e-11
  0.000000	  0.000000	diff=8.54171e-11
  0.000000	 -0.000000	diff=2.62123e-11
  0.000000	  0.000000	diff=2.30857e-10
  0.000000	  0.000000	diff=8.79201e-12
 -0.000000	 -0.000000	diff=5.82316e-08
 -0.000000	 -0.000000	diff=2.44888e-08
 -0.000000	  0.000000	diff=6.79433e-11
 -0.000000	  0.000000	diff=4.19043e-11
 -0.000000	 -0.000000	diff=7.09294e-11
  0.000000	  0.000000	diff=2.1379e-11
 -0.000000	 -0.000000	diff=1.99347e-10
 -0.000000	 -0.000000	diff=1.28751e-11
  0.000000	  0.000000	diff=4.97215e-08
 -0.000000	  0.000000	diff=2.10847e-08
  local_diff=6.64094e-06
# W_src{2}, [8 4]
  0.000000	 -0.000000	diff=4.46042e-10
  0.000000	  0.000000	diff=1.08837e-10
  0.000000	 -0.000000	diff=2.26495e-10
  0.000000	  0.000000	diff=5.07687e-11
 -0.000000	 -0.000000	diff=2.85642e-11
  0.000000	  0.000000	diff=2.46336e-11
 -0.000002	  0.000003	diff=4.7863e-06
  0.000005	  0.000006	diff=7.91213e-07
 -0.000000	  0.000000	diff=3.89924e-10
 -0.000000	 -0.000000	diff=8.04125e-11
 -0.000000	  0.000000	diff=1.97774e-10
 -0.000000	 -0.000000	diff=4.62608e-11
  0.000000	  0.000000	diff=1.38685e-11
 -0.000000	 -0.000000	diff=3.21449e-11
  0.000002	 -0.000002	diff=4.06666e-06
 -0.000004	 -0.000005	diff=6.80811e-07
  0.000000	 -0.000000	diff=6.09906e-12
  0.000000	  0.000000	diff=5.02294e-12
  0.000000	 -0.000000	diff=1.86927e-12
  0.000000	  0.000000	diff=5.98775e-12
  0.000000	 -0.000000	diff=2.12265e-12
  0.000000	  0.000000	diff=2.13578e-12
 -0.000000	  0.000000	diff=1.11204e-07
  0.000000	  0.000000	diff=1.54198e-08
  0.000000	  0.000000	diff=7.49131e-12
 -0.000000	 -0.000000	diff=3.6607e-12
 -0.000000	  0.000000	diff=1.36638e-11
 -0.000000	 -0.000000	diff=4.84262e-12
  0.000000	  0.000000	diff=2.6375e-12
  0.000000	 -0.000000	diff=2.58628e-12
  0.000000	 -0.000000	diff=1.35183e-07
 -0.000000	 -0.000000	diff=1.84448e-08
  local_diff=1.06069e-05
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=4.27965e-09
 -0.000000	 -0.000000	diff=9.15314e-09
  0.000000	 -0.000000	diff=2.57315e-09
  0.000000	  0.000000	diff=3.50451e-09
  0.000000	 -0.000000	diff=5.74332e-09
 -0.000000	 -0.000000	diff=2.94119e-09
 -0.000002	  0.000001	diff=2.72151e-06
  0.000011	  0.000013	diff=1.79432e-06
 -0.000000	  0.000000	diff=5.85283e-09
  0.000000	  0.000000	diff=1.27659e-08
 -0.000000	  0.000000	diff=4.04327e-09
 -0.000000	 -0.000000	diff=4.55779e-09
 -0.000000	  0.000000	diff=8.31825e-09
  0.000000	  0.000000	diff=4.11703e-09
  0.000001	 -0.000004	diff=4.99856e-06
 -0.000018	 -0.000022	diff=3.71598e-06
  0.000000	  0.000000	diff=1.19811e-13
  0.000000	 -0.000000	diff=3.0291e-15
  0.000000	 -0.000000	diff=1.10181e-13
  0.000000	 -0.000000	diff=2.18812e-13
  0.000000	 -0.000000	diff=2.44364e-14
  0.000000	 -0.000000	diff=1.81404e-13
  0.000000	  0.000000	diff=6.80132e-11
  0.000000	  0.000000	diff=7.60637e-11
  0.000000	  0.000000	diff=1.57168e-13
  0.000000	  0.000000	diff=2.70467e-13
  0.000000	 -0.000000	diff=1.53316e-13
  0.000000	 -0.000000	diff=3.68363e-13
  0.000000	 -0.000000	diff=3.60098e-14
  0.000000	 -0.000000	diff=5.04544e-14
  0.000000	  0.000000	diff=1.46264e-10
  0.000000	  0.000000	diff=1.51089e-10
 -0.000000	  0.000000	diff=4.08234e-11
  0.000000	  0.000000	diff=1.01096e-10
  0.000000	  0.000000	diff=1.35387e-10
 -0.000000	 -0.000000	diff=6.18482e-11
 -0.000000	  0.000000	diff=1.72997e-10
  0.000000	  0.000000	diff=4.1654e-11
  0.000000	 -0.000000	diff=7.08443e-08
 -0.000000	 -0.000000	diff=5.88345e-08
  0.000000	 -0.000000	diff=7.20324e-11
 -0.000000	 -0.000000	diff=1.31718e-10
  0.000000	 -0.000000	diff=8.5398e-11
  0.000000	  0.000000	diff=1.28163e-10
  0.000000	 -0.000000	diff=1.6402e-10
 -0.000000	 -0.000000	diff=6.15982e-12
  0.000000	  0.000000	diff=9.07975e-09
 -0.000000	 -0.000000	diff=6.32599e-09
  local_diff=1.34449e-05
# W_tgt{2}, [8 4]
 -0.000000	  0.000000	diff=1.3164e-10
  0.000000	  0.000000	diff=1.72905e-11
  0.000000	 -0.000000	diff=3.3913e-10
  0.000000	  0.000000	diff=1.09743e-10
  0.000000	 -0.000000	diff=2.1428e-10
  0.000000	  0.000000	diff=1.02266e-10
 -0.000002	  0.000002	diff=4.26815e-06
  0.000005	  0.000006	diff=8.99332e-07
  0.000000	  0.000000	diff=7.00222e-11
  0.000000	  0.000000	diff=3.64024e-11
  0.000000	 -0.000000	diff=3.96031e-11
  0.000000	  0.000000	diff=1.04626e-11
  0.000000	  0.000000	diff=2.26758e-11
  0.000000	  0.000000	diff=2.07231e-11
 -0.000002	  0.000001	diff=3.18662e-06
  0.000010	  0.000010	diff=4.89843e-07
 -0.000000	  0.000000	diff=1.48427e-11
  0.000000	  0.000000	diff=6.15061e-12
  0.000000	 -0.000000	diff=8.89348e-12
  0.000000	  0.000000	diff=9.65043e-12
  0.000000	 -0.000000	diff=1.5147e-11
  0.000000	  0.000000	diff=6.19567e-12
 -0.000000	  0.000000	diff=1.88878e-07
  0.000000	  0.000000	diff=4.58179e-08
  0.000000	 -0.000000	diff=1.55623e-11
  0.000000	 -0.000000	diff=5.04179e-12
 -0.000000	  0.000000	diff=2.19087e-11
 -0.000000	 -0.000000	diff=3.1738e-12
 -0.000000	  0.000000	diff=2.7007e-11
 -0.000000	 -0.000000	diff=2.18102e-12
  0.000000	 -0.000000	diff=3.90944e-07
 -0.000000	 -0.000000	diff=9.60356e-08
  local_diff=9.56688e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=6.18959e-09
  0.000002	  0.000002	diff=8.61006e-09
 -0.000003	 -0.000001	diff=2.15358e-06
  0.000005	  0.000001	diff=4.04744e-06
  local_diff=6.21582e-06
# W_emb_tgt, [2 5]
 -0.000005	 -0.000013	diff=8.45303e-06
 -0.000001	 -0.000003	diff=1.53133e-06
 -0.000015	 -0.000024	diff=9.79698e-06
  0.000001	 -0.000001	diff=2.11425e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000000	diff=4.72469e-07
 -0.000001	 -0.000001	diff=4.12629e-08
 -0.000003	 -0.000003	diff=2.45657e-07
 -0.000000	 -0.000000	diff=4.41376e-08
  local_diff=2.26991e-05
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=8.59575e-13
  0.000000	  0.000000	diff=1.09171e-14
  0.000000	  0.000000	diff=1.13366e-13
  0.000000	  0.000000	diff=1.34435e-15
  0.000000	 -0.000000	diff=4.28938e-13
  0.000000	  0.000000	diff=8.66671e-15
 -0.000000	 -0.000000	diff=3.32386e-11
 -0.000000	 -0.000000	diff=2.60364e-11
  0.000000	  0.000000	diff=1.96215e-13
  0.000000	 -0.000000	diff=1.67707e-14
  0.000000	 -0.000000	diff=1.06569e-13
  0.000000	  0.000000	diff=3.28955e-15
  0.000000	  0.000000	diff=1.33063e-13
  0.000000	 -0.000000	diff=1.07321e-14
 -0.000000	 -0.000000	diff=8.99282e-12
  0.000000	  0.000000	diff=2.32252e-12
  0.000000	  0.000000	diff=6.75969e-15
  0.000000	 -0.000000	diff=3.0315e-16
  0.000000	 -0.000000	diff=3.83711e-15
  0.000000	  0.000000	diff=8.74618e-17
  0.000000	  0.000000	diff=1.94148e-15
  0.000000	 -0.000000	diff=1.98088e-16
  0.000000	 -0.000000	diff=1.21373e-12
  0.000000	 -0.000000	diff=1.35597e-13
  0.000000	 -0.000000	diff=2.7296e-16
  0.000000	 -0.000000	diff=6.30302e-17
  0.000000	 -0.000000	diff=2.44145e-16
  0.000000	  0.000000	diff=3.55912e-17
  0.000000	 -0.000000	diff=2.17578e-16
  0.000000	 -0.000000	diff=3.22152e-17
  0.000000	  0.000000	diff=1.2865e-12
  0.000000	 -0.000000	diff=7.27589e-14
  local_diff=7.52023e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=3.13402e-15
  0.000000	 -0.000000	diff=4.428e-15
  0.000000	  0.000000	diff=3.38036e-16
  0.000000	  0.000000	diff=2.53099e-16
  0.000000	 -0.000000	diff=1.60062e-15
  0.000000	 -0.000000	diff=2.78012e-15
  0.000000	  0.000000	diff=8.84346e-12
  0.000000	  0.000000	diff=3.78632e-12
  0.000000	 -0.000000	diff=2.26297e-16
  0.000000	 -0.000000	diff=1.79109e-15
  0.000000	  0.000000	diff=2.29847e-16
  0.000000	  0.000000	diff=2.78566e-16
  0.000000	 -0.000000	diff=2.58706e-16
  0.000000	 -0.000000	diff=1.17417e-15
 -0.000000	 -0.000000	diff=7.74935e-13
 -0.000000	 -0.000000	diff=4.96314e-12
  0.000000	 -0.000000	diff=1.65886e-18
  0.000000	 -0.000000	diff=1.08805e-17
  0.000000	  0.000000	diff=2.31469e-17
  0.000000	  0.000000	diff=8.4856e-18
  0.000000	  0.000000	diff=1.6536e-17
  0.000000	  0.000000	diff=8.8351e-18
  0.000000	 -0.000000	diff=1.39665e-12
  0.000000	 -0.000000	diff=9.296e-13
  0.000000	  0.000000	diff=4.67219e-18
  0.000000	 -0.000000	diff=2.12564e-17
  0.000000	  0.000000	diff=1.83651e-17
  0.000000	  0.000000	diff=3.07676e-17
  0.000000	  0.000000	diff=1.9873e-17
  0.000000	  0.000000	diff=1.68556e-17
  0.000000	  0.000000	diff=3.75394e-13
  0.000000	  0.000000	diff=5.47501e-14
  local_diff=2.11409e-11
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.59063e-17
  0.000000	  0.000000	diff=6.71643e-17
  0.000000	 -0.000000	diff=2.61415e-18
  0.000000	  0.000000	diff=1.71356e-17
  0.000000	 -0.000000	diff=1.70129e-17
  0.000000	  0.000000	diff=6.02683e-17
  0.000000	  0.000000	diff=1.09386e-12
 -0.000000	 -0.000000	diff=2.3372e-11
  0.000000	 -0.000000	diff=7.18258e-17
  0.000000	  0.000000	diff=2.07273e-16
  0.000000	 -0.000000	diff=6.59434e-18
  0.000000	  0.000000	diff=3.10265e-17
  0.000000	 -0.000000	diff=4.5622e-17
  0.000000	  0.000000	diff=1.78092e-16
  0.000000	  0.000000	diff=1.74353e-11
 -0.000000	 -0.000000	diff=3.5718e-12
  0.000000	 -0.000000	diff=8.24437e-20
  0.000000	  0.000000	diff=2.49379e-19
  0.000000	 -0.000000	diff=3.54651e-19
  0.000000	  0.000000	diff=4.58602e-19
  0.000000	 -0.000000	diff=4.1873e-19
  0.000000	  0.000000	diff=6.96684e-19
  0.000000	 -0.000000	diff=9.30078e-13
  0.000000	  0.000000	diff=9.14502e-13
  0.000000	 -0.000000	diff=3.03704e-19
  0.000000	  0.000000	diff=1.52519e-18
  0.000000	 -0.000000	diff=5.14689e-19
  0.000000	  0.000000	diff=1.3255e-18
  0.000000	 -0.000000	diff=1.1488e-18
  0.000000	  0.000000	diff=3.06793e-18
  0.000000	  0.000000	diff=7.93136e-14
  0.000000	 -0.000000	diff=3.82214e-13
  local_diff=4.77797e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=4.30132e-11
  0.000000	  0.000000	diff=5.20763e-11
 -0.000000	 -0.000000	diff=6.27732e-11
  0.000000	  0.000000	diff=6.32795e-11
 -0.000000	 -0.000000	diff=4.04992e-11
  0.000000	  0.000000	diff=2.1977e-11
 -0.000000	 -0.000000	diff=5.36699e-11
  0.000000	  0.000000	diff=3.04874e-11
  local_diff=3.67776e-10
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=7.19485e-12
  0.000000	  0.000000	diff=8.28383e-12
  0.000000	  0.000000	diff=1.91579e-11
  0.000000	  0.000000	diff=4.67472e-12
 -0.000000	 -0.000000	diff=1.9829e-11
  0.000000	  0.000000	diff=2.30358e-12
 -0.000005	 -0.000005	diff=2.78063e-11
  0.000007	  0.000007	diff=9.39587e-11
  0.000000	  0.000000	diff=1.31696e-11
 -0.000000	 -0.000000	diff=1.48252e-11
 -0.000000	 -0.000000	diff=5.85081e-12
  0.000000	  0.000000	diff=7.7671e-12
  0.000000	  0.000000	diff=1.17267e-11
 -0.000000	 -0.000000	diff=3.01686e-12
  0.000024	  0.000024	diff=4.4444e-10
  0.000029	  0.000029	diff=5.31047e-10
  0.000000	  0.000000	diff=7.68094e-12
 -0.000000	 -0.000000	diff=1.80078e-11
 -0.000000	 -0.000000	diff=1.26268e-11
  0.000000	  0.000000	diff=9.11401e-12
  0.000000	  0.000000	diff=1.27897e-11
 -0.000000	 -0.000000	diff=1.16874e-11
  0.000000	  0.000000	diff=4.25035e-10
  0.000000	  0.000000	diff=3.07884e-12
  0.000000	  0.000000	diff=1.16014e-11
 -0.000000	 -0.000000	diff=3.95896e-12
  0.000000	  0.000000	diff=1.13549e-12
 -0.000000	 -0.000000	diff=1.55151e-11
  0.000000	  0.000000	diff=1.42931e-11
 -0.000000	 -0.000000	diff=1.508e-11
  0.000000	  0.000000	diff=5.97739e-12
  0.000000	  0.000000	diff=4.76586e-11
  local_diff=1.83029e-09
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=2.14531e-12
  0.000000	  0.000000	diff=1.25931e-11
  0.000000	  0.000000	diff=1.56581e-11
  0.000000	  0.000000	diff=2.06388e-11
 -0.000000	 -0.000000	diff=1.97967e-11
  0.000000	  0.000000	diff=7.86371e-12
 -0.000004	 -0.000004	diff=2.13987e-12
 -0.000002	 -0.000002	diff=1.09686e-11
  0.000000	  0.000000	diff=1.06265e-11
 -0.000000	 -0.000000	diff=8.38363e-12
 -0.000000	 -0.000000	diff=1.53911e-11
 -0.000000	 -0.000000	diff=6.92682e-12
  0.000000	  0.000000	diff=9.12787e-12
 -0.000000	 -0.000000	diff=1.96178e-11
  0.000007	  0.000007	diff=8.9136e-12
  0.000016	  0.000016	diff=1.21507e-12
  0.000000	  0.000000	diff=3.74163e-13
 -0.000000	 -0.000000	diff=6.24855e-12
  0.000000	  0.000000	diff=6.50888e-13
 -0.000000	 -0.000000	diff=2.10432e-11
  0.000000	  0.000000	diff=1.40244e-12
 -0.000000	 -0.000000	diff=6.0537e-12
 -0.000000	 -0.000000	diff=2.40309e-10
  0.000000	  0.000000	diff=3.32436e-12
  0.000000	  0.000000	diff=3.92355e-12
  0.000000	 -0.000000	diff=3.8396e-12
  0.000000	  0.000000	diff=2.04304e-13
 -0.000000	 -0.000000	diff=2.07986e-11
  0.000000	  0.000000	diff=4.19808e-12
  0.000000	 -0.000000	diff=6.34948e-12
 -0.000000	 -0.000000	diff=1.02686e-11
  0.000000	  0.000000	diff=3.17596e-10
  local_diff=8.18591e-10
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=3.34248e-12
  0.000000	  0.000000	diff=1.65429e-12
  0.000000	  0.000000	diff=2.59302e-12
  0.000000	  0.000000	diff=1.99758e-14
  0.000000	  0.000000	diff=3.04627e-12
  0.000000	  0.000000	diff=4.1475e-12
  0.000008	  0.000008	diff=3.85982e-12
  0.000002	  0.000002	diff=4.29008e-12
  0.000000	  0.000000	diff=1.9394e-12
 -0.000000	 -0.000000	diff=1.77497e-11
  0.000000	  0.000000	diff=1.1921e-12
 -0.000000	 -0.000000	diff=1.89137e-11
  0.000000	  0.000000	diff=2.26593e-12
 -0.000000	 -0.000000	diff=1.60639e-11
  0.000003	  0.000003	diff=1.53204e-13
 -0.000036	 -0.000036	diff=8.80658e-12
  0.000000	  0.000000	diff=1.67045e-13
  0.000000	  0.000000	diff=1.45409e-12
  0.000000	 -0.000000	diff=3.49481e-14
  0.000000	  0.000000	diff=7.75455e-14
  0.000000	 -0.000000	diff=5.90406e-13
  0.000000	  0.000000	diff=3.91064e-12
 -0.000002	 -0.000002	diff=2.80493e-09
  0.000004	  0.000004	diff=2.12727e-12
  0.000000	  0.000000	diff=1.00805e-12
 -0.000000	 -0.000000	diff=9.83035e-12
  0.000000	 -0.000000	diff=1.42495e-14
  0.000000	  0.000000	diff=1.20046e-13
  0.000000	  0.000000	diff=2.34914e-12
  0.000000	  0.000000	diff=2.43263e-12
  0.000006	  0.000006	diff=1.19031e-10
 -0.000008	 -0.000008	diff=5.39185e-08
  local_diff=5.69566e-08
# W_emb_tgt_char, [2 5]
  0.000014	  0.000014	diff=3.82211e-09
 -0.000018	 -0.000018	diff=4.84613e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000016	  0.000016	diff=1.43626e-09
 -0.000020	 -0.000020	diff=8.48148e-10
 -0.000002	 -0.000002	diff=4.09946e-10
 -0.000005	 -0.000005	diff=1.33818e-09
 -0.000001	 -0.000001	diff=2.29561e-10
 -0.000005	 -0.000005	diff=1.33972e-09
  local_diff=9.90854e-09
# W_h, [2 4]
 -0.000002	 -0.000003	diff=5.55332e-07
  0.000006	  0.000006	diff=1.6917e-07
  0.000003	  0.000003	diff=6.76377e-07
 -0.000008	 -0.000007	diff=2.0612e-07
 -0.000003	 -0.000003	diff=2.6217e-07
  0.000002	  0.000002	diff=8.69457e-08
 -0.000011	 -0.000010	diff=7.8375e-07
 -0.000009	 -0.000009	diff=2.28167e-07
  local_diff=2.96803e-06
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=2.95413e-12
  0.000011	  0.000011	diff=2.73981e-12
 -0.000003	 -0.000003	diff=7.03001e-12
  0.000008	  0.000008	diff=2.85658e-12
 -0.000002	 -0.000002	diff=4.21184e-12
 -0.000018	 -0.000018	diff=7.383e-12
  0.000011	  0.000011	diff=3.90691e-12
  0.000005	  0.000005	diff=7.38339e-13
  0.000008	  0.000008	diff=1.48779e-12
 -0.000006	 -0.000006	diff=4.22554e-12
  local_diff=3.75339e-11
# W_soft_char, [5 2]
  0.000026	  0.000026	diff=4.78996e-12
 -0.000022	 -0.000022	diff=1.23477e-11
  0.000000	  0.000000	diff=5.00026e-12
 -0.000004	 -0.000004	diff=1.0907e-11
  0.000000	  0.000000	diff=1.0611e-12
  0.000017	  0.000017	diff=9.23225e-12
 -0.000034	 -0.000034	diff=1.13419e-11
  0.000008	  0.000008	diff=4.75485e-12
  0.000002	  0.000002	diff=8.54347e-12
  0.000006	  0.000006	diff=2.29709e-11
  local_diff=9.09495e-11
# Num params=404, abs_diff=7.22128e-05
Elapsed time is 11.863744 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.89253e-14
 -0.000000	 -0.000000	diff=3.80665e-13
  0.011919	  0.012356	diff=0.000436738
  0.000000	 -0.000000	diff=1.29395e-40
  0.000000	 -0.000000	diff=2.65023e-25
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.41404e-45
  0.000000	 -0.000000	diff=2.22235e-14
  0.000000	  0.000000	diff=7.91298e-13
 -0.015140	 -0.014509	diff=0.000631498
  0.000000	  0.000000	diff=1.39212e-40
  0.000000	 -0.000000	diff=3.6014e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.27927e-45
  0.000000	 -0.000000	diff=1.78724e-15
  0.000000	  0.000000	diff=5.13634e-39
 -0.001200	 -0.001196	diff=4.19215e-06
  0.000000	  0.000000	diff=1.24599e-41
  0.000000	  0.000000	diff=2.39132e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.35452e-56
  0.000000	  0.000000	diff=1.78724e-15
  0.000000	 -0.000000	diff=5.13634e-39
  0.001192	  0.001196	diff=4.17447e-06
  0.000000	 -0.000000	diff=1.23898e-41
  0.000000	 -0.000000	diff=2.36631e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.3542e-56
  local_diff=0.0010766
# W_tgt{1}, [8 6]
 -0.766914	 -0.785267	diff=0.018353
  0.000000	  0.000000	diff=1.06531e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.8815e-12
 -9.037399	 -9.410081	diff=0.372682
  0.054244	  0.055534	diff=0.00128949
 -0.000000	 -0.000000	diff=3.22055e-11
  0.000000	 -0.000000	diff=2.24719e-27
  1.007635	  0.981278	diff=0.0263573
  0.000000	  0.000000	diff=1.39069e-11
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.38594e-09
 12.379994	 11.758937	diff=0.621058
 -0.071480	 -0.069396	diff=0.00208473
  0.000000	  0.000000	diff=1.10955e-09
  0.000000	  0.000000	diff=1.34546e-26
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=1.49381e-27
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
  0.000000	 -0.000000	diff=2.84648e-29
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=3.20479e-13
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
 -0.000000	 -0.000000	diff=3.90064e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  local_diff=1.04184
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.35585e-26
  0.000000	  0.000000	diff=2.8781e-25
  0.011324	  0.011717	diff=0.000393193
  0.010423	  0.010755	diff=0.000331839
  local_diff=0.000725031
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.22647e-11
 -0.000000	 -0.000000	diff=7.69642e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-11.591312	-12.408891	diff=0.817579
-10.192270	-10.804343	diff=0.612073
  0.000000	  0.000000	diff=1.82339e-09
  0.000000	  0.000000	diff=2.75363e-10
  local_diff=1.42965
# W_soft, [5 2]
  0.117985	  0.117958	diff=2.65055e-05
  0.128902	  0.128874	diff=2.84991e-05
 -0.253645	 -0.253670	diff=2.57773e-05
 -0.106455	 -0.106480	diff=2.53615e-05
  0.113363	  0.113319	diff=4.41675e-05
 -0.001808	 -0.001808	diff=8.08635e-09
 -0.001955	 -0.001955	diff=8.59921e-09
  0.002521	  0.002521	diff=7.92679e-09
  0.001512	  0.001512	diff=7.7748e-09
 -0.000270	 -0.000270	diff=1.26002e-08
  local_diff=0.000150356
# Num params=110, abs_diff=2.47345
Elapsed time is 0.863870 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.34816e-20
 -0.000000	 -0.000000	diff=2.53023e-09
  0.000000	  0.000000	diff=4.3787e-23
  0.000000	 -0.000000	diff=2.83846e-15
  0.000000	 -0.000000	diff=2.28652e-28
  0.000000	  0.000000	diff=3.16321e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.98503e-20
  0.000000	  0.000000	diff=3.93833e-09
  0.000000	 -0.000000	diff=5.56607e-23
  0.000000	  0.000000	diff=3.60822e-15
  0.000000	  0.000000	diff=2.87025e-28
  0.000000	 -0.000000	diff=4.73009e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.51073e-51
  0.000000	  0.000000	diff=5.03598e-38
  0.000000	 -0.000000	diff=6.16669e-54
  0.000000	  0.000000	diff=7.00845e-46
  0.000000	  0.000000	diff=1.10983e-58
  0.000000	  0.000000	diff=2.51678e-53
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.8831e-45
  0.000000	 -0.000000	diff=2.23274e-32
  0.000000	  0.000000	diff=5.80397e-48
  0.000000	 -0.000000	diff=3.76267e-40
  0.000000	 -0.000000	diff=1.84266e-52
  0.000000	 -0.000000	diff=2.51047e-47
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=6.46857e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.55428e-54
  0.000000	  0.000000	diff=8.76417e-53
  0.000000	 -0.000000	diff=1.31334e-54
  0.000000	  0.000000	diff=3.68385e-53
  0.000000	  0.000000	diff=1.67269e-54
  0.000000	  0.000000	diff=2.26763e-52
  0.000000	  0.000000	diff=1.02191e-29
  0.000000	  0.000000	diff=1.48421e-29
  0.000000	  0.000000	diff=1.97708e-48
  0.000000	 -0.000000	diff=1.69155e-47
  0.000000	  0.000000	diff=5.19604e-49
  0.000000	 -0.000000	diff=1.38666e-47
  0.000000	  0.000000	diff=3.01272e-48
  0.000000	 -0.000000	diff=8.27168e-47
  0.000000	 -0.000000	diff=9.0586e-24
  0.000000	  0.000000	diff=2.23467e-23
  0.000000	 -0.000000	diff=1.84561e-48
  0.000000	  0.000000	diff=3.1409e-48
  0.000000	  0.000000	diff=4.54393e-49
  0.000000	  0.000000	diff=1.14558e-48
  0.000000	 -0.000000	diff=1.83828e-48
  0.000000	  0.000000	diff=9.21113e-48
  0.000000	  0.000000	diff=6.85573e-25
  0.000000	 -0.000000	diff=2.36092e-24
  0.000000	 -0.000000	diff=1.01887e-47
  0.000000	 -0.000000	diff=7.26663e-47
  0.000000	  0.000000	diff=2.82651e-48
  0.000000	 -0.000000	diff=2.63008e-47
  0.000000	 -0.000000	diff=1.01827e-47
  0.000000	 -0.000000	diff=2.60012e-46
  0.000000	 -0.000000	diff=2.47598e-24
  0.000000	  0.000000	diff=1.0339e-24
  local_diff=3.79617e-23
# W_tgt{1}, [8 6]
 -0.000004	 -0.000004	diff=4.98508e-09
  0.050148	  0.048173	diff=0.00197547
 -0.000001	 -0.000001	diff=9.19684e-10
 -0.004852	 -0.004846	diff=6.11891e-06
 -0.000004	 -0.000004	diff=5.01857e-09
-16.861985	-16.882693	diff=0.0207085
 -0.000000	 -0.000000	diff=2.24089e-12
 -0.075760	 -0.075641	diff=0.000118743
 -0.000018	 -0.000018	diff=1.17178e-07
  0.286069	  0.239398	diff=0.0466703
 -0.000004	 -0.000004	diff=1.53264e-08
 -0.023675	 -0.023531	diff=0.000144739
 -0.000018	 -0.000019	diff=1.17959e-07
-64.009606	-64.502290	diff=0.492685
 -0.000000	 -0.000000	diff=5.06447e-12
 -0.370083	 -0.367324	diff=0.00275931
 -0.000003	 -0.000003	diff=2.8759e-09
 -0.092075	 -0.092172	diff=9.71693e-05
 -0.000000	 -0.000000	diff=5.83548e-11
  0.000138	  0.000138	diff=1.60813e-08
 -0.000003	 -0.000003	diff=2.98059e-09
  0.268381	  0.268231	diff=0.000150384
 -0.000000	 -0.000000	diff=1.88724e-12
 -0.095132	 -0.094937	diff=0.000195029
  0.000005	  0.000005	diff=6.1152e-09
  0.080428	  0.079878	diff=0.00055015
  0.000000	  0.000000	diff=3.99928e-12
  0.000395	  0.000395	diff=1.31383e-07
  0.000004	  0.000004	diff=5.45053e-09
  0.823579	  0.822744	diff=0.000835628
  0.000000	  0.000000	diff=1.41454e-12
  0.120081	  0.120523	diff=0.000441736
  0.000000	  0.000000	diff=2.37094e-13
 -0.000000	 -0.000000	diff=1.57625e-12
  0.000000	  0.000000	diff=5.50291e-13
  0.000000	  0.000000	diff=1.12205e-12
  0.000000	  0.000000	diff=1.65518e-13
  0.000001	  0.000001	diff=7.18465e-13
  0.000000	  0.000000	diff=3.33371e-17
 -0.000000	 -0.000000	diff=6.37372e-13
 -0.000002	 -0.000002	diff=1.67656e-09
  0.167861	  0.166870	diff=0.000990917
  0.000000	  0.000000	diff=3.56582e-11
 -0.000657	 -0.000656	diff=7.12819e-07
 -0.000001	 -0.000001	diff=4.07367e-10
 -0.704294	 -0.705065	diff=0.00077068
 -0.000000	 -0.000000	diff=1.96455e-12
 -0.007005	 -0.007064	diff=5.90446e-05
  local_diff=0.56916
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.80799e-13
  0.000003	  0.000003	diff=1.17527e-12
  0.000001	  0.000001	diff=1.04317e-12
  0.000000	  0.000000	diff=1.1646e-12
  0.000000	  0.000000	diff=1.85515e-13
  0.000004	  0.000004	diff=8.67471e-13
 -0.000003	 -0.000003	diff=7.61113e-13
  0.000003	  0.000003	diff=7.73975e-13
  0.050823	  0.050903	diff=8.01664e-05
 -2.046568	 -2.047222	diff=0.000653766
 -0.207671	 -0.207474	diff=0.000197039
 -0.402314	 -0.402361	diff=4.70955e-05
 -0.077828	 -0.076264	diff=0.00156383
 -2.684246	 -2.690338	diff=0.00609235
  0.696532	  0.700552	diff=0.00401905
 -3.778872	 -3.779618	diff=0.000745874
 -0.128987	 -0.129030	diff=4.26756e-05
  0.061208	  0.061151	diff=5.68663e-05
 -0.126904	 -0.126919	diff=1.4947e-05
 -0.070657	 -0.070722	diff=6.55408e-05
 -0.291341	 -0.291436	diff=9.54034e-05
 -0.097532	 -0.097713	diff=0.000181571
  1.118120	  1.118619	diff=0.000499494
  0.380550	  0.379815	diff=0.000735855
  0.012946	  0.013209	diff=0.000263206
  0.461725	  0.461779	diff=5.36815e-05
  0.191919	  0.191890	diff=2.89226e-05
  0.679034	  0.678886	diff=0.000147656
  0.083802	  0.084460	diff=0.000658393
  1.541852	  1.540874	diff=0.000977706
 -1.205213	 -1.205056	diff=0.000157264
  4.465138	  4.463566	diff=0.00157229
  local_diff=0.0189506
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.02828e-09
 -0.000000	 -0.000000	diff=9.2605e-09
 -0.000000	 -0.000000	diff=2.94841e-12
 -0.000000	 -0.000000	diff=4.24691e-12
  local_diff=1.6296e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.57964e-09
  0.000000	  0.000000	diff=3.29025e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-46.634814	-48.192947	diff=1.55813
 23.595116	 22.914322	diff=0.680794
-63.733324	-63.722799	diff=0.0105255
 32.900101	 32.948650	diff=0.0485487
  local_diff=2.298
# W_soft, [5 2]
 -0.194189	 -0.194362	diff=0.000173622
 -0.792482	 -0.792957	diff=0.00047466
  0.789507	  0.789365	diff=0.00014269
  0.710923	  0.710812	diff=0.00011126
 -0.512379	 -0.512858	diff=0.000478206
  0.259154	  0.258965	diff=0.000189717
  1.222390	  1.221652	diff=0.000737428
 -0.731666	 -0.731842	diff=0.000175899
 -1.237164	 -1.237267	diff=0.000103252
  0.489267	  0.488492	diff=0.000774967
  local_diff=0.0033617
# Num params=174, abs_diff=2.88947
Elapsed time is 1.654185 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.05792e-13
  0.000000	  0.000000	diff=2.53484e-11
  0.000000	  0.000000	diff=1.75957e-17
  0.000000	 -0.000000	diff=4.30662e-21
  0.000165	  0.000169	diff=3.88032e-06
  0.000000	  0.000000	diff=2.26316e-19
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.31863e-18
  0.000000	 -0.000000	diff=3.43153e-26
 -0.000000	 -0.000000	diff=3.86931e-11
  0.000000	 -0.000000	diff=6.93468e-30
  0.000000	  0.000000	diff=5.47442e-21
  0.000000	 -0.000000	diff=2.10102e-35
  0.000000	 -0.000000	diff=1.15918e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.72548e-14
  0.000000	 -0.000000	diff=1.60375e-31
  0.000000	 -0.000000	diff=2.86987e-18
  0.000000	  0.000000	diff=6.57819e-32
 -0.000028	 -0.000028	diff=1.05142e-07
  0.000000	 -0.000000	diff=3.6913e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.77983e-19
  0.000000	  0.000000	diff=9.96869e-30
  0.000000	  0.000000	diff=1.84957e-41
  0.000000	  0.000000	diff=1.65824e-33
  0.000000	 -0.000000	diff=3.60782e-48
  0.000000	  0.000000	diff=1.59079e-20
  0.000000	 -0.000000	diff=1.27157e-36
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.78485e-34
  local_diff=3.98552e-06
# W_src{2}, [8 4]
  0.000156	  0.000155	diff=7.41308e-07
 -0.051950	 -0.051700	diff=0.000249554
  0.000002	  0.000002	diff=9.04276e-09
 -0.000395	 -0.000397	diff=1.88223e-06
  0.074041	  0.074211	diff=0.000169735
  0.015131	  0.015085	diff=4.60317e-05
  0.000000	  0.000000	diff=1.70435e-09
 -0.000000	 -0.000000	diff=8.95798e-11
  0.000000	 -0.000000	diff=1.04337e-60
  0.000000	  0.000000	diff=7.70033e-59
  0.000000	 -0.000000	diff=1.38359e-60
  0.000000	  0.000000	diff=1.86874e-59
  0.000000	 -0.000000	diff=3.10002e-60
  0.000000	  0.000000	diff=8.22314e-59
  0.000000	  0.000000	diff=1.00804e-29
  0.000000	  0.000000	diff=6.01278e-29
 -0.000001	 -0.000001	diff=3.38417e-09
 -0.025529	 -0.025469	diff=6.0629e-05
  0.000000	  0.000000	diff=6.1963e-11
 -0.000195	 -0.000195	diff=4.56596e-07
 -0.014545	 -0.014577	diff=3.201e-05
  0.008044	  0.008026	diff=1.81218e-05
  0.000000	  0.000000	diff=4.27358e-10
 -0.000000	 -0.000000	diff=7.18604e-11
  0.000001	  0.000001	diff=1.38785e-09
  0.020501	  0.020540	diff=3.89527e-05
 -0.000001	 -0.000001	diff=5.53349e-09
  0.000158	  0.000158	diff=2.98779e-07
 -0.077118	 -0.077009	diff=0.000109619
  0.006137	  0.006129	diff=7.8771e-06
 -0.000000	 -0.000000	diff=2.57831e-10
  0.000000	  0.000000	diff=4.56238e-11
  local_diff=0.000735931
# W_tgt{1}, [8 6]
  0.000068	  0.000068	diff=1.77923e-07
 -0.377777	 -0.375082	diff=0.00269499
  0.000038	  0.000038	diff=5.64938e-10
  0.179689	  0.179851	diff=0.000162355
  0.000086	  0.000086	diff=1.94569e-07
  0.430188	  0.390988	diff=0.0392
  0.000015	  0.000015	diff=5.30743e-08
 -0.037834	 -0.037604	diff=0.000229806
 -0.000000	 -0.000000	diff=2.53059e-09
 -0.335776	 -0.257176	diff=0.0786002
  0.000000	  0.000000	diff=2.89869e-09
  0.002525	  0.002506	diff=1.96204e-05
 -0.000000	 -0.000000	diff=2.47296e-09
  4.101734	  3.545747	diff=0.555988
 -0.000000	 -0.000000	diff=5.12821e-13
 -0.129065	 -0.124496	diff=0.00456849
 -0.000000	 -0.000000	diff=1.44817e-11
  0.016114	  0.016652	diff=0.000537924
  0.000000	  0.000000	diff=2.58485e-12
 -0.000028	 -0.000028	diff=1.18119e-10
  0.000001	  0.000001	diff=9.44108e-12
 -0.009378	 -0.009462	diff=8.34718e-05
  0.000000	  0.000000	diff=3.45116e-13
  0.003196	  0.003198	diff=1.76973e-06
  0.000000	  0.000000	diff=1.08825e-10
  0.004006	  0.005904	diff=0.00189828
  0.000005	  0.000005	diff=1.34465e-10
 -0.000122	 -0.000122	diff=7.82769e-08
  0.000009	  0.000009	diff=2.47621e-09
 -0.774061	 -0.774462	diff=0.00040099
  0.000000	  0.000000	diff=1.11953e-12
  0.008891	  0.008938	diff=4.66139e-05
 -0.000000	 -0.000000	diff=1.24573e-09
  0.000263	  0.000262	diff=7.83304e-07
 -0.000018	 -0.000018	diff=1.62356e-09
  0.000036	  0.000036	diff=1.03458e-07
 -0.000030	 -0.000030	diff=3.13933e-08
  0.000281	  0.000280	diff=8.98631e-07
 -0.000000	 -0.000000	diff=2.92322e-13
  0.000000	  0.000000	diff=1.08686e-12
 -0.000000	 -0.000000	diff=7.96117e-12
  0.002446	  0.003417	diff=0.000971146
 -0.000001	 -0.000001	diff=1.05707e-11
  0.000058	  0.000058	diff=1.59554e-08
 -0.000002	 -0.000002	diff=1.94472e-10
  0.417876	  0.417789	diff=8.67988e-05
 -0.000000	 -0.000000	diff=3.22329e-13
 -0.003831	 -0.003815	diff=1.58554e-05
  local_diff=0.685509
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=6.66348e-13
  0.000000	  0.000000	diff=6.10105e-13
  0.000000	  0.000000	diff=9.65873e-13
  0.000000	  0.000000	diff=1.90049e-12
 -0.000000	 -0.000000	diff=1.11083e-12
  0.000000	  0.000000	diff=1.87989e-12
 -0.000000	 -0.000000	diff=1.35319e-12
  0.000000	  0.000000	diff=5.8262e-13
  0.217844	  0.218061	diff=0.00021704
 -0.472190	 -0.469976	diff=0.00221478
 -0.097230	 -0.097174	diff=5.5989e-05
 -0.325293	 -0.325539	diff=0.000246364
  0.557278	  0.559871	diff=0.00259358
 -1.526243	 -1.518094	diff=0.00814958
 -1.531277	 -1.529493	diff=0.00178395
 -0.515424	 -0.514534	diff=0.000889868
  0.068274	  0.068202	diff=7.15025e-05
 -0.053350	 -0.053277	diff=7.3371e-05
 -0.124763	 -0.124748	diff=1.50754e-05
 -0.005424	 -0.005436	diff=1.22185e-05
 -0.075474	 -0.075506	diff=3.23948e-05
 -0.183737	 -0.183720	diff=1.71131e-05
  0.407739	  0.407946	diff=0.000207326
 -0.249140	 -0.250224	diff=0.00108407
  0.072757	  0.072690	diff=6.67605e-05
  0.288081	  0.288275	diff=0.000194448
  0.089550	  0.089540	diff=9.712e-06
  0.362486	  0.363060	diff=0.000573974
 -0.168338	 -0.167893	diff=0.000445409
  1.041265	  1.041665	diff=0.000400359
 -0.279811	 -0.279331	diff=0.000480321
  3.008567	  3.001825	diff=0.00674267
  local_diff=0.0265779
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.09246e-10
  0.000000	  0.000000	diff=9.31547e-11
  0.000118	  0.000120	diff=1.95821e-06
  0.000000	 -0.000000	diff=6.74767e-15
  local_diff=1.95882e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.02899e-11
 -0.000000	 -0.000000	diff=3.4354e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 29.868986	 30.897636	diff=1.02865
-15.147911	-14.914619	diff=0.233291
 -4.963032	 -5.462542	diff=0.49951
  2.964002	  2.824189	diff=0.139814
  local_diff=1.90126
# W_soft, [5 2]
 -0.169247	 -0.169422	diff=0.000174874
 -0.453029	 -0.453367	diff=0.000338023
  0.500466	  0.500293	diff=0.000173735
  0.537580	  0.537427	diff=0.000153904
 -0.414584	 -0.414930	diff=0.000346442
 -0.109892	 -0.110159	diff=0.000267945
  0.622417	  0.621976	diff=0.000441468
  0.210969	  0.210769	diff=0.00019921
 -1.050254	 -1.050476	diff=0.000222186
  0.328336	  0.327891	diff=0.000444995
  local_diff=0.00276278
# Num params=174, abs_diff=2.61686
Elapsed time is 1.903831 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=4.93503e-18
  0.000000	 -0.000000	diff=3.19414e-09
  0.000000	 -0.000000	diff=2.44249e-21
  0.000000	 -0.000000	diff=3.08856e-20
 -0.000024	 -0.000025	diff=7.41198e-07
  0.000000	  0.000000	diff=2.83662e-21
  0.000000	  0.000000	diff=0
 -0.004338	 -0.003739	diff=0.000598602
  0.000000	  0.000000	diff=8.36234e-18
 -0.000000	  0.000000	diff=5.10538e-09
  0.000000	 -0.000000	diff=5.85081e-30
  0.000000	  0.000000	diff=3.92607e-20
  0.000000	  0.000000	diff=2.00075e-35
  0.000000	  0.000000	diff=1.93182e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.37043e-65
  0.000000	  0.000000	diff=6.32063e-49
  0.000000	  0.000000	diff=3.04085e-22
  0.000000	  0.000000	diff=9.55397e-59
  0.000003	  0.000003	diff=1.18872e-08
  0.000000	 -0.000000	diff=3.52699e-22
  0.000000	  0.000000	diff=0
  0.000457	  0.000465	diff=8.08051e-06
  0.000000	  0.000000	diff=5.91871e-58
  0.000000	 -0.000000	diff=1.94462e-41
  0.000000	  0.000000	diff=4.20975e-41
  0.000000	 -0.000000	diff=2.93941e-51
  0.000000	  0.000000	diff=4.3221e-25
  0.000000	 -0.000000	diff=1.53881e-40
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.70234e-24
  local_diff=0.000607444
# W_src{2}, [8 4]
  0.000176	  0.000175	diff=8.10861e-07
 -0.001072	 -0.001068	diff=4.8646e-06
 -0.000006	 -0.000006	diff=2.76992e-08
  0.000009	  0.000009	diff=4.11615e-08
 -0.095347	 -0.095019	diff=0.000327664
  0.921614	  0.892052	diff=0.0295616
  0.000001	  0.000001	diff=7.21874e-09
 -0.000000	 -0.000000	diff=7.24867e-10
  0.000000	  0.000000	diff=6.51802e-61
  0.000000	 -0.000000	diff=9.79139e-59
  0.000000	 -0.000000	diff=1.92999e-60
  0.000000	  0.000000	diff=2.65102e-60
  0.000000	  0.000000	diff=1.80523e-60
  0.000000	 -0.000000	diff=6.46001e-59
  0.000000	  0.000000	diff=5.0982e-29
  0.000000	 -0.000000	diff=3.59476e-28
 -0.000006	 -0.000006	diff=1.38662e-08
 -0.001520	 -0.001516	diff=3.57357e-06
 -0.000000	 -0.000000	diff=2.80933e-10
 -0.000011	 -0.000011	diff=2.82381e-08
  0.051977	  0.051983	diff=6.17477e-06
  0.022476	  0.022467	diff=8.61443e-06
  0.000000	  0.000000	diff=1.73889e-09
 -0.000000	 -0.000000	diff=4.40835e-12
  0.000005	  0.000005	diff=1.0826e-08
 -0.000529	 -0.000533	diff=4.35019e-06
  0.000004	  0.000004	diff=1.62897e-08
 -0.000016	 -0.000016	diff=7.8695e-08
  0.183422	  0.182336	diff=0.00108665
 -0.719404	 -0.740052	diff=0.0206481
 -0.000000	 -0.000000	diff=1.18566e-09
  0.000000	  0.000000	diff=1.08773e-12
  local_diff=0.0516526
# W_tgt{1}, [8 6]
  0.000001	  0.000001	diff=2.19747e-09
  0.002266	  0.002363	diff=9.72871e-05
  0.000000	  0.000000	diff=4.32551e-12
  0.011301	  0.011283	diff=1.85713e-05
  0.000001	  0.000001	diff=2.20818e-09
  0.118309	  0.130815	diff=0.0125056
  0.000000	  0.000000	diff=1.1398e-12
  0.001645	  0.001653	diff=8.50111e-06
  0.000006	  0.000006	diff=5.15827e-08
  0.065185	  0.067860	diff=0.00267472
  0.000000	  0.000000	diff=4.87833e-11
  0.055231	  0.054791	diff=0.000439789
  0.000006	  0.000007	diff=5.18455e-08
 -1.550383	 -1.247777	diff=0.302606
  0.000000	  0.000000	diff=1.44921e-12
 -0.118018	 -0.118740	diff=0.000721926
  0.000001	  0.000001	diff=2.09766e-09
 -0.001827	 -0.001725	diff=0.000101285
 -0.000000	 -0.000000	diff=1.23039e-10
 -0.026644	 -0.026746	diff=0.000102817
 -0.000316	 -0.000315	diff=7.61028e-07
 -0.047123	 -0.046817	diff=0.000306806
  0.000001	  0.000001	diff=6.13507e-09
 -0.000442	 -0.000433	diff=8.51723e-06
 -0.000004	 -0.000004	diff=8.85394e-09
  0.010328	  0.010447	diff=0.00011902
 -0.000000	 -0.000000	diff=8.68028e-10
 -0.000704	 -0.000704	diff=2.19909e-08
 -0.000847	 -0.000842	diff=5.33828e-06
 -0.300936	 -0.301531	diff=0.000595316
  0.000003	  0.000003	diff=4.33726e-08
 -0.002802	 -0.002771	diff=3.04059e-05
 -0.000083	 -0.000083	diff=2.86866e-07
 -0.000050	 -0.000050	diff=1.97653e-07
 -0.000117	 -0.000116	diff=4.79512e-07
 -0.000064	 -0.000064	diff=2.61839e-07
  0.000484	  0.000486	diff=2.09958e-06
 -0.000011	 -0.000011	diff=4.4027e-08
 -0.000002	 -0.000002	diff=1.57142e-08
  0.000000	  0.000000	diff=1.02258e-11
  0.000001	  0.000001	diff=6.88076e-09
  0.000927	  0.000916	diff=1.04522e-05
  0.000000	  0.000000	diff=4.89584e-10
  0.002259	  0.002258	diff=7.12133e-07
  0.000627	  0.000630	diff=2.97819e-06
  0.079501	  0.079544	diff=4.22841e-05
 -0.000003	 -0.000003	diff=2.40266e-08
  0.000580	  0.000581	diff=7.55174e-07
  local_diff=0.320404
# W_tgt{2}, [8 4]
  0.000623	  0.000626	diff=2.82309e-06
 -0.000521	 -0.000521	diff=2.5315e-07
 -0.000003	 -0.000003	diff=1.36912e-08
  0.000336	  0.000335	diff=1.38493e-06
 -0.000708	 -0.000704	diff=3.80235e-06
  0.002136	  0.002146	diff=9.99194e-06
  0.000001	  0.000001	diff=3.62809e-09
  0.001020	  0.001025	diff=4.68635e-06
 -0.028184	 -0.028198	diff=1.35057e-05
 -0.698397	 -0.698107	diff=0.000289259
  0.005698	  0.005695	diff=3.21144e-06
 -0.012854	 -0.012841	diff=1.27889e-05
 -0.269652	 -0.271364	diff=0.00171247
 -1.439698	 -1.439778	diff=7.97449e-05
 -3.502950	 -3.498598	diff=0.00435172
 -1.256629	 -1.254933	diff=0.00169609
  0.055009	  0.055023	diff=1.35538e-05
  0.032590	  0.032581	diff=8.61794e-06
  0.014903	  0.014895	diff=7.44831e-06
 -0.059815	 -0.059821	diff=5.41646e-06
 -0.107267	 -0.106750	diff=0.000516204
 -0.001726	 -0.001739	diff=1.38488e-05
 -0.224488	 -0.224554	diff=6.61953e-05
 -0.754026	 -0.754435	diff=0.000408903
  0.807687	  0.806899	diff=0.000787914
  0.294375	  0.294421	diff=4.58131e-05
 -0.040411	 -0.040401	diff=9.91927e-06
 -0.375986	 -0.376130	diff=0.000144564
  0.350550	  0.350486	diff=6.32274e-05
  0.076409	  0.076324	diff=8.51704e-05
 -0.469218	 -0.469692	diff=0.000474252
 -4.537947	 -4.547018	diff=0.0090705
  local_diff=0.0199033
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000749	 -0.000730	diff=1.96452e-05
 -0.000000	 -0.000000	diff=2.39108e-11
  0.000000	  0.000000	diff=7.15057e-09
  0.000000	  0.000000	diff=8.25471e-09
  local_diff=1.96606e-05
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.54862e-12
 -0.000000	 -0.000000	diff=1.45275e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-30.217535	-26.560473	diff=3.65706
 12.763276	 13.667926	diff=0.90465
  7.149709	  7.083902	diff=0.0658071
 -3.640520	 -3.660044	diff=0.0195236
  local_diff=4.64704
# W_h, [2 4]
  0.361054	  0.356239	diff=0.00481585
 -0.000253	 -0.000252	diff=6.80117e-07
 -0.589500	 -0.603836	diff=0.0143357
  0.000514	  0.000516	diff=2.82851e-06
  3.893030	  3.840736	diff=0.0522934
 -2.774627	 -2.775989	diff=0.0013617
  2.929506	  2.932247	diff=0.00274088
 -2.944228	 -2.940896	diff=0.00333148
  local_diff=0.0788825
# W_soft, [5 2]
 -0.956667	 -0.957174	diff=0.000506976
  5.213387	  5.206646	diff=0.00674059
  0.155391	  0.148653	diff=0.0067377
 -2.569958	 -2.570744	diff=0.000785518
 -1.827009	 -1.827381	diff=0.000371877
  2.047773	  2.046128	diff=0.0016451
  0.008199	  0.004965	diff=0.0032344
  1.898402	  1.894751	diff=0.00365141
 -1.834499	 -1.836127	diff=0.00162829
 -2.109547	 -2.109716	diff=0.000168959
  local_diff=0.0254708
# Num params=182, abs_diff=5.14398
Elapsed time is 2.624293 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.6908e-34
  0.000000	  0.000000	diff=6.52136e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.14811e-34
  0.000000	 -0.000000	diff=8.31817e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78785e-73
  0.000000	 -0.000000	diff=5.70539e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.11556e-65
  0.000000	  0.000000	diff=3.2557e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.98983e-66
  0.000000	 -0.000000	diff=1.35318e-65
  0.000000	 -0.000000	diff=6.80857e-67
  0.000000	 -0.000000	diff=2.33138e-66
  0.000000	  0.000000	diff=1.85977e-66
  0.000000	 -0.000000	diff=1.05465e-65
  0.000000	  0.000000	diff=1.86755e-36
  0.000000	 -0.000000	diff=8.34134e-36
  0.000000	 -0.000000	diff=7.79664e-59
  0.000000	  0.000000	diff=5.83381e-58
  0.000000	  0.000000	diff=1.82474e-59
  0.000000	  0.000000	diff=9.23776e-59
  0.000000	 -0.000000	diff=8.49407e-59
  0.000000	  0.000000	diff=5.16748e-58
  0.000000	  0.000000	diff=1.11184e-29
  0.000000	  0.000000	diff=3.97523e-28
  0.000000	  0.000000	diff=1.29167e-59
  0.000000	 -0.000000	diff=5.90976e-59
  0.000000	 -0.000000	diff=5.78638e-60
  0.000000	 -0.000000	diff=8.1766e-60
  0.000000	  0.000000	diff=8.49742e-60
  0.000000	 -0.000000	diff=4.77459e-59
  0.000000	  0.000000	diff=1.60399e-29
  0.000000	 -0.000000	diff=2.8376e-29
  0.000000	 -0.000000	diff=2.05037e-59
  0.000000	  0.000000	diff=5.8094e-58
  0.000000	  0.000000	diff=1.34231e-59
  0.000000	  0.000000	diff=2.23857e-58
  0.000000	 -0.000000	diff=9.57301e-60
  0.000000	  0.000000	diff=8.27746e-58
  0.000000	  0.000000	diff=6.35455e-29
  0.000000	  0.000000	diff=2.21817e-28
  local_diff=7.38419e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_pos, [2 2]
  0.000000	 -0.000000	diff=1.5568e-29
  0.000000	  0.000000	diff=1.31341e-29
  0.000000	 -0.000000	diff=1.2133e-30
  0.000000	  0.000000	diff=1.25461e-30
  local_diff=3.117e-29
# v_pos, [1 2]
  0.000000	 -0.000000	diff=1.01433e-29
  0.000000	 -0.000000	diff=1.01748e-29
  local_diff=2.03181e-29
# W_h, [2 4]
  0.000000	 -0.000000	diff=3.05378e-30
  0.000000	 -0.000000	diff=3.65282e-30
  0.000000	 -0.000000	diff=1.54583e-30
  0.000000	  0.000000	diff=6.8135e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 3.674266 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.84136e-12
 -0.000000	 -0.000000	diff=1.08734e-08
  0.000000	  0.000000	diff=4.35354e-28
  0.000000	 -0.000000	diff=3.7902e-19
  0.000001	  0.000001	diff=3.47287e-08
  0.000000	 -0.000000	diff=3.04848e-21
  0.000000	  0.000000	diff=0
 -0.000601	 -0.000638	diff=3.74958e-05
 -0.000000	 -0.000000	diff=2.84079e-12
  0.000000	  0.000000	diff=1.70572e-08
  0.000000	 -0.000000	diff=5.53448e-28
  0.000000	  0.000000	diff=4.81797e-19
  0.000000	  0.000000	diff=4.00668e-34
  0.000000	  0.000000	diff=1.37967e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.36393e-63
  0.000000	  0.000000	diff=7.75651e-48
  0.000000	 -0.000000	diff=1.12218e-66
  0.000000	  0.000000	diff=1.17244e-57
  0.000000	  0.000000	diff=4.96915e-73
  0.000000	  0.000000	diff=1.09456e-65
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.34168e-56
  0.000000	 -0.000000	diff=2.3864e-40
  0.000000	  0.000000	diff=4.14312e-59
  0.000000	 -0.000000	diff=3.60717e-50
  0.000000	 -0.000000	diff=2.18632e-65
  0.000000	 -0.000000	diff=6.30844e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=3.75585e-05
# W_src{2}, [8 4]
  0.331666	  0.330350	diff=0.00131562
 -0.002764	 -0.002751	diff=1.31345e-05
  0.000000	  0.000000	diff=1.92861e-67
  0.000000	  0.000000	diff=1.29805e-65
  0.293465	  0.294808	diff=0.00134283
 -0.777347	 -0.773645	diff=0.0037022
 -0.000003	 -0.000003	diff=3.17688e-08
 -0.000001	 -0.000001	diff=1.19257e-08
  0.000000	  0.000000	diff=1.26232e-58
  0.000000	 -0.000000	diff=1.41688e-57
  0.000000	 -0.000000	diff=1.3576e-59
  0.000000	 -0.000000	diff=3.6559e-58
  0.000000	  0.000000	diff=1.69409e-58
  0.000000	 -0.000000	diff=1.23259e-57
  0.000000	 -0.000000	diff=1.35871e-28
  0.000000	 -0.000000	diff=6.03963e-28
  0.000000	  0.000000	diff=1.40596e-60
  0.000000	  0.000000	diff=8.13129e-59
  0.000000	  0.000000	diff=8.05466e-61
  0.000000	  0.000000	diff=1.58832e-59
  0.000000	  0.000000	diff=1.32401e-60
  0.000000	  0.000000	diff=1.70636e-59
  0.000000	 -0.000000	diff=5.96654e-29
  0.000000	  0.000000	diff=5.20489e-29
  0.000000	  0.000000	diff=2.1071e-58
  0.000000	 -0.000000	diff=1.86114e-57
  0.000000	 -0.000000	diff=4.88898e-59
  0.000000	 -0.000000	diff=6.66062e-58
  0.000000	  0.000000	diff=2.12671e-58
  0.000000	 -0.000000	diff=1.86368e-57
  0.000000	 -0.000000	diff=1.13055e-28
  0.000000	 -0.000000	diff=6.45202e-28
  local_diff=0.00637384
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.36612e-10
  0.141449	  0.139208	diff=0.00224101
 -0.000000	 -0.000000	diff=6.64415e-12
 -0.051303	 -0.051210	diff=9.27442e-05
  0.000000	  0.000000	diff=7.34172e-10
-10.081949	-10.300090	diff=0.218141
  0.000000	  0.000000	diff=1.7283e-12
 -0.427313	 -0.429863	diff=0.00255021
  0.000002	  0.000002	diff=1.72471e-08
  0.645249	  0.589195	diff=0.056054
 -0.000000	 -0.000000	diff=1.07554e-10
 -0.250880	 -0.248682	diff=0.00219798
  0.000002	  0.000002	diff=1.7243e-08
-39.052507	-48.093148	diff=9.04064
  0.000000	  0.000000	diff=2.85422e-12
 -1.833732	 -1.891739	diff=0.0580063
 -0.000080	 -0.000080	diff=3.73224e-07
  0.001548	  0.001542	diff=6.01329e-06
  0.856652	  0.854887	diff=0.00176502
  0.119273	  0.119784	diff=0.000510345
  0.100424	  0.100992	diff=0.000568028
  4.015067	  4.058219	diff=0.0431522
  0.000002	  0.000002	diff=2.03843e-08
 -0.000000	 -0.000000	diff=3.46268e-10
 -0.000061	 -0.000061	diff=2.11903e-07
 -0.195365	 -0.195682	diff=0.000317279
 -0.855340	 -0.857150	diff=0.00181043
  0.054962	  0.055070	diff=0.000108537
 -0.108978	 -0.108419	diff=0.000559092
  1.272769	  1.254360	diff=0.0184092
  0.000002	  0.000002	diff=1.1463e-08
  0.476651	  0.473620	diff=0.00303052
  0.122645	  0.123101	diff=0.000455664
 -0.311660	 -0.310889	diff=0.000770932
 -0.348081	 -0.349501	diff=0.00141992
  0.359056	  0.358154	diff=0.000901679
 -0.026671	 -0.026604	diff=6.66915e-05
 -0.000266	 -0.000265	diff=1.00308e-06
 -0.000001	 -0.000001	diff=5.54706e-09
  0.000007	  0.000007	diff=5.53458e-08
 -0.000000	 -0.000000	diff=4.02612e-12
 -0.033422	 -0.040448	diff=0.00702548
 -0.021014	 -0.021015	diff=1.07779e-06
 -0.010037	 -0.010033	diff=3.62453e-06
 -0.002583	 -0.002583	diff=3.30602e-07
  0.001963	 -0.000637	diff=0.00259928
 -0.000000	 -0.000000	diff=2.0484e-12
 -0.084897	 -0.085000	diff=0.000102408
  local_diff=9.46351
# W_tgt{2}, [8 4]
 -0.067048	 -0.066879	diff=0.000168609
 -0.002022	 -0.002027	diff=5.6241e-06
  2.639224	  2.643445	diff=0.00422108
 -0.001868	 -0.001863	diff=4.68043e-06
 -0.144376	 -0.144327	diff=4.93138e-05
 -0.021750	 -0.021742	diff=8.26169e-06
 -0.000377	 -0.000384	diff=6.88706e-06
 -0.097278	 -0.097820	diff=0.000541516
 -0.337594	 -0.338006	diff=0.000412173
 -0.848844	 -0.849370	diff=0.000525751
  0.017127	  0.017046	diff=8.08078e-05
 -0.150090	 -0.150266	diff=0.000175417
 -2.244617	 -2.263791	diff=0.0191747
 -0.301278	 -0.302497	diff=0.00121896
-11.097586	-15.471111	diff=4.37352
 -1.705289	 -1.706050	diff=0.000761059
 -0.815940	 -0.813121	diff=0.00281954
 -0.011686	 -0.011894	diff=0.000208274
 -0.081805	 -0.081996	diff=0.000191557
 -0.395191	 -0.395126	diff=6.58093e-05
 -1.088422	 -1.085797	diff=0.00262517
 -0.390058	 -0.390263	diff=0.000204916
  0.968236	  0.970129	diff=0.00189272
 -2.979695	 -2.973407	diff=0.00628751
  0.058841	  0.060224	diff=0.00138282
 -0.476163	 -0.476089	diff=7.34199e-05
 -1.821014	 -1.818654	diff=0.00236011
  1.162310	  1.162279	diff=3.12909e-05
  0.155519	  0.155486	diff=3.28991e-05
  0.274470	  0.275019	diff=0.000549244
 -1.069853	 -1.080967	diff=0.0111139
 11.627334	 11.615886	diff=0.0114484
  local_diff=4.44217
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000120	 -0.000122	diff=1.41149e-06
 -0.000000	 -0.000000	diff=2.86601e-10
 -0.000000	 -0.000000	diff=2.41099e-08
 -0.000000	 -0.000000	diff=2.78275e-08
  local_diff=1.46371e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.57234e-11
  0.000000	  0.000000	diff=2.2417e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
559.422329	-167.970287	diff=727.393
 86.801647	 78.323606	diff=8.47804
 -7.093948	 -7.355292	diff=0.261344
  3.874106	  3.800851	diff=0.0732549
  local_diff=736.205
# W_a, [2 2]
 -0.000008	 -0.000008	diff=1.2119e-08
  0.000294	  0.000315	diff=2.02761e-05
  0.001069	  0.001069	diff=1.51793e-09
 -0.043733	 -0.043731	diff=2.53705e-06
  local_diff=2.28268e-05
# W_h, [2 4]
 -0.023336	 -0.023335	diff=7.74494e-07
 -0.040031	 -0.040030	diff=9.22895e-07
  0.953211	  0.954506	diff=0.00129503
  1.635845	  1.637389	diff=0.00154428
  0.495630	  0.493584	diff=0.00204581
  3.290073	  3.285275	diff=0.00479753
  0.108388	  0.120890	diff=0.0125022
  9.094417	  8.793549	diff=0.300869
  local_diff=0.323055
# W_soft, [5 2]
  5.084964	  5.080611	diff=0.00435259
  3.185797	  3.184884	diff=0.000913657
 -0.403325	 -0.404028	diff=0.000702595
 -4.004497	 -4.005270	diff=0.000772983
 -3.852635	 -3.856197	diff=0.0035624
 -5.137220	 -5.143014	diff=0.00579312
  4.933049	  4.932879	diff=0.000169774
 -0.674094	 -0.674468	diff=0.00037425
  0.078470	  0.077928	diff=0.000541492
  0.812158	  0.806674	diff=0.00548365
  local_diff=0.0226665
# Num params=186, abs_diff=750.463
Elapsed time is 2.672908 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.65218e-34
  0.000000	  0.000000	diff=5.91556e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.09858e-34
  0.000000	 -0.000000	diff=7.47991e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78914e-73
  0.000000	 -0.000000	diff=5.65567e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.14971e-65
  0.000000	  0.000000	diff=3.21759e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.67058e-66
  0.000000	 -0.000000	diff=1.32023e-65
  0.000000	 -0.000000	diff=6.30511e-67
  0.000000	 -0.000000	diff=2.40542e-66
  0.000000	  0.000000	diff=1.58221e-66
  0.000000	 -0.000000	diff=1.03471e-65
  0.000000	  0.000000	diff=2.21115e-36
  0.000000	 -0.000000	diff=7.89148e-36
  0.000000	 -0.000000	diff=6.91426e-59
  0.000000	  0.000000	diff=5.43438e-58
  0.000000	  0.000000	diff=1.75048e-59
  0.000000	  0.000000	diff=9.03782e-59
  0.000000	 -0.000000	diff=7.68126e-59
  0.000000	  0.000000	diff=4.82943e-58
  0.000000	 -0.000000	diff=3.70742e-31
  0.000000	  0.000000	diff=3.56301e-28
  0.000000	  0.000000	diff=1.05848e-59
  0.000000	 -0.000000	diff=5.8891e-59
  0.000000	 -0.000000	diff=5.03736e-60
  0.000000	 -0.000000	diff=8.12493e-60
  0.000000	  0.000000	diff=7.41006e-60
  0.000000	 -0.000000	diff=4.89434e-59
  0.000000	  0.000000	diff=1.78997e-29
  0.000000	 -0.000000	diff=2.65034e-29
  0.000000	 -0.000000	diff=2.66933e-59
  0.000000	  0.000000	diff=5.54468e-58
  0.000000	  0.000000	diff=1.53992e-59
  0.000000	  0.000000	diff=2.12029e-58
  0.000000	 -0.000000	diff=1.51282e-59
  0.000000	  0.000000	diff=7.93366e-58
  0.000000	  0.000000	diff=7.42823e-29
  0.000000	  0.000000	diff=2.02294e-28
  local_diff=6.77651e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.57509e-45
  0.000000	  0.000000	diff=1.6093e-45
  0.000000	  0.000000	diff=3.50325e-45
  0.000000	 -0.000000	diff=8.75812e-47
  local_diff=7.77522e-45
# v_a, [1 2]
  0.000000	 -0.000000	diff=1.26117e-44
  0.000000	 -0.000000	diff=2.1742e-44
  local_diff=3.43537e-44
# W_h, [2 4]
  0.000000	 -0.000000	diff=7.31179e-31
  0.000000	 -0.000000	diff=5.18298e-31
  0.000000	  0.000000	diff=1.27282e-29
  0.000000	 -0.000000	diff=2.22416e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 2.859631 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.012948	  0.000961	diff=0.0139091
  0.002157	  0.000268	diff=0.00188899
 -0.088297	 -0.018414	diff=0.0698831
 -0.000922	 -0.000774	diff=0.000147967
 -0.012833	  0.001057	diff=0.0138898
  0.002161	  0.000314	diff=0.00184704
  7.423095	  1.258045	diff=6.16505
 -3.404015	 -0.584481	diff=2.81953
  0.000000	  0.000000	diff=4.81008e-08
 -0.000007	  0.000008	diff=1.47297e-05
  0.114852	  0.022921	diff=0.0919317
 -0.000000	  0.000000	diff=1.12843e-08
  0.000000	  0.000000	diff=1.0648e-15
  0.000000	 -0.000000	diff=2.91178e-16
  0.000000	 -0.000000	diff=1.62054e-13
  0.000000	  0.000000	diff=3.7467e-14
 -0.035368	 -0.021340	diff=0.0140274
 -0.005410	 -0.000876	diff=0.0045344
 -0.006199	 -0.003488	diff=0.00271087
  0.002772	  0.002594	diff=0.00017823
 -0.040562	 -0.023730	diff=0.0168323
 -0.003642	  0.000702	diff=0.00434447
  2.255073	  0.591625	diff=1.66345
  0.066243	 -0.409227	diff=0.47547
 -0.016443	 -0.019519	diff=0.00307581
  0.002634	  0.001773	diff=0.000860787
 -0.002832	 -0.003430	diff=0.000597391
  0.001913	  0.001948	diff=3.4676e-05
 -0.019783	 -0.023478	diff=0.00369476
  0.004540	  0.003716	diff=0.000824406
  0.277422	  0.631052	diff=0.35363
 -0.566586	 -0.475077	diff=0.0915093
  local_diff=11.8139
# W_src{2}, [8 4]
  0.242528	  0.201188	diff=0.04134
 -0.200619	 -0.257197	diff=0.0565779
 -0.025140	 -0.010901	diff=0.0142393
 -0.008794	 -0.021638	diff=0.0128433
  0.317356	  0.282384	diff=0.0349715
 -0.283511	 -0.344744	diff=0.0612329
 -2.507739	 -1.746162	diff=0.761577
  1.431647	 -0.731319	diff=2.16297
  0.058453	  0.055798	diff=0.00265511
  0.012733	 -0.015356	diff=0.0280892
 -0.023021	 -0.014556	diff=0.00846497
  0.017936	  0.009321	diff=0.00861481
  0.053349	  0.060392	diff=0.00704302
  0.029201	 -0.005861	diff=0.0350625
  2.710788	  1.170757	diff=1.54003
 -0.058149	 -0.307737	diff=0.249587
  0.113774	  0.103988	diff=0.00978607
  0.131894	  0.060439	diff=0.071455
 -0.054590	 -0.037042	diff=0.0175479
  0.063267	  0.040137	diff=0.0231295
  0.084891	  0.094774	diff=0.0098821
  0.201174	  0.109379	diff=0.0917951
  9.314304	  4.767499	diff=4.54681
  3.750955	  1.979286	diff=1.77167
 -0.375259	 -0.274450	diff=0.100809
 -0.075453	  0.037735	diff=0.113188
  0.078220	  0.044133	diff=0.0340873
 -0.076883	 -0.042799	diff=0.0340845
 -0.426436	 -0.345223	diff=0.0812136
 -0.052412	  0.076447	diff=0.12886
 -3.004681	 -0.784977	diff=2.2197
 -8.938468	 -5.362905	diff=3.57556
  local_diff=17.8549
# W_tgt{1}, [8 6]
 -0.063488	 -0.063476	diff=1.21489e-05
 12.750256	 13.049505	diff=0.299249
 -0.396433	 -0.391586	diff=0.00484686
 -0.000186	 -0.000185	diff=2.4577e-07
  0.000027	  0.000027	diff=3.7109e-08
  0.007654	  0.007511	diff=0.000143071
 -0.000000	 -0.000000	diff=2.38577e-09
  0.195654	  0.195597	diff=5.69355e-05
 -0.308531	 -0.308248	diff=0.000283235
-12.052307	-11.747514	diff=0.304793
  0.369614	  0.373909	diff=0.00429523
 -0.000906	 -0.000901	diff=5.81547e-06
  0.000130	  0.000131	diff=8.33382e-07
  0.018868	  0.017053	diff=0.0018156
 -0.000002	 -0.000002	diff=2.62151e-08
  0.951107	  0.949844	diff=0.00126223
  0.186769	  0.186939	diff=0.000170751
  3.274022	  3.294828	diff=0.0208062
  0.453038	  0.451612	diff=0.00142636
 -0.000277	 -0.000276	diff=5.43919e-07
  0.000040	  0.000040	diff=7.8434e-08
 -0.005277	 -0.005285	diff=7.56591e-06
 -0.000001	 -0.000001	diff=2.46092e-09
  0.290942	  0.290817	diff=0.000124917
  0.147115	  0.147202	diff=8.61456e-05
 -2.919978	 -2.906020	diff=0.0139578
  0.437271	  0.436216	diff=0.00105509
  0.000273	  0.000274	diff=5.35648e-07
 -0.000040	 -0.000040	diff=7.75815e-08
  0.003952	  0.003933	diff=1.91592e-05
  0.000001	  0.000001	diff=2.37728e-09
 -0.288917	 -0.289047	diff=0.000129052
  0.170964	  0.171107	diff=0.000142369
 -0.000592	 -0.000590	diff=2.25207e-06
 -0.095698	 -0.094635	diff=0.00106315
 -0.000000	 -0.000000	diff=4.81062e-10
  0.000000	  0.000000	diff=1.90888e-10
 -0.000042	 -0.000042	diff=1.55745e-07
  0.000000	  0.000000	diff=5.79424e-11
 -0.000000	 -0.000000	diff=2.95952e-09
  0.000002	  0.000002	diff=1.67021e-12
 -0.000052	 -0.000052	diff=2.86277e-08
  0.001603	  0.001611	diff=7.13592e-06
 -0.000000	 -0.000000	diff=1.32304e-12
 -0.000000	 -0.000000	diff=2.65077e-12
 -0.000000	 -0.000000	diff=1.08321e-11
 -0.000000	 -0.000000	diff=2.86195e-12
 -0.000000	 -0.000000	diff=2.68149e-12
  local_diff=0.655763
# W_tgt{2}, [8 4]
  0.949507	  0.952971	diff=0.00346378
 26.379911	 26.483659	diff=0.103748
  0.000004	  0.000004	diff=1.96277e-08
  1.692094	  1.689998	diff=0.00209582
 -0.353450	 -0.351701	diff=0.00174875
  0.391069	  0.392777	diff=0.00170857
  0.038768	  0.038486	diff=0.000282424
125.482737	127.925845	diff=2.44311
 -0.186367	 -0.185975	diff=0.000392445
 -3.477144	 -3.459002	diff=0.0181426
  0.004973	  0.004973	diff=1.28137e-08
 -0.210650	 -0.209932	diff=0.000718377
 -0.263777	 -0.263852	diff=7.50562e-05
 -0.118882	 -0.119057	diff=0.000175159
 -0.071177	 -0.071367	diff=0.000189919
  0.440569	  0.440878	diff=0.000308815
 -0.736859	 -0.737527	diff=0.000667244
  0.834323	  0.836141	diff=0.00181829
 -0.131988	 -0.132061	diff=7.24309e-05
  0.215905	  0.215975	diff=7.06206e-05
 -0.586063	 -0.586554	diff=0.000491112
 -0.024415	 -0.024410	diff=5.28028e-06
  4.392288	  4.356920	diff=0.035368
  2.174124	  2.181230	diff=0.00710639
  0.452297	  0.452398	diff=0.000101019
 -1.725149	 -1.723283	diff=0.00186578
  0.851125	  0.850968	diff=0.000156938
  0.443483	  0.443301	diff=0.000182671
  0.369431	  0.368885	diff=0.000545518
 -0.015697	 -0.015622	diff=7.55691e-05
 -0.064761	 -0.164620	diff=0.099859
 10.885198	 10.904516	diff=0.0193181
  local_diff=2.74386
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.138601	  0.027477	diff=0.111124
  0.126834	  0.025219	diff=0.101615
  0.000000	  0.000000	diff=5.72897e-09
  0.000000	  0.000000	diff=4.81156e-09
  local_diff=0.21274
# W_emb_tgt, [2 5]
-31.205688	-29.699058	diff=1.50663
 -7.865038	 -7.686011	diff=0.179026
  0.000000	  0.000000	diff=3.55612e-09
  0.000000	  0.000000	diff=2.80918e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.588720	  1.202579	diff=0.386141
  0.868481	  0.883825	diff=0.0153439
  0.102996	  0.097666	diff=0.0053302
 -0.028755	 -0.029470	diff=0.000715293
  local_diff=2.09319
# W_src_char{1}, [8 4]
 -0.000019	 -0.000003	diff=1.58509e-05
  0.000000	 -0.000000	diff=2.27086e-13
  0.000000	  0.000000	diff=3.45637e-09
 -0.000000	 -0.000000	diff=1.60053e-09
-75.865887	-10.209202	diff=65.6567
 -0.000000	 -0.000000	diff=1.45641e-09
 -0.000000	  0.000000	diff=3.20111e-10
  0.000000	 -0.000000	diff=1.2158e-22
  0.000048	  0.000007	diff=4.13024e-05
  0.000000	 -0.000000	diff=2.02401e-13
 -0.000000	 -0.000000	diff=8.37213e-09
 -0.000000	 -0.000000	diff=1.43608e-09
194.545211	 25.581967	diff=168.963
 -0.000000	 -0.000000	diff=1.18293e-09
 -0.000000	  0.000000	diff=2.84575e-10
  0.000000	 -0.000000	diff=1.82308e-22
  0.000000	 -0.000000	diff=2.57323e-16
  0.000000	  0.000000	diff=1.17282e-22
  0.000000	  0.000000	diff=2.65075e-20
  0.000000	 -0.000000	diff=5.51685e-16
  0.000000	 -0.000000	diff=2.81028e-08
  0.000000	 -0.000000	diff=5.3093e-16
  0.000000	  0.000000	diff=2.00607e-18
  0.000000	  0.000000	diff=5.98979e-37
  0.000000	 -0.000000	diff=1.53659e-16
  0.000000	  0.000000	diff=1.72539e-17
  0.000000	 -0.000000	diff=4.06223e-22
 -0.000000	 -0.000000	diff=2.82637e-10
  0.000000	  0.000000	diff=2.10319e-10
 -0.000000	 -0.000000	diff=2.68637e-10
  0.000000	  0.000000	diff=2.95122e-13
  0.000000	  0.000000	diff=8.81161e-32
  local_diff=234.62
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-119.332135	-15.526173	diff=103.806
-99.999717	-13.176229	diff=86.8235
 -0.000000	 -0.000000	diff=1.21889e-10
  0.000000	  0.000000	diff=7.68397e-11
  0.000000	  0.000000	diff=9.18226e-17
  0.000000	  0.000000	diff=8.15391e-17
 -0.000000	  0.000000	diff=4.48951e-07
 -0.000000	  0.000000	diff=3.81262e-07
  local_diff=190.629
# W_h, [2 4]
  0.205254	  0.204879	diff=0.000375043
 -0.177928	 -0.178169	diff=0.000240925
  0.657308	  0.657423	diff=0.000114892
 -0.301554	 -0.301600	diff=4.54345e-05
 -1.667701	 -1.661927	diff=0.00577346
  2.250681	  2.260456	diff=0.00977511
  7.398101	  7.406373	diff=0.00827141
  6.285135	  6.289249	diff=0.00411415
  local_diff=0.0287104
# W_soft, [5 2]
 -4.022185	 -4.029588	diff=0.00740297
 -0.596505	 -0.598439	diff=0.00193391
 -2.451843	 -2.456521	diff=0.00467737
 -5.147165	 -5.153369	diff=0.00620394
 12.238109	 12.237916	diff=0.000193195
 -1.097839	 -1.104937	diff=0.00709841
  0.596716	  0.594716	diff=0.00199926
 -5.381400	 -5.385884	diff=0.00448366
 -0.694173	 -0.700152	diff=0.00597905
  6.596487	  6.596257	diff=0.000230693
  local_diff=0.0402024
# Num params=224, abs_diff=460.693
Elapsed time is 3.566553 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=6.65471e-20
 -0.001018	 -0.000993	diff=2.55444e-05
  0.000000	  0.000000	diff=1.2748e-12
  0.003502	  0.003415	diff=8.66165e-05
  0.000000	  0.000000	diff=8.55844e-16
 -0.000000	 -0.000000	diff=2.03718e-12
  0.000000	  0.000000	diff=1.51657e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.46165e-20
  0.001225	  0.001262	diff=3.74461e-05
 -0.000000	 -0.000000	diff=4.06387e-12
 -0.004211	 -0.004341	diff=0.00013019
  0.000000	 -0.000000	diff=1.08792e-15
 -0.000000	 -0.000000	diff=1.03999e-11
  0.000000	  0.000000	diff=4.55497e-12
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.03474e-20
 -0.000155	 -0.000155	diff=7.18677e-07
  0.000000	  0.000000	diff=1.98387e-13
  0.000534	  0.000531	diff=2.28724e-06
  0.000000	  0.000000	diff=1.33189e-16
  0.000000	 -0.000000	diff=3.17022e-13
  0.000000	  0.000000	diff=4.57583e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.50728e-32
  0.000000	  0.000000	diff=4.35838e-16
  0.000000	 -0.000000	diff=4.80715e-25
  0.000000	 -0.000000	diff=8.79145e-16
  0.000000	 -0.000000	diff=1.16815e-27
  0.000000	  0.000000	diff=7.53674e-25
  0.000000	 -0.000000	diff=2.09329e-37
  0.000000	  0.000000	diff=0
  local_diff=0.000282803
# W_src{2}, [8 4]
-30.197134	-29.543551	diff=0.653582
  0.204263	  0.204389	diff=0.000125338
 -0.041563	 -0.041524	diff=3.92816e-05
  0.001142	  0.001152	diff=9.83059e-06
 -1.559135	 -1.566124	diff=0.00698857
  0.179426	  0.178898	diff=0.000528456
 -0.000210	 -0.000212	diff=2.07978e-06
 -0.000001	 -0.000001	diff=1.78052e-09
  0.000000	  0.000000	diff=5.43773e-12
 -0.000000	 -0.000000	diff=4.73309e-12
  0.000000	 -0.000000	diff=4.36845e-14
  0.000000	 -0.000000	diff=7.55846e-16
  0.000000	  0.000000	diff=2.22817e-12
 -0.000000	 -0.000000	diff=5.34647e-12
  0.000000	  0.000000	diff=1.71685e-16
  0.000000	  0.000000	diff=2.63863e-18
 -1.006160	 -1.007769	diff=0.00160851
  0.004992	  0.005020	diff=2.79774e-05
 -0.012608	 -0.012629	diff=2.11773e-05
  0.000769	  0.000769	diff=2.98262e-07
  0.030249	  0.030215	diff=3.40016e-05
  0.007423	  0.007427	diff=4.4938e-06
 -0.639088	 -0.640723	diff=0.00163435
 -1.464459	 -1.465178	diff=0.000719008
  0.003606	  0.003613	diff=7.89387e-06
 -0.000019	 -0.000019	diff=6.94866e-08
  0.000023	  0.000023	diff=4.51294e-08
 -0.000002	 -0.000002	diff=6.9389e-10
  0.000035	  0.000035	diff=1.75275e-07
 -0.000027	 -0.000027	diff=1.16135e-08
  0.001215	  0.001216	diff=1.87808e-06
  0.002858	  0.002858	diff=1.49041e-07
  local_diff=0.665336
# W_tgt{1}, [8 6]
 -0.133641	 -0.133593	diff=4.84668e-05
 20.467060	 20.702919	diff=0.23586
 -0.130207	 -0.138228	diff=0.00802116
 -0.389057	 -0.388402	diff=0.000654646
  0.011391	  0.011533	diff=0.000142381
  0.929561	  0.911952	diff=0.0176094
 -0.000005	 -0.000005	diff=2.27496e-08
  0.005699	  0.005674	diff=2.52863e-05
 -0.648162	 -0.648742	diff=0.000579562
-19.975531	-19.756522	diff=0.21901
  0.119764	  0.112286	diff=0.00747834
 -1.901697	 -1.886121	diff=0.0155758
  0.055038	  0.056007	diff=0.00096908
  3.278517	  3.100019	diff=0.178498
 -0.000023	 -0.000022	diff=3.35428e-07
  0.027957	  0.027553	diff=0.00040442
 -0.049092	 -0.049117	diff=2.54287e-05
  3.564204	  3.566688	diff=0.00248372
  0.286557	  0.284842	diff=0.00171562
  0.897579	  0.901163	diff=0.00358417
  0.033873	  0.034376	diff=0.000503131
  0.302897	  0.300807	diff=0.00209079
 -0.000014	 -0.000013	diff=1.34798e-07
  0.018064	  0.017807	diff=0.000257056
  0.264518	  0.264163	diff=0.000354773
 -3.173347	 -3.168382	diff=0.00496564
  0.213531	  0.212539	diff=0.000992182
 -1.089430	 -1.084256	diff=0.00517451
 -0.025595	 -0.025810	diff=0.000214691
 -0.216238	 -0.216314	diff=7.61188e-05
  0.000009	  0.000009	diff=2.77397e-08
 -0.012507	 -0.012493	diff=1.37862e-05
  0.174858	  0.174681	diff=0.000176907
 -0.000152	 -0.000151	diff=5.67414e-07
  0.086403	  0.085026	diff=0.00137702
  0.000143	  0.000143	diff=3.2365e-08
  0.000000	  0.000000	diff=3.41412e-10
  0.000217	  0.000216	diff=8.84659e-07
  0.000000	  0.000000	diff=1.87177e-11
  0.000005	  0.000005	diff=3.4301e-08
  0.001796	  0.001796	diff=3.35151e-07
  0.796251	  0.801672	diff=0.00542045
 -0.018319	 -0.018295	diff=2.47326e-05
  0.000043	  0.000043	diff=5.96055e-07
  0.000000	  0.000000	diff=3.12548e-09
  0.516061	  0.521713	diff=0.00565233
 -0.000000	 -0.000000	diff=1.43116e-11
  0.000000	  0.000000	diff=2.15082e-10
  local_diff=0.719981
# W_tgt{2}, [8 4]
  0.600505	  0.590168	diff=0.0103371
 21.461050	 21.541731	diff=0.0806808
 -0.000655	 -0.000655	diff=4.17502e-07
  1.228080	  1.235065	diff=0.00698567
 -0.141431	 -0.142621	diff=0.00119009
  0.584296	  0.586845	diff=0.00254975
 -0.023845	 -0.023286	diff=0.000559004
120.931138	123.142139	diff=2.211
 -0.155629	 -0.158807	diff=0.00317787
 -6.128228	 -6.111915	diff=0.0163129
 -0.025498	 -0.025570	diff=7.22236e-05
 -0.283474	 -0.282921	diff=0.000552333
 -5.890809	 -5.953822	diff=0.0630132
 -0.265805	 -0.251692	diff=0.0141137
 -0.808396	 -0.906613	diff=0.098217
  0.728055	  0.742847	diff=0.0147922
 -1.672740	 -1.678525	diff=0.00578476
  1.373872	  1.376264	diff=0.00239132
  0.301970	  0.302569	diff=0.000598442
  0.005798	  0.006196	diff=0.000398
 -1.226574	 -1.230288	diff=0.00371353
  0.056974	  0.057258	diff=0.000283522
  5.140033	  5.162131	diff=0.0220975
 -2.433822	 -2.400382	diff=0.0334404
  0.317937	  0.305437	diff=0.0125
 -1.816301	 -1.816369	diff=6.84796e-05
  0.457663	  0.452330	diff=0.0053324
  0.587904	  0.589239	diff=0.0013358
  0.230574	  0.223210	diff=0.00736409
  0.042880	  0.042832	diff=4.86756e-05
 -0.499859	 -0.496988	diff=0.00287044
  7.365042	  7.400587	diff=0.0355453
  local_diff=2.65733
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=2.1911e-11
  0.000000	  0.000000	diff=3.5296e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.004300	  0.004122	diff=0.000177986
  0.004911	  0.004681	diff=0.00023017
  0.000000	 -0.000000	diff=2.06237e-12
 -0.000000	 -0.000000	diff=3.32163e-12
  local_diff=0.000408156
# W_emb_tgt, [2 5]
-48.549039	-47.299182	diff=1.24986
-12.584015	-12.494308	diff=0.0897074
  0.000000	  0.000000	diff=6.71178e-09
  0.000000	  0.000000	diff=3.09283e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  6.035306	  6.791432	diff=0.756126
 -6.123550	 -5.379841	diff=0.743709
  5.012751	  4.841433	diff=0.171318
 -2.429690	 -2.499124	diff=0.0694332
  local_diff=3.08015
# W_tgt_char{1}, [8 4]
 -2.360560	 -2.304193	diff=0.0563671
  0.000010	  0.000010	diff=2.32837e-07
  0.000000	  0.000000	diff=6.56904e-32
 -0.000001	 -0.000001	diff=2.65511e-08
  0.000021	  0.000021	diff=2.70371e-07
 -2.795947	 -2.819841	diff=0.0238939
 -0.000000	 -0.000000	diff=2.10434e-10
  0.000000	  0.000000	diff=3.79918e-09
 -0.876350	 -0.868430	diff=0.00792038
  0.000004	  0.000004	diff=3.34803e-08
  0.000000	  0.000000	diff=5.85495e-32
 -0.000001	 -0.000001	diff=2.11236e-08
  0.000037	  0.000038	diff=7.64828e-07
 -5.690980	 -5.791298	diff=0.100318
 -0.000000	 -0.000000	diff=1.6658e-10
  0.000000	  0.000000	diff=5.29334e-10
 -0.003890	 -0.003854	diff=3.64892e-05
  0.000000	  0.000000	diff=2.81036e-10
  0.000000	  0.000000	diff=2.15322e-34
 -0.000000	 -0.000000	diff=9.29562e-10
  0.000000	  0.000000	diff=4.09998e-11
 -0.000000	 -0.000000	diff=8.96813e-11
 -0.000000	 -0.000000	diff=9.83258e-12
 -0.000000	 -0.000000	diff=1.79438e-12
 -0.003908	 -0.003884	diff=2.40572e-05
 -0.000000	 -0.000000	diff=1.90939e-10
  0.000000	  0.000000	diff=1.97866e-34
 -0.000000	 -0.000000	diff=7.82321e-10
 -0.000000	 -0.000000	diff=3.00293e-11
 -0.000000	 -0.000000	diff=7.87693e-11
 -0.000000	 -0.000000	diff=5.93314e-12
 -0.000000	 -0.000000	diff=1.08393e-12
  local_diff=0.188562
# W_emb_tgt_char, [2 5]
  0.080985	  0.081053	diff=6.86128e-05
 -1.443365	 -1.422035	diff=0.0213295
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  3.362071	  3.328464	diff=0.0336077
 -2.370306	 -2.387446	diff=0.0171399
  0.000000	  0.000000	diff=3.00549e-13
  0.000000	  0.000000	diff=1.88849e-13
  0.000002	  0.000002	diff=4.97442e-08
  0.000000	  0.000000	diff=1.05552e-09
  local_diff=0.0721457
# W_h, [2 4]
  1.488087	  1.487970	diff=0.000117044
 -1.197302	 -1.213992	diff=0.0166906
 -0.011615	 -0.011609	diff=6.06755e-06
  0.003086	  0.003159	diff=7.28609e-05
 -0.269804	 -0.265399	diff=0.00440563
  3.613749	  3.610800	diff=0.00294896
  5.683989	  5.688287	diff=0.00429766
  7.270222	  7.241651	diff=0.0285712
  local_diff=0.05711
# W_soft, [5 2]
 -1.189027	 -1.197234	diff=0.00820673
 -0.434854	 -0.437344	diff=0.00249
 -7.858412	 -7.865210	diff=0.00679784
 -1.836825	 -1.843846	diff=0.00702107
 11.344741	 11.343634	diff=0.00110696
  0.447493	  0.440709	diff=0.00678373
  0.316286	  0.313902	diff=0.00238458
 -4.448612	 -4.454413	diff=0.00580124
  1.182404	  1.176529	diff=0.00587509
  2.524998	  2.523273	diff=0.00172436
  local_diff=0.0481916
# W_soft_char, [5 2]
 -0.000000	 -0.000000	diff=4.11558e-10
 -0.000005	 -0.000005	diff=2.04609e-08
 -0.000042	 -0.000042	diff=1.59773e-07
  5.305989	  5.305989	diff=2.16705e-07
 -5.305941	 -5.305941	diff=3.99355e-07
  0.000000	  0.000000	diff=3.48597e-10
 -0.000005	 -0.000005	diff=1.7263e-08
 -0.000039	 -0.000039	diff=1.34829e-07
  4.871338	  4.871338	diff=1.82888e-07
 -4.871294	 -4.871294	diff=3.36884e-07
  local_diff=1.46892e-06
# Num params=234, abs_diff=7.4895
Elapsed time is 4.513962 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.006528	  0.006386	diff=0.000141928
 -0.001009	 -0.000988	diff=2.06489e-05
  0.000354	  0.000350	diff=4.04458e-06
  0.000041	  0.000040	diff=9.79086e-07
  0.006557	  0.006415	diff=0.000142439
 -0.001013	 -0.000993	diff=2.07752e-05
 -1.512952	 -1.475499	diff=0.0374523
  0.016698	  0.011606	diff=0.00509147
 -0.000000	 -0.000000	diff=8.28063e-11
 -0.000007	 -0.000007	diff=1.85108e-07
  0.000000	  0.000000	diff=2.41533e-09
  0.000000	  0.000000	diff=6.51986e-16
  0.000000	 -0.000000	diff=1.75098e-16
  0.000000	  0.000000	diff=5.29941e-17
  0.000000	  0.000000	diff=5.68533e-14
  0.000000	 -0.000000	diff=1.40839e-14
 -0.002277	 -0.002254	diff=2.27012e-05
  0.001055	  0.001030	diff=2.53132e-05
 -0.000450	 -0.000446	diff=4.48973e-06
 -0.000046	 -0.000044	diff=1.09202e-06
 -0.002739	 -0.002712	diff=2.73147e-05
  0.001009	  0.000985	diff=2.42107e-05
  0.256547	  0.254109	diff=0.00243787
 -0.121508	 -0.118589	diff=0.00291914
  0.000478	  0.000474	diff=4.76859e-06
 -0.000222	 -0.000216	diff=5.32005e-06
  0.000095	  0.000094	diff=9.43506e-07
  0.000010	  0.000009	diff=2.29512e-07
  0.000576	  0.000570	diff=5.73714e-06
 -0.000212	 -0.000207	diff=5.08834e-06
 -0.053948	 -0.053405	diff=0.000542946
  0.025536	  0.024923	diff=0.000612461
  local_diff=0.0495144
# W_src{2}, [8 4]
  0.003324	  0.003248	diff=7.55379e-05
 -0.022281	 -0.021663	diff=0.000617782
  0.001155	  0.001093	diff=6.2214e-05
 -0.002795	 -0.002716	diff=7.94986e-05
  0.004586	  0.004415	diff=0.00017063
 -0.018335	 -0.017468	diff=0.000867181
 -0.413550	 -0.400658	diff=0.0128915
 -1.183678	 -1.151975	diff=0.0317022
  0.001281	  0.001204	diff=7.69798e-05
 -0.012387	 -0.012031	diff=0.000356093
  0.001036	  0.000987	diff=4.90623e-05
 -0.002125	 -0.002065	diff=6.05215e-05
  0.002655	  0.002494	diff=0.000161517
 -0.011400	 -0.010843	diff=0.00055671
 -0.237838	 -0.225005	diff=0.0128329
 -0.370658	 -0.359731	diff=0.0109278
 -0.005625	 -0.005679	diff=5.39374e-05
 -0.018287	 -0.017905	diff=0.000381976
  0.002633	  0.002582	diff=5.14366e-05
 -0.004713	 -0.004647	diff=6.53481e-05
 -0.003736	 -0.003870	diff=0.000133951
 -0.020289	 -0.019705	diff=0.000583902
 -0.471495	 -0.459643	diff=0.0118518
 -0.724619	 -0.710385	diff=0.0142336
  0.007949	  0.008021	diff=7.23913e-05
  0.029273	  0.028813	diff=0.000459241
 -0.003661	 -0.003607	diff=5.46274e-05
  0.009572	  0.009485	diff=8.74629e-05
  0.006109	  0.006271	diff=0.000161644
  0.030585	  0.029865	diff=0.00071964
  0.966011	  0.951538	diff=0.0144728
  1.071640	  1.054509	diff=0.0171308
  local_diff=0.132003
# W_tgt{1}, [8 6]
 -0.004682	 -0.004680	diff=2.25328e-06
 -0.007313	 -0.004861	diff=0.00245248
 -6.904693	 -6.878022	diff=0.0266711
 -0.000535	 -0.000535	diff=7.0939e-07
  0.000004	  0.000004	diff=4.7932e-09
 -1.193195	 -1.192639	diff=0.000556235
  0.000000	  0.000000	diff=5.76975e-11
  0.386297	  0.387505	diff=0.00120886
 -0.022843	 -0.022726	diff=0.000116639
 -1.279724	 -1.283983	diff=0.00425927
  6.535376	  6.568513	diff=0.0331372
 -0.002613	 -0.002596	diff=1.67512e-05
  0.000017	  0.000018	diff=1.11439e-07
 -5.816447	 -5.791629	diff=0.0248184
 -0.000000	 -0.000000	diff=2.79457e-11
  1.867856	  1.881773	diff=0.0139168
  0.005830	  0.005843	diff=1.29407e-05
  0.275436	  0.275767	diff=0.000331417
  0.841474	  0.842301	diff=0.000826762
 -0.000020	 -0.000020	diff=3.05517e-09
  0.000000	  0.000000	diff=5.30992e-11
  0.354676	  0.354723	diff=4.69515e-05
  0.000000	  0.000000	diff=1.05138e-12
 -0.480550	 -0.480854	diff=0.000303879
  0.014088	  0.014149	diff=6.13455e-05
  0.660625	  0.660446	diff=0.000178992
  1.988134	  1.991427	diff=0.00329365
 -0.000009	 -0.000009	diff=1.51438e-08
  0.000000	  0.000000	diff=2.76702e-10
  0.927292	  0.924852	diff=0.00244027
  0.000000	  0.000000	diff=9.22964e-12
 -1.166095	 -1.164529	diff=0.00156636
  0.013445	  0.013502	diff=5.63076e-05
  0.621752	  0.621702	diff=5.01253e-05
  2.276834	  2.280919	diff=0.004085
 -0.000003	 -0.000003	diff=1.41231e-08
  0.000000	  0.000000	diff=2.24315e-10
  0.894445	  0.892307	diff=0.0021388
  0.000000	  0.000000	diff=1.13701e-11
 -1.112575	 -1.111251	diff=0.00132373
  0.000000	  0.000000	diff=1.06074e-10
  0.000007	  0.000007	diff=1.87065e-08
  0.000184	  0.000184	diff=1.44535e-07
 -0.000000	 -0.000000	diff=7.03493e-13
  0.000000	  0.000000	diff=3.57076e-12
  0.000009	  0.000009	diff=1.91625e-08
  0.000000	  0.000000	diff=1.21693e-14
 -0.000012	 -0.000012	diff=2.38641e-08
  local_diff=0.123874
# W_tgt{2}, [8 4]
 -0.656228	 -0.659853	diff=0.0036249
 34.977552	 35.220290	diff=0.242739
 -0.000428	 -0.000427	diff=1.40336e-06
  2.079227	  2.073082	diff=0.0061453
 -0.214620	 -0.218954	diff=0.00433431
  0.822384	  0.827938	diff=0.00555444
  0.187063	  0.186689	diff=0.000374247
172.204915	175.040483	diff=2.83557
 -0.079165	 -0.079106	diff=5.9211e-05
 -0.375632	 -0.375533	diff=9.8399e-05
  0.018016	  0.018046	diff=2.98797e-05
 -0.008341	 -0.008356	diff=1.48451e-05
 -0.152704	 -0.152689	diff=1.49663e-05
 -0.460854	 -0.460788	diff=6.53626e-05
 -2.550310	 -2.549231	diff=0.00107819
 -0.686890	 -0.686682	diff=0.000207957
  0.022479	  0.022876	diff=0.00039767
 -1.606119	 -1.612076	diff=0.00595719
  0.005031	  0.005128	diff=9.61802e-05
  0.018786	  0.018615	diff=0.000170471
  0.005206	  0.005800	diff=0.000594394
 -0.146360	 -0.146453	diff=9.28333e-05
  0.087431	  0.073982	diff=0.0134489
 -2.815774	 -2.844796	diff=0.0290218
 -0.435882	 -0.438269	diff=0.00238698
  0.822341	  0.822513	diff=0.000172069
 -0.367418	 -0.368256	diff=0.000837681
  0.577985	  0.579136	diff=0.00115099
 -0.291427	 -0.293665	diff=0.00223767
 -0.174756	 -0.175037	diff=0.000281003
 -1.041387	 -1.009388	diff=0.0319986
 22.409233	 22.470819	diff=0.0615866
  local_diff=3.25034
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000009	  0.000009	diff=4.1059e-07
  0.000011	  0.000010	diff=5.35444e-07
  0.000000	  0.000000	diff=3.37358e-09
  0.000000	  0.000000	diff=2.84196e-09
  local_diff=9.5225e-07
# W_emb_tgt, [2 5]
 -4.103063	 -4.081654	diff=0.0214099
  2.469039	  2.476073	diff=0.00703457
  0.000000	  0.000000	diff=7.76787e-10
  0.000000	  0.000000	diff=2.14456e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -6.678830	 -5.681297	diff=0.997534
 12.008248	 12.087133	diff=0.0788854
 -0.000247	 -0.000249	diff=1.20597e-06
  0.000087	  0.000088	diff=4.37462e-07
  local_diff=1.10487
# W_src_char{1}, [8 4]
  0.000003	  0.000003	diff=9.94936e-08
  0.000000	 -0.000000	diff=6.57494e-13
 -0.000000	 -0.000000	diff=1.393e-11
  0.000000	  0.000000	diff=5.94049e-13
 12.930097	 12.341195	diff=0.588902
  0.000000	  0.000000	diff=4.01723e-12
  0.000000	  0.000000	diff=7.55004e-12
  0.000000	 -0.000000	diff=1.36652e-22
 -0.000009	 -0.000008	diff=5.43897e-07
  0.000000	 -0.000000	diff=5.86021e-13
  0.000000	  0.000000	diff=2.50329e-11
  0.000000	  0.000000	diff=3.13123e-12
-31.489150	-30.924264	diff=0.564887
  0.000000	  0.000000	diff=5.18734e-12
  0.000000	  0.000000	diff=5.3704e-12
  0.000000	 -0.000000	diff=8.5637e-23
  0.000000	 -0.000000	diff=7.56402e-16
  0.000000	 -0.000000	diff=5.74875e-23
  0.000000	  0.000000	diff=7.79167e-20
  0.000000	  0.000000	diff=2.70416e-16
 -0.000000	 -0.000000	diff=1.83902e-10
  0.000000	  0.000000	diff=2.60852e-16
  0.000000	 -0.000000	diff=9.85601e-19
  0.000000	 -0.000000	diff=2.93542e-37
  0.000000	  0.000000	diff=7.55005e-17
  0.000000	 -0.000000	diff=8.45725e-18
  0.000000	  0.000000	diff=1.98925e-22
  0.000000	  0.000000	diff=5.6925e-12
 -0.000000	 -0.000000	diff=2.27616e-12
  0.000000	  0.000000	diff=1.41525e-12
  0.000000	 -0.000000	diff=1.44996e-13
  0.000000	 -0.000000	diff=4.31914e-32
  local_diff=1.15379
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 19.745774	 18.768513	diff=0.97726
 16.726565	 15.927829	diff=0.798736
  0.000000	  0.000000	diff=1.65614e-12
 -0.000000	 -0.000000	diff=5.34908e-12
  0.000000	 -0.000000	diff=4.73949e-17
  0.000000	 -0.000000	diff=4.17131e-17
  0.000000	  0.000000	diff=3.58666e-09
  0.000000	  0.000000	diff=2.96184e-09
  local_diff=1.776
# W_tgt_char{1}, [8 4]
 -0.000066	 -0.000066	diff=1.05001e-07
 -3.851858	 -3.704513	diff=0.147345
  0.000000	  0.000000	diff=1.36034e-14
  0.000000	  0.000000	diff=1.23587e-23
  0.000004	  0.000004	diff=1.50464e-07
  0.000000	  0.000000	diff=1.31432e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000327	 -0.000316	diff=1.10607e-05
  1.426735	  1.448476	diff=0.0217407
  0.000000	 -0.000000	diff=2.06838e-14
  0.000000	 -0.000000	diff=3.84314e-24
 -0.000002	 -0.000002	diff=2.38557e-08
  0.000000	  0.000000	diff=2.46757e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.01154e-12
 -0.006322	 -0.006322	diff=7.70944e-07
  0.000000	 -0.000000	diff=1.97616e-23
  0.000000	  0.000000	diff=5.31967e-32
  0.000000	  0.000000	diff=1.30063e-12
  0.000000	 -0.000000	diff=1.46478e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000026	  0.000026	diff=9.7865e-08
  0.011502	  0.011510	diff=7.92651e-06
  0.000000	 -0.000000	diff=2.57391e-15
  0.000000	 -0.000000	diff=1.83275e-24
 -0.000000	 -0.000000	diff=5.50876e-12
  0.000000	 -0.000000	diff=2.29433e-14
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.169106
# W_emb_tgt_char, [2 5]
  0.073969	  0.074026	diff=5.74178e-05
  0.734045	  0.739743	diff=0.00569826
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000052	  0.000053	diff=3.97833e-07
  0.000008	  0.000008	diff=9.01149e-09
 -0.000016	 -0.000016	diff=1.22729e-07
 -0.000002	 -0.000002	diff=2.78235e-09
  0.000000	  0.000000	diff=9.92604e-13
  0.000000	  0.000000	diff=1.55519e-12
  local_diff=0.00575622
# W_h, [2 4]
  0.117878	  0.115919	diff=0.00195895
 -0.284813	 -0.289021	diff=0.00420768
 -0.388927	 -0.384977	diff=0.00395005
  0.727567	  0.736081	diff=0.00851401
  2.335659	  2.322400	diff=0.0132592
 -1.636568	 -1.673812	diff=0.0372445
  2.781715	  2.777585	diff=0.00413054
 14.134618	 14.175536	diff=0.0409177
  local_diff=0.114183
# W_soft, [5 2]
  0.384720	  0.384665	diff=5.50966e-05
 -0.061216	 -0.061312	diff=9.60372e-05
 -5.577569	 -5.577785	diff=0.000215938
  2.027702	  2.024828	diff=0.00287394
  3.232356	  3.229605	diff=0.00275074
 -4.473456	 -4.473472	diff=1.62259e-05
  0.039907	  0.039757	diff=0.000149724
 -7.701641	 -7.701673	diff=3.21034e-05
  5.006434	  4.992138	diff=0.0142966
  7.157534	  7.143250	diff=0.0142834
  local_diff=0.0347698
# W_soft_char, [5 2]
  0.000044	  0.000044	diff=6.26311e-12
 -0.000107	 -0.000107	diff=5.10331e-12
  0.000044	  0.000044	diff=3.62311e-12
  0.000037	  0.000037	diff=6.06051e-12
 -0.000018	 -0.000018	diff=7.37167e-12
 -8.898939	 -8.912553	diff=0.0136136
 -0.010276	 -0.010315	diff=3.86054e-05
  6.680477	  6.666884	diff=0.0135934
 -0.000120	 -0.000120	diff=4.49906e-07
  2.256104	  2.256104	diff=4.53982e-07
  local_diff=0.0272465
# Num params=276, abs_diff=7.94144
Elapsed time is 6.152279 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.587254	  2.749993	diff=2.16274
  0.148313	 -0.056990	diff=0.205303
  0.100568	  0.233659	diff=0.133091
 -0.015040	 -0.155552	diff=0.140512
  0.881633	  3.348106	diff=2.46647
  0.175938	  0.156783	diff=0.0191554
 -2.764559	-11.569508	diff=8.80495
  0.739593	 -0.883382	diff=1.62298
 -0.076074	 -1.736740	diff=1.66067
 -0.086192	 -0.146007	diff=0.0598151
  0.004832	 -0.237011	diff=0.241843
  0.002451	  0.013130	diff=0.0106786
 -0.027874	 -2.417725	diff=2.38985
 -0.103024	 -0.256243	diff=0.153218
  0.592344	  6.467358	diff=5.87501
 -0.706676	 -1.816937	diff=1.11026
 -0.350184	 -3.302740	diff=2.95256
 -0.036424	  0.586033	diff=0.622457
 -0.111954	 -0.694772	diff=0.582818
  0.055835	  0.505327	diff=0.449491
 -0.699746	 -6.184694	diff=5.48495
 -0.037022	  0.091344	diff=0.128367
  1.380942	  3.006862	diff=1.62592
 -0.011275	 -1.517923	diff=1.50665
  0.237384	 -0.532458	diff=0.769842
  0.010551	  0.118246	diff=0.107695
  0.077501	  0.114602	diff=0.0371017
  0.044187	  0.396993	diff=0.352806
  0.454710	 -1.494111	diff=1.94882
 -0.014500	  0.025697	diff=0.0401968
 -0.940672	 -2.936420	diff=1.99575
 -0.076269	 -0.742175	diff=0.665906
  local_diff=46.3279
# W_src{2}, [8 4]
  0.204474	 -1.732537	diff=1.93701
  0.377870	 -2.755311	diff=3.13318
 -0.280047	 -0.471571	diff=0.191524
  0.010187	 -0.080182	diff=0.0903693
  0.625453	 -3.424851	diff=4.0503
  0.093702	  0.763057	diff=0.669355
  2.210638	 10.077329	diff=7.86669
  0.039369	 -2.740381	diff=2.77975
 -0.429875	 -0.869225	diff=0.43935
  0.310857	 -0.263901	diff=0.574757
 -0.213094	 -0.351334	diff=0.13824
  0.008088	 -0.056045	diff=0.0641333
 -1.933172	 -4.336697	diff=2.40353
  1.138353	  2.054067	diff=0.915714
  2.940576	  7.210051	diff=4.26947
  0.058310	  1.271984	diff=1.21367
  1.655029	  3.239898	diff=1.58487
  0.245078	-10.619044	diff=10.8641
 -0.328141	 -2.342613	diff=2.01447
  0.216650	 -0.565047	diff=0.781697
 -1.661204	  3.106838	diff=4.76804
  0.639690	 -0.422730	diff=1.06242
  2.482787	  7.237702	diff=4.75492
  0.283069	 -0.183259	diff=0.466328
 -1.824281	 -0.838072	diff=0.986208
 -0.537716	  7.248959	diff=7.78668
  1.015222	  1.536513	diff=0.521291
 -0.179372	  0.901609	diff=1.08098
  1.782897	  4.496673	diff=2.71378
 -1.098034	 -0.021201	diff=1.07683
 -4.244684	-16.212481	diff=11.9678
 -0.041202	  1.074963	diff=1.11616
  local_diff=84.2836
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=1.30599e-07
-29.126305	-26.141511	diff=2.98479
 -1.365787	 -1.627386	diff=0.261598
  0.427396	  6.606964	diff=6.17957
 -0.000001	 -0.000001	diff=1.31589e-08
  2.755739	 45.172442	diff=42.4167
  0.000003	  0.000004	diff=2.5459e-07
  0.000015	  0.000015	diff=1.6568e-07
  0.000616	  0.000621	diff=4.63718e-06
 29.799210	 45.893145	diff=16.0939
  1.318612	  1.554419	diff=0.235806
  2.130644	 32.082669	diff=29.952
  0.000001	  0.000000	diff=5.05178e-07
 11.363803	165.882164	diff=154.518
  0.000003	  0.000002	diff=4.19184e-07
  0.000076	  0.000076	diff=8.67116e-07
 -0.000487	 -0.000484	diff=3.39995e-06
 -1.248016	-14.036508	diff=12.7885
  0.483947	  0.493578	diff=0.00963088
 -1.563445	-24.975968	diff=23.4125
  0.000000	  0.000001	diff=3.23385e-07
 -2.275034	-41.039957	diff=38.7649
 -0.000004	 -0.000004	diff=1.47194e-07
 -0.000041	 -0.000040	diff=2.39658e-07
 -0.000487	 -0.000484	diff=3.40415e-06
  9.802127	 -3.039244	diff=12.8414
  0.529820	  0.579900	diff=0.0500799
 -1.564452	-24.991964	diff=23.4275
  0.000000	  0.000001	diff=3.23714e-07
 -2.471410	-44.787422	diff=42.316
 -0.000004	 -0.000005	diff=1.5755e-07
 -0.000051	 -0.000051	diff=3.99813e-07
 -0.000000	 -0.000000	diff=1.84981e-12
  0.033893	  0.033310	diff=0.000583285
  0.415797	  0.487300	diff=0.0715026
 -0.000002	 -0.000002	diff=3.35987e-10
  0.000000	  0.000000	diff=1.96682e-08
  0.035906	  0.035768	diff=0.000138101
  0.000000	  0.000000	diff=1.29738e-11
 -0.000047	 -0.000047	diff=3.74165e-07
  0.000093	  0.000093	diff=5.31303e-08
  0.169808	  2.637143	diff=2.46734
  0.000008	  0.000008	diff=1.05316e-07
  0.311450	  4.823409	diff=4.51196
 -0.000000	 -0.000000	diff=6.72029e-08
  0.068624	  1.074680	diff=1.00606
  0.000001	  0.000001	diff=1.76769e-09
 -0.000000	 -0.000000	diff=1.56756e-11
  local_diff=414.311
# W_tgt{2}, [8 4]
  0.514068	  1.052131	diff=0.538063
 -2.695328	  4.438965	diff=7.13429
 -0.000059	  0.000134	diff=0.000193445
  2.411639	  2.725447	diff=0.313808
 -0.880916	  0.358424	diff=1.23934
  0.061194	  0.497277	diff=0.436082
 -0.000734	 -0.019601	diff=0.0188668
 30.758868	 53.079988	diff=22.3211
  1.344069	  9.352546	diff=8.00848
 -0.265528	 -5.089390	diff=4.82386
  0.134582	 -0.366584	diff=0.501166
 -0.219087	 -2.180833	diff=1.96175
  3.494623	 20.903396	diff=17.4088
 -1.973455	-24.366446	diff=22.393
 -1.131617	 -8.581201	diff=7.44958
 -1.564026	 -4.235032	diff=2.67101
 -8.340553	-10.336115	diff=1.99556
 -0.293121	  0.868179	diff=1.1613
  2.631421	  4.697556	diff=2.06614
  0.606906	 -1.840365	diff=2.44727
 -8.140534	 -7.263685	diff=0.876849
 -0.139628	 -1.035393	diff=0.895765
 -3.686864	 -0.605181	diff=3.08168
 -2.059880	-14.543245	diff=12.4834
  4.435340	 -0.455415	diff=4.89076
  1.038719	  0.380604	diff=0.658115
 -0.270965	 -1.877487	diff=1.60652
 -0.801706	  4.723770	diff=5.52548
  0.889919	 -8.390025	diff=9.27994
  1.124924	 13.961914	diff=12.837
 -0.757854	  0.376069	diff=1.13392
  6.978243	 33.456939	diff=26.4787
  local_diff=184.638
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=5.43678e-07
  0.000002	  0.000002	diff=6.37362e-07
 -0.000000	 -0.000000	diff=2.35324e-10
 -0.000000	 -0.000000	diff=2.69131e-10
  local_diff=1.18154e-06
# W_emb_tgt, [2 5]
 68.674096	 67.011857	diff=1.66224
 18.673634	 18.642187	diff=0.0314464
  0.000000	  0.000000	diff=3.30433e-08
 -0.000000	 -0.000000	diff=1.6616e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-12.691859	-265.075116	diff=252.383
 10.924513	144.429644	diff=133.505
 13.670663	195.001486	diff=181.331
 -5.227620	-100.767688	diff=95.5401
  local_diff=664.453
# W_src_char{1}, [8 4]
 -0.182531	 -0.285559	diff=0.103029
 -0.005614	  0.004765	diff=0.0103789
 -0.000000	  0.000000	diff=1.44411e-07
  0.216280	 -0.183870	diff=0.40015
 -0.351438	  0.379934	diff=0.731372
  0.273392	 -0.230807	diff=0.504199
 -0.001165	  0.001261	diff=0.00242609
 -0.000226	  0.000192	diff=0.000417611
  2.535728	 -2.974959	diff=5.51069
  0.342232	 -0.292076	diff=0.634307
  0.000004	 -0.000005	diff=8.84091e-06
-14.522197	 11.271649	diff=25.7938
 19.866119	-23.290783	diff=43.1569
-18.594143	 14.195698	diff=32.7898
  0.071822	 -0.077307	diff=0.149129
  0.013871	 -0.011708	diff=0.025579
 -0.000070	  0.000076	diff=0.000146411
 -0.000009	  0.000008	diff=1.7123e-05
 -0.000000	  0.000000	diff=2.26161e-10
  0.000357	 -0.000303	diff=0.000660773
 -0.000579	  0.000627	diff=0.00120575
  0.000450	 -0.000382	diff=0.000832176
 -0.000002	  0.000002	diff=4.0029e-06
 -0.000000	  0.000000	diff=6.86369e-07
  0.000000	 -0.000000	diff=9.48735e-07
  0.000000	 -0.000000	diff=1.10958e-07
  0.000000	 -0.000000	diff=8.02488e-13
 -0.000002	  0.000002	diff=4.3047e-06
  0.000004	 -0.000004	diff=7.64176e-06
 -0.000003	  0.000002	diff=5.4174e-06
  0.000000	 -0.000000	diff=2.59422e-08
  0.000000	 -0.000000	diff=4.45766e-09
  local_diff=109.815
# W_src_char{2}, [8 4]
  0.567102	 -8.196483	diff=8.76359
 -0.541975	  0.599088	diff=1.14106
  0.000030	 -0.000404	diff=0.000433954
 -0.000156	  0.000173	diff=0.000329517
  0.164933	 -8.865308	diff=9.03024
 -0.262843	  0.574764	diff=0.837607
 -0.312576	  4.105054	diff=4.41763
  5.836801	 -6.581519	diff=12.4183
 -0.649006	  3.982074	diff=4.63108
  0.626159	  5.711483	diff=5.08532
 -0.018303	 -0.023936	diff=0.00563308
  0.030410	  0.018706	diff=0.0117037
 -0.135813	  5.473654	diff=5.60947
  0.450286	  4.285224	diff=3.83494
  0.199975	 -2.733557	diff=2.93353
 -4.031574	  4.410652	diff=8.44223
 -0.446823	-13.270149	diff=12.8233
  1.112199	  7.693923	diff=6.58172
-11.214922	 33.331349	diff=44.5463
  0.263234	  0.859042	diff=0.595808
 -0.332599	-11.996104	diff=11.6635
  0.990046	  4.809240	diff=3.81919
  0.015544	  0.677056	diff=0.661512
 -1.088274	 -7.096095	diff=6.00782
 -0.012103	 -4.144006	diff=4.1319
  0.298210	  2.051866	diff=1.75366
 11.607250	-51.986657	diff=63.5939
 -0.026020	  0.541758	diff=0.567778
 -0.032366	 -3.414020	diff=3.38165
  0.071923	  2.116288	diff=2.04436
  0.004212	  0.179752	diff=0.175539
 -0.289740	 -1.890209	diff=1.60047
  local_diff=231.112
# W_src_char{3}, [8 4]
 -1.001449	-22.081648	diff=21.0802
 -1.214214	 12.981253	diff=14.1955
 -0.330624	 -1.232301	diff=0.901677
 -0.048669	 -0.100980	diff=0.0523105
  1.959163	 13.654030	diff=11.6949
 -0.334949	 -0.049006	diff=0.285943
 -3.336697	 82.040603	diff=85.3773
  0.002736	  0.094482	diff=0.0917467
  1.524814	 25.556420	diff=24.0316
 -1.590798	-16.136557	diff=14.5458
 -0.057244	 -1.890833	diff=1.83359
 -0.058784	 -0.082735	diff=0.0239511
 -6.511915	-23.296525	diff=16.7846
 -0.172649	 -0.171678	diff=0.000970907
 -1.318729	 12.717081	diff=14.0358
  0.245283	  0.103183	diff=0.1421
 -0.134725	 -0.047492	diff=0.087233
  2.711148	  5.241098	diff=2.52995
  0.541950	  2.746491	diff=2.20454
  0.121725	  0.205044	diff=0.0833192
  5.251710	  6.367132	diff=1.11542
  0.358467	  0.645296	diff=0.286829
  2.513543	 33.481281	diff=30.9677
  0.092759	 -0.334506	diff=0.427265
  0.019191	  0.002265	diff=0.0169266
 -0.522018	 -0.800978	diff=0.27896
 -0.046331	 -0.768022	diff=0.721691
 -0.012360	 -0.026751	diff=0.0143907
  0.105992	 -8.896261	diff=9.00225
 -0.050571	 -0.090345	diff=0.0397747
 -0.375423	 -5.257916	diff=4.88249
  0.076686	  0.095791	diff=0.0191054
  local_diff=257.756
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000005	diff=4.63371e-06
 -0.000001	 -0.000005	diff=3.97409e-06
 -0.002641	 -0.006088	diff=0.00344686
  0.041141	  0.103571	diff=0.0624295
-49.767311	 62.705214	diff=112.473
-13.301983	 25.345804	diff=38.6478
  0.000000	  0.000000	diff=8.44182e-11
  0.000000	 -0.000000	diff=7.65837e-11
  local_diff=151.186
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=3.6026e-09
  0.000012	  0.000012	diff=1.1543e-07
  1.254600	  1.244997	diff=0.00960298
 -0.000007	 -0.000007	diff=6.8608e-08
 -0.000016	 -0.000016	diff=1.59322e-07
  0.000000	  0.000000	diff=1.17234e-12
  0.000000	 -0.000000	diff=6.15714e-15
  0.000000	  0.000000	diff=8.67058e-11
  0.000000	  0.000000	diff=8.59993e-10
 -0.000003	 -0.000003	diff=1.00114e-08
 -0.366584	 -0.367416	diff=0.000831913
  0.000002	  0.000002	diff=5.92047e-09
  0.000005	  0.000005	diff=1.39944e-08
  0.000000	 -0.000000	diff=2.92782e-12
  0.000000	  0.000000	diff=1.81242e-15
  0.000000	  0.000000	diff=7.56235e-11
  0.000000	  0.000000	diff=2.96971e-12
  0.000000	 -0.000000	diff=8.17041e-13
  0.000000	  0.000000	diff=8.43413e-37
  0.000000	 -0.000000	diff=2.03972e-17
  0.000000	  0.000000	diff=1.77575e-37
  0.000000	 -0.000000	diff=2.22293e-16
  0.000000	  0.000000	diff=8.55156e-21
 -0.000000	 -0.000000	diff=5.38175e-12
  0.000000	  0.000000	diff=1.12906e-16
  0.000000	 -0.000000	diff=1.44954e-19
  0.000000	 -0.000000	diff=1.63912e-17
  0.000000	 -0.000000	diff=3.23722e-22
  0.000000	 -0.000000	diff=4.76326e-21
  0.000000	 -0.000000	diff=6.10533e-16
  0.000000	  0.000000	diff=1.3613e-26
  0.000000	 -0.000000	diff=5.2384e-13
  local_diff=0.0104353
# W_tgt_char{2}, [8 4]
 -0.021667	 -0.021671	diff=4.61114e-06
  0.041590	  0.041590	diff=1.49492e-07
  0.032652	  0.032648	diff=3.6256e-06
 -0.009697	 -0.009698	diff=2.18679e-07
  0.059896	  0.059898	diff=2.33322e-06
  0.060152	  0.060154	diff=1.56791e-06
  0.006350	  0.006352	diff=2.09388e-06
  0.118242	  0.118246	diff=4.43702e-06
 -0.000000	 -0.000000	diff=3.02871e-12
  0.000000	  0.000000	diff=2.74739e-12
  0.000000	  0.000000	diff=6.98125e-12
 -0.000000	 -0.000000	diff=1.13923e-12
  0.000000	  0.000000	diff=2.34972e-12
  0.000000	  0.000000	diff=5.29484e-12
  0.000000	  0.000000	diff=1.2606e-12
  0.000000	  0.000000	diff=4.10677e-12
  2.704847	  2.697460	diff=0.00738742
  3.550480	  3.553999	diff=0.00351958
 -1.817191	 -1.821861	diff=0.00467072
 -0.508698	 -0.508793	diff=9.53664e-05
  1.707847	  1.712103	diff=0.00425624
  3.577140	  3.579252	diff=0.00211226
  1.717826	  1.705528	diff=0.012298
 -0.358977	 -0.357449	diff=0.00152749
  0.564226	  0.564494	diff=0.000267768
  2.208064	  2.207054	diff=0.00101053
 -0.207176	 -0.207177	diff=1.48723e-06
 -1.229774	 -1.229753	diff=2.10339e-05
  0.122932	  0.123545	diff=0.00061244
  1.674847	  1.677880	diff=0.00303313
 -1.837468	 -1.838477	diff=0.00100932
  0.107623	  0.117881	diff=0.0102578
  local_diff=0.0520996
# W_tgt_char{3}, [8 4]
 -4.597772	 -4.592913	diff=0.00485866
  0.324232	  0.323814	diff=0.000418517
  0.339358	  0.339589	diff=0.000231064
 -0.073274	 -0.073214	diff=6.04884e-05
 -6.799266	 -6.796487	diff=0.00277928
 -1.000571	 -0.999697	diff=0.000873978
  2.756827	  2.757337	diff=0.000509872
  2.107901	  2.104914	diff=0.00298729
 -3.535641	 -3.533920	diff=0.00172183
  0.286065	  0.285778	diff=0.000287116
  0.418571	  0.419044	diff=0.000472952
 -0.058811	 -0.058795	diff=1.63381e-05
 -2.062147	 -2.061318	diff=0.000828795
 -1.342468	 -1.344712	diff=0.00224447
 -2.333304	 -2.337610	diff=0.00430624
  2.172332	  2.169839	diff=0.00249209
  1.998206	  1.999418	diff=0.00121205
  1.291280	  1.289309	diff=0.00197075
  2.168270	  2.170848	diff=0.00257755
  0.077018	  0.077081	diff=6.29887e-05
  4.571719	  4.573634	diff=0.00191418
  2.500004	  2.502103	diff=0.00209889
 10.685049	 10.699715	diff=0.0146653
 -0.942939	 -0.944577	diff=0.00163816
  0.687196	  0.687612	diff=0.000415914
 -0.254590	 -0.254759	diff=0.000169144
 -0.099027	 -0.098901	diff=0.000126179
 -0.041505	 -0.041500	diff=5.88759e-06
  1.527106	  1.526843	diff=0.000262982
 -0.935990	 -0.936233	diff=0.000243456
  2.789432	  2.793513	diff=0.00408093
 -0.594596	 -0.594901	diff=0.000304929
  local_diff=0.0568382
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=8.76482e-11
 -0.000000	 -0.000000	diff=6.91076e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.273970	  0.273505	diff=0.000464957
  6.201526	  5.976695	diff=0.224831
  0.000000	  0.000000	diff=3.03103e-09
 -0.000000	 -0.000000	diff=3.84985e-10
 -0.000000	 -0.000000	diff=4.0427e-11
  0.000000	  0.000000	diff=3.01295e-12
  local_diff=0.225296
# W_h, [2 4]
 -0.518900	-19.167716	diff=18.6488
  1.479261	 -8.729709	diff=10.209
 -1.451961	 19.985562	diff=21.4375
 -1.341093	  9.969354	diff=11.3104
-19.239325	 -5.855359	diff=13.384
  4.517827	 -8.399697	diff=12.9175
  1.413643	  8.042432	diff=6.62879
  0.337725	  6.785644	diff=6.44792
  local_diff=100.984
# W_soft, [5 2]
 -9.831373	 -9.841868	diff=0.0104952
 -0.037506	 -0.037775	diff=0.000268984
 -7.423825	 -7.423851	diff=2.61602e-05
 -1.014743	 -1.018057	diff=0.00331411
 18.335154	 18.321551	diff=0.0136029
 -4.193480	 -4.206446	diff=0.0129656
 -0.585552	 -0.586476	diff=0.00092402
 -7.516441	 -7.517209	diff=0.000768216
 -2.553731	 -2.557016	diff=0.0032845
 14.882311	 14.867146	diff=0.0151652
  local_diff=0.0608149
# W_soft_char, [5 2]
  0.278775	  0.278073	diff=0.000701983
 -5.215479	 -5.216402	diff=0.000922962
 -1.057528	 -1.058296	diff=0.000768097
  7.669951	  7.667905	diff=0.00204575
 -1.670394	 -1.671279	diff=0.00088563
  0.417412	  0.417134	diff=0.000277732
  0.738403	  0.738243	diff=0.000159202
 -0.339371	 -0.339655	diff=0.000283917
 -1.041141	 -1.041299	diff=0.000157748
  0.225745	  0.225576	diff=0.000168721
  local_diff=0.00637175
# Num params=404, abs_diff=2245.28
Elapsed time is 10.145358 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.774607	  0.775017	diff=0.000409914
  0.128423	  0.128406	diff=1.66134e-05
 -0.009830	 -0.009919	diff=8.9507e-05
 -0.019058	 -0.019049	diff=8.71632e-06
  5.189606	  5.206958	diff=0.0173519
  0.003961	  0.004039	diff=7.76725e-05
 -3.988843	 -3.977084	diff=0.0117587
 -0.972254	 -0.973370	diff=0.00111569
 -0.022317	 -0.022318	diff=1.06735e-07
 -0.177002	 -0.177434	diff=0.000431855
 -0.001375	 -0.001376	diff=8.4785e-07
  0.000380	  0.000380	diff=1.28764e-08
 -0.385880	 -0.385825	diff=5.52742e-05
 -0.309317	 -0.310534	diff=0.00121771
  0.150534	  0.150571	diff=3.61441e-05
  0.736365	  0.728765	diff=0.00760002
  0.191262	  0.191210	diff=5.17415e-05
 -0.304794	 -0.304387	diff=0.000407048
  0.053286	  0.053323	diff=3.67449e-05
  0.030215	  0.030234	diff=1.85428e-05
  1.850483	  1.853264	diff=0.00278142
 -0.155375	 -0.155203	diff=0.000172843
 -0.081188	 -0.081324	diff=0.000135817
  0.040618	  0.040706	diff=8.82367e-05
 -0.026965	 -0.026966	diff=7.27646e-07
  0.039220	  0.039227	diff=6.79045e-06
 -0.006751	 -0.006750	diff=6.45873e-07
 -0.003902	 -0.003902	diff=3.08678e-07
 -0.222346	 -0.222302	diff=4.40938e-05
  0.019886	  0.019889	diff=2.87939e-06
  0.018291	  0.018289	diff=1.9861e-06
 -0.006440	 -0.006439	diff=1.50467e-06
  local_diff=0.0439219
# W_src{2}, [8 4]
  0.546315	  0.546316	diff=1.29555e-06
 -1.838873	 -1.834678	diff=0.00419498
 -0.010543	 -0.010418	diff=0.000124876
  0.008380	  0.008388	diff=7.40131e-06
 -0.588008	 -0.590486	diff=0.00247799
  0.088173	  0.093252	diff=0.00507872
 -0.290159	 -0.289528	diff=0.000631319
 -0.586656	 -0.585140	diff=0.00151648
  0.028344	  0.028198	diff=0.000145137
  0.955350	  0.951577	diff=0.00377263
 -0.051483	 -0.051411	diff=7.15621e-05
 -0.002983	 -0.002982	diff=6.8866e-07
 -0.553095	 -0.552446	diff=0.000649726
  1.616534	  1.612816	diff=0.0037178
  1.108858	  1.096562	diff=0.0122956
 -1.457773	 -1.497063	diff=0.0392892
  0.207397	  0.207114	diff=0.000283063
  0.098363	  0.098311	diff=5.18937e-05
  0.127123	  0.126936	diff=0.000187512
 -0.007134	 -0.007140	diff=5.75592e-06
 -0.142017	 -0.141890	diff=0.000126864
  0.439434	  0.439588	diff=0.000154683
 -1.322516	 -1.326307	diff=0.00379088
  0.208624	  0.208144	diff=0.000480281
 -0.206502	 -0.207098	diff=0.000596456
 -0.308359	 -0.309157	diff=0.000797752
 -0.717426	 -0.719882	diff=0.00245606
  0.052711	  0.052607	diff=0.000104398
  0.748552	  0.750358	diff=0.00180571
 -1.468626	 -1.466725	diff=0.0019001
  5.956664	  5.933378	diff=0.0232862
 -0.375785	 -0.378924	diff=0.00313849
  local_diff=0.113141
# W_tgt{1}, [8 6]
 -0.005302	 -0.005214	diff=8.83035e-05
  2.669619	  2.456937	diff=0.212682
  3.470631	  3.515662	diff=0.0450307
 -0.000033	 -0.000033	diff=5.65729e-08
  0.000032	  0.000032	diff=5.2425e-07
 -0.001881	 -0.001871	diff=9.42082e-06
  0.000000	  0.000000	diff=2.88757e-12
  0.000000	  0.000000	diff=4.30152e-12
 -0.000000	 -0.000000	diff=8.19885e-10
 -2.169091	 -2.346737	diff=0.177646
 -3.376871	 -3.335874	diff=0.0409971
 -0.000160	 -0.000159	diff=1.34533e-06
 -0.000000	 -0.000000	diff=1.72484e-12
 -0.009307	 -0.009088	diff=0.00021889
 -0.000000	 -0.000000	diff=2.26268e-12
  0.000000	  0.000000	diff=8.62295e-12
  0.000971	  0.000974	diff=3.11938e-06
  0.195487	  0.194216	diff=0.00127064
 -1.126173	 -1.121674	diff=0.00449934
  0.000067	  0.000067	diff=2.38215e-07
 -0.000005	 -0.000005	diff=1.23346e-08
  0.003800	  0.003840	diff=4.01357e-05
  0.000000	  0.000000	diff=6.34186e-13
 -0.000000	 -0.000000	diff=5.87696e-12
 -0.001867	 -0.001856	diff=1.11056e-05
 -0.891108	 -0.919086	diff=0.0279776
  1.289121	  1.295141	diff=0.00601984
  0.000000	 -0.000000	diff=3.75862e-13
 -0.000004	 -0.000004	diff=2.38006e-08
  0.000000	 -0.000000	diff=3.17462e-14
  0.000000	 -0.000000	diff=3.09443e-12
  0.000000	 -0.000000	diff=2.47554e-15
  0.000064	  0.000064	diff=2.42035e-07
  0.001366	  0.001380	diff=1.39447e-05
 -0.816794	 -0.814372	diff=0.00242233
  0.000000	 -0.000000	diff=3.3416e-16
 -0.000007	 -0.000007	diff=2.7808e-08
  0.000000	 -0.000000	diff=1.16948e-13
  0.000000	  0.000000	diff=3.7804e-19
  0.000000	 -0.000000	diff=3.23633e-18
  0.000000	 -0.000000	diff=3.01336e-15
 -0.000355	 -0.000354	diff=1.13645e-06
 -0.000000	 -0.000000	diff=6.82882e-11
  0.000000	 -0.000000	diff=2.78083e-22
 -0.000000	 -0.000000	diff=1.61188e-12
  0.000000	  0.000000	diff=7.55484e-15
  0.000000	  0.000000	diff=7.96441e-20
  0.000000	 -0.000000	diff=1.46949e-24
  local_diff=0.518933
# W_tgt{2}, [8 4]
  1.422975	  1.425289	diff=0.0023134
  2.610780	  2.607157	diff=0.00362355
 -0.000105	 -0.000104	diff=4.87414e-07
 -0.842775	 -0.837876	diff=0.0048995
  0.216620	  0.215566	diff=0.00105391
 -0.034578	 -0.034415	diff=0.000163337
  0.071462	  0.071693	diff=0.000230586
-32.063758	-30.415507	diff=1.64825
 -0.032566	 -0.032562	diff=3.87902e-06
 -0.064529	 -0.064731	diff=0.000201796
  0.101001	  0.100596	diff=0.000404721
  0.001608	  0.001620	diff=1.15448e-05
  0.028190	  0.028161	diff=2.84585e-05
 -0.057595	 -0.057739	diff=0.000144256
  0.118206	  0.117825	diff=0.00038131
  0.022694	  0.022637	diff=5.73284e-05
  0.306323	  0.306169	diff=0.000154374
 -0.137675	 -0.137293	diff=0.000382083
 -0.228693	 -0.227419	diff=0.00127435
 -1.327015	 -1.324872	diff=0.00214288
 -0.636691	 -0.634185	diff=0.00250638
 -0.094746	 -0.094730	diff=1.57173e-05
  0.292952	  0.293284	diff=0.000332348
 -6.439771	 -6.404442	diff=0.0353292
  0.733213	  0.738971	diff=0.00575811
 -1.732346	 -1.733996	diff=0.00164976
  0.291097	  0.292173	diff=0.00107584
  5.449608	  5.481953	diff=0.0323451
  0.508396	  0.506778	diff=0.00161845
  0.107398	  0.108417	diff=0.0010188
 -1.220707	 -1.218773	diff=0.0019334
 26.523828	 26.936809	diff=0.412981
  local_diff=2.16229
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.62521e-11
  0.000000	  0.000000	diff=4.92313e-11
  0.000000	  0.000000	diff=6.70636e-14
  0.000000	  0.000000	diff=6.20774e-14
  local_diff=8.56125e-11
# W_emb_tgt, [2 5]
 -2.840010	 -3.781741	diff=0.941731
 -2.746844	 -2.813053	diff=0.0662085
  0.000029	  0.000029	diff=2.48258e-07
  0.000000	  0.000000	diff=7.46795e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.035193	 -0.032475	diff=0.00271745
  0.015646	  0.016435	diff=0.000788631
 -0.000000	 -0.000000	diff=7.11004e-10
  0.000000	  0.000000	diff=3.78293e-10
  local_diff=1.01145
# W_src_char{1}, [8 4]
 -0.003417	 -0.003528	diff=0.00011124
 -0.000208	 -0.000208	diff=1.1374e-08
 -0.000000	 -0.000000	diff=3.43036e-12
  0.026875	  0.026860	diff=1.46e-05
 -0.071086	 -0.071095	diff=9.26697e-06
  0.034339	  0.034315	diff=2.41615e-05
 -0.000038	 -0.000038	diff=4.47361e-09
 -0.000003	 -0.000003	diff=2.38928e-10
  0.327721	  0.326314	diff=0.00140642
  0.012700	  0.012742	diff=4.26393e-05
  0.000000	  0.000000	diff=5.71878e-11
 -1.612476	 -1.646593	diff=0.0341166
  4.459545	  4.358289	diff=0.101256
 -2.055944	 -2.105252	diff=0.0493083
  0.002343	  0.002326	diff=1.69091e-05
  0.000162	  0.000161	diff=1.15959e-06
 -0.000000	 -0.000000	diff=1.15093e-12
 -0.000000	 -0.000000	diff=2.82145e-12
  0.000000	 -0.000000	diff=2.16286e-14
  0.000002	  0.000002	diff=4.25803e-12
 -0.000006	 -0.000006	diff=5.73801e-13
  0.000003	  0.000003	diff=2.6316e-12
 -0.000000	 -0.000000	diff=3.48285e-12
 -0.000000	 -0.000000	diff=1.19522e-12
  0.000000	  0.000000	diff=2.32655e-12
  0.000000	  0.000000	diff=3.03599e-12
  0.000000	  0.000000	diff=4.25645e-17
 -0.000000	 -0.000000	diff=2.82797e-12
  0.000000	  0.000000	diff=2.96452e-12
 -0.000000	 -0.000000	diff=4.47392e-12
  0.000000	  0.000000	diff=5.06199e-13
  0.000000	  0.000000	diff=4.27444e-13
  local_diff=0.186307
# W_src_char{2}, [8 4]
  0.071378	  0.070736	diff=0.000642685
 -0.077749	 -0.077765	diff=1.58041e-05
  0.000000	  0.000000	diff=4.11517e-11
 -0.000002	 -0.000002	diff=3.71466e-10
 -0.276736	 -0.276962	diff=0.000225939
 -0.037946	 -0.037966	diff=1.98638e-05
 -0.038558	 -0.038696	diff=0.000138009
  0.835754	  0.833387	diff=0.00236674
 -2.492393	 -2.490112	diff=0.00228131
 -0.769013	 -0.764849	diff=0.00416338
 -0.910218	 -0.908216	diff=0.00200209
 -0.015647	 -0.015679	diff=3.21964e-05
  0.215864	  0.215613	diff=0.00025091
 -0.527769	 -0.525040	diff=0.00272857
  0.026004	  0.025945	diff=5.94495e-05
 -0.551235	 -0.551890	diff=0.000655581
 -1.162346	 -1.163332	diff=0.000986639
  0.238105	  0.238571	diff=0.000465605
-32.514601	-31.993244	diff=0.521358
  0.474388	  0.479308	diff=0.0049206
 -0.370734	 -0.370198	diff=0.0005358
  1.317031	  1.362188	diff=0.0451573
  0.017017	  0.017059	diff=4.27899e-05
 -0.207642	 -0.207719	diff=7.71424e-05
 -0.033216	 -0.034013	diff=0.000796795
  0.063873	  0.063912	diff=3.90681e-05
 29.328062	 29.628164	diff=0.300102
 -0.434901	 -0.430182	diff=0.00471822
  0.015098	  0.015445	diff=0.000347024
 -1.164801	 -1.121229	diff=0.043572
  0.004674	  0.004677	diff=3.22021e-06
 -0.056953	 -0.056959	diff=5.76018e-06
  local_diff=0.93871
# W_src_char{3}, [8 4]
  6.972333	  6.990347	diff=0.0180141
 -3.633659	 -3.636942	diff=0.00328324
 -0.244731	 -0.245154	diff=0.000422994
  0.001361	  0.001376	diff=1.45528e-05
-11.263741	-11.204720	diff=0.0590203
 -0.033743	 -0.033707	diff=3.61133e-05
 -0.281946	 -0.286279	diff=0.00433331
  0.016471	  0.016575	diff=0.000103689
 -6.887828	 -6.870536	diff=0.0172923
  3.343996	  3.334673	diff=0.00932309
  0.023952	  0.023927	diff=2.45921e-05
 -0.070231	 -0.070312	diff=8.09569e-05
  2.407065	  2.409270	diff=0.00220556
 -0.029624	 -0.029008	diff=0.000616029
 -0.192518	 -0.192030	diff=0.000488767
 -0.999657	 -1.003882	diff=0.00422504
 -0.017287	 -0.017329	diff=4.16689e-05
  0.280835	  0.280576	diff=0.00025895
  0.333156	  0.332655	diff=0.000501722
  0.002049	  0.002045	diff=3.66041e-06
 14.922020	 15.007039	diff=0.0850191
  0.015665	  0.015700	diff=3.54564e-05
  1.107233	  1.115199	diff=0.00796649
 -0.021921	 -0.021814	diff=0.00010645
  0.041761	  0.041912	diff=0.000150901
  7.075134	  6.795501	diff=0.279634
  0.001356	  0.001355	diff=1.02578e-06
 -0.244900	 -0.246185	diff=0.00128495
  0.686571	  0.687232	diff=0.000660765
 -0.702233	 -0.707420	diff=0.00518702
 -0.067110	 -0.067014	diff=9.56112e-05
 -3.732008	 -3.791096	diff=0.0590879
  local_diff=0.55952
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=6.2725e-11
 -0.000000	 -0.000000	diff=5.23794e-11
  0.000033	  0.000033	diff=7.37736e-09
 -0.000547	 -0.000557	diff=1.02239e-05
-15.269838	-13.923707	diff=1.34613
 -7.926336	 -7.759591	diff=0.166745
  0.000000	 -0.000000	diff=1.27541e-13
 -0.000586	 -0.000593	diff=6.40995e-06
  local_diff=1.51289
# W_h, [2 4]
 -0.037667	 -0.038837	diff=0.00117029
 -1.769786	 -1.765998	diff=0.00378734
 -4.237478	 -4.448499	diff=0.211021
 -1.812797	 -1.806268	diff=0.00652929
  0.516798	  0.514863	diff=0.0019352
  2.877683	  2.882376	diff=0.00469261
  0.512862	  0.510841	diff=0.00202141
 -0.253541	 -0.250570	diff=0.00297036
  local_diff=0.234128
# W_soft, [5 2]
  0.316517	  0.315965	diff=0.000551902
 -1.138440	 -1.140699	diff=0.00225892
 -2.315172	 -2.316921	diff=0.00174908
 -3.538597	 -3.546084	diff=0.00748653
  6.694847	  6.687738	diff=0.00710862
  8.607525	  8.606846	diff=0.000678721
  1.032033	  1.029366	diff=0.00266637
  8.424532	  8.422364	diff=0.00216774
 -8.131252	 -8.146236	diff=0.0149839
 -9.897691	 -9.912341	diff=0.0146504
  local_diff=0.0543022
# Num params=288, abs_diff=7.33559
Elapsed time is 5.237197 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 12.095181	 30.496926	diff=18.4017
  0.501228	 -0.092534	diff=0.593762
  1.698148	  2.870258	diff=1.17211
 -0.325666	 -2.396784	diff=2.07112
 17.061819	 41.580473	diff=24.5187
  1.201280	  2.628672	diff=1.42739
-51.585921	-146.031368	diff=94.4454
 14.015455	 15.155307	diff=1.13985
 -3.715394	 -7.140290	diff=3.4249
 -0.594876	  0.020345	diff=0.61522
 -0.298832	 -0.665345	diff=0.366513
  0.041596	  0.188674	diff=0.147078
 -4.484119	 -9.504237	diff=5.02012
 -0.804013	 -0.709376	diff=0.0946363
 17.138143	 31.722847	diff=14.5847
 -5.925863	 -5.174022	diff=0.751841
 -9.035904	-19.916894	diff=10.881
  1.213477	  3.821942	diff=2.60846
 -2.441515	 -4.693027	diff=2.25151
  1.180652	  7.557348	diff=6.3767
-17.162872	-38.072394	diff=20.9095
  0.418210	 -1.561963	diff=1.98017
 23.499480	 37.609852	diff=14.1104
 -3.162665	-15.756234	diff=12.5936
  4.232038	  4.794582	diff=0.562544
  0.128917	  2.605857	diff=2.47694
  1.271263	  1.506588	diff=0.235325
  0.981362	  5.614363	diff=4.633
  7.949174	  8.636325	diff=0.687151
 -0.176313	  1.472914	diff=1.64923
-13.046505	-15.252443	diff=2.20594
 -1.663806	-11.126146	diff=9.46234
  local_diff=262.399
# W_src{2}, [8 4]
  1.474873	-30.442555	diff=31.9174
  2.214312	 -6.680999	diff=8.89531
 -4.078036	-21.834921	diff=17.7569
  0.164452	  0.511010	diff=0.346559
  7.804337	-66.720241	diff=74.5246
  4.998341	 13.690591	diff=8.69225
 45.186345	359.590084	diff=314.404
 -6.795610	-44.224711	diff=37.4291
 -3.842842	 11.093636	diff=14.9365
  6.282575	 20.911761	diff=14.6292
 -3.056863	-16.067478	diff=13.0106
  0.119804	  0.375934	diff=0.25613
-16.058853	-47.928412	diff=31.8696
 10.809581	 29.071995	diff=18.2624
 43.643639	203.461697	diff=159.818
  4.005078	 17.685520	diff=13.6804
 22.881950	105.412332	diff=82.5304
  7.710898	 -2.014726	diff=9.72562
 -5.176485	-47.531767	diff=42.3553
  4.329257	  1.663652	diff=2.6656
-15.594035	 -0.491337	diff=15.1027
 10.131562	 17.225999	diff=7.09444
 43.211462	222.307560	diff=179.096
  4.097431	  3.315079	diff=0.782352
-23.834417	-53.630819	diff=29.7964
-11.131631	 -5.985763	diff=5.14587
 13.790712	 43.976014	diff=30.1853
 -3.645893	  3.119370	diff=6.76526
 15.034449	 84.381246	diff=69.3468
-15.502330	-24.611330	diff=9.109
-74.678175	-433.634886	diff=358.957
 -1.691511	  6.062996	diff=7.75451
  local_diff=1616.84
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=1.56827e-07
-24.800842	 -5.381828	diff=19.419
-12.458396	-26.024315	diff=13.5659
  8.282596	 44.540671	diff=36.2581
 -0.000007	 -0.000008	diff=6.34065e-07
 56.839741	209.977712	diff=153.138
 -0.000007	 -0.000004	diff=3.40843e-06
  0.000016	  0.000017	diff=1.16426e-06
  0.000616	  0.000620	diff=4.76296e-06
 50.655638	146.588687	diff=95.933
 12.043311	 24.857453	diff=12.8141
 40.782293	216.285667	diff=175.503
  0.000006	  0.000006	diff=4.06583e-07
218.952468	774.308992	diff=555.357
  0.000012	  0.000009	diff=2.92073e-06
  0.000075	  0.000075	diff=1.39533e-07
 -0.000486	 -0.000483	diff=3.29597e-06
-17.374065	-92.444606	diff=75.0705
  4.602606	  8.545456	diff=3.94285
-30.774593	-168.377701	diff=137.603
  0.000003	  0.000004	diff=4.67937e-07
-49.782636	-198.409069	diff=148.626
 -0.000000	 -0.000001	diff=1.12442e-06
 -0.000041	 -0.000041	diff=1.21297e-07
 -0.000487	 -0.000483	diff=3.29993e-06
 -6.335217	-81.499840	diff=75.1646
  5.013072	  9.306244	diff=4.29317
-30.794030	-168.485567	diff=137.692
  0.000004	  0.000004	diff=4.62441e-07
-53.840444	-216.872344	diff=163.032
 -0.000001	 -0.000002	diff=1.16949e-06
 -0.000052	 -0.000052	diff=2.6886e-08
 -0.000000	 -0.000000	diff=1.84981e-12
  0.021720	  0.028318	diff=0.00659773
  3.870928	  7.755472	diff=3.88454
 -0.000002	 -0.000002	diff=3.24618e-10
  0.000002	  0.000002	diff=1.96598e-07
  0.035906	  0.035768	diff=0.0001381
  0.000000	  0.000000	diff=1.14792e-10
 -0.000047	 -0.000047	diff=3.74245e-07
  0.000093	  0.000093	diff=7.26015e-08
  3.296974	 17.778578	diff=14.4816
  0.000026	  0.000025	diff=9.65691e-07
  6.040819	 32.517588	diff=26.4768
 -0.000000	 -0.000000	diff=4.59169e-08
  1.338803	  6.898546	diff=5.55974
  0.000001	  0.000001	diff=1.62348e-09
 -0.000000	 -0.000000	diff=6.16707e-11
  local_diff=1857.82
# W_tgt{2}, [8 4]
 -4.109564	  1.252686	diff=5.36225
-45.459978	 96.135546	diff=141.596
 -0.001191	  0.000485	diff=0.00167635
 25.826160	 32.615448	diff=6.78929
-10.305520	  1.718507	diff=12.024
  0.270753	  5.397414	diff=5.12666
  0.100520	  0.043707	diff=0.0568133
494.751076	1077.145889	diff=582.395
 18.543799	 58.229319	diff=39.6855
 -6.058890	-39.511439	diff=33.4525
  1.058812	 13.065576	diff=12.0068
 -3.258915	-22.093927	diff=18.835
 46.586023	172.803730	diff=126.218
-34.299113	-232.698559	diff=198.399
-16.482041	-51.557262	diff=35.0752
 -4.071251	-18.009306	diff=13.9381
-24.490962	 -7.478097	diff=17.0129
 -0.944208	 -0.255781	diff=0.688427
 13.563433	 20.229357	diff=6.66592
 -1.425019	-27.063082	diff=25.6381
-25.299322	 19.383801	diff=44.6831
 -4.109233	-33.100985	diff=28.9918
-10.031838	 -7.267175	diff=2.76466
-14.121678	-164.952415	diff=150.831
 -7.578865	-56.913400	diff=49.3345
  1.518501	 -3.273545	diff=4.79205
 -6.730382	-24.380812	diff=17.6504
  9.892251	 66.550312	diff=56.6581
-24.075599	-117.786688	diff=93.7111
 20.909875	147.211970	diff=126.302
  9.095583	 34.869117	diff=25.7735
190.231551	516.402098	diff=326.171
  local_diff=2208.63
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	 -0.000003	diff=4.66645e-06
  0.000002	 -0.000003	diff=5.35853e-06
 -0.000000	  0.000000	diff=8.61182e-10
 -0.000000	  0.000000	diff=9.86624e-10
  local_diff=1.00268e-05
# W_emb_tgt, [2 5]
 62.775291	 54.245192	diff=8.5301
 22.890274	 27.880024	diff=4.98975
  0.000002	  0.000002	diff=3.96625e-07
 -0.000002	 -0.000003	diff=6.56537e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-285.185907	-999.947861	diff=714.762
195.306626	972.667377	diff=777.361
258.946312	894.642581	diff=635.696
-118.956262	-462.310258	diff=343.354
  local_diff=2484.69
# W_src_char{1}, [8 4]
 -1.613130	  0.000779	diff=1.61391
  0.061697	 -0.007910	diff=0.0696063
  0.000000	 -0.000000	diff=5.71586e-07
 -2.379202	  0.305250	diff=2.68445
  1.335297	 -1.559499	diff=2.8948
 -2.991098	  0.386438	diff=3.37754
  0.004427	 -0.005176	diff=0.00960334
  0.002483	 -0.000318	diff=0.00280097
-10.639615	 11.690734	diff=22.3303
 -3.767006	  0.484886	diff=4.25189
 -0.000016	  0.000019	diff=3.49974e-05
152.911631	-18.712510	diff=171.624
-76.699683	 95.600901	diff=172.301
195.211187	-23.565386	diff=218.777
 -0.272932	  0.317318	diff=0.59025
 -0.152449	  0.019436	diff=0.171885
  0.000267	 -0.000312	diff=0.000579548
  0.000102	 -0.000013	diff=0.000114835
  0.000000	 -0.000000	diff=9.40344e-10
 -0.003928	  0.000504	diff=0.00443163
  0.002200	 -0.002573	diff=0.00477346
 -0.004947	  0.000634	diff=0.00558114
  0.000007	 -0.000009	diff=1.5845e-05
  0.000004	 -0.000001	diff=4.60317e-06
 -0.000002	  0.000002	diff=3.75537e-06
 -0.000001	  0.000000	diff=7.44219e-07
  0.000000	  0.000000	diff=3.29394e-12
  0.000025	 -0.000003	diff=2.88417e-05
 -0.000014	  0.000017	diff=3.07123e-05
  0.000032	 -0.000004	diff=3.62976e-05
 -0.000000	  0.000000	diff=1.02724e-07
 -0.000000	  0.000000	diff=2.98333e-08
  local_diff=600.714
# W_src_char{2}, [8 4]
-33.227649	  7.596430	diff=40.8241
  1.908889	 -5.104666	diff=7.01356
 -0.001644	  0.000376	diff=0.00201965
  0.000551	 -0.001475	diff=0.00202625
-27.254679	 -1.528869	diff=25.7258
  1.771491	 -2.380655	diff=4.15215
 16.748696	 -3.800302	diff=20.549
-20.617495	 56.117005	diff=76.7345
 20.599205	 -2.215756	diff=22.815
  3.705299	-19.429391	diff=23.1347
 -0.171877	 -0.207959	diff=0.0360825
  0.304035	  0.150118	diff=0.153918
 18.075927	  2.829063	diff=15.2469
  3.347712	-15.298767	diff=18.6465
-11.140357	  2.511949	diff=13.6523
 14.184032	-37.581143	diff=51.7652
-31.426384	-18.010590	diff=13.4158
 21.538506	 14.289323	diff=7.24918
-122.525044	-303.181290	diff=180.656
  4.088736	  3.937999	diff=0.150737
-27.465344	-14.392837	diff=13.0725
 17.201265	 14.710119	diff=2.49115
  1.504920	  0.744328	diff=0.760592
-20.380938	-13.359573	diff=7.02137
 -7.737397	 -1.511328	diff=6.22607
  5.753898	  3.801450	diff=1.95245
 66.275134	266.992180	diff=200.717
  0.154350	 -1.155385	diff=1.30974
 -6.920919	 -2.528648	diff=4.39227
  2.729559	 -1.500544	diff=4.2301
  0.399019	  0.199042	diff=0.199976
 -5.422666	 -3.570442	diff=1.85222
  local_diff=766.151
# W_src_char{3}, [8 4]
-17.051357	 90.280410	diff=107.332
 -8.698922	-72.781384	diff=64.0825
 -6.636525	 -9.827282	diff=3.19076
 -0.262211	  0.100413	diff=0.362624
 10.284858	-114.485065	diff=124.77
 -2.784706	 -1.026623	diff=1.75808
115.013855	  3.457642	diff=111.556
  1.868014	  1.625732	diff=0.242282
 25.137554	-85.188390	diff=110.326
-18.668883	 59.579329	diff=78.2482
 -3.464313	 -1.111885	diff=2.35243
 -0.585605	 -0.264747	diff=0.320858
-90.701603	-20.561776	diff=70.1398
 -1.470944	 -0.442162	diff=1.02878
 10.095739	-10.622010	diff=20.7177
  1.358946	  0.434719	diff=0.924227
 -1.270385	 -0.555329	diff=0.715056
 29.360541	 14.060788	diff=15.2998
 12.031394	 16.610485	diff=4.57909
  0.838223	  0.026902	diff=0.81132
102.748601	238.221615	diff=135.473
  3.136195	  0.948353	diff=2.18784
 87.386796	 81.697000	diff=5.6898
 -2.137612	 -3.016171	diff=0.878559
  0.178138	  0.085293	diff=0.0928447
 -4.068350	 -0.770008	diff=3.29834
 -1.584694	 -0.420941	diff=1.16375
 -0.127367	 -0.056918	diff=0.0704496
-10.473351	  7.499831	diff=17.9732
 -0.440467	 -0.131169	diff=0.309299
-12.615893	 -8.764244	diff=3.85165
  0.342949	 -0.212441	diff=0.55539
  local_diff=890.301
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000015	 -0.000009	diff=6.12308e-06
 -0.000013	 -0.000007	diff=5.21641e-06
 -0.031209	  0.002869	diff=0.0340782
  0.520124	 -0.058918	diff=0.579041
-310.936646	-392.372287	diff=81.4356
-460.921198	-245.666781	diff=215.254
 -0.000000	 -0.000000	diff=3.69266e-10
  0.000000	  0.000000	diff=3.38721e-10
  local_diff=297.303
# W_tgt_char{1}, [8 4]
 -0.000003	 -0.000003	diff=3.60829e-08
  0.000118	  0.000116	diff=1.15425e-06
 12.545995	 12.449965	diff=0.0960298
 -0.000070	 -0.000069	diff=6.86126e-07
 -0.000161	 -0.000163	diff=1.59318e-06
  0.000000	  0.000000	diff=3.37514e-11
  0.000000	 -0.000000	diff=6.15714e-14
  0.000000	  0.000000	diff=7.76109e-10
  0.000001	  0.000001	diff=8.69088e-09
 -0.000034	 -0.000034	diff=1.00091e-07
 -3.665844	 -3.674163	diff=0.00831913
  0.000020	  0.000020	diff=5.92616e-08
  0.000048	  0.000048	diff=1.39921e-07
 -0.000000	 -0.000000	diff=1.61966e-11
  0.000000	  0.000000	diff=1.81242e-14
  0.000000	  0.000000	diff=7.1076e-10
  0.000000	  0.000000	diff=2.71463e-11
 -0.000000	 -0.000000	diff=1.4567e-11
  0.000000	  0.000000	diff=8.43413e-36
  0.000000	 -0.000000	diff=2.03972e-16
  0.000000	  0.000000	diff=1.77575e-36
  0.000000	 -0.000000	diff=2.22293e-15
  0.000000	  0.000000	diff=8.55156e-20
 -0.000000	 -0.000000	diff=3.02591e-12
  0.000000	  0.000000	diff=1.12906e-15
  0.000000	 -0.000000	diff=1.44954e-18
  0.000000	 -0.000000	diff=1.63912e-16
  0.000000	 -0.000000	diff=3.23722e-21
  0.000000	 -0.000000	diff=4.76326e-20
  0.000000	 -0.000000	diff=6.10533e-15
  0.000000	  0.000000	diff=1.3613e-25
  0.000000	 -0.000000	diff=5.2384e-12
  local_diff=0.104353
# W_tgt_char{2}, [8 4]
 -0.216665	 -0.216711	diff=4.61113e-05
  0.415903	  0.415902	diff=1.49488e-06
  0.326521	  0.326484	diff=3.6256e-05
 -0.096975	 -0.096977	diff=2.18677e-06
  0.598958	  0.598981	diff=2.33323e-05
  0.601525	  0.601540	diff=1.56791e-05
  0.063503	  0.063524	diff=2.09388e-05
  1.182417	  1.182462	diff=4.43702e-05
 -0.000000	 -0.000000	diff=7.54968e-12
  0.000001	  0.000001	diff=2.93695e-11
  0.000001	  0.000001	diff=1.60041e-12
 -0.000000	 -0.000000	diff=3.41296e-11
  0.000001	  0.000001	diff=7.59788e-13
  0.000001	  0.000001	diff=1.52637e-11
  0.000000	  0.000000	diff=1.01313e-11
  0.000001	  0.000001	diff=1.57757e-11
 27.048472	 26.974598	diff=0.0738742
 35.504795	 35.539991	diff=0.0351958
-18.171906	-18.218614	diff=0.0467072
 -5.086976	 -5.087930	diff=0.000953664
 17.078469	 17.121031	diff=0.0425624
 35.771396	 35.792519	diff=0.0211226
 17.178260	 17.055280	diff=0.12298
 -3.589766	 -3.574491	diff=0.0152749
  5.642262	  5.644940	diff=0.00267768
 22.080644	 22.070538	diff=0.0101053
 -2.071759	 -2.071773	diff=1.48722e-05
-12.297743	-12.297532	diff=0.000210339
  1.229324	  1.235448	diff=0.0061244
 16.748472	 16.778803	diff=0.0303313
-18.374680	-18.384773	diff=0.0100932
  1.076233	  1.178810	diff=0.102578
  local_diff=0.520996
# W_tgt_char{3}, [8 4]
-45.977721	-45.929134	diff=0.0485866
  3.242322	  3.238136	diff=0.00418517
  3.393579	  3.395890	diff=0.00231064
 -0.732741	 -0.732136	diff=0.000604884
-67.992662	-67.964869	diff=0.0277928
-10.005714	 -9.996975	diff=0.00873978
 27.568272	 27.573371	diff=0.00509872
 21.079014	 21.049141	diff=0.0298729
-35.356415	-35.339197	diff=0.0172183
  2.860654	  2.857783	diff=0.00287116
  4.185711	  4.190441	diff=0.00472952
 -0.588113	 -0.587949	diff=0.000163381
-20.621470	-20.613182	diff=0.00828795
-13.424679	-13.447124	diff=0.0224447
-23.333041	-23.376103	diff=0.0430624
 21.723316	 21.698395	diff=0.0249209
 19.982056	 19.994177	diff=0.0121205
 12.912802	 12.893094	diff=0.0197075
 21.682700	 21.708475	diff=0.0257755
  0.770178	  0.770808	diff=0.000629887
 45.717195	 45.736337	diff=0.0191418
 25.000044	 25.021033	diff=0.0209889
106.850495	106.997148	diff=0.146653
 -9.429393	 -9.445775	diff=0.0163816
  6.871961	  6.876120	diff=0.00415914
 -2.545901	 -2.547593	diff=0.00169144
 -0.990271	 -0.989010	diff=0.00126179
 -0.415055	 -0.414996	diff=5.88759e-05
 15.271056	 15.268426	diff=0.00262982
 -9.359898	 -9.362332	diff=0.00243456
 27.894324	 27.935133	diff=0.0408093
 -5.945958	 -5.949007	diff=0.00304929
  local_diff=0.568382
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=8.42376e-10
 -0.000000	 -0.000000	diff=6.5697e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  2.739702	  2.735053	diff=0.00464957
 62.015261	 59.766951	diff=2.24831
  0.000001	  0.000001	diff=3.03558e-08
 -0.000000	 -0.000000	diff=3.87259e-09
 -0.000000	 -0.000000	diff=3.36058e-10
  0.000000	  0.000000	diff=3.97655e-12
  local_diff=2.25296
# W_h, [2 4]
-10.621276	-145.005889	diff=134.385
  5.850001	-122.361406	diff=128.211
  8.644132	170.988460	diff=162.344
 -5.676884	133.420672	diff=139.098
-11.038468	 82.000869	diff=93.0393
  2.624818	-112.953505	diff=115.578
  1.979655	 62.655613	diff=60.676
  0.154457	 65.720091	diff=65.5656
  local_diff=898.897
# W_soft, [5 2]
 -9.831373	 -9.841868	diff=0.0104952
 -0.037506	 -0.037775	diff=0.000268984
 -7.423825	 -7.423851	diff=2.61601e-05
 -1.014743	 -1.018057	diff=0.00331411
 18.335154	 18.321551	diff=0.0136029
 -4.193480	 -4.206446	diff=0.0129656
 -0.585552	 -0.586476	diff=0.00092402
 -7.516441	 -7.517209	diff=0.000768216
 -2.553731	 -2.557016	diff=0.0032845
 14.882311	 14.867146	diff=0.0151652
  local_diff=0.0608149
# W_soft_char, [5 2]
  2.787747	  2.780727	diff=0.00701983
-52.154790	-52.164020	diff=0.00922962
-10.575283	-10.582964	diff=0.00768097
 76.699509	 76.679051	diff=0.0204575
-16.703938	-16.712794	diff=0.0088563
  4.174122	  4.171344	diff=0.00277732
  7.384026	  7.382434	diff=0.00159202
 -3.393712	 -3.396551	diff=0.00283917
-10.411411	-10.412988	diff=0.00157748
  2.257448	  2.255761	diff=0.00168721
  local_diff=0.0637175
# Num params=404, abs_diff=11887.3
Elapsed time is 11.109352 seconds.
[?1l>