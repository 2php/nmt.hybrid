# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000010	  0.000010	diff=6.17714e-11
 -0.000011	 -0.000011	diff=6.72696e-11
  0.000004	  0.000004	diff=3.15016e-10
 -0.000003	 -0.000003	diff=2.69429e-10
  0.000000	  0.000000	diff=4.3928e-13
  0.000001	  0.000001	diff=4.75354e-12
  0.004421	  0.004421	diff=1.55788e-07
  0.006020	  0.006021	diff=9.30088e-08
 -0.000005	 -0.000005	diff=6.28422e-11
  0.000013	  0.000013	diff=1.74402e-11
 -0.000006	 -0.000006	diff=2.94658e-10
  0.000000	  0.000000	diff=4.27279e-11
 -0.000000	 -0.000000	diff=1.1015e-12
 -0.000001	 -0.000001	diff=1.29598e-12
 -0.000831	 -0.000831	diff=8.15894e-08
 -0.003179	 -0.003179	diff=4.09838e-08
 -0.000000	 -0.000000	diff=2.11932e-12
  0.000000	  0.000000	diff=2.29118e-13
 -0.000000	 -0.000000	diff=2.59559e-13
  0.000000	  0.000000	diff=4.41802e-15
  0.000000	  0.000000	diff=6.62351e-13
 -0.000000	 -0.000000	diff=4.75849e-13
 -0.000051	 -0.000051	diff=4.97827e-08
 -0.000075	 -0.000075	diff=2.70437e-11
  0.000000	  0.000000	diff=3.46346e-13
 -0.000000	 -0.000000	diff=5.79698e-13
  0.000000	  0.000000	diff=4.90412e-13
 -0.000000	 -0.000000	diff=2.13149e-13
 -0.000000	 -0.000000	diff=2.15859e-13
  0.000000	  0.000000	diff=1.96564e-14
  0.000012	  0.000012	diff=1.31192e-11
  0.000041	  0.000041	diff=3.99654e-08
  local_diff=4.62302e-07
# W_tgt{1}, [8 6]
 -0.000011	 -0.000011	diff=2.40903e-11
  0.000008	  0.000008	diff=6.29277e-11
 -0.000004	 -0.000004	diff=8.3275e-10
  0.000009	  0.000009	diff=2.96192e-10
  0.000000	  0.000000	diff=4.3047e-12
  0.000018	  0.000018	diff=2.80489e-13
 -0.003969	 -0.003969	diff=1.05323e-07
 -0.011719	 -0.011719	diff=3.27218e-08
 -0.000017	 -0.000017	diff=7.50905e-12
  0.000020	  0.000020	diff=3.55317e-11
 -0.000025	 -0.000025	diff=1.06332e-09
  0.000011	  0.000011	diff=1.28662e-09
 -0.000028	 -0.000028	diff=6.27872e-11
  0.000031	  0.000031	diff=9.20014e-12
 -0.008540	 -0.008540	diff=4.35927e-07
 -0.000826	 -0.000826	diff=3.14139e-07
 -0.000000	 -0.000000	diff=5.01594e-13
  0.000000	  0.000000	diff=5.78937e-13
 -0.000001	 -0.000001	diff=1.13911e-12
 -0.000000	 -0.000000	diff=3.4278e-13
 -0.000001	 -0.000001	diff=4.56117e-14
  0.000000	  0.000000	diff=3.65961e-13
 -0.000200	 -0.000200	diff=2.62442e-07
  0.000071	  0.000071	diff=1.39549e-08
  0.000000	  0.000000	diff=4.45994e-13
  0.000000	  0.000000	diff=8.10606e-13
  0.000000	  0.000000	diff=5.17207e-14
  0.000000	  0.000000	diff=1.96545e-13
  0.000000	  0.000000	diff=4.76632e-14
 -0.000000	 -0.000000	diff=2.93701e-13
  0.000123	  0.000123	diff=2.06469e-09
  0.000010	  0.000010	diff=1.85491e-07
 -0.000000	 -0.000000	diff=3.89233e-13
  0.000000	  0.000000	diff=2.29414e-13
 -0.000001	 -0.000001	diff=7.51087e-12
  0.000000	  0.000000	diff=1.06461e-12
 -0.000001	 -0.000001	diff=1.01553e-11
  0.000001	  0.000001	diff=5.14425e-13
 -0.000322	 -0.000321	diff=2.08661e-07
 -0.000175	 -0.000175	diff=2.39493e-08
  0.000000	  0.000000	diff=1.16091e-13
 -0.000000	 -0.000000	diff=4.31763e-13
  0.000001	  0.000001	diff=1.45715e-12
 -0.000000	 -0.000000	diff=6.29152e-13
  0.000000	  0.000000	diff=3.01951e-13
 -0.000000	 -0.000000	diff=4.29796e-13
  0.000170	  0.000170	diff=3.03361e-09
  0.000156	  0.000156	diff=2.24839e-07
  local_diff=1.81626e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001416	  0.001416	diff=2.24161e-07
  0.000149	  0.000148	diff=4.83014e-07
  0.000265	  0.000265	diff=1.04332e-07
  0.001956	  0.001955	diff=1.18718e-06
  local_diff=1.99869e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001049	  0.001049	diff=1.04602e-07
 -0.000958	 -0.000958	diff=6.36147e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003521	 -0.003520	diff=4.02644e-07
 -0.000193	 -0.000193	diff=2.0067e-07
 -0.004962	 -0.004962	diff=3.19252e-07
 -0.001412	 -0.001412	diff=3.428e-07
  local_diff=2.00611e-06
# W_soft, [5 2]
  0.007849	  0.007849	diff=6.5062e-08
  0.007849	  0.007849	diff=6.50646e-08
  0.004800	  0.004799	diff=6.50659e-08
 -0.013796	 -0.013797	diff=6.50577e-08
 -0.006701	 -0.006701	diff=6.50775e-08
 -0.002503	 -0.002503	diff=1.97754e-08
 -0.002503	 -0.002503	diff=1.97757e-08
 -0.004838	 -0.004839	diff=1.97772e-08
  0.007189	  0.007189	diff=1.97739e-08
  0.002656	  0.002656	diff=1.97791e-08
  local_diff=4.24209e-07
# Num params=110, abs_diff=6.70758e-06
Elapsed time is 0.842346 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.01201e-12
 -0.000000	 -0.000000	diff=6.35909e-13
  0.000000	  0.000000	diff=1.04485e-11
 -0.000000	 -0.000000	diff=1.67593e-12
  0.000001	  0.000001	diff=1.9472e-12
  0.000000	  0.000000	diff=1.72778e-13
 -0.000150	 -0.000150	diff=1.6814e-10
 -0.000020	 -0.000020	diff=2.66738e-10
 -0.000001	 -0.000001	diff=2.50322e-12
  0.000000	  0.000000	diff=9.02429e-13
 -0.000000	 -0.000000	diff=1.98496e-11
  0.000000	  0.000000	diff=2.57834e-12
 -0.000001	 -0.000001	diff=5.14255e-12
 -0.000000	 -0.000000	diff=1.14396e-12
  0.000218	  0.000218	diff=1.87396e-10
  0.000030	  0.000030	diff=5.61483e-10
 -0.000000	 -0.000000	diff=6.42337e-13
  0.000000	  0.000000	diff=4.63791e-13
 -0.000000	 -0.000000	diff=4.84313e-13
  0.000000	  0.000000	diff=7.00858e-13
 -0.000000	 -0.000000	diff=4.78397e-13
 -0.000000	 -0.000000	diff=1.0118e-13
  0.000004	  0.000004	diff=5.00007e-09
  0.000001	  0.000001	diff=5.07508e-12
  0.000000	  0.000000	diff=3.66703e-13
 -0.000000	 -0.000000	diff=4.97045e-14
  0.000000	  0.000000	diff=6.06628e-14
 -0.000000	 -0.000000	diff=8.31975e-13
  0.000000	  0.000000	diff=5.95507e-14
  0.000000	  0.000000	diff=5.59007e-13
 -0.000003	 -0.000003	diff=3.08146e-11
 -0.000001	 -0.000001	diff=5.66983e-10
  local_diff=6.84051e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=8.03802e-14
 -0.000000	 -0.000000	diff=9.53185e-13
 -0.000000	 -0.000000	diff=7.28831e-13
 -0.000000	 -0.000000	diff=3.31755e-14
  0.000000	  0.000000	diff=9.56569e-13
 -0.000000	 -0.000000	diff=8.66522e-14
  0.000154	  0.000154	diff=5.96133e-11
 -0.000141	 -0.000141	diff=8.25531e-11
  0.000000	  0.000000	diff=4.29653e-13
  0.000000	  0.000000	diff=3.05068e-13
  0.000000	  0.000000	diff=2.04698e-13
  0.000000	  0.000000	diff=1.31599e-13
 -0.000000	 -0.000000	diff=2.76807e-13
  0.000000	  0.000000	diff=1.29988e-13
 -0.000126	 -0.000126	diff=3.95108e-11
  0.000117	  0.000117	diff=5.44827e-11
 -0.000000	 -0.000000	diff=4.19572e-13
 -0.000000	 -0.000000	diff=2.81248e-13
 -0.000000	 -0.000000	diff=4.47843e-13
 -0.000000	 -0.000000	diff=1.26669e-13
  0.000000	  0.000000	diff=9.66914e-13
 -0.000000	 -0.000000	diff=6.50479e-13
  0.000003	  0.000003	diff=4.50443e-09
 -0.000003	 -0.000003	diff=4.91204e-14
  0.000000	  0.000000	diff=1.25299e-13
  0.000000	  0.000000	diff=7.31938e-13
  0.000000	  0.000000	diff=4.39996e-13
  0.000000	  0.000000	diff=2.79286e-13
 -0.000000	 -0.000000	diff=1.28328e-14
  0.000000	  0.000000	diff=1.31276e-12
 -0.000004	 -0.000004	diff=3.12506e-13
  0.000003	  0.000003	diff=4.67157e-09
  local_diff=9.42263e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.1358e-12
  0.000000	  0.000000	diff=7.17355e-13
 -0.000000	 -0.000000	diff=3.55204e-12
 -0.000000	 -0.000000	diff=2.5533e-12
 -0.000000	 -0.000000	diff=1.15237e-13
  0.000000	  0.000000	diff=8.5841e-13
  0.000075	  0.000075	diff=3.31281e-10
 -0.000089	 -0.000089	diff=6.88033e-10
  0.000000	  0.000000	diff=3.59578e-13
 -0.000000	 -0.000000	diff=3.93993e-13
  0.000000	  0.000000	diff=2.05753e-11
  0.000000	  0.000000	diff=1.09593e-11
  0.000000	  0.000000	diff=1.59798e-12
 -0.000000	 -0.000000	diff=8.16826e-13
 -0.000200	 -0.000200	diff=1.91575e-09
  0.000218	  0.000218	diff=1.40996e-09
 -0.000000	 -0.000000	diff=2.48619e-13
  0.000000	  0.000000	diff=6.71826e-13
  0.000000	  0.000000	diff=9.36701e-13
 -0.000000	 -0.000000	diff=2.57788e-13
  0.000000	  0.000000	diff=1.30817e-13
  0.000000	  0.000000	diff=4.0149e-15
 -0.000000	 -0.000000	diff=1.9846e-12
  0.000000	  0.000000	diff=7.72185e-15
  0.000000	  0.000000	diff=9.7026e-14
 -0.000000	 -0.000000	diff=1.07181e-13
 -0.000000	 -0.000000	diff=2.49916e-13
  0.000000	  0.000000	diff=3.32967e-13
 -0.000000	 -0.000000	diff=1.64263e-13
 -0.000000	 -0.000000	diff=3.16626e-13
  0.000000	  0.000000	diff=5.38418e-13
 -0.000000	 -0.000000	diff=5.78386e-12
  0.000000	  0.000000	diff=3.21581e-13
 -0.000000	 -0.000000	diff=2.1214e-13
  0.000000	  0.000000	diff=1.09172e-12
  0.000000	  0.000000	diff=6.37362e-13
  0.000000	  0.000000	diff=6.32383e-13
 -0.000000	 -0.000000	diff=3.52803e-13
 -0.000006	 -0.000006	diff=1.72576e-08
  0.000006	  0.000006	diff=2.70846e-10
 -0.000000	 -0.000000	diff=7.56398e-13
  0.000000	  0.000000	diff=1.32195e-12
 -0.000000	 -0.000000	diff=6.8749e-14
 -0.000000	 -0.000000	diff=1.47369e-12
 -0.000000	 -0.000000	diff=4.59041e-13
  0.000000	  0.000000	diff=3.97613e-13
  0.000003	  0.000003	diff=1.66925e-10
 -0.000003	 -0.000003	diff=4.75861e-09
  local_diff=2.68622e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=8.65635e-13
 -0.000000	 -0.000000	diff=4.34091e-13
 -0.000000	 -0.000000	diff=7.33809e-14
 -0.000000	 -0.000000	diff=1.18128e-12
 -0.000000	 -0.000000	diff=5.30703e-14
 -0.000000	 -0.000000	diff=1.62783e-13
  0.000182	  0.000182	diff=3.50528e-09
 -0.000127	 -0.000127	diff=2.63484e-09
  0.000000	  0.000000	diff=4.47805e-14
 -0.000000	 -0.000000	diff=2.77995e-14
 -0.000000	 -0.000000	diff=4.2504e-14
 -0.000000	 -0.000000	diff=8.06954e-13
 -0.000000	 -0.000000	diff=5.8054e-13
 -0.000000	 -0.000000	diff=2.58382e-13
  0.000015	  0.000015	diff=2.75182e-09
 -0.000013	 -0.000013	diff=1.13536e-09
  0.000000	  0.000000	diff=1.48656e-12
 -0.000000	 -0.000000	diff=5.3465e-13
 -0.000000	 -0.000000	diff=5.83813e-13
 -0.000000	 -0.000000	diff=8.1559e-14
 -0.000000	 -0.000000	diff=5.2296e-14
 -0.000000	 -0.000000	diff=2.16327e-13
  0.000011	  0.000011	diff=3.31133e-08
 -0.000008	 -0.000008	diff=3.27926e-10
 -0.000000	 -0.000000	diff=6.03095e-13
  0.000000	  0.000000	diff=3.68365e-13
  0.000000	  0.000000	diff=1.76702e-13
  0.000000	  0.000000	diff=2.50519e-13
  0.000000	  0.000000	diff=1.74047e-13
  0.000000	  0.000000	diff=6.5127e-13
 -0.000016	 -0.000016	diff=9.35584e-11
  0.000010	  0.000010	diff=1.98404e-08
  local_diff=6.34122e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000075	  0.000075	diff=2.82593e-08
 -0.000092	 -0.000092	diff=9.28177e-08
  0.000074	  0.000074	diff=2.53399e-08
 -0.000081	 -0.000081	diff=7.86173e-08
  local_diff=2.25034e-07
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000022	  0.000022	diff=6.25761e-08
 -0.000053	 -0.000053	diff=2.94624e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000070	 -0.000070	diff=9.6036e-08
 -0.000063	 -0.000063	diff=4.16344e-08
  0.000021	  0.000021	diff=4.15104e-08
 -0.000032	 -0.000032	diff=2.02925e-08
  local_diff=2.91512e-07
# W_soft, [5 2]
 -0.000086	 -0.000086	diff=8.19208e-12
 -0.000086	 -0.000086	diff=7.88968e-12
 -0.000024	 -0.000024	diff=8.03629e-12
  0.000187	  0.000187	diff=8.942e-12
  0.000009	  0.000009	diff=8.86197e-12
  0.000190	  0.000190	diff=3.24091e-11
  0.000190	  0.000190	diff=3.27182e-11
  0.000086	  0.000086	diff=3.28738e-11
 -0.000414	 -0.000414	diff=3.26647e-11
 -0.000051	 -0.000051	diff=3.27591e-11
  local_diff=2.05347e-10
# Num params=174, abs_diff=6.23289e-07
Elapsed time is 1.694656 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.70699e-13
  0.000000	  0.000000	diff=1.76517e-13
  0.000000	  0.000000	diff=1.4175e-11
  0.000000	  0.000000	diff=1.21093e-12
  0.000000	  0.000000	diff=2.94252e-12
  0.000000	  0.000000	diff=3.72169e-13
 -0.000088	 -0.000088	diff=9.05964e-10
  0.000004	  0.000004	diff=3.24596e-11
 -0.000000	 -0.000000	diff=1.47084e-12
  0.000000	  0.000000	diff=3.51307e-13
 -0.000000	 -0.000000	diff=2.88642e-11
  0.000000	  0.000000	diff=2.9091e-12
 -0.000000	 -0.000000	diff=4.0228e-12
 -0.000000	 -0.000000	diff=1.74188e-12
  0.000076	  0.000076	diff=1.09826e-09
  0.000034	  0.000034	diff=7.39404e-10
 -0.000000	 -0.000000	diff=5.59183e-13
  0.000000	  0.000000	diff=1.05866e-13
 -0.000000	 -0.000000	diff=1.89004e-13
  0.000000	  0.000000	diff=5.61954e-13
 -0.000000	 -0.000000	diff=1.62299e-13
 -0.000000	 -0.000000	diff=2.25475e-13
  0.000002	  0.000002	diff=4.92705e-09
  0.000000	  0.000000	diff=6.29919e-12
  0.000000	  0.000000	diff=1.48164e-12
 -0.000000	 -0.000000	diff=7.9407e-13
  0.000000	  0.000000	diff=9.11813e-14
 -0.000000	 -0.000000	diff=1.78877e-13
  0.000000	  0.000000	diff=1.18734e-13
  0.000000	  0.000000	diff=6.98045e-13
 -0.000002	 -0.000002	diff=3.65579e-11
 -0.000001	 -0.000001	diff=4.20082e-10
  local_diff=8.23016e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.39122e-13
 -0.000000	 -0.000000	diff=8.35316e-13
 -0.000000	 -0.000000	diff=7.53571e-13
 -0.000000	 -0.000000	diff=1.04244e-13
  0.000000	  0.000000	diff=7.26414e-15
 -0.000000	 -0.000000	diff=3.27244e-13
  0.000111	  0.000111	diff=7.47341e-11
 -0.000035	 -0.000035	diff=4.90506e-11
  0.000000	  0.000000	diff=3.64479e-13
  0.000000	  0.000000	diff=9.94459e-14
  0.000000	  0.000000	diff=9.29944e-13
  0.000000	  0.000000	diff=5.39092e-13
 -0.000000	 -0.000000	diff=1.08016e-13
  0.000000	  0.000000	diff=2.46041e-13
 -0.000163	 -0.000163	diff=7.90881e-11
  0.000135	  0.000135	diff=9.3633e-11
 -0.000000	 -0.000000	diff=1.15611e-13
 -0.000000	 -0.000000	diff=6.17457e-13
 -0.000000	 -0.000000	diff=2.26721e-13
 -0.000000	 -0.000000	diff=2.51084e-13
  0.000000	  0.000000	diff=7.79556e-13
 -0.000000	 -0.000000	diff=5.86092e-13
  0.000003	  0.000003	diff=4.91467e-09
 -0.000001	 -0.000001	diff=6.2867e-13
  0.000000	  0.000000	diff=1.39697e-13
  0.000000	  0.000000	diff=9.37538e-13
  0.000000	  0.000000	diff=4.67156e-14
  0.000000	  0.000000	diff=3.52655e-13
 -0.000000	 -0.000000	diff=2.00908e-13
  0.000000	  0.000000	diff=1.70998e-13
 -0.000004	 -0.000004	diff=8.47843e-13
  0.000002	  0.000002	diff=4.77479e-09
  local_diff=9.99663e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.59023e-13
  0.000000	  0.000000	diff=2.58292e-13
 -0.000000	 -0.000000	diff=3.58941e-12
 -0.000000	 -0.000000	diff=4.98908e-12
 -0.000000	 -0.000000	diff=1.00825e-12
  0.000000	  0.000000	diff=3.37876e-14
  0.000042	  0.000042	diff=2.90536e-10
 -0.000112	 -0.000112	diff=1.38789e-09
  0.000000	  0.000000	diff=5.45505e-13
 -0.000000	 -0.000000	diff=1.89052e-12
  0.000000	  0.000000	diff=2.94054e-11
  0.000000	  0.000000	diff=2.19001e-11
  0.000000	  0.000000	diff=1.73231e-12
 -0.000000	 -0.000000	diff=4.31294e-13
 -0.000158	 -0.000158	diff=2.53594e-09
  0.000233	  0.000233	diff=1.98497e-09
 -0.000000	 -0.000000	diff=2.98429e-13
  0.000000	  0.000000	diff=9.2267e-14
  0.000000	  0.000000	diff=3.69807e-13
 -0.000000	 -0.000000	diff=8.34184e-13
  0.000000	  0.000000	diff=9.33658e-13
  0.000000	  0.000000	diff=1.59363e-13
 -0.000000	 -0.000000	diff=1.21301e-12
  0.000000	  0.000000	diff=3.80376e-13
  0.000000	  0.000000	diff=1.52892e-13
 -0.000000	 -0.000000	diff=1.60575e-13
 -0.000000	 -0.000000	diff=5.20818e-13
  0.000000	  0.000000	diff=8.54171e-14
 -0.000000	 -0.000000	diff=1.17125e-12
  0.000000	  0.000000	diff=8.69386e-13
  0.000000	  0.000000	diff=1.38672e-13
 -0.000000	 -0.000000	diff=9.15253e-12
  0.000000	  0.000000	diff=4.43923e-13
 -0.000000	 -0.000000	diff=8.00218e-14
  0.000000	  0.000000	diff=1.96003e-13
  0.000000	  0.000000	diff=4.49582e-13
  0.000000	  0.000000	diff=2.4237e-13
 -0.000000	 -0.000000	diff=4.30746e-13
 -0.000004	 -0.000004	diff=1.16943e-08
  0.000005	  0.000005	diff=3.52506e-10
 -0.000000	 -0.000000	diff=9.6141e-14
  0.000000	  0.000000	diff=9.16034e-14
 -0.000000	 -0.000000	diff=5.0626e-14
 -0.000000	 -0.000000	diff=4.09526e-13
 -0.000000	 -0.000000	diff=1.91686e-13
  0.000000	  0.000000	diff=2.76682e-13
  0.000002	  0.000002	diff=1.09243e-10
 -0.000004	 -0.000004	diff=6.36185e-09
  local_diff=2.48032e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.01695e-12
 -0.000000	 -0.000000	diff=2.79277e-13
 -0.000000	 -0.000000	diff=4.14675e-13
 -0.000000	 -0.000000	diff=9.96538e-13
 -0.000000	 -0.000000	diff=1.59943e-13
 -0.000000	 -0.000000	diff=5.17265e-13
  0.000104	  0.000104	diff=2.3385e-09
  0.000012	  0.000012	diff=2.40086e-09
  0.000000	  0.000000	diff=2.45358e-13
 -0.000000	 -0.000000	diff=2.4845e-13
 -0.000000	 -0.000000	diff=5.49966e-13
 -0.000000	 -0.000000	diff=8.73966e-13
 -0.000000	 -0.000000	diff=1.00127e-13
 -0.000000	 -0.000000	diff=4.30607e-13
  0.000022	  0.000022	diff=4.77782e-09
 -0.000020	 -0.000020	diff=2.2462e-09
  0.000000	  0.000000	diff=1.13921e-13
  0.000000	  0.000000	diff=7.60806e-13
 -0.000000	 -0.000000	diff=1.66555e-13
 -0.000000	 -0.000000	diff=7.03774e-13
 -0.000000	 -0.000000	diff=5.38458e-13
 -0.000000	 -0.000000	diff=5.65232e-13
  0.000009	  0.000009	diff=2.80555e-08
 -0.000003	 -0.000003	diff=2.42601e-10
 -0.000000	 -0.000000	diff=1.4268e-12
  0.000000	  0.000000	diff=2.62208e-13
  0.000000	  0.000000	diff=3.31084e-13
  0.000000	  0.000000	diff=6.06037e-13
  0.000000	  0.000000	diff=2.41643e-13
  0.000000	  0.000000	diff=1.45481e-13
 -0.000015	 -0.000015	diff=7.61084e-11
  0.000005	  0.000005	diff=1.60776e-08
  local_diff=5.62269e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=1.72009e-08
 -0.000014	 -0.000014	diff=4.22729e-08
  0.000062	  0.000062	diff=2.32496e-08
 -0.000020	 -0.000020	diff=1.66708e-08
  local_diff=9.93941e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000107	  0.000107	diff=5.82653e-08
 -0.000042	 -0.000042	diff=2.80125e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=8.8686e-08
 -0.000040	 -0.000040	diff=2.87379e-08
  0.000068	  0.000068	diff=5.73714e-08
 -0.000034	 -0.000034	diff=2.63123e-08
  local_diff=2.87385e-07
# W_soft, [5 2]
 -0.000090	 -0.000090	diff=1.29046e-11
 -0.000090	 -0.000090	diff=1.25565e-11
 -0.000013	 -0.000013	diff=1.19156e-11
  0.000150	  0.000150	diff=1.24629e-11
  0.000042	  0.000042	diff=1.26882e-11
  0.000192	  0.000192	diff=4.55799e-11
  0.000192	  0.000192	diff=4.60538e-11
  0.000090	  0.000090	diff=4.51997e-11
 -0.000352	 -0.000352	diff=4.58334e-11
 -0.000122	 -0.000122	diff=4.54174e-11
  local_diff=2.90612e-10
# Num params=174, abs_diff=4.86327e-07
Elapsed time is 1.691053 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=7.30558e-13
 -0.000000	 -0.000000	diff=3.53748e-13
  0.000000	  0.000000	diff=8.56072e-14
 -0.000000	 -0.000000	diff=1.44345e-13
  0.000000	  0.000000	diff=3.78059e-13
  0.000000	  0.000000	diff=3.83548e-13
 -0.000003	 -0.000003	diff=3.37658e-11
 -0.000000	 -0.000000	diff=6.41082e-12
 -0.000000	 -0.000000	diff=9.21766e-13
  0.000000	  0.000000	diff=5.76396e-14
 -0.000000	 -0.000000	diff=4.87555e-13
  0.000000	  0.000000	diff=5.64176e-13
 -0.000000	 -0.000000	diff=4.97767e-13
 -0.000000	 -0.000000	diff=1.12706e-12
  0.000004	  0.000004	diff=4.04121e-11
  0.000002	  0.000002	diff=5.44747e-11
 -0.000000	 -0.000000	diff=5.42168e-13
  0.000000	  0.000000	diff=1.00129e-12
 -0.000000	 -0.000000	diff=2.59726e-13
  0.000000	  0.000000	diff=1.53424e-13
 -0.000000	 -0.000000	diff=1.38418e-13
 -0.000000	 -0.000000	diff=4.62475e-15
  0.000000	  0.000000	diff=9.0896e-11
  0.000000	  0.000000	diff=2.90327e-13
  0.000000	  0.000000	diff=9.04114e-13
 -0.000000	 -0.000000	diff=4.81035e-13
  0.000000	  0.000000	diff=2.44186e-13
 -0.000000	 -0.000000	diff=3.44238e-13
  0.000000	  0.000000	diff=2.17695e-13
  0.000000	  0.000000	diff=2.37221e-13
 -0.000000	 -0.000000	diff=6.16539e-13
 -0.000000	 -0.000000	diff=2.32895e-11
  local_diff=2.60416e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.7514e-13
 -0.000000	 -0.000000	diff=3.02987e-13
  0.000000	  0.000000	diff=4.46729e-13
 -0.000000	 -0.000000	diff=3.59273e-13
 -0.000000	 -0.000000	diff=8.70494e-13
 -0.000000	 -0.000000	diff=2.31972e-13
 -0.000002	 -0.000002	diff=2.82919e-13
 -0.000006	 -0.000006	diff=1.97732e-12
 -0.000000	 -0.000000	diff=3.3135e-13
  0.000000	  0.000000	diff=4.87588e-14
 -0.000000	 -0.000000	diff=2.27483e-13
  0.000000	  0.000000	diff=1.77047e-13
  0.000000	  0.000000	diff=6.6402e-13
  0.000000	  0.000000	diff=2.7252e-13
  0.000003	  0.000003	diff=1.94957e-13
  0.000007	  0.000007	diff=2.92656e-12
  0.000000	  0.000000	diff=1.02665e-12
 -0.000000	 -0.000000	diff=6.36301e-13
  0.000000	  0.000000	diff=5.55065e-13
 -0.000000	 -0.000000	diff=4.44166e-13
  0.000000	 -0.000000	diff=2.67035e-13
 -0.000000	 -0.000000	diff=3.52227e-13
 -0.000000	 -0.000000	diff=6.1593e-11
 -0.000000	 -0.000000	diff=1.19263e-12
 -0.000000	 -0.000000	diff=8.24502e-13
  0.000000	  0.000000	diff=4.84766e-13
 -0.000000	 -0.000000	diff=2.13293e-13
  0.000000	  0.000000	diff=3.1948e-13
  0.000000	  0.000000	diff=3.27929e-13
  0.000000	  0.000000	diff=1.1748e-12
  0.000000	  0.000000	diff=5.73847e-13
  0.000000	  0.000000	diff=1.78847e-10
  local_diff=2.58322e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.97487e-13
  0.000000	  0.000000	diff=3.86632e-15
 -0.000000	 -0.000000	diff=7.84031e-14
 -0.000000	 -0.000000	diff=1.45211e-12
  0.000000	  0.000000	diff=3.70046e-13
  0.000000	  0.000000	diff=1.50397e-13
  0.000000	  0.000000	diff=5.66907e-13
 -0.000007	 -0.000007	diff=4.81789e-11
 -0.000000	 -0.000000	diff=8.82906e-13
 -0.000000	 -0.000000	diff=9.15281e-13
  0.000000	  0.000000	diff=4.51061e-13
  0.000000	  0.000000	diff=1.41721e-12
 -0.000000	 -0.000000	diff=6.23775e-13
 -0.000000	 -0.000000	diff=6.99282e-13
 -0.000001	 -0.000001	diff=3.5108e-11
  0.000002	  0.000002	diff=1.66585e-10
  0.000000	  0.000000	diff=1.20105e-13
  0.000000	  0.000000	diff=1.79657e-13
  0.000000	 -0.000000	diff=2.43903e-13
  0.000000	  0.000000	diff=1.43603e-13
  0.000000	 -0.000000	diff=9.87865e-14
  0.000000	  0.000000	diff=3.11676e-13
  0.000000	  0.000000	diff=8.00094e-13
  0.000000	  0.000000	diff=1.29474e-12
  0.000000	  0.000000	diff=4.14207e-14
  0.000000	  0.000000	diff=8.14659e-14
  0.000000	 -0.000000	diff=8.17104e-14
  0.000000	  0.000000	diff=2.76634e-14
  0.000000	 -0.000000	diff=2.3187e-14
  0.000000	  0.000000	diff=8.63972e-14
  0.000000	  0.000000	diff=9.24202e-13
  0.000000	  0.000000	diff=1.01171e-12
 -0.000000	 -0.000000	diff=4.19603e-13
 -0.000000	 -0.000000	diff=1.06285e-13
  0.000000	  0.000000	diff=3.61493e-13
  0.000000	  0.000000	diff=3.43733e-14
 -0.000000	 -0.000000	diff=6.99114e-13
 -0.000000	 -0.000000	diff=1.18094e-13
 -0.000000	 -0.000000	diff=2.26806e-10
  0.000000	  0.000000	diff=3.42172e-11
 -0.000000	 -0.000000	diff=2.26795e-13
  0.000000	  0.000000	diff=7.51944e-13
 -0.000000	 -0.000000	diff=3.20696e-13
 -0.000000	 -0.000000	diff=1.34944e-12
  0.000000	  0.000000	diff=5.41022e-13
  0.000000	  0.000000	diff=7.34384e-14
  0.000000	  0.000000	diff=3.03559e-12
 -0.000000	 -0.000000	diff=2.02638e-10
  local_diff=7.3545e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.5559e-13
  0.000000	  0.000000	diff=3.18992e-13
  0.000000	  0.000000	diff=5.47194e-13
 -0.000000	 -0.000000	diff=9.14147e-13
  0.000000	  0.000000	diff=4.42876e-13
 -0.000000	 -0.000000	diff=3.93039e-13
 -0.000001	 -0.000001	diff=5.15393e-13
 -0.000004	 -0.000004	diff=5.63686e-12
  0.000000	  0.000000	diff=5.52836e-13
 -0.000000	 -0.000000	diff=1.91588e-13
 -0.000000	 -0.000000	diff=1.2746e-13
 -0.000000	 -0.000000	diff=2.92164e-13
 -0.000000	 -0.000000	diff=5.41141e-13
 -0.000000	 -0.000000	diff=2.09824e-14
 -0.000001	 -0.000001	diff=2.46439e-13
 -0.000002	 -0.000002	diff=5.36453e-13
 -0.000000	 -0.000000	diff=5.33346e-13
  0.000000	 -0.000000	diff=8.32935e-13
  0.000000	  0.000000	diff=8.62117e-13
 -0.000000	 -0.000000	diff=1.10782e-13
  0.000000	  0.000000	diff=2.54097e-13
 -0.000000	 -0.000000	diff=1.85759e-13
 -0.000000	 -0.000000	diff=4.1172e-10
 -0.000000	 -0.000000	diff=1.92156e-11
  0.000000	  0.000000	diff=4.67402e-13
  0.000000	  0.000000	diff=5.11687e-14
 -0.000000	 -0.000000	diff=2.95164e-13
  0.000000	  0.000000	diff=1.34745e-12
 -0.000000	 -0.000000	diff=1.36341e-13
  0.000000	  0.000000	diff=5.12304e-13
  0.000000	  0.000000	diff=2.59125e-12
  0.000000	  0.000000	diff=8.46193e-10
  local_diff=1.29684e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=6.29923e-10
 -0.000001	 -0.000001	diff=7.67336e-10
  0.000001	  0.000001	diff=6.90255e-10
 -0.000000	 -0.000000	diff=1.07011e-09
  local_diff=3.15762e-09
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=6.89482e-10
 -0.000000	 -0.000000	diff=8.65476e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000007	 -0.000007	diff=2.33954e-09
 -0.000001	 -0.000001	diff=6.92286e-10
 -0.000009	 -0.000009	diff=1.1099e-09
 -0.000000	 -0.000000	diff=2.59277e-10
  local_diff=5.17703e-09
# W_h, [2 4]
  0.000000	  0.000000	diff=2.03784e-12
 -0.000004	 -0.000004	diff=1.86989e-12
  0.000000	  0.000000	diff=2.16946e-12
  0.000004	  0.000004	diff=1.29881e-12
 -0.000003	 -0.000003	diff=8.35499e-12
  0.000001	  0.000001	diff=2.41188e-12
  0.000011	  0.000011	diff=8.07261e-11
 -0.000001	 -0.000001	diff=3.27002e-11
  local_diff=1.31569e-10
# W_soft, [5 2]
  0.000031	  0.000031	diff=1.22578e-12
  0.000031	  0.000031	diff=1.50155e-12
 -0.000005	 -0.000005	diff=2.14331e-12
 -0.000037	 -0.000037	diff=1.86112e-12
 -0.000020	 -0.000020	diff=1.79475e-12
  0.000024	  0.000024	diff=1.45646e-12
  0.000024	  0.000024	diff=1.02927e-12
 -0.000009	 -0.000009	diff=8.32395e-13
 -0.000027	 -0.000027	diff=1.32863e-12
 -0.000012	 -0.000012	diff=1.74813e-12
  local_diff=1.49214e-11
# Num params=182, abs_diff=1.10322e-08
Elapsed time is 2.421460 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.31621e-12
  0.000000	  0.000000	diff=5.52343e-13
  0.000000	  0.000000	diff=9.34988e-13
  0.000000	  0.000000	diff=4.50825e-13
  0.000000	  0.000000	diff=3.72512e-13
  0.000000	  0.000000	diff=1.98733e-13
 -0.000011	 -0.000011	diff=8.84253e-11
  0.000007	  0.000007	diff=8.7564e-11
 -0.000000	 -0.000000	diff=2.03204e-13
 -0.000000	 -0.000000	diff=1.03148e-12
 -0.000000	 -0.000000	diff=7.38361e-13
 -0.000000	 -0.000000	diff=1.78631e-12
 -0.000000	 -0.000000	diff=2.61349e-13
 -0.000000	 -0.000000	diff=3.06462e-13
  0.000016	  0.000016	diff=1.94511e-10
 -0.000015	 -0.000015	diff=2.57379e-10
 -0.000000	 -0.000000	diff=3.34199e-13
 -0.000000	 -0.000000	diff=7.65688e-13
 -0.000000	 -0.000000	diff=3.31081e-14
 -0.000000	 -0.000000	diff=6.6221e-13
 -0.000000	 -0.000000	diff=3.27686e-13
  0.000000	  0.000000	diff=8.45683e-14
  0.000000	  0.000000	diff=1.03373e-10
 -0.000000	 -0.000000	diff=8.36996e-13
  0.000000	  0.000000	diff=1.29982e-12
  0.000000	  0.000000	diff=2.74183e-13
  0.000000	  0.000000	diff=3.98802e-14
  0.000000	  0.000000	diff=2.93106e-13
  0.000000	  0.000000	diff=3.41689e-13
  0.000000	  0.000000	diff=2.37731e-13
 -0.000000	 -0.000000	diff=2.79537e-13
  0.000000	  0.000000	diff=3.90692e-10
  local_diff=1.13591e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.03599e-13
  0.000000	  0.000000	diff=5.17043e-13
 -0.000000	 -0.000000	diff=5.29157e-13
  0.000000	  0.000000	diff=4.75126e-13
 -0.000000	 -0.000000	diff=1.037e-12
 -0.000000	 -0.000000	diff=5.83128e-14
  0.000034	  0.000034	diff=9.90651e-12
  0.000007	  0.000007	diff=6.08391e-12
  0.000000	  0.000000	diff=3.49285e-13
 -0.000000	 -0.000000	diff=6.67091e-13
  0.000000	  0.000000	diff=5.39419e-13
 -0.000000	 -0.000000	diff=4.29655e-13
  0.000000	  0.000000	diff=1.21428e-13
  0.000000	  0.000000	diff=2.00178e-13
 -0.000039	 -0.000039	diff=8.96773e-12
 -0.000008	 -0.000008	diff=5.56894e-12
 -0.000000	 -0.000000	diff=1.21721e-12
  0.000000	  0.000000	diff=1.19084e-12
 -0.000000	 -0.000000	diff=4.70931e-13
  0.000000	  0.000000	diff=2.05496e-13
 -0.000000	 -0.000000	diff=1.17678e-12
 -0.000000	 -0.000000	diff=2.47211e-13
  0.000001	  0.000001	diff=3.98049e-10
  0.000000	  0.000000	diff=1.0367e-13
  0.000000	  0.000000	diff=1.08783e-12
 -0.000000	 -0.000000	diff=7.97024e-14
  0.000000	  0.000000	diff=4.48404e-13
 -0.000000	 -0.000000	diff=3.00847e-13
  0.000000	  0.000000	diff=6.25214e-13
  0.000000	  0.000000	diff=2.24392e-13
 -0.000001	 -0.000001	diff=2.11553e-13
 -0.000000	 -0.000000	diff=1.73813e-10
  local_diff=6.15407e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.69408e-13
 -0.000000	 -0.000000	diff=3.54196e-13
 -0.000000	 -0.000000	diff=9.29245e-13
  0.000000	  0.000000	diff=5.75577e-13
 -0.000000	 -0.000000	diff=6.72091e-14
 -0.000000	 -0.000000	diff=4.00273e-13
  0.000008	  0.000008	diff=3.87779e-11
  0.000009	  0.000009	diff=5.28238e-11
  0.000000	  0.000000	diff=8.30622e-13
  0.000000	  0.000000	diff=6.64333e-13
  0.000000	  0.000000	diff=2.03377e-12
 -0.000000	 -0.000000	diff=2.54673e-12
  0.000000	  0.000000	diff=4.05248e-13
  0.000000	  0.000000	diff=4.07635e-13
 -0.000011	 -0.000011	diff=1.48571e-10
 -0.000016	 -0.000016	diff=1.13949e-07
  0.000000	 -0.000000	diff=9.2997e-13
  0.000000	 -0.000000	diff=1.30477e-13
  0.000000	  0.000000	diff=9.94296e-13
  0.000000	 -0.000000	diff=1.16394e-13
  0.000000	  0.000000	diff=6.93982e-14
  0.000000	 -0.000000	diff=9.2571e-13
 -0.000000	 -0.000000	diff=1.7322e-14
 -0.000000	 -0.000000	diff=5.19932e-13
  0.000000	  0.000000	diff=7.9129e-15
  0.000000	 -0.000000	diff=4.87123e-15
 -0.000000	 -0.000000	diff=6.03213e-13
  0.000000	  0.000000	diff=6.35027e-13
  0.000000	 -0.000000	diff=9.33646e-14
  0.000000	  0.000000	diff=6.0571e-14
 -0.000000	 -0.000000	diff=1.33303e-12
 -0.000000	 -0.000000	diff=9.28898e-14
  0.000000	  0.000000	diff=5.3017e-13
  0.000000	  0.000000	diff=5.80599e-13
  0.000000	  0.000000	diff=7.84909e-13
 -0.000000	 -0.000000	diff=5.71754e-13
  0.000000	  0.000000	diff=8.22481e-13
 -0.000000	 -0.000000	diff=2.4971e-13
 -0.000001	 -0.000001	diff=1.4325e-09
 -0.000001	 -0.000001	diff=1.32523e-11
 -0.000000	 -0.000000	diff=6.48839e-13
 -0.000000	 -0.000000	diff=3.11391e-13
 -0.000000	 -0.000000	diff=3.6093e-14
  0.000000	  0.000000	diff=2.43318e-13
 -0.000000	 -0.000000	diff=3.64625e-13
  0.000000	  0.000000	diff=5.21646e-14
  0.000000	  0.000000	diff=9.16542e-12
  0.000001	  0.000001	diff=1.29954e-09
  local_diff=1.16965e-07
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.13942e-12
 -0.000000	 -0.000000	diff=7.13161e-13
 -0.000000	 -0.000000	diff=9.3051e-13
  0.000000	  0.000000	diff=1.00736e-12
 -0.000000	 -0.000000	diff=3.93491e-13
  0.000000	  0.000000	diff=1.80987e-13
  0.000032	  0.000032	diff=2.59374e-11
  0.000012	  0.000012	diff=8.02837e-12
  0.000000	  0.000000	diff=7.17968e-13
  0.000000	  0.000000	diff=1.41022e-13
 -0.000000	 -0.000000	diff=9.14003e-13
  0.000000	  0.000000	diff=1.83987e-13
 -0.000000	 -0.000000	diff=1.0263e-12
  0.000000	  0.000000	diff=7.45756e-13
 -0.000005	 -0.000005	diff=5.90308e-11
 -0.000002	 -0.000002	diff=7.37449e-12
  0.000000	  0.000000	diff=1.03869e-12
 -0.000000	 -0.000000	diff=7.83274e-13
 -0.000000	 -0.000000	diff=6.64925e-13
  0.000000	  0.000000	diff=1.02934e-13
 -0.000000	 -0.000000	diff=4.27355e-13
  0.000000	  0.000000	diff=7.87749e-13
  0.000001	  0.000001	diff=4.32714e-09
  0.000001	  0.000001	diff=1.53376e-11
 -0.000000	 -0.000000	diff=8.76852e-14
  0.000000	  0.000000	diff=4.95516e-13
  0.000000	  0.000000	diff=9.04981e-14
 -0.000000	 -0.000000	diff=5.61283e-13
  0.000000	  0.000000	diff=3.56602e-13
 -0.000000	 -0.000000	diff=6.54929e-14
 -0.000002	 -0.000002	diff=8.23861e-12
 -0.000001	 -0.000001	diff=2.08975e-09
  local_diff=6.55439e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=3.9544e-09
 -0.000017	 -0.000017	diff=1.69924e-08
  0.000007	  0.000007	diff=4.10764e-09
 -0.000015	 -0.000015	diff=1.58593e-08
  local_diff=4.09138e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.1248e-09
 -0.000003	 -0.000003	diff=2.18218e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.7246e-09
 -0.000002	 -0.000002	diff=1.66293e-09
 -0.000017	 -0.000017	diff=4.92777e-09
 -0.000001	 -0.000001	diff=1.11169e-09
  local_diff=1.5734e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=4.06858e-13
  0.000000	 -0.000000	diff=2.55439e-13
 -0.000000	 -0.000000	diff=3.45152e-14
  0.000000	  0.000000	diff=1.41914e-13
  local_diff=8.38726e-13
# v_pos, [1 2]
 -0.000000	 -0.000000	diff=7.59412e-13
 -0.000000	 -0.000000	diff=7.73219e-13
  local_diff=1.53263e-12
# W_h, [2 4]
  0.000023	  0.000023	diff=7.69881e-13
  0.000008	  0.000008	diff=1.07702e-13
 -0.000029	 -0.000029	diff=3.00442e-13
 -0.000010	 -0.000010	diff=1.55489e-14
  0.000013	  0.000013	diff=2.43289e-11
  0.000006	  0.000006	diff=2.95409e-13
 -0.000026	 -0.000026	diff=2.0875e-10
 -0.000014	 -0.000014	diff=1.84212e-11
  local_diff=2.52989e-10
# W_soft, [5 2]
 -0.000019	 -0.000019	diff=1.75008e-14
 -0.000019	 -0.000019	diff=5.77963e-13
  0.000008	  0.000008	diff=1.73708e-13
  0.000010	  0.000010	diff=1.36757e-13
  0.000020	  0.000020	diff=5.50159e-13
  0.000020	  0.000020	diff=2.72884e-13
  0.000020	  0.000020	diff=3.89366e-13
 -0.000005	 -0.000005	diff=5.23371e-13
 -0.000012	 -0.000012	diff=1.02778e-12
 -0.000022	 -0.000022	diff=8.17765e-14
  local_diff=3.75127e-12
# Num params=188, abs_diff=1.82177e-07
Elapsed time is 3.424701 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.2309e-12
 -0.000000	 -0.000000	diff=1.57639e-13
  0.000000	  0.000000	diff=2.6477e-12
 -0.000000	 -0.000000	diff=2.32505e-13
  0.000000	  0.000000	diff=1.02203e-13
  0.000000	  0.000000	diff=9.59383e-13
 -0.000019	 -0.000019	diff=3.89113e-11
 -0.000002	 -0.000002	diff=2.97361e-11
 -0.000000	 -0.000000	diff=1.7536e-13
  0.000000	  0.000000	diff=3.94897e-13
 -0.000000	 -0.000000	diff=1.49506e-12
  0.000000	  0.000000	diff=1.38769e-12
 -0.000000	 -0.000000	diff=4.84221e-13
 -0.000000	 -0.000000	diff=9.87191e-13
  0.000027	  0.000027	diff=8.60279e-11
  0.000006	  0.000006	diff=1.4218e-10
 -0.000000	 -0.000000	diff=1.0081e-12
  0.000000	  0.000000	diff=2.09958e-13
 -0.000000	 -0.000000	diff=1.24091e-12
  0.000000	  0.000000	diff=7.12224e-13
 -0.000000	 -0.000000	diff=9.345e-13
 -0.000000	 -0.000000	diff=1.5165e-13
  0.000000	  0.000000	diff=4.90604e-10
  0.000000	  0.000000	diff=5.52801e-13
  0.000000	  0.000000	diff=1.13917e-13
 -0.000000	 -0.000000	diff=2.69282e-13
  0.000000	  0.000000	diff=8.53703e-13
 -0.000000	 -0.000000	diff=7.33568e-13
  0.000000	  0.000000	diff=3.90127e-13
  0.000000	  0.000000	diff=8.9383e-13
 -0.000000	 -0.000000	diff=2.07015e-12
 -0.000000	 -0.000000	diff=2.18159e-10
  local_diff=1.02601e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=7.99871e-13
 -0.000000	 -0.000000	diff=6.88909e-13
  0.000000	  0.000000	diff=2.3206e-13
 -0.000000	 -0.000000	diff=9.26583e-13
 -0.000000	 -0.000000	diff=4.717e-13
 -0.000000	 -0.000000	diff=3.08333e-13
 -0.000011	 -0.000011	diff=5.30776e-12
 -0.000031	 -0.000031	diff=2.68974e-12
 -0.000000	 -0.000000	diff=4.46151e-13
  0.000000	  0.000000	diff=4.27714e-13
 -0.000000	 -0.000000	diff=6.04165e-13
  0.000000	  0.000000	diff=1.06084e-12
  0.000000	  0.000000	diff=5.77611e-13
  0.000000	  0.000000	diff=1.54805e-12
  0.000012	  0.000012	diff=3.85542e-12
  0.000035	  0.000035	diff=4.97097e-14
  0.000000	  0.000000	diff=8.23883e-13
 -0.000000	 -0.000000	diff=7.82645e-13
  0.000000	  0.000000	diff=4.80994e-13
 -0.000000	 -0.000000	diff=5.45734e-13
 -0.000000	 -0.000000	diff=3.47792e-13
 -0.000000	 -0.000000	diff=9.6984e-13
 -0.000000	 -0.000000	diff=3.03965e-10
 -0.000001	 -0.000001	diff=4.11468e-14
 -0.000000	 -0.000000	diff=3.6524e-13
  0.000000	  0.000000	diff=7.98009e-14
 -0.000000	 -0.000000	diff=1.48163e-13
  0.000000	  0.000000	diff=9.56211e-13
  0.000000	  0.000000	diff=1.572e-12
  0.000000	  0.000000	diff=6.76652e-13
  0.000000	  0.000000	diff=1.21539e-13
  0.000001	  0.000001	diff=7.32265e-10
  local_diff=1.06414e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.48229e-13
  0.000000	  0.000000	diff=1.05382e-12
  0.000000	  0.000000	diff=7.17694e-14
 -0.000000	 -0.000000	diff=2.89912e-13
  0.000000	  0.000000	diff=4.59649e-13
  0.000000	  0.000000	diff=1.47605e-12
 -0.000004	 -0.000004	diff=3.06655e-11
 -0.000014	 -0.000014	diff=8.67397e-11
 -0.000000	 -0.000000	diff=1.11918e-12
 -0.000000	 -0.000000	diff=8.24279e-13
 -0.000000	 -0.000000	diff=9.06094e-13
  0.000000	  0.000000	diff=6.71648e-12
 -0.000000	 -0.000000	diff=3.46381e-13
 -0.000000	 -0.000000	diff=8.78578e-13
  0.000011	  0.000011	diff=1.8881e-10
  0.000051	  0.000051	diff=5.86157e-11
 -0.000000	 -0.000000	diff=1.17611e-12
  0.000000	 -0.000000	diff=4.17005e-13
  0.000000	  0.000000	diff=9.44246e-13
  0.000000	 -0.000000	diff=6.80654e-14
  0.000000	  0.000000	diff=8.41557e-13
 -0.000000	 -0.000000	diff=9.03374e-13
 -0.000000	 -0.000000	diff=4.63123e-13
 -0.000000	 -0.000000	diff=3.29304e-13
  0.000000	 -0.000000	diff=3.45388e-14
  0.000000	 -0.000000	diff=8.78721e-14
  0.000000	 -0.000000	diff=7.18203e-15
  0.000000	  0.000000	diff=5.05752e-14
  0.000000	 -0.000000	diff=3.69317e-14
  0.000000	 -0.000000	diff=7.55868e-13
 -0.000000	 -0.000000	diff=2.47048e-13
 -0.000000	 -0.000000	diff=1.01103e-12
 -0.000000	 -0.000000	diff=5.27165e-13
 -0.000000	 -0.000000	diff=6.87187e-13
 -0.000000	 -0.000000	diff=8.28824e-13
  0.000000	  0.000000	diff=5.24819e-13
 -0.000000	 -0.000000	diff=1.0098e-12
  0.000000	  0.000000	diff=1.21192e-12
  0.000000	  0.000000	diff=7.23633e-10
  0.000001	  0.000001	diff=8.15818e-11
  0.000000	  0.000000	diff=1.7469e-13
  0.000000	  0.000000	diff=1.32867e-12
  0.000000	  0.000000	diff=3.06473e-13
 -0.000000	 -0.000000	diff=4.38738e-13
  0.000000	  0.000000	diff=6.81803e-14
 -0.000000	 -0.000000	diff=1.40311e-13
 -0.000000	 -0.000000	diff=5.61944e-12
 -0.000001	 -0.000001	diff=2.08168e-09
  local_diff=3.28646e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=5.9455e-13
  0.000000	  0.000000	diff=1.07781e-12
  0.000000	  0.000000	diff=1.29619e-12
 -0.000000	 -0.000000	diff=4.74204e-15
  0.000000	  0.000000	diff=8.94596e-13
 -0.000000	 -0.000000	diff=3.23382e-13
 -0.000013	 -0.000013	diff=1.93341e-11
 -0.000008	 -0.000008	diff=2.81251e-11
 -0.000000	 -0.000000	diff=1.06933e-13
 -0.000000	 -0.000000	diff=2.4917e-13
  0.000000	  0.000000	diff=2.26123e-13
  0.000000	  0.000000	diff=8.65334e-13
 -0.000000	 -0.000000	diff=1.12239e-12
  0.000000	  0.000000	diff=5.88617e-13
 -0.000001	 -0.000001	diff=2.42624e-11
  0.000001	  0.000001	diff=5.92268e-12
 -0.000000	 -0.000000	diff=8.08888e-13
  0.000000	  0.000000	diff=1.01681e-12
  0.000000	  0.000000	diff=1.02848e-12
 -0.000000	 -0.000000	diff=1.06918e-12
  0.000000	  0.000000	diff=4.19007e-13
 -0.000000	 -0.000000	diff=1.02074e-12
 -0.000001	 -0.000001	diff=2.01893e-09
 -0.000001	 -0.000001	diff=5.63943e-11
  0.000000	  0.000000	diff=1.04435e-12
 -0.000000	 -0.000000	diff=1.19681e-13
 -0.000000	 -0.000000	diff=4.80025e-14
  0.000000	  0.000000	diff=9.20859e-13
 -0.000000	 -0.000000	diff=1.50122e-13
  0.000000	  0.000000	diff=2.09358e-13
  0.000001	  0.000001	diff=5.87079e-12
  0.000001	  0.000001	diff=4.28731e-09
  local_diff=6.46135e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000010	  0.000010	diff=3.91357e-09
 -0.000012	 -0.000012	diff=1.04559e-08
  0.000009	  0.000009	diff=3.59209e-09
 -0.000006	 -0.000006	diff=6.42968e-09
  local_diff=2.43913e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000030	  0.000030	diff=1.6923e-09
  0.000002	  0.000002	diff=1.91118e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000044	  0.000044	diff=7.94871e-09
  0.000001	  0.000001	diff=1.67169e-09
  0.000026	  0.000026	diff=1.78527e-09
  0.000001	  0.000001	diff=9.93849e-10
  local_diff=1.6003e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.91363e-15
  0.000000	 -0.000000	diff=2.33469e-15
  0.000000	 -0.000000	diff=2.46117e-15
  0.000000	  0.000000	diff=3.01129e-15
  local_diff=9.72078e-15
# W_h, [2 4]
 -0.000030	 -0.000030	diff=4.56634e-13
 -0.000036	 -0.000036	diff=1.47777e-12
  0.000038	  0.000038	diff=1.11086e-12
  0.000045	  0.000045	diff=1.31355e-12
 -0.000009	 -0.000009	diff=1.6458e-11
 -0.000011	 -0.000011	diff=1.33404e-11
  0.000013	  0.000013	diff=1.80711e-10
  0.000022	  0.000022	diff=1.68781e-10
  local_diff=3.83649e-10
# W_soft, [5 2]
  0.000028	  0.000028	diff=7.23507e-13
  0.000028	  0.000028	diff=6.15663e-14
  0.000001	  0.000001	diff=3.93677e-13
 -0.000038	 -0.000038	diff=4.57176e-13
 -0.000020	 -0.000020	diff=4.95701e-13
  0.000003	  0.000003	diff=7.69384e-13
  0.000003	  0.000003	diff=1.2449e-12
 -0.000003	 -0.000003	diff=2.56793e-13
 -0.000001	 -0.000001	diff=4.67095e-14
 -0.000001	 -0.000001	diff=8.03285e-13
  local_diff=5.2527e-12
# Num params=186, abs_diff=5.26211e-08
Elapsed time is 2.864988 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=5.40697e-13
  0.000000	  0.000000	diff=6.18138e-13
  0.000000	  0.000000	diff=7.20277e-13
  0.000000	  0.000000	diff=7.03089e-13
  0.000000	  0.000000	diff=4.82951e-13
  0.000000	  0.000000	diff=3.75894e-13
 -0.000025	 -0.000025	diff=2.27635e-11
  0.000009	  0.000009	diff=1.11344e-10
 -0.000000	 -0.000000	diff=7.04633e-13
 -0.000000	 -0.000000	diff=7.91751e-15
 -0.000000	 -0.000000	diff=1.60735e-12
 -0.000000	 -0.000000	diff=2.05998e-12
 -0.000000	 -0.000000	diff=1.34315e-12
 -0.000000	 -0.000000	diff=5.18732e-13
  0.000036	  0.000036	diff=4.92781e-11
 -0.000019	 -0.000019	diff=3.30245e-10
 -0.000000	 -0.000000	diff=5.25377e-13
 -0.000000	 -0.000000	diff=4.63394e-13
 -0.000000	 -0.000000	diff=1.3933e-13
 -0.000000	 -0.000000	diff=1.07395e-12
 -0.000000	 -0.000000	diff=1.94008e-13
 -0.000000	 -0.000000	diff=1.21374e-13
  0.000000	  0.000000	diff=2.17339e-10
 -0.000000	 -0.000000	diff=4.86716e-13
  0.000000	  0.000000	diff=6.48939e-13
  0.000000	  0.000000	diff=4.74796e-13
  0.000000	  0.000000	diff=4.56167e-14
  0.000000	  0.000000	diff=1.74365e-14
  0.000000	  0.000000	diff=1.52424e-12
  0.000000	  0.000000	diff=6.82098e-13
 -0.000000	 -0.000000	diff=9.03721e-13
  0.000000	  0.000000	diff=4.54071e-10
  local_diff=1.20202e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.05154e-13
  0.000000	  0.000000	diff=7.75175e-13
 -0.000000	 -0.000000	diff=1.18732e-12
  0.000000	  0.000000	diff=9.61231e-13
 -0.000000	 -0.000000	diff=1.09592e-13
 -0.000000	 -0.000000	diff=4.73532e-13
  0.000054	  0.000054	diff=2.06052e-12
  0.000007	  0.000007	diff=5.09863e-12
  0.000000	  0.000000	diff=1.48051e-13
 -0.000000	 -0.000000	diff=7.16361e-13
  0.000000	  0.000000	diff=6.06142e-13
 -0.000000	 -0.000000	diff=4.59178e-14
  0.000000	  0.000000	diff=6.18243e-14
  0.000000	  0.000000	diff=1.10579e-13
 -0.000063	 -0.000063	diff=1.8987e-12
 -0.000007	 -0.000007	diff=5.17418e-12
 -0.000000	 -0.000000	diff=2.07554e-13
  0.000000	  0.000000	diff=1.09812e-12
 -0.000000	 -0.000000	diff=4.49226e-13
  0.000000	  0.000000	diff=1.68916e-13
 -0.000000	 -0.000000	diff=4.13639e-13
 -0.000000	 -0.000000	diff=1.3831e-12
  0.000001	  0.000001	diff=7.87117e-10
  0.000000	  0.000000	diff=2.91306e-13
  0.000000	  0.000000	diff=4.01329e-13
 -0.000000	 -0.000000	diff=1.39308e-13
  0.000000	  0.000000	diff=4.08373e-13
 -0.000000	 -0.000000	diff=2.69857e-13
  0.000000	  0.000000	diff=4.03687e-13
  0.000000	  0.000000	diff=1.95762e-13
 -0.000001	 -0.000001	diff=1.25012e-12
 -0.000000	 -0.000000	diff=1.75835e-10
  local_diff=9.89566e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.07141e-13
 -0.000000	 -0.000000	diff=6.33061e-13
 -0.000000	 -0.000000	diff=2.33595e-13
  0.000000	  0.000000	diff=5.29131e-13
 -0.000000	 -0.000000	diff=3.2592e-14
 -0.000000	 -0.000000	diff=6.72325e-13
  0.000008	  0.000008	diff=3.95013e-11
  0.000009	  0.000009	diff=5.22489e-11
  0.000000	  0.000000	diff=6.11253e-13
  0.000000	  0.000000	diff=2.59648e-13
  0.000000	  0.000000	diff=2.03292e-12
 -0.000000	 -0.000000	diff=2.64183e-12
  0.000000	  0.000000	diff=1.09764e-12
  0.000000	  0.000000	diff=7.40188e-14
 -0.000011	 -0.000011	diff=1.48201e-10
 -0.000016	 -0.000016	diff=1.51705e-11
  0.000000	 -0.000000	diff=6.37402e-13
  0.000000	 -0.000000	diff=3.46665e-13
  0.000000	  0.000000	diff=2.96721e-13
  0.000000	 -0.000000	diff=7.41248e-14
  0.000000	  0.000000	diff=6.17827e-14
  0.000000	 -0.000000	diff=3.75456e-13
 -0.000000	 -0.000000	diff=1.22097e-12
 -0.000000	 -0.000000	diff=2.38259e-14
  0.000000	  0.000000	diff=2.28325e-13
  0.000000	  0.000000	diff=6.53023e-14
  0.000000	 -0.000000	diff=4.62652e-13
  0.000000	  0.000000	diff=2.62421e-15
  0.000000	 -0.000000	diff=2.22004e-13
  0.000000	  0.000000	diff=6.22389e-14
  0.000000	  0.000000	diff=2.81633e-13
  0.000000	  0.000000	diff=5.13549e-14
  0.000000	  0.000000	diff=1.74128e-13
  0.000000	  0.000000	diff=1.60533e-12
  0.000000	  0.000000	diff=7.60329e-14
 -0.000000	 -0.000000	diff=1.45607e-13
  0.000000	  0.000000	diff=1.17786e-13
 -0.000000	 -0.000000	diff=5.06536e-13
 -0.000001	 -0.000001	diff=1.43254e-09
 -0.000001	 -0.000001	diff=1.31919e-11
 -0.000000	 -0.000000	diff=5.9177e-14
 -0.000000	 -0.000000	diff=1.11185e-12
 -0.000000	 -0.000000	diff=7.52937e-13
  0.000000	  0.000000	diff=2.4228e-13
 -0.000000	 -0.000000	diff=3.49152e-13
  0.000000	  0.000000	diff=5.56639e-14
  0.000000	  0.000000	diff=9.28521e-12
  0.000001	  0.000001	diff=1.3003e-09
  local_diff=3.02938e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=2.91971e-13
 -0.000000	 -0.000000	diff=1.33976e-14
 -0.000000	 -0.000000	diff=2.18641e-13
  0.000000	  0.000000	diff=2.91638e-13
 -0.000000	 -0.000000	diff=1.11047e-12
  0.000000	  0.000000	diff=9.05238e-13
  0.000032	  0.000032	diff=2.59906e-11
  0.000012	  0.000012	diff=9.03224e-12
  0.000000	  0.000000	diff=2.15891e-14
  0.000000	  0.000000	diff=5.59855e-13
 -0.000000	 -0.000000	diff=8.84211e-13
  0.000000	  0.000000	diff=9.21977e-13
 -0.000000	 -0.000000	diff=3.06835e-13
  0.000000	  0.000000	diff=7.55161e-13
 -0.000005	 -0.000005	diff=5.7663e-11
 -0.000002	 -0.000002	diff=8.51174e-12
  0.000000	  0.000000	diff=1.09311e-12
 -0.000000	 -0.000000	diff=7.83741e-13
 -0.000000	 -0.000000	diff=6.64998e-13
  0.000000	  0.000000	diff=6.07613e-13
 -0.000000	 -0.000000	diff=4.27229e-13
  0.000000	  0.000000	diff=7.69347e-14
  0.000001	  0.000001	diff=4.32908e-09
  0.000001	  0.000001	diff=1.55997e-11
 -0.000000	 -0.000000	diff=8.71241e-14
  0.000000	  0.000000	diff=9.24445e-13
  0.000000	  0.000000	diff=9.04911e-14
 -0.000000	 -0.000000	diff=1.48912e-13
  0.000000	  0.000000	diff=3.5693e-13
 -0.000000	 -0.000000	diff=6.43968e-13
 -0.000002	 -0.000002	diff=7.73204e-12
 -0.000001	 -0.000001	diff=2.08762e-09
  local_diff=6.55342e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000015	  0.000015	diff=7.6491e-09
 -0.000030	 -0.000030	diff=2.91299e-08
  0.000013	  0.000013	diff=7.01695e-09
 -0.000025	 -0.000025	diff=2.5038e-08
  local_diff=6.8834e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.12553e-09
 -0.000003	 -0.000003	diff=2.18158e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.72523e-09
 -0.000002	 -0.000002	diff=1.66217e-09
 -0.000017	 -0.000017	diff=4.92814e-09
 -0.000001	 -0.000001	diff=1.11168e-09
  local_diff=1.57343e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=6.57311e-21
  0.000000	 -0.000000	diff=8.778e-21
  0.000000	 -0.000000	diff=1.59249e-20
  0.000000	  0.000000	diff=2.13569e-20
  local_diff=5.26329e-20
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.15715e-12
  0.000000	  0.000000	diff=2.99665e-13
  local_diff=1.45681e-12
# W_h, [2 4]
  0.000055	  0.000055	diff=1.17061e-12
  0.000018	  0.000018	diff=1.11021e-12
 -0.000070	 -0.000070	diff=1.44588e-12
 -0.000023	 -0.000023	diff=3.90783e-13
  0.000013	  0.000013	diff=2.33728e-11
  0.000006	  0.000006	diff=6.03221e-13
 -0.000026	 -0.000026	diff=2.08052e-10
 -0.000014	 -0.000014	diff=1.85702e-11
  local_diff=2.54715e-10
# W_soft, [5 2]
 -0.000031	 -0.000031	diff=7.89404e-13
 -0.000031	 -0.000031	diff=1.9265e-13
  0.000013	  0.000013	diff=3.27006e-13
  0.000003	  0.000003	diff=1.33653e-12
  0.000045	  0.000045	diff=2.32821e-12
  0.000032	  0.000032	diff=1.68971e-12
  0.000032	  0.000032	diff=8.80479e-13
 -0.000010	 -0.000010	diff=7.8026e-13
 -0.000005	 -0.000005	diff=1.10666e-12
 -0.000048	 -0.000048	diff=1.22723e-12
  local_diff=1.06581e-11
# Num params=188, abs_diff=9.66095e-08
Elapsed time is 2.635631 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.5358e-12
 -0.000000	 -0.000000	diff=8.61893e-13
 -0.000000	 -0.000000	diff=8.6042e-13
 -0.000000	 -0.000000	diff=1.00231e-12
 -0.000000	 -0.000000	diff=1.45578e-12
 -0.000000	 -0.000000	diff=1.51699e-12
  0.000013	  0.000013	diff=3.25265e-11
 -0.000006	 -0.000006	diff=3.56242e-11
  0.000000	  0.000000	diff=5.06928e-13
  0.000000	  0.000000	diff=1.39424e-12
  0.000000	  0.000000	diff=5.34452e-13
  0.000000	  0.000000	diff=1.06995e-12
  0.000000	  0.000000	diff=1.12006e-12
  0.000000	  0.000000	diff=1.19792e-12
 -0.000017	 -0.000017	diff=5.85925e-11
  0.000008	  0.000008	diff=6.28768e-11
  0.000000	  0.000000	diff=1.12036e-12
  0.000000	  0.000000	diff=6.12508e-13
  0.000000	  0.000000	diff=1.33228e-12
  0.000000	  0.000000	diff=1.10868e-12
  0.000000	  0.000000	diff=1.26708e-12
  0.000000	  0.000000	diff=1.00023e-12
 -0.000000	 -0.000000	diff=3.38239e-10
  0.000000	  0.000000	diff=3.13636e-12
 -0.000000	 -0.000000	diff=1.1701e-12
 -0.000000	 -0.000000	diff=3.6056e-13
 -0.000000	 -0.000000	diff=1.15296e-12
 -0.000000	 -0.000000	diff=1.0862e-12
 -0.000000	 -0.000000	diff=6.11602e-13
 -0.000000	 -0.000000	diff=1.53388e-12
  0.000000	  0.000000	diff=2.00108e-12
 -0.000000	 -0.000000	diff=3.88149e-10
  local_diff=9.46558e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.76038e-12
  0.000000	  0.000000	diff=1.18757e-12
  0.000000	  0.000000	diff=3.9994e-13
  0.000000	  0.000000	diff=1.74196e-12
 -0.000000	 -0.000000	diff=2.83885e-13
  0.000000	  0.000000	diff=1.45269e-12
  0.000000	  0.000000	diff=6.4573e-13
  0.000019	  0.000019	diff=7.07894e-12
  0.000000	  0.000000	diff=1.49531e-12
 -0.000000	 -0.000000	diff=1.44909e-12
 -0.000000	 -0.000000	diff=1.56034e-12
 -0.000000	 -0.000000	diff=5.14131e-13
  0.000000	  0.000000	diff=8.03901e-13
 -0.000000	 -0.000000	diff=1.21518e-12
 -0.000000	 -0.000000	diff=6.73289e-13
 -0.000015	 -0.000015	diff=4.6172e-12
  0.000000	  0.000000	diff=1.41934e-12
  0.000000	  0.000000	diff=3.36386e-13
  0.000000	  0.000000	diff=1.5128e-12
  0.000000	  0.000000	diff=7.36814e-13
 -0.000000	 -0.000000	diff=1.89665e-12
  0.000000	  0.000000	diff=4.45026e-13
 -0.000000	 -0.000000	diff=1.4509e-10
  0.000000	  0.000000	diff=5.49019e-13
 -0.000000	 -0.000000	diff=6.14498e-13
 -0.000000	 -0.000000	diff=1.61442e-12
 -0.000000	 -0.000000	diff=9.43286e-13
 -0.000000	 -0.000000	diff=8.45298e-13
  0.000000	  0.000000	diff=1.40288e-12
 -0.000000	 -0.000000	diff=2.10209e-12
  0.000000	  0.000000	diff=1.78679e-12
 -0.000000	 -0.000000	diff=4.36281e-10
  local_diff=6.24456e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.82071e-13
  0.000000	  0.000000	diff=1.39598e-12
  0.000000	  0.000000	diff=5.3069e-13
 -0.000000	 -0.000000	diff=2.03233e-12
  0.000000	  0.000000	diff=2.52281e-14
  0.000000	  0.000000	diff=1.95953e-12
 -0.000003	 -0.000003	diff=5.56473e-12
  0.000003	  0.000003	diff=2.87149e-11
 -0.000000	 -0.000000	diff=1.91357e-12
 -0.000000	 -0.000000	diff=1.05934e-12
 -0.000000	 -0.000000	diff=1.12265e-12
  0.000000	  0.000000	diff=1.12746e-12
 -0.000000	 -0.000000	diff=6.82812e-13
 -0.000000	 -0.000000	diff=3.88625e-13
  0.000004	  0.000004	diff=2.12158e-11
  0.000011	  0.000011	diff=6.94152e-11
  0.000000	 -0.000000	diff=2.81727e-14
  0.000000	  0.000000	diff=6.04818e-13
  0.000000	 -0.000000	diff=7.69668e-13
  0.000000	  0.000000	diff=5.89213e-13
  0.000000	 -0.000000	diff=7.21594e-14
  0.000000	  0.000000	diff=1.50914e-12
 -0.000000	 -0.000000	diff=1.1301e-12
  0.000000	  0.000000	diff=3.76405e-13
  0.000000	 -0.000000	diff=2.20418e-14
  0.000000	  0.000000	diff=1.20286e-12
  0.000000	  0.000000	diff=3.12646e-15
  0.000000	  0.000000	diff=1.67148e-12
  0.000000	 -0.000000	diff=1.39511e-14
  0.000000	  0.000000	diff=8.83225e-13
 -0.000000	 -0.000000	diff=1.68177e-12
  0.000000	  0.000000	diff=1.03896e-12
 -0.000000	 -0.000000	diff=9.26995e-13
 -0.000000	 -0.000000	diff=4.08883e-13
 -0.000000	 -0.000000	diff=1.61728e-12
 -0.000000	 -0.000000	diff=2.04502e-12
 -0.000000	 -0.000000	diff=1.15225e-12
 -0.000000	 -0.000000	diff=1.84036e-12
  0.000000	  0.000000	diff=3.12127e-11
  0.000000	  0.000000	diff=3.19763e-11
  0.000000	  0.000000	diff=7.73356e-13
  0.000000	  0.000000	diff=4.61084e-13
  0.000000	  0.000000	diff=5.0132e-13
 -0.000000	 -0.000000	diff=1.61335e-12
  0.000000	  0.000000	diff=1.73892e-12
 -0.000000	 -0.000000	diff=2.05018e-12
  0.000000	  0.000000	diff=3.22962e-13
  0.000000	  0.000000	diff=1.53526e-10
  local_diff=3.81695e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=3.03344e-13
 -0.000000	 -0.000000	diff=1.71405e-12
  0.000000	  0.000000	diff=1.25083e-12
 -0.000000	 -0.000000	diff=1.48057e-12
  0.000000	  0.000000	diff=1.37361e-12
 -0.000000	 -0.000000	diff=6.16609e-13
 -0.000004	 -0.000004	diff=3.15039e-12
  0.000003	  0.000003	diff=2.31524e-11
 -0.000000	 -0.000000	diff=1.5346e-12
 -0.000000	 -0.000000	diff=1.41156e-12
  0.000000	  0.000000	diff=9.2051e-13
 -0.000000	 -0.000000	diff=1.03496e-12
  0.000000	  0.000000	diff=9.07658e-13
 -0.000000	 -0.000000	diff=2.45557e-13
 -0.000005	 -0.000005	diff=4.4159e-12
  0.000005	  0.000005	diff=9.57413e-11
 -0.000000	 -0.000000	diff=1.55948e-12
 -0.000000	 -0.000000	diff=1.02906e-12
  0.000000	  0.000000	diff=1.65737e-12
 -0.000000	 -0.000000	diff=9.45597e-13
  0.000000	  0.000000	diff=1.33956e-12
 -0.000000	 -0.000000	diff=1.40279e-12
 -0.000000	 -0.000000	diff=4.38472e-10
 -0.000000	 -0.000000	diff=4.44171e-11
  0.000000	  0.000000	diff=8.28977e-13
  0.000000	  0.000000	diff=1.18036e-12
 -0.000000	 -0.000000	diff=1.3417e-12
  0.000000	  0.000000	diff=1.87251e-12
 -0.000000	 -0.000000	diff=1.05276e-12
  0.000000	  0.000000	diff=6.56655e-13
  0.000000	  0.000000	diff=7.25683e-13
  0.000001	  0.000001	diff=3.07597e-09
  local_diff=3.7137e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=3.72117e-09
  0.000019	  0.000019	diff=1.29788e-08
 -0.000003	 -0.000003	diff=1.40956e-09
  0.000007	  0.000007	diff=4.88036e-09
  local_diff=2.29899e-08
# W_emb_tgt, [2 5]
  0.000043	  0.000043	diff=1.04284e-08
 -0.000002	 -0.000002	diff=4.58964e-11
  0.000022	  0.000022	diff=1.98808e-09
  0.000001	  0.000001	diff=1.08152e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=1.93765e-09
 -0.000001	 -0.000001	diff=1.96815e-10
  0.000005	  0.000005	diff=7.04624e-10
 -0.000001	 -0.000001	diff=2.6021e-10
  local_diff=1.66432e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.51525e-12
 -0.000000	 -0.000000	diff=1.23319e-12
 -0.000000	 -0.000000	diff=1.83514e-12
  0.000000	  0.000000	diff=5.35816e-13
 -0.000000	 -0.000000	diff=1.58231e-12
  0.000000	  0.000000	diff=1.49179e-12
  0.000000	  0.000000	diff=1.22137e-12
 -0.000000	 -0.000000	diff=3.3389e-13
  0.000000	  0.000000	diff=1.78542e-12
 -0.000000	 -0.000000	diff=1.06261e-12
 -0.000000	 -0.000000	diff=1.2158e-12
 -0.000000	 -0.000000	diff=7.33369e-13
  0.000000	  0.000000	diff=1.41131e-12
 -0.000000	 -0.000000	diff=1.35372e-12
  0.000000	  0.000000	diff=2.44421e-13
 -0.000001	 -0.000001	diff=1.10412e-11
  0.000000	  0.000000	diff=2.27274e-12
  0.000000	 -0.000000	diff=1.39501e-12
  0.000000	 -0.000000	diff=8.9087e-13
  0.000000	  0.000000	diff=1.83044e-12
  0.000000	  0.000000	diff=2.4251e-12
  0.000000	 -0.000000	diff=1.33957e-12
  0.000000	  0.000000	diff=3.04983e-12
 -0.000000	 -0.000000	diff=1.66169e-12
 -0.000000	 -0.000000	diff=1.43757e-12
  0.000000	  0.000000	diff=1.10427e-12
  0.000000	 -0.000000	diff=8.29171e-13
  0.000000	  0.000000	diff=1.97147e-12
 -0.000000	 -0.000000	diff=8.16662e-13
  0.000000	  0.000000	diff=1.92502e-12
 -0.000000	 -0.000000	diff=1.22951e-12
  0.000000	  0.000000	diff=3.99955e-12
  local_diff=5.6775e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.87044e-11
 -0.000000	 -0.000000	diff=1.76976e-10
 -0.000000	 -0.000000	diff=1.35661e-12
 -0.000000	 -0.000000	diff=2.58209e-11
 -0.000000	 -0.000000	diff=1.55753e-12
 -0.000000	 -0.000000	diff=2.95208e-11
 -0.000000	 -0.000000	diff=1.04461e-13
 -0.000000	 -0.000000	diff=5.81833e-11
  local_diff=3.32224e-10
# W_h, [2 4]
 -0.000023	 -0.000023	diff=1.38179e-12
 -0.000005	 -0.000005	diff=1.56151e-12
  0.000028	  0.000028	diff=1.27093e-12
  0.000006	  0.000006	diff=1.32908e-12
 -0.000005	 -0.000005	diff=6.88211e-12
 -0.000002	 -0.000002	diff=2.36272e-12
  0.000004	  0.000004	diff=1.35456e-10
 -0.000006	 -0.000006	diff=4.04394e-11
  local_diff=1.90684e-10
# W_soft, [5 2]
  0.000006	  0.000006	diff=2.04642e-12
 -0.000011	 -0.000011	diff=2.6137e-13
  0.000014	  0.000014	diff=7.83184e-13
  0.000001	  0.000001	diff=2.53685e-12
 -0.000011	 -0.000011	diff=2.18815e-12
  0.000000	  0.000000	diff=1.14232e-12
 -0.000003	 -0.000003	diff=1.04457e-12
  0.000006	  0.000006	diff=1.29526e-12
  0.000000	  0.000000	diff=2.13308e-12
 -0.000003	 -0.000003	diff=2.20074e-12
  local_diff=1.56319e-11
# Num params=224, abs_diff=4.58948e-08
Elapsed time is 3.469084 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.10696e-12
  0.000000	  0.000000	diff=6.70375e-13
  0.000000	  0.000000	diff=2.47699e-12
  0.000000	  0.000000	diff=1.51055e-13
 -0.000000	 -0.000000	diff=7.73048e-13
  0.000000	  0.000000	diff=9.05343e-13
  0.000012	  0.000012	diff=5.69556e-11
 -0.000005	 -0.000005	diff=1.1581e-11
  0.000000	  0.000000	diff=2.2595e-12
  0.000000	  0.000000	diff=1.24361e-12
  0.000000	  0.000000	diff=1.74161e-12
 -0.000000	 -0.000000	diff=2.91956e-12
  0.000000	  0.000000	diff=6.8421e-13
  0.000000	  0.000000	diff=1.38577e-12
  0.000011	  0.000011	diff=8.12106e-11
 -0.000005	 -0.000005	diff=1.41798e-11
 -0.000000	 -0.000000	diff=1.15436e-12
 -0.000000	 -0.000000	diff=1.25316e-12
  0.000000	  0.000000	diff=1.57941e-13
  0.000000	  0.000000	diff=1.19224e-12
  0.000000	  0.000000	diff=2.51838e-12
  0.000000	  0.000000	diff=3.93528e-12
  0.000000	  0.000000	diff=7.19831e-11
 -0.000000	 -0.000000	diff=2.32948e-12
  0.000000	  0.000000	diff=1.85803e-12
  0.000000	  0.000000	diff=1.71013e-13
 -0.000000	 -0.000000	diff=2.44952e-12
 -0.000000	 -0.000000	diff=1.78813e-13
 -0.000000	 -0.000000	diff=2.04398e-12
 -0.000000	 -0.000000	diff=1.90341e-12
 -0.000000	 -0.000000	diff=1.10745e-12
  0.000000	  0.000000	diff=5.97914e-11
  local_diff=3.34272e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=8.76675e-14
  0.000000	  0.000000	diff=2.8484e-12
 -0.000000	 -0.000000	diff=2.04158e-12
  0.000000	  0.000000	diff=2.75283e-13
 -0.000000	 -0.000000	diff=1.00612e-12
  0.000000	  0.000000	diff=1.67419e-12
 -0.000000	 -0.000000	diff=5.39373e-13
 -0.000001	 -0.000001	diff=2.18537e-12
 -0.000000	 -0.000000	diff=7.88696e-13
 -0.000000	 -0.000000	diff=2.38741e-12
 -0.000000	 -0.000000	diff=2.32875e-12
 -0.000000	 -0.000000	diff=1.93567e-14
  0.000000	  0.000000	diff=7.34106e-13
 -0.000000	 -0.000000	diff=1.11336e-12
 -0.000000	 -0.000000	diff=9.13076e-13
  0.000007	  0.000007	diff=1.33655e-14
  0.000000	 -0.000000	diff=4.22083e-14
  0.000000	  0.000000	diff=1.04469e-12
  0.000000	  0.000000	diff=2.3057e-13
  0.000000	  0.000000	diff=6.36955e-14
  0.000000	 -0.000000	diff=2.2974e-13
  0.000000	  0.000000	diff=8.10708e-13
  0.000000	  0.000000	diff=2.91412e-12
 -0.000000	 -0.000000	diff=4.03544e-13
  0.000000	  0.000000	diff=2.80106e-12
 -0.000000	 -0.000000	diff=3.38959e-13
  0.000000	 -0.000000	diff=2.88294e-13
 -0.000000	 -0.000000	diff=1.02002e-12
  0.000000	  0.000000	diff=2.54787e-12
 -0.000000	 -0.000000	diff=1.61238e-13
 -0.000000	 -0.000000	diff=8.84062e-13
  0.000000	  0.000000	diff=1.42572e-10
  local_diff=1.75309e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.50753e-13
  0.000000	  0.000000	diff=1.14975e-12
 -0.000000	 -0.000000	diff=6.26084e-13
 -0.000000	 -0.000000	diff=7.55906e-13
  0.000000	  0.000000	diff=2.5278e-12
  0.000000	  0.000000	diff=1.84075e-12
 -0.000004	 -0.000004	diff=1.10834e-11
  0.000013	  0.000013	diff=8.82487e-12
 -0.000000	 -0.000000	diff=2.52258e-12
 -0.000000	 -0.000000	diff=3.40192e-13
 -0.000000	 -0.000000	diff=3.49635e-14
 -0.000000	 -0.000000	diff=2.47154e-12
 -0.000000	 -0.000000	diff=2.23102e-12
 -0.000000	 -0.000000	diff=9.61752e-13
  0.000006	  0.000006	diff=4.85525e-11
  0.000001	  0.000001	diff=2.48229e-11
  0.000000	 -0.000000	diff=2.87996e-12
  0.000000	 -0.000000	diff=9.9274e-13
  0.000000	  0.000000	diff=4.91792e-14
  0.000000	  0.000000	diff=1.9065e-12
  0.000000	 -0.000000	diff=2.86755e-12
  0.000000	 -0.000000	diff=2.40343e-13
 -0.000000	 -0.000000	diff=2.55512e-12
 -0.000000	 -0.000000	diff=1.8255e-12
  0.000000	  0.000000	diff=2.01185e-14
  0.000000	 -0.000000	diff=5.06188e-13
  0.000000	  0.000000	diff=4.05646e-14
  0.000000	  0.000000	diff=1.74604e-13
  0.000000	  0.000000	diff=4.1754e-14
  0.000000	 -0.000000	diff=3.58072e-13
  0.000000	  0.000000	diff=6.46484e-13
 -0.000000	 -0.000000	diff=2.96825e-12
  0.000000	  0.000000	diff=1.02916e-13
 -0.000000	 -0.000000	diff=3.83878e-13
 -0.000000	 -0.000000	diff=1.03183e-12
 -0.000000	 -0.000000	diff=1.57589e-12
 -0.000000	 -0.000000	diff=1.53904e-12
 -0.000000	 -0.000000	diff=6.41085e-13
  0.000000	  0.000000	diff=2.55348e-11
 -0.000000	 -0.000000	diff=1.473e-11
  0.000000	  0.000000	diff=5.27348e-13
  0.000000	  0.000000	diff=5.74814e-13
  0.000000	  0.000000	diff=1.45353e-12
 -0.000000	 -0.000000	diff=2.74128e-15
  0.000000	  0.000000	diff=1.73407e-12
 -0.000000	 -0.000000	diff=6.35648e-13
  0.000000	  0.000000	diff=3.85359e-12
  0.000000	  0.000000	diff=2.09692e-09
  local_diff=2.27831e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.51658e-12
 -0.000000	 -0.000000	diff=3.09176e-12
  0.000000	  0.000000	diff=3.14035e-13
  0.000000	  0.000000	diff=6.16043e-13
  0.000000	  0.000000	diff=6.19598e-14
 -0.000000	 -0.000000	diff=1.89743e-12
 -0.000002	 -0.000002	diff=2.66835e-12
  0.000012	  0.000012	diff=3.76343e-12
 -0.000000	 -0.000000	diff=2.09972e-12
 -0.000000	 -0.000000	diff=1.37549e-12
 -0.000000	 -0.000000	diff=1.38739e-12
 -0.000000	 -0.000000	diff=1.45123e-12
 -0.000000	 -0.000000	diff=1.38814e-12
 -0.000000	 -0.000000	diff=2.4335e-12
 -0.000007	 -0.000007	diff=5.46363e-12
  0.000011	  0.000011	diff=1.74144e-10
  0.000000	 -0.000000	diff=6.32704e-13
 -0.000000	 -0.000000	diff=1.96219e-12
  0.000000	  0.000000	diff=7.39636e-13
  0.000000	  0.000000	diff=2.6106e-12
  0.000000	  0.000000	diff=2.24219e-12
  0.000000	  0.000000	diff=1.20115e-12
  0.000000	  0.000000	diff=3.43733e-11
 -0.000000	 -0.000000	diff=1.59907e-11
  0.000000	  0.000000	diff=2.53195e-12
  0.000000	  0.000000	diff=4.13598e-13
 -0.000000	 -0.000000	diff=1.33424e-12
  0.000000	 -0.000000	diff=6.09292e-13
  0.000000	 -0.000000	diff=7.25697e-14
  0.000000	 -0.000000	diff=3.34069e-12
  0.000000	  0.000000	diff=7.36568e-13
  0.000000	  0.000000	diff=1.30927e-09
  local_diff=1.58273e-09
# W_emb_src, [2 5]
 -0.000015	 -0.000015	diff=5.08607e-09
  0.000028	  0.000028	diff=2.03796e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=1.03462e-09
  0.000005	  0.000005	diff=3.65579e-09
 -0.000000	 -0.000000	diff=7.05836e-11
 -0.000000	 -0.000000	diff=1.58752e-10
  local_diff=3.03854e-08
# W_emb_tgt, [2 5]
  0.000037	  0.000037	diff=9.64444e-09
 -0.000003	 -0.000003	diff=1.0634e-09
  0.000009	  0.000009	diff=1.08925e-10
  0.000002	  0.000002	diff=1.04583e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000009	  0.000009	diff=1.85823e-09
  0.000000	  0.000000	diff=5.14693e-10
  0.000015	  0.000015	diff=2.03721e-09
 -0.000001	 -0.000001	diff=1.84446e-11
  local_diff=1.62912e-08
# W_tgt_char{1}, [8 4]
  0.000008	  0.000008	diff=4.20131e-12
  0.000007	  0.000007	diff=2.72057e-11
  0.000003	  0.000003	diff=1.11172e-10
 -0.000001	 -0.000001	diff=1.09929e-10
  0.000010	  0.000010	diff=2.16775e-12
  0.000004	  0.000004	diff=3.08557e-11
 -0.015995	 -0.015995	diff=1.43672e-07
  0.016736	  0.016736	diff=7.1125e-08
  0.000000	  0.000000	diff=1.07011e-11
  0.000004	  0.000004	diff=3.91624e-11
  0.000003	  0.000003	diff=3.24987e-10
 -0.000001	 -0.000001	diff=1.77656e-10
  0.000005	  0.000005	diff=1.66466e-11
 -0.000000	 -0.000000	diff=4.00819e-11
 -0.010151	 -0.010151	diff=1.0108e-07
  0.021186	  0.021186	diff=1.09109e-07
 -0.000000	 -0.000000	diff=1.07553e-12
  0.000000	  0.000000	diff=2.66835e-12
  0.000000	  0.000000	diff=4.33089e-13
 -0.000000	 -0.000000	diff=1.47793e-12
  0.000000	  0.000000	diff=2.64844e-12
  0.000000	  0.000000	diff=1.64856e-12
 -0.000087	 -0.000087	diff=1.51246e-07
  0.000027	  0.000027	diff=1.07306e-10
 -0.000000	 -0.000000	diff=9.63825e-13
  0.000000	  0.000000	diff=2.42477e-13
  0.000000	  0.000000	diff=9.31386e-13
 -0.000000	 -0.000000	diff=1.96057e-12
  0.000000	  0.000000	diff=1.20719e-12
 -0.000000	 -0.000000	diff=2.13593e-12
 -0.000026	 -0.000026	diff=6.58706e-12
  0.000057	  0.000057	diff=2.19237e-08
  local_diff=5.99182e-07
# W_emb_tgt_char, [2 5]
  0.012873	  0.012871	diff=1.91179e-06
 -0.011693	 -0.011695	diff=1.15829e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.003822	  0.003823	diff=2.29114e-07
 -0.010428	 -0.010424	diff=3.94919e-06
  0.004255	  0.004255	diff=7.36839e-07
 -0.001888	 -0.001890	diff=1.46235e-06
  0.002597	  0.002596	diff=8.22657e-07
  0.004580	  0.004576	diff=4.55604e-06
  local_diff=1.48263e-05
# W_h, [2 4]
  0.000002	  0.000002	diff=1.54902e-12
  0.000000	  0.000000	diff=8.35504e-13
 -0.000003	 -0.000003	diff=3.00103e-13
 -0.000001	 -0.000001	diff=2.24329e-12
 -0.000005	 -0.000005	diff=5.59786e-13
 -0.000005	 -0.000005	diff=1.62963e-12
 -0.000005	 -0.000005	diff=8.03889e-11
 -0.000009	 -0.000009	diff=3.09414e-11
  local_diff=1.18448e-10
# W_soft, [5 2]
 -0.000016	 -0.000016	diff=4.37937e-13
  0.000012	  0.000012	diff=7.48704e-13
  0.000018	  0.000018	diff=1.26094e-13
 -0.000016	 -0.000016	diff=3.94884e-14
  0.000002	  0.000002	diff=1.10004e-12
 -0.000006	 -0.000006	diff=2.30782e-13
  0.000007	  0.000007	diff=1.01095e-12
 -0.000000	 -0.000000	diff=3.7718e-13
 -0.000003	 -0.000003	diff=1.21102e-13
  0.000002	  0.000002	diff=5.24088e-13
  local_diff=4.71636e-12
# W_soft_char, [5 2]
 -0.004081	 -0.004081	diff=7.73885e-09
  0.000061	  0.000061	diff=7.73893e-09
  0.002733	  0.002733	diff=7.73961e-09
 -0.000336	 -0.000336	diff=7.73684e-09
  0.001623	  0.001623	diff=7.73909e-09
  0.000812	  0.000812	diff=3.79262e-09
 -0.005105	 -0.005105	diff=3.79342e-09
 -0.000615	 -0.000615	diff=3.79456e-09
  0.003165	  0.003165	diff=3.79321e-09
  0.001743	  0.001743	diff=3.79483e-09
  local_diff=5.7662e-08
# Num params=234, abs_diff=1.55343e-05
Elapsed time is 4.630330 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=7.80896e-13
 -0.000000	 -0.000000	diff=3.13078e-12
 -0.000000	 -0.000000	diff=3.81437e-12
 -0.000000	 -0.000000	diff=4.23118e-13
 -0.000000	 -0.000000	diff=1.4373e-12
 -0.000000	 -0.000000	diff=3.32853e-12
  0.000020	  0.000020	diff=6.34948e-11
 -0.000007	 -0.000007	diff=5.21889e-11
  0.000000	  0.000000	diff=5.49311e-13
  0.000000	  0.000000	diff=1.39687e-12
  0.000000	  0.000000	diff=2.12541e-12
  0.000000	  0.000000	diff=7.99923e-13
  0.000000	  0.000000	diff=6.89381e-13
  0.000000	  0.000000	diff=6.79471e-13
 -0.000027	 -0.000027	diff=1.307e-10
  0.000010	  0.000010	diff=1.14148e-10
  0.000000	  0.000000	diff=3.02323e-12
  0.000000	  0.000000	diff=4.12572e-12
  0.000000	  0.000000	diff=1.06964e-12
  0.000000	  0.000000	diff=1.72528e-12
  0.000000	  0.000000	diff=1.25717e-12
 -0.000000	 -0.000000	diff=1.67459e-12
 -0.000000	 -0.000000	diff=2.9142e-10
  0.000000	  0.000000	diff=3.04722e-12
 -0.000000	 -0.000000	diff=3.22296e-12
 -0.000000	 -0.000000	diff=1.51869e-12
 -0.000000	 -0.000000	diff=1.07862e-12
 -0.000000	 -0.000000	diff=3.35696e-14
 -0.000000	 -0.000000	diff=2.18728e-12
  0.000000	  0.000000	diff=3.11049e-12
  0.000000	  0.000000	diff=2.94716e-12
 -0.000000	 -0.000000	diff=6.23536e-10
  local_diff=1.32466e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.0182e-12
 -0.000000	 -0.000000	diff=9.09243e-13
  0.000000	  0.000000	diff=2.63977e-12
 -0.000000	 -0.000000	diff=3.38283e-12
  0.000000	  0.000000	diff=1.68778e-12
  0.000000	  0.000000	diff=5.70012e-14
 -0.000039	 -0.000039	diff=4.75707e-12
 -0.000010	 -0.000010	diff=2.03716e-12
 -0.000000	 -0.000000	diff=1.80542e-12
  0.000000	  0.000000	diff=3.4256e-12
 -0.000000	 -0.000000	diff=8.64027e-13
  0.000000	  0.000000	diff=1.45706e-12
 -0.000000	 -0.000000	diff=2.99959e-12
 -0.000000	 -0.000000	diff=9.80672e-13
  0.000031	  0.000031	diff=5.04728e-12
  0.000008	  0.000008	diff=5.31109e-12
  0.000000	  0.000000	diff=6.95164e-13
 -0.000000	 -0.000000	diff=2.29668e-12
  0.000000	  0.000000	diff=8.82348e-13
 -0.000000	 -0.000000	diff=2.04968e-12
  0.000000	  0.000000	diff=1.71285e-12
  0.000000	  0.000000	diff=2.91306e-12
 -0.000001	 -0.000001	diff=1.00812e-09
 -0.000000	 -0.000000	diff=7.06429e-13
 -0.000000	 -0.000000	diff=2.2601e-13
  0.000000	  0.000000	diff=9.27367e-13
 -0.000000	 -0.000000	diff=9.13891e-13
  0.000000	  0.000000	diff=1.23182e-12
 -0.000000	 -0.000000	diff=1.39579e-12
 -0.000000	 -0.000000	diff=1.08507e-12
  0.000001	  0.000001	diff=2.73915e-12
  0.000000	  0.000000	diff=8.49472e-10
  local_diff=1.91575e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.25429e-12
  0.000000	  0.000000	diff=5.22829e-13
 -0.000000	 -0.000000	diff=2.41845e-12
 -0.000000	 -0.000000	diff=1.82639e-12
 -0.000000	 -0.000000	diff=1.15447e-12
  0.000000	  0.000000	diff=1.3253e-12
  0.000005	  0.000005	diff=2.87122e-11
 -0.000005	 -0.000005	diff=1.47394e-10
  0.000000	  0.000000	diff=1.90989e-12
 -0.000000	 -0.000000	diff=4.54135e-13
  0.000000	  0.000000	diff=1.79725e-12
  0.000000	  0.000000	diff=1.73059e-12
  0.000000	  0.000000	diff=1.71347e-12
 -0.000000	 -0.000000	diff=1.56064e-12
 -0.000005	 -0.000005	diff=4.08655e-11
  0.000027	  0.000027	diff=3.41311e-10
  0.000000	 -0.000000	diff=2.17904e-13
  0.000000	 -0.000000	diff=2.67384e-12
  0.000000	  0.000000	diff=9.27302e-14
  0.000000	  0.000000	diff=3.94131e-13
  0.000000	 -0.000000	diff=9.99062e-14
  0.000000	 -0.000000	diff=1.75478e-12
 -0.000000	 -0.000000	diff=5.70613e-13
 -0.000000	 -0.000000	diff=5.00792e-13
  0.000000	  0.000000	diff=8.33467e-14
  0.000000	  0.000000	diff=2.44918e-12
  0.000000	  0.000000	diff=2.77668e-12
  0.000000	  0.000000	diff=2.14584e-12
  0.000000	  0.000000	diff=2.71069e-12
  0.000000	  0.000000	diff=1.86983e-12
  0.000000	  0.000000	diff=1.93782e-12
  0.000000	  0.000000	diff=1.88399e-12
  0.000000	  0.000000	diff=1.1725e-12
 -0.000000	 -0.000000	diff=1.66821e-12
 -0.000000	 -0.000000	diff=5.1071e-13
  0.000000	  0.000000	diff=1.32361e-14
  0.000000	  0.000000	diff=3.94218e-12
 -0.000000	 -0.000000	diff=5.35004e-13
 -0.000000	 -0.000000	diff=3.68462e-10
  0.000001	  0.000001	diff=3.67729e-11
 -0.000000	 -0.000000	diff=1.03865e-14
  0.000000	  0.000000	diff=1.30472e-12
 -0.000000	 -0.000000	diff=6.98414e-13
 -0.000000	 -0.000000	diff=8.48533e-13
 -0.000000	 -0.000000	diff=2.32873e-13
  0.000000	  0.000000	diff=2.64601e-12
 -0.000000	 -0.000000	diff=7.45062e-13
 -0.000000	 -0.000000	diff=6.7104e-11
  local_diff=1.08478e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=5.77405e-13
 -0.000000	 -0.000000	diff=4.98992e-13
 -0.000000	 -0.000000	diff=1.72456e-12
 -0.000000	 -0.000000	diff=3.84911e-12
 -0.000000	 -0.000000	diff=8.4802e-13
 -0.000000	 -0.000000	diff=2.92465e-12
  0.000007	  0.000007	diff=9.25245e-12
 -0.000007	 -0.000007	diff=3.37963e-11
 -0.000000	 -0.000000	diff=1.82084e-12
 -0.000000	 -0.000000	diff=2.40993e-13
 -0.000000	 -0.000000	diff=1.43033e-12
 -0.000000	 -0.000000	diff=1.75213e-12
 -0.000000	 -0.000000	diff=1.23042e-12
 -0.000000	 -0.000000	diff=3.44881e-12
  0.000011	  0.000011	diff=1.44283e-11
  0.000001	  0.000001	diff=8.46726e-11
  0.000000	  0.000000	diff=1.72157e-12
 -0.000000	 -0.000000	diff=9.58181e-13
 -0.000000	 -0.000000	diff=1.90185e-12
 -0.000000	 -0.000000	diff=1.11262e-12
 -0.000000	 -0.000000	diff=2.7826e-12
 -0.000000	 -0.000000	diff=6.59314e-13
  0.000000	  0.000000	diff=7.52145e-10
 -0.000001	 -0.000001	diff=5.53775e-11
  0.000000	 -0.000000	diff=3.3829e-12
  0.000000	  0.000000	diff=1.86303e-12
  0.000000	  0.000000	diff=1.66565e-12
  0.000000	  0.000000	diff=2.3625e-12
  0.000000	  0.000000	diff=2.09679e-12
  0.000000	  0.000000	diff=2.44318e-12
 -0.000000	 -0.000000	diff=5.16726e-12
  0.000001	  0.000001	diff=4.62008e-09
  local_diff=5.61821e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000016	 -0.000016	diff=6.01322e-09
  0.000025	  0.000025	diff=1.84266e-08
 -0.000005	 -0.000005	diff=2.1608e-09
  0.000013	  0.000013	diff=8.17923e-09
  local_diff=3.47798e-08
# W_emb_tgt, [2 5]
  0.000072	  0.000072	diff=8.84946e-09
  0.000002	  0.000002	diff=2.85791e-09
  0.000036	  0.000036	diff=7.49699e-09
 -0.000002	 -0.000002	diff=1.00609e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=1.98981e-10
  0.000000	  0.000000	diff=4.71259e-10
  0.000009	  0.000009	diff=2.72854e-11
  0.000000	  0.000000	diff=3.69947e-10
  local_diff=2.12779e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.79744e-12
 -0.000000	 -0.000000	diff=8.98666e-13
  0.000000	 -0.000000	diff=2.18326e-12
  0.000000	  0.000000	diff=5.64123e-13
 -0.000000	 -0.000000	diff=2.64494e-12
  0.000000	  0.000000	diff=2.05413e-12
  0.000000	  0.000000	diff=1.26897e-13
 -0.000000	 -0.000000	diff=5.51505e-14
  0.000000	  0.000000	diff=3.83117e-13
 -0.000000	 -0.000000	diff=3.81273e-13
 -0.000000	 -0.000000	diff=2.30533e-12
 -0.000000	 -0.000000	diff=1.26463e-12
  0.000000	  0.000000	diff=4.06938e-12
 -0.000000	 -0.000000	diff=1.03917e-12
  0.000000	  0.000000	diff=1.54416e-12
 -0.000000	 -0.000000	diff=9.80704e-12
  0.000000	  0.000000	diff=5.00116e-13
  0.000000	 -0.000000	diff=1.23479e-12
  0.000000	 -0.000000	diff=9.63172e-14
  0.000000	  0.000000	diff=2.66633e-12
  0.000000	  0.000000	diff=4.15496e-13
  0.000000	 -0.000000	diff=7.63299e-13
  0.000000	  0.000000	diff=4.49308e-13
 -0.000000	 -0.000000	diff=9.99929e-13
  0.000000	 -0.000000	diff=1.63604e-12
  0.000000	  0.000000	diff=1.28607e-12
  0.000000	 -0.000000	diff=2.66679e-14
  0.000000	  0.000000	diff=1.56729e-12
  0.000000	 -0.000000	diff=1.65847e-12
  0.000000	  0.000000	diff=2.65906e-12
 -0.000000	 -0.000000	diff=3.85261e-12
  0.000000	  0.000000	diff=3.1803e-12
  local_diff=5.41108e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.80361e-11
 -0.000000	 -0.000000	diff=1.47888e-10
 -0.000000	 -0.000000	diff=1.44536e-13
 -0.000000	 -0.000000	diff=1.70744e-11
 -0.000000	 -0.000000	diff=2.52507e-12
 -0.000000	 -0.000000	diff=1.6802e-11
 -0.000000	 -0.000000	diff=5.95712e-13
 -0.000000	 -0.000000	diff=5.68945e-11
  local_diff=2.69961e-10
# W_tgt_char{1}, [8 4]
  0.000023	  0.000023	diff=3.71608e-10
  0.000011	  0.000011	diff=2.07472e-10
  0.000013	  0.000013	diff=3.12752e-10
  0.000031	  0.000031	diff=1.35704e-09
  0.000068	  0.000068	diff=2.82653e-10
  0.000075	  0.000075	diff=7.29925e-11
 -0.026173	 -0.026174	diff=2.97355e-07
 -0.030773	 -0.030773	diff=5.62781e-07
 -0.000047	 -0.000047	diff=1.94386e-10
  0.000044	  0.000044	diff=8.09591e-11
  0.000028	  0.000028	diff=6.89831e-10
  0.000033	  0.000033	diff=1.04935e-09
 -0.000031	 -0.000031	diff=1.31079e-10
  0.000050	  0.000050	diff=9.80852e-11
 -0.006718	 -0.006718	diff=2.51365e-07
 -0.021207	 -0.021207	diff=1.58331e-07
  0.000001	  0.000001	diff=3.40213e-13
 -0.000001	 -0.000001	diff=1.7666e-12
 -0.000001	 -0.000001	diff=3.20815e-12
 -0.000001	 -0.000001	diff=3.06432e-12
  0.000000	  0.000000	diff=1.63186e-12
 -0.000001	 -0.000001	diff=1.73021e-12
  0.000314	  0.000314	diff=1.46756e-07
  0.000556	  0.000556	diff=7.53364e-10
  0.000001	  0.000001	diff=1.23208e-12
 -0.000000	 -0.000000	diff=1.89854e-12
 -0.000001	 -0.000001	diff=2.17393e-12
 -0.000001	 -0.000001	diff=2.90624e-12
  0.000000	  0.000000	diff=3.74999e-12
 -0.000001	 -0.000001	diff=1.35021e-12
  0.000310	  0.000310	diff=1.63047e-09
  0.000620	  0.000620	diff=4.26615e-07
  local_diff=1.85046e-06
# W_emb_tgt_char, [2 5]
  0.019313	  0.019311	diff=1.13234e-06
 -0.003571	 -0.003571	diff=2.89182e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.033827	 -0.033830	diff=3.14029e-06
  0.018269	  0.018267	diff=1.94274e-06
 -0.005612	 -0.005614	diff=2.39203e-06
  0.005518	  0.005517	diff=7.63406e-07
 -0.006433	 -0.006433	diff=4.3076e-07
  0.001249	  0.001249	diff=1.1884e-07
  local_diff=1.02096e-05
# W_h, [2 4]
  0.000012	  0.000012	diff=4.73009e-12
 -0.000061	 -0.000061	diff=3.90937e-12
 -0.000015	 -0.000015	diff=7.15103e-13
  0.000073	  0.000073	diff=2.92214e-12
  0.000003	  0.000003	diff=5.18852e-13
 -0.000015	 -0.000015	diff=2.02057e-11
 -0.000022	 -0.000022	diff=7.51252e-12
  0.000026	  0.000026	diff=2.39725e-10
  local_diff=2.80239e-10
# W_soft, [5 2]
 -0.000040	 -0.000040	diff=9.91793e-13
  0.000016	  0.000016	diff=2.0318e-12
  0.000000	  0.000000	diff=5.30629e-13
  0.000008	  0.000008	diff=3.3936e-12
  0.000016	  0.000016	diff=1.57869e-12
  0.000002	  0.000002	diff=3.45968e-12
 -0.000005	 -0.000005	diff=1.29697e-12
  0.000012	  0.000012	diff=2.2856e-12
 -0.000005	 -0.000005	diff=3.14775e-12
 -0.000005	 -0.000005	diff=1.17869e-12
  local_diff=1.98952e-11
# W_soft_char, [5 2]
  0.001081	  0.001081	diff=9.06092e-08
 -0.026076	 -0.026076	diff=9.06097e-08
  0.029185	  0.029185	diff=9.06092e-08
 -0.002364	 -0.002364	diff=9.06056e-08
 -0.001826	 -0.001826	diff=9.06084e-08
 -0.005737	 -0.005737	diff=6.63907e-08
 -0.022733	 -0.022733	diff=6.63891e-08
  0.016765	  0.016765	diff=6.63902e-08
  0.012345	  0.012345	diff=6.63828e-08
 -0.000640	 -0.000640	diff=6.63843e-08
  local_diff=7.84979e-07
# Num params=276, abs_diff=1.29116e-05
Elapsed time is 6.495706 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.8725e-12
  0.000000	  0.000000	diff=1.58875e-14
  0.000000	  0.000000	diff=1.16744e-13
  0.000000	  0.000000	diff=1.23174e-13
 -0.000000	 -0.000000	diff=1.5964e-12
 -0.000000	 -0.000000	diff=7.81839e-13
  0.000004	  0.000004	diff=1.56611e-11
  0.000001	  0.000001	diff=8.26549e-12
  0.000000	  0.000000	diff=1.20017e-12
 -0.000000	 -0.000000	diff=1.92646e-12
 -0.000000	 -0.000000	diff=7.64767e-13
 -0.000000	 -0.000000	diff=4.27904e-13
  0.000000	  0.000000	diff=8.0174e-13
  0.000000	  0.000000	diff=2.83679e-14
 -0.000005	 -0.000005	diff=3.57426e-11
 -0.000001	 -0.000001	diff=1.89974e-11
 -0.000000	 -0.000000	diff=3.42648e-14
 -0.000000	 -0.000000	diff=2.10967e-12
  0.000000	  0.000000	diff=4.66548e-13
 -0.000000	 -0.000000	diff=1.18586e-12
  0.000000	  0.000000	diff=4.70315e-14
  0.000000	  0.000000	diff=4.13425e-15
 -0.000000	 -0.000000	diff=2.34309e-10
 -0.000000	 -0.000000	diff=2.07574e-12
  0.000000	  0.000000	diff=4.34393e-13
  0.000000	  0.000000	diff=2.01128e-13
 -0.000000	 -0.000000	diff=2.20792e-12
  0.000000	  0.000000	diff=5.06123e-13
 -0.000000	 -0.000000	diff=1.95041e-12
 -0.000000	 -0.000000	diff=3.14361e-13
  0.000000	  0.000000	diff=3.34371e-12
  0.000000	  0.000000	diff=5.15075e-11
  local_diff=3.8902e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=3.08428e-13
  0.000000	  0.000000	diff=2.24639e-12
 -0.000000	 -0.000000	diff=2.32342e-13
  0.000000	  0.000000	diff=9.04466e-13
 -0.000000	 -0.000000	diff=2.22653e-13
  0.000000	  0.000000	diff=1.47762e-12
  0.000002	  0.000002	diff=8.56158e-13
  0.000006	  0.000006	diff=2.51527e-12
  0.000000	  0.000000	diff=1.29453e-12
 -0.000000	 -0.000000	diff=1.98211e-12
  0.000000	  0.000000	diff=7.49623e-13
 -0.000000	 -0.000000	diff=2.5562e-12
  0.000000	  0.000000	diff=2.45531e-12
 -0.000000	 -0.000000	diff=1.07781e-12
 -0.000002	 -0.000002	diff=1.29943e-12
 -0.000005	 -0.000005	diff=1.88705e-12
 -0.000000	 -0.000000	diff=3.81183e-13
  0.000000	  0.000000	diff=1.09363e-12
  0.000000	 -0.000000	diff=1.41289e-12
  0.000000	  0.000000	diff=2.70963e-13
  0.000000	 -0.000000	diff=1.09816e-12
  0.000000	  0.000000	diff=5.09697e-13
  0.000000	  0.000000	diff=6.71933e-11
  0.000000	  0.000000	diff=2.60133e-12
  0.000000	  0.000000	diff=8.38292e-13
 -0.000000	 -0.000000	diff=5.05543e-13
  0.000000	  0.000000	diff=1.10121e-12
 -0.000000	 -0.000000	diff=1.54122e-12
  0.000000	  0.000000	diff=1.45158e-12
 -0.000000	 -0.000000	diff=1.64666e-14
 -0.000000	 -0.000000	diff=1.77541e-12
 -0.000000	 -0.000000	diff=3.23808e-10
  local_diff=4.27665e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=2.12441e-13
 -0.000000	 -0.000000	diff=1.24557e-12
 -0.000000	 -0.000000	diff=8.22815e-13
  0.000000	  0.000000	diff=7.4522e-13
 -0.000000	 -0.000000	diff=1.73216e-12
 -0.000000	 -0.000000	diff=1.01271e-12
  0.000001	  0.000001	diff=2.28651e-11
  0.000013	  0.000013	diff=1.03542e-10
  0.000000	  0.000000	diff=2.04522e-12
  0.000000	  0.000000	diff=4.79092e-13
  0.000000	  0.000000	diff=3.788e-13
 -0.000000	 -0.000000	diff=2.48033e-12
  0.000000	  0.000000	diff=1.34726e-12
  0.000000	  0.000000	diff=9.26865e-13
 -0.000004	 -0.000004	diff=5.99578e-11
 -0.000023	 -0.000023	diff=1.91308e-10
  0.000000	  0.000000	diff=1.19976e-13
  0.000000	  0.000000	diff=7.05247e-15
  0.000000	 -0.000000	diff=1.09949e-13
  0.000000	 -0.000000	diff=2.27843e-13
  0.000000	 -0.000000	diff=2.42457e-14
  0.000000	 -0.000000	diff=1.79603e-13
  0.000000	  0.000000	diff=3.11388e-14
  0.000000	  0.000000	diff=2.00706e-12
  0.000000	  0.000000	diff=1.57019e-13
  0.000000	  0.000000	diff=2.95527e-13
  0.000000	 -0.000000	diff=1.52901e-13
  0.000000	 -0.000000	diff=3.92817e-13
  0.000000	 -0.000000	diff=3.60098e-14
  0.000000	 -0.000000	diff=4.90439e-14
  0.000000	  0.000000	diff=1.85352e-12
  0.000000	  0.000000	diff=5.66502e-13
  0.000000	  0.000000	diff=7.26253e-13
  0.000000	  0.000000	diff=2.71998e-13
  0.000000	  0.000000	diff=8.01697e-13
 -0.000000	 -0.000000	diff=2.36827e-12
  0.000000	  0.000000	diff=1.75509e-12
  0.000000	  0.000000	diff=2.20127e-14
 -0.000000	 -0.000000	diff=1.34823e-10
 -0.000000	 -0.000000	diff=1.73939e-12
 -0.000000	 -0.000000	diff=3.94812e-13
 -0.000000	 -0.000000	diff=6.27526e-13
 -0.000000	 -0.000000	diff=2.25386e-12
  0.000000	  0.000000	diff=3.19353e-13
 -0.000000	 -0.000000	diff=6.05891e-13
 -0.000000	 -0.000000	diff=2.15424e-13
  0.000000	  0.000000	diff=1.43494e-12
 -0.000000	 -0.000000	diff=1.6767e-10
  local_diff=7.13341e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.40249e-12
  0.000000	  0.000000	diff=5.04987e-13
 -0.000000	 -0.000000	diff=1.53473e-12
  0.000000	  0.000000	diff=6.35361e-13
 -0.000000	 -0.000000	diff=1.29905e-12
  0.000000	  0.000000	diff=1.87157e-12
  0.000002	  0.000002	diff=8.14259e-13
  0.000006	  0.000006	diff=4.04085e-12
  0.000000	  0.000000	diff=7.47564e-13
  0.000000	  0.000000	diff=8.76135e-13
 -0.000000	 -0.000000	diff=3.37395e-13
  0.000000	  0.000000	diff=4.03439e-13
  0.000000	  0.000000	diff=2.47953e-12
  0.000000	  0.000000	diff=2.16167e-12
  0.000001	  0.000001	diff=1.54449e-11
  0.000010	  0.000010	diff=6.38905e-11
  0.000000	  0.000000	diff=2.19942e-12
  0.000000	  0.000000	diff=4.33362e-13
 -0.000000	 -0.000000	diff=3.98244e-13
  0.000000	  0.000000	diff=1.21578e-13
 -0.000000	 -0.000000	diff=9.58235e-13
  0.000000	  0.000000	diff=1.70763e-12
  0.000000	  0.000000	diff=2.77931e-10
  0.000000	  0.000000	diff=2.41483e-12
 -0.000000	 -0.000000	diff=1.36314e-12
 -0.000000	 -0.000000	diff=6.0234e-13
  0.000000	  0.000000	diff=7.9408e-13
 -0.000000	 -0.000000	diff=3.05744e-13
  0.000000	  0.000000	diff=1.39168e-12
 -0.000000	 -0.000000	diff=5.50346e-14
 -0.000000	 -0.000000	diff=1.30203e-12
 -0.000000	 -0.000000	diff=2.10634e-11
  local_diff=4.11486e-10
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=8.65718e-10
  0.000002	  0.000002	diff=1.87279e-09
 -0.000001	 -0.000001	diff=4.10162e-10
  0.000002	  0.000002	diff=8.87961e-10
  local_diff=4.03663e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=4.09644e-09
 -0.000003	 -0.000003	diff=2.12269e-09
 -0.000025	 -0.000025	diff=4.31602e-10
 -0.000001	 -0.000001	diff=9.39137e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.34761e-10
 -0.000001	 -0.000001	diff=3.65779e-10
 -0.000004	 -0.000004	diff=1.28977e-10
 -0.000000	 -0.000000	diff=2.88814e-10
  local_diff=9.2082e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=9.67714e-13
  0.000000	  0.000000	diff=1.1252e-14
  0.000000	  0.000000	diff=1.2103e-13
  0.000000	  0.000000	diff=1.41726e-15
  0.000000	 -0.000000	diff=4.87326e-13
  0.000000	  0.000000	diff=8.73032e-15
 -0.000000	 -0.000000	diff=1.90736e-13
 -0.000000	 -0.000000	diff=8.96194e-13
  0.000000	  0.000000	diff=2.29092e-13
  0.000000	 -0.000000	diff=1.31737e-14
  0.000000	 -0.000000	diff=1.17132e-13
  0.000000	  0.000000	diff=2.83932e-15
  0.000000	  0.000000	diff=1.59326e-13
  0.000000	 -0.000000	diff=8.03638e-15
 -0.000000	 -0.000000	diff=1.23867e-12
  0.000000	  0.000000	diff=2.73392e-12
  0.000000	  0.000000	diff=7.32364e-15
  0.000000	 -0.000000	diff=3.00779e-16
  0.000000	 -0.000000	diff=4.42331e-15
  0.000000	  0.000000	diff=8.65471e-17
  0.000000	  0.000000	diff=1.89346e-15
  0.000000	 -0.000000	diff=1.9707e-16
  0.000000	 -0.000000	diff=1.35782e-12
  0.000000	 -0.000000	diff=1.54061e-13
  0.000000	 -0.000000	diff=2.19222e-16
  0.000000	 -0.000000	diff=5.36782e-17
  0.000000	 -0.000000	diff=2.78903e-16
  0.000000	  0.000000	diff=3.16673e-17
  0.000000	 -0.000000	diff=1.90915e-16
  0.000000	 -0.000000	diff=2.67153e-17
  0.000000	  0.000000	diff=1.44488e-12
  0.000000	 -0.000000	diff=5.98631e-14
  local_diff=1.02182e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=3.5989e-15
  0.000000	 -0.000000	diff=5.3374e-15
  0.000000	  0.000000	diff=2.86811e-16
  0.000000	  0.000000	diff=2.17696e-16
  0.000000	 -0.000000	diff=1.91509e-15
  0.000000	 -0.000000	diff=3.43254e-15
  0.000000	  0.000000	diff=6.08789e-14
  0.000000	  0.000000	diff=1.51225e-12
  0.000000	 -0.000000	diff=2.68152e-16
  0.000000	 -0.000000	diff=2.11662e-15
  0.000000	  0.000000	diff=2.34141e-16
  0.000000	  0.000000	diff=3.12344e-16
  0.000000	 -0.000000	diff=3.14455e-16
  0.000000	 -0.000000	diff=1.41187e-15
 -0.000000	 -0.000000	diff=8.70521e-13
 -0.000000	 -0.000000	diff=4.45641e-13
  0.000000	  0.000000	diff=1.40958e-20
  0.000000	 -0.000000	diff=8.31185e-18
  0.000000	  0.000000	diff=2.67893e-17
  0.000000	  0.000000	diff=1.16284e-17
  0.000000	  0.000000	diff=2.07658e-17
  0.000000	  0.000000	diff=1.47617e-17
  0.000000	 -0.000000	diff=1.55434e-12
  0.000000	 -0.000000	diff=1.0506e-12
  0.000000	  0.000000	diff=6.96299e-18
  0.000000	 -0.000000	diff=2.11464e-17
  0.000000	  0.000000	diff=2.2162e-17
  0.000000	  0.000000	diff=3.75488e-17
  0.000000	  0.000000	diff=2.52647e-17
  0.000000	  0.000000	diff=2.39061e-17
  0.000000	  0.000000	diff=2.43134e-12
  0.000000	  0.000000	diff=7.45815e-14
  local_diff=8.01982e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.87302e-17
  0.000000	  0.000000	diff=8.39459e-17
  0.000000	 -0.000000	diff=3.13081e-18
  0.000000	  0.000000	diff=2.27343e-17
  0.000000	 -0.000000	diff=1.98365e-17
  0.000000	  0.000000	diff=7.60317e-17
  0.000000	  0.000000	diff=4.62514e-13
 -0.000000	 -0.000000	diff=7.4878e-13
  0.000000	 -0.000000	diff=8.14716e-17
  0.000000	  0.000000	diff=2.48424e-16
  0.000000	 -0.000000	diff=7.35033e-18
  0.000000	  0.000000	diff=4.0633e-17
  0.000000	 -0.000000	diff=5.26581e-17
  0.000000	  0.000000	diff=2.16394e-16
  0.000000	  0.000000	diff=2.86727e-13
 -0.000000	 -0.000000	diff=1.4126e-12
  0.000000	 -0.000000	diff=8.82558e-20
  0.000000	  0.000000	diff=2.98731e-19
  0.000000	 -0.000000	diff=3.87585e-19
  0.000000	  0.000000	diff=5.36797e-19
  0.000000	 -0.000000	diff=4.56219e-19
  0.000000	  0.000000	diff=8.25931e-19
  0.000000	 -0.000000	diff=1.01963e-12
  0.000000	  0.000000	diff=1.02361e-12
  0.000000	 -0.000000	diff=3.74104e-19
  0.000000	  0.000000	diff=2.00509e-18
  0.000000	 -0.000000	diff=5.75815e-19
  0.000000	  0.000000	diff=1.6485e-18
  0.000000	 -0.000000	diff=1.30386e-18
  0.000000	  0.000000	diff=3.84593e-18
  0.000000	  0.000000	diff=1.03942e-13
  0.000000	 -0.000000	diff=4.26501e-13
  local_diff=5.48519e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=9.1127e-13
  0.000000	  0.000000	diff=2.4357e-12
 -0.000000	 -0.000000	diff=1.73246e-12
  0.000000	  0.000000	diff=1.94258e-12
 -0.000000	 -0.000000	diff=9.59301e-13
  0.000000	  0.000000	diff=2.01634e-13
 -0.000000	 -0.000000	diff=1.15252e-13
  0.000000	  0.000000	diff=3.00362e-14
  local_diff=8.32823e-12
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=4.07477e-13
  0.000000	  0.000000	diff=7.82517e-13
  0.000000	  0.000000	diff=8.51259e-14
  0.000000	  0.000000	diff=1.86947e-13
 -0.000000	 -0.000000	diff=9.95516e-13
  0.000000	  0.000000	diff=5.25774e-13
 -0.000001	 -0.000001	diff=3.96384e-12
  0.000001	  0.000001	diff=8.88659e-12
  0.000000	  0.000000	diff=1.03748e-12
 -0.000000	 -0.000000	diff=2.39952e-13
 -0.000000	 -0.000000	diff=7.94327e-13
  0.000000	  0.000000	diff=1.10628e-13
  0.000000	  0.000000	diff=3.24414e-13
 -0.000000	 -0.000000	diff=4.56351e-13
  0.000002	  0.000002	diff=4.60943e-11
  0.000003	  0.000003	diff=5.26234e-11
  0.000000	  0.000000	diff=1.28126e-12
 -0.000000	 -0.000000	diff=1.20127e-12
 -0.000000	 -0.000000	diff=4.37163e-13
  0.000000	  0.000000	diff=3.36398e-13
  0.000000	  0.000000	diff=1.46088e-12
 -0.000000	 -0.000000	diff=1.11275e-12
  0.000000	  0.000000	diff=4.18244e-11
  0.000000	  0.000000	diff=7.26596e-13
  0.000000	  0.000000	diff=6.72794e-13
  0.000000	 -0.000000	diff=6.66665e-13
  0.000000	  0.000000	diff=4.61555e-13
 -0.000000	 -0.000000	diff=1.51904e-13
  0.000000	  0.000000	diff=5.48538e-13
 -0.000000	 -0.000000	diff=1.31465e-12
  0.000000	  0.000000	diff=9.7382e-13
  0.000000	  0.000000	diff=1.88067e-12
  local_diff=1.72566e-10
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=1.40241e-12
  0.000000	  0.000000	diff=1.55306e-12
  0.000000	  0.000000	diff=1.54109e-12
  0.000000	  0.000000	diff=1.34424e-12
 -0.000000	 -0.000000	diff=2.3328e-13
  0.000000	  0.000000	diff=3.28563e-13
 -0.000000	 -0.000000	diff=9.01052e-13
 -0.000000	 -0.000000	diff=1.71777e-12
  0.000000	  0.000000	diff=2.17501e-12
 -0.000000	 -0.000000	diff=1.37649e-12
 -0.000000	 -0.000000	diff=1.06829e-12
 -0.000000	 -0.000000	diff=1.12607e-13
  0.000000	  0.000000	diff=7.24565e-13
 -0.000000	 -0.000000	diff=2.48169e-13
  0.000001	  0.000001	diff=1.01988e-12
  0.000002	  0.000002	diff=1.21862e-12
  0.000000	  0.000000	diff=8.14528e-14
  0.000000	 -0.000000	diff=4.81711e-13
  0.000000	  0.000000	diff=6.53366e-14
  0.000000	 -0.000000	diff=1.67405e-13
  0.000000	  0.000000	diff=1.76695e-13
  0.000000	 -0.000000	diff=5.37627e-13
 -0.000000	 -0.000000	diff=1.85117e-11
  0.000000	  0.000000	diff=7.47049e-14
  0.000000	  0.000000	diff=2.17671e-13
  0.000000	 -0.000000	diff=5.00702e-13
  0.000000	  0.000000	diff=2.0542e-14
  0.000000	 -0.000000	diff=1.93917e-13
  0.000000	  0.000000	diff=2.50713e-13
  0.000000	 -0.000000	diff=6.17451e-13
  0.000000	  0.000000	diff=8.89372e-13
  0.000000	  0.000000	diff=1.86575e-11
  local_diff=5.84096e-11
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=2.58887e-13
  0.000000	  0.000000	diff=2.24703e-13
  0.000000	  0.000000	diff=2.9277e-13
  0.000000	 -0.000000	diff=1.97359e-14
  0.000000	  0.000000	diff=2.32281e-13
  0.000000	  0.000000	diff=5.65917e-13
  0.000001	  0.000001	diff=5.84093e-14
  0.000000	  0.000000	diff=7.66325e-13
  0.000000	  0.000000	diff=1.48594e-13
 -0.000000	 -0.000000	diff=1.25294e-12
  0.000000	  0.000000	diff=1.14856e-13
  0.000000	 -0.000000	diff=5.33947e-13
  0.000000	  0.000000	diff=1.6384e-13
  0.000000	 -0.000000	diff=1.8336e-12
  0.000000	  0.000000	diff=1.29214e-13
 -0.000004	 -0.000004	diff=7.07125e-13
  0.000000	 -0.000000	diff=1.19266e-14
  0.000000	  0.000000	diff=2.35618e-14
  0.000000	 -0.000000	diff=4.62855e-15
  0.000000	  0.000000	diff=1.02264e-14
  0.000000	 -0.000000	diff=1.9626e-14
  0.000000	  0.000000	diff=3.16893e-14
 -0.000000	 -0.000000	diff=2.4499e-11
  0.000000	  0.000000	diff=7.6968e-13
  0.000000	 -0.000000	diff=5.09017e-15
  0.000000	  0.000000	diff=1.08407e-14
  0.000000	 -0.000000	diff=1.57336e-15
  0.000000	  0.000000	diff=4.75861e-15
  0.000000	 -0.000000	diff=8.04192e-15
  0.000000	  0.000000	diff=1.46401e-14
 -0.000000	 -0.000000	diff=1.53804e-13
  0.000000	  0.000000	diff=1.43902e-11
  local_diff=4.72625e-11
# W_emb_tgt_char, [2 5]
  0.000001	  0.000001	diff=3.82051e-10
 -0.000002	 -0.000002	diff=4.9486e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=1.41123e-10
 -0.000002	 -0.000002	diff=8.67335e-11
 -0.000000	 -0.000000	diff=4.44484e-11
 -0.000000	 -0.000000	diff=1.35496e-10
 -0.000000	 -0.000000	diff=2.43801e-11
 -0.000000	 -0.000000	diff=1.34412e-10
  local_diff=9.9813e-10
# W_h, [2 4]
 -0.000002	 -0.000002	diff=6.89737e-13
  0.000006	  0.000006	diff=6.24583e-13
  0.000003	  0.000003	diff=2.76791e-12
 -0.000008	 -0.000008	diff=7.07582e-13
 -0.000003	 -0.000003	diff=6.19934e-12
  0.000002	  0.000002	diff=1.30532e-12
 -0.000011	 -0.000011	diff=4.90876e-11
 -0.000009	 -0.000009	diff=4.77995e-11
  local_diff=1.09182e-10
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=2.95413e-12
  0.000011	  0.000011	diff=2.73981e-12
 -0.000003	 -0.000003	diff=1.34567e-12
  0.000008	  0.000008	diff=2.85658e-12
 -0.000002	 -0.000002	diff=1.47251e-12
 -0.000018	 -0.000018	diff=1.69866e-12
  0.000011	  0.000011	diff=1.77743e-12
  0.000005	  0.000005	diff=2.10383e-12
  0.000008	  0.000008	diff=1.48779e-12
 -0.000006	 -0.000006	diff=1.4588e-12
  local_diff=1.98952e-11
# W_soft_char, [5 2]
  0.000003	  0.000003	diff=8.34652e-13
 -0.000002	 -0.000002	diff=2.39294e-13
 -0.000000	 -0.000000	diff=2.06296e-12
 -0.000000	 -0.000000	diff=7.91298e-13
 -0.000000	 -0.000000	diff=9.75152e-13
  0.000002	  0.000002	diff=7.84891e-13
 -0.000004	 -0.000004	diff=9.76395e-13
  0.000001	  0.000001	diff=9.55952e-13
  0.000000	  0.000000	diff=9.52527e-13
  0.000000	  0.000000	diff=1.07746e-12
  local_diff=9.65058e-12
# Num params=404, abs_diff=1.66335e-08
Elapsed time is 11.052379 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.63664e-13
  0.000000	  0.000000	diff=4.35402e-13
  0.000000	  0.000000	diff=1.53979e-13
  0.000000	  0.000000	diff=8.8441e-13
  0.000000	  0.000000	diff=7.66865e-14
  0.000000	  0.000000	diff=5.33883e-13
 -0.000001	 -0.000001	diff=4.96034e-11
  0.000000	  0.000000	diff=5.06322e-12
 -0.000000	 -0.000000	diff=8.08706e-13
 -0.000000	 -0.000000	diff=7.79394e-14
 -0.000000	 -0.000000	diff=1.06896e-13
 -0.000000	 -0.000000	diff=2.76668e-13
 -0.000000	 -0.000000	diff=2.22852e-13
 -0.000000	 -0.000000	diff=2.36946e-13
  0.000002	  0.000002	diff=1.17868e-10
 -0.000001	 -0.000001	diff=1.00996e-11
 -0.000000	 -0.000000	diff=9.4589e-13
 -0.000000	 -0.000000	diff=2.59092e-13
 -0.000000	 -0.000000	diff=1.17999e-13
  0.000000	  0.000000	diff=9.31756e-13
 -0.000000	 -0.000000	diff=9.65724e-13
 -0.000000	 -0.000000	diff=8.64469e-14
  0.000000	  0.000000	diff=2.48677e-11
  0.000000	  0.000000	diff=3.06156e-13
  0.000000	  0.000000	diff=3.6359e-14
  0.000000	  0.000000	diff=1.8982e-13
  0.000000	  0.000000	diff=4.18404e-13
 -0.000000	 -0.000000	diff=4.5814e-13
  0.000000	  0.000000	diff=4.87665e-13
  0.000000	  0.000000	diff=8.49808e-13
 -0.000000	 -0.000000	diff=4.24145e-13
 -0.000000	 -0.000000	diff=6.4146e-11
  local_diff=2.82203e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.59886e-13
 -0.000000	 -0.000000	diff=5.24496e-13
  0.000000	  0.000000	diff=2.05963e-13
 -0.000000	 -0.000000	diff=7.43901e-13
  0.000000	  0.000000	diff=5.96495e-13
 -0.000000	 -0.000000	diff=1.38971e-13
 -0.000010	 -0.000010	diff=2.22676e-12
 -0.000013	 -0.000013	diff=5.86683e-13
 -0.000000	 -0.000000	diff=6.85085e-13
  0.000000	  0.000000	diff=2.97558e-13
 -0.000000	 -0.000000	diff=3.51835e-13
  0.000000	  0.000000	diff=4.70278e-14
 -0.000000	 -0.000000	diff=5.78358e-13
  0.000000	  0.000000	diff=2.6538e-13
  0.000015	  0.000015	diff=2.20174e-12
  0.000018	  0.000018	diff=2.10027e-12
  0.000000	  0.000000	diff=5.10188e-13
 -0.000000	 -0.000000	diff=3.30091e-13
  0.000000	  0.000000	diff=7.41814e-13
 -0.000000	 -0.000000	diff=2.95706e-13
  0.000000	  0.000000	diff=1.35796e-12
 -0.000000	 -0.000000	diff=4.11499e-13
 -0.000000	 -0.000000	diff=9.04327e-11
 -0.000000	 -0.000000	diff=4.98324e-13
 -0.000000	 -0.000000	diff=4.8434e-13
  0.000000	  0.000000	diff=4.12431e-13
 -0.000000	 -0.000000	diff=7.81639e-14
  0.000000	  0.000000	diff=1.99982e-13
 -0.000000	 -0.000000	diff=1.20611e-12
  0.000000	  0.000000	diff=2.73237e-13
  0.000000	  0.000000	diff=1.36994e-13
  0.000000	  0.000000	diff=2.45198e-10
  local_diff=3.54278e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.30836e-13
  0.000000	  0.000000	diff=7.52078e-14
 -0.000000	 -0.000000	diff=7.18008e-13
 -0.000000	 -0.000000	diff=4.16529e-13
 -0.000000	 -0.000000	diff=2.63437e-13
  0.000000	  0.000000	diff=4.50158e-13
 -0.000003	 -0.000003	diff=5.3978e-11
 -0.000002	 -0.000002	diff=1.10085e-10
  0.000000	  0.000000	diff=7.14665e-14
 -0.000000	 -0.000000	diff=3.97704e-13
  0.000000	  0.000000	diff=8.93229e-13
  0.000000	  0.000000	diff=1.24955e-12
  0.000000	  0.000000	diff=4.93469e-13
 -0.000000	 -0.000000	diff=2.35032e-13
 -0.000005	 -0.000005	diff=1.017e-10
  0.000008	  0.000008	diff=1.5084e-10
  0.000000	  0.000000	diff=3.83775e-13
  0.000000	 -0.000000	diff=1.02176e-12
 -0.000000	 -0.000000	diff=9.51102e-13
  0.000000	  0.000000	diff=8.28164e-13
  0.000000	 -0.000000	diff=5.38481e-14
  0.000000	 -0.000000	diff=3.37974e-13
  0.000000	  0.000000	diff=2.15015e-14
 -0.000000	 -0.000000	diff=2.22737e-13
 -0.000000	 -0.000000	diff=7.20568e-13
  0.000000	  0.000000	diff=5.21513e-13
  0.000000	  0.000000	diff=7.1079e-13
  0.000000	 -0.000000	diff=4.86628e-13
  0.000000	 -0.000000	diff=6.24178e-15
  0.000000	  0.000000	diff=3.14755e-13
 -0.000000	 -0.000000	diff=4.69408e-13
  0.000000	  0.000000	diff=3.96809e-13
  0.000000	  0.000000	diff=3.24405e-13
 -0.000000	 -0.000000	diff=5.48932e-13
  0.000000	  0.000000	diff=6.67862e-13
  0.000000	  0.000000	diff=8.66756e-13
  0.000000	  0.000000	diff=2.93909e-13
 -0.000000	 -0.000000	diff=6.34497e-13
 -0.000000	 -0.000000	diff=7.84869e-10
  0.000000	  0.000000	diff=8.2932e-12
 -0.000000	 -0.000000	diff=7.21058e-13
  0.000000	  0.000000	diff=6.47989e-13
  0.000000	  0.000000	diff=1.95446e-13
 -0.000000	 -0.000000	diff=2.79047e-13
 -0.000000	 -0.000000	diff=6.54214e-13
  0.000000	  0.000000	diff=9.55887e-14
 -0.000000	 -0.000000	diff=4.73683e-12
 -0.000000	 -0.000000	diff=1.64656e-10
  local_diff=1.39793e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.56627e-13
 -0.000000	 -0.000000	diff=2.8651e-13
 -0.000000	 -0.000000	diff=1.292e-12
 -0.000000	 -0.000000	diff=4.18776e-13
  0.000000	  0.000000	diff=5.84184e-13
 -0.000000	 -0.000000	diff=2.85181e-13
 -0.000005	 -0.000005	diff=2.94386e-11
 -0.000002	 -0.000002	diff=1.44854e-12
  0.000000	  0.000000	diff=1.97406e-13
 -0.000000	 -0.000000	diff=9.85751e-14
 -0.000000	 -0.000000	diff=9.73774e-14
 -0.000000	 -0.000000	diff=6.79093e-13
  0.000000	  0.000000	diff=1.51153e-12
 -0.000000	 -0.000000	diff=4.1157e-13
 -0.000012	 -0.000012	diff=1.92866e-10
  0.000003	  0.000003	diff=2.25878e-13
  0.000000	  0.000000	diff=2.23205e-13
 -0.000000	 -0.000000	diff=5.12979e-13
 -0.000000	 -0.000000	diff=3.25277e-13
 -0.000000	 -0.000000	diff=7.48068e-13
 -0.000000	 -0.000000	diff=6.01617e-14
 -0.000000	 -0.000000	diff=2.72222e-13
  0.000000	  0.000000	diff=1.01678e-09
 -0.000000	 -0.000000	diff=6.86145e-12
 -0.000000	 -0.000000	diff=2.40609e-13
  0.000000	  0.000000	diff=8.5436e-14
  0.000000	  0.000000	diff=1.08708e-13
  0.000000	  0.000000	diff=1.84543e-14
  0.000000	  0.000000	diff=1.48858e-13
  0.000000	  0.000000	diff=3.26713e-13
 -0.000001	 -0.000001	diff=6.75238e-12
  0.000000	  0.000000	diff=1.78311e-09
  local_diff=3.04688e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.13257e-10
 -0.000002	 -0.000002	diff=1.1607e-09
  0.000001	  0.000001	diff=2.30419e-10
 -0.000001	 -0.000001	diff=9.34861e-10
  local_diff=2.53924e-09
# W_emb_tgt, [2 5]
 -0.000001	 -0.000001	diff=2.17298e-08
 -0.000007	 -0.000007	diff=5.1282e-09
  0.000006	  0.000006	diff=6.3696e-09
 -0.000002	 -0.000002	diff=1.20515e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.02644e-09
 -0.000003	 -0.000003	diff=2.43642e-09
 -0.000001	 -0.000001	diff=3.43747e-09
 -0.000002	 -0.000002	diff=1.7029e-09
  local_diff=4.7036e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=2.00027e-13
  0.000000	 -0.000000	diff=3.53876e-15
  0.000000	  0.000000	diff=1.03515e-13
  0.000000	 -0.000000	diff=1.2221e-14
  0.000000	 -0.000000	diff=4.70004e-13
  0.000000	 -0.000000	diff=1.68453e-14
 -0.000000	 -0.000000	diff=8.99824e-13
 -0.000000	 -0.000000	diff=1.63797e-13
  0.000000	  0.000000	diff=4.42753e-13
 -0.000000	  0.000000	diff=1.47472e-12
 -0.000000	 -0.000000	diff=5.68026e-13
  0.000000	 -0.000000	diff=5.20854e-15
  0.000000	  0.000000	diff=1.41086e-13
 -0.000000	  0.000000	diff=7.45126e-13
 -0.000000	 -0.000000	diff=5.52633e-13
 -0.000000	 -0.000000	diff=7.52671e-14
  0.000000	  0.000000	diff=7.5239e-15
  0.000000	  0.000000	diff=7.89914e-16
  0.000000	 -0.000000	diff=4.65839e-15
  0.000000	 -0.000000	diff=8.22771e-17
  0.000000	  0.000000	diff=2.10675e-15
  0.000000	  0.000000	diff=5.02055e-16
  0.000000	 -0.000000	diff=5.62703e-13
  0.000000	 -0.000000	diff=3.52206e-13
  0.000000	  0.000000	diff=1.96603e-16
  0.000000	  0.000000	diff=7.09577e-17
  0.000000	 -0.000000	diff=4.95015e-16
  0.000000	 -0.000000	diff=1.65985e-16
  0.000000	 -0.000000	diff=1.21208e-16
  0.000000	 -0.000000	diff=3.38057e-17
  0.000000	  0.000000	diff=3.51135e-13
  0.000000	  0.000000	diff=2.89279e-13
  local_diff=7.44667e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=2.91691e-15
  0.000000	 -0.000000	diff=8.63635e-15
  0.000000	  0.000000	diff=7.1753e-16
  0.000000	  0.000000	diff=7.12669e-16
  0.000000	 -0.000000	diff=1.0178e-15
  0.000000	 -0.000000	diff=4.6243e-15
 -0.000000	 -0.000000	diff=2.15322e-13
  0.000000	  0.000000	diff=3.44698e-13
  0.000000	 -0.000000	diff=2.80882e-16
  0.000000	 -0.000000	diff=2.98484e-15
  0.000000	  0.000000	diff=4.12756e-16
  0.000000	  0.000000	diff=7.5103e-16
  0.000000	  0.000000	diff=8.56392e-18
  0.000000	 -0.000000	diff=1.45252e-15
 -0.000000	 -0.000000	diff=6.02947e-15
 -0.000000	 -0.000000	diff=2.05732e-13
  0.000000	 -0.000000	diff=6.85058e-18
  0.000000	 -0.000000	diff=4.09826e-17
  0.000000	  0.000000	diff=2.09996e-17
  0.000000	  0.000000	diff=2.36121e-17
  0.000000	  0.000000	diff=8.94147e-18
  0.000000	  0.000000	diff=2.94921e-18
  0.000000	 -0.000000	diff=6.68004e-13
  0.000000	 -0.000000	diff=7.71103e-13
  0.000000	  0.000000	diff=2.49194e-18
  0.000000	 -0.000000	diff=5.8912e-17
  0.000000	  0.000000	diff=2.12741e-17
  0.000000	  0.000000	diff=7.37673e-17
  0.000000	  0.000000	diff=2.07938e-17
  0.000000	  0.000000	diff=2.95272e-17
 -0.000000	  0.000000	diff=1.11573e-12
  0.000000	  0.000000	diff=3.3953e-13
  local_diff=3.69097e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=5.16122e-18
  0.000000	  0.000000	diff=7.88773e-17
  0.000000	 -0.000000	diff=4.33758e-18
  0.000000	  0.000000	diff=2.18858e-17
  0.000000	 -0.000000	diff=5.95911e-18
  0.000000	  0.000000	diff=6.17915e-17
 -0.000000	 -0.000000	diff=2.73834e-13
 -0.000000	 -0.000000	diff=2.06292e-13
  0.000000	 -0.000000	diff=3.10174e-17
  0.000000	  0.000000	diff=2.35991e-16
  0.000000	 -0.000000	diff=5.66031e-18
  0.000000	  0.000000	diff=1.67227e-17
  0.000000	 -0.000000	diff=9.24582e-18
  0.000000	  0.000000	diff=1.49581e-16
 -0.000000	 -0.000000	diff=9.25256e-13
  0.000000	  0.000000	diff=1.24379e-12
  0.000000	 -0.000000	diff=3.77938e-20
  0.000000	  0.000000	diff=5.71002e-19
  0.000000	 -0.000000	diff=2.76035e-19
  0.000000	  0.000000	diff=8.01838e-19
  0.000000	 -0.000000	diff=3.05801e-19
  0.000000	  0.000000	diff=1.36358e-18
 -0.000000	 -0.000000	diff=3.18071e-13
  0.000000	  0.000000	diff=2.74981e-14
  0.000000	  0.000000	diff=3.00703e-19
  0.000000	  0.000000	diff=1.01094e-18
  0.000000	 -0.000000	diff=3.94516e-19
  0.000000	  0.000000	diff=2.1505e-18
  0.000000	 -0.000000	diff=4.86068e-19
  0.000000	  0.000000	diff=3.73957e-18
 -0.000000	 -0.000000	diff=5.29717e-13
  0.000000	  0.000000	diff=1.01136e-13
  local_diff=3.62623e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.07627e-13
  0.000000	  0.000000	diff=5.274e-13
 -0.000000	 -0.000000	diff=1.61956e-13
  0.000000	  0.000000	diff=7.24399e-13
 -0.000000	 -0.000000	diff=7.95117e-13
  0.000000	  0.000000	diff=2.56264e-13
 -0.000000	 -0.000000	diff=3.86068e-14
  0.000000	  0.000000	diff=8.81761e-13
  local_diff=4.09313e-12
# W_h, [2 4]
  0.000003	  0.000003	diff=4.51324e-13
  0.000012	  0.000012	diff=5.05197e-13
 -0.000004	 -0.000004	diff=9.37328e-13
 -0.000016	 -0.000016	diff=2.25139e-13
  0.000003	  0.000003	diff=2.26244e-12
  0.000006	  0.000006	diff=1.0405e-11
  0.000008	  0.000008	diff=1.30059e-10
  0.000002	  0.000002	diff=1.53516e-10
  local_diff=2.98361e-10
# W_soft, [5 2]
 -0.000027	 -0.000027	diff=2.57295e-13
  0.000009	  0.000009	diff=4.11853e-13
  0.000004	  0.000004	diff=5.48978e-13
  0.000005	  0.000005	diff=4.69364e-13
  0.000009	  0.000009	diff=2.48185e-13
  0.000026	  0.000026	diff=2.82412e-14
 -0.000009	 -0.000009	diff=1.07672e-12
 -0.000005	 -0.000005	diff=1.51291e-13
 -0.000005	 -0.000005	diff=1.12215e-12
 -0.000008	 -0.000008	diff=8.22836e-13
  local_diff=5.13691e-12
# Num params=288, abs_diff=5.49789e-08
Elapsed time is 5.199897 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.14024e-11
  0.000000	  0.000000	diff=2.98208e-12
  0.000000	  0.000000	diff=3.20668e-13
  0.000000	  0.000000	diff=3.00746e-12
 -0.000000	 -0.000000	diff=8.11305e-12
 -0.000000	 -0.000000	diff=1.51222e-11
  0.000004	  0.000004	diff=9.07591e-12
  0.000001	  0.000001	diff=2.00305e-11
  0.000000	  0.000000	diff=1.34545e-14
 -0.000000	 -0.000000	diff=2.08171e-12
 -0.000000	 -0.000000	diff=4.58539e-12
 -0.000000	 -0.000000	diff=5.18749e-12
  0.000000	  0.000000	diff=2.16616e-12
  0.000000	  0.000000	diff=8.33059e-12
 -0.000005	 -0.000005	diff=2.98857e-11
 -0.000001	 -0.000001	diff=1.5515e-11
 -0.000000	 -0.000000	diff=1.94274e-14
 -0.000000	 -0.000000	diff=2.10669e-12
  0.000000	  0.000000	diff=3.32661e-12
 -0.000000	 -0.000000	diff=4.49648e-12
  0.000000	  0.000000	diff=2.91522e-12
  0.000000	  0.000000	diff=1.39426e-15
 -0.000000	 -0.000000	diff=2.45317e-10
 -0.000000	 -0.000000	diff=9.17581e-12
  0.000000	  0.000000	diff=2.3956e-12
  0.000000	  0.000000	diff=2.03627e-13
 -0.000000	 -0.000000	diff=3.49187e-12
  0.000000	  0.000000	diff=5.07778e-13
 -0.000000	 -0.000000	diff=9.13635e-13
 -0.000000	 -0.000000	diff=5.37462e-12
  0.000000	  0.000000	diff=1.87025e-12
  0.000000	  0.000000	diff=3.84572e-11
  local_diff=4.58393e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.3532e-12
  0.000000	  0.000000	diff=2.27314e-12
 -0.000000	 -0.000000	diff=5.45822e-12
  0.000000	  0.000000	diff=4.76317e-12
 -0.000000	 -0.000000	diff=5.48685e-12
  0.000000	  0.000000	diff=4.3256e-12
  0.000002	  0.000002	diff=1.51059e-11
  0.000006	  0.000006	diff=3.90026e-12
  0.000000	  0.000000	diff=1.31381e-12
 -0.000000	 -0.000000	diff=3.72471e-12
  0.000000	  0.000000	diff=2.09761e-12
 -0.000000	 -0.000000	diff=3.14202e-12
  0.000000	  0.000000	diff=2.43423e-12
 -0.000000	 -0.000000	diff=1.76927e-12
 -0.000002	 -0.000002	diff=8.75618e-13
 -0.000005	 -0.000005	diff=4.37712e-12
  0.000000	 -0.000000	diff=5.30346e-12
  0.000000	  0.000000	diff=3.93661e-12
  0.000000	 -0.000000	diff=1.4131e-12
  0.000000	  0.000000	diff=5.41382e-12
  0.000000	 -0.000000	diff=1.09876e-12
  0.000000	  0.000000	diff=2.33232e-12
  0.000000	  0.000000	diff=6.13274e-11
  0.000000	  0.000000	diff=1.10267e-11
  0.000000	  0.000000	diff=4.84569e-12
 -0.000000	 -0.000000	diff=2.33762e-12
  0.000000	  0.000000	diff=1.74121e-12
 -0.000000	 -0.000000	diff=4.14366e-12
  0.000000	  0.000000	diff=1.39133e-12
  0.000000	 -0.000000	diff=2.82552e-12
 -0.000000	 -0.000000	diff=3.1798e-12
 -0.000000	 -0.000000	diff=3.28374e-10
  local_diff=5.07092e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.33495e-12
 -0.000000	 -0.000000	diff=1.20503e-12
 -0.000000	 -0.000000	diff=3.70078e-12
  0.000000	  0.000000	diff=3.76232e-12
 -0.000000	 -0.000000	diff=3.83989e-12
 -0.000000	 -0.000000	diff=1.00957e-11
  0.000001	  0.000001	diff=2.32819e-11
  0.000013	  0.000013	diff=9.69473e-11
  0.000000	  0.000000	diff=1.9034e-12
  0.000000	  0.000000	diff=2.21235e-12
  0.000000	  0.000000	diff=2.52327e-12
 -0.000000	 -0.000000	diff=1.40833e-11
  0.000000	  0.000000	diff=1.6276e-12
  0.000000	  0.000000	diff=4.02187e-12
 -0.000004	 -0.000004	diff=5.17548e-11
 -0.000023	 -0.000023	diff=1.91501e-10
  0.000000	  0.000000	diff=1.1998e-13
  0.000000	  0.000000	diff=7.05896e-15
  0.000000	 -0.000000	diff=1.0995e-13
  0.000000	 -0.000000	diff=2.27845e-13
  0.000000	 -0.000000	diff=2.42436e-14
  0.000000	 -0.000000	diff=1.79596e-13
  0.000000	  0.000000	diff=3.7093e-14
  0.000000	  0.000000	diff=1.99316e-12
  0.000000	  0.000000	diff=1.57025e-13
  0.000000	  0.000000	diff=2.95532e-13
  0.000000	 -0.000000	diff=1.52903e-13
  0.000000	 -0.000000	diff=3.92815e-13
  0.000000	 -0.000000	diff=3.60076e-14
  0.000000	 -0.000000	diff=4.90345e-14
  0.000000	  0.000000	diff=1.84508e-12
  0.000000	  0.000000	diff=3.39665e-12
  0.000000	  0.000000	diff=4.95763e-12
  0.000000	  0.000000	diff=5.41791e-12
  0.000000	  0.000000	diff=2.03859e-12
 -0.000000	 -0.000000	diff=3.3217e-12
  0.000000	  0.000000	diff=1.08876e-12
  0.000000	  0.000000	diff=2.07684e-14
 -0.000000	 -0.000000	diff=1.45011e-10
 -0.000000	 -0.000000	diff=5.69938e-12
 -0.000000	 -0.000000	diff=3.23858e-12
 -0.000000	 -0.000000	diff=6.20354e-13
 -0.000000	 -0.000000	diff=5.0961e-12
  0.000000	  0.000000	diff=5.3723e-12
 -0.000000	 -0.000000	diff=3.44885e-12
 -0.000000	 -0.000000	diff=2.62678e-12
  0.000000	  0.000000	diff=2.10862e-12
 -0.000000	 -0.000000	diff=1.68437e-10
  local_diff=7.85323e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.24281e-12
  0.000000	  0.000000	diff=5.02904e-13
 -0.000000	 -0.000000	diff=1.30934e-12
  0.000000	  0.000000	diff=3.46062e-12
 -0.000000	 -0.000000	diff=1.54696e-12
  0.000000	  0.000000	diff=1.88536e-12
  0.000002	  0.000002	diff=1.53455e-11
  0.000006	  0.000006	diff=1.09483e-12
  0.000000	  0.000000	diff=2.09741e-12
  0.000000	  0.000000	diff=1.96993e-12
 -0.000000	 -0.000000	diff=5.34739e-12
  0.000000	  0.000000	diff=2.43403e-12
  0.000000	  0.000000	diff=3.65188e-13
  0.000000	  0.000000	diff=3.52736e-12
  0.000001	  0.000001	diff=1.3871e-11
  0.000010	  0.000010	diff=6.98565e-11
  0.000000	  0.000000	diff=3.48489e-12
  0.000000	  0.000000	diff=6.11776e-12
 -0.000000	 -0.000000	diff=2.44408e-12
  0.000000	  0.000000	diff=1.22567e-13
  0.000000	 -0.000000	diff=3.80027e-12
  0.000000	  0.000000	diff=4.55086e-12
  0.000000	  0.000000	diff=2.71857e-10
  0.000000	  0.000000	diff=2.15899e-12
  0.000000	 -0.000000	diff=4.20526e-12
  0.000000	 -0.000000	diff=5.08186e-12
  0.000000	  0.000000	diff=7.94267e-13
 -0.000000	 -0.000000	diff=5.37728e-12
  0.000000	  0.000000	diff=4.29251e-12
 -0.000000	 -0.000000	diff=5.34797e-14
 -0.000000	 -0.000000	diff=9.75793e-12
 -0.000000	 -0.000000	diff=3.11547e-11
  local_diff=4.84111e-10
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=8.79896e-10
  0.000002	  0.000002	diff=1.86754e-09
 -0.000001	 -0.000001	diff=4.32076e-10
  0.000002	  0.000002	diff=8.83395e-10
  local_diff=4.06291e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=4.1051e-09
 -0.000003	 -0.000003	diff=2.11471e-09
 -0.000025	 -0.000025	diff=4.36766e-10
 -0.000001	 -0.000001	diff=9.3722e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.4179e-10
 -0.000001	 -0.000001	diff=3.62327e-10
 -0.000004	 -0.000004	diff=1.13892e-10
 -0.000000	 -0.000000	diff=2.95181e-10
  local_diff=9.20698e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=9.67698e-13
  0.000000	  0.000000	diff=1.12535e-14
  0.000000	  0.000000	diff=1.21029e-13
  0.000000	  0.000000	diff=1.41743e-15
  0.000000	 -0.000000	diff=4.87315e-13
  0.000000	  0.000000	diff=8.7314e-15
 -0.000000	 -0.000000	diff=2.6599e-12
 -0.000000	 -0.000000	diff=1.94413e-12
  0.000000	  0.000000	diff=2.29079e-13
  0.000000	 -0.000000	diff=1.31743e-14
  0.000000	 -0.000000	diff=1.17125e-13
  0.000000	  0.000000	diff=2.83956e-15
  0.000000	  0.000000	diff=1.59323e-13
  0.000000	 -0.000000	diff=8.0366e-15
 -0.000000	 -0.000000	diff=4.08068e-12
  0.000000	  0.000000	diff=2.95062e-12
  0.000000	  0.000000	diff=7.32341e-15
  0.000000	 -0.000000	diff=3.00814e-16
  0.000000	 -0.000000	diff=4.42322e-15
  0.000000	  0.000000	diff=8.65586e-17
  0.000000	  0.000000	diff=1.89337e-15
  0.000000	 -0.000000	diff=1.97091e-16
  0.000000	 -0.000000	diff=1.35795e-12
  0.000000	 -0.000000	diff=1.54089e-13
  0.000000	 -0.000000	diff=2.19236e-16
  0.000000	 -0.000000	diff=5.36827e-17
  0.000000	 -0.000000	diff=2.78851e-16
  0.000000	  0.000000	diff=3.167e-17
  0.000000	 -0.000000	diff=1.90892e-16
  0.000000	 -0.000000	diff=2.67177e-17
  0.000000	  0.000000	diff=1.44487e-12
  0.000000	 -0.000000	diff=5.98661e-14
  local_diff=1.67941e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=3.59885e-15
  0.000000	 -0.000000	diff=5.33727e-15
  0.000000	  0.000000	diff=2.86793e-16
  0.000000	  0.000000	diff=2.17678e-16
  0.000000	 -0.000000	diff=1.91508e-15
  0.000000	 -0.000000	diff=3.43252e-15
  0.000000	  0.000000	diff=2.89891e-12
  0.000000	  0.000000	diff=1.33393e-12
  0.000000	 -0.000000	diff=2.68135e-16
  0.000000	 -0.000000	diff=2.11658e-15
  0.000000	  0.000000	diff=2.34126e-16
  0.000000	  0.000000	diff=3.12315e-16
  0.000000	 -0.000000	diff=3.14469e-16
  0.000000	 -0.000000	diff=1.41189e-15
 -0.000000	 -0.000000	diff=8.70094e-13
 -0.000000	 -0.000000	diff=5.23919e-12
  0.000000	  0.000000	diff=1.41761e-20
  0.000000	 -0.000000	diff=8.3102e-18
  0.000000	  0.000000	diff=2.67894e-17
  0.000000	  0.000000	diff=1.16278e-17
  0.000000	  0.000000	diff=2.07657e-17
  0.000000	  0.000000	diff=1.47624e-17
  0.000000	 -0.000000	diff=1.55439e-12
  0.000000	 -0.000000	diff=1.05065e-12
  0.000000	  0.000000	diff=6.9625e-18
  0.000000	 -0.000000	diff=2.11445e-17
  0.000000	  0.000000	diff=2.21613e-17
  0.000000	  0.000000	diff=3.75462e-17
  0.000000	  0.000000	diff=2.52632e-17
  0.000000	  0.000000	diff=2.39054e-17
  0.000000	  0.000000	diff=4.10738e-13
  0.000000	  0.000000	diff=7.44977e-14
  local_diff=1.34521e-11
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.873e-17
  0.000000	  0.000000	diff=8.39451e-17
  0.000000	 -0.000000	diff=3.13049e-18
  0.000000	  0.000000	diff=2.27333e-17
  0.000000	 -0.000000	diff=1.98364e-17
  0.000000	  0.000000	diff=7.6031e-17
  0.000000	  0.000000	diff=5.22405e-12
 -0.000000	 -0.000000	diff=4.93914e-12
  0.000000	 -0.000000	diff=8.14713e-17
  0.000000	  0.000000	diff=2.48422e-16
  0.000000	 -0.000000	diff=7.34996e-18
  0.000000	  0.000000	diff=4.06326e-17
  0.000000	 -0.000000	diff=5.26584e-17
  0.000000	  0.000000	diff=2.16397e-16
  0.000000	  0.000000	diff=2.82912e-13
 -0.000000	 -0.000000	diff=4.27818e-12
  0.000000	 -0.000000	diff=8.82541e-20
  0.000000	  0.000000	diff=2.98701e-19
  0.000000	 -0.000000	diff=3.87576e-19
  0.000000	  0.000000	diff=5.36755e-19
  0.000000	 -0.000000	diff=4.56209e-19
  0.000000	  0.000000	diff=8.2586e-19
  0.000000	 -0.000000	diff=1.01961e-12
  0.000000	  0.000000	diff=1.02358e-12
  0.000000	 -0.000000	diff=3.74106e-19
  0.000000	  0.000000	diff=2.00506e-18
  0.000000	 -0.000000	diff=5.75788e-19
  0.000000	  0.000000	diff=1.6484e-18
  0.000000	 -0.000000	diff=1.30383e-18
  0.000000	  0.000000	diff=3.84579e-18
  0.000000	  0.000000	diff=1.04045e-13
  0.000000	 -0.000000	diff=4.26662e-13
  local_diff=1.72991e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=6.59447e-12
  0.000000	  0.000000	diff=2.43686e-12
 -0.000000	 -0.000000	diff=1.7344e-12
  0.000000	  0.000000	diff=9.01607e-13
 -0.000000	 -0.000000	diff=4.72064e-12
  0.000000	  0.000000	diff=2.64513e-12
 -0.000000	 -0.000000	diff=2.72293e-12
  0.000000	  0.000000	diff=2.86799e-12
  local_diff=2.4624e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.60957e-12
  0.000000	  0.000000	diff=7.82517e-12
  0.000000	  0.000000	diff=4.83308e-12
  0.000000	  0.000000	diff=7.55381e-12
 -0.000000	 -0.000000	diff=1.41352e-12
  0.000000	  0.000000	diff=4.26598e-13
 -0.000005	 -0.000005	diff=5.66914e-11
  0.000007	  0.000007	diff=8.88659e-11
  0.000000	  0.000000	diff=9.93933e-13
 -0.000000	 -0.000000	diff=3.28483e-12
 -0.000000	 -0.000000	diff=9.10976e-12
  0.000000	  0.000000	diff=6.79062e-12
  0.000000	  0.000000	diff=2.4402e-12
 -0.000000	 -0.000000	diff=4.56351e-12
  0.000024	  0.000024	diff=4.60943e-10
  0.000029	  0.000029	diff=5.37603e-10
  0.000000	  0.000000	diff=9.92475e-12
 -0.000000	 -0.000000	diff=6.32834e-12
 -0.000000	 -0.000000	diff=1.31271e-12
  0.000000	  0.000000	diff=9.04832e-12
  0.000000	  0.000000	diff=8.92442e-12
 -0.000000	 -0.000000	diff=2.41141e-13
  0.000000	  0.000000	diff=4.23928e-10
  0.000000	  0.000000	diff=7.26596e-12
  0.000000	  0.000000	diff=1.80966e-11
  0.000000	 -0.000000	diff=6.66665e-12
  0.000000	  0.000000	diff=1.06879e-12
 -0.000000	 -0.000000	diff=4.16531e-12
  0.000000	  0.000000	diff=1.15676e-11
 -0.000000	 -0.000000	diff=3.90652e-12
  0.000000	  0.000000	diff=1.63048e-12
  0.000000	  0.000000	diff=3.01754e-11
  local_diff=1.7392e-09
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=3.02894e-12
  0.000000	  0.000000	diff=9.84631e-12
  0.000000	  0.000000	diff=1.54109e-11
  0.000000	  0.000000	diff=2.07369e-12
 -0.000000	 -0.000000	diff=2.3328e-12
  0.000000	  0.000000	diff=3.28563e-12
 -0.000004	 -0.000004	diff=1.46949e-11
 -0.000002	 -0.000002	diff=1.24713e-13
  0.000000	  0.000000	diff=2.17501e-11
 -0.000000	 -0.000000	diff=1.94492e-11
 -0.000000	 -0.000000	diff=4.99853e-12
 -0.000000	 -0.000000	diff=4.55827e-12
  0.000000	  0.000000	diff=9.80738e-12
 -0.000000	 -0.000000	diff=3.20265e-12
  0.000007	  0.000007	diff=1.16989e-12
  0.000016	  0.000016	diff=8.1755e-13
  0.000000	  0.000000	diff=8.14528e-13
  0.000000	 -0.000000	diff=4.81711e-12
  0.000000	  0.000000	diff=6.53366e-13
  0.000000	 -0.000000	diff=1.67405e-12
  0.000000	  0.000000	diff=1.76695e-12
  0.000000	 -0.000000	diff=5.37627e-12
 -0.000000	 -0.000000	diff=1.96486e-10
  0.000000	  0.000000	diff=6.43139e-12
  0.000000	  0.000000	diff=2.17671e-12
 -0.000000	 -0.000000	diff=6.36166e-12
  0.000000	  0.000000	diff=2.0542e-13
  0.000000	 -0.000000	diff=1.93917e-12
  0.000000	  0.000000	diff=2.50713e-12
 -0.000000	 -0.000000	diff=5.19417e-12
  0.000000	  0.000000	diff=1.38436e-11
  0.000000	  0.000000	diff=1.92259e-10
  local_diff=5.59058e-10
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=2.58887e-12
  0.000000	  0.000000	diff=2.24703e-12
  0.000000	  0.000000	diff=2.9277e-12
 -0.000000	 -0.000000	diff=1.11713e-11
  0.000000	  0.000000	diff=2.32281e-12
  0.000000	  0.000000	diff=5.65917e-12
  0.000008	  0.000008	diff=6.26844e-12
  0.000002	  0.000002	diff=7.66325e-12
  0.000000	  0.000000	diff=1.48594e-12
 -0.000000	 -0.000000	diff=6.84506e-12
  0.000000	  0.000000	diff=1.14856e-12
  0.000000	 -0.000000	diff=5.33947e-12
  0.000000	  0.000000	diff=1.6384e-12
 -0.000000	 -0.000000	diff=6.96727e-12
  0.000003	  0.000003	diff=4.3922e-12
 -0.000036	 -0.000036	diff=7.07125e-12
  0.000000	 -0.000000	diff=1.19266e-13
  0.000000	  0.000000	diff=2.35618e-13
  0.000000	 -0.000000	diff=4.62855e-14
  0.000000	  0.000000	diff=1.02264e-13
  0.000000	 -0.000000	diff=1.9626e-13
  0.000000	  0.000000	diff=3.16893e-13
 -0.000000	 -0.000000	diff=2.4499e-10
  0.000001	  0.000001	diff=7.6968e-12
  0.000000	 -0.000000	diff=5.09017e-14
  0.000000	  0.000000	diff=1.08407e-13
  0.000000	 -0.000000	diff=1.57336e-14
  0.000000	  0.000000	diff=4.75861e-14
  0.000000	 -0.000000	diff=8.04192e-14
  0.000000	  0.000000	diff=1.46401e-13
 -0.000000	 -0.000000	diff=1.53804e-12
  0.000000	  0.000000	diff=1.32534e-10
  local_diff=4.63962e-10
# W_emb_tgt_char, [2 5]
  0.000014	  0.000014	diff=3.80914e-09
 -0.000018	 -0.000018	diff=4.9486e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000016	  0.000016	diff=1.4226e-09
 -0.000020	 -0.000020	diff=8.61651e-10
 -0.000002	 -0.000002	diff=4.21747e-10
 -0.000005	 -0.000005	diff=1.36064e-09
 -0.000001	 -0.000001	diff=2.32432e-10
 -0.000005	 -0.000005	diff=1.35549e-09
  local_diff=9.95856e-09
# W_h, [2 4]
 -0.000002	 -0.000002	diff=1.21912e-11
  0.000006	  0.000006	diff=4.49094e-12
  0.000003	  0.000003	diff=2.6515e-12
 -0.000008	 -0.000008	diff=7.93922e-12
 -0.000003	 -0.000003	diff=1.24697e-11
  0.000002	  0.000002	diff=2.12788e-12
 -0.000011	 -0.000011	diff=4.79155e-11
 -0.000009	 -0.000009	diff=5.36875e-11
  local_diff=1.43473e-10
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=2.95413e-12
  0.000011	  0.000011	diff=2.73981e-12
 -0.000003	 -0.000003	diff=7.03001e-12
  0.000008	  0.000008	diff=2.85658e-12
 -0.000002	 -0.000002	diff=4.21184e-12
 -0.000018	 -0.000018	diff=7.383e-12
  0.000011	  0.000011	diff=3.90691e-12
  0.000005	  0.000005	diff=7.38339e-13
  0.000008	  0.000008	diff=1.48779e-12
 -0.000006	 -0.000006	diff=4.22554e-12
  local_diff=3.75339e-11
# W_soft_char, [5 2]
  0.000029	  0.000029	diff=3.02216e-12
 -0.000022	 -0.000022	diff=2.39294e-12
 -0.000003	 -0.000003	diff=3.57656e-12
 -0.000002	 -0.000002	diff=7.91298e-12
 -0.000002	 -0.000002	diff=1.61717e-12
  0.000021	  0.000021	diff=2.16457e-12
 -0.000035	 -0.000035	diff=7.28908e-12
  0.000007	  0.000007	diff=3.87518e-12
  0.000004	  0.000004	diff=1.52096e-11
  0.000004	  0.000004	diff=6.27843e-12
  local_diff=5.33387e-11
# Num params=404, abs_diff=2.85321e-08
Elapsed time is 10.530418 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.89253e-14
 -0.000000	 -0.000000	diff=3.80665e-13
  0.011919	  0.012356	diff=0.000436738
  0.000000	 -0.000000	diff=1.29395e-40
  0.000000	 -0.000000	diff=2.65023e-25
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.41404e-45
  0.000000	 -0.000000	diff=2.22235e-14
  0.000000	  0.000000	diff=7.91298e-13
 -0.015140	 -0.014509	diff=0.000631498
  0.000000	  0.000000	diff=1.39212e-40
  0.000000	 -0.000000	diff=3.6014e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.27927e-45
  0.000000	 -0.000000	diff=1.78724e-15
  0.000000	  0.000000	diff=5.13634e-39
 -0.001200	 -0.001196	diff=4.19215e-06
  0.000000	  0.000000	diff=1.24599e-41
  0.000000	  0.000000	diff=2.39132e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.35452e-56
  0.000000	  0.000000	diff=1.78724e-15
  0.000000	 -0.000000	diff=5.13634e-39
  0.001192	  0.001196	diff=4.17447e-06
  0.000000	 -0.000000	diff=1.23898e-41
  0.000000	 -0.000000	diff=2.36631e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.3542e-56
  local_diff=0.0010766
# W_tgt{1}, [8 6]
 -0.766914	 -0.785267	diff=0.018353
  0.000000	  0.000000	diff=1.06531e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.8815e-12
 -9.037399	 -9.410081	diff=0.372682
  0.054244	  0.055534	diff=0.00128949
 -0.000000	 -0.000000	diff=3.22055e-11
  0.000000	 -0.000000	diff=2.24719e-27
  1.007635	  0.981278	diff=0.0263573
  0.000000	  0.000000	diff=1.39069e-11
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.38594e-09
 12.379994	 11.758937	diff=0.621058
 -0.071480	 -0.069396	diff=0.00208473
  0.000000	  0.000000	diff=1.10955e-09
  0.000000	  0.000000	diff=1.34546e-26
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=1.49381e-27
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
  0.000000	 -0.000000	diff=2.84648e-29
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=3.20479e-13
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
 -0.000000	 -0.000000	diff=3.90064e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  local_diff=1.04184
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.35585e-26
  0.000000	  0.000000	diff=2.8781e-25
  0.011324	  0.011717	diff=0.000393193
  0.010423	  0.010755	diff=0.000331839
  local_diff=0.000725031
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.22647e-11
 -0.000000	 -0.000000	diff=7.69642e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-11.591312	-12.408891	diff=0.817579
-10.192270	-10.804343	diff=0.612073
  0.000000	  0.000000	diff=1.82339e-09
  0.000000	  0.000000	diff=2.75363e-10
  local_diff=1.42965
# W_soft, [5 2]
  0.117985	  0.117958	diff=2.65055e-05
  0.128902	  0.128874	diff=2.84991e-05
 -0.253645	 -0.253670	diff=2.57773e-05
 -0.106455	 -0.106480	diff=2.53615e-05
  0.113363	  0.113319	diff=4.41675e-05
 -0.001808	 -0.001808	diff=8.08635e-09
 -0.001955	 -0.001955	diff=8.59921e-09
  0.002521	  0.002521	diff=7.92679e-09
  0.001512	  0.001512	diff=7.7748e-09
 -0.000270	 -0.000270	diff=1.26002e-08
  local_diff=0.000150356
# Num params=110, abs_diff=2.47345
Elapsed time is 0.820609 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.34816e-20
 -0.000000	 -0.000000	diff=2.53023e-09
  0.000000	  0.000000	diff=4.3787e-23
  0.000000	 -0.000000	diff=2.83846e-15
  0.000000	 -0.000000	diff=2.28652e-28
  0.000000	  0.000000	diff=3.16321e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.98503e-20
  0.000000	  0.000000	diff=3.93833e-09
  0.000000	 -0.000000	diff=5.56607e-23
  0.000000	  0.000000	diff=3.60822e-15
  0.000000	  0.000000	diff=2.87025e-28
  0.000000	 -0.000000	diff=4.73009e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.51073e-51
  0.000000	  0.000000	diff=5.03598e-38
  0.000000	 -0.000000	diff=6.16669e-54
  0.000000	  0.000000	diff=7.00845e-46
  0.000000	  0.000000	diff=1.10983e-58
  0.000000	  0.000000	diff=2.51678e-53
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.8831e-45
  0.000000	 -0.000000	diff=2.23274e-32
  0.000000	  0.000000	diff=5.80397e-48
  0.000000	 -0.000000	diff=3.76267e-40
  0.000000	 -0.000000	diff=1.84266e-52
  0.000000	 -0.000000	diff=2.51047e-47
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=6.46857e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.55428e-54
  0.000000	  0.000000	diff=8.76417e-53
  0.000000	 -0.000000	diff=1.31334e-54
  0.000000	  0.000000	diff=3.68385e-53
  0.000000	  0.000000	diff=1.67269e-54
  0.000000	  0.000000	diff=2.26763e-52
  0.000000	  0.000000	diff=1.02191e-29
  0.000000	  0.000000	diff=1.48421e-29
  0.000000	  0.000000	diff=1.97708e-48
  0.000000	 -0.000000	diff=1.69155e-47
  0.000000	  0.000000	diff=5.19604e-49
  0.000000	 -0.000000	diff=1.38666e-47
  0.000000	  0.000000	diff=3.01272e-48
  0.000000	 -0.000000	diff=8.27168e-47
  0.000000	 -0.000000	diff=9.0586e-24
  0.000000	  0.000000	diff=2.23467e-23
  0.000000	 -0.000000	diff=1.84561e-48
  0.000000	  0.000000	diff=3.1409e-48
  0.000000	  0.000000	diff=4.54393e-49
  0.000000	  0.000000	diff=1.14558e-48
  0.000000	 -0.000000	diff=1.83828e-48
  0.000000	  0.000000	diff=9.21113e-48
  0.000000	  0.000000	diff=6.85573e-25
  0.000000	 -0.000000	diff=2.36092e-24
  0.000000	 -0.000000	diff=1.01887e-47
  0.000000	 -0.000000	diff=7.26663e-47
  0.000000	  0.000000	diff=2.82651e-48
  0.000000	 -0.000000	diff=2.63008e-47
  0.000000	 -0.000000	diff=1.01827e-47
  0.000000	 -0.000000	diff=2.60012e-46
  0.000000	 -0.000000	diff=2.47598e-24
  0.000000	  0.000000	diff=1.0339e-24
  local_diff=3.79617e-23
# W_tgt{1}, [8 6]
 -0.000004	 -0.000004	diff=4.98508e-09
  0.050148	  0.048173	diff=0.00197547
 -0.000001	 -0.000001	diff=9.19684e-10
 -0.004852	 -0.004846	diff=6.11891e-06
 -0.000004	 -0.000004	diff=5.01857e-09
-16.861985	-16.882693	diff=0.0207085
 -0.000000	 -0.000000	diff=2.24089e-12
 -0.075760	 -0.075641	diff=0.000118743
 -0.000018	 -0.000018	diff=1.17178e-07
  0.286069	  0.239398	diff=0.0466703
 -0.000004	 -0.000004	diff=1.53264e-08
 -0.023675	 -0.023531	diff=0.000144739
 -0.000018	 -0.000019	diff=1.17959e-07
-64.009606	-64.502290	diff=0.492685
 -0.000000	 -0.000000	diff=5.06447e-12
 -0.370083	 -0.367324	diff=0.00275931
 -0.000003	 -0.000003	diff=2.8759e-09
 -0.092075	 -0.092172	diff=9.71693e-05
 -0.000000	 -0.000000	diff=5.83548e-11
  0.000138	  0.000138	diff=1.60813e-08
 -0.000003	 -0.000003	diff=2.98059e-09
  0.268381	  0.268231	diff=0.000150384
 -0.000000	 -0.000000	diff=1.88724e-12
 -0.095132	 -0.094937	diff=0.000195029
  0.000005	  0.000005	diff=6.1152e-09
  0.080428	  0.079878	diff=0.00055015
  0.000000	  0.000000	diff=3.99928e-12
  0.000395	  0.000395	diff=1.31383e-07
  0.000004	  0.000004	diff=5.45053e-09
  0.823579	  0.822744	diff=0.000835628
  0.000000	  0.000000	diff=1.41454e-12
  0.120081	  0.120523	diff=0.000441736
  0.000000	  0.000000	diff=2.37094e-13
 -0.000000	 -0.000000	diff=1.57625e-12
  0.000000	  0.000000	diff=5.50291e-13
  0.000000	  0.000000	diff=1.12205e-12
  0.000000	  0.000000	diff=1.65518e-13
  0.000001	  0.000001	diff=7.18465e-13
  0.000000	  0.000000	diff=3.33371e-17
 -0.000000	 -0.000000	diff=6.37372e-13
 -0.000002	 -0.000002	diff=1.67656e-09
  0.167861	  0.166870	diff=0.000990917
  0.000000	  0.000000	diff=3.56582e-11
 -0.000657	 -0.000656	diff=7.12819e-07
 -0.000001	 -0.000001	diff=4.07367e-10
 -0.704294	 -0.705065	diff=0.00077068
 -0.000000	 -0.000000	diff=1.96455e-12
 -0.007005	 -0.007064	diff=5.90446e-05
  local_diff=0.56916
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.80799e-13
  0.000003	  0.000003	diff=1.17527e-12
  0.000001	  0.000001	diff=1.04317e-12
  0.000000	  0.000000	diff=1.1646e-12
  0.000000	  0.000000	diff=1.85515e-13
  0.000004	  0.000004	diff=8.67471e-13
 -0.000003	 -0.000003	diff=7.61113e-13
  0.000003	  0.000003	diff=7.73975e-13
  0.050823	  0.050903	diff=8.01664e-05
 -2.046568	 -2.047222	diff=0.000653766
 -0.207671	 -0.207474	diff=0.000197039
 -0.402314	 -0.402361	diff=4.70955e-05
 -0.077828	 -0.076264	diff=0.00156383
 -2.684246	 -2.690338	diff=0.00609235
  0.696532	  0.700552	diff=0.00401905
 -3.778872	 -3.779618	diff=0.000745874
 -0.128987	 -0.129030	diff=4.26756e-05
  0.061208	  0.061151	diff=5.68663e-05
 -0.126904	 -0.126919	diff=1.4947e-05
 -0.070657	 -0.070722	diff=6.55408e-05
 -0.291341	 -0.291436	diff=9.54034e-05
 -0.097532	 -0.097713	diff=0.000181571
  1.118120	  1.118619	diff=0.000499494
  0.380550	  0.379815	diff=0.000735855
  0.012946	  0.013209	diff=0.000263206
  0.461725	  0.461779	diff=5.36815e-05
  0.191919	  0.191890	diff=2.89226e-05
  0.679034	  0.678886	diff=0.000147656
  0.083802	  0.084460	diff=0.000658393
  1.541852	  1.540874	diff=0.000977706
 -1.205213	 -1.205056	diff=0.000157264
  4.465138	  4.463566	diff=0.00157229
  local_diff=0.0189506
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.02828e-09
 -0.000000	 -0.000000	diff=9.2605e-09
 -0.000000	 -0.000000	diff=2.94841e-12
 -0.000000	 -0.000000	diff=4.24691e-12
  local_diff=1.6296e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.57964e-09
  0.000000	  0.000000	diff=3.29025e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-46.634814	-48.192947	diff=1.55813
 23.595116	 22.914322	diff=0.680794
-63.733324	-63.722799	diff=0.0105255
 32.900101	 32.948650	diff=0.0485487
  local_diff=2.298
# W_soft, [5 2]
 -0.194189	 -0.194362	diff=0.000173622
 -0.792482	 -0.792957	diff=0.00047466
  0.789507	  0.789365	diff=0.00014269
  0.710923	  0.710812	diff=0.00011126
 -0.512379	 -0.512858	diff=0.000478206
  0.259154	  0.258965	diff=0.000189717
  1.222390	  1.221652	diff=0.000737428
 -0.731666	 -0.731842	diff=0.000175899
 -1.237164	 -1.237267	diff=0.000103252
  0.489267	  0.488492	diff=0.000774967
  local_diff=0.0033617
# Num params=174, abs_diff=2.88947
Elapsed time is 1.667739 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.05792e-13
  0.000000	  0.000000	diff=2.53484e-11
  0.000000	  0.000000	diff=1.75957e-17
  0.000000	 -0.000000	diff=4.30662e-21
  0.000165	  0.000169	diff=3.88032e-06
  0.000000	  0.000000	diff=2.26316e-19
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.31863e-18
  0.000000	 -0.000000	diff=3.43153e-26
 -0.000000	 -0.000000	diff=3.86931e-11
  0.000000	 -0.000000	diff=6.93468e-30
  0.000000	  0.000000	diff=5.47442e-21
  0.000000	 -0.000000	diff=2.10102e-35
  0.000000	 -0.000000	diff=1.15918e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.72548e-14
  0.000000	 -0.000000	diff=1.60375e-31
  0.000000	 -0.000000	diff=2.86987e-18
  0.000000	  0.000000	diff=6.57819e-32
 -0.000028	 -0.000028	diff=1.05142e-07
  0.000000	 -0.000000	diff=3.6913e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.77983e-19
  0.000000	  0.000000	diff=9.96869e-30
  0.000000	  0.000000	diff=1.84957e-41
  0.000000	  0.000000	diff=1.65824e-33
  0.000000	 -0.000000	diff=3.60782e-48
  0.000000	  0.000000	diff=1.59079e-20
  0.000000	 -0.000000	diff=1.27157e-36
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.78485e-34
  local_diff=3.98552e-06
# W_src{2}, [8 4]
  0.000156	  0.000155	diff=7.41308e-07
 -0.051950	 -0.051700	diff=0.000249554
  0.000002	  0.000002	diff=9.04276e-09
 -0.000395	 -0.000397	diff=1.88223e-06
  0.074041	  0.074211	diff=0.000169735
  0.015131	  0.015085	diff=4.60317e-05
  0.000000	  0.000000	diff=1.70435e-09
 -0.000000	 -0.000000	diff=8.95798e-11
  0.000000	 -0.000000	diff=1.04337e-60
  0.000000	  0.000000	diff=7.70033e-59
  0.000000	 -0.000000	diff=1.38359e-60
  0.000000	  0.000000	diff=1.86874e-59
  0.000000	 -0.000000	diff=3.10002e-60
  0.000000	  0.000000	diff=8.22314e-59
  0.000000	  0.000000	diff=1.00804e-29
  0.000000	  0.000000	diff=6.01278e-29
 -0.000001	 -0.000001	diff=3.38417e-09
 -0.025529	 -0.025469	diff=6.0629e-05
  0.000000	  0.000000	diff=6.1963e-11
 -0.000195	 -0.000195	diff=4.56596e-07
 -0.014545	 -0.014577	diff=3.201e-05
  0.008044	  0.008026	diff=1.81218e-05
  0.000000	  0.000000	diff=4.27358e-10
 -0.000000	 -0.000000	diff=7.18604e-11
  0.000001	  0.000001	diff=1.38785e-09
  0.020501	  0.020540	diff=3.89527e-05
 -0.000001	 -0.000001	diff=5.53349e-09
  0.000158	  0.000158	diff=2.98779e-07
 -0.077118	 -0.077009	diff=0.000109619
  0.006137	  0.006129	diff=7.8771e-06
 -0.000000	 -0.000000	diff=2.57831e-10
  0.000000	  0.000000	diff=4.56238e-11
  local_diff=0.000735931
# W_tgt{1}, [8 6]
  0.000068	  0.000068	diff=1.77923e-07
 -0.377777	 -0.375082	diff=0.00269499
  0.000038	  0.000038	diff=5.64938e-10
  0.179689	  0.179851	diff=0.000162355
  0.000086	  0.000086	diff=1.94569e-07
  0.430188	  0.390988	diff=0.0392
  0.000015	  0.000015	diff=5.30743e-08
 -0.037834	 -0.037604	diff=0.000229806
 -0.000000	 -0.000000	diff=2.53059e-09
 -0.335776	 -0.257176	diff=0.0786002
  0.000000	  0.000000	diff=2.89869e-09
  0.002525	  0.002506	diff=1.96204e-05
 -0.000000	 -0.000000	diff=2.47296e-09
  4.101734	  3.545747	diff=0.555988
 -0.000000	 -0.000000	diff=5.12821e-13
 -0.129065	 -0.124496	diff=0.00456849
 -0.000000	 -0.000000	diff=1.44817e-11
  0.016114	  0.016652	diff=0.000537924
  0.000000	  0.000000	diff=2.58485e-12
 -0.000028	 -0.000028	diff=1.18119e-10
  0.000001	  0.000001	diff=9.44108e-12
 -0.009378	 -0.009462	diff=8.34718e-05
  0.000000	  0.000000	diff=3.45116e-13
  0.003196	  0.003198	diff=1.76973e-06
  0.000000	  0.000000	diff=1.08825e-10
  0.004006	  0.005904	diff=0.00189828
  0.000005	  0.000005	diff=1.34465e-10
 -0.000122	 -0.000122	diff=7.82769e-08
  0.000009	  0.000009	diff=2.47621e-09
 -0.774061	 -0.774462	diff=0.00040099
  0.000000	  0.000000	diff=1.11953e-12
  0.008891	  0.008938	diff=4.66139e-05
 -0.000000	 -0.000000	diff=1.24573e-09
  0.000263	  0.000262	diff=7.83304e-07
 -0.000018	 -0.000018	diff=1.62356e-09
  0.000036	  0.000036	diff=1.03458e-07
 -0.000030	 -0.000030	diff=3.13933e-08
  0.000281	  0.000280	diff=8.98631e-07
 -0.000000	 -0.000000	diff=2.92322e-13
  0.000000	  0.000000	diff=1.08686e-12
 -0.000000	 -0.000000	diff=7.96117e-12
  0.002446	  0.003417	diff=0.000971146
 -0.000001	 -0.000001	diff=1.05707e-11
  0.000058	  0.000058	diff=1.59554e-08
 -0.000002	 -0.000002	diff=1.94472e-10
  0.417876	  0.417789	diff=8.67988e-05
 -0.000000	 -0.000000	diff=3.22329e-13
 -0.003831	 -0.003815	diff=1.58554e-05
  local_diff=0.685509
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=6.66348e-13
  0.000000	  0.000000	diff=6.10105e-13
  0.000000	  0.000000	diff=9.65873e-13
  0.000000	  0.000000	diff=1.90049e-12
 -0.000000	 -0.000000	diff=1.11083e-12
  0.000000	  0.000000	diff=1.87989e-12
 -0.000000	 -0.000000	diff=1.35319e-12
  0.000000	  0.000000	diff=5.8262e-13
  0.217844	  0.218061	diff=0.00021704
 -0.472190	 -0.469976	diff=0.00221478
 -0.097230	 -0.097174	diff=5.5989e-05
 -0.325293	 -0.325539	diff=0.000246364
  0.557278	  0.559871	diff=0.00259358
 -1.526243	 -1.518094	diff=0.00814958
 -1.531277	 -1.529493	diff=0.00178395
 -0.515424	 -0.514534	diff=0.000889868
  0.068274	  0.068202	diff=7.15025e-05
 -0.053350	 -0.053277	diff=7.3371e-05
 -0.124763	 -0.124748	diff=1.50754e-05
 -0.005424	 -0.005436	diff=1.22185e-05
 -0.075474	 -0.075506	diff=3.23948e-05
 -0.183737	 -0.183720	diff=1.71131e-05
  0.407739	  0.407946	diff=0.000207326
 -0.249140	 -0.250224	diff=0.00108407
  0.072757	  0.072690	diff=6.67605e-05
  0.288081	  0.288275	diff=0.000194448
  0.089550	  0.089540	diff=9.712e-06
  0.362486	  0.363060	diff=0.000573974
 -0.168338	 -0.167893	diff=0.000445409
  1.041265	  1.041665	diff=0.000400359
 -0.279811	 -0.279331	diff=0.000480321
  3.008567	  3.001825	diff=0.00674267
  local_diff=0.0265779
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.09246e-10
  0.000000	  0.000000	diff=9.31547e-11
  0.000118	  0.000120	diff=1.95821e-06
  0.000000	 -0.000000	diff=6.74767e-15
  local_diff=1.95882e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.02899e-11
 -0.000000	 -0.000000	diff=3.4354e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 29.868986	 30.897636	diff=1.02865
-15.147911	-14.914619	diff=0.233291
 -4.963032	 -5.462542	diff=0.49951
  2.964002	  2.824189	diff=0.139814
  local_diff=1.90126
# W_soft, [5 2]
 -0.169247	 -0.169422	diff=0.000174874
 -0.453029	 -0.453367	diff=0.000338023
  0.500466	  0.500293	diff=0.000173735
  0.537580	  0.537427	diff=0.000153904
 -0.414584	 -0.414930	diff=0.000346442
 -0.109892	 -0.110159	diff=0.000267945
  0.622417	  0.621976	diff=0.000441468
  0.210969	  0.210769	diff=0.00019921
 -1.050254	 -1.050476	diff=0.000222186
  0.328336	  0.327891	diff=0.000444995
  local_diff=0.00276278
# Num params=174, abs_diff=2.61686
Elapsed time is 1.676833 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=4.93503e-18
  0.000000	 -0.000000	diff=3.19414e-09
  0.000000	 -0.000000	diff=2.44249e-21
  0.000000	 -0.000000	diff=3.08856e-20
 -0.000024	 -0.000025	diff=7.41198e-07
  0.000000	  0.000000	diff=2.83662e-21
  0.000000	  0.000000	diff=0
 -0.004338	 -0.003739	diff=0.000598602
  0.000000	  0.000000	diff=8.36234e-18
 -0.000000	  0.000000	diff=5.10538e-09
  0.000000	 -0.000000	diff=5.85081e-30
  0.000000	  0.000000	diff=3.92607e-20
  0.000000	  0.000000	diff=2.00075e-35
  0.000000	  0.000000	diff=1.93182e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.37043e-65
  0.000000	  0.000000	diff=6.32063e-49
  0.000000	  0.000000	diff=3.04085e-22
  0.000000	  0.000000	diff=9.55397e-59
  0.000003	  0.000003	diff=1.18872e-08
  0.000000	 -0.000000	diff=3.52699e-22
  0.000000	  0.000000	diff=0
  0.000457	  0.000465	diff=8.08051e-06
  0.000000	  0.000000	diff=5.91871e-58
  0.000000	 -0.000000	diff=1.94462e-41
  0.000000	  0.000000	diff=4.20975e-41
  0.000000	 -0.000000	diff=2.93941e-51
  0.000000	  0.000000	diff=4.3221e-25
  0.000000	 -0.000000	diff=1.53881e-40
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.70234e-24
  local_diff=0.000607444
# W_src{2}, [8 4]
  0.000176	  0.000175	diff=8.10861e-07
 -0.001072	 -0.001068	diff=4.8646e-06
 -0.000006	 -0.000006	diff=2.76992e-08
  0.000009	  0.000009	diff=4.11615e-08
 -0.095347	 -0.095019	diff=0.000327664
  0.921614	  0.892052	diff=0.0295616
  0.000001	  0.000001	diff=7.21874e-09
 -0.000000	 -0.000000	diff=7.24867e-10
  0.000000	  0.000000	diff=6.51802e-61
  0.000000	 -0.000000	diff=9.79139e-59
  0.000000	 -0.000000	diff=1.92999e-60
  0.000000	  0.000000	diff=2.65102e-60
  0.000000	  0.000000	diff=1.80523e-60
  0.000000	 -0.000000	diff=6.46001e-59
  0.000000	  0.000000	diff=5.0982e-29
  0.000000	 -0.000000	diff=3.59476e-28
 -0.000006	 -0.000006	diff=1.38662e-08
 -0.001520	 -0.001516	diff=3.57357e-06
 -0.000000	 -0.000000	diff=2.80933e-10
 -0.000011	 -0.000011	diff=2.82381e-08
  0.051977	  0.051983	diff=6.17477e-06
  0.022476	  0.022467	diff=8.61443e-06
  0.000000	  0.000000	diff=1.73889e-09
 -0.000000	 -0.000000	diff=4.40835e-12
  0.000005	  0.000005	diff=1.0826e-08
 -0.000529	 -0.000533	diff=4.35019e-06
  0.000004	  0.000004	diff=1.62897e-08
 -0.000016	 -0.000016	diff=7.8695e-08
  0.183422	  0.182336	diff=0.00108665
 -0.719404	 -0.740052	diff=0.0206481
 -0.000000	 -0.000000	diff=1.18566e-09
  0.000000	  0.000000	diff=1.08773e-12
  local_diff=0.0516526
# W_tgt{1}, [8 6]
  0.000001	  0.000001	diff=2.19747e-09
  0.002266	  0.002363	diff=9.72871e-05
  0.000000	  0.000000	diff=4.32551e-12
  0.011301	  0.011283	diff=1.85713e-05
  0.000001	  0.000001	diff=2.20818e-09
  0.118309	  0.130815	diff=0.0125056
  0.000000	  0.000000	diff=1.1398e-12
  0.001645	  0.001653	diff=8.50111e-06
  0.000006	  0.000006	diff=5.15827e-08
  0.065185	  0.067860	diff=0.00267472
  0.000000	  0.000000	diff=4.87833e-11
  0.055231	  0.054791	diff=0.000439789
  0.000006	  0.000007	diff=5.18455e-08
 -1.550383	 -1.247777	diff=0.302606
  0.000000	  0.000000	diff=1.44921e-12
 -0.118018	 -0.118740	diff=0.000721926
  0.000001	  0.000001	diff=2.09766e-09
 -0.001827	 -0.001725	diff=0.000101285
 -0.000000	 -0.000000	diff=1.23039e-10
 -0.026644	 -0.026746	diff=0.000102817
 -0.000316	 -0.000315	diff=7.61028e-07
 -0.047123	 -0.046817	diff=0.000306806
  0.000001	  0.000001	diff=6.13507e-09
 -0.000442	 -0.000433	diff=8.51723e-06
 -0.000004	 -0.000004	diff=8.85394e-09
  0.010328	  0.010447	diff=0.00011902
 -0.000000	 -0.000000	diff=8.68028e-10
 -0.000704	 -0.000704	diff=2.19909e-08
 -0.000847	 -0.000842	diff=5.33828e-06
 -0.300936	 -0.301531	diff=0.000595316
  0.000003	  0.000003	diff=4.33726e-08
 -0.002802	 -0.002771	diff=3.04059e-05
 -0.000083	 -0.000083	diff=2.86866e-07
 -0.000050	 -0.000050	diff=1.97653e-07
 -0.000117	 -0.000116	diff=4.79512e-07
 -0.000064	 -0.000064	diff=2.61839e-07
  0.000484	  0.000486	diff=2.09958e-06
 -0.000011	 -0.000011	diff=4.4027e-08
 -0.000002	 -0.000002	diff=1.57142e-08
  0.000000	  0.000000	diff=1.02258e-11
  0.000001	  0.000001	diff=6.88076e-09
  0.000927	  0.000916	diff=1.04522e-05
  0.000000	  0.000000	diff=4.89584e-10
  0.002259	  0.002258	diff=7.12133e-07
  0.000627	  0.000630	diff=2.97819e-06
  0.079501	  0.079544	diff=4.22841e-05
 -0.000003	 -0.000003	diff=2.40266e-08
  0.000580	  0.000581	diff=7.55174e-07
  local_diff=0.320404
# W_tgt{2}, [8 4]
  0.000623	  0.000626	diff=2.82309e-06
 -0.000521	 -0.000521	diff=2.5315e-07
 -0.000003	 -0.000003	diff=1.36912e-08
  0.000336	  0.000335	diff=1.38493e-06
 -0.000708	 -0.000704	diff=3.80235e-06
  0.002136	  0.002146	diff=9.99194e-06
  0.000001	  0.000001	diff=3.62809e-09
  0.001020	  0.001025	diff=4.68635e-06
 -0.028184	 -0.028198	diff=1.35057e-05
 -0.698397	 -0.698107	diff=0.000289259
  0.005698	  0.005695	diff=3.21144e-06
 -0.012854	 -0.012841	diff=1.27889e-05
 -0.269652	 -0.271364	diff=0.00171247
 -1.439698	 -1.439778	diff=7.97449e-05
 -3.502950	 -3.498598	diff=0.00435172
 -1.256629	 -1.254933	diff=0.00169609
  0.055009	  0.055023	diff=1.35538e-05
  0.032590	  0.032581	diff=8.61794e-06
  0.014903	  0.014895	diff=7.44831e-06
 -0.059815	 -0.059821	diff=5.41646e-06
 -0.107267	 -0.106750	diff=0.000516204
 -0.001726	 -0.001739	diff=1.38488e-05
 -0.224488	 -0.224554	diff=6.61953e-05
 -0.754026	 -0.754435	diff=0.000408903
  0.807687	  0.806899	diff=0.000787914
  0.294375	  0.294421	diff=4.58131e-05
 -0.040411	 -0.040401	diff=9.91927e-06
 -0.375986	 -0.376130	diff=0.000144564
  0.350550	  0.350486	diff=6.32274e-05
  0.076409	  0.076324	diff=8.51704e-05
 -0.469218	 -0.469692	diff=0.000474252
 -4.537947	 -4.547018	diff=0.0090705
  local_diff=0.0199033
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000749	 -0.000730	diff=1.96452e-05
 -0.000000	 -0.000000	diff=2.39108e-11
  0.000000	  0.000000	diff=7.15057e-09
  0.000000	  0.000000	diff=8.25471e-09
  local_diff=1.96606e-05
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.54862e-12
 -0.000000	 -0.000000	diff=1.45275e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-30.217535	-26.560473	diff=3.65706
 12.763276	 13.667926	diff=0.90465
  7.149709	  7.083902	diff=0.0658071
 -3.640520	 -3.660044	diff=0.0195236
  local_diff=4.64704
# W_h, [2 4]
  0.361054	  0.356239	diff=0.00481585
 -0.000253	 -0.000252	diff=6.80117e-07
 -0.589500	 -0.603836	diff=0.0143357
  0.000514	  0.000516	diff=2.82851e-06
  3.893030	  3.840736	diff=0.0522934
 -2.774627	 -2.775989	diff=0.0013617
  2.929506	  2.932247	diff=0.00274088
 -2.944228	 -2.940896	diff=0.00333148
  local_diff=0.0788825
# W_soft, [5 2]
 -0.956667	 -0.957174	diff=0.000506976
  5.213387	  5.206646	diff=0.00674059
  0.155391	  0.148653	diff=0.0067377
 -2.569958	 -2.570744	diff=0.000785518
 -1.827009	 -1.827381	diff=0.000371877
  2.047773	  2.046128	diff=0.0016451
  0.008199	  0.004965	diff=0.0032344
  1.898402	  1.894751	diff=0.00365141
 -1.834499	 -1.836127	diff=0.00162829
 -2.109547	 -2.109716	diff=0.000168959
  local_diff=0.0254708
# Num params=182, abs_diff=5.14398
Elapsed time is 2.535861 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.6908e-34
  0.000000	  0.000000	diff=6.52136e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.14811e-34
  0.000000	 -0.000000	diff=8.31817e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78785e-73
  0.000000	 -0.000000	diff=5.70539e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.11556e-65
  0.000000	  0.000000	diff=3.2557e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.98983e-66
  0.000000	 -0.000000	diff=1.35318e-65
  0.000000	 -0.000000	diff=6.80857e-67
  0.000000	 -0.000000	diff=2.33138e-66
  0.000000	  0.000000	diff=1.85977e-66
  0.000000	 -0.000000	diff=1.05465e-65
  0.000000	  0.000000	diff=1.86755e-36
  0.000000	 -0.000000	diff=8.34134e-36
  0.000000	 -0.000000	diff=7.79664e-59
  0.000000	  0.000000	diff=5.83381e-58
  0.000000	  0.000000	diff=1.82474e-59
  0.000000	  0.000000	diff=9.23776e-59
  0.000000	 -0.000000	diff=8.49407e-59
  0.000000	  0.000000	diff=5.16748e-58
  0.000000	  0.000000	diff=1.11184e-29
  0.000000	  0.000000	diff=3.97523e-28
  0.000000	  0.000000	diff=1.29167e-59
  0.000000	 -0.000000	diff=5.90976e-59
  0.000000	 -0.000000	diff=5.78638e-60
  0.000000	 -0.000000	diff=8.1766e-60
  0.000000	  0.000000	diff=8.49742e-60
  0.000000	 -0.000000	diff=4.77459e-59
  0.000000	  0.000000	diff=1.60399e-29
  0.000000	 -0.000000	diff=2.8376e-29
  0.000000	 -0.000000	diff=2.05037e-59
  0.000000	  0.000000	diff=5.8094e-58
  0.000000	  0.000000	diff=1.34231e-59
  0.000000	  0.000000	diff=2.23857e-58
  0.000000	 -0.000000	diff=9.57301e-60
  0.000000	  0.000000	diff=8.27746e-58
  0.000000	  0.000000	diff=6.35455e-29
  0.000000	  0.000000	diff=2.21817e-28
  local_diff=7.38419e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_pos, [2 2]
  0.000000	 -0.000000	diff=1.5568e-29
  0.000000	  0.000000	diff=1.31341e-29
  0.000000	 -0.000000	diff=1.2133e-30
  0.000000	  0.000000	diff=1.25461e-30
  local_diff=3.117e-29
# v_pos, [1 2]
  0.000000	 -0.000000	diff=1.01433e-29
  0.000000	 -0.000000	diff=1.01748e-29
  local_diff=2.03181e-29
# W_h, [2 4]
  0.000000	 -0.000000	diff=3.05378e-30
  0.000000	 -0.000000	diff=3.65282e-30
  0.000000	 -0.000000	diff=1.54583e-30
  0.000000	  0.000000	diff=6.8135e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 3.311762 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.84136e-12
 -0.000000	 -0.000000	diff=1.08734e-08
  0.000000	  0.000000	diff=4.35354e-28
  0.000000	 -0.000000	diff=3.7902e-19
  0.000001	  0.000001	diff=3.47287e-08
  0.000000	 -0.000000	diff=3.04848e-21
  0.000000	  0.000000	diff=0
 -0.000601	 -0.000638	diff=3.74958e-05
 -0.000000	 -0.000000	diff=2.84079e-12
  0.000000	  0.000000	diff=1.70572e-08
  0.000000	 -0.000000	diff=5.53448e-28
  0.000000	  0.000000	diff=4.81797e-19
  0.000000	  0.000000	diff=4.00668e-34
  0.000000	  0.000000	diff=1.37967e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.36393e-63
  0.000000	  0.000000	diff=7.75651e-48
  0.000000	 -0.000000	diff=1.12218e-66
  0.000000	  0.000000	diff=1.17244e-57
  0.000000	  0.000000	diff=4.96915e-73
  0.000000	  0.000000	diff=1.09456e-65
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.34168e-56
  0.000000	 -0.000000	diff=2.3864e-40
  0.000000	  0.000000	diff=4.14312e-59
  0.000000	 -0.000000	diff=3.60717e-50
  0.000000	 -0.000000	diff=2.18632e-65
  0.000000	 -0.000000	diff=6.30844e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=3.75585e-05
# W_src{2}, [8 4]
  0.331666	  0.330350	diff=0.00131562
 -0.002764	 -0.002751	diff=1.31345e-05
  0.000000	  0.000000	diff=1.92861e-67
  0.000000	  0.000000	diff=1.29805e-65
  0.293465	  0.294808	diff=0.00134283
 -0.777347	 -0.773645	diff=0.0037022
 -0.000003	 -0.000003	diff=3.17688e-08
 -0.000001	 -0.000001	diff=1.19257e-08
  0.000000	  0.000000	diff=1.26232e-58
  0.000000	 -0.000000	diff=1.41688e-57
  0.000000	 -0.000000	diff=1.3576e-59
  0.000000	 -0.000000	diff=3.6559e-58
  0.000000	  0.000000	diff=1.69409e-58
  0.000000	 -0.000000	diff=1.23259e-57
  0.000000	 -0.000000	diff=1.35871e-28
  0.000000	 -0.000000	diff=6.03963e-28
  0.000000	  0.000000	diff=1.40596e-60
  0.000000	  0.000000	diff=8.13129e-59
  0.000000	  0.000000	diff=8.05466e-61
  0.000000	  0.000000	diff=1.58832e-59
  0.000000	  0.000000	diff=1.32401e-60
  0.000000	  0.000000	diff=1.70636e-59
  0.000000	 -0.000000	diff=5.96654e-29
  0.000000	  0.000000	diff=5.20489e-29
  0.000000	  0.000000	diff=2.1071e-58
  0.000000	 -0.000000	diff=1.86114e-57
  0.000000	 -0.000000	diff=4.88898e-59
  0.000000	 -0.000000	diff=6.66062e-58
  0.000000	  0.000000	diff=2.12671e-58
  0.000000	 -0.000000	diff=1.86368e-57
  0.000000	 -0.000000	diff=1.13055e-28
  0.000000	 -0.000000	diff=6.45202e-28
  local_diff=0.00637384
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.36612e-10
  0.141449	  0.139208	diff=0.00224101
 -0.000000	 -0.000000	diff=6.64415e-12
 -0.051303	 -0.051210	diff=9.27442e-05
  0.000000	  0.000000	diff=7.34172e-10
-10.081949	-10.300090	diff=0.218141
  0.000000	  0.000000	diff=1.7283e-12
 -0.427313	 -0.429863	diff=0.00255021
  0.000002	  0.000002	diff=1.72471e-08
  0.645249	  0.589195	diff=0.056054
 -0.000000	 -0.000000	diff=1.07554e-10
 -0.250880	 -0.248682	diff=0.00219798
  0.000002	  0.000002	diff=1.7243e-08
-39.052507	-48.093148	diff=9.04064
  0.000000	  0.000000	diff=2.85422e-12
 -1.833732	 -1.891739	diff=0.0580063
 -0.000080	 -0.000080	diff=3.73224e-07
  0.001548	  0.001542	diff=6.01329e-06
  0.856652	  0.854887	diff=0.00176502
  0.119273	  0.119784	diff=0.000510345
  0.100424	  0.100992	diff=0.000568028
  4.015067	  4.058219	diff=0.0431522
  0.000002	  0.000002	diff=2.03843e-08
 -0.000000	 -0.000000	diff=3.46268e-10
 -0.000061	 -0.000061	diff=2.11903e-07
 -0.195365	 -0.195682	diff=0.000317279
 -0.855340	 -0.857150	diff=0.00181043
  0.054962	  0.055070	diff=0.000108537
 -0.108978	 -0.108419	diff=0.000559092
  1.272769	  1.254360	diff=0.0184092
  0.000002	  0.000002	diff=1.1463e-08
  0.476651	  0.473620	diff=0.00303052
  0.122645	  0.123101	diff=0.000455664
 -0.311660	 -0.310889	diff=0.000770932
 -0.348081	 -0.349501	diff=0.00141992
  0.359056	  0.358154	diff=0.000901679
 -0.026671	 -0.026604	diff=6.66915e-05
 -0.000266	 -0.000265	diff=1.00308e-06
 -0.000001	 -0.000001	diff=5.54706e-09
  0.000007	  0.000007	diff=5.53458e-08
 -0.000000	 -0.000000	diff=4.02612e-12
 -0.033422	 -0.040448	diff=0.00702548
 -0.021014	 -0.021015	diff=1.07779e-06
 -0.010037	 -0.010033	diff=3.62453e-06
 -0.002583	 -0.002583	diff=3.30602e-07
  0.001963	 -0.000637	diff=0.00259928
 -0.000000	 -0.000000	diff=2.0484e-12
 -0.084897	 -0.085000	diff=0.000102408
  local_diff=9.46351
# W_tgt{2}, [8 4]
 -0.067048	 -0.066879	diff=0.000168609
 -0.002022	 -0.002027	diff=5.6241e-06
  2.639224	  2.643445	diff=0.00422108
 -0.001868	 -0.001863	diff=4.68043e-06
 -0.144376	 -0.144327	diff=4.93138e-05
 -0.021750	 -0.021742	diff=8.26169e-06
 -0.000377	 -0.000384	diff=6.88706e-06
 -0.097278	 -0.097820	diff=0.000541516
 -0.337594	 -0.338006	diff=0.000412173
 -0.848844	 -0.849370	diff=0.000525751
  0.017127	  0.017046	diff=8.08078e-05
 -0.150090	 -0.150266	diff=0.000175417
 -2.244617	 -2.263791	diff=0.0191747
 -0.301278	 -0.302497	diff=0.00121896
-11.097586	-15.471111	diff=4.37352
 -1.705289	 -1.706050	diff=0.000761059
 -0.815940	 -0.813121	diff=0.00281954
 -0.011686	 -0.011894	diff=0.000208274
 -0.081805	 -0.081996	diff=0.000191557
 -0.395191	 -0.395126	diff=6.58093e-05
 -1.088422	 -1.085797	diff=0.00262517
 -0.390058	 -0.390263	diff=0.000204916
  0.968236	  0.970129	diff=0.00189272
 -2.979695	 -2.973407	diff=0.00628751
  0.058841	  0.060224	diff=0.00138282
 -0.476163	 -0.476089	diff=7.34199e-05
 -1.821014	 -1.818654	diff=0.00236011
  1.162310	  1.162279	diff=3.12909e-05
  0.155519	  0.155486	diff=3.28991e-05
  0.274470	  0.275019	diff=0.000549244
 -1.069853	 -1.080967	diff=0.0111139
 11.627334	 11.615886	diff=0.0114484
  local_diff=4.44217
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000120	 -0.000122	diff=1.41149e-06
 -0.000000	 -0.000000	diff=2.86601e-10
 -0.000000	 -0.000000	diff=2.41099e-08
 -0.000000	 -0.000000	diff=2.78275e-08
  local_diff=1.46371e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.57234e-11
  0.000000	  0.000000	diff=2.2417e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
559.422329	-167.970287	diff=727.393
 86.801647	 78.323606	diff=8.47804
 -7.093948	 -7.355292	diff=0.261344
  3.874106	  3.800851	diff=0.0732549
  local_diff=736.205
# W_a, [2 2]
 -0.000008	 -0.000008	diff=1.2119e-08
  0.000294	  0.000315	diff=2.02761e-05
  0.001069	  0.001069	diff=1.51793e-09
 -0.043733	 -0.043731	diff=2.53705e-06
  local_diff=2.28268e-05
# W_h, [2 4]
 -0.023336	 -0.023335	diff=7.74494e-07
 -0.040031	 -0.040030	diff=9.22895e-07
  0.953211	  0.954506	diff=0.00129503
  1.635845	  1.637389	diff=0.00154428
  0.495630	  0.493584	diff=0.00204581
  3.290073	  3.285275	diff=0.00479753
  0.108388	  0.120890	diff=0.0125022
  9.094417	  8.793549	diff=0.300869
  local_diff=0.323055
# W_soft, [5 2]
  5.084964	  5.080611	diff=0.00435259
  3.185797	  3.184884	diff=0.000913657
 -0.403325	 -0.404028	diff=0.000702595
 -4.004497	 -4.005270	diff=0.000772983
 -3.852635	 -3.856197	diff=0.0035624
 -5.137220	 -5.143014	diff=0.00579312
  4.933049	  4.932879	diff=0.000169774
 -0.674094	 -0.674468	diff=0.00037425
  0.078470	  0.077928	diff=0.000541492
  0.812158	  0.806674	diff=0.00548365
  local_diff=0.0226665
# Num params=186, abs_diff=750.463
Elapsed time is 2.594917 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.65218e-34
  0.000000	  0.000000	diff=5.91556e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.09858e-34
  0.000000	 -0.000000	diff=7.47991e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78914e-73
  0.000000	 -0.000000	diff=5.65567e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.14971e-65
  0.000000	  0.000000	diff=3.21759e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.67058e-66
  0.000000	 -0.000000	diff=1.32023e-65
  0.000000	 -0.000000	diff=6.30511e-67
  0.000000	 -0.000000	diff=2.40542e-66
  0.000000	  0.000000	diff=1.58221e-66
  0.000000	 -0.000000	diff=1.03471e-65
  0.000000	  0.000000	diff=2.21115e-36
  0.000000	 -0.000000	diff=7.89148e-36
  0.000000	 -0.000000	diff=6.91426e-59
  0.000000	  0.000000	diff=5.43438e-58
  0.000000	  0.000000	diff=1.75048e-59
  0.000000	  0.000000	diff=9.03782e-59
  0.000000	 -0.000000	diff=7.68126e-59
  0.000000	  0.000000	diff=4.82943e-58
  0.000000	 -0.000000	diff=3.70742e-31
  0.000000	  0.000000	diff=3.56301e-28
  0.000000	  0.000000	diff=1.05848e-59
  0.000000	 -0.000000	diff=5.8891e-59
  0.000000	 -0.000000	diff=5.03736e-60
  0.000000	 -0.000000	diff=8.12493e-60
  0.000000	  0.000000	diff=7.41006e-60
  0.000000	 -0.000000	diff=4.89434e-59
  0.000000	  0.000000	diff=1.78997e-29
  0.000000	 -0.000000	diff=2.65034e-29
  0.000000	 -0.000000	diff=2.66933e-59
  0.000000	  0.000000	diff=5.54468e-58
  0.000000	  0.000000	diff=1.53992e-59
  0.000000	  0.000000	diff=2.12029e-58
  0.000000	 -0.000000	diff=1.51282e-59
  0.000000	  0.000000	diff=7.93366e-58
  0.000000	  0.000000	diff=7.42823e-29
  0.000000	  0.000000	diff=2.02294e-28
  local_diff=6.77651e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.57509e-45
  0.000000	  0.000000	diff=1.6093e-45
  0.000000	  0.000000	diff=3.50325e-45
  0.000000	 -0.000000	diff=8.75812e-47
  local_diff=7.77522e-45
# v_a, [1 2]
  0.000000	 -0.000000	diff=1.26117e-44
  0.000000	 -0.000000	diff=2.1742e-44
  local_diff=3.43537e-44
# W_h, [2 4]
  0.000000	 -0.000000	diff=7.31179e-31
  0.000000	 -0.000000	diff=5.18298e-31
  0.000000	  0.000000	diff=1.27282e-29
  0.000000	 -0.000000	diff=2.22416e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 2.649515 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.012948	  0.000961	diff=0.0139091
  0.002157	  0.000268	diff=0.00188899
 -0.088297	 -0.018414	diff=0.0698831
 -0.000922	 -0.000774	diff=0.000147967
 -0.012833	  0.001057	diff=0.0138898
  0.002161	  0.000314	diff=0.00184704
  7.423095	  1.258045	diff=6.16505
 -3.404015	 -0.584481	diff=2.81953
  0.000000	  0.000000	diff=4.81008e-08
 -0.000007	  0.000008	diff=1.47297e-05
  0.114852	  0.022921	diff=0.0919317
 -0.000000	  0.000000	diff=1.12843e-08
  0.000000	  0.000000	diff=1.0648e-15
  0.000000	 -0.000000	diff=2.91178e-16
  0.000000	 -0.000000	diff=1.62054e-13
  0.000000	  0.000000	diff=3.7467e-14
 -0.035368	 -0.021340	diff=0.0140274
 -0.005410	 -0.000876	diff=0.0045344
 -0.006199	 -0.003488	diff=0.00271087
  0.002772	  0.002594	diff=0.00017823
 -0.040562	 -0.023730	diff=0.0168323
 -0.003642	  0.000702	diff=0.00434447
  2.255073	  0.591625	diff=1.66345
  0.066243	 -0.409227	diff=0.47547
 -0.016443	 -0.019519	diff=0.00307581
  0.002634	  0.001773	diff=0.000860787
 -0.002832	 -0.003430	diff=0.000597391
  0.001913	  0.001948	diff=3.4676e-05
 -0.019783	 -0.023478	diff=0.00369476
  0.004540	  0.003716	diff=0.000824406
  0.277422	  0.631052	diff=0.35363
 -0.566586	 -0.475077	diff=0.0915093
  local_diff=11.8139
# W_src{2}, [8 4]
  0.242528	  0.201188	diff=0.04134
 -0.200619	 -0.257197	diff=0.0565779
 -0.025140	 -0.010901	diff=0.0142393
 -0.008794	 -0.021638	diff=0.0128433
  0.317356	  0.282384	diff=0.0349715
 -0.283511	 -0.344744	diff=0.0612329
 -2.507739	 -1.746162	diff=0.761577
  1.431647	 -0.731319	diff=2.16297
  0.058453	  0.055798	diff=0.00265511
  0.012733	 -0.015356	diff=0.0280892
 -0.023021	 -0.014556	diff=0.00846497
  0.017936	  0.009321	diff=0.00861481
  0.053349	  0.060392	diff=0.00704302
  0.029201	 -0.005861	diff=0.0350625
  2.710788	  1.170757	diff=1.54003
 -0.058149	 -0.307737	diff=0.249587
  0.113774	  0.103988	diff=0.00978607
  0.131894	  0.060439	diff=0.071455
 -0.054590	 -0.037042	diff=0.0175479
  0.063267	  0.040137	diff=0.0231295
  0.084891	  0.094774	diff=0.0098821
  0.201174	  0.109379	diff=0.0917951
  9.314304	  4.767499	diff=4.54681
  3.750955	  1.979286	diff=1.77167
 -0.375259	 -0.274450	diff=0.100809
 -0.075453	  0.037735	diff=0.113188
  0.078220	  0.044133	diff=0.0340873
 -0.076883	 -0.042799	diff=0.0340845
 -0.426436	 -0.345223	diff=0.0812136
 -0.052412	  0.076447	diff=0.12886
 -3.004681	 -0.784977	diff=2.2197
 -8.938468	 -5.362905	diff=3.57556
  local_diff=17.8549
# W_tgt{1}, [8 6]
 -0.063488	 -0.063476	diff=1.21489e-05
 12.750256	 13.049505	diff=0.299249
 -0.396433	 -0.391586	diff=0.00484686
 -0.000186	 -0.000185	diff=2.4577e-07
  0.000027	  0.000027	diff=3.7109e-08
  0.007654	  0.007511	diff=0.000143071
 -0.000000	 -0.000000	diff=2.38577e-09
  0.195654	  0.195597	diff=5.69355e-05
 -0.308531	 -0.308248	diff=0.000283235
-12.052307	-11.747514	diff=0.304793
  0.369614	  0.373909	diff=0.00429523
 -0.000906	 -0.000901	diff=5.81547e-06
  0.000130	  0.000131	diff=8.33382e-07
  0.018868	  0.017053	diff=0.0018156
 -0.000002	 -0.000002	diff=2.62151e-08
  0.951107	  0.949844	diff=0.00126223
  0.186769	  0.186939	diff=0.000170751
  3.274022	  3.294828	diff=0.0208062
  0.453038	  0.451612	diff=0.00142636
 -0.000277	 -0.000276	diff=5.43919e-07
  0.000040	  0.000040	diff=7.8434e-08
 -0.005277	 -0.005285	diff=7.56591e-06
 -0.000001	 -0.000001	diff=2.46092e-09
  0.290942	  0.290817	diff=0.000124917
  0.147115	  0.147202	diff=8.61456e-05
 -2.919978	 -2.906020	diff=0.0139578
  0.437271	  0.436216	diff=0.00105509
  0.000273	  0.000274	diff=5.35648e-07
 -0.000040	 -0.000040	diff=7.75815e-08
  0.003952	  0.003933	diff=1.91592e-05
  0.000001	  0.000001	diff=2.37728e-09
 -0.288917	 -0.289047	diff=0.000129052
  0.170964	  0.171107	diff=0.000142369
 -0.000592	 -0.000590	diff=2.25207e-06
 -0.095698	 -0.094635	diff=0.00106315
 -0.000000	 -0.000000	diff=4.81062e-10
  0.000000	  0.000000	diff=1.90888e-10
 -0.000042	 -0.000042	diff=1.55745e-07
  0.000000	  0.000000	diff=5.79424e-11
 -0.000000	 -0.000000	diff=2.95952e-09
  0.000002	  0.000002	diff=1.67021e-12
 -0.000052	 -0.000052	diff=2.86277e-08
  0.001603	  0.001611	diff=7.13592e-06
 -0.000000	 -0.000000	diff=1.32304e-12
 -0.000000	 -0.000000	diff=2.65077e-12
 -0.000000	 -0.000000	diff=1.08321e-11
 -0.000000	 -0.000000	diff=2.86195e-12
 -0.000000	 -0.000000	diff=2.68149e-12
  local_diff=0.655763
# W_tgt{2}, [8 4]
  0.949507	  0.952971	diff=0.00346378
 26.379911	 26.483659	diff=0.103748
  0.000004	  0.000004	diff=1.96277e-08
  1.692094	  1.689998	diff=0.00209582
 -0.353450	 -0.351701	diff=0.00174875
  0.391069	  0.392777	diff=0.00170857
  0.038768	  0.038486	diff=0.000282424
125.482737	127.925845	diff=2.44311
 -0.186367	 -0.185975	diff=0.000392445
 -3.477144	 -3.459002	diff=0.0181426
  0.004973	  0.004973	diff=1.28137e-08
 -0.210650	 -0.209932	diff=0.000718377
 -0.263777	 -0.263852	diff=7.50562e-05
 -0.118882	 -0.119057	diff=0.000175159
 -0.071177	 -0.071367	diff=0.000189919
  0.440569	  0.440878	diff=0.000308815
 -0.736859	 -0.737527	diff=0.000667244
  0.834323	  0.836141	diff=0.00181829
 -0.131988	 -0.132061	diff=7.24309e-05
  0.215905	  0.215975	diff=7.06206e-05
 -0.586063	 -0.586554	diff=0.000491112
 -0.024415	 -0.024410	diff=5.28028e-06
  4.392288	  4.356920	diff=0.035368
  2.174124	  2.181230	diff=0.00710639
  0.452297	  0.452398	diff=0.000101019
 -1.725149	 -1.723283	diff=0.00186578
  0.851125	  0.850968	diff=0.000156938
  0.443483	  0.443301	diff=0.000182671
  0.369431	  0.368885	diff=0.000545518
 -0.015697	 -0.015622	diff=7.55691e-05
 -0.064761	 -0.164620	diff=0.099859
 10.885198	 10.904516	diff=0.0193181
  local_diff=2.74386
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.138601	  0.027477	diff=0.111124
  0.126834	  0.025219	diff=0.101615
  0.000000	  0.000000	diff=5.72897e-09
  0.000000	  0.000000	diff=4.81156e-09
  local_diff=0.21274
# W_emb_tgt, [2 5]
-31.205688	-29.699058	diff=1.50663
 -7.865038	 -7.686011	diff=0.179026
  0.000000	  0.000000	diff=3.55612e-09
  0.000000	  0.000000	diff=2.80918e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.588720	  1.202579	diff=0.386141
  0.868481	  0.883825	diff=0.0153439
  0.102996	  0.097666	diff=0.0053302
 -0.028755	 -0.029470	diff=0.000715293
  local_diff=2.09319
# W_src_char{1}, [8 4]
 -0.000019	 -0.000003	diff=1.58509e-05
  0.000000	 -0.000000	diff=2.27086e-13
  0.000000	  0.000000	diff=3.45637e-09
 -0.000000	 -0.000000	diff=1.60053e-09
-75.865887	-10.209202	diff=65.6567
 -0.000000	 -0.000000	diff=1.45641e-09
 -0.000000	  0.000000	diff=3.20111e-10
  0.000000	 -0.000000	diff=1.2158e-22
  0.000048	  0.000007	diff=4.13024e-05
  0.000000	 -0.000000	diff=2.02401e-13
 -0.000000	 -0.000000	diff=8.37213e-09
 -0.000000	 -0.000000	diff=1.43608e-09
194.545211	 25.581967	diff=168.963
 -0.000000	 -0.000000	diff=1.18293e-09
 -0.000000	  0.000000	diff=2.84575e-10
  0.000000	 -0.000000	diff=1.82308e-22
  0.000000	 -0.000000	diff=2.57323e-16
  0.000000	  0.000000	diff=1.17282e-22
  0.000000	  0.000000	diff=2.65075e-20
  0.000000	 -0.000000	diff=5.51685e-16
  0.000000	 -0.000000	diff=2.81028e-08
  0.000000	 -0.000000	diff=5.3093e-16
  0.000000	  0.000000	diff=2.00607e-18
  0.000000	  0.000000	diff=5.98979e-37
  0.000000	 -0.000000	diff=1.53659e-16
  0.000000	  0.000000	diff=1.72539e-17
  0.000000	 -0.000000	diff=4.06223e-22
 -0.000000	 -0.000000	diff=2.82637e-10
  0.000000	  0.000000	diff=2.10319e-10
 -0.000000	 -0.000000	diff=2.68637e-10
  0.000000	  0.000000	diff=2.95122e-13
  0.000000	  0.000000	diff=8.81161e-32
  local_diff=234.62
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-119.332135	-15.526173	diff=103.806
-99.999717	-13.176229	diff=86.8235
 -0.000000	 -0.000000	diff=1.21889e-10
  0.000000	  0.000000	diff=7.68397e-11
  0.000000	  0.000000	diff=9.18226e-17
  0.000000	  0.000000	diff=8.15391e-17
 -0.000000	  0.000000	diff=4.48951e-07
 -0.000000	  0.000000	diff=3.81262e-07
  local_diff=190.629
# W_h, [2 4]
  0.205254	  0.204879	diff=0.000375043
 -0.177928	 -0.178169	diff=0.000240925
  0.657308	  0.657423	diff=0.000114892
 -0.301554	 -0.301600	diff=4.54345e-05
 -1.667701	 -1.661927	diff=0.00577346
  2.250681	  2.260456	diff=0.00977511
  7.398101	  7.406373	diff=0.00827141
  6.285135	  6.289249	diff=0.00411415
  local_diff=0.0287104
# W_soft, [5 2]
 -4.022185	 -4.029588	diff=0.00740297
 -0.596505	 -0.598439	diff=0.00193391
 -2.451843	 -2.456521	diff=0.00467737
 -5.147165	 -5.153369	diff=0.00620394
 12.238109	 12.237916	diff=0.000193195
 -1.097839	 -1.104937	diff=0.00709841
  0.596716	  0.594716	diff=0.00199926
 -5.381400	 -5.385884	diff=0.00448366
 -0.694173	 -0.700152	diff=0.00597905
  6.596487	  6.596257	diff=0.000230693
  local_diff=0.0402024
# Num params=224, abs_diff=460.693
Elapsed time is 3.859654 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=6.67043e-20
 -0.001022	 -0.000997	diff=2.48127e-05
  0.000000	  0.000000	diff=1.27597e-12
  0.003509	  0.003424	diff=8.51443e-05
  0.000000	  0.000000	diff=8.57292e-16
 -0.000000	 -0.000000	diff=6.96634e-12
  0.000000	  0.000000	diff=4.25752e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.4857e-20
  0.001229	  0.001268	diff=3.86369e-05
 -0.000000	 -0.000000	diff=4.06238e-12
 -0.004220	 -0.004353	diff=0.000132585
  0.000000	 -0.000000	diff=1.08976e-15
 -0.000000	 -0.000000	diff=9.22642e-12
  0.000000	  0.000000	diff=4.69444e-12
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.03569e-20
 -0.000156	 -0.000155	diff=5.92663e-07
  0.000000	  0.000000	diff=1.98569e-13
  0.000535	  0.000533	diff=2.03373e-06
  0.000000	  0.000000	diff=1.33414e-16
  0.000000	 -0.000000	diff=3.20504e-13
  0.000000	  0.000000	diff=4.5761e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.51649e-32
  0.000000	  0.000000	diff=4.42661e-16
  0.000000	 -0.000000	diff=4.82481e-25
  0.000000	 -0.000000	diff=8.92872e-16
  0.000000	 -0.000000	diff=1.17033e-27
  0.000000	  0.000000	diff=7.66711e-25
  0.000000	 -0.000000	diff=2.09341e-37
  0.000000	  0.000000	diff=0
  local_diff=0.000283806
# W_src{2}, [8 4]
-30.558228	-29.844251	diff=0.713978
  0.209417	  0.208607	diff=0.000809461
 -0.042198	 -0.042037	diff=0.000161168
  0.001173	  0.001178	diff=4.38467e-06
 -1.578482	 -1.582313	diff=0.00383039
  0.180621	  0.180010	diff=0.000611677
 -0.000212	 -0.000214	diff=1.6212e-06
 -0.000001	 -0.000001	diff=4.42521e-09
  0.000000	  0.000000	diff=5.62131e-12
 -0.000000	 -0.000000	diff=4.721e-12
  0.000000	 -0.000000	diff=4.36816e-14
  0.000000	 -0.000000	diff=7.56142e-16
  0.000000	  0.000000	diff=2.23728e-12
 -0.000000	 -0.000000	diff=5.34644e-12
  0.000000	  0.000000	diff=1.72533e-16
  0.000000	  0.000000	diff=2.67216e-18
 -1.021426	 -1.020243	diff=0.00118301
  0.005150	  0.005149	diff=8.98638e-07
 -0.012633	 -0.012633	diff=2.16174e-07
  0.000771	  0.000771	diff=1.66887e-08
  0.029397	  0.029378	diff=1.89312e-05
  0.007477	  0.007476	diff=1.0768e-06
 -0.638903	 -0.639543	diff=0.000639694
 -1.464840	 -1.465486	diff=0.000645947
  0.003645	  0.003645	diff=1.52291e-08
 -0.000019	 -0.000019	diff=1.84305e-11
  0.000023	  0.000023	diff=2.78428e-12
 -0.000002	 -0.000002	diff=3.22779e-12
  0.000037	  0.000037	diff=6.95407e-11
 -0.000027	 -0.000027	diff=4.67897e-11
  0.001214	  0.001214	diff=3.60014e-10
  0.002859	  0.002859	diff=7.41018e-10
  local_diff=0.721886
# W_tgt{1}, [8 6]
 -0.135492	 -0.135538	diff=4.54253e-05
 20.676176	 20.911802	diff=0.235626
 -0.130266	 -0.138285	diff=0.00801924
 -0.389091	 -0.388426	diff=0.000664166
  0.011424	  0.011439	diff=1.49369e-05
  0.882785	  0.872250	diff=0.0105353
 -0.000005	 -0.000005	diff=1.56112e-08
  0.004808	  0.004795	diff=1.26938e-05
 -0.657110	 -0.658188	diff=0.00107809
-20.175613	-19.954141	diff=0.221472
  0.119819	  0.112340	diff=0.00747932
 -1.901864	 -1.886241	diff=0.0156229
  0.055201	  0.055552	diff=0.000351017
  3.052794	  2.912170	diff=0.140624
 -0.000024	 -0.000023	diff=3.0579e-07
  0.023587	  0.023285	diff=0.000301384
 -0.052167	 -0.052490	diff=0.000322805
  3.563431	  3.566405	diff=0.0029734
  0.286574	  0.284858	diff=0.00171601
  0.897582	  0.901166	diff=0.0035838
  0.033945	  0.034078	diff=0.00013264
  0.313144	  0.311458	diff=0.001686
 -0.000014	 -0.000014	diff=1.08931e-07
  0.016322	  0.016175	diff=0.000146573
  0.267543	  0.267404	diff=0.000139616
 -3.166293	 -3.161810	diff=0.00448219
  0.213537	  0.212545	diff=0.000992333
 -1.089434	 -1.084259	diff=0.00517477
 -0.025659	 -0.025584	diff=7.49371e-05
 -0.225852	 -0.227110	diff=0.00125876
  0.000009	  0.000010	diff=4.97615e-08
 -0.010791	 -0.010863	diff=7.20767e-05
  0.174858	  0.174681	diff=0.000176912
 -0.000156	 -0.000156	diff=6.33793e-07
  0.086406	  0.085029	diff=0.00137708
  0.000143	  0.000143	diff=3.22852e-08
  0.000000	  0.000000	diff=3.45199e-10
  0.000221	  0.000220	diff=8.42481e-07
  0.000000	  0.000000	diff=1.87186e-11
  0.000005	  0.000005	diff=3.42957e-08
  0.001796	  0.001796	diff=3.3606e-07
  0.865945	  0.870552	diff=0.00460709
 -0.018321	 -0.018296	diff=2.47819e-05
  0.000043	  0.000043	diff=1.98584e-07
  0.000000	  0.000000	diff=1.58158e-10
  0.519537	  0.517827	diff=0.00171055
 -0.000000	 -0.000000	diff=1.8117e-12
  0.000000	  0.000000	diff=1.53537e-10
  local_diff=0.672501
# W_tgt{2}, [8 4]
  0.349816	  0.352640	diff=0.00282421
 22.064941	 22.127726	diff=0.0627858
 -0.000484	 -0.000485	diff=1.42216e-06
  1.514655	  1.511513	diff=0.00314105
 -0.190586	 -0.189734	diff=0.000852067
  0.596883	  0.599269	diff=0.00238603
 -0.023072	 -0.022761	diff=0.000311681
127.012492	128.847257	diff=1.83477
 -0.165363	 -0.164644	diff=0.000718412
 -6.125900	 -6.120700	diff=0.00520063
 -0.025435	 -0.025405	diff=3.03408e-05
 -0.283234	 -0.282788	diff=0.000446348
 -6.118739	 -6.098752	diff=0.0199863
 -0.194710	 -0.194784	diff=7.36115e-05
 -1.110032	 -1.097028	diff=0.0130039
  0.792457	  0.792873	diff=0.000415772
 -1.691729	 -1.693321	diff=0.00159242
  1.389923	  1.391690	diff=0.00176682
  0.307274	  0.307092	diff=0.000182421
  0.016365	  0.016499	diff=0.000134034
 -1.246759	 -1.246780	diff=2.02749e-05
  0.057430	  0.057485	diff=5.55194e-05
  5.212943	  5.225570	diff=0.012627
 -2.288095	 -2.244027	diff=0.044068
  0.099888	  0.099699	diff=0.000188227
 -1.739377	 -1.740372	diff=0.000995273
  0.355968	  0.355997	diff=2.96591e-05
  0.597948	  0.597888	diff=6.01265e-05
  0.122022	  0.122183	diff=0.000161117
  0.071059	  0.071145	diff=8.5975e-05
 -0.433078	 -0.432639	diff=0.000439269
  7.394804	  7.407425	diff=0.012621
  local_diff=2.02197
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=2.38159e-11
  0.000000	  0.000000	diff=3.7844e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.004307	  0.004130	diff=0.000176831
  0.004919	  0.004690	diff=0.000228906
 -0.000000	 -0.000000	diff=3.27639e-12
 -0.000000	 -0.000000	diff=2.92571e-12
  local_diff=0.000405737
# W_emb_tgt, [2 5]
-49.038406	-47.775057	diff=1.26335
-12.712141	-12.620681	diff=0.0914603
  0.000000	  0.000000	diff=6.72055e-09
  0.000000	  0.000000	diff=3.16384e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  5.157647	  6.085725	diff=0.928078
 -5.580492	 -4.995387	diff=0.585106
  5.029135	  4.823373	diff=0.205762
 -2.437863	 -2.489801	diff=0.0519374
  local_diff=3.12569
# W_tgt_char{1}, [8 4]
-15.655789	-15.318231	diff=0.337558
 -1.460095	 -1.501622	diff=0.0415268
  0.000000	  0.000000	diff=6.37652e-32
 -0.000001	 -0.000001	diff=2.18591e-08
  0.130734	  0.133760	diff=0.00302562
 -2.895066	 -2.919601	diff=0.0245349
 -0.000000	 -0.000000	diff=2.38697e-10
  0.133707	  0.139382	diff=0.00567483
 -5.826084	 -5.778429	diff=0.0476553
 -0.560563	 -0.566549	diff=0.00598639
  0.000000	  0.000000	diff=5.68336e-32
 -0.000001	 -0.000001	diff=1.7575e-08
  0.050061	  0.050496	diff=0.000435289
 -5.893160	 -5.996181	diff=0.103021
 -0.000000	 -0.000000	diff=1.65578e-10
  0.051766	  0.052588	diff=0.000821876
 -2.301953	 -2.290196	diff=0.0117578
 -0.300189	 -0.301895	diff=0.00170558
  0.000000	  0.000000	diff=2.26495e-34
 -0.000000	 -0.000000	diff=7.19934e-10
  0.026710	  0.026833	diff=0.000123264
  0.001008	  0.001008	diff=9.70632e-09
 -0.000000	 -0.000000	diff=7.06231e-12
  0.027472	  0.027709	diff=0.000236407
  2.463465	  2.472920	diff=0.00945489
  0.294492	  0.292869	diff=0.0016223
  0.000000	  0.000000	diff=2.17966e-34
 -0.000000	 -0.000000	diff=6.43627e-10
 -0.025906	 -0.025792	diff=0.000114562
  0.006819	  0.006818	diff=4.57215e-07
 -0.000000	 -0.000000	diff=2.47103e-12
 -0.026271	 -0.026055	diff=0.000216208
  local_diff=0.595471
# W_emb_tgt_char, [2 5]
  0.505305	  0.506916	diff=0.00161006
 -6.656129	 -6.680091	diff=0.0239619
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  3.480720	  3.446219	diff=0.0345014
 -2.454356	 -2.471956	diff=0.0176002
  0.000000	  0.000000	diff=3.05152e-13
  0.000000	  0.000000	diff=1.90493e-13
  0.000002	  0.000001	diff=3.99121e-08
  0.000000	  0.000000	diff=7.43924e-10
  local_diff=0.0776735
# W_h, [2 4]
  1.493844	  1.494572	diff=0.000728813
 -1.246980	 -1.246354	diff=0.000626451
 -0.011631	 -0.011631	diff=3.00254e-08
  0.003238	  0.003238	diff=1.28875e-08
 -0.223936	 -0.217922	diff=0.00601327
  3.902743	  3.902246	diff=0.000497085
  5.690652	  5.696963	diff=0.00631122
  7.292014	  7.296153	diff=0.00413865
  local_diff=0.0183155
# W_soft, [5 2]
 -1.189027	 -1.197234	diff=0.00820673
 -0.434854	 -0.437344	diff=0.00249
 -7.858412	 -7.865210	diff=0.00679784
 -1.836825	 -1.843846	diff=0.00702107
 11.344741	 11.343634	diff=0.00110696
  0.447493	  0.440709	diff=0.00678373
  0.316286	  0.313902	diff=0.00238458
 -4.448612	 -4.454413	diff=0.00580124
  1.182404	  1.176529	diff=0.00587509
  2.524998	  2.523273	diff=0.00172436
  local_diff=0.0481916
# W_soft_char, [5 2]
 -0.001425	 -0.001425	diff=1.75133e-08
 -0.001439	 -0.001439	diff=4.05209e-08
  0.006653	  0.006653	diff=1.97767e-07
  5.154428	  5.154427	diff=4.08045e-07
 -5.158215	 -5.158216	diff=6.14801e-07
 -0.009820	 -0.009821	diff=8.50911e-07
 -0.009875	 -0.009876	diff=8.75564e-07
  0.046371	  0.046370	diff=1.05707e-06
  4.852471	  4.852469	diff=1.46214e-06
 -4.879141	 -4.879143	diff=1.64245e-06
  local_diff=7.16679e-06
# Num params=234, abs_diff=7.2824
Elapsed time is 4.859970 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.006248	  0.006248	diff=8.17844e-09
 -0.000962	 -0.000962	diff=1.32929e-07
  0.000343	  0.000343	diff=5.57016e-10
  0.000039	  0.000039	diff=2.52372e-12
  0.006276	  0.006276	diff=8.14736e-09
 -0.000966	 -0.000966	diff=2.14546e-09
 -1.442460	 -1.441986	diff=0.000473752
  0.012518	  0.012605	diff=8.60997e-05
 -0.000000	 -0.000000	diff=2.05041e-10
 -0.000007	 -0.000007	diff=2.10267e-07
  0.000000	  0.000000	diff=2.44597e-09
  0.000000	  0.000000	diff=6.47122e-16
  0.000000	 -0.000000	diff=1.74327e-16
  0.000000	  0.000000	diff=5.0601e-17
  0.000000	  0.000000	diff=5.70183e-14
  0.000000	 -0.000000	diff=1.38184e-14
 -0.002216	 -0.002216	diff=9.82367e-09
  0.001004	  0.001004	diff=3.40886e-10
 -0.000438	 -0.000438	diff=3.40667e-10
 -0.000043	 -0.000043	diff=4.50584e-12
 -0.002666	 -0.002666	diff=1.40143e-08
  0.000960	  0.000960	diff=3.06733e-10
  0.249644	  0.249767	diff=0.000123243
 -0.115581	 -0.115576	diff=4.51647e-06
  0.000466	  0.000466	diff=4.27112e-10
 -0.000211	 -0.000211	diff=1.36739e-11
  0.000092	  0.000092	diff=1.39149e-11
  0.000009	  0.000009	diff=7.00113e-12
  0.000560	  0.000560	diff=6.13715e-10
 -0.000202	 -0.000202	diff=1.16826e-11
 -0.052498	 -0.052493	diff=5.44244e-06
  0.024290	  0.024290	diff=1.99505e-07
  local_diff=0.000693644
# W_src{2}, [8 4]
  0.003236	  0.003236	diff=7.39428e-08
 -0.021143	 -0.021143	diff=7.31683e-08
  0.001042	  0.001042	diff=1.42487e-09
 -0.002641	 -0.002641	diff=4.34382e-09
  0.004342	  0.004342	diff=8.79868e-08
 -0.016727	 -0.016727	diff=1.61843e-07
 -0.395461	 -0.395587	diff=0.00012573
 -1.129322	 -1.129430	diff=0.00010724
  0.001133	  0.001133	diff=4.98098e-09
 -0.011674	 -0.011674	diff=4.93204e-09
  0.000948	  0.000948	diff=5.07055e-10
 -0.002007	 -0.002007	diff=2.20975e-09
  0.002352	  0.002352	diff=5.74601e-09
 -0.010287	 -0.010287	diff=4.79147e-08
 -0.213588	 -0.213592	diff=3.83676e-06
 -0.347530	 -0.347540	diff=9.19821e-06
 -0.005710	 -0.005710	diff=1.7833e-07
 -0.017506	 -0.017506	diff=1.71792e-08
  0.002537	  0.002537	diff=5.02086e-09
 -0.004571	 -0.004571	diff=2.74389e-10
 -0.003966	 -0.003966	diff=2.17933e-07
 -0.019067	 -0.019067	diff=7.08511e-08
 -0.448523	 -0.448507	diff=1.64195e-05
 -0.696117	 -0.696047	diff=6.98779e-05
  0.008003	  0.008003	diff=1.58622e-07
  0.028308	  0.028308	diff=1.92005e-07
 -0.003545	 -0.003545	diff=9.66721e-09
  0.009366	  0.009366	diff=1.78565e-10
  0.006325	  0.006324	diff=3.29232e-07
  0.029007	  0.029007	diff=5.67082e-08
  0.937029	  0.937037	diff=7.61975e-06
  1.037056	  1.036848	diff=0.000207747
  local_diff=0.000549375
# W_tgt{1}, [8 6]
 -0.004683	 -0.004678	diff=5.623e-06
  0.024554	  0.027255	diff=0.00270088
 -6.904713	 -6.873361	diff=0.031352
 -0.000535	 -0.000535	diff=7.0769e-07
  0.000004	  0.000004	diff=4.94165e-09
 -1.150997	 -1.149717	diff=0.00127948
 -0.000000	 -0.000000	diff=3.81043e-11
  0.333633	  0.334049	diff=0.000416168
 -0.022847	 -0.022714	diff=0.000133023
 -1.123485	 -1.124088	diff=0.000603567
  6.535395	  6.564062	diff=0.0286665
 -0.002614	 -0.002597	diff=1.67457e-05
  0.000017	  0.000018	diff=1.12181e-07
 -5.613299	 -5.583191	diff=0.0301079
 -0.000000	 -0.000000	diff=4.02342e-11
  1.612340	  1.622184	diff=0.00984363
  0.005831	  0.005840	diff=8.73937e-06
  0.235041	  0.234842	diff=0.000199789
  0.841477	  0.841614	diff=0.000136995
 -0.000020	 -0.000020	diff=5.3e-10
  0.000000	  0.000000	diff=9.93854e-11
  0.301753	  0.301167	diff=0.000586439
  0.000000	  0.000000	diff=4.34162e-12
 -0.414812	 -0.414157	diff=0.000654536
  0.014090	  0.014141	diff=5.1178e-05
  0.562576	  0.561384	diff=0.0011917
  1.988140	  1.989940	diff=0.00179963
 -0.000009	 -0.000009	diff=8.26196e-09
  0.000000	  0.000000	diff=6.0202e-10
  0.798623	  0.795167	diff=0.00345621
  0.000000	  0.000000	diff=7.89286e-12
 -1.006856	 -1.003023	diff=0.00383226
  0.013447	  0.013494	diff=4.66051e-05
  0.528210	  0.527185	diff=0.00102586
  2.276841	  2.279303	diff=0.00246193
 -0.000002	 -0.000002	diff=7.60663e-09
  0.000000	  0.000000	diff=5.40461e-10
  0.771704	  0.768557	diff=0.00314688
  0.000000	  0.000000	diff=5.0097e-12
 -0.960628	 -0.957138	diff=0.00348989
  0.000000	  0.000000	diff=1.42943e-12
  0.000006	  0.000006	diff=1.822e-10
  0.000184	  0.000184	diff=2.74654e-11
 -0.000000	 -0.000000	diff=1.13667e-12
  0.000000	  0.000000	diff=3.72668e-12
  0.000008	  0.000008	diff=7.29884e-13
  0.000000	  0.000000	diff=1.21626e-14
 -0.000010	 -0.000010	diff=4.56933e-12
  local_diff=0.127215
# W_tgt{2}, [8 4]
 -0.615957	 -0.617382	diff=0.00142553
 34.490781	 34.618576	diff=0.127795
 -0.000427	 -0.000426	diff=1.60942e-06
  2.078394	  2.070901	diff=0.00749351
 -0.218541	 -0.217774	diff=0.000767085
  0.817791	  0.820681	diff=0.00288945
  0.185011	  0.184505	diff=0.000506031
170.601637	173.088295	diff=2.48666
 -0.080545	 -0.080528	diff=1.74609e-05
 -0.376681	 -0.376602	diff=7.83393e-05
  0.017016	  0.017016	diff=3.91207e-07
 -0.007392	 -0.007392	diff=3.81097e-08
 -0.153630	 -0.153643	diff=1.2894e-05
 -0.461401	 -0.461344	diff=5.68853e-05
 -2.549695	 -2.548598	diff=0.00109688
 -0.665581	 -0.665040	diff=0.000541661
  0.022014	  0.022014	diff=1.7039e-07
 -1.604226	 -1.605425	diff=0.00119908
  0.004526	  0.004526	diff=1.72482e-07
  0.019027	  0.019069	diff=4.23575e-05
  0.005243	  0.005248	diff=5.01938e-06
 -0.146829	 -0.146724	diff=0.000104524
  0.071173	  0.071234	diff=6.13396e-05
 -2.821428	 -2.819413	diff=0.00201467
 -0.402471	 -0.402458	diff=1.35885e-05
  0.849400	  0.850385	diff=0.00098493
 -0.341505	 -0.341430	diff=7.51827e-05
  0.554961	  0.554769	diff=0.00019173
 -0.270186	 -0.270326	diff=0.000139298
 -0.157771	 -0.157807	diff=3.59235e-05
 -1.003819	 -1.004385	diff=0.000565365
 21.945916	 21.945942	diff=2.6529e-05
  local_diff=2.6348
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000009	  0.000009	diff=3.75637e-07
  0.000011	  0.000010	diff=4.95173e-07
  0.000000	  0.000000	diff=3.40556e-09
  0.000000	  0.000000	diff=2.86809e-09
  local_diff=8.77083e-07
# W_emb_tgt, [2 5]
 -4.102115	 -4.077678	diff=0.0244372
  2.469295	  2.474717	diff=0.00542131
  0.000000	  0.000000	diff=6.58942e-10
  0.000000	  0.000000	diff=7.36868e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -8.081643	 -7.131565	diff=0.950078
 11.460057	 11.546129	diff=0.0860722
 -0.000246	 -0.000248	diff=1.23009e-06
  0.000096	  0.000096	diff=4.80402e-07
  local_diff=1.06601
# W_src_char{1}, [8 4]
  0.000003	  0.000003	diff=4.71702e-09
  0.000000	 -0.000000	diff=6.27083e-13
 -0.000000	 -0.000000	diff=5.5265e-12
  0.000000	  0.000000	diff=1.72376e-13
 12.315415	 12.090164	diff=0.225251
  0.000000	  0.000000	diff=3.63944e-12
  0.000000	  0.000000	diff=3.39783e-12
  0.000000	 -0.000000	diff=1.28835e-22
 -0.000009	 -0.000008	diff=2.92543e-07
  0.000000	 -0.000000	diff=5.58916e-13
  0.000000	  0.000000	diff=1.23195e-12
  0.000000	  0.000000	diff=2.75539e-12
-30.039356	-30.295237	diff=0.255881
  0.000000	  0.000000	diff=4.87614e-12
  0.000000	  0.000000	diff=6.73598e-12
  0.000000	 -0.000000	diff=7.86034e-23
  0.000000	 -0.000000	diff=7.21492e-16
  0.000000	 -0.000000	diff=5.75917e-23
  0.000000	  0.000000	diff=7.43207e-20
  0.000000	  0.000000	diff=2.70907e-16
 -0.000000	 -0.000000	diff=6.17231e-11
  0.000000	  0.000000	diff=2.61319e-16
  0.000000	 -0.000000	diff=9.87368e-19
  0.000000	 -0.000000	diff=2.94074e-37
  0.000000	  0.000000	diff=7.56357e-17
  0.000000	 -0.000000	diff=8.47259e-18
  0.000000	  0.000000	diff=1.99309e-22
  0.000000	  0.000000	diff=5.62034e-12
 -0.000000	 -0.000000	diff=2.33216e-12
  0.000000	  0.000000	diff=1.34645e-12
  0.000000	 -0.000000	diff=1.45256e-13
  0.000000	 -0.000000	diff=4.32698e-32
  local_diff=0.481133
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 18.802365	 18.386745	diff=0.41562
 15.929183	 15.603843	diff=0.32534
  0.000000	  0.000000	diff=7.31178e-12
 -0.000000	 -0.000000	diff=5.36965e-12
  0.000000	 -0.000000	diff=4.79513e-17
  0.000000	 -0.000000	diff=4.2228e-17
  0.000000	  0.000000	diff=1.55586e-09
  0.000000	  0.000000	diff=1.24307e-09
  local_diff=0.74096
# W_tgt_char{1}, [8 4]
 -0.010460	 -0.010238	diff=0.000221542
 -2.074004	 -1.815233	diff=0.258771
  0.000000	  0.000000	diff=1.38039e-14
  0.000000	  0.000000	diff=1.1774e-23
  0.000076	  0.000079	diff=3.0212e-06
  0.000000	  0.000000	diff=3.21999e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.020216	 -0.019414	diff=0.000802345
  0.671034	  0.709762	diff=0.0387279
  0.000000	 -0.000000	diff=2.09887e-14
  0.000000	 -0.000000	diff=4.76059e-24
 -0.000031	 -0.000031	diff=4.78975e-07
  0.000000	  0.000000	diff=6.04536e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.01269e-10
  0.271944	  0.273191	diff=0.00124724
  0.000000	 -0.000000	diff=2.24113e-23
  0.000000	  0.000000	diff=4.73637e-32
  0.000009	  0.000009	diff=4.4926e-08
  0.000000	 -0.000000	diff=4.05413e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000098	  0.000098	diff=9.63136e-08
  0.253920	  0.254689	diff=0.000768531
  0.000000	 -0.000000	diff=2.60025e-15
  0.000000	 -0.000000	diff=1.72417e-24
  0.000008	  0.000008	diff=3.00064e-08
  0.000000	 -0.000000	diff=2.1891e-14
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.300542
# W_emb_tgt_char, [2 5]
  0.036111	  0.036214	diff=0.000103583
  0.352253	  0.362388	diff=0.0101351
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.003612	  0.003640	diff=2.7435e-05
  0.000546	  0.000547	diff=6.21684e-07
 -0.000016	 -0.000016	diff=1.22765e-07
 -0.000002	 -0.000002	diff=2.78376e-09
  0.000000	  0.000000	diff=1.0359e-12
  0.000000	  0.000000	diff=4.19538e-12
  local_diff=0.0102669
# W_h, [2 4]
  0.115245	  0.115232	diff=1.31954e-05
 -0.288882	 -0.288885	diff=3.40101e-06
 -0.383081	 -0.383168	diff=8.65285e-05
  0.739505	  0.739489	diff=1.5532e-05
  2.321340	  2.322116	diff=0.000775807
 -1.493660	 -1.494456	diff=0.000795884
  2.801460	  2.763994	diff=0.0374666
 13.976403	 13.981247	diff=0.00484375
  local_diff=0.0440007
# W_soft, [5 2]
  0.384720	  0.384665	diff=5.50966e-05
 -0.061216	 -0.061312	diff=9.60372e-05
 -5.577569	 -5.577785	diff=0.000215938
  2.027702	  2.024828	diff=0.00287394
  3.232356	  3.229605	diff=0.00275074
 -4.473456	 -4.473472	diff=1.62259e-05
  0.039907	  0.039757	diff=0.000149724
 -7.701641	 -7.701673	diff=3.21034e-05
  5.006434	  4.992138	diff=0.0142966
  7.157534	  7.143250	diff=0.0142834
  local_diff=0.0347698
# W_soft_char, [5 2]
  0.000115	  0.000115	diff=5.44722e-11
 -0.000036	 -0.000036	diff=5.52561e-11
  0.000117	  0.000117	diff=5.46824e-11
 -0.000249	 -0.000249	diff=5.40058e-11
  0.000053	  0.000053	diff=5.44319e-11
 -7.996375	 -8.008560	diff=0.0121847
 -0.021617	 -0.021654	diff=3.72173e-05
  5.814763	  5.802597	diff=0.0121665
 -0.009963	 -0.009965	diff=1.87122e-06
  2.237584	  2.237583	diff=1.87562e-06
  local_diff=0.0243922
# Num params=276, abs_diff=5.46533
Elapsed time is 6.094005 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.691405	 -0.691743	diff=0.000337805
  0.109100	  0.109154	diff=5.31832e-05
 -0.076941	 -0.076942	diff=1.40501e-06
  0.019474	  0.019478	diff=3.93594e-06
 -0.916165	 -0.917427	diff=0.00126215
  0.062011	  0.062076	diff=6.49418e-05
  2.660038	  2.651240	diff=0.00879727
 -0.735502	 -0.734559	diff=0.000943254
  0.328295	  0.328502	diff=0.000206264
 -0.029671	 -0.029669	diff=2.29805e-06
  0.038573	  0.038580	diff=6.67911e-06
 -0.001899	 -0.001899	diff=6.12204e-08
  0.467264	  0.467744	diff=0.000479771
 -0.025137	 -0.025130	diff=7.21335e-06
 -1.246078	 -1.243675	diff=0.00240289
 -0.126766	 -0.126593	diff=0.000173077
  0.614896	  0.614943	diff=4.69425e-05
 -0.175302	 -0.175200	diff=0.000101611
  0.146887	  0.146921	diff=3.46869e-05
 -0.069144	 -0.069121	diff=2.32774e-05
  1.129490	  1.129715	diff=0.000224944
 -0.087604	 -0.087556	diff=4.78206e-05
 -1.076674	 -1.076777	diff=0.000103321
  0.338879	  0.339194	diff=0.000314866
 -0.206467	 -0.206121	diff=0.000345314
 -0.002600	 -0.002634	diff=3.41299e-05
 -0.055140	 -0.055116	diff=2.40471e-05
 -0.059944	 -0.059945	diff=1.05251e-06
 -0.378009	 -0.376692	diff=0.00131623
  0.003480	  0.003488	diff=8.17998e-06
  0.404421	  0.405056	diff=0.000634971
  0.100124	  0.100380	diff=0.000255873
  local_diff=0.0182595
# W_src{2}, [8 4]
  0.063318	  0.063487	diff=0.000168515
  0.173821	  0.174602	diff=0.000781222
  0.141952	  0.141855	diff=9.68613e-05
 -0.006953	 -0.006959	diff=6.32612e-06
 -0.172201	 -0.171488	diff=0.000713175
 -0.451258	 -0.450343	diff=0.000915228
 -2.564440	 -2.564990	diff=0.000549915
  0.798811	  0.800365	diff=0.00155373
 -0.050656	 -0.050750	diff=9.33388e-05
 -0.352668	 -0.352287	diff=0.000380259
  0.102880	  0.102824	diff=5.66145e-05
 -0.004325	 -0.004328	diff=2.6953e-06
 -0.363652	 -0.363368	diff=0.000284003
  0.063772	  0.063996	diff=0.000223589
 -1.581986	 -1.579315	diff=0.00267089
 -0.380220	 -0.379765	diff=0.000454894
 -0.703518	 -0.705575	diff=0.00205701
 -0.584458	 -0.581090	diff=0.00336776
  0.210563	  0.209987	diff=0.000576647
 -0.240307	 -0.240819	diff=0.000512021
 -0.113112	 -0.113934	diff=0.000822041
 -0.414963	 -0.414585	diff=0.000377339
 -2.042622	 -2.036283	diff=0.00633901
 -0.140749	 -0.140346	diff=0.000402918
  0.621290	  0.620476	diff=0.000813909
  0.639386	  0.640798	diff=0.00141222
 -0.404277	 -0.404830	diff=0.000552949
  0.205797	  0.205499	diff=0.000298267
  0.310502	  0.310062	diff=0.000440746
  0.502444	  0.502378	diff=6.56046e-05
  3.581260	  3.599124	diff=0.0178633
  0.142165	  0.142550	diff=0.00038472
  local_diff=0.0452378
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=2.14714e-07
-29.606912	-30.003694	diff=0.396782
 -0.133275	 -0.133114	diff=0.00016116
 -0.445404	 -0.445331	diff=7.35941e-05
 -0.000000	 -0.000000	diff=1.55232e-10
 -3.253594	 -3.277302	diff=0.0237075
  0.000004	  0.000004	diff=9.39245e-08
  0.000015	  0.000015	diff=5.49083e-08
  0.000617	  0.000622	diff=5.04575e-06
 27.481829	 27.175352	diff=0.306477
  0.126979	  0.127146	diff=0.000166677
 -2.163983	 -2.162475	diff=0.00150803
  0.000000	  0.000000	diff=3.53706e-10
-11.701605	-12.042780	diff=0.341175
  0.000001	  0.000001	diff=1.39344e-07
  0.000076	  0.000077	diff=9.79702e-07
 -0.000487	 -0.000484	diff=3.08253e-06
  0.543767	  0.541306	diff=0.00246065
  0.026318	  0.026313	diff=5.2227e-06
  1.682238	  1.683450	diff=0.00121195
 -0.000000	 -0.000000	diff=1.63272e-10
  3.003588	  2.991584	diff=0.0120048
 -0.000004	 -0.000004	diff=4.14423e-08
 -0.000041	 -0.000040	diff=2.7959e-07
 -0.000487	 -0.000484	diff=3.08654e-06
 11.595165	 11.548338	diff=0.0468267
  0.031681	  0.031704	diff=2.28135e-05
  1.683279	  1.684492	diff=0.00121349
 -0.000000	 -0.000000	diff=1.57619e-10
  3.236260	  3.222264	diff=0.0139957
 -0.000005	 -0.000005	diff=4.72471e-08
 -0.000051	 -0.000051	diff=4.41125e-07
 -0.000000	 -0.000000	diff=9.92359e-13
  0.035246	  0.035115	diff=0.000130846
  0.031894	  0.031957	diff=6.31285e-05
 -0.000002	 -0.000002	diff=3.33145e-10
  0.000000	  0.000000	diff=1.45213e-11
  0.035906	  0.035768	diff=0.000138101
  0.000000	  0.000000	diff=2.7796e-12
 -0.000047	 -0.000047	diff=3.74165e-07
  0.000093	  0.000093	diff=1.14507e-07
 -0.177655	 -0.177742	diff=8.68111e-05
  0.000006	  0.000006	diff=1.75611e-08
 -0.325147	 -0.325108	diff=3.93595e-05
  0.000000	  0.000000	diff=3.85526e-12
 -0.072507	 -0.072456	diff=5.14456e-05
  0.000001	  0.000001	diff=1.31686e-09
 -0.000000	 -0.000000	diff=1.06718e-12
  local_diff=1.14832
# W_tgt{2}, [8 4]
  1.027805	  1.027388	diff=0.000417553
  2.056299	  2.070618	diff=0.014319
  0.000066	  0.000066	diff=2.72499e-07
 -0.189975	 -0.189084	diff=0.000890206
  0.166263	  0.165631	diff=0.000631313
  0.037910	  0.038051	diff=0.000141117
 -0.011984	 -0.011893	diff=9.10122e-05
-20.795821	-20.618381	diff=0.177441
 -0.567012	 -0.567547	diff=0.000535363
  0.378179	  0.377430	diff=0.000748911
  0.031890	  0.031976	diff=8.62177e-05
  0.118672	  0.118576	diff=9.61573e-05
 -1.293311	 -1.300273	diff=0.00696206
  1.618284	  1.612390	diff=0.00589447
  0.573986	  0.574177	diff=0.0001905
 -1.285446	 -1.285687	diff=0.000240657
 -6.546063	 -6.549362	diff=0.00329876
 -0.220779	 -0.219662	diff=0.00111622
  1.416752	  1.424254	diff=0.00750166
  0.832676	  0.833848	diff=0.00117239
 -6.234002	 -6.250060	diff=0.0160584
  0.301439	  0.301555	diff=0.000116419
 -2.981867	 -2.974323	diff=0.00754351
 -0.719680	 -0.654143	diff=0.0655371
  5.770252	  5.776029	diff=0.0057773
  0.985410	  0.987417	diff=0.00200685
  0.446748	  0.449892	diff=0.0031439
 -1.989924	 -1.985309	diff=0.00461466
  3.663866	  3.661701	diff=0.00216506
 -1.073404	 -1.075621	diff=0.0022164
 -1.852681	 -1.843532	diff=0.0091489
-13.383236	-13.135998	diff=0.247238
  local_diff=0.587341
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=8.55881e-08
  0.000002	  0.000002	diff=1.12783e-07
 -0.000000	 -0.000000	diff=3.19954e-12
 -0.000000	 -0.000000	diff=1.10052e-12
  local_diff=1.98375e-07
# W_emb_tgt, [2 5]
 69.329519	 67.805384	diff=1.52414
 18.205118	 18.079464	diff=0.125654
  0.000000	  0.000000	diff=3.40986e-10
  0.000000	  0.000000	diff=1.13112e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 17.585257	 17.924772	diff=0.339515
 -9.562389	 -9.544795	diff=0.0175942
-13.582187	-14.118878	diff=0.53669
  7.408896	  7.295975	diff=0.112921
  local_diff=2.65651
# W_src_char{1}, [8 4]
 -0.023575	 -0.024851	diff=0.00127562
 -0.013093	 -0.013006	diff=8.72586e-05
 -0.000000	 -0.000000	diff=8.20893e-13
  0.504667	  0.501925	diff=0.00274144
 -0.538853	 -0.538238	diff=0.000615083
  0.636113	  0.632812	diff=0.00330092
 -0.001786	 -0.001787	diff=1.61953e-07
 -0.000527	 -0.000523	diff=3.61942e-06
  3.999655	  4.023721	diff=0.0240654
  0.798814	  0.797302	diff=0.00151148
  0.000007	  0.000007	diff=1.82933e-08
-33.125959	-30.769144	diff=2.35682
 30.595654	 32.995213	diff=2.39956
-42.350295	-38.749932	diff=3.60036
  0.110128	  0.109518	diff=0.000610795
  0.032351	  0.031959	diff=0.000392505
 -0.000108	 -0.000108	diff=1.66685e-11
 -0.000022	 -0.000021	diff=1.42301e-07
 -0.000000	 -0.000000	diff=7.75593e-12
  0.000834	  0.000828	diff=5.49008e-06
 -0.000888	 -0.000888	diff=1.6436e-09
  0.001050	  0.001043	diff=6.91363e-06
 -0.000003	 -0.000003	diff=3.84804e-12
 -0.000001	 -0.000001	diff=5.7026e-09
  0.000001	  0.000001	diff=1.39475e-12
  0.000000	  0.000000	diff=9.29166e-10
  0.000000	  0.000000	diff=1.13685e-12
 -0.000005	 -0.000005	diff=3.55691e-08
  0.000006	  0.000006	diff=2.24822e-11
 -0.000007	 -0.000007	diff=4.47993e-08
  0.000000	  0.000000	diff=5.46464e-12
  0.000000	  0.000000	diff=4.24084e-11
  local_diff=8.39136
# W_src_char{2}, [8 4]
  4.322075	  4.376186	diff=0.0541113
 -0.814293	 -0.812989	diff=0.00130409
  0.000216	  0.000216	diff=2.9572e-08
 -0.000235	 -0.000235	diff=5.22371e-08
  3.211557	  3.237895	diff=0.0263378
 -0.488880	 -0.488498	diff=0.000381836
 -2.208273	 -2.191946	diff=0.0163269
  8.776168	  8.936632	diff=0.160464
 -3.009919	 -2.984932	diff=0.0249871
  0.284032	  0.270849	diff=0.0131837
 -0.001239	 -0.001210	diff=2.94458e-05
  0.000007	  0.000007	diff=4.85843e-07
 -2.159339	 -2.147533	diff=0.0118067
  0.128350	  0.120779	diff=0.00757098
  1.460012	  1.467310	diff=0.00729797
 -6.055530	 -5.985172	diff=0.0703583
  2.995351	  3.014551	diff=0.0191997
 -1.157391	 -1.155301	diff=0.00208978
  1.152869	 -0.237646	diff=1.39052
 -0.161822	 -0.162296	diff=0.00047394
  2.682151	  2.693148	diff=0.0109975
 -0.811201	 -0.812704	diff=0.00150296
 -0.149943	 -0.150290	diff=0.000347786
  1.055356	  1.059626	diff=0.00427075
  0.846263	  0.847315	diff=0.00105162
 -0.307978	 -0.307829	diff=0.000148811
  5.533040	  4.479738	diff=1.0533
 -0.046061	 -0.046485	diff=0.000423857
  0.733028	  0.733807	diff=0.000778848
 -0.223370	 -0.225997	diff=0.00262652
 -0.039655	 -0.039680	diff=2.48126e-05
  0.280585	  0.280885	diff=0.000299993
  local_diff=2.88221
# W_src_char{3}, [8 4]
  0.781874	  0.544803	diff=0.237071
 -0.382579	 -0.492977	diff=0.110398
  0.370032	  0.369611	diff=0.000421312
 -0.024942	 -0.024983	diff=4.06268e-05
  1.034086	  0.842342	diff=0.191743
 -0.062754	 -0.062895	diff=0.000140748
-16.486760	-15.838315	diff=0.648445
 -0.204518	 -0.205117	diff=0.000599046
 -1.098824	 -1.349945	diff=0.251121
  0.306767	  0.228668	diff=0.078099
  0.321319	  0.321285	diff=3.37798e-05
 -0.000248	 -0.000257	diff=8.64844e-06
  2.842495	  2.820845	diff=0.0216502
 -0.028394	 -0.028393	diff=1.52446e-06
 -2.587003	 -2.573153	diff=0.0138505
  0.121543	  0.121547	diff=4.27208e-06
 -0.008540	 -0.008559	diff=1.91667e-05
 -0.249896	 -0.248606	diff=0.00128954
 -0.734655	 -0.735468	diff=0.000813525
  0.042114	  0.042009	diff=0.000105331
 -5.581278	 -5.878908	diff=0.29763
  0.049831	  0.049947	diff=0.00011661
 -6.916819	 -6.850988	diff=0.0658309
  0.340579	  0.339111	diff=0.00146712
  0.001531	  0.001530	diff=3.8726e-07
 -0.127981	 -0.127837	diff=0.00014395
  0.124598	  0.124587	diff=1.06248e-05
  0.000419	  0.000417	diff=1.59115e-06
  1.281475	  1.277866	diff=0.0036085
 -0.007249	 -0.007246	diff=2.33993e-06
  0.984630	  0.985841	diff=0.0012119
  0.047101	  0.047094	diff=7.17398e-06
  local_diff=1.92589
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=1.11293e-08
  0.000001	  0.000001	diff=8.29195e-09
  0.000533	  0.000544	diff=1.01132e-05
 -0.012079	 -0.012500	diff=0.000421239
-20.748497	-16.320752	diff=4.42775
 36.433487	 40.172969	diff=3.73948
  0.000000	 -0.000000	diff=4.66421e-12
  0.000000	  0.000000	diff=1.49751e-12
  local_diff=8.16766
# W_tgt_char{1}, [8 4]
  0.000001	  0.000001	diff=5.93572e-09
  0.000003	  0.000003	diff=3.06162e-08
 -2.643955	 -2.608636	diff=0.0353191
 -0.000001	 -0.000001	diff=1.32808e-08
 -0.000421	 -0.000425	diff=4.15535e-06
  0.000000	 -0.000000	diff=1.00836e-12
  0.000000	  0.000000	diff=1.28912e-14
  0.000000	  0.000000	diff=2.27111e-08
 -0.000000	 -0.000000	diff=1.26355e-10
 -0.000001	 -0.000001	diff=2.67122e-09
  0.766744	  0.769846	diff=0.00310181
  0.000000	  0.000000	diff=1.14545e-09
  0.000126	  0.000125	diff=3.64987e-07
 -0.000000	 -0.000000	diff=6.14166e-14
  0.000000	 -0.000000	diff=3.80759e-15
  0.000000	  0.000000	diff=2.04703e-08
  0.000000	  0.000000	diff=8.31121e-13
  0.000000	 -0.000000	diff=3.36934e-13
  0.000000	  0.000000	diff=1.15237e-33
  0.000000	 -0.000000	diff=3.08494e-17
  0.000000	 -0.000000	diff=5.42163e-31
  0.000000	  0.000000	diff=2.0688e-12
  0.000000	  0.000000	diff=5.926e-21
 -0.000000	 -0.000000	diff=3.05548e-10
  0.000000	 -0.000000	diff=1.46721e-15
  0.000000	 -0.000000	diff=2.47358e-19
  0.000000	 -0.000000	diff=3.46105e-15
  0.000000	 -0.000000	diff=7.1387e-21
  0.000000	 -0.000000	diff=2.21084e-19
  0.000000	  0.000000	diff=1.63649e-12
  0.000000	  0.000000	diff=2.0759e-26
  0.000000	  0.000000	diff=1.32922e-10
  local_diff=0.0384256
# W_tgt_char{2}, [8 4]
  0.010165	  0.010164	diff=1.02649e-07
  0.002555	  0.002555	diff=8.03407e-08
 -0.000359	 -0.000359	diff=1.43849e-08
 -0.000912	 -0.000912	diff=1.17127e-09
  0.011256	  0.011256	diff=9.38089e-09
  0.002686	  0.002686	diff=1.02754e-07
 -0.192307	 -0.192318	diff=1.14067e-05
  0.058636	  0.058622	diff=1.45012e-05
  0.000000	  0.000000	diff=8.16017e-13
 -0.000000	 -0.000000	diff=8.28877e-14
  0.000000	 -0.000000	diff=1.15701e-13
  0.000000	  0.000000	diff=2.25231e-14
  0.000000	  0.000000	diff=4.14213e-13
  0.000000	  0.000000	diff=6.43346e-13
 -0.000001	 -0.000001	diff=1.25848e-12
  0.000000	  0.000000	diff=7.51375e-13
  0.004186	  0.004181	diff=5.50966e-06
  0.016336	  0.016336	diff=2.65597e-07
 -0.000791	 -0.000791	diff=2.83757e-07
 -0.003906	 -0.003906	diff=3.58886e-08
  0.004618	  0.004615	diff=2.95712e-06
  0.011924	  0.011924	diff=9.33941e-09
  0.096729	  0.096720	diff=9.51319e-06
  0.094045	  0.094041	diff=3.6973e-06
  0.004366	  0.004362	diff=4.03945e-06
  0.014980	  0.014980	diff=5.24319e-07
 -0.000830	 -0.000830	diff=2.09376e-07
 -0.003606	 -0.003606	diff=7.28709e-08
  0.004683	  0.004681	diff=2.10517e-06
  0.010943	  0.010943	diff=4.34044e-07
  0.089602	  0.089548	diff=5.42075e-05
  0.092925	  0.092850	diff=7.55637e-05
  local_diff=0.000185647
# W_tgt_char{3}, [8 4]
 -0.002955	 -0.002978	diff=2.35272e-05
 -0.069739	 -0.069815	diff=7.62398e-05
  0.007573	  0.007573	diff=5.55482e-07
  0.024246	  0.024240	diff=6.39005e-06
  0.011641	  0.011633	diff=8.54216e-06
 -0.008457	 -0.008468	diff=1.1765e-05
  0.289008	  0.288981	diff=2.66471e-05
 -0.359968	 -0.359959	diff=8.6706e-06
 -0.001046	 -0.001063	diff=1.68713e-05
 -0.052241	 -0.052284	diff=4.27808e-05
  0.006741	  0.006740	diff=3.89444e-07
  0.016854	  0.016851	diff=3.17805e-06
  0.012239	  0.012233	diff=5.82908e-06
 -0.007305	 -0.007314	diff=9.2685e-06
  0.269148	  0.269123	diff=2.59023e-05
 -0.331584	 -0.331586	diff=2.93192e-06
 -0.032868	 -0.032885	diff=1.6878e-05
 -0.017407	 -0.017455	diff=4.8058e-05
  0.012329	  0.012328	diff=1.82781e-06
  0.011299	  0.011297	diff=1.91485e-06
 -0.019729	 -0.019734	diff=5.49023e-06
  0.030457	  0.030429	diff=2.84811e-05
  0.220487	  0.219605	diff=0.00088195
 -0.039332	 -0.039365	diff=3.32571e-05
 -0.020535	 -0.020548	diff=1.36008e-05
 -0.065984	 -0.066073	diff=8.84762e-05
  0.006574	  0.006574	diff=6.19588e-07
  0.030502	  0.030493	diff=9.41471e-06
 -0.013143	 -0.013149	diff=5.981e-06
  0.007247	  0.007240	diff=7.09613e-06
  0.104524	  0.104351	diff=0.000173167
 -0.058545	 -0.058521	diff=2.41385e-05
  local_diff=0.00160984
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=2.42794e-08
 -0.000000	 -0.000000	diff=2.17057e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.576292	 -0.574611	diff=0.0016809
-13.313056	-12.524363	diff=0.788694
  0.000000	  0.000000	diff=2.10469e-09
 -0.000000	 -0.000000	diff=2.67572e-10
 -0.000000	 -0.000000	diff=2.27752e-11
  0.000000	  0.000000	diff=5.43623e-13
  local_diff=0.790375
# W_h, [2 4]
  0.603586	  0.600405	diff=0.00318155
  0.993623	  0.993821	diff=0.000198542
 -2.573749	 -2.589262	diff=0.0155131
 -0.859339	 -0.858998	diff=0.00034027
-20.150531	-20.296556	diff=0.146025
  4.728161	  4.728434	diff=0.000272382
  1.350753	  1.353489	diff=0.00273567
  0.358089	  0.357958	diff=0.00013047
  local_diff=0.168397
# W_soft, [5 2]
 -9.831373	 -9.841868	diff=0.0104952
 -0.037506	 -0.037775	diff=0.000268984
 -7.423825	 -7.423851	diff=2.61601e-05
 -1.014743	 -1.018057	diff=0.00331411
 18.335154	 18.321551	diff=0.0136029
 -4.193480	 -4.206446	diff=0.0129656
 -0.585552	 -0.586476	diff=0.00092402
 -7.516441	 -7.517209	diff=0.000768216
 -2.553731	 -2.557016	diff=0.0032845
 14.882311	 14.867146	diff=0.0151652
  local_diff=0.0608149
# W_soft_char, [5 2]
  0.101632	  0.101565	diff=6.68623e-05
  0.300605	  0.300530	diff=7.43265e-05
  0.111750	  0.111683	diff=6.68224e-05
 -0.492766	 -0.492852	diff=8.57968e-05
 -0.020853	 -0.020926	diff=7.32239e-05
 -0.029314	 -0.029403	diff=8.8315e-05
  0.480581	  0.480460	diff=0.000121318
 -0.018095	 -0.018181	diff=8.60968e-05
 -0.518479	 -0.518632	diff=0.000153708
  0.085873	  0.085756	diff=0.000116542
  local_diff=0.000933011
# Num params=404, abs_diff=26.8835
Elapsed time is 10.862752 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.774607	  0.775017	diff=0.000409914
  0.128423	  0.128406	diff=1.66134e-05
 -0.009830	 -0.009919	diff=8.9507e-05
 -0.019058	 -0.019049	diff=8.71632e-06
  5.189606	  5.206958	diff=0.0173519
  0.003961	  0.004039	diff=7.76725e-05
 -3.988843	 -3.977084	diff=0.0117587
 -0.972254	 -0.973370	diff=0.00111569
 -0.022317	 -0.022318	diff=1.06735e-07
 -0.177002	 -0.177434	diff=0.000431855
 -0.001375	 -0.001376	diff=8.4785e-07
  0.000380	  0.000380	diff=1.28764e-08
 -0.385880	 -0.385825	diff=5.52742e-05
 -0.309317	 -0.310534	diff=0.00121771
  0.150534	  0.150571	diff=3.61441e-05
  0.736365	  0.728765	diff=0.00760002
  0.191262	  0.191210	diff=5.17415e-05
 -0.304794	 -0.304387	diff=0.000407048
  0.053286	  0.053323	diff=3.67449e-05
  0.030215	  0.030234	diff=1.85428e-05
  1.850483	  1.853264	diff=0.00278142
 -0.155375	 -0.155203	diff=0.000172843
 -0.081188	 -0.081324	diff=0.000135817
  0.040618	  0.040706	diff=8.82367e-05
 -0.026965	 -0.026966	diff=7.27646e-07
  0.039220	  0.039227	diff=6.79045e-06
 -0.006751	 -0.006750	diff=6.45873e-07
 -0.003902	 -0.003902	diff=3.08678e-07
 -0.222346	 -0.222302	diff=4.40938e-05
  0.019886	  0.019889	diff=2.87939e-06
  0.018291	  0.018289	diff=1.9861e-06
 -0.006440	 -0.006439	diff=1.50467e-06
  local_diff=0.0439219
# W_src{2}, [8 4]
  0.546315	  0.546316	diff=1.29555e-06
 -1.838873	 -1.834678	diff=0.00419498
 -0.010543	 -0.010418	diff=0.000124876
  0.008380	  0.008388	diff=7.40131e-06
 -0.588008	 -0.590486	diff=0.00247799
  0.088173	  0.093252	diff=0.00507872
 -0.290159	 -0.289528	diff=0.000631319
 -0.586656	 -0.585140	diff=0.00151648
  0.028344	  0.028198	diff=0.000145137
  0.955350	  0.951577	diff=0.00377263
 -0.051483	 -0.051411	diff=7.15621e-05
 -0.002983	 -0.002982	diff=6.8866e-07
 -0.553095	 -0.552446	diff=0.000649726
  1.616534	  1.612816	diff=0.0037178
  1.108858	  1.096562	diff=0.0122956
 -1.457773	 -1.497063	diff=0.0392892
  0.207397	  0.207114	diff=0.000283063
  0.098363	  0.098311	diff=5.18937e-05
  0.127123	  0.126936	diff=0.000187512
 -0.007134	 -0.007140	diff=5.75592e-06
 -0.142017	 -0.141890	diff=0.000126864
  0.439434	  0.439588	diff=0.000154683
 -1.322516	 -1.326307	diff=0.00379088
  0.208624	  0.208144	diff=0.000480281
 -0.206502	 -0.207098	diff=0.000596456
 -0.308359	 -0.309157	diff=0.000797752
 -0.717426	 -0.719882	diff=0.00245606
  0.052711	  0.052607	diff=0.000104398
  0.748552	  0.750358	diff=0.00180571
 -1.468626	 -1.466725	diff=0.0019001
  5.956664	  5.933378	diff=0.0232862
 -0.375785	 -0.378924	diff=0.00313849
  local_diff=0.113141
# W_tgt{1}, [8 6]
 -0.005302	 -0.005214	diff=8.83035e-05
  2.669619	  2.456937	diff=0.212682
  3.470631	  3.515662	diff=0.0450307
 -0.000033	 -0.000033	diff=5.65729e-08
  0.000032	  0.000032	diff=5.2425e-07
 -0.001881	 -0.001871	diff=9.42082e-06
  0.000000	  0.000000	diff=2.88757e-12
  0.000000	  0.000000	diff=4.30152e-12
 -0.000000	 -0.000000	diff=8.19885e-10
 -2.169091	 -2.346737	diff=0.177646
 -3.376871	 -3.335874	diff=0.0409971
 -0.000160	 -0.000159	diff=1.34533e-06
 -0.000000	 -0.000000	diff=1.72484e-12
 -0.009307	 -0.009088	diff=0.00021889
 -0.000000	 -0.000000	diff=2.26268e-12
  0.000000	  0.000000	diff=8.62295e-12
  0.000971	  0.000974	diff=3.11938e-06
  0.195487	  0.194216	diff=0.00127064
 -1.126173	 -1.121674	diff=0.00449934
  0.000067	  0.000067	diff=2.38215e-07
 -0.000005	 -0.000005	diff=1.23346e-08
  0.003800	  0.003840	diff=4.01357e-05
  0.000000	  0.000000	diff=6.34186e-13
 -0.000000	 -0.000000	diff=5.87696e-12
 -0.001867	 -0.001856	diff=1.11056e-05
 -0.891108	 -0.919086	diff=0.0279776
  1.289121	  1.295141	diff=0.00601984
  0.000000	 -0.000000	diff=3.75862e-13
 -0.000004	 -0.000004	diff=2.38006e-08
  0.000000	 -0.000000	diff=3.17462e-14
  0.000000	 -0.000000	diff=3.09443e-12
  0.000000	 -0.000000	diff=2.47554e-15
  0.000064	  0.000064	diff=2.42035e-07
  0.001366	  0.001380	diff=1.39447e-05
 -0.816794	 -0.814372	diff=0.00242233
  0.000000	 -0.000000	diff=3.3416e-16
 -0.000007	 -0.000007	diff=2.7808e-08
  0.000000	 -0.000000	diff=1.16948e-13
  0.000000	  0.000000	diff=3.7804e-19
  0.000000	 -0.000000	diff=3.23633e-18
  0.000000	 -0.000000	diff=3.01336e-15
 -0.000355	 -0.000354	diff=1.13645e-06
 -0.000000	 -0.000000	diff=6.82882e-11
  0.000000	 -0.000000	diff=2.78083e-22
 -0.000000	 -0.000000	diff=1.61188e-12
  0.000000	  0.000000	diff=7.55484e-15
  0.000000	  0.000000	diff=7.96441e-20
  0.000000	 -0.000000	diff=1.46949e-24
  local_diff=0.518933
# W_tgt{2}, [8 4]
  1.422975	  1.425289	diff=0.0023134
  2.610780	  2.607157	diff=0.00362355
 -0.000105	 -0.000104	diff=4.87414e-07
 -0.842775	 -0.837876	diff=0.0048995
  0.216620	  0.215566	diff=0.00105391
 -0.034578	 -0.034415	diff=0.000163337
  0.071462	  0.071693	diff=0.000230586
-32.063758	-30.415507	diff=1.64825
 -0.032566	 -0.032562	diff=3.87902e-06
 -0.064529	 -0.064731	diff=0.000201796
  0.101001	  0.100596	diff=0.000404721
  0.001608	  0.001620	diff=1.15448e-05
  0.028190	  0.028161	diff=2.84585e-05
 -0.057595	 -0.057739	diff=0.000144256
  0.118206	  0.117825	diff=0.00038131
  0.022694	  0.022637	diff=5.73284e-05
  0.306323	  0.306169	diff=0.000154374
 -0.137675	 -0.137293	diff=0.000382083
 -0.228693	 -0.227419	diff=0.00127435
 -1.327015	 -1.324872	diff=0.00214288
 -0.636691	 -0.634185	diff=0.00250638
 -0.094746	 -0.094730	diff=1.57173e-05
  0.292952	  0.293284	diff=0.000332348
 -6.439771	 -6.404442	diff=0.0353292
  0.733213	  0.738971	diff=0.00575811
 -1.732346	 -1.733996	diff=0.00164976
  0.291097	  0.292173	diff=0.00107584
  5.449608	  5.481953	diff=0.0323451
  0.508396	  0.506778	diff=0.00161845
  0.107398	  0.108417	diff=0.0010188
 -1.220707	 -1.218773	diff=0.0019334
 26.523828	 26.936809	diff=0.412981
  local_diff=2.16229
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.62521e-11
  0.000000	  0.000000	diff=4.92313e-11
  0.000000	  0.000000	diff=6.70636e-14
  0.000000	  0.000000	diff=6.20774e-14
  local_diff=8.56125e-11
# W_emb_tgt, [2 5]
 -2.840010	 -3.781741	diff=0.941731
 -2.746844	 -2.813053	diff=0.0662085
  0.000029	  0.000029	diff=2.48258e-07
  0.000000	  0.000000	diff=7.46795e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.035193	 -0.032475	diff=0.00271745
  0.015646	  0.016435	diff=0.000788631
 -0.000000	 -0.000000	diff=7.11004e-10
  0.000000	  0.000000	diff=3.78293e-10
  local_diff=1.01145
# W_src_char{1}, [8 4]
 -0.003417	 -0.003528	diff=0.00011124
 -0.000208	 -0.000208	diff=1.1374e-08
 -0.000000	 -0.000000	diff=3.43036e-12
  0.026875	  0.026860	diff=1.46e-05
 -0.071086	 -0.071095	diff=9.26697e-06
  0.034339	  0.034315	diff=2.41615e-05
 -0.000038	 -0.000038	diff=4.47361e-09
 -0.000003	 -0.000003	diff=2.38928e-10
  0.327721	  0.326314	diff=0.00140642
  0.012700	  0.012742	diff=4.26393e-05
  0.000000	  0.000000	diff=5.71878e-11
 -1.612476	 -1.646593	diff=0.0341166
  4.459545	  4.358289	diff=0.101256
 -2.055944	 -2.105252	diff=0.0493083
  0.002343	  0.002326	diff=1.69091e-05
  0.000162	  0.000161	diff=1.15959e-06
 -0.000000	 -0.000000	diff=1.15093e-12
 -0.000000	 -0.000000	diff=2.82145e-12
  0.000000	 -0.000000	diff=2.16286e-14
  0.000002	  0.000002	diff=4.25803e-12
 -0.000006	 -0.000006	diff=5.73801e-13
  0.000003	  0.000003	diff=2.6316e-12
 -0.000000	 -0.000000	diff=3.48285e-12
 -0.000000	 -0.000000	diff=1.19522e-12
  0.000000	  0.000000	diff=2.32655e-12
  0.000000	  0.000000	diff=3.03599e-12
  0.000000	  0.000000	diff=4.25645e-17
 -0.000000	 -0.000000	diff=2.82797e-12
  0.000000	  0.000000	diff=2.96452e-12
 -0.000000	 -0.000000	diff=4.47392e-12
  0.000000	  0.000000	diff=5.06199e-13
  0.000000	  0.000000	diff=4.27444e-13
  local_diff=0.186307
# W_src_char{2}, [8 4]
  0.071378	  0.070736	diff=0.000642685
 -0.077749	 -0.077765	diff=1.58041e-05
  0.000000	  0.000000	diff=4.11517e-11
 -0.000002	 -0.000002	diff=3.71466e-10
 -0.276736	 -0.276962	diff=0.000225939
 -0.037946	 -0.037966	diff=1.98638e-05
 -0.038558	 -0.038696	diff=0.000138009
  0.835754	  0.833387	diff=0.00236674
 -2.492393	 -2.490112	diff=0.00228131
 -0.769013	 -0.764849	diff=0.00416338
 -0.910218	 -0.908216	diff=0.00200209
 -0.015647	 -0.015679	diff=3.21964e-05
  0.215864	  0.215613	diff=0.00025091
 -0.527769	 -0.525040	diff=0.00272857
  0.026004	  0.025945	diff=5.94495e-05
 -0.551235	 -0.551890	diff=0.000655581
 -1.162346	 -1.163332	diff=0.000986639
  0.238105	  0.238571	diff=0.000465605
-32.514601	-31.993244	diff=0.521358
  0.474388	  0.479308	diff=0.0049206
 -0.370734	 -0.370198	diff=0.0005358
  1.317031	  1.362188	diff=0.0451573
  0.017017	  0.017059	diff=4.27899e-05
 -0.207642	 -0.207719	diff=7.71424e-05
 -0.033216	 -0.034013	diff=0.000796795
  0.063873	  0.063912	diff=3.90681e-05
 29.328062	 29.628164	diff=0.300102
 -0.434901	 -0.430182	diff=0.00471822
  0.015098	  0.015445	diff=0.000347024
 -1.164801	 -1.121229	diff=0.043572
  0.004674	  0.004677	diff=3.22021e-06
 -0.056953	 -0.056959	diff=5.76018e-06
  local_diff=0.93871
# W_src_char{3}, [8 4]
  6.972333	  6.990347	diff=0.0180141
 -3.633659	 -3.636942	diff=0.00328324
 -0.244731	 -0.245154	diff=0.000422994
  0.001361	  0.001376	diff=1.45528e-05
-11.263741	-11.204720	diff=0.0590203
 -0.033743	 -0.033707	diff=3.61133e-05
 -0.281946	 -0.286279	diff=0.00433331
  0.016471	  0.016575	diff=0.000103689
 -6.887828	 -6.870536	diff=0.0172923
  3.343996	  3.334673	diff=0.00932309
  0.023952	  0.023927	diff=2.45921e-05
 -0.070231	 -0.070312	diff=8.09569e-05
  2.407065	  2.409270	diff=0.00220556
 -0.029624	 -0.029008	diff=0.000616029
 -0.192518	 -0.192030	diff=0.000488767
 -0.999657	 -1.003882	diff=0.00422504
 -0.017287	 -0.017329	diff=4.16689e-05
  0.280835	  0.280576	diff=0.00025895
  0.333156	  0.332655	diff=0.000501722
  0.002049	  0.002045	diff=3.66041e-06
 14.922020	 15.007039	diff=0.0850191
  0.015665	  0.015700	diff=3.54564e-05
  1.107233	  1.115199	diff=0.00796649
 -0.021921	 -0.021814	diff=0.00010645
  0.041761	  0.041912	diff=0.000150901
  7.075134	  6.795501	diff=0.279634
  0.001356	  0.001355	diff=1.02578e-06
 -0.244900	 -0.246185	diff=0.00128495
  0.686571	  0.687232	diff=0.000660765
 -0.702233	 -0.707420	diff=0.00518702
 -0.067110	 -0.067014	diff=9.56112e-05
 -3.732008	 -3.791096	diff=0.0590879
  local_diff=0.55952
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=6.2725e-11
 -0.000000	 -0.000000	diff=5.23794e-11
  0.000033	  0.000033	diff=7.37736e-09
 -0.000547	 -0.000557	diff=1.02239e-05
-15.269838	-13.923707	diff=1.34613
 -7.926336	 -7.759591	diff=0.166745
  0.000000	 -0.000000	diff=1.27541e-13
 -0.000586	 -0.000593	diff=6.40995e-06
  local_diff=1.51289
# W_h, [2 4]
 -0.037667	 -0.038837	diff=0.00117029
 -1.769786	 -1.765998	diff=0.00378734
 -4.237478	 -4.448499	diff=0.211021
 -1.812797	 -1.806268	diff=0.00652929
  0.516798	  0.514863	diff=0.0019352
  2.877683	  2.882376	diff=0.00469261
  0.512862	  0.510841	diff=0.00202141
 -0.253541	 -0.250570	diff=0.00297036
  local_diff=0.234128
# W_soft, [5 2]
  0.316517	  0.315965	diff=0.000551902
 -1.138440	 -1.140699	diff=0.00225892
 -2.315172	 -2.316921	diff=0.00174908
 -3.538597	 -3.546084	diff=0.00748653
  6.694847	  6.687738	diff=0.00710862
  8.607525	  8.606846	diff=0.000678721
  1.032033	  1.029366	diff=0.00266637
  8.424532	  8.422364	diff=0.00216774
 -8.131252	 -8.146236	diff=0.0149839
 -9.897691	 -9.912341	diff=0.0146504
  local_diff=0.0543022
# Num params=288, abs_diff=7.33559
Elapsed time is 5.271841 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.691405	 -0.691743	diff=0.0003378
  0.109100	  0.109154	diff=5.31834e-05
 -0.076941	 -0.076942	diff=1.40492e-06
  0.019474	  0.019478	diff=3.93595e-06
 -0.916166	 -0.917428	diff=0.00126214
  0.062011	  0.062076	diff=6.49422e-05
  2.660040	  2.651242	diff=0.00879718
 -0.735503	 -0.734560	diff=0.000943264
  0.328296	  0.328502	diff=0.000206265
 -0.029671	 -0.029669	diff=2.29807e-06
  0.038573	  0.038580	diff=6.67913e-06
 -0.001899	 -0.001899	diff=6.12147e-08
  0.467264	  0.467744	diff=0.000479773
 -0.025137	 -0.025130	diff=7.2134e-06
 -1.246079	 -1.243676	diff=0.0024029
 -0.126765	 -0.126592	diff=0.000173079
  0.614897	  0.614944	diff=4.69447e-05
 -0.175302	 -0.175200	diff=0.000101611
  0.146887	  0.146921	diff=3.46871e-05
 -0.069144	 -0.069121	diff=2.32775e-05
  1.129491	  1.129716	diff=0.000224951
 -0.087604	 -0.087556	diff=4.78207e-05
 -1.076675	 -1.076778	diff=0.000103295
  0.338879	  0.339194	diff=0.000314866
 -0.206467	 -0.206122	diff=0.000345317
 -0.002600	 -0.002634	diff=3.41299e-05
 -0.055140	 -0.055116	diff=2.40473e-05
 -0.059944	 -0.059945	diff=1.05246e-06
 -0.378009	 -0.376693	diff=0.00131624
  0.003480	  0.003488	diff=8.18002e-06
  0.404421	  0.405056	diff=0.000634978
  0.100124	  0.100380	diff=0.000255874
  local_diff=0.0182594
# W_src{2}, [8 4]
  0.063318	  0.063486	diff=0.000168517
  0.173821	  0.174602	diff=0.000781223
  0.141952	  0.141855	diff=9.68607e-05
 -0.006953	 -0.006959	diff=6.32613e-06
 -0.172202	 -0.171488	diff=0.000713178
 -0.451258	 -0.450343	diff=0.000915228
 -2.564442	 -2.564992	diff=0.000549832
  0.798812	  0.800366	diff=0.00155373
 -0.050656	 -0.050750	diff=9.33388e-05
 -0.352668	 -0.352288	diff=0.000380261
  0.102880	  0.102824	diff=5.66141e-05
 -0.004325	 -0.004328	diff=2.6953e-06
 -0.363651	 -0.363367	diff=0.00028401
  0.063772	  0.063995	diff=0.00022359
 -1.581988	 -1.579317	diff=0.00267097
 -0.380220	 -0.379765	diff=0.000454894
 -0.703519	 -0.705576	diff=0.002057
 -0.584459	 -0.581091	diff=0.00336778
  0.210564	  0.209987	diff=0.000576646
 -0.240307	 -0.240819	diff=0.000512021
 -0.113112	 -0.113934	diff=0.000822041
 -0.414963	 -0.414586	diff=0.000377341
 -2.042624	 -2.036285	diff=0.00633907
 -0.140749	 -0.140346	diff=0.000402918
  0.621291	  0.620477	diff=0.000813906
  0.639386	  0.640798	diff=0.00141223
 -0.404277	 -0.404830	diff=0.000552948
  0.205797	  0.205499	diff=0.000298268
  0.310502	  0.310061	diff=0.000440742
  0.502444	  0.502379	diff=6.56028e-05
  3.581263	  3.599127	diff=0.0178636
  0.142166	  0.142550	diff=0.00038472
  local_diff=0.0452381
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=2.14711e-07
-29.606912	-30.003694	diff=0.396782
 -0.133275	 -0.133114	diff=0.00016116
 -0.445404	 -0.445331	diff=7.35941e-05
 -0.000000	 -0.000000	diff=1.55232e-10
 -3.253594	 -3.277302	diff=0.0237075
  0.000004	  0.000004	diff=9.39245e-08
  0.000015	  0.000015	diff=5.4914e-08
  0.000617	  0.000622	diff=5.04575e-06
 27.481829	 27.175352	diff=0.306477
  0.126979	  0.127146	diff=0.000166677
 -2.163983	 -2.162475	diff=0.00150803
  0.000000	  0.000000	diff=3.48022e-10
-11.701605	-12.042780	diff=0.341175
  0.000001	  0.000001	diff=1.39347e-07
  0.000076	  0.000077	diff=9.79696e-07
 -0.000487	 -0.000484	diff=3.08253e-06
  0.543767	  0.541306	diff=0.00246065
  0.026318	  0.026313	diff=5.22271e-06
  1.682238	  1.683450	diff=0.00121195
 -0.000000	 -0.000000	diff=1.66115e-10
  3.003588	  2.991584	diff=0.0120048
 -0.000004	 -0.000004	diff=4.14366e-08
 -0.000041	 -0.000040	diff=2.79596e-07
 -0.000487	 -0.000484	diff=3.08654e-06
 11.595165	 11.548338	diff=0.0468267
  0.031681	  0.031704	diff=2.28135e-05
  1.683279	  1.684492	diff=0.00121349
 -0.000000	 -0.000000	diff=1.57619e-10
  3.236260	  3.222264	diff=0.0139957
 -0.000005	 -0.000005	diff=4.72442e-08
 -0.000051	 -0.000051	diff=4.41125e-07
 -0.000000	 -0.000000	diff=1.84981e-12
  0.035246	  0.035115	diff=0.000130846
  0.031894	  0.031957	diff=6.31285e-05
 -0.000002	 -0.000002	diff=3.35987e-10
  0.000000	  0.000000	diff=8.83698e-12
  0.035906	  0.035768	diff=0.000138101
  0.000000	  0.000000	diff=2.90474e-12
 -0.000047	 -0.000047	diff=3.74159e-07
  0.000093	  0.000093	diff=1.14507e-07
 -0.177655	 -0.177742	diff=8.68111e-05
  0.000006	  0.000006	diff=1.75611e-08
 -0.325147	 -0.325108	diff=3.93595e-05
  0.000000	  0.000000	diff=9.5396e-12
 -0.072507	 -0.072456	diff=5.14455e-05
  0.000001	  0.000001	diff=1.32254e-09
 -0.000000	 -0.000000	diff=1.77499e-12
  local_diff=1.14832
# W_tgt{2}, [8 4]
  1.027805	  1.027388	diff=0.000417553
  2.056299	  2.070618	diff=0.014319
  0.000066	  0.000066	diff=2.72505e-07
 -0.189975	 -0.189084	diff=0.000890206
  0.166263	  0.165631	diff=0.000631313
  0.037910	  0.038051	diff=0.000141117
 -0.011984	 -0.011893	diff=9.10122e-05
-20.795821	-20.618381	diff=0.177441
 -0.567012	 -0.567547	diff=0.000535363
  0.378179	  0.377430	diff=0.000748911
  0.031890	  0.031976	diff=8.62177e-05
  0.118672	  0.118576	diff=9.61573e-05
 -1.293311	 -1.300273	diff=0.00696206
  1.618284	  1.612390	diff=0.00589447
  0.573986	  0.574177	diff=0.0001905
 -1.285446	 -1.285687	diff=0.000240657
 -6.546063	 -6.549362	diff=0.00329876
 -0.220779	 -0.219662	diff=0.00111622
  1.416752	  1.424254	diff=0.00750166
  0.832676	  0.833849	diff=0.00117239
 -6.234002	 -6.250060	diff=0.0160584
  0.301439	  0.301555	diff=0.000116419
 -2.981867	 -2.974323	diff=0.00754351
 -0.719680	 -0.654142	diff=0.0655372
  5.770252	  5.776030	diff=0.00577731
  0.985411	  0.987417	diff=0.00200685
  0.446748	  0.449892	diff=0.0031439
 -1.989924	 -1.985310	diff=0.00461466
  3.663866	  3.661701	diff=0.00216506
 -1.073404	 -1.075621	diff=0.0022164
 -1.852681	 -1.843532	diff=0.0091489
-13.383240	-13.136002	diff=0.247238
  local_diff=0.587341
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=8.55881e-08
  0.000002	  0.000002	diff=1.12783e-07
 -0.000000	 -0.000000	diff=3.57373e-13
 -0.000000	 -0.000000	diff=6.78487e-12
  local_diff=1.98378e-07
# W_emb_tgt, [2 5]
 69.329519	 67.805384	diff=1.52414
 18.205118	 18.079464	diff=0.125654
  0.000000	  0.000000	diff=3.40986e-10
  0.000000	  0.000000	diff=1.41533e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 17.585257	 17.924772	diff=0.339515
 -9.562389	 -9.544795	diff=0.0175942
-13.582187	-14.118878	diff=0.53669
  7.408896	  7.295975	diff=0.112921
  local_diff=2.65651
# W_src_char{1}, [8 4]
 -0.023575	 -0.024851	diff=0.00127555
 -0.013093	 -0.013006	diff=8.72674e-05
 -0.000000	 -0.000000	diff=4.79202e-12
  0.504667	  0.501925	diff=0.00274178
 -0.538854	 -0.538239	diff=0.000615086
  0.636114	  0.632812	diff=0.00330134
 -0.001786	 -0.001787	diff=1.61954e-07
 -0.000527	 -0.000523	diff=3.61976e-06
  3.999658	  4.023724	diff=0.0240656
  0.798814	  0.797302	diff=0.00151201
  0.000007	  0.000007	diff=1.82863e-08
-33.125992	-30.769144	diff=2.35685
 30.595667	 32.995236	diff=2.39957
-42.350341	-38.749932	diff=3.60041
  0.110128	  0.109518	diff=0.000610795
  0.032351	  0.031959	diff=0.000392526
 -0.000108	 -0.000108	diff=3.94147e-12
 -0.000022	 -0.000021	diff=1.42307e-07
 -0.000000	 -0.000000	diff=4.91388e-12
  0.000834	  0.000828	diff=5.49066e-06
 -0.000888	 -0.000888	diff=1.64119e-09
  0.001050	  0.001043	diff=6.91435e-06
 -0.000003	 -0.000003	diff=5.82782e-12
 -0.000001	 -0.000001	diff=5.7026e-09
  0.000001	  0.000001	diff=3.7677e-12
  0.000000	  0.000000	diff=9.23481e-10
  0.000000	  0.000000	diff=1.13686e-12
 -0.000005	 -0.000005	diff=3.55748e-08
  0.000006	  0.000006	diff=3.00097e-11
 -0.000007	 -0.000007	diff=4.47965e-08
  0.000000	  0.000000	diff=2.32536e-13
  0.000000	  0.000000	diff=4.24084e-11
  local_diff=8.39144
# W_src_char{2}, [8 4]
  4.322078	  4.376189	diff=0.0541115
 -0.814294	 -0.812989	diff=0.00130409
  0.000216	  0.000216	diff=2.95627e-08
 -0.000235	 -0.000235	diff=5.22317e-08
  3.211559	  3.237897	diff=0.0263379
 -0.488880	 -0.488498	diff=0.000381838
 -2.208275	 -2.191948	diff=0.0163269
  8.776173	  8.936638	diff=0.160464
 -3.009921	 -2.984934	diff=0.0249872
  0.284033	  0.270849	diff=0.0131837
 -0.001239	 -0.001210	diff=2.94458e-05
  0.000007	  0.000007	diff=4.85839e-07
 -2.159341	 -2.147534	diff=0.0118068
  0.128350	  0.120779	diff=0.00757097
  1.460013	  1.467311	diff=0.007298
 -6.055535	 -5.985176	diff=0.0703587
  2.995353	  3.014552	diff=0.0191997
 -1.157392	 -1.155302	diff=0.0020898
  1.152872	 -0.237643	diff=1.39051
 -0.161822	 -0.162296	diff=0.00047394
  2.682152	  2.693150	diff=0.0109976
 -0.811202	 -0.812705	diff=0.00150295
 -0.149943	 -0.150290	diff=0.000347786
  1.055356	  1.059627	diff=0.00427077
  0.846264	  0.847315	diff=0.00105163
 -0.307978	 -0.307829	diff=0.000148813
  5.533040	  4.479738	diff=1.0533
 -0.046061	 -0.046485	diff=0.000423857
  0.733029	  0.733808	diff=0.000778852
 -0.223370	 -0.225997	diff=0.00262652
 -0.039655	 -0.039680	diff=2.48126e-05
  0.280585	  0.280885	diff=0.000299995
  local_diff=2.88222
# W_src_char{3}, [8 4]
  0.781873	  0.544803	diff=0.237071
 -0.382579	 -0.492977	diff=0.110398
  0.370032	  0.369611	diff=0.000421311
 -0.024942	 -0.024983	diff=4.06268e-05
  1.034087	  0.842344	diff=0.191743
 -0.062754	 -0.062895	diff=0.000140748
-16.486775	-15.838326	diff=0.648449
 -0.204518	 -0.205117	diff=0.000599047
 -1.098824	 -1.349945	diff=0.251121
  0.306767	  0.228668	diff=0.078099
  0.321319	  0.321285	diff=3.37789e-05
 -0.000248	 -0.000257	diff=8.64844e-06
  2.842496	  2.820846	diff=0.0216502
 -0.028394	 -0.028393	diff=1.52442e-06
 -2.587005	 -2.573155	diff=0.0138506
  0.121543	  0.121547	diff=4.27199e-06
 -0.008540	 -0.008559	diff=1.91667e-05
 -0.249897	 -0.248607	diff=0.00128956
 -0.734655	 -0.735469	diff=0.00081352
  0.042114	  0.042009	diff=0.000105331
 -5.581284	 -5.878913	diff=0.297629
  0.049830	  0.049947	diff=0.00011661
 -6.916824	 -6.850992	diff=0.0658314
  0.340579	  0.339112	diff=0.00146712
  0.001531	  0.001530	diff=3.87264e-07
 -0.127981	 -0.127837	diff=0.00014395
  0.124598	  0.124587	diff=1.06247e-05
  0.000419	  0.000417	diff=1.59115e-06
  1.281475	  1.277867	diff=0.00360848
 -0.007249	 -0.007246	diff=2.33992e-06
  0.984630	  0.985842	diff=0.00121191
  0.047101	  0.047094	diff=7.174e-06
  local_diff=1.92589
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=1.11258e-08
  0.000001	  0.000001	diff=8.29707e-09
  0.000533	  0.000544	diff=1.01145e-05
 -0.012079	 -0.012500	diff=0.000421263
-20.748515	-16.320864	diff=4.42765
 36.433502	 40.172890	diff=3.73939
  0.000000	 -0.000000	diff=4.66421e-12
  0.000000	  0.000000	diff=4.18683e-12
  local_diff=8.16747
# W_tgt_char{1}, [8 4]
  0.000006	  0.000006	diff=5.93629e-08
  0.000031	  0.000031	diff=3.06162e-07
-26.439554	-26.086363	diff=0.353191
 -0.000014	 -0.000013	diff=1.32825e-07
 -0.004205	 -0.004247	diff=4.15535e-05
  0.000000	 -0.000000	diff=1.00836e-11
  0.000000	  0.000000	diff=1.28912e-13
  0.000005	  0.000005	diff=2.271e-07
 -0.000002	 -0.000002	diff=1.2806e-09
 -0.000009	 -0.000009	diff=2.67406e-08
  7.667441	  7.698459	diff=0.0310181
  0.000004	  0.000004	diff=1.14659e-08
  0.001257	  0.001253	diff=3.64988e-06
 -0.000000	 -0.000000	diff=6.14166e-13
  0.000000	 -0.000000	diff=3.80759e-14
  0.000004	  0.000004	diff=2.04703e-07
  0.000000	  0.000000	diff=8.74182e-12
  0.000000	 -0.000000	diff=3.36934e-12
  0.000000	  0.000000	diff=1.15237e-32
  0.000000	 -0.000000	diff=3.08494e-16
  0.000000	 -0.000000	diff=5.42163e-30
  0.000000	  0.000000	diff=1.50036e-11
  0.000000	  0.000000	diff=5.926e-20
 -0.000001	 -0.000001	diff=3.04412e-09
  0.000000	 -0.000000	diff=1.46721e-14
  0.000000	 -0.000000	diff=2.47358e-18
  0.000000	 -0.000000	diff=3.46105e-14
  0.000000	 -0.000000	diff=7.1387e-20
  0.000000	 -0.000000	diff=2.21084e-18
  0.000000	  0.000000	diff=1.06805e-11
  0.000000	  0.000000	diff=2.0759e-25
  0.000000	  0.000000	diff=1.31785e-09
  local_diff=0.384256
# W_tgt_char{2}, [8 4]
  0.101646	  0.101645	diff=1.02649e-06
  0.025548	  0.025548	diff=8.03407e-07
 -0.003586	 -0.003586	diff=1.43871e-07
 -0.009115	 -0.009115	diff=1.16956e-08
  0.112565	  0.112565	diff=9.37975e-08
  0.026860	  0.026861	diff=1.02752e-06
 -1.923066	 -1.923180	diff=0.000114067
  0.586360	  0.586215	diff=0.000145012
  0.000000	  0.000000	diff=2.02615e-11
 -0.000000	 -0.000000	diff=6.51322e-12
  0.000000	 -0.000000	diff=1.15701e-12
  0.000000	  0.000000	diff=2.25231e-13
  0.000000	  0.000000	diff=9.82647e-12
  0.000000	  0.000000	diff=7.49123e-13
 -0.000005	 -0.000005	diff=6.90045e-12
  0.000000	  0.000000	diff=1.31981e-11
  0.041863	  0.041808	diff=5.50966e-05
  0.163362	  0.163359	diff=2.65596e-06
 -0.007909	 -0.007912	diff=2.83757e-06
 -0.039062	 -0.039061	diff=3.58869e-07
  0.046180	  0.046151	diff=2.95712e-05
  0.119242	  0.119242	diff=9.33998e-08
  0.967295	  0.967199	diff=9.51319e-05
  0.940450	  0.940413	diff=3.69729e-05
  0.043663	  0.043623	diff=4.03945e-05
  0.149797	  0.149802	diff=5.2432e-06
 -0.008299	 -0.008301	diff=2.09378e-06
 -0.036062	 -0.036062	diff=7.28704e-07
  0.046829	  0.046808	diff=2.10518e-05
  0.109429	  0.109434	diff=4.34043e-06
  0.896022	  0.895480	diff=0.000542075
  0.929252	  0.928496	diff=0.000755637
  local_diff=0.00185647
# W_tgt_char{3}, [8 4]
 -0.029549	 -0.029784	diff=0.000235272
 -0.697391	 -0.698153	diff=0.000762398
  0.075732	  0.075726	diff=5.55482e-06
  0.242463	  0.242399	diff=6.39005e-05
  0.116411	  0.116325	diff=8.54216e-05
 -0.084565	 -0.084683	diff=0.00011765
  2.890080	  2.889813	diff=0.000266471
 -3.599676	 -3.599589	diff=8.6706e-05
 -0.010463	 -0.010632	diff=0.000168713
 -0.522411	 -0.522839	diff=0.000427808
  0.067409	  0.067405	diff=3.89446e-06
  0.168545	  0.168513	diff=3.17806e-05
  0.122388	  0.122330	diff=5.82908e-05
 -0.073048	 -0.073141	diff=9.2685e-05
  2.691484	  2.691225	diff=0.000259023
 -3.315836	 -3.315865	diff=2.93192e-05
 -0.328685	 -0.328854	diff=0.00016878
 -0.174071	 -0.174552	diff=0.00048058
  0.123294	  0.123276	diff=1.82781e-05
  0.112991	  0.112972	diff=1.91485e-05
 -0.197288	 -0.197343	diff=5.49023e-05
  0.304571	  0.304286	diff=0.000284811
  2.204866	  2.196046	diff=0.0088195
 -0.393320	 -0.393653	diff=0.000332571
 -0.205348	 -0.205484	diff=0.000136008
 -0.659843	 -0.660728	diff=0.000884762
  0.065743	  0.065736	diff=6.19586e-06
  0.305024	  0.304929	diff=9.41471e-05
 -0.131427	 -0.131487	diff=5.98101e-05
  0.072471	  0.072400	diff=7.09613e-05
  1.045238	  1.043506	diff=0.00173167
 -0.585451	 -0.585210	diff=0.000241385
  local_diff=0.0160984
# W_emb_tgt_char, [2 5]
  0.000005	  0.000005	diff=2.42794e-07
 -0.000005	 -0.000005	diff=2.17074e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -5.762916	 -5.746107	diff=0.016809
-133.130563	-125.243626	diff=7.88694
  0.000000	  0.000000	diff=2.10185e-08
 -0.000000	 -0.000000	diff=2.66435e-09
 -0.000000	 -0.000000	diff=2.44805e-10
  0.000000	  0.000000	diff=2.48109e-13
  local_diff=7.90375
# W_h, [2 4]
  0.603586	  0.600405	diff=0.00318155
  0.993623	  0.993822	diff=0.000198545
 -2.573749	 -2.589262	diff=0.0155131
 -0.859339	 -0.858999	diff=0.000340274
-20.150531	-20.296556	diff=0.146025
  4.728162	  4.728434	diff=0.000272388
  1.350753	  1.353489	diff=0.00273567
  0.358089	  0.357958	diff=0.00013047
  local_diff=0.168397
# W_soft, [5 2]
 -9.831373	 -9.841868	diff=0.0104952
 -0.037506	 -0.037775	diff=0.000268984
 -7.423825	 -7.423851	diff=2.61601e-05
 -1.014743	 -1.018057	diff=0.00331411
 18.335154	 18.321551	diff=0.0136029
 -4.193480	 -4.206446	diff=0.0129656
 -0.585552	 -0.586476	diff=0.00092402
 -7.516441	 -7.517209	diff=0.000768216
 -2.553731	 -2.557016	diff=0.0032845
 14.882311	 14.867146	diff=0.0151652
  local_diff=0.0608149
# W_soft_char, [5 2]
  1.016318	  1.015649	diff=0.000668623
  3.006048	  3.005305	diff=0.000743265
  1.117500	  1.116832	diff=0.000668224
 -4.927665	 -4.928523	diff=0.000857968
 -0.208530	 -0.209262	diff=0.000732239
 -0.293145	 -0.294028	diff=0.00088315
  4.805814	  4.804601	diff=0.00121318
 -0.180949	 -0.181810	diff=0.000860968
 -5.184788	 -5.186325	diff=0.00153708
  0.858727	  0.857562	diff=0.00116542
  local_diff=0.00933011
# Num params=404, abs_diff=34.3672
Elapsed time is 10.170028 seconds.
[?1l>