# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000010	  0.000010	diff=6.17714e-11
 -0.000011	 -0.000011	diff=6.72696e-11
  0.000004	  0.000004	diff=3.15016e-10
 -0.000003	 -0.000003	diff=2.69429e-10
  0.000000	  0.000000	diff=4.3928e-13
  0.000001	  0.000001	diff=4.75354e-12
  0.004421	  0.004421	diff=1.55788e-07
  0.006020	  0.006021	diff=9.30088e-08
 -0.000005	 -0.000005	diff=6.28422e-11
  0.000013	  0.000013	diff=1.74402e-11
 -0.000006	 -0.000006	diff=2.94658e-10
  0.000000	  0.000000	diff=4.27279e-11
 -0.000000	 -0.000000	diff=1.1015e-12
 -0.000001	 -0.000001	diff=1.29598e-12
 -0.000831	 -0.000831	diff=8.15894e-08
 -0.003179	 -0.003179	diff=4.09838e-08
 -0.000000	 -0.000000	diff=2.11932e-12
  0.000000	  0.000000	diff=2.29118e-13
 -0.000000	 -0.000000	diff=2.59559e-13
  0.000000	  0.000000	diff=4.41802e-15
  0.000000	  0.000000	diff=6.62351e-13
 -0.000000	 -0.000000	diff=4.75849e-13
 -0.000051	 -0.000051	diff=4.97827e-08
 -0.000075	 -0.000075	diff=2.70437e-11
  0.000000	  0.000000	diff=3.46346e-13
 -0.000000	 -0.000000	diff=5.79698e-13
  0.000000	  0.000000	diff=4.90412e-13
 -0.000000	 -0.000000	diff=2.13149e-13
 -0.000000	 -0.000000	diff=2.15859e-13
  0.000000	  0.000000	diff=1.96564e-14
  0.000012	  0.000012	diff=1.31192e-11
  0.000041	  0.000041	diff=3.99654e-08
  local_diff=4.62302e-07
# W_tgt{1}, [8 6]
 -0.000011	 -0.000011	diff=2.40903e-11
  0.000008	  0.000008	diff=6.29277e-11
 -0.000004	 -0.000004	diff=8.3275e-10
  0.000009	  0.000009	diff=2.96192e-10
  0.000000	  0.000000	diff=4.3047e-12
  0.000018	  0.000018	diff=2.80489e-13
 -0.003969	 -0.003969	diff=1.05323e-07
 -0.011719	 -0.011719	diff=3.27218e-08
 -0.000017	 -0.000017	diff=7.50905e-12
  0.000020	  0.000020	diff=3.55317e-11
 -0.000025	 -0.000025	diff=1.06332e-09
  0.000011	  0.000011	diff=1.28662e-09
 -0.000028	 -0.000028	diff=6.27872e-11
  0.000031	  0.000031	diff=9.20014e-12
 -0.008540	 -0.008540	diff=4.35927e-07
 -0.000826	 -0.000826	diff=3.14139e-07
 -0.000000	 -0.000000	diff=5.01594e-13
  0.000000	  0.000000	diff=5.78937e-13
 -0.000001	 -0.000001	diff=1.13911e-12
 -0.000000	 -0.000000	diff=3.4278e-13
 -0.000001	 -0.000001	diff=4.56117e-14
  0.000000	  0.000000	diff=3.65961e-13
 -0.000200	 -0.000200	diff=2.62442e-07
  0.000071	  0.000071	diff=1.39549e-08
  0.000000	  0.000000	diff=4.45994e-13
  0.000000	  0.000000	diff=8.10606e-13
  0.000000	  0.000000	diff=5.17207e-14
  0.000000	  0.000000	diff=1.96545e-13
  0.000000	  0.000000	diff=4.76632e-14
 -0.000000	 -0.000000	diff=2.93701e-13
  0.000123	  0.000123	diff=2.06469e-09
  0.000010	  0.000010	diff=1.85491e-07
 -0.000000	 -0.000000	diff=3.89233e-13
  0.000000	  0.000000	diff=2.29414e-13
 -0.000001	 -0.000001	diff=7.51087e-12
  0.000000	  0.000000	diff=1.06461e-12
 -0.000001	 -0.000001	diff=1.01553e-11
  0.000001	  0.000001	diff=5.14425e-13
 -0.000322	 -0.000321	diff=2.08661e-07
 -0.000175	 -0.000175	diff=2.39493e-08
  0.000000	  0.000000	diff=1.16091e-13
 -0.000000	 -0.000000	diff=4.31763e-13
  0.000001	  0.000001	diff=1.45715e-12
 -0.000000	 -0.000000	diff=6.29152e-13
  0.000000	  0.000000	diff=3.01951e-13
 -0.000000	 -0.000000	diff=4.29796e-13
  0.000170	  0.000170	diff=3.03361e-09
  0.000156	  0.000156	diff=2.24839e-07
  local_diff=1.81626e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001416	  0.001416	diff=2.24161e-07
  0.000149	  0.000148	diff=4.83014e-07
  0.000265	  0.000265	diff=1.04332e-07
  0.001956	  0.001955	diff=1.18718e-06
  local_diff=1.99869e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001049	  0.001049	diff=1.04602e-07
 -0.000958	 -0.000958	diff=6.36147e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003521	 -0.003520	diff=4.02644e-07
 -0.000193	 -0.000193	diff=2.0067e-07
 -0.004962	 -0.004962	diff=3.19252e-07
 -0.001412	 -0.001412	diff=3.428e-07
  local_diff=2.00611e-06
# W_soft, [5 2]
  0.007849	  0.007849	diff=6.5062e-08
  0.007849	  0.007849	diff=6.50646e-08
  0.004800	  0.004799	diff=6.50659e-08
 -0.013796	 -0.013797	diff=6.50577e-08
 -0.006701	 -0.006701	diff=6.50775e-08
 -0.002503	 -0.002503	diff=1.97754e-08
 -0.002503	 -0.002503	diff=1.97757e-08
 -0.004838	 -0.004839	diff=1.97772e-08
  0.007189	  0.007189	diff=1.97739e-08
  0.002656	  0.002656	diff=1.97791e-08
  local_diff=4.24209e-07
# Num params=110, abs_diff=6.70758e-06
Elapsed time is 1.245375 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.01201e-12
 -0.000000	 -0.000000	diff=6.35909e-13
  0.000000	  0.000000	diff=1.04485e-11
 -0.000000	 -0.000000	diff=1.67593e-12
  0.000001	  0.000001	diff=1.9472e-12
  0.000000	  0.000000	diff=1.72778e-13
 -0.000150	 -0.000150	diff=1.6814e-10
 -0.000020	 -0.000020	diff=2.66738e-10
 -0.000001	 -0.000001	diff=2.50322e-12
  0.000000	  0.000000	diff=9.02429e-13
 -0.000000	 -0.000000	diff=1.98496e-11
  0.000000	  0.000000	diff=2.57834e-12
 -0.000001	 -0.000001	diff=5.14255e-12
 -0.000000	 -0.000000	diff=1.14396e-12
  0.000218	  0.000218	diff=1.87396e-10
  0.000030	  0.000030	diff=5.61483e-10
 -0.000000	 -0.000000	diff=6.42337e-13
  0.000000	  0.000000	diff=4.63791e-13
 -0.000000	 -0.000000	diff=4.84313e-13
  0.000000	  0.000000	diff=7.00858e-13
 -0.000000	 -0.000000	diff=4.78397e-13
 -0.000000	 -0.000000	diff=1.0118e-13
  0.000004	  0.000004	diff=5.00007e-09
  0.000001	  0.000001	diff=5.07508e-12
  0.000000	  0.000000	diff=3.66703e-13
 -0.000000	 -0.000000	diff=4.97045e-14
  0.000000	  0.000000	diff=6.06628e-14
 -0.000000	 -0.000000	diff=8.31975e-13
  0.000000	  0.000000	diff=5.95507e-14
  0.000000	  0.000000	diff=5.59007e-13
 -0.000003	 -0.000003	diff=3.08146e-11
 -0.000001	 -0.000001	diff=5.66983e-10
  local_diff=6.84051e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=8.03802e-14
 -0.000000	 -0.000000	diff=9.53185e-13
 -0.000000	 -0.000000	diff=7.28831e-13
 -0.000000	 -0.000000	diff=3.31755e-14
  0.000000	  0.000000	diff=9.56569e-13
 -0.000000	 -0.000000	diff=8.66522e-14
  0.000154	  0.000154	diff=5.96133e-11
 -0.000141	 -0.000141	diff=8.25531e-11
  0.000000	  0.000000	diff=4.29653e-13
  0.000000	  0.000000	diff=3.05068e-13
  0.000000	  0.000000	diff=2.04698e-13
  0.000000	  0.000000	diff=1.31599e-13
 -0.000000	 -0.000000	diff=2.76807e-13
  0.000000	  0.000000	diff=1.29988e-13
 -0.000126	 -0.000126	diff=3.95108e-11
  0.000117	  0.000117	diff=5.44827e-11
 -0.000000	 -0.000000	diff=4.19572e-13
 -0.000000	 -0.000000	diff=2.81248e-13
 -0.000000	 -0.000000	diff=4.47843e-13
 -0.000000	 -0.000000	diff=1.26669e-13
  0.000000	  0.000000	diff=9.66914e-13
 -0.000000	 -0.000000	diff=6.50479e-13
  0.000003	  0.000003	diff=4.50443e-09
 -0.000003	 -0.000003	diff=4.91204e-14
  0.000000	  0.000000	diff=1.25299e-13
  0.000000	  0.000000	diff=7.31938e-13
  0.000000	  0.000000	diff=4.39996e-13
  0.000000	  0.000000	diff=2.79286e-13
 -0.000000	 -0.000000	diff=1.28328e-14
  0.000000	  0.000000	diff=1.31276e-12
 -0.000004	 -0.000004	diff=3.12506e-13
  0.000003	  0.000003	diff=4.67157e-09
  local_diff=9.42263e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.1358e-12
  0.000000	  0.000000	diff=7.17355e-13
 -0.000000	 -0.000000	diff=3.55204e-12
 -0.000000	 -0.000000	diff=2.5533e-12
 -0.000000	 -0.000000	diff=1.15237e-13
  0.000000	  0.000000	diff=8.5841e-13
  0.000075	  0.000075	diff=3.31281e-10
 -0.000089	 -0.000089	diff=6.88033e-10
  0.000000	  0.000000	diff=3.59578e-13
 -0.000000	 -0.000000	diff=3.93993e-13
  0.000000	  0.000000	diff=2.05753e-11
  0.000000	  0.000000	diff=1.09593e-11
  0.000000	  0.000000	diff=1.59798e-12
 -0.000000	 -0.000000	diff=8.16826e-13
 -0.000200	 -0.000200	diff=1.91575e-09
  0.000218	  0.000218	diff=1.40996e-09
 -0.000000	 -0.000000	diff=2.48619e-13
  0.000000	  0.000000	diff=6.71826e-13
  0.000000	  0.000000	diff=9.36701e-13
 -0.000000	 -0.000000	diff=2.57788e-13
  0.000000	  0.000000	diff=1.30817e-13
  0.000000	  0.000000	diff=4.0149e-15
 -0.000000	 -0.000000	diff=1.9846e-12
  0.000000	  0.000000	diff=7.72185e-15
  0.000000	  0.000000	diff=9.7026e-14
 -0.000000	 -0.000000	diff=1.07181e-13
 -0.000000	 -0.000000	diff=2.49916e-13
  0.000000	  0.000000	diff=3.32967e-13
 -0.000000	 -0.000000	diff=1.64263e-13
 -0.000000	 -0.000000	diff=3.16626e-13
  0.000000	  0.000000	diff=5.38418e-13
 -0.000000	 -0.000000	diff=5.78386e-12
  0.000000	  0.000000	diff=3.21581e-13
 -0.000000	 -0.000000	diff=2.1214e-13
  0.000000	  0.000000	diff=1.09172e-12
  0.000000	  0.000000	diff=6.37362e-13
  0.000000	  0.000000	diff=6.32383e-13
 -0.000000	 -0.000000	diff=3.52803e-13
 -0.000006	 -0.000006	diff=1.72576e-08
  0.000006	  0.000006	diff=2.70846e-10
 -0.000000	 -0.000000	diff=7.56398e-13
  0.000000	  0.000000	diff=1.32195e-12
 -0.000000	 -0.000000	diff=6.8749e-14
 -0.000000	 -0.000000	diff=1.47369e-12
 -0.000000	 -0.000000	diff=4.59041e-13
  0.000000	  0.000000	diff=3.97613e-13
  0.000003	  0.000003	diff=1.66925e-10
 -0.000003	 -0.000003	diff=4.75861e-09
  local_diff=2.68622e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=8.65635e-13
 -0.000000	 -0.000000	diff=4.34091e-13
 -0.000000	 -0.000000	diff=7.33809e-14
 -0.000000	 -0.000000	diff=1.18128e-12
 -0.000000	 -0.000000	diff=5.30703e-14
 -0.000000	 -0.000000	diff=1.62783e-13
  0.000182	  0.000182	diff=3.50528e-09
 -0.000127	 -0.000127	diff=2.63484e-09
  0.000000	  0.000000	diff=4.47805e-14
 -0.000000	 -0.000000	diff=2.77995e-14
 -0.000000	 -0.000000	diff=4.2504e-14
 -0.000000	 -0.000000	diff=8.06954e-13
 -0.000000	 -0.000000	diff=5.8054e-13
 -0.000000	 -0.000000	diff=2.58382e-13
  0.000015	  0.000015	diff=2.75182e-09
 -0.000013	 -0.000013	diff=1.13536e-09
  0.000000	  0.000000	diff=1.48656e-12
 -0.000000	 -0.000000	diff=5.3465e-13
 -0.000000	 -0.000000	diff=5.83813e-13
 -0.000000	 -0.000000	diff=8.1559e-14
 -0.000000	 -0.000000	diff=5.2296e-14
 -0.000000	 -0.000000	diff=2.16327e-13
  0.000011	  0.000011	diff=3.31133e-08
 -0.000008	 -0.000008	diff=3.27926e-10
 -0.000000	 -0.000000	diff=6.03095e-13
  0.000000	  0.000000	diff=3.68365e-13
  0.000000	  0.000000	diff=1.76702e-13
  0.000000	  0.000000	diff=2.50519e-13
  0.000000	  0.000000	diff=1.74047e-13
  0.000000	  0.000000	diff=6.5127e-13
 -0.000016	 -0.000016	diff=9.35584e-11
  0.000010	  0.000010	diff=1.98404e-08
  local_diff=6.34122e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000075	  0.000075	diff=2.82593e-08
 -0.000092	 -0.000092	diff=9.28177e-08
  0.000074	  0.000074	diff=2.53399e-08
 -0.000081	 -0.000081	diff=7.86173e-08
  local_diff=2.25034e-07
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000022	  0.000022	diff=6.25761e-08
 -0.000053	 -0.000053	diff=2.94624e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000070	 -0.000070	diff=9.6036e-08
 -0.000063	 -0.000063	diff=4.16344e-08
  0.000021	  0.000021	diff=4.15104e-08
 -0.000032	 -0.000032	diff=2.02925e-08
  local_diff=2.91512e-07
# W_soft, [5 2]
 -0.000086	 -0.000086	diff=8.19208e-12
 -0.000086	 -0.000086	diff=7.88968e-12
 -0.000024	 -0.000024	diff=8.03629e-12
  0.000187	  0.000187	diff=8.942e-12
  0.000009	  0.000009	diff=8.86197e-12
  0.000190	  0.000190	diff=3.24091e-11
  0.000190	  0.000190	diff=3.27182e-11
  0.000086	  0.000086	diff=3.28738e-11
 -0.000414	 -0.000414	diff=3.26647e-11
 -0.000051	 -0.000051	diff=3.27591e-11
  local_diff=2.05347e-10
# Num params=174, abs_diff=6.23289e-07
Elapsed time is 2.383160 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.70699e-13
  0.000000	  0.000000	diff=1.76517e-13
  0.000000	  0.000000	diff=1.4175e-11
  0.000000	  0.000000	diff=1.21093e-12
  0.000000	  0.000000	diff=2.94252e-12
  0.000000	  0.000000	diff=3.72169e-13
 -0.000088	 -0.000088	diff=9.05964e-10
  0.000004	  0.000004	diff=3.24596e-11
 -0.000000	 -0.000000	diff=1.47084e-12
  0.000000	  0.000000	diff=3.51307e-13
 -0.000000	 -0.000000	diff=2.88642e-11
  0.000000	  0.000000	diff=2.9091e-12
 -0.000000	 -0.000000	diff=4.0228e-12
 -0.000000	 -0.000000	diff=1.74188e-12
  0.000076	  0.000076	diff=1.09826e-09
  0.000034	  0.000034	diff=7.39404e-10
 -0.000000	 -0.000000	diff=5.59183e-13
  0.000000	  0.000000	diff=1.05866e-13
 -0.000000	 -0.000000	diff=1.89004e-13
  0.000000	  0.000000	diff=5.61954e-13
 -0.000000	 -0.000000	diff=1.62299e-13
 -0.000000	 -0.000000	diff=2.25475e-13
  0.000002	  0.000002	diff=4.92705e-09
  0.000000	  0.000000	diff=6.29919e-12
  0.000000	  0.000000	diff=1.48164e-12
 -0.000000	 -0.000000	diff=7.9407e-13
  0.000000	  0.000000	diff=9.11813e-14
 -0.000000	 -0.000000	diff=1.78877e-13
  0.000000	  0.000000	diff=1.18734e-13
  0.000000	  0.000000	diff=6.98045e-13
 -0.000002	 -0.000002	diff=3.65579e-11
 -0.000001	 -0.000001	diff=4.20082e-10
  local_diff=8.23016e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.39122e-13
 -0.000000	 -0.000000	diff=8.35316e-13
 -0.000000	 -0.000000	diff=7.53571e-13
 -0.000000	 -0.000000	diff=1.04244e-13
  0.000000	  0.000000	diff=7.26414e-15
 -0.000000	 -0.000000	diff=3.27244e-13
  0.000111	  0.000111	diff=7.47341e-11
 -0.000035	 -0.000035	diff=4.90506e-11
  0.000000	  0.000000	diff=3.64479e-13
  0.000000	  0.000000	diff=9.94459e-14
  0.000000	  0.000000	diff=9.29944e-13
  0.000000	  0.000000	diff=5.39092e-13
 -0.000000	 -0.000000	diff=1.08016e-13
  0.000000	  0.000000	diff=2.46041e-13
 -0.000163	 -0.000163	diff=7.90881e-11
  0.000135	  0.000135	diff=9.3633e-11
 -0.000000	 -0.000000	diff=1.15611e-13
 -0.000000	 -0.000000	diff=6.17457e-13
 -0.000000	 -0.000000	diff=2.26721e-13
 -0.000000	 -0.000000	diff=2.51084e-13
  0.000000	  0.000000	diff=7.79556e-13
 -0.000000	 -0.000000	diff=5.86092e-13
  0.000003	  0.000003	diff=4.91467e-09
 -0.000001	 -0.000001	diff=6.2867e-13
  0.000000	  0.000000	diff=1.39697e-13
  0.000000	  0.000000	diff=9.37538e-13
  0.000000	  0.000000	diff=4.67156e-14
  0.000000	  0.000000	diff=3.52655e-13
 -0.000000	 -0.000000	diff=2.00908e-13
  0.000000	  0.000000	diff=1.70998e-13
 -0.000004	 -0.000004	diff=8.47843e-13
  0.000002	  0.000002	diff=4.77479e-09
  local_diff=9.99663e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.59023e-13
  0.000000	  0.000000	diff=2.58292e-13
 -0.000000	 -0.000000	diff=3.58941e-12
 -0.000000	 -0.000000	diff=4.98908e-12
 -0.000000	 -0.000000	diff=1.00825e-12
  0.000000	  0.000000	diff=3.37876e-14
  0.000042	  0.000042	diff=2.90536e-10
 -0.000112	 -0.000112	diff=1.38789e-09
  0.000000	  0.000000	diff=5.45505e-13
 -0.000000	 -0.000000	diff=1.89052e-12
  0.000000	  0.000000	diff=2.94054e-11
  0.000000	  0.000000	diff=2.19001e-11
  0.000000	  0.000000	diff=1.73231e-12
 -0.000000	 -0.000000	diff=4.31294e-13
 -0.000158	 -0.000158	diff=2.53594e-09
  0.000233	  0.000233	diff=1.98497e-09
 -0.000000	 -0.000000	diff=2.98429e-13
  0.000000	  0.000000	diff=9.2267e-14
  0.000000	  0.000000	diff=3.69807e-13
 -0.000000	 -0.000000	diff=8.34184e-13
  0.000000	  0.000000	diff=9.33658e-13
  0.000000	  0.000000	diff=1.59363e-13
 -0.000000	 -0.000000	diff=1.21301e-12
  0.000000	  0.000000	diff=3.80376e-13
  0.000000	  0.000000	diff=1.52892e-13
 -0.000000	 -0.000000	diff=1.60575e-13
 -0.000000	 -0.000000	diff=5.20818e-13
  0.000000	  0.000000	diff=8.54171e-14
 -0.000000	 -0.000000	diff=1.17125e-12
  0.000000	  0.000000	diff=8.69386e-13
  0.000000	  0.000000	diff=1.38672e-13
 -0.000000	 -0.000000	diff=9.15253e-12
  0.000000	  0.000000	diff=4.43923e-13
 -0.000000	 -0.000000	diff=8.00218e-14
  0.000000	  0.000000	diff=1.96003e-13
  0.000000	  0.000000	diff=4.49582e-13
  0.000000	  0.000000	diff=2.4237e-13
 -0.000000	 -0.000000	diff=4.30746e-13
 -0.000004	 -0.000004	diff=1.16943e-08
  0.000005	  0.000005	diff=3.52506e-10
 -0.000000	 -0.000000	diff=9.6141e-14
  0.000000	  0.000000	diff=9.16034e-14
 -0.000000	 -0.000000	diff=5.0626e-14
 -0.000000	 -0.000000	diff=4.09526e-13
 -0.000000	 -0.000000	diff=1.91686e-13
  0.000000	  0.000000	diff=2.76682e-13
  0.000002	  0.000002	diff=1.09243e-10
 -0.000004	 -0.000004	diff=6.36185e-09
  local_diff=2.48032e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.01695e-12
 -0.000000	 -0.000000	diff=2.79277e-13
 -0.000000	 -0.000000	diff=4.14675e-13
 -0.000000	 -0.000000	diff=9.96538e-13
 -0.000000	 -0.000000	diff=1.59943e-13
 -0.000000	 -0.000000	diff=5.17265e-13
  0.000104	  0.000104	diff=2.3385e-09
  0.000012	  0.000012	diff=2.40086e-09
  0.000000	  0.000000	diff=2.45358e-13
 -0.000000	 -0.000000	diff=2.4845e-13
 -0.000000	 -0.000000	diff=5.49966e-13
 -0.000000	 -0.000000	diff=8.73966e-13
 -0.000000	 -0.000000	diff=1.00127e-13
 -0.000000	 -0.000000	diff=4.30607e-13
  0.000022	  0.000022	diff=4.77782e-09
 -0.000020	 -0.000020	diff=2.2462e-09
  0.000000	  0.000000	diff=1.13921e-13
  0.000000	  0.000000	diff=7.60806e-13
 -0.000000	 -0.000000	diff=1.66555e-13
 -0.000000	 -0.000000	diff=7.03774e-13
 -0.000000	 -0.000000	diff=5.38458e-13
 -0.000000	 -0.000000	diff=5.65232e-13
  0.000009	  0.000009	diff=2.80555e-08
 -0.000003	 -0.000003	diff=2.42601e-10
 -0.000000	 -0.000000	diff=1.4268e-12
  0.000000	  0.000000	diff=2.62208e-13
  0.000000	  0.000000	diff=3.31084e-13
  0.000000	  0.000000	diff=6.06037e-13
  0.000000	  0.000000	diff=2.41643e-13
  0.000000	  0.000000	diff=1.45481e-13
 -0.000015	 -0.000015	diff=7.61084e-11
  0.000005	  0.000005	diff=1.60776e-08
  local_diff=5.62269e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=1.72009e-08
 -0.000014	 -0.000014	diff=4.22729e-08
  0.000062	  0.000062	diff=2.32496e-08
 -0.000020	 -0.000020	diff=1.66708e-08
  local_diff=9.93941e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000107	  0.000107	diff=5.82653e-08
 -0.000042	 -0.000042	diff=2.80125e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=8.8686e-08
 -0.000040	 -0.000040	diff=2.87379e-08
  0.000068	  0.000068	diff=5.73714e-08
 -0.000034	 -0.000034	diff=2.63123e-08
  local_diff=2.87385e-07
# W_soft, [5 2]
 -0.000090	 -0.000090	diff=1.29046e-11
 -0.000090	 -0.000090	diff=1.25565e-11
 -0.000013	 -0.000013	diff=1.19156e-11
  0.000150	  0.000150	diff=1.24629e-11
  0.000042	  0.000042	diff=1.26882e-11
  0.000192	  0.000192	diff=4.55799e-11
  0.000192	  0.000192	diff=4.60538e-11
  0.000090	  0.000090	diff=4.51997e-11
 -0.000352	 -0.000352	diff=4.58334e-11
 -0.000122	 -0.000122	diff=4.54174e-11
  local_diff=2.90612e-10
# Num params=174, abs_diff=4.86327e-07
Elapsed time is 2.306880 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=7.30558e-13
 -0.000000	 -0.000000	diff=3.53748e-13
  0.000000	  0.000000	diff=8.56072e-14
 -0.000000	 -0.000000	diff=1.44345e-13
  0.000000	  0.000000	diff=3.78059e-13
  0.000000	  0.000000	diff=3.83548e-13
 -0.000003	 -0.000003	diff=3.37658e-11
 -0.000000	 -0.000000	diff=6.41082e-12
 -0.000000	 -0.000000	diff=9.21766e-13
  0.000000	  0.000000	diff=5.76396e-14
 -0.000000	 -0.000000	diff=4.87555e-13
  0.000000	  0.000000	diff=5.64176e-13
 -0.000000	 -0.000000	diff=4.97767e-13
 -0.000000	 -0.000000	diff=1.12706e-12
  0.000004	  0.000004	diff=4.04121e-11
  0.000002	  0.000002	diff=5.44747e-11
 -0.000000	 -0.000000	diff=5.42168e-13
  0.000000	  0.000000	diff=1.00129e-12
 -0.000000	 -0.000000	diff=2.59726e-13
  0.000000	  0.000000	diff=1.53424e-13
 -0.000000	 -0.000000	diff=1.38418e-13
 -0.000000	 -0.000000	diff=4.62475e-15
  0.000000	  0.000000	diff=9.0896e-11
  0.000000	  0.000000	diff=2.90327e-13
  0.000000	  0.000000	diff=9.04114e-13
 -0.000000	 -0.000000	diff=4.81035e-13
  0.000000	  0.000000	diff=2.44186e-13
 -0.000000	 -0.000000	diff=3.44238e-13
  0.000000	  0.000000	diff=2.17695e-13
  0.000000	  0.000000	diff=2.37221e-13
 -0.000000	 -0.000000	diff=6.16539e-13
 -0.000000	 -0.000000	diff=2.32895e-11
  local_diff=2.60416e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.7514e-13
 -0.000000	 -0.000000	diff=3.02987e-13
  0.000000	  0.000000	diff=4.46729e-13
 -0.000000	 -0.000000	diff=3.59273e-13
 -0.000000	 -0.000000	diff=8.70494e-13
 -0.000000	 -0.000000	diff=2.31972e-13
 -0.000002	 -0.000002	diff=2.82919e-13
 -0.000006	 -0.000006	diff=1.97732e-12
 -0.000000	 -0.000000	diff=3.3135e-13
  0.000000	  0.000000	diff=4.87588e-14
 -0.000000	 -0.000000	diff=2.27483e-13
  0.000000	  0.000000	diff=1.77047e-13
  0.000000	  0.000000	diff=6.6402e-13
  0.000000	  0.000000	diff=2.7252e-13
  0.000003	  0.000003	diff=1.94957e-13
  0.000007	  0.000007	diff=2.92656e-12
  0.000000	  0.000000	diff=1.02665e-12
 -0.000000	 -0.000000	diff=6.36301e-13
  0.000000	  0.000000	diff=5.55065e-13
 -0.000000	 -0.000000	diff=4.44166e-13
  0.000000	 -0.000000	diff=2.67035e-13
 -0.000000	 -0.000000	diff=3.52227e-13
 -0.000000	 -0.000000	diff=6.1593e-11
 -0.000000	 -0.000000	diff=1.19263e-12
 -0.000000	 -0.000000	diff=8.24502e-13
  0.000000	  0.000000	diff=4.84766e-13
 -0.000000	 -0.000000	diff=2.13293e-13
  0.000000	  0.000000	diff=3.1948e-13
  0.000000	  0.000000	diff=3.27929e-13
  0.000000	  0.000000	diff=1.1748e-12
  0.000000	  0.000000	diff=5.73847e-13
  0.000000	  0.000000	diff=1.78847e-10
  local_diff=2.58322e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.97487e-13
  0.000000	  0.000000	diff=3.86632e-15
 -0.000000	 -0.000000	diff=7.84031e-14
 -0.000000	 -0.000000	diff=1.45211e-12
  0.000000	  0.000000	diff=3.70046e-13
  0.000000	  0.000000	diff=1.50397e-13
  0.000000	  0.000000	diff=5.66907e-13
 -0.000007	 -0.000007	diff=4.81789e-11
 -0.000000	 -0.000000	diff=8.82906e-13
 -0.000000	 -0.000000	diff=9.15281e-13
  0.000000	  0.000000	diff=4.51061e-13
  0.000000	  0.000000	diff=1.41721e-12
 -0.000000	 -0.000000	diff=6.23775e-13
 -0.000000	 -0.000000	diff=6.99282e-13
 -0.000001	 -0.000001	diff=3.5108e-11
  0.000002	  0.000002	diff=1.66585e-10
  0.000000	  0.000000	diff=1.20105e-13
  0.000000	  0.000000	diff=1.79657e-13
  0.000000	 -0.000000	diff=2.43903e-13
  0.000000	  0.000000	diff=1.43603e-13
  0.000000	 -0.000000	diff=9.87865e-14
  0.000000	  0.000000	diff=3.11676e-13
  0.000000	  0.000000	diff=8.00094e-13
  0.000000	  0.000000	diff=1.29474e-12
  0.000000	  0.000000	diff=4.14207e-14
  0.000000	  0.000000	diff=8.14659e-14
  0.000000	 -0.000000	diff=8.17104e-14
  0.000000	  0.000000	diff=2.76634e-14
  0.000000	 -0.000000	diff=2.3187e-14
  0.000000	  0.000000	diff=8.63972e-14
  0.000000	  0.000000	diff=9.24202e-13
  0.000000	  0.000000	diff=1.01171e-12
 -0.000000	 -0.000000	diff=4.19603e-13
 -0.000000	 -0.000000	diff=1.06285e-13
  0.000000	  0.000000	diff=3.61493e-13
  0.000000	  0.000000	diff=3.43733e-14
 -0.000000	 -0.000000	diff=6.99114e-13
 -0.000000	 -0.000000	diff=1.18094e-13
 -0.000000	 -0.000000	diff=2.26806e-10
  0.000000	  0.000000	diff=3.42172e-11
 -0.000000	 -0.000000	diff=2.26795e-13
  0.000000	  0.000000	diff=7.51944e-13
 -0.000000	 -0.000000	diff=3.20696e-13
 -0.000000	 -0.000000	diff=1.34944e-12
  0.000000	  0.000000	diff=5.41022e-13
  0.000000	  0.000000	diff=7.34384e-14
  0.000000	  0.000000	diff=3.03559e-12
 -0.000000	 -0.000000	diff=2.02638e-10
  local_diff=7.3545e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.5559e-13
  0.000000	  0.000000	diff=3.18992e-13
  0.000000	  0.000000	diff=5.47194e-13
 -0.000000	 -0.000000	diff=9.14147e-13
  0.000000	  0.000000	diff=4.42876e-13
 -0.000000	 -0.000000	diff=3.93039e-13
 -0.000001	 -0.000001	diff=5.15393e-13
 -0.000004	 -0.000004	diff=5.63686e-12
  0.000000	  0.000000	diff=5.52836e-13
 -0.000000	 -0.000000	diff=1.91588e-13
 -0.000000	 -0.000000	diff=1.2746e-13
 -0.000000	 -0.000000	diff=2.92164e-13
 -0.000000	 -0.000000	diff=5.41141e-13
 -0.000000	 -0.000000	diff=2.09824e-14
 -0.000001	 -0.000001	diff=2.46439e-13
 -0.000002	 -0.000002	diff=5.36453e-13
 -0.000000	 -0.000000	diff=5.33346e-13
  0.000000	 -0.000000	diff=8.32935e-13
  0.000000	  0.000000	diff=8.62117e-13
 -0.000000	 -0.000000	diff=1.10782e-13
  0.000000	  0.000000	diff=2.54097e-13
 -0.000000	 -0.000000	diff=1.85759e-13
 -0.000000	 -0.000000	diff=4.1172e-10
 -0.000000	 -0.000000	diff=1.92156e-11
  0.000000	  0.000000	diff=4.67402e-13
  0.000000	  0.000000	diff=5.11687e-14
 -0.000000	 -0.000000	diff=2.95164e-13
  0.000000	  0.000000	diff=1.34745e-12
 -0.000000	 -0.000000	diff=1.36341e-13
  0.000000	  0.000000	diff=5.12304e-13
  0.000000	  0.000000	diff=2.59125e-12
  0.000000	  0.000000	diff=8.46193e-10
  local_diff=1.29684e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=6.29923e-10
 -0.000001	 -0.000001	diff=7.67336e-10
  0.000001	  0.000001	diff=6.90255e-10
 -0.000000	 -0.000000	diff=1.07011e-09
  local_diff=3.15762e-09
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=6.89482e-10
 -0.000000	 -0.000000	diff=8.65476e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000007	 -0.000007	diff=2.33954e-09
 -0.000001	 -0.000001	diff=6.92286e-10
 -0.000009	 -0.000009	diff=1.1099e-09
 -0.000000	 -0.000000	diff=2.59277e-10
  local_diff=5.17703e-09
# W_h, [2 4]
  0.000000	  0.000000	diff=2.03784e-12
 -0.000004	 -0.000004	diff=1.86989e-12
  0.000000	  0.000000	diff=2.16946e-12
  0.000004	  0.000004	diff=1.29881e-12
 -0.000003	 -0.000003	diff=8.35499e-12
  0.000001	  0.000001	diff=2.41188e-12
  0.000011	  0.000011	diff=8.07261e-11
 -0.000001	 -0.000001	diff=3.27002e-11
  local_diff=1.31569e-10
# W_soft, [5 2]
  0.000031	  0.000031	diff=1.22578e-12
  0.000031	  0.000031	diff=1.50155e-12
 -0.000005	 -0.000005	diff=2.14331e-12
 -0.000037	 -0.000037	diff=1.86112e-12
 -0.000020	 -0.000020	diff=1.79475e-12
  0.000024	  0.000024	diff=1.45646e-12
  0.000024	  0.000024	diff=1.02927e-12
 -0.000009	 -0.000009	diff=8.32395e-13
 -0.000027	 -0.000027	diff=1.32863e-12
 -0.000012	 -0.000012	diff=1.74813e-12
  local_diff=1.49214e-11
# Num params=182, abs_diff=1.10322e-08
Elapsed time is 3.241222 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.31621e-12
  0.000000	  0.000000	diff=5.52343e-13
  0.000000	  0.000000	diff=9.34988e-13
  0.000000	  0.000000	diff=4.50825e-13
  0.000000	  0.000000	diff=3.72512e-13
  0.000000	  0.000000	diff=1.98733e-13
 -0.000011	 -0.000011	diff=8.84253e-11
  0.000007	  0.000007	diff=8.7564e-11
 -0.000000	 -0.000000	diff=2.03204e-13
 -0.000000	 -0.000000	diff=1.03148e-12
 -0.000000	 -0.000000	diff=7.38361e-13
 -0.000000	 -0.000000	diff=1.78631e-12
 -0.000000	 -0.000000	diff=2.61349e-13
 -0.000000	 -0.000000	diff=3.06462e-13
  0.000016	  0.000016	diff=1.94511e-10
 -0.000015	 -0.000015	diff=2.57379e-10
 -0.000000	 -0.000000	diff=3.34199e-13
 -0.000000	 -0.000000	diff=7.65688e-13
 -0.000000	 -0.000000	diff=3.31081e-14
 -0.000000	 -0.000000	diff=6.6221e-13
 -0.000000	 -0.000000	diff=3.27686e-13
  0.000000	  0.000000	diff=8.45683e-14
  0.000000	  0.000000	diff=1.03373e-10
 -0.000000	 -0.000000	diff=8.36996e-13
  0.000000	  0.000000	diff=1.29982e-12
  0.000000	  0.000000	diff=2.74183e-13
  0.000000	  0.000000	diff=3.98802e-14
  0.000000	  0.000000	diff=2.93106e-13
  0.000000	  0.000000	diff=3.41689e-13
  0.000000	  0.000000	diff=2.37731e-13
 -0.000000	 -0.000000	diff=2.79537e-13
  0.000000	  0.000000	diff=3.90692e-10
  local_diff=1.13591e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.03599e-13
  0.000000	  0.000000	diff=5.17043e-13
 -0.000000	 -0.000000	diff=5.29157e-13
  0.000000	  0.000000	diff=4.75126e-13
 -0.000000	 -0.000000	diff=1.037e-12
 -0.000000	 -0.000000	diff=5.83128e-14
  0.000034	  0.000034	diff=9.90651e-12
  0.000007	  0.000007	diff=6.08391e-12
  0.000000	  0.000000	diff=3.49285e-13
 -0.000000	 -0.000000	diff=6.67091e-13
  0.000000	  0.000000	diff=5.39419e-13
 -0.000000	 -0.000000	diff=4.29655e-13
  0.000000	  0.000000	diff=1.21428e-13
  0.000000	  0.000000	diff=2.00178e-13
 -0.000039	 -0.000039	diff=8.96773e-12
 -0.000008	 -0.000008	diff=5.56894e-12
 -0.000000	 -0.000000	diff=1.21721e-12
  0.000000	  0.000000	diff=1.19084e-12
 -0.000000	 -0.000000	diff=4.70931e-13
  0.000000	  0.000000	diff=2.05496e-13
 -0.000000	 -0.000000	diff=1.17678e-12
 -0.000000	 -0.000000	diff=2.47211e-13
  0.000001	  0.000001	diff=3.98049e-10
  0.000000	  0.000000	diff=1.0367e-13
  0.000000	  0.000000	diff=1.08783e-12
 -0.000000	 -0.000000	diff=7.97024e-14
  0.000000	  0.000000	diff=4.48404e-13
 -0.000000	 -0.000000	diff=3.00847e-13
  0.000000	  0.000000	diff=6.25214e-13
  0.000000	  0.000000	diff=2.24392e-13
 -0.000001	 -0.000001	diff=2.11553e-13
 -0.000000	 -0.000000	diff=1.73813e-10
  local_diff=6.15407e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.69408e-13
 -0.000000	 -0.000000	diff=3.54196e-13
 -0.000000	 -0.000000	diff=9.29245e-13
  0.000000	  0.000000	diff=5.75577e-13
 -0.000000	 -0.000000	diff=6.72091e-14
 -0.000000	 -0.000000	diff=4.00273e-13
  0.000008	  0.000008	diff=3.87779e-11
  0.000009	  0.000009	diff=5.28238e-11
  0.000000	  0.000000	diff=8.30622e-13
  0.000000	  0.000000	diff=6.64333e-13
  0.000000	  0.000000	diff=2.03377e-12
 -0.000000	 -0.000000	diff=2.54673e-12
  0.000000	  0.000000	diff=4.05248e-13
  0.000000	  0.000000	diff=4.07635e-13
 -0.000011	 -0.000011	diff=1.48571e-10
 -0.000016	 -0.000016	diff=1.13949e-07
  0.000000	 -0.000000	diff=9.2997e-13
  0.000000	 -0.000000	diff=1.30477e-13
  0.000000	  0.000000	diff=9.94296e-13
  0.000000	 -0.000000	diff=1.16394e-13
  0.000000	  0.000000	diff=6.93982e-14
  0.000000	 -0.000000	diff=9.2571e-13
 -0.000000	 -0.000000	diff=1.7322e-14
 -0.000000	 -0.000000	diff=5.19932e-13
  0.000000	  0.000000	diff=7.9129e-15
  0.000000	 -0.000000	diff=4.87123e-15
 -0.000000	 -0.000000	diff=6.03213e-13
  0.000000	  0.000000	diff=6.35027e-13
  0.000000	 -0.000000	diff=9.33646e-14
  0.000000	  0.000000	diff=6.0571e-14
 -0.000000	 -0.000000	diff=1.33303e-12
 -0.000000	 -0.000000	diff=9.28898e-14
  0.000000	  0.000000	diff=5.3017e-13
  0.000000	  0.000000	diff=5.80599e-13
  0.000000	  0.000000	diff=7.84909e-13
 -0.000000	 -0.000000	diff=5.71754e-13
  0.000000	  0.000000	diff=8.22481e-13
 -0.000000	 -0.000000	diff=2.4971e-13
 -0.000001	 -0.000001	diff=1.4325e-09
 -0.000001	 -0.000001	diff=1.32523e-11
 -0.000000	 -0.000000	diff=6.48839e-13
 -0.000000	 -0.000000	diff=3.11391e-13
 -0.000000	 -0.000000	diff=3.6093e-14
  0.000000	  0.000000	diff=2.43318e-13
 -0.000000	 -0.000000	diff=3.64625e-13
  0.000000	  0.000000	diff=5.21646e-14
  0.000000	  0.000000	diff=9.16542e-12
  0.000001	  0.000001	diff=1.29954e-09
  local_diff=1.16965e-07
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.13942e-12
 -0.000000	 -0.000000	diff=7.13161e-13
 -0.000000	 -0.000000	diff=9.3051e-13
  0.000000	  0.000000	diff=1.00736e-12
 -0.000000	 -0.000000	diff=3.93491e-13
  0.000000	  0.000000	diff=1.80987e-13
  0.000032	  0.000032	diff=2.59374e-11
  0.000012	  0.000012	diff=8.02837e-12
  0.000000	  0.000000	diff=7.17968e-13
  0.000000	  0.000000	diff=1.41022e-13
 -0.000000	 -0.000000	diff=9.14003e-13
  0.000000	  0.000000	diff=1.83987e-13
 -0.000000	 -0.000000	diff=1.0263e-12
  0.000000	  0.000000	diff=7.45756e-13
 -0.000005	 -0.000005	diff=5.90308e-11
 -0.000002	 -0.000002	diff=7.37449e-12
  0.000000	  0.000000	diff=1.03869e-12
 -0.000000	 -0.000000	diff=7.83274e-13
 -0.000000	 -0.000000	diff=6.64925e-13
  0.000000	  0.000000	diff=1.02934e-13
 -0.000000	 -0.000000	diff=4.27355e-13
  0.000000	  0.000000	diff=7.87749e-13
  0.000001	  0.000001	diff=4.32714e-09
  0.000001	  0.000001	diff=1.53376e-11
 -0.000000	 -0.000000	diff=8.76852e-14
  0.000000	  0.000000	diff=4.95516e-13
  0.000000	  0.000000	diff=9.04981e-14
 -0.000000	 -0.000000	diff=5.61283e-13
  0.000000	  0.000000	diff=3.56602e-13
 -0.000000	 -0.000000	diff=6.54929e-14
 -0.000002	 -0.000002	diff=8.23861e-12
 -0.000001	 -0.000001	diff=2.08975e-09
  local_diff=6.55439e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=3.9544e-09
 -0.000017	 -0.000017	diff=1.69924e-08
  0.000007	  0.000007	diff=4.10764e-09
 -0.000015	 -0.000015	diff=1.58593e-08
  local_diff=4.09138e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.1248e-09
 -0.000003	 -0.000003	diff=2.18218e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.7246e-09
 -0.000002	 -0.000002	diff=1.66293e-09
 -0.000017	 -0.000017	diff=4.92777e-09
 -0.000001	 -0.000001	diff=1.11169e-09
  local_diff=1.5734e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=4.06858e-13
  0.000000	 -0.000000	diff=2.55439e-13
 -0.000000	 -0.000000	diff=3.45152e-14
  0.000000	  0.000000	diff=1.41914e-13
  local_diff=8.38726e-13
# v_pos, [1 2]
 -0.000000	 -0.000000	diff=7.59412e-13
 -0.000000	 -0.000000	diff=7.73219e-13
  local_diff=1.53263e-12
# W_h, [2 4]
  0.000023	  0.000023	diff=7.69881e-13
  0.000008	  0.000008	diff=1.07702e-13
 -0.000029	 -0.000029	diff=3.00442e-13
 -0.000010	 -0.000010	diff=1.55489e-14
  0.000013	  0.000013	diff=2.43289e-11
  0.000006	  0.000006	diff=2.95409e-13
 -0.000026	 -0.000026	diff=2.0875e-10
 -0.000014	 -0.000014	diff=1.84212e-11
  local_diff=2.52989e-10
# W_soft, [5 2]
 -0.000019	 -0.000019	diff=1.75008e-14
 -0.000019	 -0.000019	diff=5.77963e-13
  0.000008	  0.000008	diff=1.73708e-13
  0.000010	  0.000010	diff=1.36757e-13
  0.000020	  0.000020	diff=5.50159e-13
  0.000020	  0.000020	diff=2.72884e-13
  0.000020	  0.000020	diff=3.89366e-13
 -0.000005	 -0.000005	diff=5.23371e-13
 -0.000012	 -0.000012	diff=1.02778e-12
 -0.000022	 -0.000022	diff=8.17765e-14
  local_diff=3.75127e-12
# Num params=188, abs_diff=1.82177e-07
Elapsed time is 4.682217 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.2309e-12
 -0.000000	 -0.000000	diff=1.57639e-13
  0.000000	  0.000000	diff=2.6477e-12
 -0.000000	 -0.000000	diff=2.32505e-13
  0.000000	  0.000000	diff=1.02203e-13
  0.000000	  0.000000	diff=9.59383e-13
 -0.000019	 -0.000019	diff=3.89113e-11
 -0.000002	 -0.000002	diff=2.97361e-11
 -0.000000	 -0.000000	diff=1.7536e-13
  0.000000	  0.000000	diff=3.94897e-13
 -0.000000	 -0.000000	diff=1.49506e-12
  0.000000	  0.000000	diff=1.38769e-12
 -0.000000	 -0.000000	diff=4.84221e-13
 -0.000000	 -0.000000	diff=9.87191e-13
  0.000027	  0.000027	diff=8.60279e-11
  0.000006	  0.000006	diff=1.4218e-10
 -0.000000	 -0.000000	diff=1.0081e-12
  0.000000	  0.000000	diff=2.09958e-13
 -0.000000	 -0.000000	diff=1.24091e-12
  0.000000	  0.000000	diff=7.12224e-13
 -0.000000	 -0.000000	diff=9.345e-13
 -0.000000	 -0.000000	diff=1.5165e-13
  0.000000	  0.000000	diff=4.90604e-10
  0.000000	  0.000000	diff=5.52801e-13
  0.000000	  0.000000	diff=1.13917e-13
 -0.000000	 -0.000000	diff=2.69282e-13
  0.000000	  0.000000	diff=8.53703e-13
 -0.000000	 -0.000000	diff=7.33568e-13
  0.000000	  0.000000	diff=3.90127e-13
  0.000000	  0.000000	diff=8.9383e-13
 -0.000000	 -0.000000	diff=2.07015e-12
 -0.000000	 -0.000000	diff=2.18159e-10
  local_diff=1.02601e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=7.99871e-13
 -0.000000	 -0.000000	diff=6.88909e-13
  0.000000	  0.000000	diff=2.3206e-13
 -0.000000	 -0.000000	diff=9.26583e-13
 -0.000000	 -0.000000	diff=4.717e-13
 -0.000000	 -0.000000	diff=3.08333e-13
 -0.000011	 -0.000011	diff=5.30776e-12
 -0.000031	 -0.000031	diff=2.68974e-12
 -0.000000	 -0.000000	diff=4.46151e-13
  0.000000	  0.000000	diff=4.27714e-13
 -0.000000	 -0.000000	diff=6.04165e-13
  0.000000	  0.000000	diff=1.06084e-12
  0.000000	  0.000000	diff=5.77611e-13
  0.000000	  0.000000	diff=1.54805e-12
  0.000012	  0.000012	diff=3.85542e-12
  0.000035	  0.000035	diff=4.97097e-14
  0.000000	  0.000000	diff=8.23883e-13
 -0.000000	 -0.000000	diff=7.82645e-13
  0.000000	  0.000000	diff=4.80994e-13
 -0.000000	 -0.000000	diff=5.45734e-13
 -0.000000	 -0.000000	diff=3.47792e-13
 -0.000000	 -0.000000	diff=9.6984e-13
 -0.000000	 -0.000000	diff=3.03965e-10
 -0.000001	 -0.000001	diff=4.11468e-14
 -0.000000	 -0.000000	diff=3.6524e-13
  0.000000	  0.000000	diff=7.98009e-14
 -0.000000	 -0.000000	diff=1.48163e-13
  0.000000	  0.000000	diff=9.56211e-13
  0.000000	  0.000000	diff=1.572e-12
  0.000000	  0.000000	diff=6.76652e-13
  0.000000	  0.000000	diff=1.21539e-13
  0.000001	  0.000001	diff=7.32265e-10
  local_diff=1.06414e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.48229e-13
  0.000000	  0.000000	diff=1.05382e-12
  0.000000	  0.000000	diff=7.17694e-14
 -0.000000	 -0.000000	diff=2.89912e-13
  0.000000	  0.000000	diff=4.59649e-13
  0.000000	  0.000000	diff=1.47605e-12
 -0.000004	 -0.000004	diff=3.06655e-11
 -0.000014	 -0.000014	diff=8.67397e-11
 -0.000000	 -0.000000	diff=1.11918e-12
 -0.000000	 -0.000000	diff=8.24279e-13
 -0.000000	 -0.000000	diff=9.06094e-13
  0.000000	  0.000000	diff=6.71648e-12
 -0.000000	 -0.000000	diff=3.46381e-13
 -0.000000	 -0.000000	diff=8.78578e-13
  0.000011	  0.000011	diff=1.8881e-10
  0.000051	  0.000051	diff=5.86157e-11
 -0.000000	 -0.000000	diff=1.17611e-12
  0.000000	 -0.000000	diff=4.17005e-13
  0.000000	  0.000000	diff=9.44246e-13
  0.000000	 -0.000000	diff=6.80654e-14
  0.000000	  0.000000	diff=8.41557e-13
 -0.000000	 -0.000000	diff=9.03374e-13
 -0.000000	 -0.000000	diff=4.63123e-13
 -0.000000	 -0.000000	diff=3.29304e-13
  0.000000	 -0.000000	diff=3.45388e-14
  0.000000	 -0.000000	diff=8.78721e-14
  0.000000	 -0.000000	diff=7.18203e-15
  0.000000	  0.000000	diff=5.05752e-14
  0.000000	 -0.000000	diff=3.69317e-14
  0.000000	 -0.000000	diff=7.55868e-13
 -0.000000	 -0.000000	diff=2.47048e-13
 -0.000000	 -0.000000	diff=1.01103e-12
 -0.000000	 -0.000000	diff=5.27165e-13
 -0.000000	 -0.000000	diff=6.87187e-13
 -0.000000	 -0.000000	diff=8.28824e-13
  0.000000	  0.000000	diff=5.24819e-13
 -0.000000	 -0.000000	diff=1.0098e-12
  0.000000	  0.000000	diff=1.21192e-12
  0.000000	  0.000000	diff=7.23633e-10
  0.000001	  0.000001	diff=8.15818e-11
  0.000000	  0.000000	diff=1.7469e-13
  0.000000	  0.000000	diff=1.32867e-12
  0.000000	  0.000000	diff=3.06473e-13
 -0.000000	 -0.000000	diff=4.38738e-13
  0.000000	  0.000000	diff=6.81803e-14
 -0.000000	 -0.000000	diff=1.40311e-13
 -0.000000	 -0.000000	diff=5.61944e-12
 -0.000001	 -0.000001	diff=2.08168e-09
  local_diff=3.28646e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=5.9455e-13
  0.000000	  0.000000	diff=1.07781e-12
  0.000000	  0.000000	diff=1.29619e-12
 -0.000000	 -0.000000	diff=4.74204e-15
  0.000000	  0.000000	diff=8.94596e-13
 -0.000000	 -0.000000	diff=3.23382e-13
 -0.000013	 -0.000013	diff=1.93341e-11
 -0.000008	 -0.000008	diff=2.81251e-11
 -0.000000	 -0.000000	diff=1.06933e-13
 -0.000000	 -0.000000	diff=2.4917e-13
  0.000000	  0.000000	diff=2.26123e-13
  0.000000	  0.000000	diff=8.65334e-13
 -0.000000	 -0.000000	diff=1.12239e-12
  0.000000	  0.000000	diff=5.88617e-13
 -0.000001	 -0.000001	diff=2.42624e-11
  0.000001	  0.000001	diff=5.92268e-12
 -0.000000	 -0.000000	diff=8.08888e-13
  0.000000	  0.000000	diff=1.01681e-12
  0.000000	  0.000000	diff=1.02848e-12
 -0.000000	 -0.000000	diff=1.06918e-12
  0.000000	  0.000000	diff=4.19007e-13
 -0.000000	 -0.000000	diff=1.02074e-12
 -0.000001	 -0.000001	diff=2.01893e-09
 -0.000001	 -0.000001	diff=5.63943e-11
  0.000000	  0.000000	diff=1.04435e-12
 -0.000000	 -0.000000	diff=1.19681e-13
 -0.000000	 -0.000000	diff=4.80025e-14
  0.000000	  0.000000	diff=9.20859e-13
 -0.000000	 -0.000000	diff=1.50122e-13
  0.000000	  0.000000	diff=2.09358e-13
  0.000001	  0.000001	diff=5.87079e-12
  0.000001	  0.000001	diff=4.28731e-09
  local_diff=6.46135e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000010	  0.000010	diff=3.91357e-09
 -0.000012	 -0.000012	diff=1.04559e-08
  0.000009	  0.000009	diff=3.59209e-09
 -0.000006	 -0.000006	diff=6.42968e-09
  local_diff=2.43913e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000030	  0.000030	diff=1.6923e-09
  0.000002	  0.000002	diff=1.91118e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000044	  0.000044	diff=7.94871e-09
  0.000001	  0.000001	diff=1.67169e-09
  0.000026	  0.000026	diff=1.78527e-09
  0.000001	  0.000001	diff=9.93849e-10
  local_diff=1.6003e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.91363e-15
  0.000000	 -0.000000	diff=2.33469e-15
  0.000000	 -0.000000	diff=2.46117e-15
  0.000000	  0.000000	diff=3.01129e-15
  local_diff=9.72078e-15
# W_h, [2 4]
 -0.000030	 -0.000030	diff=4.56634e-13
 -0.000036	 -0.000036	diff=1.47777e-12
  0.000038	  0.000038	diff=1.11086e-12
  0.000045	  0.000045	diff=1.31355e-12
 -0.000009	 -0.000009	diff=1.6458e-11
 -0.000011	 -0.000011	diff=1.33404e-11
  0.000013	  0.000013	diff=1.80711e-10
  0.000022	  0.000022	diff=1.68781e-10
  local_diff=3.83649e-10
# W_soft, [5 2]
  0.000028	  0.000028	diff=7.23507e-13
  0.000028	  0.000028	diff=6.15663e-14
  0.000001	  0.000001	diff=3.93677e-13
 -0.000038	 -0.000038	diff=4.57176e-13
 -0.000020	 -0.000020	diff=4.95701e-13
  0.000003	  0.000003	diff=7.69384e-13
  0.000003	  0.000003	diff=1.2449e-12
 -0.000003	 -0.000003	diff=2.56793e-13
 -0.000001	 -0.000001	diff=4.67095e-14
 -0.000001	 -0.000001	diff=8.03285e-13
  local_diff=5.2527e-12
# Num params=186, abs_diff=5.26211e-08
Elapsed time is 3.554234 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=5.40697e-13
  0.000000	  0.000000	diff=6.18138e-13
  0.000000	  0.000000	diff=7.20277e-13
  0.000000	  0.000000	diff=7.03089e-13
  0.000000	  0.000000	diff=4.82951e-13
  0.000000	  0.000000	diff=3.75894e-13
 -0.000025	 -0.000025	diff=2.27635e-11
  0.000009	  0.000009	diff=1.11344e-10
 -0.000000	 -0.000000	diff=7.04633e-13
 -0.000000	 -0.000000	diff=7.91751e-15
 -0.000000	 -0.000000	diff=1.60735e-12
 -0.000000	 -0.000000	diff=2.05998e-12
 -0.000000	 -0.000000	diff=1.34315e-12
 -0.000000	 -0.000000	diff=5.18732e-13
  0.000036	  0.000036	diff=4.92781e-11
 -0.000019	 -0.000019	diff=3.30245e-10
 -0.000000	 -0.000000	diff=5.25377e-13
 -0.000000	 -0.000000	diff=4.63394e-13
 -0.000000	 -0.000000	diff=1.3933e-13
 -0.000000	 -0.000000	diff=1.07395e-12
 -0.000000	 -0.000000	diff=1.94008e-13
 -0.000000	 -0.000000	diff=1.21374e-13
  0.000000	  0.000000	diff=2.17339e-10
 -0.000000	 -0.000000	diff=4.86716e-13
  0.000000	  0.000000	diff=6.48939e-13
  0.000000	  0.000000	diff=4.74796e-13
  0.000000	  0.000000	diff=4.56167e-14
  0.000000	  0.000000	diff=1.74365e-14
  0.000000	  0.000000	diff=1.52424e-12
  0.000000	  0.000000	diff=6.82098e-13
 -0.000000	 -0.000000	diff=9.03721e-13
  0.000000	  0.000000	diff=4.54071e-10
  local_diff=1.20202e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.05154e-13
  0.000000	  0.000000	diff=7.75175e-13
 -0.000000	 -0.000000	diff=1.18732e-12
  0.000000	  0.000000	diff=9.61231e-13
 -0.000000	 -0.000000	diff=1.09592e-13
 -0.000000	 -0.000000	diff=4.73532e-13
  0.000054	  0.000054	diff=2.06052e-12
  0.000007	  0.000007	diff=5.09863e-12
  0.000000	  0.000000	diff=1.48051e-13
 -0.000000	 -0.000000	diff=7.16361e-13
  0.000000	  0.000000	diff=6.06142e-13
 -0.000000	 -0.000000	diff=4.59178e-14
  0.000000	  0.000000	diff=6.18243e-14
  0.000000	  0.000000	diff=1.10579e-13
 -0.000063	 -0.000063	diff=1.8987e-12
 -0.000007	 -0.000007	diff=5.17418e-12
 -0.000000	 -0.000000	diff=2.07554e-13
  0.000000	  0.000000	diff=1.09812e-12
 -0.000000	 -0.000000	diff=4.49226e-13
  0.000000	  0.000000	diff=1.68916e-13
 -0.000000	 -0.000000	diff=4.13639e-13
 -0.000000	 -0.000000	diff=1.3831e-12
  0.000001	  0.000001	diff=7.87117e-10
  0.000000	  0.000000	diff=2.91306e-13
  0.000000	  0.000000	diff=4.01329e-13
 -0.000000	 -0.000000	diff=1.39308e-13
  0.000000	  0.000000	diff=4.08373e-13
 -0.000000	 -0.000000	diff=2.69857e-13
  0.000000	  0.000000	diff=4.03687e-13
  0.000000	  0.000000	diff=1.95762e-13
 -0.000001	 -0.000001	diff=1.25012e-12
 -0.000000	 -0.000000	diff=1.75835e-10
  local_diff=9.89566e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.07141e-13
 -0.000000	 -0.000000	diff=6.33061e-13
 -0.000000	 -0.000000	diff=2.33595e-13
  0.000000	  0.000000	diff=5.29131e-13
 -0.000000	 -0.000000	diff=3.2592e-14
 -0.000000	 -0.000000	diff=6.72325e-13
  0.000008	  0.000008	diff=3.95013e-11
  0.000009	  0.000009	diff=5.22489e-11
  0.000000	  0.000000	diff=6.11253e-13
  0.000000	  0.000000	diff=2.59648e-13
  0.000000	  0.000000	diff=2.03292e-12
 -0.000000	 -0.000000	diff=2.64183e-12
  0.000000	  0.000000	diff=1.09764e-12
  0.000000	  0.000000	diff=7.40188e-14
 -0.000011	 -0.000011	diff=1.48201e-10
 -0.000016	 -0.000016	diff=1.51705e-11
  0.000000	 -0.000000	diff=6.37402e-13
  0.000000	 -0.000000	diff=3.46665e-13
  0.000000	  0.000000	diff=2.96721e-13
  0.000000	 -0.000000	diff=7.41248e-14
  0.000000	  0.000000	diff=6.17827e-14
  0.000000	 -0.000000	diff=3.75456e-13
 -0.000000	 -0.000000	diff=1.22097e-12
 -0.000000	 -0.000000	diff=2.38259e-14
  0.000000	  0.000000	diff=2.28325e-13
  0.000000	  0.000000	diff=6.53023e-14
  0.000000	 -0.000000	diff=4.62652e-13
  0.000000	  0.000000	diff=2.62421e-15
  0.000000	 -0.000000	diff=2.22004e-13
  0.000000	  0.000000	diff=6.22389e-14
  0.000000	  0.000000	diff=2.81633e-13
  0.000000	  0.000000	diff=5.13549e-14
  0.000000	  0.000000	diff=1.74128e-13
  0.000000	  0.000000	diff=1.60533e-12
  0.000000	  0.000000	diff=7.60329e-14
 -0.000000	 -0.000000	diff=1.45607e-13
  0.000000	  0.000000	diff=1.17786e-13
 -0.000000	 -0.000000	diff=5.06536e-13
 -0.000001	 -0.000001	diff=1.43254e-09
 -0.000001	 -0.000001	diff=1.31919e-11
 -0.000000	 -0.000000	diff=5.9177e-14
 -0.000000	 -0.000000	diff=1.11185e-12
 -0.000000	 -0.000000	diff=7.52937e-13
  0.000000	  0.000000	diff=2.4228e-13
 -0.000000	 -0.000000	diff=3.49152e-13
  0.000000	  0.000000	diff=5.56639e-14
  0.000000	  0.000000	diff=9.28521e-12
  0.000001	  0.000001	diff=1.3003e-09
  local_diff=3.02938e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=2.91971e-13
 -0.000000	 -0.000000	diff=1.33976e-14
 -0.000000	 -0.000000	diff=2.18641e-13
  0.000000	  0.000000	diff=2.91638e-13
 -0.000000	 -0.000000	diff=1.11047e-12
  0.000000	  0.000000	diff=9.05238e-13
  0.000032	  0.000032	diff=2.59906e-11
  0.000012	  0.000012	diff=9.03224e-12
  0.000000	  0.000000	diff=2.15891e-14
  0.000000	  0.000000	diff=5.59855e-13
 -0.000000	 -0.000000	diff=8.84211e-13
  0.000000	  0.000000	diff=9.21977e-13
 -0.000000	 -0.000000	diff=3.06835e-13
  0.000000	  0.000000	diff=7.55161e-13
 -0.000005	 -0.000005	diff=5.7663e-11
 -0.000002	 -0.000002	diff=8.51174e-12
  0.000000	  0.000000	diff=1.09311e-12
 -0.000000	 -0.000000	diff=7.83741e-13
 -0.000000	 -0.000000	diff=6.64998e-13
  0.000000	  0.000000	diff=6.07613e-13
 -0.000000	 -0.000000	diff=4.27229e-13
  0.000000	  0.000000	diff=7.69347e-14
  0.000001	  0.000001	diff=4.32908e-09
  0.000001	  0.000001	diff=1.55997e-11
 -0.000000	 -0.000000	diff=8.71241e-14
  0.000000	  0.000000	diff=9.24445e-13
  0.000000	  0.000000	diff=9.04911e-14
 -0.000000	 -0.000000	diff=1.48912e-13
  0.000000	  0.000000	diff=3.5693e-13
 -0.000000	 -0.000000	diff=6.43968e-13
 -0.000002	 -0.000002	diff=7.73204e-12
 -0.000001	 -0.000001	diff=2.08762e-09
  local_diff=6.55342e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000015	  0.000015	diff=7.6491e-09
 -0.000030	 -0.000030	diff=2.91299e-08
  0.000013	  0.000013	diff=7.01695e-09
 -0.000025	 -0.000025	diff=2.5038e-08
  local_diff=6.8834e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.12553e-09
 -0.000003	 -0.000003	diff=2.18158e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.72523e-09
 -0.000002	 -0.000002	diff=1.66217e-09
 -0.000017	 -0.000017	diff=4.92814e-09
 -0.000001	 -0.000001	diff=1.11168e-09
  local_diff=1.57343e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=6.57311e-21
  0.000000	 -0.000000	diff=8.778e-21
  0.000000	 -0.000000	diff=1.59249e-20
  0.000000	  0.000000	diff=2.13569e-20
  local_diff=5.26329e-20
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.15715e-12
  0.000000	  0.000000	diff=2.99665e-13
  local_diff=1.45681e-12
# W_h, [2 4]
  0.000055	  0.000055	diff=1.17061e-12
  0.000018	  0.000018	diff=1.11021e-12
 -0.000070	 -0.000070	diff=1.44588e-12
 -0.000023	 -0.000023	diff=3.90783e-13
  0.000013	  0.000013	diff=2.33728e-11
  0.000006	  0.000006	diff=6.03221e-13
 -0.000026	 -0.000026	diff=2.08052e-10
 -0.000014	 -0.000014	diff=1.85702e-11
  local_diff=2.54715e-10
# W_soft, [5 2]
 -0.000031	 -0.000031	diff=7.89404e-13
 -0.000031	 -0.000031	diff=1.9265e-13
  0.000013	  0.000013	diff=3.27006e-13
  0.000003	  0.000003	diff=1.33653e-12
  0.000045	  0.000045	diff=2.32821e-12
  0.000032	  0.000032	diff=1.68971e-12
  0.000032	  0.000032	diff=8.80479e-13
 -0.000010	 -0.000010	diff=7.8026e-13
 -0.000005	 -0.000005	diff=1.10666e-12
 -0.000048	 -0.000048	diff=1.22723e-12
  local_diff=1.06581e-11
# Num params=188, abs_diff=9.66095e-08
Elapsed time is 3.376751 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.60557e-13
 -0.000000	 -0.000000	diff=5.78044e-13
 -0.000000	 -0.000000	diff=2.31868e-14
 -0.000000	 -0.000000	diff=1.64814e-13
 -0.000000	 -0.000000	diff=4.13025e-13
 -0.000000	 -0.000000	diff=4.42293e-13
  0.000013	  0.000013	diff=3.17301e-11
 -0.000006	 -0.000006	diff=3.49601e-11
  0.000000	  0.000000	diff=4.49785e-13
  0.000000	  0.000000	diff=8.73767e-13
  0.000000	  0.000000	diff=1.00828e-12
  0.000000	  0.000000	diff=4.86557e-13
  0.000000	  0.000000	diff=4.91473e-13
  0.000000	  0.000000	diff=9.5888e-13
 -0.000018	 -0.000018	diff=6.10279e-11
  0.000008	  0.000008	diff=6.28679e-11
  0.000000	  0.000000	diff=4.05284e-13
  0.000000	  0.000000	diff=1.82388e-13
  0.000000	  0.000000	diff=4.61292e-14
  0.000000	  0.000000	diff=1.94461e-12
  0.000000	  0.000000	diff=7.50015e-13
  0.000000	  0.000000	diff=2.59819e-13
 -0.000000	 -0.000000	diff=3.38107e-10
  0.000000	  0.000000	diff=2.47014e-12
 -0.000000	 -0.000000	diff=6.7856e-13
 -0.000000	 -0.000000	diff=6.30242e-13
 -0.000000	 -0.000000	diff=3.40388e-13
 -0.000000	 -0.000000	diff=6.76052e-13
 -0.000000	 -0.000000	diff=8.53616e-13
 -0.000000	 -0.000000	diff=2.08641e-12
  0.000000	  0.000000	diff=2.29076e-12
 -0.000000	 -0.000000	diff=3.90708e-10
  local_diff=9.39065e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.24442e-12
  0.000000	  0.000000	diff=5.27933e-13
  0.000000	  0.000000	diff=5.9028e-13
  0.000000	  0.000000	diff=3.59815e-13
 -0.000000	 -0.000000	diff=8.00213e-13
  0.000000	  0.000000	diff=1.10262e-13
  0.000000	  0.000000	diff=6.80401e-13
  0.000019	  0.000019	diff=7.16988e-12
  0.000000	  0.000000	diff=1.07024e-12
 -0.000000	 -0.000000	diff=2.27434e-13
 -0.000000	 -0.000000	diff=6.45977e-13
 -0.000000	 -0.000000	diff=9.39988e-13
  0.000000	  0.000000	diff=6.63911e-13
 -0.000000	 -0.000000	diff=7.95301e-14
 -0.000000	 -0.000000	diff=1.753e-13
 -0.000015	 -0.000015	diff=4.61095e-12
  0.000000	  0.000000	diff=7.13919e-13
  0.000000	  0.000000	diff=1.03232e-12
  0.000000	  0.000000	diff=9.13495e-14
  0.000000	  0.000000	diff=7.27698e-13
 -0.000000	 -0.000000	diff=4.7435e-13
  0.000000	  0.000000	diff=1.13132e-12
 -0.000000	 -0.000000	diff=1.46549e-10
  0.000000	  0.000000	diff=4.93979e-13
 -0.000000	 -0.000000	diff=1.31943e-12
 -0.000000	 -0.000000	diff=2.2932e-13
 -0.000000	 -0.000000	diff=2.35053e-13
 -0.000000	 -0.000000	diff=5.57059e-13
  0.000000	  0.000000	diff=2.00917e-14
 -0.000000	 -0.000000	diff=1.44443e-12
  0.000000	  0.000000	diff=6.47009e-13
 -0.000000	 -0.000000	diff=4.35944e-10
  local_diff=6.11507e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.86054e-13
  0.000000	  0.000000	diff=8.26832e-13
  0.000000	  0.000000	diff=3.05324e-13
 -0.000000	 -0.000000	diff=2.10201e-12
  0.000000	  0.000000	diff=3.99371e-13
  0.000000	  0.000000	diff=4.47034e-13
 -0.000003	 -0.000003	diff=5.00287e-12
  0.000003	  0.000003	diff=2.9584e-11
 -0.000000	 -0.000000	diff=8.29785e-13
 -0.000000	 -0.000000	diff=1.09087e-12
 -0.000000	 -0.000000	diff=5.31008e-13
  0.000000	  0.000000	diff=9.67107e-13
 -0.000000	 -0.000000	diff=7.7682e-13
 -0.000000	 -0.000000	diff=6.55117e-13
  0.000004	  0.000004	diff=2.01023e-11
  0.000011	  0.000011	diff=7.04818e-11
  0.000000	 -0.000000	diff=2.82443e-14
  0.000000	  0.000000	diff=1.30963e-12
  0.000000	 -0.000000	diff=5.9413e-14
  0.000000	  0.000000	diff=1.20271e-13
  0.000000	 -0.000000	diff=7.23425e-14
  0.000000	  0.000000	diff=7.96051e-13
 -0.000000	 -0.000000	diff=4.9941e-13
  0.000000	  0.000000	diff=1.69689e-13
  0.000000	 -0.000000	diff=2.21165e-14
  0.000000	  0.000000	diff=4.89509e-13
  0.000000	  0.000000	diff=2.98225e-15
  0.000000	  0.000000	diff=2.52024e-13
  0.000000	 -0.000000	diff=1.41061e-14
  0.000000	  0.000000	diff=1.71977e-13
 -0.000000	 -0.000000	diff=3.63166e-13
  0.000000	  0.000000	diff=1.2231e-13
 -0.000000	 -0.000000	diff=8.32989e-13
 -0.000000	 -0.000000	diff=5.92837e-13
 -0.000000	 -0.000000	diff=7.00569e-13
 -0.000000	 -0.000000	diff=9.66746e-13
 -0.000000	 -0.000000	diff=8.8758e-13
 -0.000000	 -0.000000	diff=2.16702e-13
  0.000000	  0.000000	diff=2.94531e-11
  0.000000	  0.000000	diff=3.30044e-11
  0.000000	  0.000000	diff=3.9757e-13
  0.000000	  0.000000	diff=1.36908e-12
  0.000000	  0.000000	diff=1.24659e-13
 -0.000000	 -0.000000	diff=8.54581e-13
  0.000000	  0.000000	diff=1.10731e-12
 -0.000000	 -0.000000	diff=5.29005e-13
  0.000000	  0.000000	diff=1.03824e-12
  0.000000	  0.000000	diff=1.33875e-10
  local_diff=3.44932e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=4.55507e-14
 -0.000000	 -0.000000	diff=4.26938e-13
  0.000000	  0.000000	diff=1.31729e-13
 -0.000000	 -0.000000	diff=8.86884e-13
  0.000000	  0.000000	diff=7.2498e-13
 -0.000000	 -0.000000	diff=4.42138e-13
 -0.000004	 -0.000004	diff=3.81446e-12
  0.000003	  0.000003	diff=2.04006e-11
 -0.000000	 -0.000000	diff=4.91758e-13
 -0.000000	 -0.000000	diff=1.25192e-12
  0.000000	  0.000000	diff=4.00009e-13
 -0.000000	 -0.000000	diff=4.62291e-13
  0.000000	  0.000000	diff=1.0158e-12
 -0.000000	 -0.000000	diff=6.20582e-13
 -0.000005	 -0.000005	diff=4.87279e-12
  0.000005	  0.000005	diff=9.2696e-11
 -0.000000	 -0.000000	diff=1.27953e-13
 -0.000000	 -0.000000	diff=2.76009e-13
  0.000000	  0.000000	diff=9.58184e-13
 -0.000000	 -0.000000	diff=2.27017e-13
  0.000000	  0.000000	diff=6.29444e-13
 -0.000000	 -0.000000	diff=2.12268e-14
 -0.000000	 -0.000000	diff=4.39495e-10
 -0.000000	 -0.000000	diff=4.31185e-11
  0.000000	  0.000000	diff=1.27092e-13
  0.000000	  0.000000	diff=5.22898e-13
 -0.000000	 -0.000000	diff=1.33716e-12
  0.000000	  0.000000	diff=5.21897e-13
 -0.000000	 -0.000000	diff=3.65975e-13
  0.000000	  0.000000	diff=7.18225e-13
  0.000000	  0.000000	diff=7.93862e-13
  0.000001	  0.000001	diff=3.06994e-09
  local_diff=3.68787e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=3.72139e-09
  0.000019	  0.000019	diff=1.29776e-08
 -0.000003	 -0.000003	diff=1.40922e-09
  0.000007	  0.000007	diff=4.87999e-09
  local_diff=2.29882e-08
# W_emb_tgt, [2 5]
  0.000043	  0.000043	diff=1.0427e-08
 -0.000002	 -0.000002	diff=4.71038e-11
  0.000022	  0.000022	diff=1.9864e-09
  0.000001	  0.000001	diff=1.08106e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=1.93714e-09
 -0.000001	 -0.000001	diff=1.97633e-10
  0.000005	  0.000005	diff=7.03937e-10
 -0.000001	 -0.000001	diff=2.61479e-10
  local_diff=1.66417e-08
# W_src_char{1}, [8 4]
  0.000000	  0.000000	diff=1.24168e-14
 -0.000000	 -0.000000	diff=3.33279e-13
 -0.000000	 -0.000000	diff=2.48599e-13
 -0.000000	 -0.000000	diff=1.31212e-13
 -0.000000	 -0.000000	diff=3.93011e-14
 -0.000000	 -0.000000	diff=3.23338e-14
  0.000000	  0.000000	diff=1.81803e-14
 -0.000000	 -0.000000	diff=1.00184e-12
  0.000000	  0.000000	diff=3.39374e-13
 -0.000000	 -0.000000	diff=1.19653e-12
 -0.000000	 -0.000000	diff=2.54806e-13
 -0.000000	 -0.000000	diff=2.78136e-13
 -0.000000	 -0.000000	diff=1.86233e-13
 -0.000000	 -0.000000	diff=2.0665e-13
  0.000000	  0.000000	diff=1.9281e-13
 -0.000000	 -0.000000	diff=1.1639e-12
  0.000000	  0.000000	diff=1.64744e-14
  0.000000	 -0.000000	diff=2.39582e-13
  0.000000	 -0.000000	diff=4.93065e-14
  0.000000	  0.000000	diff=6.49396e-14
  0.000000	 -0.000000	diff=1.90795e-16
  0.000000	  0.000000	diff=4.17049e-16
  0.000000	  0.000000	diff=1.62118e-12
 -0.000000	 -0.000000	diff=2.52363e-13
  0.000000	  0.000000	diff=5.11912e-14
  0.000000	  0.000000	diff=4.56891e-14
  0.000000	 -0.000000	diff=1.8174e-14
  0.000000	  0.000000	diff=2.83916e-13
  0.000000	  0.000000	diff=2.70723e-14
  0.000000	  0.000000	diff=4.98155e-13
 -0.000000	 -0.000000	diff=4.08891e-13
  0.000000	  0.000000	diff=4.09555e-13
  local_diff=9.6227e-12
# W_emb_src_char, [2 5]
 -0.000000	 -0.000000	diff=5.77477e-13
 -0.000000	 -0.000000	diff=2.04483e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.19485e-13
 -0.000000	 -0.000000	diff=3.61756e-12
 -0.000000	 -0.000000	diff=1.7946e-13
 -0.000000	 -0.000000	diff=8.61358e-12
 -0.000000	 -0.000000	diff=2.59966e-12
 -0.000000	 -0.000000	diff=1.85477e-11
  local_diff=3.68997e-11
# W_h, [2 4]
 -0.000023	 -0.000023	diff=1.1396e-12
 -0.000005	 -0.000005	diff=2.82263e-13
  0.000028	  0.000028	diff=4.9873e-13
  0.000006	  0.000006	diff=1.01272e-12
 -0.000005	 -0.000005	diff=8.52292e-12
 -0.000002	 -0.000002	diff=3.80653e-12
  0.000004	  0.000004	diff=1.3285e-10
 -0.000006	 -0.000006	diff=3.96172e-11
  local_diff=1.8773e-10
# W_soft, [5 2]
  0.000006	  0.000006	diff=1.49084e-12
 -0.000011	 -0.000011	diff=1.10314e-12
  0.000014	  0.000014	diff=4.53532e-13
  0.000001	  0.000001	diff=4.4389e-13
 -0.000011	 -0.000011	diff=2.57835e-13
  0.000000	  0.000000	diff=5.62906e-14
 -0.000003	 -0.000003	diff=9.266e-14
  0.000006	  0.000006	diff=2.37615e-12
  0.000000	  0.000000	diff=1.24845e-13
 -0.000003	 -0.000003	diff=3.04805e-13
  local_diff=6.70399e-12
# Num params=224, abs_diff=4.54543e-08
Elapsed time is 4.563571 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.83649e-10
  0.000000	  0.000000	diff=8.49391e-10
  0.000000	  0.000000	diff=3.03275e-11
  0.000000	  0.000000	diff=5.1363e-10
 -0.000000	 -0.000000	diff=5.43173e-10
  0.000000	  0.000000	diff=5.62881e-10
  0.000014	  0.000012	diff=1.81161e-06
 -0.000005	 -0.000006	diff=7.40244e-07
  0.000000	  0.000000	diff=2.81907e-09
  0.000000	  0.000000	diff=1.73278e-09
 -0.000000	  0.000000	diff=2.92809e-10
 -0.000000	 -0.000000	diff=5.60734e-10
  0.000000	  0.000000	diff=2.31893e-09
  0.000000	  0.000000	diff=1.03168e-09
  0.000013	  0.000011	diff=1.96436e-06
 -0.000004	 -0.000005	diff=9.88368e-07
 -0.000000	 -0.000000	diff=9.21063e-12
 -0.000000	 -0.000000	diff=6.95873e-12
  0.000000	  0.000000	diff=1.55445e-11
  0.000000	  0.000000	diff=6.8979e-12
  0.000000	  0.000000	diff=8.17969e-12
  0.000000	  0.000000	diff=3.65599e-12
  0.000000	  0.000000	diff=4.47584e-10
 -0.000000	 -0.000000	diff=6.42276e-09
  0.000000	  0.000000	diff=6.3052e-12
  0.000000	  0.000000	diff=1.41021e-11
 -0.000000	 -0.000000	diff=1.81507e-11
 -0.000000	 -0.000000	diff=1.59881e-11
 -0.000000	 -0.000000	diff=1.39657e-11
 -0.000000	 -0.000000	diff=1.25572e-11
 -0.000000	 -0.000000	diff=1.61508e-08
  0.000000	  0.000000	diff=1.606e-08
  local_diff=5.55523e-06
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.77993e-11
  0.000000	  0.000000	diff=2.61353e-11
  0.000000	 -0.000000	diff=7.5989e-13
  0.000000	  0.000000	diff=2.60475e-12
 -0.000000	 -0.000000	diff=4.18064e-13
  0.000000	  0.000000	diff=2.65587e-12
  0.000000	 -0.000000	diff=2.04978e-07
 -0.000002	 -0.000001	diff=3.39251e-07
 -0.000000	 -0.000000	diff=2.48555e-11
 -0.000000	 -0.000000	diff=4.13941e-11
 -0.000000	 -0.000000	diff=2.56929e-12
 -0.000000	 -0.000000	diff=9.91451e-12
  0.000000	  0.000000	diff=2.75162e-14
 -0.000000	 -0.000000	diff=7.24201e-13
 -0.000001	 -0.000000	diff=7.70375e-07
  0.000008	  0.000007	diff=9.90326e-07
  0.000000	 -0.000000	diff=2.88519e-12
  0.000000	  0.000000	diff=1.01033e-12
 -0.000000	  0.000000	diff=3.10722e-12
  0.000000	  0.000000	diff=9.98217e-14
  0.000000	 -0.000000	diff=2.50078e-13
  0.000000	  0.000000	diff=7.01035e-13
  0.000000	  0.000000	diff=1.26621e-09
 -0.000000	 -0.000000	diff=3.58418e-09
  0.000000	  0.000000	diff=3.96055e-14
 -0.000000	 -0.000000	diff=2.93134e-13
 -0.000000	 -0.000000	diff=2.51286e-12
 -0.000000	 -0.000000	diff=4.61623e-12
  0.000000	  0.000000	diff=2.52112e-12
 -0.000000	 -0.000000	diff=1.32045e-14
 -0.000000	 -0.000000	diff=3.46985e-09
  0.000000	  0.000000	diff=6.72214e-09
  local_diff=2.32012e-06
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.31876e-09
  0.000000	  0.000000	diff=7.0419e-09
 -0.000000	 -0.000000	diff=4.0295e-10
 -0.000000	 -0.000000	diff=1.6019e-09
  0.000000	  0.000000	diff=5.82535e-10
  0.000000	  0.000000	diff=5.04113e-09
 -0.000005	 -0.000004	diff=9.39379e-07
  0.000015	  0.000013	diff=2.03964e-06
 -0.000000	 -0.000000	diff=1.63132e-09
 -0.000000	 -0.000000	diff=9.92622e-09
  0.000000	 -0.000000	diff=5.96999e-10
  0.000000	 -0.000000	diff=4.04869e-09
 -0.000000	 -0.000000	diff=6.74665e-10
  0.000000	 -0.000000	diff=8.2761e-09
  0.000008	  0.000006	diff=2.0247e-06
 -0.000003	  0.000001	diff=4.21183e-06
  0.000000	 -0.000000	diff=2.89021e-12
 -0.000000	 -0.000000	diff=1.82998e-12
  0.000000	  0.000000	diff=5.00112e-14
  0.000000	  0.000000	diff=9.78353e-13
  0.000000	 -0.000000	diff=2.8749e-12
 -0.000000	 -0.000000	diff=2.62024e-12
 -0.000000	 -0.000000	diff=1.09131e-10
 -0.000000	 -0.000000	diff=2.04035e-10
  0.000000	  0.000000	diff=1.88831e-14
  0.000000	 -0.000000	diff=5.08192e-13
  0.000000	  0.000000	diff=4.07549e-14
  0.000000	  0.000000	diff=1.78537e-13
  0.000000	  0.000000	diff=4.06739e-14
  0.000000	 -0.000000	diff=3.56473e-13
  0.000000	  0.000000	diff=1.85095e-11
 -0.000000	 -0.000000	diff=3.14003e-11
  0.000000	  0.000000	diff=4.95726e-12
 -0.000000	 -0.000000	diff=3.97926e-11
 -0.000000	 -0.000000	diff=1.87836e-11
 -0.000000	 -0.000000	diff=2.47574e-11
 -0.000000	 -0.000000	diff=8.38583e-12
 -0.000000	 -0.000000	diff=3.3456e-11
  0.000000	  0.000000	diff=6.23442e-09
 -0.000000	 -0.000000	diff=2.01193e-08
  0.000000	  0.000000	diff=7.53867e-12
  0.000000	  0.000000	diff=5.8057e-11
  0.000000	  0.000000	diff=1.1018e-11
 -0.000000	 -0.000000	diff=1.65865e-10
  0.000000	  0.000000	diff=1.31225e-11
  0.000000	 -0.000000	diff=1.45358e-10
  0.000000	  0.000000	diff=6.08531e-08
  0.000000	  0.000000	diff=1.22113e-07
  local_diff=9.46692e-06
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=9.40292e-12
 -0.000000	 -0.000000	diff=6.83583e-12
  0.000000	  0.000000	diff=6.89038e-12
  0.000000	  0.000000	diff=1.34087e-11
  0.000000	  0.000000	diff=2.53568e-12
 -0.000000	 -0.000000	diff=4.53157e-12
 -0.000001	 -0.000002	diff=3.21744e-07
  0.000012	  0.000012	diff=4.47954e-07
 -0.000000	 -0.000000	diff=2.17402e-11
  0.000000	 -0.000000	diff=1.82242e-10
 -0.000000	 -0.000000	diff=3.2161e-11
 -0.000000	 -0.000000	diff=3.63583e-11
 -0.000000	 -0.000000	diff=2.02859e-11
 -0.000000	 -0.000000	diff=8.66399e-11
 -0.000011	 -0.000008	diff=2.63507e-06
  0.000014	  0.000011	diff=3.34346e-06
  0.000000	 -0.000000	diff=3.48645e-12
 -0.000000	 -0.000000	diff=2.19051e-12
  0.000000	  0.000000	diff=5.88629e-13
  0.000000	  0.000000	diff=2.13662e-13
  0.000000	  0.000000	diff=2.2069e-12
  0.000000	  0.000000	diff=1.76045e-12
  0.000000	  0.000000	diff=3.76354e-08
 -0.000000	 -0.000000	diff=5.12706e-08
  0.000000	  0.000000	diff=2.46658e-13
  0.000000	  0.000000	diff=5.63576e-13
 -0.000000	 -0.000000	diff=1.31659e-12
 -0.000000	 -0.000000	diff=2.48436e-12
  0.000000	 -0.000000	diff=4.75968e-14
 -0.000000	 -0.000000	diff=2.49466e-12
  0.000000	  0.000000	diff=2.95411e-08
  0.000000	  0.000000	diff=1.94989e-08
  local_diff=6.88661e-06
# W_emb_src, [2 5]
 -0.000017	 -0.000015	diff=2.03392e-06
  0.000030	  0.000029	diff=1.428e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=2.79106e-07
  0.000006	  0.000005	diff=2.81096e-07
 -0.000000	 -0.000000	diff=1.68823e-08
 -0.000000	 -0.000000	diff=6.84364e-09
  local_diff=4.04585e-06
# W_emb_tgt, [2 5]
  0.000036	  0.000037	diff=9.37952e-07
 -0.000002	 -0.000003	diff=5.97618e-07
  0.000008	  0.000010	diff=1.998e-06
  0.000003	  0.000002	diff=9.17891e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000008	  0.000009	diff=9.37788e-07
  0.000001	  0.000000	diff=5.8288e-07
  0.000014	  0.000015	diff=2.09019e-07
 -0.000000	 -0.000001	diff=6.21453e-08
  local_diff=6.2433e-06
# W_tgt_char{1}, [8 4]
 -0.000002	 -0.000002	diff=6.60019e-12
  0.000007	  0.000007	diff=1.54003e-11
  0.000002	  0.000002	diff=1.73749e-11
 -0.000003	 -0.000003	diff=7.06276e-11
  0.000000	  0.000000	diff=4.09938e-12
  0.000002	  0.000002	diff=1.75367e-11
 -0.005938	 -0.005938	diff=5.97259e-08
  0.016186	  0.016186	diff=9.23255e-08
 -0.000003	 -0.000003	diff=1.49245e-11
  0.000004	  0.000004	diff=3.29863e-11
  0.000002	  0.000002	diff=2.06272e-11
 -0.000003	 -0.000003	diff=8.52296e-11
 -0.000000	 -0.000000	diff=1.1725e-11
 -0.000003	 -0.000003	diff=3.33655e-11
 -0.006353	 -0.006353	diff=9.92002e-08
  0.020978	  0.020978	diff=1.70073e-07
 -0.000000	 -0.000000	diff=1.35064e-12
  0.000000	  0.000000	diff=1.27914e-12
  0.000000	  0.000000	diff=6.43635e-13
 -0.000000	 -0.000000	diff=6.46744e-14
  0.000000	  0.000000	diff=2.18908e-12
  0.000000	  0.000000	diff=8.66416e-13
 -0.000031	 -0.000031	diff=7.29194e-09
  0.000049	  0.000049	diff=4.06847e-12
 -0.000000	 -0.000000	diff=2.18814e-12
  0.000000	  0.000000	diff=6.90943e-14
  0.000000	  0.000000	diff=1.03235e-12
 -0.000000	 -0.000000	diff=1.89125e-12
  0.000000	  0.000000	diff=1.08743e-12
  0.000000	  0.000000	diff=5.56054e-13
 -0.000038	 -0.000038	diff=1.08522e-12
  0.000052	  0.000052	diff=3.10696e-08
  local_diff=4.60035e-07
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.003823	  0.003823	diff=2.28749e-07
 -0.010427	 -0.010423	diff=3.94901e-06
  0.004257	  0.004256	diff=7.36723e-07
 -0.001886	 -0.001888	diff=1.46221e-06
  0.002599	  0.002599	diff=8.2249e-07
  0.004582	  0.004578	diff=4.55576e-06
  local_diff=1.17549e-05
# W_h, [2 4]
  0.000002	  0.000002	diff=7.44124e-08
  0.000000	  0.000000	diff=8.32383e-08
 -0.000003	 -0.000003	diff=1.15538e-07
 -0.000001	 -0.000001	diff=1.24265e-07
 -0.000005	 -0.000005	diff=4.38147e-08
 -0.000005	 -0.000005	diff=4.96119e-08
 -0.000005	 -0.000004	diff=2.14492e-07
 -0.000009	 -0.000009	diff=2.04525e-07
  local_diff=9.09897e-07
# W_soft, [5 2]
 -0.000016	 -0.000016	diff=4.37937e-13
  0.000012	  0.000012	diff=7.48704e-13
  0.000018	  0.000018	diff=1.26094e-13
 -0.000016	 -0.000016	diff=3.94884e-14
  0.000002	  0.000002	diff=1.10004e-12
 -0.000006	 -0.000006	diff=2.30782e-13
  0.000007	  0.000007	diff=1.01095e-12
 -0.000000	 -0.000000	diff=3.7718e-13
 -0.000003	 -0.000003	diff=1.21102e-13
  0.000002	  0.000002	diff=5.24088e-13
  local_diff=4.71636e-12
# W_soft_char, [5 2]
 -0.001129	 -0.001129	diff=1.43133e-09
  0.000573	  0.000573	diff=1.43051e-09
 -0.001127	 -0.001127	diff=1.43468e-09
  0.000950	  0.000950	diff=1.43304e-09
  0.000733	  0.000733	diff=1.43271e-09
  0.000187	  0.000187	diff=3.75942e-09
 -0.005202	 -0.005202	diff=3.75954e-09
  0.000188	  0.000188	diff=3.75731e-09
  0.002895	  0.002895	diff=3.75888e-09
  0.001931	  0.001931	diff=3.75729e-09
  local_diff=2.59547e-08
# Num params=234, abs_diff=4.76689e-05
Elapsed time is 5.497585 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=3.90979e-09
 -0.000000	 -0.000000	diff=2.45739e-10
 -0.000000	 -0.000000	diff=4.54131e-10
 -0.000000	 -0.000000	diff=3.6041e-11
 -0.000000	 -0.000000	diff=3.36034e-09
 -0.000000	 -0.000000	diff=3.69933e-10
  0.000021	  0.000020	diff=1.35891e-06
 -0.000007	 -0.000007	diff=1.02434e-07
  0.000000	  0.000000	diff=5.56948e-09
  0.000000	  0.000000	diff=3.22896e-10
  0.000000	  0.000000	diff=6.58389e-10
  0.000000	  0.000000	diff=5.42237e-11
  0.000000	  0.000000	diff=5.08737e-09
  0.000000	  0.000000	diff=5.78056e-10
 -0.000028	 -0.000026	diff=1.94162e-06
  0.000010	  0.000010	diff=1.32345e-07
  0.000000	  0.000000	diff=3.4719e-11
  0.000000	  0.000000	diff=2.57717e-12
  0.000000	  0.000000	diff=5.71975e-11
  0.000000	  0.000000	diff=1.01752e-11
  0.000000	  0.000000	diff=1.04587e-10
 -0.000000	 -0.000000	diff=9.79738e-12
 -0.000000	 -0.000000	diff=4.24463e-08
  0.000000	  0.000000	diff=6.00502e-09
 -0.000000	 -0.000000	diff=2.10995e-11
 -0.000000	 -0.000000	diff=1.39041e-12
 -0.000000	 -0.000000	diff=4.50867e-11
 -0.000000	 -0.000000	diff=3.09923e-12
 -0.000000	 -0.000000	diff=8.07428e-11
  0.000000	  0.000000	diff=1.70118e-12
  0.000000	  0.000000	diff=3.45752e-08
 -0.000000	 -0.000000	diff=5.49884e-09
  local_diff=3.64485e-06
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.62596e-10
 -0.000000	 -0.000000	diff=2.22272e-11
  0.000000	  0.000000	diff=8.66951e-11
 -0.000000	 -0.000000	diff=4.47581e-12
  0.000000	  0.000000	diff=3.94536e-11
  0.000000	  0.000000	diff=9.67208e-12
 -0.000040	 -0.000038	diff=2.2597e-06
 -0.000010	 -0.000010	diff=3.24388e-07
 -0.000000	 -0.000000	diff=1.29009e-10
  0.000000	  0.000000	diff=1.62714e-11
 -0.000000	 -0.000000	diff=6.50679e-11
  0.000000	  0.000000	diff=1.2307e-12
 -0.000000	 -0.000000	diff=3.0834e-11
 -0.000000	 -0.000000	diff=9.96467e-13
  0.000033	  0.000031	diff=1.80398e-06
  0.000008	  0.000008	diff=2.75556e-07
  0.000000	  0.000000	diff=5.58801e-12
 -0.000000	 -0.000000	diff=2.80088e-12
  0.000000	  0.000000	diff=4.00948e-12
 -0.000000	 -0.000000	diff=2.60734e-12
  0.000000	  0.000000	diff=2.93098e-12
  0.000000	  0.000000	diff=1.43694e-14
 -0.000001	 -0.000001	diff=7.19321e-08
 -0.000000	 -0.000000	diff=4.78913e-09
 -0.000000	 -0.000000	diff=9.24373e-13
  0.000000	  0.000000	diff=3.14388e-12
 -0.000000	 -0.000000	diff=1.24311e-12
  0.000000	  0.000000	diff=5.47278e-13
 -0.000000	 -0.000000	diff=7.46557e-13
 -0.000000	 -0.000000	diff=1.19036e-12
  0.000001	  0.000001	diff=8.55277e-08
  0.000000	  0.000000	diff=4.96482e-09
  local_diff=4.83144e-06
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.25365e-09
  0.000000	  0.000000	diff=1.27675e-09
 -0.000000	 -0.000000	diff=1.07057e-09
 -0.000000	 -0.000000	diff=5.43022e-10
 -0.000000	 -0.000000	diff=2.27001e-09
  0.000000	  0.000000	diff=3.62704e-10
  0.000004	  0.000005	diff=1.07413e-06
 -0.000005	 -0.000005	diff=3.0776e-08
 -0.000000	  0.000000	diff=2.93615e-09
 -0.000000	 -0.000000	diff=1.66073e-09
  0.000000	  0.000000	diff=1.88214e-09
  0.000000	  0.000000	diff=7.37301e-10
  0.000000	  0.000000	diff=3.23061e-09
 -0.000000	 -0.000000	diff=3.86826e-10
 -0.000002	 -0.000004	diff=2.3607e-06
  0.000028	  0.000028	diff=3.21989e-07
  0.000000	 -0.000000	diff=2.27057e-13
  0.000000	 -0.000000	diff=2.68625e-12
  0.000000	  0.000000	diff=1.02357e-13
  0.000000	  0.000000	diff=2.45165e-12
  0.000000	 -0.000000	diff=1.00645e-13
  0.000000	 -0.000000	diff=1.76631e-12
 -0.000000	 -0.000000	diff=1.73651e-10
 -0.000000	 -0.000000	diff=7.25802e-11
  0.000000	  0.000000	diff=2.75822e-12
  0.000000	  0.000000	diff=3.96787e-13
  0.000000	  0.000000	diff=6.6443e-14
  0.000000	  0.000000	diff=6.98792e-13
  0.000000	  0.000000	diff=1.3297e-13
  0.000000	  0.000000	diff=1.86438e-12
  0.000000	  0.000000	diff=1.68749e-11
  0.000000	  0.000000	diff=4.57616e-12
  0.000000	  0.000000	diff=1.13214e-11
 -0.000000	 -0.000000	diff=1.52513e-11
 -0.000000	 -0.000000	diff=5.54797e-11
  0.000000	  0.000000	diff=3.64251e-12
  0.000000	  0.000000	diff=4.14651e-11
 -0.000000	 -0.000000	diff=5.28722e-12
  0.000000	  0.000000	diff=4.8908e-08
  0.000001	  0.000001	diff=1.55208e-08
  0.000000	 -0.000000	diff=3.10711e-11
  0.000000	  0.000000	diff=1.87363e-11
 -0.000000	 -0.000000	diff=1.89122e-11
 -0.000000	 -0.000000	diff=1.74441e-11
 -0.000000	 -0.000000	diff=3.14828e-11
  0.000000	  0.000000	diff=4.53359e-13
 -0.000000	 -0.000000	diff=5.07046e-09
 -0.000000	 -0.000000	diff=2.91527e-09
  local_diff=3.87915e-06
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=4.4224e-11
 -0.000000	 -0.000000	diff=1.37248e-11
 -0.000000	 -0.000000	diff=8.98445e-11
 -0.000000	 -0.000000	diff=1.86437e-11
 -0.000000	 -0.000000	diff=2.65933e-11
 -0.000000	 -0.000000	diff=1.45696e-11
  0.000005	  0.000007	diff=1.69295e-06
 -0.000007	 -0.000007	diff=2.65998e-07
 -0.000000	 -0.000000	diff=3.69062e-11
 -0.000000	 -0.000000	diff=1.77732e-11
 -0.000000	 -0.000000	diff=5.14949e-11
 -0.000000	 -0.000000	diff=2.16582e-12
 -0.000000	 -0.000000	diff=4.64936e-12
 -0.000000	 -0.000000	diff=1.20717e-11
  0.000009	  0.000010	diff=1.20618e-06
  0.000001	  0.000001	diff=4.70577e-08
  0.000000	  0.000000	diff=2.02722e-12
 -0.000000	 -0.000000	diff=1.01736e-12
  0.000000	 -0.000000	diff=6.67178e-12
 -0.000000	 -0.000000	diff=4.5918e-12
  0.000000	 -0.000000	diff=5.17925e-12
 -0.000000	 -0.000000	diff=1.25519e-12
 -0.000000	  0.000000	diff=1.13197e-07
 -0.000001	 -0.000001	diff=2.13071e-08
  0.000000	 -0.000000	diff=5.85387e-12
  0.000000	  0.000000	diff=1.75852e-12
  0.000000	  0.000000	diff=2.85091e-12
  0.000000	  0.000000	diff=1.34322e-12
  0.000000	  0.000000	diff=1.7202e-13
  0.000000	  0.000000	diff=1.58306e-12
  0.000000	 -0.000000	diff=1.96792e-07
  0.000001	  0.000001	diff=3.58997e-08
  local_diff=3.57975e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000016	 -0.000015	diff=7.95049e-07
  0.000026	  0.000024	diff=1.1938e-06
 -0.000006	 -0.000005	diff=6.14892e-07
  0.000013	  0.000013	diff=8.34151e-07
  local_diff=3.43789e-06
# W_emb_tgt, [2 5]
  0.000075	  0.000073	diff=1.56511e-06
  0.000003	  0.000002	diff=1.15895e-06
  0.000039	  0.000037	diff=2.14418e-06
 -0.000001	 -0.000002	diff=1.13881e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=2.59749e-07
  0.000001	  0.000000	diff=2.10888e-07
  0.000009	  0.000009	diff=6.10621e-09
  0.000000	  0.000000	diff=6.49855e-08
  local_diff=6.54878e-06
# W_src_char{1}, [8 4]
  0.000000	  0.000000	diff=1.47172e-12
 -0.000000	 -0.000000	diff=4.60699e-12
 -0.000000	 -0.000000	diff=2.01804e-13
 -0.000000	 -0.000000	diff=1.69796e-13
 -0.000000	 -0.000000	diff=1.32266e-12
 -0.000000	 -0.000000	diff=1.50187e-12
  0.000000	  0.000000	diff=5.31036e-09
 -0.000000	 -0.000000	diff=6.71865e-09
  0.000000	  0.000000	diff=1.11118e-12
 -0.000000	 -0.000000	diff=4.01252e-12
 -0.000000	 -0.000000	diff=1.57509e-12
 -0.000000	 -0.000000	diff=2.34498e-12
 -0.000000	 -0.000000	diff=9.27825e-13
 -0.000000	 -0.000000	diff=1.22823e-12
  0.000000	  0.000000	diff=5.08851e-09
 -0.000000	 -0.000000	diff=6.44033e-09
  0.000000	  0.000000	diff=3.16039e-14
  0.000000	 -0.000000	diff=2.74777e-13
  0.000000	 -0.000000	diff=9.3464e-14
  0.000000	  0.000000	diff=7.44991e-14
  0.000000	  0.000000	diff=1.9431e-16
  0.000000	  0.000000	diff=2.50961e-16
  0.000000	  0.000000	diff=3.32039e-11
 -0.000000	 -0.000000	diff=3.41901e-11
  0.000000	  0.000000	diff=9.772e-14
  0.000000	  0.000000	diff=2.79012e-12
  0.000000	 -0.000000	diff=3.45801e-14
  0.000000	  0.000000	diff=3.25445e-13
  0.000000	  0.000000	diff=5.18511e-14
  0.000000	  0.000000	diff=5.7068e-13
 -0.000000	 -0.000000	diff=2.60146e-11
  0.000000	  0.000000	diff=3.85282e-11
  local_diff=2.37146e-08
# W_emb_src_char, [2 5]
 -0.000000	 -0.000000	diff=4.89161e-10
 -0.000000	 -0.000000	diff=8.98023e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=9.95209e-10
 -0.000000	 -0.000000	diff=1.58819e-10
 -0.000000	 -0.000000	diff=2.04498e-09
 -0.000000	 -0.000000	diff=3.23601e-10
 -0.000000	 -0.000000	diff=4.17519e-09
 -0.000000	 -0.000000	diff=5.80741e-10
  local_diff=8.8575e-09
# W_tgt_char{1}, [8 4]
 -0.000024	 -0.000024	diff=4.9197e-11
 -0.000007	 -0.000007	diff=1.78727e-11
 -0.000004	 -0.000004	diff=1.85113e-10
  0.000004	  0.000004	diff=5.54022e-11
 -0.000022	 -0.000022	diff=6.88949e-11
 -0.000004	 -0.000004	diff=2.73188e-12
 -0.011820	 -0.011820	diff=2.06184e-07
 -0.024556	 -0.024557	diff=2.87069e-07
 -0.000026	 -0.000026	diff=2.31465e-11
  0.000048	  0.000048	diff=3.73783e-11
  0.000005	  0.000005	diff=1.18556e-10
 -0.000002	 -0.000002	diff=3.26084e-11
 -0.000021	 -0.000021	diff=5.22395e-11
  0.000040	  0.000040	diff=1.01436e-11
 -0.012326	 -0.012327	diff=1.83632e-07
 -0.023641	 -0.023641	diff=1.81279e-07
 -0.000000	 -0.000000	diff=4.12787e-12
 -0.000000	 -0.000000	diff=3.06627e-12
 -0.000000	 -0.000000	diff=1.53726e-12
  0.000000	  0.000000	diff=1.25817e-12
 -0.000000	 -0.000000	diff=1.20153e-12
 -0.000000	 -0.000000	diff=2.3378e-12
 -0.000079	 -0.000079	diff=6.05457e-08
 -0.000137	 -0.000137	diff=6.92322e-11
 -0.000000	 -0.000000	diff=1.25546e-12
  0.000000	  0.000000	diff=2.97718e-12
 -0.000000	 -0.000000	diff=5.51246e-13
 -0.000000	 -0.000000	diff=7.16827e-13
 -0.000000	 -0.000000	diff=1.90157e-12
  0.000000	  0.000000	diff=2.71624e-12
 -0.000009	 -0.000009	diff=1.08161e-11
  0.000054	  0.000054	diff=1.66161e-08
  local_diff=9.36082e-07
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.033756	 -0.033759	diff=3.15127e-06
  0.018262	  0.018260	diff=1.95885e-06
 -0.005600	 -0.005603	diff=2.39103e-06
  0.005519	  0.005518	diff=7.64725e-07
 -0.006428	 -0.006428	diff=4.28793e-07
  0.001247	  0.001247	diff=1.20494e-07
  local_diff=8.81517e-06
# W_h, [2 4]
  0.000012	  0.000011	diff=5.89372e-07
 -0.000061	 -0.000061	diff=8.50591e-08
 -0.000014	 -0.000014	diff=7.14991e-07
  0.000074	  0.000074	diff=1.03195e-07
  0.000003	  0.000003	diff=1.12619e-07
 -0.000015	 -0.000015	diff=1.27609e-08
 -0.000021	 -0.000021	diff=3.31836e-07
  0.000026	  0.000026	diff=9.48718e-09
  local_diff=1.95932e-06
# W_soft, [5 2]
 -0.000040	 -0.000040	diff=1.78878e-12
  0.000016	  0.000016	diff=3.70782e-12
  0.000000	  0.000000	diff=2.8217e-12
  0.000008	  0.000008	diff=1.16816e-12
  0.000016	  0.000016	diff=1.88223e-12
  0.000002	  0.000002	diff=2.62878e-13
 -0.000005	 -0.000005	diff=3.43362e-12
  0.000012	  0.000012	diff=1.44756e-12
 -0.000005	 -0.000005	diff=3.81068e-12
 -0.000005	 -0.000005	diff=2.41394e-12
  local_diff=2.27374e-11
# W_soft_char, [5 2]
  0.012074	  0.012074	diff=8.03961e-08
 -0.022563	 -0.022563	diff=8.03993e-08
  0.012074	  0.012074	diff=8.03859e-08
 -0.002094	 -0.002094	diff=8.0407e-08
  0.000510	  0.000510	diff=8.03912e-08
  0.003798	  0.003798	diff=3.44061e-08
 -0.020952	 -0.020952	diff=3.44048e-08
  0.003802	  0.003802	diff=3.44002e-08
  0.012030	  0.012030	diff=3.44095e-08
  0.001322	  0.001322	diff=3.44018e-08
  local_diff=5.74002e-07
# Num params=276, abs_diff=3.8239e-05
Elapsed time is 7.342504 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.10293e-12
  0.000000	  0.000000	diff=2.83639e-12
  0.000000	  0.000000	diff=5.59099e-12
  0.000000	  0.000000	diff=9.84713e-14
 -0.000000	 -0.000000	diff=4.19509e-12
 -0.000000	 -0.000000	diff=2.08473e-12
  0.000004	  0.000004	diff=5.74619e-11
  0.000001	  0.000001	diff=2.59866e-11
  0.000000	  0.000000	diff=3.82341e-12
 -0.000000	 -0.000000	diff=1.91647e-12
 -0.000000	 -0.000000	diff=3.57997e-12
 -0.000000	 -0.000000	diff=5.25739e-12
  0.000000	  0.000000	diff=3.50219e-12
  0.000000	  0.000000	diff=2.78278e-12
 -0.000005	 -0.000005	diff=1.82388e-12
 -0.000001	 -0.000001	diff=6.09888e-11
 -0.000000	 -0.000000	diff=3.56353e-14
 -0.000000	 -0.000000	diff=2.10947e-12
  0.000000	  0.000000	diff=4.63973e-13
 -0.000000	 -0.000000	diff=1.18547e-12
  0.000000	  0.000000	diff=4.44187e-14
  0.000000	  0.000000	diff=4.8214e-15
 -0.000000	 -0.000000	diff=2.30798e-10
 -0.000000	 -0.000000	diff=3.13467e-13
  0.000000	  0.000000	diff=4.33006e-13
  0.000000	  0.000000	diff=2.01011e-13
 -0.000000	 -0.000000	diff=2.21028e-12
  0.000000	  0.000000	diff=5.05771e-13
 -0.000000	 -0.000000	diff=4.79502e-12
 -0.000000	 -0.000000	diff=3.15087e-13
  0.000000	  0.000000	diff=3.1615e-12
  0.000000	  0.000000	diff=5.50317e-11
  local_diff=4.84641e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=3.07527e-13
  0.000000	  0.000000	diff=2.24171e-12
 -0.000000	 -0.000000	diff=2.32306e-13
  0.000000	  0.000000	diff=9.01521e-13
 -0.000000	 -0.000000	diff=2.24611e-13
  0.000000	  0.000000	diff=1.36585e-12
  0.000002	  0.000002	diff=1.51098e-12
  0.000006	  0.000006	diff=6.63498e-11
  0.000000	  0.000000	diff=4.39036e-12
 -0.000000	 -0.000000	diff=1.98627e-12
  0.000000	  0.000000	diff=3.5919e-12
 -0.000000	 -0.000000	diff=2.55868e-12
  0.000000	  0.000000	diff=3.85275e-13
 -0.000000	 -0.000000	diff=1.07901e-12
 -0.000002	 -0.000002	diff=5.05416e-12
 -0.000005	 -0.000005	diff=5.08511e-11
 -0.000000	 -0.000000	diff=3.81182e-13
  0.000000	  0.000000	diff=1.09348e-12
  0.000000	 -0.000000	diff=1.41289e-12
  0.000000	  0.000000	diff=2.71067e-13
  0.000000	 -0.000000	diff=1.0981e-12
  0.000000	  0.000000	diff=5.0966e-13
  0.000000	  0.000000	diff=7.36905e-11
  0.000000	  0.000000	diff=2.46655e-12
  0.000000	  0.000000	diff=2.00388e-12
 -0.000000	 -0.000000	diff=5.05719e-13
  0.000000	  0.000000	diff=1.10121e-12
 -0.000000	 -0.000000	diff=1.54135e-12
  0.000000	  0.000000	diff=1.45164e-12
  0.000000	 -0.000000	diff=2.82575e-12
 -0.000000	 -0.000000	diff=7.72428e-13
 -0.000000	 -0.000000	diff=3.23693e-10
  local_diff=5.57849e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=3.05573e-12
 -0.000000	 -0.000000	diff=1.33102e-12
 -0.000000	 -0.000000	diff=3.66799e-12
  0.000000	  0.000000	diff=3.54322e-12
 -0.000000	 -0.000000	diff=1.73305e-12
 -0.000000	 -0.000000	diff=1.0041e-12
  0.000001	  0.000001	diff=6.43079e-11
  0.000013	  0.000013	diff=2.72332e-10
  0.000000	  0.000000	diff=2.04298e-12
  0.000000	  0.000000	diff=3.19508e-12
  0.000000	  0.000000	diff=3.21553e-12
 -0.000000	 -0.000000	diff=3.99513e-13
  0.000000	  0.000000	diff=1.34486e-12
  0.000000	  0.000000	diff=1.90011e-12
 -0.000004	 -0.000004	diff=1.38037e-10
 -0.000023	 -0.000023	diff=2.74427e-10
  0.000000	  0.000000	diff=1.19975e-13
  0.000000	  0.000000	diff=7.04692e-15
  0.000000	 -0.000000	diff=1.0995e-13
  0.000000	 -0.000000	diff=2.2784e-13
  0.000000	 -0.000000	diff=2.42466e-14
  0.000000	 -0.000000	diff=1.79606e-13
  0.000000	  0.000000	diff=2.94634e-14
  0.000000	  0.000000	diff=2.0132e-12
  0.000000	  0.000000	diff=1.57018e-13
  0.000000	  0.000000	diff=2.95524e-13
  0.000000	 -0.000000	diff=1.52901e-13
  0.000000	 -0.000000	diff=3.92816e-13
  0.000000	 -0.000000	diff=3.60107e-14
  0.000000	 -0.000000	diff=4.90468e-14
  0.000000	  0.000000	diff=1.85499e-12
  0.000000	  0.000000	diff=3.41254e-12
  0.000000	  0.000000	diff=7.26299e-13
  0.000000	  0.000000	diff=2.72732e-13
  0.000000	  0.000000	diff=2.04021e-12
 -0.000000	 -0.000000	diff=2.36902e-12
  0.000000	  0.000000	diff=4.59702e-12
  0.000000	  0.000000	diff=2.25259e-14
 -0.000000	 -0.000000	diff=1.29052e-10
 -0.000000	 -0.000000	diff=4.47912e-12
 -0.000000	 -0.000000	diff=3.94876e-13
 -0.000000	 -0.000000	diff=3.47145e-12
 -0.000000	 -0.000000	diff=5.88106e-13
  0.000000	  0.000000	diff=3.21192e-13
 -0.000000	 -0.000000	diff=3.44822e-12
 -0.000000	 -0.000000	diff=2.15795e-13
  0.000000	  0.000000	diff=1.20337e-12
 -0.000000	 -0.000000	diff=1.67124e-10
  local_diff=1.10492e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.24444e-12
  0.000000	  0.000000	diff=5.05064e-13
 -0.000000	 -0.000000	diff=1.53549e-12
  0.000000	  0.000000	diff=2.20472e-12
 -0.000000	 -0.000000	diff=1.54258e-12
  0.000000	  0.000000	diff=1.86906e-12
  0.000002	  0.000002	diff=8.46159e-12
  0.000006	  0.000006	diff=4.68906e-11
  0.000000	  0.000000	diff=7.47623e-13
  0.000000	  0.000000	diff=8.7641e-13
 -0.000000	 -0.000000	diff=3.37841e-13
  0.000000	  0.000000	diff=4.03047e-13
  0.000000	  0.000000	diff=3.62964e-13
  0.000000	  0.000000	diff=2.16212e-12
  0.000001	  0.000001	diff=5.72036e-11
  0.000010	  0.000010	diff=4.74569e-11
  0.000000	  0.000000	diff=2.19941e-12
  0.000000	  0.000000	diff=4.33367e-13
 -0.000000	 -0.000000	diff=3.983e-13
  0.000000	  0.000000	diff=1.21444e-13
 -0.000000	 -0.000000	diff=9.58274e-13
  0.000000	  0.000000	diff=1.70746e-12
  0.000000	  0.000000	diff=2.7828e-10
  0.000000	  0.000000	diff=8.2688e-12
 -0.000000	 -0.000000	diff=1.36316e-12
 -0.000000	 -0.000000	diff=6.0233e-13
  0.000000	  0.000000	diff=7.94014e-13
 -0.000000	 -0.000000	diff=3.05576e-13
  0.000000	  0.000000	diff=1.39163e-12
 -0.000000	 -0.000000	diff=5.52824e-14
 -0.000000	 -0.000000	diff=6.53971e-12
 -0.000000	 -0.000000	diff=1.33614e-11
  local_diff=4.93584e-10
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=9.22804e-10
  0.000002	  0.000002	diff=1.92138e-09
 -0.000001	 -0.000001	diff=3.67669e-10
  0.000002	  0.000002	diff=8.30652e-10
  local_diff=4.0425e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=3.87401e-09
 -0.000003	 -0.000003	diff=1.97242e-09
 -0.000025	 -0.000025	diff=7.03738e-10
 -0.000001	 -0.000001	diff=8.29376e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.24858e-10
 -0.000001	 -0.000001	diff=3.45644e-10
 -0.000004	 -0.000004	diff=6.81319e-11
 -0.000000	 -0.000000	diff=2.49316e-10
  local_diff=8.86749e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=5.38436e-14
  0.000000	  0.000000	diff=9.85716e-16
  0.000000	 -0.000000	diff=1.37216e-14
  0.000000	  0.000000	diff=6.43135e-16
  0.000000	 -0.000000	diff=3.73891e-14
  0.000000	  0.000000	diff=9.1238e-16
 -0.000000	 -0.000000	diff=2.04507e-12
  0.000000	  0.000000	diff=2.0624e-12
  0.000000	  0.000000	diff=3.23594e-14
  0.000000	 -0.000000	diff=1.55935e-15
  0.000000	 -0.000000	diff=9.35345e-15
  0.000000	  0.000000	diff=3.27068e-16
  0.000000	  0.000000	diff=1.10789e-14
  0.000000	 -0.000000	diff=5.96253e-16
  0.000000	  0.000000	diff=1.4409e-12
  0.000000	 -0.000000	diff=1.71574e-13
  0.000000	 -0.000000	diff=1.28113e-16
  0.000000	 -0.000000	diff=1.39116e-17
  0.000000	 -0.000000	diff=9.02504e-16
  0.000000	  0.000000	diff=2.29602e-17
  0.000000	 -0.000000	diff=5.03716e-16
  0.000000	  0.000000	diff=3.70737e-18
  0.000000	 -0.000000	diff=4.08306e-13
  0.000000	  0.000000	diff=3.63036e-14
  0.000000	 -0.000000	diff=1.02851e-16
  0.000000	 -0.000000	diff=4.84922e-18
  0.000000	 -0.000000	diff=2.5179e-16
  0.000000	  0.000000	diff=8.21988e-18
  0.000000	 -0.000000	diff=1.74355e-16
  0.000000	  0.000000	diff=1.6094e-18
  0.000000	 -0.000000	diff=1.05029e-13
  0.000000	  0.000000	diff=9.52571e-15
  local_diff=6.444e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.1899e-16
  0.000000	 -0.000000	diff=5.78474e-16
  0.000000	 -0.000000	diff=6.58523e-17
  0.000000	 -0.000000	diff=1.39826e-16
  0.000000	 -0.000000	diff=1.71625e-16
  0.000000	 -0.000000	diff=2.56721e-16
  0.000000	  0.000000	diff=1.15228e-13
  0.000000	  0.000000	diff=2.82659e-13
  0.000000	 -0.000000	diff=9.60996e-17
  0.000000	 -0.000000	diff=1.55561e-16
  0.000000	  0.000000	diff=7.61314e-18
  0.000000	  0.000000	diff=2.76505e-18
  0.000000	 -0.000000	diff=2.66463e-17
  0.000000	 -0.000000	diff=4.88769e-17
  0.000000	  0.000000	diff=1.84554e-12
  0.000000	  0.000000	diff=5.29096e-13
  0.000000	  0.000000	diff=2.13354e-18
  0.000000	  0.000000	diff=1.51704e-18
  0.000000	  0.000000	diff=5.33696e-18
  0.000000	  0.000000	diff=7.26518e-18
  0.000000	  0.000000	diff=3.67964e-18
  0.000000	  0.000000	diff=4.00294e-18
  0.000000	 -0.000000	diff=1.70128e-13
  0.000000	 -0.000000	diff=9.35883e-14
  0.000000	  0.000000	diff=7.48914e-18
  0.000000	  0.000000	diff=6.16036e-18
  0.000000	  0.000000	diff=1.32107e-17
  0.000000	  0.000000	diff=1.85814e-17
  0.000000	  0.000000	diff=9.72424e-18
  0.000000	  0.000000	diff=1.08292e-17
  0.000000	 -0.000000	diff=4.36632e-13
  0.000000	 -0.000000	diff=2.39901e-13
  local_diff=3.71483e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=3.22562e-18
  0.000000	  0.000000	diff=1.15308e-17
  0.000000	 -0.000000	diff=2.72822e-18
  0.000000	  0.000000	diff=8.44268e-18
  0.000000	 -0.000000	diff=3.33173e-19
  0.000000	  0.000000	diff=1.4188e-18
  0.000000	  0.000000	diff=2.07228e-12
 -0.000000	 -0.000000	diff=8.12207e-13
  0.000000	 -0.000000	diff=8.03546e-18
  0.000000	  0.000000	diff=2.77761e-17
  0.000000	 -0.000000	diff=5.40019e-18
  0.000000	  0.000000	diff=1.64066e-17
  0.000000	 -0.000000	diff=9.13975e-20
  0.000000	  0.000000	diff=5.004e-19
  0.000000	  0.000000	diff=7.49398e-13
 -0.000000	 -0.000000	diff=2.19051e-12
  0.000000	 -0.000000	diff=5.50081e-20
  0.000000	  0.000000	diff=2.56388e-19
  0.000000	 -0.000000	diff=1.56022e-19
  0.000000	  0.000000	diff=5.1524e-19
  0.000000	 -0.000000	diff=8.09561e-20
  0.000000	  0.000000	diff=3.32924e-19
  0.000000	  0.000000	diff=1.77495e-13
  0.000000	 -0.000000	diff=1.79072e-13
  0.000000	 -0.000000	diff=1.58033e-19
  0.000000	  0.000000	diff=7.69012e-19
  0.000000	 -0.000000	diff=5.10852e-19
  0.000000	  0.000000	diff=1.69419e-18
  0.000000	 -0.000000	diff=2.76467e-19
  0.000000	  0.000000	diff=1.13644e-18
  0.000000	  0.000000	diff=5.77729e-13
  0.000000	 -0.000000	diff=5.82765e-13
  local_diff=7.34154e-12
# W_emb_src_char, [2 5]
 -0.000000	 -0.000000	diff=1.06077e-12
  0.000000	  0.000000	diff=6.1686e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.8046e-12
  0.000000	  0.000000	diff=1.5894e-12
 -0.000000	 -0.000000	diff=1.77268e-12
  0.000000	  0.000000	diff=1.60033e-12
 -0.000000	 -0.000000	diff=2.0557e-13
  0.000000	  0.000000	diff=1.25861e-13
  local_diff=8.77606e-12
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=3.23633e-12
  0.000000	  0.000000	diff=2.11688e-12
 -0.000000	 -0.000000	diff=1.98661e-12
  0.000000	  0.000000	diff=1.45188e-12
 -0.000000	 -0.000000	diff=7.58512e-13
  0.000000	  0.000000	diff=1.33703e-12
 -0.000002	 -0.000002	diff=1.48506e-11
 -0.000002	 -0.000002	diff=1.03461e-11
  0.000000	  0.000000	diff=1.75106e-12
 -0.000000	 -0.000000	diff=3.20775e-12
  0.000000	  0.000000	diff=3.04384e-12
  0.000000	  0.000000	diff=3.42805e-12
  0.000000	  0.000000	diff=2.20701e-12
 -0.000000	 -0.000000	diff=3.56889e-12
  0.000001	  0.000001	diff=2.92566e-11
  0.000001	  0.000001	diff=3.18289e-11
 -0.000000	 -0.000000	diff=2.38644e-12
  0.000000	  0.000000	diff=2.51861e-12
  0.000000	 -0.000000	diff=2.65826e-12
  0.000000	  0.000000	diff=3.71151e-12
 -0.000000	 -0.000000	diff=1.60428e-12
  0.000000	  0.000000	diff=7.77767e-13
 -0.000000	 -0.000000	diff=7.35649e-13
 -0.000000	 -0.000000	diff=1.69962e-12
  0.000000	  0.000000	diff=3.04388e-12
 -0.000000	 -0.000000	diff=1.08442e-12
  0.000000	  0.000000	diff=2.05405e-12
  0.000000	 -0.000000	diff=3.18903e-12
  0.000000	  0.000000	diff=5.0838e-13
 -0.000000	 -0.000000	diff=1.02423e-12
  0.000000	  0.000000	diff=1.65799e-12
  0.000000	  0.000000	diff=5.85963e-12
  local_diff=1.4889e-10
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=1.83997e-12
  0.000000	  0.000000	diff=3.8468e-12
  0.000000	 -0.000000	diff=3.20313e-12
  0.000000	  0.000000	diff=9.51134e-13
 -0.000000	 -0.000000	diff=6.15149e-13
  0.000000	  0.000000	diff=2.86127e-12
 -0.000000	 -0.000000	diff=3.50264e-12
 -0.000001	 -0.000001	diff=3.27994e-12
  0.000000	  0.000000	diff=1.48698e-12
 -0.000000	 -0.000000	diff=3.63997e-12
  0.000000	  0.000000	diff=2.44912e-12
  0.000000	 -0.000000	diff=2.77703e-12
  0.000000	  0.000000	diff=3.31313e-13
 -0.000000	 -0.000000	diff=1.9394e-12
  0.000001	  0.000001	diff=2.12208e-12
  0.000002	  0.000002	diff=3.55688e-12
  0.000000	 -0.000000	diff=1.93708e-13
  0.000000	  0.000000	diff=2.62565e-12
  0.000000	 -0.000000	diff=5.01805e-14
  0.000000	  0.000000	diff=2.81476e-12
  0.000000	 -0.000000	diff=2.32255e-13
  0.000000	  0.000000	diff=2.59865e-12
 -0.000000	 -0.000000	diff=1.20063e-12
 -0.000000	 -0.000000	diff=3.48933e-12
  0.000000	  0.000000	diff=2.75798e-12
  0.000000	 -0.000000	diff=5.54062e-14
  0.000000	  0.000000	diff=2.16452e-14
  0.000000	 -0.000000	diff=2.06745e-14
  0.000000	  0.000000	diff=2.74538e-12
  0.000000	 -0.000000	diff=7.57663e-14
  0.000000	  0.000000	diff=2.52806e-12
  0.000000	  0.000000	diff=4.05553e-12
  local_diff=6.38684e-11
# W_tgt_char{3}, [8 4]
  0.000000	 -0.000000	diff=3.34625e-14
  0.000000	  0.000000	diff=2.31275e-12
  0.000000	 -0.000000	diff=6.25619e-14
  0.000000	  0.000000	diff=2.83368e-12
  0.000000	 -0.000000	diff=7.02525e-14
  0.000000	  0.000000	diff=2.30728e-12
  0.000000	  0.000000	diff=2.87919e-12
  0.000002	  0.000002	diff=1.97419e-12
  0.000000	 -0.000000	diff=9.2886e-14
  0.000000	 -0.000000	diff=6.97557e-13
  0.000000	  0.000000	diff=2.78727e-12
  0.000000	 -0.000000	diff=2.54714e-15
  0.000000	 -0.000000	diff=2.88627e-12
  0.000000	 -0.000000	diff=6.95151e-13
 -0.000000	 -0.000000	diff=1.50889e-12
 -0.000002	 -0.000002	diff=1.27763e-12
  0.000000	  0.000000	diff=5.73891e-16
  0.000000	 -0.000000	diff=1.07882e-15
  0.000000	  0.000000	diff=3.4979e-16
  0.000000	  0.000000	diff=1.98306e-17
  0.000000	  0.000000	diff=8.69525e-16
  0.000000	 -0.000000	diff=1.0691e-15
 -0.000000	 -0.000000	diff=1.43964e-12
 -0.000000	 -0.000000	diff=3.32551e-12
  0.000000	 -0.000000	diff=2.10846e-16
  0.000000	 -0.000000	diff=9.04748e-18
  0.000000	  0.000000	diff=6.36783e-18
  0.000000	  0.000000	diff=3.69296e-17
  0.000000	 -0.000000	diff=1.61885e-16
  0.000000	  0.000000	diff=3.58903e-17
  0.000000	  0.000000	diff=1.42424e-12
  0.000000	  0.000000	diff=2.29505e-12
  local_diff=3.09104e-11
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=1.40042e-10
 -0.000002	 -0.000002	diff=8.70642e-11
 -0.000000	 -0.000000	diff=4.40673e-11
 -0.000000	 -0.000000	diff=1.3754e-10
 -0.000000	 -0.000000	diff=2.69456e-11
 -0.000000	 -0.000000	diff=1.38285e-10
  local_diff=5.73944e-10
# W_h, [2 4]
 -0.000002	 -0.000002	diff=3.45492e-12
  0.000006	  0.000006	diff=1.27132e-11
  0.000003	  0.000003	diff=5.40559e-13
 -0.000008	 -0.000008	diff=1.55284e-11
 -0.000003	 -0.000003	diff=3.87786e-12
  0.000002	  0.000002	diff=4.08302e-12
 -0.000011	 -0.000011	diff=4.4776e-11
 -0.000009	 -0.000009	diff=2.83684e-11
  local_diff=1.13342e-10
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=1.87225e-12
  0.000011	  0.000011	diff=9.51116e-13
 -0.000003	 -0.000003	diff=1.3071e-12
  0.000008	  0.000008	diff=1.50943e-12
 -0.000002	 -0.000002	diff=1.8352e-13
 -0.000018	 -0.000018	diff=1.66651e-12
  0.000011	  0.000011	diff=1.11816e-12
  0.000005	  0.000005	diff=9.1092e-13
  0.000008	  0.000008	diff=1.27043e-12
 -0.000006	 -0.000006	diff=7.18324e-13
  local_diff=1.15078e-11
# W_soft_char, [5 2]
 -0.000000	 -0.000000	diff=1.18928e-12
  0.000001	  0.000001	diff=1.25503e-12
 -0.000000	 -0.000000	diff=2.06868e-12
 -0.000000	 -0.000000	diff=3.97035e-12
  0.000000	  0.000000	diff=2.88534e-12
  0.000001	  0.000001	diff=9.06749e-13
 -0.000002	 -0.000002	diff=2.70041e-12
  0.000001	  0.000001	diff=1.28257e-12
  0.000000	  0.000000	diff=1.55865e-12
  0.000001	  0.000001	diff=2.07813e-12
  local_diff=1.98952e-11
# Num params=404, abs_diff=1.65396e-08
Elapsed time is 13.137889 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=4.46509e-13
  0.000000	  0.000000	diff=4.35724e-13
  0.000000	  0.000000	diff=1.45148e-13
  0.000000	  0.000000	diff=1.75965e-13
  0.000000	  0.000000	diff=7.60271e-13
  0.000000	  0.000000	diff=8.83846e-13
 -0.000001	 -0.000001	diff=4.86573e-11
  0.000000	  0.000000	diff=3.60508e-12
 -0.000000	 -0.000000	diff=8.08474e-13
 -0.000000	 -0.000000	diff=7.86877e-13
 -0.000000	 -0.000000	diff=1.36953e-13
 -0.000000	 -0.000000	diff=4.4747e-13
 -0.000000	 -0.000000	diff=6.10479e-13
 -0.000000	 -0.000000	diff=2.44038e-13
  0.000002	  0.000002	diff=1.16805e-10
 -0.000001	 -0.000001	diff=9.49565e-12
 -0.000000	 -0.000000	diff=9.45184e-13
 -0.000000	 -0.000000	diff=4.52131e-13
 -0.000000	 -0.000000	diff=1.17982e-13
  0.000000	  0.000000	diff=2.21245e-13
 -0.000000	 -0.000000	diff=4.5841e-13
 -0.000000	 -0.000000	diff=8.68897e-14
  0.000000	  0.000000	diff=2.59092e-11
  0.000000	  0.000000	diff=1.10479e-13
  0.000000	  0.000000	diff=3.56411e-14
  0.000000	  0.000000	diff=1.89343e-13
  0.000000	  0.000000	diff=4.18388e-13
 -0.000000	 -0.000000	diff=4.58174e-13
  0.000000	  0.000000	diff=4.90892e-13
  0.000000	  0.000000	diff=5.71058e-13
 -0.000000	 -0.000000	diff=6.10682e-13
 -0.000000	 -0.000000	diff=6.4604e-11
  local_diff=2.80125e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.63259e-13
 -0.000000	 -0.000000	diff=5.14791e-13
  0.000000	  0.000000	diff=9.19392e-13
 -0.000000	 -0.000000	diff=6.84946e-13
  0.000000	  0.000000	diff=1.03435e-13
 -0.000000	 -0.000000	diff=8.3952e-13
 -0.000010	 -0.000010	diff=1.83405e-12
 -0.000013	 -0.000013	diff=1.36774e-12
 -0.000000	 -0.000000	diff=7.32726e-13
  0.000000	  0.000000	diff=1.01664e-12
 -0.000000	 -0.000000	diff=3.48862e-13
  0.000000	  0.000000	diff=3.95814e-14
 -0.000000	 -0.000000	diff=1.43534e-13
  0.000000	  0.000000	diff=4.5411e-13
  0.000015	  0.000015	diff=2.1647e-12
  0.000018	  0.000018	diff=2.54416e-12
  0.000000	  0.000000	diff=5.10334e-13
 -0.000000	 -0.000000	diff=3.80835e-13
  0.000000	  0.000000	diff=3.12706e-14
 -0.000000	 -0.000000	diff=1.00625e-12
  0.000000	  0.000000	diff=6.28795e-14
 -0.000000	 -0.000000	diff=4.1128e-13
 -0.000000	 -0.000000	diff=9.02792e-11
 -0.000000	 -0.000000	diff=2.84779e-14
 -0.000000	 -0.000000	diff=9.36563e-13
  0.000000	  0.000000	diff=2.98582e-13
 -0.000000	 -0.000000	diff=7.81643e-14
  0.000000	  0.000000	diff=1.9998e-13
 -0.000000	 -0.000000	diff=2.15275e-13
  0.000000	  0.000000	diff=4.37574e-13
  0.000000	  0.000000	diff=4.3549e-13
  0.000000	  0.000000	diff=2.44275e-10
  local_diff=3.53459e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.44212e-13
  0.000000	  0.000000	diff=7.49558e-14
 -0.000000	 -0.000000	diff=1.19632e-13
 -0.000000	 -0.000000	diff=1.13538e-12
 -0.000000	 -0.000000	diff=2.64033e-13
  0.000000	  0.000000	diff=2.7359e-13
 -0.000003	 -0.000003	diff=5.25594e-11
 -0.000002	 -0.000002	diff=1.10794e-10
  0.000000	  0.000000	diff=8.05333e-13
 -0.000000	 -0.000000	diff=3.18116e-13
  0.000000	  0.000000	diff=2.64289e-14
  0.000000	  0.000000	diff=8.14806e-13
  0.000000	  0.000000	diff=2.72172e-13
 -0.000000	 -0.000000	diff=1.83215e-13
 -0.000005	 -0.000005	diff=1.03115e-10
  0.000008	  0.000008	diff=1.51558e-10
  0.000000	  0.000000	diff=3.26776e-13
 -0.000000	 -0.000000	diff=1.10986e-12
 -0.000000	 -0.000000	diff=9.51082e-13
  0.000000	  0.000000	diff=1.17623e-13
  0.000000	 -0.000000	diff=5.38548e-14
  0.000000	 -0.000000	diff=3.37983e-13
  0.000000	  0.000000	diff=3.04413e-14
 -0.000000	 -0.000000	diff=2.13255e-13
 -0.000000	 -0.000000	diff=1.00253e-14
  0.000000	  0.000000	diff=1.89032e-13
  0.000000	  0.000000	diff=7.10797e-13
 -0.000000	 -0.000000	diff=9.34457e-13
  0.000000	 -0.000000	diff=6.23681e-15
  0.000000	  0.000000	diff=3.14757e-13
 -0.000000	 -0.000000	diff=4.67937e-13
  0.000000	  0.000000	diff=3.15672e-13
  0.000000	  0.000000	diff=3.25614e-13
 -0.000000	 -0.000000	diff=8.72547e-13
  0.000000	  0.000000	diff=7.47606e-13
  0.000000	  0.000000	diff=1.57463e-13
  0.000000	  0.000000	diff=2.91459e-13
 -0.000000	 -0.000000	diff=7.88246e-13
 -0.000000	 -0.000000	diff=7.86754e-10
  0.000000	  0.000000	diff=7.45391e-12
 -0.000000	 -0.000000	diff=8.62807e-15
  0.000000	  0.000000	diff=1.3588e-12
  0.000000	  0.000000	diff=1.93118e-13
 -0.000000	 -0.000000	diff=9.89728e-13
 -0.000000	 -0.000000	diff=6.54288e-13
  0.000000	  0.000000	diff=6.14489e-13
 -0.000000	 -0.000000	diff=5.47108e-12
 -0.000000	 -0.000000	diff=1.64625e-10
  local_diff=1.39985e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=9.64975e-13
 -0.000000	 -0.000000	diff=4.25872e-13
 -0.000000	 -0.000000	diff=8.35721e-13
 -0.000000	 -0.000000	diff=3.01075e-13
  0.000000	  0.000000	diff=1.29473e-12
 -0.000000	 -0.000000	diff=9.92891e-13
 -0.000005	 -0.000005	diff=3.08534e-11
 -0.000002	 -0.000002	diff=6.00572e-13
  0.000000	  0.000000	diff=1.22353e-12
 -0.000000	 -0.000000	diff=9.89772e-14
 -0.000000	 -0.000000	diff=6.12088e-13
 -0.000000	 -0.000000	diff=2.8145e-14
  0.000000	  0.000000	diff=9.41172e-14
 -0.000000	 -0.000000	diff=4.12793e-13
 -0.000012	 -0.000012	diff=1.9367e-10
  0.000003	  0.000003	diff=1.24764e-13
  0.000000	  0.000000	diff=4.87408e-13
 -0.000000	 -0.000000	diff=9.08164e-13
 -0.000000	 -0.000000	diff=3.85138e-13
 -0.000000	 -0.000000	diff=3.78459e-14
 -0.000000	 -0.000000	diff=1.36089e-12
 -0.000000	 -0.000000	diff=1.85933e-12
  0.000000	  0.000000	diff=1.0155e-09
 -0.000000	 -0.000000	diff=5.88225e-12
 -0.000000	 -0.000000	diff=1.18029e-12
  0.000000	  0.000000	diff=6.2494e-13
  0.000000	  0.000000	diff=8.19583e-13
  0.000000	  0.000000	diff=7.29399e-13
  0.000000	  0.000000	diff=1.4878e-13
  0.000000	  0.000000	diff=3.83824e-13
 -0.000001	 -0.000001	diff=5.8512e-12
  0.000000	  0.000000	diff=1.78209e-09
  local_diff=3.05078e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.13275e-10
 -0.000002	 -0.000002	diff=1.16071e-09
  0.000001	  0.000001	diff=2.30492e-10
 -0.000001	 -0.000001	diff=9.34176e-10
  local_diff=2.53865e-09
# W_emb_tgt, [2 5]
 -0.000001	 -0.000001	diff=2.17304e-08
 -0.000007	 -0.000007	diff=5.12803e-09
  0.000006	  0.000006	diff=6.37022e-09
 -0.000002	 -0.000002	diff=1.20568e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.02492e-09
 -0.000003	 -0.000003	diff=2.43704e-09
 -0.000001	 -0.000001	diff=3.43747e-09
 -0.000002	 -0.000002	diff=1.70219e-09
  local_diff=4.70359e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.99145e-13
  0.000000	 -0.000000	diff=1.37595e-15
  0.000000	 -0.000000	diff=1.30176e-13
  0.000000	 -0.000000	diff=8.5998e-16
 -0.000000	 -0.000000	diff=3.55716e-13
  0.000000	 -0.000000	diff=1.05839e-15
 -0.000000	 -0.000000	diff=3.7094e-13
  0.000000	 -0.000000	diff=1.95986e-13
  0.000000	  0.000000	diff=3.07161e-13
  0.000000	  0.000000	diff=1.72499e-15
 -0.000000	 -0.000000	diff=1.33221e-12
  0.000000	 -0.000000	diff=5.19593e-16
  0.000000	  0.000000	diff=1.04967e-13
  0.000000	  0.000000	diff=3.0353e-16
  0.000000	  0.000000	diff=6.51986e-13
 -0.000000	 -0.000000	diff=4.24241e-13
  0.000000	 -0.000000	diff=1.211e-15
  0.000000	  0.000000	diff=2.74309e-17
  0.000000	 -0.000000	diff=8.58426e-15
  0.000000	 -0.000000	diff=3.79203e-17
  0.000000	 -0.000000	diff=4.78261e-15
  0.000000	  0.000000	diff=2.84727e-18
 -0.000000	 -0.000000	diff=4.47134e-13
 -0.000000	 -0.000000	diff=6.5269e-13
  0.000000	 -0.000000	diff=9.74102e-16
  0.000000	  0.000000	diff=8.22653e-18
  0.000000	 -0.000000	diff=2.38864e-15
  0.000000	 -0.000000	diff=1.26664e-17
  0.000000	 -0.000000	diff=1.65158e-15
  0.000000	 -0.000000	diff=3.23226e-19
 -0.000000	 -0.000000	diff=8.62295e-14
 -0.000000	 -0.000000	diff=1.40793e-12
  local_diff=6.69204e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.57523e-15
  0.000000	 -0.000000	diff=7.60953e-15
  0.000000	 -0.000000	diff=7.20758e-16
  0.000000	 -0.000000	diff=1.83844e-15
  0.000000	 -0.000000	diff=1.87127e-15
  0.000000	 -0.000000	diff=3.36594e-15
  0.000000	  0.000000	diff=1.55643e-14
  0.000000	  0.000000	diff=2.21621e-14
  0.000000	 -0.000000	diff=1.04754e-15
  0.000000	 -0.000000	diff=2.04225e-15
  0.000000	  0.000000	diff=8.38955e-17
  0.000000	  0.000000	diff=3.88158e-17
  0.000000	 -0.000000	diff=2.89153e-16
  0.000000	 -0.000000	diff=6.38443e-16
  0.000000	  0.000000	diff=5.20828e-13
  0.000000	  0.000000	diff=1.48119e-13
  0.000000	  0.000000	diff=2.33712e-17
  0.000000	  0.000000	diff=1.99494e-17
  0.000000	  0.000000	diff=5.84009e-17
  0.000000	  0.000000	diff=9.58766e-17
  0.000000	  0.000000	diff=4.02773e-17
  0.000000	  0.000000	diff=5.26845e-17
 -0.000000	 -0.000000	diff=2.31596e-13
 -0.000000	 -0.000000	diff=7.97119e-14
  0.000000	  0.000000	diff=8.18262e-17
  0.000000	  0.000000	diff=8.09089e-17
  0.000000	  0.000000	diff=1.44363e-16
  0.000000	  0.000000	diff=2.44803e-16
  0.000000	  0.000000	diff=1.06253e-16
  0.000000	  0.000000	diff=1.42251e-16
 -0.000000	 -0.000000	diff=5.04376e-13
 -0.000000	 -0.000000	diff=8.19778e-13
  local_diff=2.36735e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=4.10524e-17
  0.000000	  0.000000	diff=1.6647e-16
  0.000000	 -0.000000	diff=3.47635e-17
  0.000000	  0.000000	diff=1.22262e-16
  0.000000	 -0.000000	diff=4.29812e-18
  0.000000	  0.000000	diff=1.97727e-17
  0.000000	  0.000000	diff=1.25329e-13
 -0.000000	 -0.000000	diff=6.63019e-13
  0.000000	 -0.000000	diff=1.02154e-16
  0.000000	  0.000000	diff=4.00343e-16
  0.000000	 -0.000000	diff=6.86668e-17
  0.000000	  0.000000	diff=2.36893e-16
  0.000000	 -0.000000	diff=1.23159e-18
  0.000000	  0.000000	diff=4.95062e-18
  0.000000	  0.000000	diff=5.06024e-13
 -0.000000	 -0.000000	diff=8.65536e-13
  0.000000	 -0.000000	diff=6.98365e-19
  0.000000	  0.000000	diff=3.69961e-18
  0.000000	 -0.000000	diff=1.98144e-18
  0.000000	  0.000000	diff=7.45493e-18
  0.000000	 -0.000000	diff=1.02816e-18
  0.000000	  0.000000	diff=4.80339e-18
  0.000000	  0.000000	diff=4.43993e-13
 -0.000000	 -0.000000	diff=9.55865e-14
  0.000000	 -0.000000	diff=2.00773e-18
  0.000000	  0.000000	diff=1.11081e-17
  0.000000	 -0.000000	diff=6.49292e-18
  0.000000	  0.000000	diff=2.45365e-17
  0.000000	 -0.000000	diff=3.51381e-18
  0.000000	  0.000000	diff=1.6419e-17
  0.000000	  0.000000	diff=9.18715e-13
 -0.000000	 -0.000000	diff=6.55853e-13
  local_diff=4.27534e-12
# W_emb_src_char, [2 5]
 -0.000000	 -0.000000	diff=1.25576e-13
  0.000000	  0.000000	diff=5.52247e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.2256e-12
  0.000000	  0.000000	diff=9.54593e-14
 -0.000000	 -0.000000	diff=1.43282e-12
  0.000000	  0.000000	diff=5.49997e-14
 -0.000000	 -0.000000	diff=2.3204e-14
  0.000000	  0.000000	diff=2.76002e-13
  local_diff=3.78591e-12
# W_h, [2 4]
  0.000003	  0.000003	diff=5.0292e-13
  0.000012	  0.000012	diff=4.51647e-13
 -0.000004	 -0.000004	diff=6.1743e-13
 -0.000016	 -0.000016	diff=4.27248e-13
  0.000003	  0.000003	diff=1.5776e-12
  0.000006	  0.000006	diff=8.89427e-12
  0.000008	  0.000008	diff=1.31204e-10
  0.000002	  0.000002	diff=1.54189e-10
  local_diff=2.97864e-10
# W_soft, [5 2]
 -0.000027	 -0.000027	diff=5.28921e-13
  0.000009	  0.000009	diff=2.28381e-13
  0.000004	  0.000004	diff=7.10431e-13
  0.000005	  0.000005	diff=6.7941e-13
  0.000009	  0.000009	diff=7.778e-14
  0.000026	  0.000026	diff=9.9703e-13
 -0.000009	 -0.000009	diff=9.24703e-15
 -0.000005	 -0.000005	diff=4.31918e-13
 -0.000005	 -0.000005	diff=5.46646e-13
 -0.000008	 -0.000008	diff=1.46787e-13
  local_diff=4.35655e-12
# Num params=288, abs_diff=5.49781e-08
Elapsed time is 6.534197 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.29995e-12
  0.000000	  0.000000	diff=8.47355e-12
  0.000000	  0.000000	diff=2.26827e-11
  0.000000	  0.000000	diff=2.93803e-12
 -0.000000	 -0.000000	diff=1.56794e-11
 -0.000000	 -0.000000	diff=1.91773e-11
  0.000004	  0.000004	diff=4.27189e-10
  0.000001	  0.000001	diff=3.50625e-10
  0.000000	  0.000000	diff=9.18974e-12
 -0.000000	 -0.000000	diff=1.334e-11
 -0.000000	 -0.000000	diff=1.77274e-11
 -0.000000	 -0.000000	diff=1.66297e-11
  0.000000	  0.000000	diff=1.18214e-11
  0.000000	  0.000000	diff=1.40915e-11
 -0.000005	 -0.000005	diff=2.98495e-10
 -0.000001	 -0.000001	diff=4.53548e-10
 -0.000000	 -0.000000	diff=3.84476e-14
 -0.000000	 -0.000000	diff=2.10963e-12
  0.000000	  0.000000	diff=3.30293e-12
 -0.000000	 -0.000000	diff=4.49914e-12
  0.000000	  0.000000	diff=2.88147e-12
  0.000000	  0.000000	diff=5.73353e-15
 -0.000000	 -0.000000	diff=2.16927e-10
 -0.000000	 -0.000000	diff=3.43469e-12
  0.000000	  0.000000	diff=2.41147e-12
  0.000000	  0.000000	diff=2.00889e-13
 -0.000000	 -0.000000	diff=1.92661e-11
  0.000000	  0.000000	diff=5.05559e-13
 -0.000000	 -0.000000	diff=1.04837e-11
 -0.000000	 -0.000000	diff=6.00019e-12
  0.000000	  0.000000	diff=1.80828e-11
  0.000000	  0.000000	diff=8.32383e-11
  local_diff=2.0563e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.99158e-12
  0.000000	  0.000000	diff=2.23373e-12
 -0.000000	 -0.000000	diff=5.45009e-12
  0.000000	  0.000000	diff=6.58338e-12
 -0.000000	 -0.000000	diff=5.45638e-12
  0.000000	  0.000000	diff=4.31644e-12
  0.000002	  0.000002	diff=1.53894e-11
  0.000006	  0.000006	diff=6.6023e-10
  0.000000	  0.000000	diff=1.0075e-11
 -0.000000	 -0.000000	diff=1.9046e-11
  0.000000	  0.000000	diff=9.27791e-12
 -0.000000	 -0.000000	diff=1.96137e-11
  0.000000	  0.000000	diff=2.45973e-12
 -0.000000	 -0.000000	diff=1.76146e-12
 -0.000002	 -0.000002	diff=2.43962e-11
 -0.000005	 -0.000005	diff=5.16282e-10
  0.000000	 -0.000000	diff=5.30306e-12
  0.000000	  0.000000	diff=3.93554e-12
  0.000000	 -0.000000	diff=1.41285e-12
  0.000000	  0.000000	diff=5.41319e-12
  0.000000	 -0.000000	diff=1.098e-12
  0.000000	  0.000000	diff=9.03613e-12
  0.000000	  0.000000	diff=1.02715e-10
  0.000000	  0.000000	diff=1.19544e-11
  0.000000	  0.000000	diff=4.84616e-12
 -0.000000	 -0.000000	diff=2.3363e-12
  0.000000	  0.000000	diff=9.62777e-12
  0.000000	 -0.000000	diff=7.22579e-12
  0.000000	  0.000000	diff=1.39041e-12
  0.000000	 -0.000000	diff=2.8258e-12
 -0.000000	 -0.000000	diff=5.63457e-12
 -0.000000	 -0.000000	diff=3.15719e-10
  local_diff=1.79904e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.74104e-11
 -0.000000	 -0.000000	diff=2.06202e-12
 -0.000000	 -0.000000	diff=1.50773e-11
  0.000000	  0.000000	diff=1.47233e-11
 -0.000000	 -0.000000	diff=3.02809e-11
 -0.000000	 -0.000000	diff=1.35352e-12
  0.000001	  0.000001	diff=4.49072e-10
  0.000013	  0.000013	diff=1.76779e-09
  0.000000	  0.000000	diff=1.88667e-12
  0.000000	  0.000000	diff=1.92477e-11
  0.000000	  0.000000	diff=8.8308e-12
 -0.000000	 -0.000000	diff=2.24323e-12
  0.000000	  0.000000	diff=9.71412e-12
  0.000000	  0.000000	diff=1.84459e-11
 -0.000004	 -0.000004	diff=1.94524e-09
 -0.000023	 -0.000023	diff=4.46585e-09
  0.000000	  0.000000	diff=1.19979e-13
  0.000000	  0.000000	diff=7.05205e-15
  0.000000	 -0.000000	diff=1.0995e-13
  0.000000	 -0.000000	diff=2.27846e-13
  0.000000	 -0.000000	diff=2.42447e-14
  0.000000	 -0.000000	diff=1.79606e-13
  0.000000	  0.000000	diff=3.4964e-14
  0.000000	  0.000000	diff=1.33725e-11
  0.000000	  0.000000	diff=1.57024e-13
  0.000000	  0.000000	diff=2.95534e-13
  0.000000	 -0.000000	diff=1.52903e-13
  0.000000	 -0.000000	diff=3.92826e-13
  0.000000	 -0.000000	diff=3.60086e-14
  0.000000	 -0.000000	diff=4.90465e-14
  0.000000	  0.000000	diff=1.84697e-12
  0.000000	  0.000000	diff=1.47663e-11
  0.000000	  0.000000	diff=4.95753e-12
  0.000000	  0.000000	diff=5.40695e-12
  0.000000	  0.000000	diff=1.34069e-11
 -0.000000	 -0.000000	diff=1.94236e-11
  0.000000	  0.000000	diff=1.02794e-11
  0.000000	  0.000000	diff=2.49188e-14
 -0.000000	 -0.000000	diff=8.79573e-11
 -0.000000	 -0.000000	diff=3.22743e-11
 -0.000000	 -0.000000	diff=3.23872e-12
 -0.000000	 -0.000000	diff=1.20053e-11
 -0.000000	 -0.000000	diff=5.09647e-12
  0.000000	  0.000000	diff=5.35695e-12
 -0.000000	 -0.000000	diff=3.44934e-12
 -0.000000	 -0.000000	diff=8.74325e-12
  0.000000	  0.000000	diff=2.46161e-11
 -0.000000	 -0.000000	diff=1.6577e-10
  local_diff=9.20301e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.56103e-11
  0.000000	  0.000000	diff=5.022e-13
 -0.000000	 -0.000000	diff=1.00639e-11
  0.000000	  0.000000	diff=7.88508e-12
 -0.000000	 -0.000000	diff=1.54352e-12
  0.000000	  0.000000	diff=1.86361e-12
  0.000002	  0.000002	diff=1.22419e-10
  0.000006	  0.000006	diff=5.029e-10
  0.000000	  0.000000	diff=2.0975e-12
  0.000000	  0.000000	diff=1.97106e-12
 -0.000000	 -0.000000	diff=5.34774e-12
  0.000000	  0.000000	diff=8.928e-12
  0.000000	  0.000000	diff=3.64529e-13
  0.000000	  0.000000	diff=7.84232e-12
  0.000001	  0.000001	diff=4.35778e-10
  0.000010	  0.000010	diff=1.03586e-09
  0.000000	  0.000000	diff=7.88371e-12
  0.000000	  0.000000	diff=6.11766e-12
 -0.000000	 -0.000000	diff=2.44381e-12
  0.000000	  0.000000	diff=1.21239e-13
  0.000000	 -0.000000	diff=3.80045e-12
  0.000000	  0.000000	diff=4.54942e-12
  0.000000	  0.000000	diff=2.92885e-10
  0.000000	  0.000000	diff=4.50794e-11
  0.000000	 -0.000000	diff=4.20536e-12
  0.000000	 -0.000000	diff=5.08206e-12
  0.000000	  0.000000	diff=7.93948e-13
 -0.000000	 -0.000000	diff=5.37911e-12
  0.000000	  0.000000	diff=7.07596e-12
 -0.000000	 -0.000000	diff=5.55981e-14
 -0.000000	 -0.000000	diff=7.04127e-11
 -0.000000	 -0.000000	diff=7.29815e-11
  local_diff=2.68985e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=1.45044e-09
  0.000002	  0.000002	diff=2.34763e-09
 -0.000001	 -0.000001	diff=1.56778e-12
  0.000002	  0.000002	diff=3.10549e-10
  local_diff=4.11019e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=1.86939e-09
 -0.000003	 -0.000003	diff=6.2902e-10
 -0.000025	 -0.000025	diff=3.16962e-09
 -0.000001	 -0.000001	diff=1.54748e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.20018e-10
 -0.000001	 -0.000001	diff=1.43916e-10
 -0.000004	 -0.000004	diff=4.9465e-10
 -0.000000	 -0.000000	diff=8.85574e-11
  local_diff=7.26992e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=5.38359e-14
  0.000000	  0.000000	diff=9.86054e-16
  0.000000	 -0.000000	diff=1.37197e-14
  0.000000	  0.000000	diff=6.43354e-16
  0.000000	 -0.000000	diff=3.73838e-14
  0.000000	  0.000000	diff=9.12684e-16
  0.000000	 -0.000000	diff=7.72831e-12
  0.000000	  0.000000	diff=7.79998e-13
  0.000000	  0.000000	diff=3.23548e-14
  0.000000	 -0.000000	diff=1.55987e-15
  0.000000	 -0.000000	diff=9.3521e-15
  0.000000	  0.000000	diff=3.27183e-16
  0.000000	  0.000000	diff=1.10773e-14
  0.000000	 -0.000000	diff=5.96434e-16
  0.000000	  0.000000	diff=1.40108e-12
  0.000000	 -0.000000	diff=1.71607e-13
  0.000000	 -0.000000	diff=1.28095e-16
  0.000000	 -0.000000	diff=1.39167e-17
  0.000000	 -0.000000	diff=9.02375e-16
  0.000000	  0.000000	diff=2.29683e-17
  0.000000	 -0.000000	diff=5.03644e-16
  0.000000	  0.000000	diff=3.70829e-18
  0.000000	 -0.000000	diff=4.08247e-13
  0.000000	  0.000000	diff=3.6317e-14
  0.000000	 -0.000000	diff=1.02837e-16
  0.000000	 -0.000000	diff=4.85095e-18
  0.000000	 -0.000000	diff=2.51754e-16
  0.000000	  0.000000	diff=8.22276e-18
  0.000000	 -0.000000	diff=1.7433e-16
  0.000000	  0.000000	diff=1.60987e-18
  0.000000	 -0.000000	diff=1.05014e-13
  0.000000	  0.000000	diff=9.52912e-15
  local_diff=1.0805e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.18944e-16
  0.000000	 -0.000000	diff=5.78365e-16
  0.000000	 -0.000000	diff=6.58452e-17
  0.000000	 -0.000000	diff=1.398e-16
  0.000000	 -0.000000	diff=1.71606e-16
  0.000000	 -0.000000	diff=2.56673e-16
  0.000000	  0.000000	diff=5.56974e-12
  0.000000	  0.000000	diff=8.24444e-12
  0.000000	 -0.000000	diff=9.60892e-17
  0.000000	 -0.000000	diff=1.55531e-16
  0.000000	  0.000000	diff=7.6123e-18
  0.000000	  0.000000	diff=2.76448e-18
  0.000000	 -0.000000	diff=2.66434e-17
  0.000000	 -0.000000	diff=4.88678e-17
  0.000000	  0.000000	diff=9.9652e-13
  0.000000	  0.000000	diff=5.28997e-13
  0.000000	  0.000000	diff=2.13331e-18
  0.000000	  0.000000	diff=1.51675e-18
  0.000000	  0.000000	diff=5.33638e-18
  0.000000	  0.000000	diff=7.2638e-18
  0.000000	  0.000000	diff=3.67924e-18
  0.000000	  0.000000	diff=4.00219e-18
  0.000000	 -0.000000	diff=1.7011e-13
  0.000000	 -0.000000	diff=9.35705e-14
  0.000000	  0.000000	diff=7.48832e-18
  0.000000	  0.000000	diff=6.1592e-18
  0.000000	  0.000000	diff=1.32092e-17
  0.000000	  0.000000	diff=1.85779e-17
  0.000000	  0.000000	diff=9.72318e-18
  0.000000	  0.000000	diff=1.08271e-17
  0.000000	 -0.000000	diff=4.36584e-13
  0.000000	 -0.000000	diff=2.39855e-13
  local_diff=1.62819e-11
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=3.22536e-18
  0.000000	  0.000000	diff=1.15293e-17
  0.000000	 -0.000000	diff=2.728e-18
  0.000000	  0.000000	diff=8.44157e-18
  0.000000	 -0.000000	diff=3.33145e-19
  0.000000	  0.000000	diff=1.41864e-18
  0.000000	  0.000000	diff=7.75692e-12
  0.000000	 -0.000000	diff=3.6539e-12
  0.000000	 -0.000000	diff=8.0348e-18
  0.000000	  0.000000	diff=2.77725e-17
  0.000000	 -0.000000	diff=5.39974e-18
  0.000000	  0.000000	diff=1.64045e-17
  0.000000	 -0.000000	diff=9.13886e-20
  0.000000	  0.000000	diff=5.00402e-19
  0.000000	  0.000000	diff=3.59221e-12
  0.000000	 -0.000000	diff=7.87381e-12
  0.000000	 -0.000000	diff=5.50036e-20
  0.000000	  0.000000	diff=2.56354e-19
  0.000000	 -0.000000	diff=1.56009e-19
  0.000000	  0.000000	diff=5.15171e-19
  0.000000	 -0.000000	diff=8.09494e-20
  0.000000	  0.000000	diff=3.3288e-19
  0.000000	  0.000000	diff=1.77481e-13
  0.000000	 -0.000000	diff=1.79049e-13
  0.000000	 -0.000000	diff=1.5802e-19
  0.000000	  0.000000	diff=7.68911e-19
  0.000000	 -0.000000	diff=5.1081e-19
  0.000000	  0.000000	diff=1.69397e-18
  0.000000	 -0.000000	diff=2.76444e-19
  0.000000	  0.000000	diff=1.13629e-18
  0.000000	  0.000000	diff=5.77681e-13
  0.000000	 -0.000000	diff=5.82688e-13
  local_diff=2.43938e-11
# W_emb_src_char, [2 5]
  0.000000	 -0.000000	diff=3.90236e-12
  0.000000	  0.000000	diff=7.91026e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.64608e-12
  0.000000	  0.000000	diff=7.27446e-12
  0.000000	 -0.000000	diff=4.61416e-12
  0.000000	  0.000000	diff=7.2854e-12
  0.000000	 -0.000000	diff=3.04728e-12
  0.000000	  0.000000	diff=8.65286e-12
  local_diff=4.73329e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=9.62589e-12
  0.000000	  0.000000	diff=2.11688e-11
 -0.000000	 -0.000000	diff=2.81306e-12
  0.000000	  0.000000	diff=1.45188e-11
 -0.000000	 -0.000000	diff=1.32695e-11
  0.000000	  0.000000	diff=1.90546e-11
 -0.000019	 -0.000019	diff=1.37138e-10
 -0.000015	 -0.000015	diff=1.09145e-10
  0.000000	  0.000000	diff=1.18262e-11
 -0.000000	 -0.000000	diff=2.07089e-11
  0.000000	  0.000000	diff=7.70102e-12
  0.000000	  0.000000	diff=1.15431e-11
  0.000000	  0.000000	diff=1.07014e-11
 -0.000000	 -0.000000	diff=7.2672e-12
  0.000012	  0.000012	diff=2.92566e-10
  0.000008	  0.000008	diff=3.23974e-10
 -0.000000	 -0.000000	diff=1.127e-12
  0.000000	  0.000000	diff=1.38174e-11
 -0.000000	 -0.000000	diff=1.5214e-11
  0.000000	  0.000000	diff=1.43778e-11
 -0.000000	 -0.000000	diff=1.03585e-11
  0.000000	  0.000000	diff=1.91464e-11
 -0.000000	 -0.000000	diff=1.87252e-11
 -0.000000	 -0.000000	diff=1.13119e-11
  0.000000	  0.000000	diff=1.33858e-11
 -0.000000	 -0.000000	diff=1.65285e-11
  0.000000	  0.000000	diff=2.05405e-11
 -0.000000	 -0.000000	diff=2.05216e-11
  0.000000	  0.000000	diff=1.07681e-11
 -0.000000	 -0.000000	diff=1.1264e-12
  0.000000	  0.000000	diff=1.08956e-11
  0.000000	  0.000000	diff=5.85963e-11
  local_diff=1.26946e-09
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=1.27153e-11
  0.000000	  0.000000	diff=1.57306e-11
 -0.000000	 -0.000000	diff=2.06626e-11
  0.000000	  0.000000	diff=1.51957e-11
 -0.000000	 -0.000000	diff=6.15149e-12
  0.000000	  0.000000	diff=5.87535e-12
 -0.000003	 -0.000003	diff=1.79734e-11
 -0.000009	 -0.000009	diff=4.37774e-12
  0.000000	  0.000000	diff=9.18547e-12
 -0.000000	 -0.000000	diff=1.36623e-11
  0.000000	  0.000000	diff=1.88069e-11
 -0.000000	 -0.000000	diff=1.64016e-11
  0.000000	  0.000000	diff=3.31313e-12
 -0.000000	 -0.000000	diff=2.34094e-12
  0.000007	  0.000007	diff=4.16782e-12
  0.000018	  0.000018	diff=2.42002e-11
  0.000000	 -0.000000	diff=1.93708e-12
  0.000000	  0.000000	diff=9.20349e-12
  0.000000	 -0.000000	diff=5.01805e-13
  0.000000	  0.000000	diff=1.10946e-11
  0.000000	 -0.000000	diff=2.32255e-12
  0.000000	  0.000000	diff=8.93348e-12
 -0.000000	 -0.000000	diff=6.3759e-13
 -0.000000	 -0.000000	diff=2.35246e-11
  0.000000	  0.000000	diff=1.05267e-11
  0.000000	 -0.000000	diff=5.54062e-13
  0.000000	  0.000000	diff=2.16452e-13
  0.000000	 -0.000000	diff=2.06745e-13
  0.000000	  0.000000	diff=1.04008e-11
  0.000000	 -0.000000	diff=7.57663e-13
  0.000000	  0.000000	diff=2.52806e-11
  0.000000	  0.000000	diff=3.4871e-11
  local_diff=3.3173e-10
# W_tgt_char{3}, [8 4]
  0.000000	 -0.000000	diff=3.34625e-13
  0.000000	  0.000000	diff=6.07448e-12
  0.000000	 -0.000000	diff=6.25619e-13
  0.000000	  0.000000	diff=1.12837e-11
  0.000000	 -0.000000	diff=7.02525e-13
  0.000000	  0.000000	diff=6.01978e-12
  0.000001	  0.000001	diff=1.17389e-11
  0.000025	  0.000025	diff=1.97419e-11
  0.000000	 -0.000000	diff=9.2886e-13
  0.000000	 -0.000000	diff=6.97557e-12
  0.000000	  0.000000	diff=1.08197e-11
  0.000000	 -0.000000	diff=2.54714e-14
  0.000000	 -0.000000	diff=1.18097e-11
  0.000000	 -0.000000	diff=6.95151e-12
 -0.000001	 -0.000001	diff=1.50889e-11
 -0.000022	 -0.000022	diff=1.84606e-11
  0.000000	  0.000000	diff=5.73891e-15
  0.000000	 -0.000000	diff=1.07882e-14
  0.000000	  0.000000	diff=3.4979e-15
  0.000000	  0.000000	diff=1.98306e-16
  0.000000	  0.000000	diff=8.69525e-15
  0.000000	 -0.000000	diff=1.0691e-14
 -0.000000	 -0.000000	diff=8.71208e-12
 -0.000000	 -0.000000	diff=1.05177e-11
  0.000000	 -0.000000	diff=2.10846e-15
  0.000000	 -0.000000	diff=9.04748e-17
  0.000000	  0.000000	diff=6.36783e-17
  0.000000	  0.000000	diff=3.69296e-16
  0.000000	 -0.000000	diff=1.61885e-15
  0.000000	  0.000000	diff=3.58903e-16
  0.000000	  0.000000	diff=1.42424e-11
  0.000000	  0.000000	diff=2.86349e-11
  local_diff=1.89733e-10
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000016	  0.000016	diff=1.41747e-09
 -0.000020	 -0.000020	diff=8.76327e-10
 -0.000002	 -0.000002	diff=4.34988e-10
 -0.000005	 -0.000005	diff=1.36403e-09
 -0.000001	 -0.000001	diff=2.52403e-10
 -0.000005	 -0.000005	diff=1.38285e-09
  local_diff=5.72808e-09
# W_h, [2 4]
 -0.000002	 -0.000002	diff=1.75824e-11
  0.000006	  0.000006	diff=1.1713e-10
  0.000003	  0.000003	diff=1.14691e-11
 -0.000008	 -0.000008	diff=1.49007e-10
 -0.000003	 -0.000003	diff=5.2126e-13
  0.000002	  0.000002	diff=4.04296e-11
 -0.000011	 -0.000011	diff=2.25069e-11
 -0.000009	 -0.000009	diff=1.37239e-10
  local_diff=4.95885e-10
# W_soft, [5 2]
 -0.000014	 -0.000014	diff=9.69923e-13
  0.000011	  0.000011	diff=6.63546e-12
 -0.000003	 -0.000003	diff=4.37724e-12
  0.000008	  0.000008	diff=4.3516e-12
 -0.000002	 -0.000002	diff=8.34299e-12
 -0.000018	 -0.000018	diff=1.0193e-11
  0.000011	  0.000011	diff=6.80251e-12
  0.000005	  0.000005	diff=6.59526e-12
  0.000008	  0.000008	diff=1.27043e-12
 -0.000006	 -0.000006	diff=9.24484e-12
  local_diff=5.87833e-11
# W_soft_char, [5 2]
 -0.000005	 -0.000005	diff=6.20841e-12
  0.000008	  0.000008	diff=1.18161e-12
 -0.000005	 -0.000005	diff=9.31816e-12
 -0.000002	 -0.000002	diff=1.69661e-11
  0.000003	  0.000003	diff=1.18004e-11
  0.000007	  0.000007	diff=9.06749e-12
 -0.000024	 -0.000024	diff=1.56354e-11
  0.000007	  0.000007	diff=7.14137e-12
  0.000004	  0.000004	diff=1.55865e-11
  0.000007	  0.000007	diff=9.41266e-12
  local_diff=1.02318e-10
# Num params=404, abs_diff=3.54031e-08
Elapsed time is 12.828243 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.89253e-14
 -0.000000	 -0.000000	diff=3.80665e-13
  0.011919	  0.012356	diff=0.000436738
  0.000000	 -0.000000	diff=1.29395e-40
  0.000000	 -0.000000	diff=2.65023e-25
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.41404e-45
  0.000000	 -0.000000	diff=2.22235e-14
  0.000000	  0.000000	diff=7.91298e-13
 -0.015140	 -0.014509	diff=0.000631498
  0.000000	  0.000000	diff=1.39212e-40
  0.000000	 -0.000000	diff=3.6014e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.27927e-45
  0.000000	 -0.000000	diff=1.78724e-15
  0.000000	  0.000000	diff=5.13634e-39
 -0.001200	 -0.001196	diff=4.19215e-06
  0.000000	  0.000000	diff=1.24599e-41
  0.000000	  0.000000	diff=2.39132e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.35452e-56
  0.000000	  0.000000	diff=1.78724e-15
  0.000000	 -0.000000	diff=5.13634e-39
  0.001192	  0.001196	diff=4.17447e-06
  0.000000	 -0.000000	diff=1.23898e-41
  0.000000	 -0.000000	diff=2.36631e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.3542e-56
  local_diff=0.0010766
# W_tgt{1}, [8 6]
 -0.766914	 -0.785267	diff=0.018353
  0.000000	  0.000000	diff=1.06531e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.8815e-12
 -9.037399	 -9.410081	diff=0.372682
  0.054244	  0.055534	diff=0.00128949
 -0.000000	 -0.000000	diff=3.22055e-11
  0.000000	 -0.000000	diff=2.24719e-27
  1.007635	  0.981278	diff=0.0263573
  0.000000	  0.000000	diff=1.39069e-11
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.38594e-09
 12.379994	 11.758937	diff=0.621058
 -0.071480	 -0.069396	diff=0.00208473
  0.000000	  0.000000	diff=1.10955e-09
  0.000000	  0.000000	diff=1.34546e-26
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=1.49381e-27
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
  0.000000	 -0.000000	diff=2.84648e-29
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=3.20479e-13
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
 -0.000000	 -0.000000	diff=3.90064e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  local_diff=1.04184
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.35585e-26
  0.000000	  0.000000	diff=2.8781e-25
  0.011324	  0.011717	diff=0.000393193
  0.010423	  0.010755	diff=0.000331839
  local_diff=0.000725031
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.22647e-11
 -0.000000	 -0.000000	diff=7.69642e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-11.591312	-12.408891	diff=0.817579
-10.192270	-10.804343	diff=0.612073
  0.000000	  0.000000	diff=1.82339e-09
  0.000000	  0.000000	diff=2.75363e-10
  local_diff=1.42965
# W_soft, [5 2]
  0.117985	  0.117958	diff=2.65055e-05
  0.128902	  0.128874	diff=2.84991e-05
 -0.253645	 -0.253670	diff=2.57773e-05
 -0.106455	 -0.106480	diff=2.53615e-05
  0.113363	  0.113319	diff=4.41675e-05
 -0.001808	 -0.001808	diff=8.08635e-09
 -0.001955	 -0.001955	diff=8.59921e-09
  0.002521	  0.002521	diff=7.92679e-09
  0.001512	  0.001512	diff=7.7748e-09
 -0.000270	 -0.000270	diff=1.26002e-08
  local_diff=0.000150356
# Num params=110, abs_diff=2.47345
Elapsed time is 1.024728 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.34816e-20
 -0.000000	 -0.000000	diff=2.53023e-09
  0.000000	  0.000000	diff=4.3787e-23
  0.000000	 -0.000000	diff=2.83846e-15
  0.000000	 -0.000000	diff=2.28652e-28
  0.000000	  0.000000	diff=3.16321e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.98503e-20
  0.000000	  0.000000	diff=3.93833e-09
  0.000000	 -0.000000	diff=5.56607e-23
  0.000000	  0.000000	diff=3.60822e-15
  0.000000	  0.000000	diff=2.87025e-28
  0.000000	 -0.000000	diff=4.73009e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.51073e-51
  0.000000	  0.000000	diff=5.03598e-38
  0.000000	 -0.000000	diff=6.16669e-54
  0.000000	  0.000000	diff=7.00845e-46
  0.000000	  0.000000	diff=1.10983e-58
  0.000000	  0.000000	diff=2.51678e-53
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.8831e-45
  0.000000	 -0.000000	diff=2.23274e-32
  0.000000	  0.000000	diff=5.80397e-48
  0.000000	 -0.000000	diff=3.76267e-40
  0.000000	 -0.000000	diff=1.84266e-52
  0.000000	 -0.000000	diff=2.51047e-47
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=6.46857e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.55428e-54
  0.000000	  0.000000	diff=8.76417e-53
  0.000000	 -0.000000	diff=1.31334e-54
  0.000000	  0.000000	diff=3.68385e-53
  0.000000	  0.000000	diff=1.67269e-54
  0.000000	  0.000000	diff=2.26763e-52
  0.000000	  0.000000	diff=1.02191e-29
  0.000000	  0.000000	diff=1.48421e-29
  0.000000	  0.000000	diff=1.97708e-48
  0.000000	 -0.000000	diff=1.69155e-47
  0.000000	  0.000000	diff=5.19604e-49
  0.000000	 -0.000000	diff=1.38666e-47
  0.000000	  0.000000	diff=3.01272e-48
  0.000000	 -0.000000	diff=8.27168e-47
  0.000000	 -0.000000	diff=9.0586e-24
  0.000000	  0.000000	diff=2.23467e-23
  0.000000	 -0.000000	diff=1.84561e-48
  0.000000	  0.000000	diff=3.1409e-48
  0.000000	  0.000000	diff=4.54393e-49
  0.000000	  0.000000	diff=1.14558e-48
  0.000000	 -0.000000	diff=1.83828e-48
  0.000000	  0.000000	diff=9.21113e-48
  0.000000	  0.000000	diff=6.85573e-25
  0.000000	 -0.000000	diff=2.36092e-24
  0.000000	 -0.000000	diff=1.01887e-47
  0.000000	 -0.000000	diff=7.26663e-47
  0.000000	  0.000000	diff=2.82651e-48
  0.000000	 -0.000000	diff=2.63008e-47
  0.000000	 -0.000000	diff=1.01827e-47
  0.000000	 -0.000000	diff=2.60012e-46
  0.000000	 -0.000000	diff=2.47598e-24
  0.000000	  0.000000	diff=1.0339e-24
  local_diff=3.79617e-23
# W_tgt{1}, [8 6]
 -0.000004	 -0.000004	diff=4.98508e-09
  0.050148	  0.048173	diff=0.00197547
 -0.000001	 -0.000001	diff=9.19684e-10
 -0.004852	 -0.004846	diff=6.11891e-06
 -0.000004	 -0.000004	diff=5.01857e-09
-16.861985	-16.882693	diff=0.0207085
 -0.000000	 -0.000000	diff=2.24089e-12
 -0.075760	 -0.075641	diff=0.000118743
 -0.000018	 -0.000018	diff=1.17178e-07
  0.286069	  0.239398	diff=0.0466703
 -0.000004	 -0.000004	diff=1.53264e-08
 -0.023675	 -0.023531	diff=0.000144739
 -0.000018	 -0.000019	diff=1.17959e-07
-64.009606	-64.502290	diff=0.492685
 -0.000000	 -0.000000	diff=5.06447e-12
 -0.370083	 -0.367324	diff=0.00275931
 -0.000003	 -0.000003	diff=2.8759e-09
 -0.092075	 -0.092172	diff=9.71693e-05
 -0.000000	 -0.000000	diff=5.83548e-11
  0.000138	  0.000138	diff=1.60813e-08
 -0.000003	 -0.000003	diff=2.98059e-09
  0.268381	  0.268231	diff=0.000150384
 -0.000000	 -0.000000	diff=1.88724e-12
 -0.095132	 -0.094937	diff=0.000195029
  0.000005	  0.000005	diff=6.1152e-09
  0.080428	  0.079878	diff=0.00055015
  0.000000	  0.000000	diff=3.99928e-12
  0.000395	  0.000395	diff=1.31383e-07
  0.000004	  0.000004	diff=5.45053e-09
  0.823579	  0.822744	diff=0.000835628
  0.000000	  0.000000	diff=1.41454e-12
  0.120081	  0.120523	diff=0.000441736
  0.000000	  0.000000	diff=2.37094e-13
 -0.000000	 -0.000000	diff=1.57625e-12
  0.000000	  0.000000	diff=5.50291e-13
  0.000000	  0.000000	diff=1.12205e-12
  0.000000	  0.000000	diff=1.65518e-13
  0.000001	  0.000001	diff=7.18465e-13
  0.000000	  0.000000	diff=3.33371e-17
 -0.000000	 -0.000000	diff=6.37372e-13
 -0.000002	 -0.000002	diff=1.67656e-09
  0.167861	  0.166870	diff=0.000990917
  0.000000	  0.000000	diff=3.56582e-11
 -0.000657	 -0.000656	diff=7.12819e-07
 -0.000001	 -0.000001	diff=4.07367e-10
 -0.704294	 -0.705065	diff=0.00077068
 -0.000000	 -0.000000	diff=1.96455e-12
 -0.007005	 -0.007064	diff=5.90446e-05
  local_diff=0.56916
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.80799e-13
  0.000003	  0.000003	diff=1.17527e-12
  0.000001	  0.000001	diff=1.04317e-12
  0.000000	  0.000000	diff=1.1646e-12
  0.000000	  0.000000	diff=1.85515e-13
  0.000004	  0.000004	diff=8.67471e-13
 -0.000003	 -0.000003	diff=7.61113e-13
  0.000003	  0.000003	diff=7.73975e-13
  0.050823	  0.050903	diff=8.01664e-05
 -2.046568	 -2.047222	diff=0.000653766
 -0.207671	 -0.207474	diff=0.000197039
 -0.402314	 -0.402361	diff=4.70955e-05
 -0.077828	 -0.076264	diff=0.00156383
 -2.684246	 -2.690338	diff=0.00609235
  0.696532	  0.700552	diff=0.00401905
 -3.778872	 -3.779618	diff=0.000745874
 -0.128987	 -0.129030	diff=4.26756e-05
  0.061208	  0.061151	diff=5.68663e-05
 -0.126904	 -0.126919	diff=1.4947e-05
 -0.070657	 -0.070722	diff=6.55408e-05
 -0.291341	 -0.291436	diff=9.54034e-05
 -0.097532	 -0.097713	diff=0.000181571
  1.118120	  1.118619	diff=0.000499494
  0.380550	  0.379815	diff=0.000735855
  0.012946	  0.013209	diff=0.000263206
  0.461725	  0.461779	diff=5.36815e-05
  0.191919	  0.191890	diff=2.89226e-05
  0.679034	  0.678886	diff=0.000147656
  0.083802	  0.084460	diff=0.000658393
  1.541852	  1.540874	diff=0.000977706
 -1.205213	 -1.205056	diff=0.000157264
  4.465138	  4.463566	diff=0.00157229
  local_diff=0.0189506
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.02828e-09
 -0.000000	 -0.000000	diff=9.2605e-09
 -0.000000	 -0.000000	diff=2.94841e-12
 -0.000000	 -0.000000	diff=4.24691e-12
  local_diff=1.6296e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.57964e-09
  0.000000	  0.000000	diff=3.29025e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-46.634814	-48.192947	diff=1.55813
 23.595116	 22.914322	diff=0.680794
-63.733324	-63.722799	diff=0.0105255
 32.900101	 32.948650	diff=0.0485487
  local_diff=2.298
# W_soft, [5 2]
 -0.194189	 -0.194362	diff=0.000173622
 -0.792482	 -0.792957	diff=0.00047466
  0.789507	  0.789365	diff=0.00014269
  0.710923	  0.710812	diff=0.00011126
 -0.512379	 -0.512858	diff=0.000478206
  0.259154	  0.258965	diff=0.000189717
  1.222390	  1.221652	diff=0.000737428
 -0.731666	 -0.731842	diff=0.000175899
 -1.237164	 -1.237267	diff=0.000103252
  0.489267	  0.488492	diff=0.000774967
  local_diff=0.0033617
# Num params=174, abs_diff=2.88947
Elapsed time is 2.129482 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.05792e-13
  0.000000	  0.000000	diff=2.53484e-11
  0.000000	  0.000000	diff=1.75957e-17
  0.000000	 -0.000000	diff=4.30662e-21
  0.000165	  0.000169	diff=3.88032e-06
  0.000000	  0.000000	diff=2.26316e-19
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.31863e-18
  0.000000	 -0.000000	diff=3.43153e-26
 -0.000000	 -0.000000	diff=3.86931e-11
  0.000000	 -0.000000	diff=6.93468e-30
  0.000000	  0.000000	diff=5.47442e-21
  0.000000	 -0.000000	diff=2.10102e-35
  0.000000	 -0.000000	diff=1.15918e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.72548e-14
  0.000000	 -0.000000	diff=1.60375e-31
  0.000000	 -0.000000	diff=2.86987e-18
  0.000000	  0.000000	diff=6.57819e-32
 -0.000028	 -0.000028	diff=1.05142e-07
  0.000000	 -0.000000	diff=3.6913e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.77983e-19
  0.000000	  0.000000	diff=9.96869e-30
  0.000000	  0.000000	diff=1.84957e-41
  0.000000	  0.000000	diff=1.65824e-33
  0.000000	 -0.000000	diff=3.60782e-48
  0.000000	  0.000000	diff=1.59079e-20
  0.000000	 -0.000000	diff=1.27157e-36
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.78485e-34
  local_diff=3.98552e-06
# W_src{2}, [8 4]
  0.000156	  0.000155	diff=7.41308e-07
 -0.051950	 -0.051700	diff=0.000249554
  0.000002	  0.000002	diff=9.04276e-09
 -0.000395	 -0.000397	diff=1.88223e-06
  0.074041	  0.074211	diff=0.000169735
  0.015131	  0.015085	diff=4.60317e-05
  0.000000	  0.000000	diff=1.70435e-09
 -0.000000	 -0.000000	diff=8.95798e-11
  0.000000	 -0.000000	diff=1.04337e-60
  0.000000	  0.000000	diff=7.70033e-59
  0.000000	 -0.000000	diff=1.38359e-60
  0.000000	  0.000000	diff=1.86874e-59
  0.000000	 -0.000000	diff=3.10002e-60
  0.000000	  0.000000	diff=8.22314e-59
  0.000000	  0.000000	diff=1.00804e-29
  0.000000	  0.000000	diff=6.01278e-29
 -0.000001	 -0.000001	diff=3.38417e-09
 -0.025529	 -0.025469	diff=6.0629e-05
  0.000000	  0.000000	diff=6.1963e-11
 -0.000195	 -0.000195	diff=4.56596e-07
 -0.014545	 -0.014577	diff=3.201e-05
  0.008044	  0.008026	diff=1.81218e-05
  0.000000	  0.000000	diff=4.27358e-10
 -0.000000	 -0.000000	diff=7.18604e-11
  0.000001	  0.000001	diff=1.38785e-09
  0.020501	  0.020540	diff=3.89527e-05
 -0.000001	 -0.000001	diff=5.53349e-09
  0.000158	  0.000158	diff=2.98779e-07
 -0.077118	 -0.077009	diff=0.000109619
  0.006137	  0.006129	diff=7.8771e-06
 -0.000000	 -0.000000	diff=2.57831e-10
  0.000000	  0.000000	diff=4.56238e-11
  local_diff=0.000735931
# W_tgt{1}, [8 6]
  0.000068	  0.000068	diff=1.77923e-07
 -0.377777	 -0.375082	diff=0.00269499
  0.000038	  0.000038	diff=5.64938e-10
  0.179689	  0.179851	diff=0.000162355
  0.000086	  0.000086	diff=1.94569e-07
  0.430188	  0.390988	diff=0.0392
  0.000015	  0.000015	diff=5.30743e-08
 -0.037834	 -0.037604	diff=0.000229806
 -0.000000	 -0.000000	diff=2.53059e-09
 -0.335776	 -0.257176	diff=0.0786002
  0.000000	  0.000000	diff=2.89869e-09
  0.002525	  0.002506	diff=1.96204e-05
 -0.000000	 -0.000000	diff=2.47296e-09
  4.101734	  3.545747	diff=0.555988
 -0.000000	 -0.000000	diff=5.12821e-13
 -0.129065	 -0.124496	diff=0.00456849
 -0.000000	 -0.000000	diff=1.44817e-11
  0.016114	  0.016652	diff=0.000537924
  0.000000	  0.000000	diff=2.58485e-12
 -0.000028	 -0.000028	diff=1.18119e-10
  0.000001	  0.000001	diff=9.44108e-12
 -0.009378	 -0.009462	diff=8.34718e-05
  0.000000	  0.000000	diff=3.45116e-13
  0.003196	  0.003198	diff=1.76973e-06
  0.000000	  0.000000	diff=1.08825e-10
  0.004006	  0.005904	diff=0.00189828
  0.000005	  0.000005	diff=1.34465e-10
 -0.000122	 -0.000122	diff=7.82769e-08
  0.000009	  0.000009	diff=2.47621e-09
 -0.774061	 -0.774462	diff=0.00040099
  0.000000	  0.000000	diff=1.11953e-12
  0.008891	  0.008938	diff=4.66139e-05
 -0.000000	 -0.000000	diff=1.24573e-09
  0.000263	  0.000262	diff=7.83304e-07
 -0.000018	 -0.000018	diff=1.62356e-09
  0.000036	  0.000036	diff=1.03458e-07
 -0.000030	 -0.000030	diff=3.13933e-08
  0.000281	  0.000280	diff=8.98631e-07
 -0.000000	 -0.000000	diff=2.92322e-13
  0.000000	  0.000000	diff=1.08686e-12
 -0.000000	 -0.000000	diff=7.96117e-12
  0.002446	  0.003417	diff=0.000971146
 -0.000001	 -0.000001	diff=1.05707e-11
  0.000058	  0.000058	diff=1.59554e-08
 -0.000002	 -0.000002	diff=1.94472e-10
  0.417876	  0.417789	diff=8.67988e-05
 -0.000000	 -0.000000	diff=3.22329e-13
 -0.003831	 -0.003815	diff=1.58554e-05
  local_diff=0.685509
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=6.66348e-13
  0.000000	  0.000000	diff=6.10105e-13
  0.000000	  0.000000	diff=9.65873e-13
  0.000000	  0.000000	diff=1.90049e-12
 -0.000000	 -0.000000	diff=1.11083e-12
  0.000000	  0.000000	diff=1.87989e-12
 -0.000000	 -0.000000	diff=1.35319e-12
  0.000000	  0.000000	diff=5.8262e-13
  0.217844	  0.218061	diff=0.00021704
 -0.472190	 -0.469976	diff=0.00221478
 -0.097230	 -0.097174	diff=5.5989e-05
 -0.325293	 -0.325539	diff=0.000246364
  0.557278	  0.559871	diff=0.00259358
 -1.526243	 -1.518094	diff=0.00814958
 -1.531277	 -1.529493	diff=0.00178395
 -0.515424	 -0.514534	diff=0.000889868
  0.068274	  0.068202	diff=7.15025e-05
 -0.053350	 -0.053277	diff=7.3371e-05
 -0.124763	 -0.124748	diff=1.50754e-05
 -0.005424	 -0.005436	diff=1.22185e-05
 -0.075474	 -0.075506	diff=3.23948e-05
 -0.183737	 -0.183720	diff=1.71131e-05
  0.407739	  0.407946	diff=0.000207326
 -0.249140	 -0.250224	diff=0.00108407
  0.072757	  0.072690	diff=6.67605e-05
  0.288081	  0.288275	diff=0.000194448
  0.089550	  0.089540	diff=9.712e-06
  0.362486	  0.363060	diff=0.000573974
 -0.168338	 -0.167893	diff=0.000445409
  1.041265	  1.041665	diff=0.000400359
 -0.279811	 -0.279331	diff=0.000480321
  3.008567	  3.001825	diff=0.00674267
  local_diff=0.0265779
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.09246e-10
  0.000000	  0.000000	diff=9.31547e-11
  0.000118	  0.000120	diff=1.95821e-06
  0.000000	 -0.000000	diff=6.74767e-15
  local_diff=1.95882e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.02899e-11
 -0.000000	 -0.000000	diff=3.4354e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 29.868986	 30.897636	diff=1.02865
-15.147911	-14.914619	diff=0.233291
 -4.963032	 -5.462542	diff=0.49951
  2.964002	  2.824189	diff=0.139814
  local_diff=1.90126
# W_soft, [5 2]
 -0.169247	 -0.169422	diff=0.000174874
 -0.453029	 -0.453367	diff=0.000338023
  0.500466	  0.500293	diff=0.000173735
  0.537580	  0.537427	diff=0.000153904
 -0.414584	 -0.414930	diff=0.000346442
 -0.109892	 -0.110159	diff=0.000267945
  0.622417	  0.621976	diff=0.000441468
  0.210969	  0.210769	diff=0.00019921
 -1.050254	 -1.050476	diff=0.000222186
  0.328336	  0.327891	diff=0.000444995
  local_diff=0.00276278
# Num params=174, abs_diff=2.61686
Elapsed time is 2.185654 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=4.93503e-18
  0.000000	 -0.000000	diff=3.19414e-09
  0.000000	 -0.000000	diff=2.44249e-21
  0.000000	 -0.000000	diff=3.08856e-20
 -0.000024	 -0.000025	diff=7.41198e-07
  0.000000	  0.000000	diff=2.83662e-21
  0.000000	  0.000000	diff=0
 -0.004338	 -0.003739	diff=0.000598602
  0.000000	  0.000000	diff=8.36234e-18
 -0.000000	  0.000000	diff=5.10538e-09
  0.000000	 -0.000000	diff=5.85081e-30
  0.000000	  0.000000	diff=3.92607e-20
  0.000000	  0.000000	diff=2.00075e-35
  0.000000	  0.000000	diff=1.93182e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.37043e-65
  0.000000	  0.000000	diff=6.32063e-49
  0.000000	  0.000000	diff=3.04085e-22
  0.000000	  0.000000	diff=9.55397e-59
  0.000003	  0.000003	diff=1.18872e-08
  0.000000	 -0.000000	diff=3.52699e-22
  0.000000	  0.000000	diff=0
  0.000457	  0.000465	diff=8.08051e-06
  0.000000	  0.000000	diff=5.91871e-58
  0.000000	 -0.000000	diff=1.94462e-41
  0.000000	  0.000000	diff=4.20975e-41
  0.000000	 -0.000000	diff=2.93941e-51
  0.000000	  0.000000	diff=4.3221e-25
  0.000000	 -0.000000	diff=1.53881e-40
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.70234e-24
  local_diff=0.000607444
# W_src{2}, [8 4]
  0.000176	  0.000175	diff=8.10861e-07
 -0.001072	 -0.001068	diff=4.8646e-06
 -0.000006	 -0.000006	diff=2.76992e-08
  0.000009	  0.000009	diff=4.11615e-08
 -0.095347	 -0.095019	diff=0.000327664
  0.921614	  0.892052	diff=0.0295616
  0.000001	  0.000001	diff=7.21874e-09
 -0.000000	 -0.000000	diff=7.24867e-10
  0.000000	  0.000000	diff=6.51802e-61
  0.000000	 -0.000000	diff=9.79139e-59
  0.000000	 -0.000000	diff=1.92999e-60
  0.000000	  0.000000	diff=2.65102e-60
  0.000000	  0.000000	diff=1.80523e-60
  0.000000	 -0.000000	diff=6.46001e-59
  0.000000	  0.000000	diff=5.0982e-29
  0.000000	 -0.000000	diff=3.59476e-28
 -0.000006	 -0.000006	diff=1.38662e-08
 -0.001520	 -0.001516	diff=3.57357e-06
 -0.000000	 -0.000000	diff=2.80933e-10
 -0.000011	 -0.000011	diff=2.82381e-08
  0.051977	  0.051983	diff=6.17477e-06
  0.022476	  0.022467	diff=8.61443e-06
  0.000000	  0.000000	diff=1.73889e-09
 -0.000000	 -0.000000	diff=4.40835e-12
  0.000005	  0.000005	diff=1.0826e-08
 -0.000529	 -0.000533	diff=4.35019e-06
  0.000004	  0.000004	diff=1.62897e-08
 -0.000016	 -0.000016	diff=7.8695e-08
  0.183422	  0.182336	diff=0.00108665
 -0.719404	 -0.740052	diff=0.0206481
 -0.000000	 -0.000000	diff=1.18566e-09
  0.000000	  0.000000	diff=1.08773e-12
  local_diff=0.0516526
# W_tgt{1}, [8 6]
  0.000001	  0.000001	diff=2.19747e-09
  0.002266	  0.002363	diff=9.72871e-05
  0.000000	  0.000000	diff=4.32551e-12
  0.011301	  0.011283	diff=1.85713e-05
  0.000001	  0.000001	diff=2.20818e-09
  0.118309	  0.130815	diff=0.0125056
  0.000000	  0.000000	diff=1.1398e-12
  0.001645	  0.001653	diff=8.50111e-06
  0.000006	  0.000006	diff=5.15827e-08
  0.065185	  0.067860	diff=0.00267472
  0.000000	  0.000000	diff=4.87833e-11
  0.055231	  0.054791	diff=0.000439789
  0.000006	  0.000007	diff=5.18455e-08
 -1.550383	 -1.247777	diff=0.302606
  0.000000	  0.000000	diff=1.44921e-12
 -0.118018	 -0.118740	diff=0.000721926
  0.000001	  0.000001	diff=2.09766e-09
 -0.001827	 -0.001725	diff=0.000101285
 -0.000000	 -0.000000	diff=1.23039e-10
 -0.026644	 -0.026746	diff=0.000102817
 -0.000316	 -0.000315	diff=7.61028e-07
 -0.047123	 -0.046817	diff=0.000306806
  0.000001	  0.000001	diff=6.13507e-09
 -0.000442	 -0.000433	diff=8.51723e-06
 -0.000004	 -0.000004	diff=8.85394e-09
  0.010328	  0.010447	diff=0.00011902
 -0.000000	 -0.000000	diff=8.68028e-10
 -0.000704	 -0.000704	diff=2.19909e-08
 -0.000847	 -0.000842	diff=5.33828e-06
 -0.300936	 -0.301531	diff=0.000595316
  0.000003	  0.000003	diff=4.33726e-08
 -0.002802	 -0.002771	diff=3.04059e-05
 -0.000083	 -0.000083	diff=2.86866e-07
 -0.000050	 -0.000050	diff=1.97653e-07
 -0.000117	 -0.000116	diff=4.79512e-07
 -0.000064	 -0.000064	diff=2.61839e-07
  0.000484	  0.000486	diff=2.09958e-06
 -0.000011	 -0.000011	diff=4.4027e-08
 -0.000002	 -0.000002	diff=1.57142e-08
  0.000000	  0.000000	diff=1.02258e-11
  0.000001	  0.000001	diff=6.88076e-09
  0.000927	  0.000916	diff=1.04522e-05
  0.000000	  0.000000	diff=4.89584e-10
  0.002259	  0.002258	diff=7.12133e-07
  0.000627	  0.000630	diff=2.97819e-06
  0.079501	  0.079544	diff=4.22841e-05
 -0.000003	 -0.000003	diff=2.40266e-08
  0.000580	  0.000581	diff=7.55174e-07
  local_diff=0.320404
# W_tgt{2}, [8 4]
  0.000623	  0.000626	diff=2.82309e-06
 -0.000521	 -0.000521	diff=2.5315e-07
 -0.000003	 -0.000003	diff=1.36912e-08
  0.000336	  0.000335	diff=1.38493e-06
 -0.000708	 -0.000704	diff=3.80235e-06
  0.002136	  0.002146	diff=9.99194e-06
  0.000001	  0.000001	diff=3.62809e-09
  0.001020	  0.001025	diff=4.68635e-06
 -0.028184	 -0.028198	diff=1.35057e-05
 -0.698397	 -0.698107	diff=0.000289259
  0.005698	  0.005695	diff=3.21144e-06
 -0.012854	 -0.012841	diff=1.27889e-05
 -0.269652	 -0.271364	diff=0.00171247
 -1.439698	 -1.439778	diff=7.97449e-05
 -3.502950	 -3.498598	diff=0.00435172
 -1.256629	 -1.254933	diff=0.00169609
  0.055009	  0.055023	diff=1.35538e-05
  0.032590	  0.032581	diff=8.61794e-06
  0.014903	  0.014895	diff=7.44831e-06
 -0.059815	 -0.059821	diff=5.41646e-06
 -0.107267	 -0.106750	diff=0.000516204
 -0.001726	 -0.001739	diff=1.38488e-05
 -0.224488	 -0.224554	diff=6.61953e-05
 -0.754026	 -0.754435	diff=0.000408903
  0.807687	  0.806899	diff=0.000787914
  0.294375	  0.294421	diff=4.58131e-05
 -0.040411	 -0.040401	diff=9.91927e-06
 -0.375986	 -0.376130	diff=0.000144564
  0.350550	  0.350486	diff=6.32274e-05
  0.076409	  0.076324	diff=8.51704e-05
 -0.469218	 -0.469692	diff=0.000474252
 -4.537947	 -4.547018	diff=0.0090705
  local_diff=0.0199033
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000749	 -0.000730	diff=1.96452e-05
 -0.000000	 -0.000000	diff=2.39108e-11
  0.000000	  0.000000	diff=7.15057e-09
  0.000000	  0.000000	diff=8.25471e-09
  local_diff=1.96606e-05
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.54862e-12
 -0.000000	 -0.000000	diff=1.45275e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-30.217535	-26.560473	diff=3.65706
 12.763276	 13.667926	diff=0.90465
  7.149709	  7.083902	diff=0.0658071
 -3.640520	 -3.660044	diff=0.0195236
  local_diff=4.64704
# W_h, [2 4]
  0.361054	  0.356239	diff=0.00481585
 -0.000253	 -0.000252	diff=6.80117e-07
 -0.589500	 -0.603836	diff=0.0143357
  0.000514	  0.000516	diff=2.82851e-06
  3.893030	  3.840736	diff=0.0522934
 -2.774627	 -2.775989	diff=0.0013617
  2.929506	  2.932247	diff=0.00274088
 -2.944228	 -2.940896	diff=0.00333148
  local_diff=0.0788825
# W_soft, [5 2]
 -0.956667	 -0.957174	diff=0.000506976
  5.213387	  5.206646	diff=0.00674059
  0.155391	  0.148653	diff=0.0067377
 -2.569958	 -2.570744	diff=0.000785518
 -1.827009	 -1.827381	diff=0.000371877
  2.047773	  2.046128	diff=0.0016451
  0.008199	  0.004965	diff=0.0032344
  1.898402	  1.894751	diff=0.00365141
 -1.834499	 -1.836127	diff=0.00162829
 -2.109547	 -2.109716	diff=0.000168959
  local_diff=0.0254708
# Num params=182, abs_diff=5.14398
Elapsed time is 2.948188 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.6908e-34
  0.000000	  0.000000	diff=6.52136e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.14811e-34
  0.000000	 -0.000000	diff=8.31817e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78785e-73
  0.000000	 -0.000000	diff=5.70539e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.11556e-65
  0.000000	  0.000000	diff=3.2557e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.98983e-66
  0.000000	 -0.000000	diff=1.35318e-65
  0.000000	 -0.000000	diff=6.80857e-67
  0.000000	 -0.000000	diff=2.33138e-66
  0.000000	  0.000000	diff=1.85977e-66
  0.000000	 -0.000000	diff=1.05465e-65
  0.000000	  0.000000	diff=1.86755e-36
  0.000000	 -0.000000	diff=8.34134e-36
  0.000000	 -0.000000	diff=7.79664e-59
  0.000000	  0.000000	diff=5.83381e-58
  0.000000	  0.000000	diff=1.82474e-59
  0.000000	  0.000000	diff=9.23776e-59
  0.000000	 -0.000000	diff=8.49407e-59
  0.000000	  0.000000	diff=5.16748e-58
  0.000000	  0.000000	diff=1.11184e-29
  0.000000	  0.000000	diff=3.97523e-28
  0.000000	  0.000000	diff=1.29167e-59
  0.000000	 -0.000000	diff=5.90976e-59
  0.000000	 -0.000000	diff=5.78638e-60
  0.000000	 -0.000000	diff=8.1766e-60
  0.000000	  0.000000	diff=8.49742e-60
  0.000000	 -0.000000	diff=4.77459e-59
  0.000000	  0.000000	diff=1.60399e-29
  0.000000	 -0.000000	diff=2.8376e-29
  0.000000	 -0.000000	diff=2.05037e-59
  0.000000	  0.000000	diff=5.8094e-58
  0.000000	  0.000000	diff=1.34231e-59
  0.000000	  0.000000	diff=2.23857e-58
  0.000000	 -0.000000	diff=9.57301e-60
  0.000000	  0.000000	diff=8.27746e-58
  0.000000	  0.000000	diff=6.35455e-29
  0.000000	  0.000000	diff=2.21817e-28
  local_diff=7.38419e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_pos, [2 2]
  0.000000	 -0.000000	diff=1.5568e-29
  0.000000	  0.000000	diff=1.31341e-29
  0.000000	 -0.000000	diff=1.2133e-30
  0.000000	  0.000000	diff=1.25461e-30
  local_diff=3.117e-29
# v_pos, [1 2]
  0.000000	 -0.000000	diff=1.01433e-29
  0.000000	 -0.000000	diff=1.01748e-29
  local_diff=2.03181e-29
# W_h, [2 4]
  0.000000	 -0.000000	diff=3.05378e-30
  0.000000	 -0.000000	diff=3.65282e-30
  0.000000	 -0.000000	diff=1.54583e-30
  0.000000	  0.000000	diff=6.8135e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 4.202223 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.84136e-12
 -0.000000	 -0.000000	diff=1.08734e-08
  0.000000	  0.000000	diff=4.35354e-28
  0.000000	 -0.000000	diff=3.7902e-19
  0.000001	  0.000001	diff=3.47287e-08
  0.000000	 -0.000000	diff=3.04848e-21
  0.000000	  0.000000	diff=0
 -0.000601	 -0.000638	diff=3.74958e-05
 -0.000000	 -0.000000	diff=2.84079e-12
  0.000000	  0.000000	diff=1.70572e-08
  0.000000	 -0.000000	diff=5.53448e-28
  0.000000	  0.000000	diff=4.81797e-19
  0.000000	  0.000000	diff=4.00668e-34
  0.000000	  0.000000	diff=1.37967e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.36393e-63
  0.000000	  0.000000	diff=7.75651e-48
  0.000000	 -0.000000	diff=1.12218e-66
  0.000000	  0.000000	diff=1.17244e-57
  0.000000	  0.000000	diff=4.96915e-73
  0.000000	  0.000000	diff=1.09456e-65
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.34168e-56
  0.000000	 -0.000000	diff=2.3864e-40
  0.000000	  0.000000	diff=4.14312e-59
  0.000000	 -0.000000	diff=3.60717e-50
  0.000000	 -0.000000	diff=2.18632e-65
  0.000000	 -0.000000	diff=6.30844e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=3.75585e-05
# W_src{2}, [8 4]
  0.331666	  0.330350	diff=0.00131562
 -0.002764	 -0.002751	diff=1.31345e-05
  0.000000	  0.000000	diff=1.92861e-67
  0.000000	  0.000000	diff=1.29805e-65
  0.293465	  0.294808	diff=0.00134283
 -0.777347	 -0.773645	diff=0.0037022
 -0.000003	 -0.000003	diff=3.17688e-08
 -0.000001	 -0.000001	diff=1.19257e-08
  0.000000	  0.000000	diff=1.26232e-58
  0.000000	 -0.000000	diff=1.41688e-57
  0.000000	 -0.000000	diff=1.3576e-59
  0.000000	 -0.000000	diff=3.6559e-58
  0.000000	  0.000000	diff=1.69409e-58
  0.000000	 -0.000000	diff=1.23259e-57
  0.000000	 -0.000000	diff=1.35871e-28
  0.000000	 -0.000000	diff=6.03963e-28
  0.000000	  0.000000	diff=1.40596e-60
  0.000000	  0.000000	diff=8.13129e-59
  0.000000	  0.000000	diff=8.05466e-61
  0.000000	  0.000000	diff=1.58832e-59
  0.000000	  0.000000	diff=1.32401e-60
  0.000000	  0.000000	diff=1.70636e-59
  0.000000	 -0.000000	diff=5.96654e-29
  0.000000	  0.000000	diff=5.20489e-29
  0.000000	  0.000000	diff=2.1071e-58
  0.000000	 -0.000000	diff=1.86114e-57
  0.000000	 -0.000000	diff=4.88898e-59
  0.000000	 -0.000000	diff=6.66062e-58
  0.000000	  0.000000	diff=2.12671e-58
  0.000000	 -0.000000	diff=1.86368e-57
  0.000000	 -0.000000	diff=1.13055e-28
  0.000000	 -0.000000	diff=6.45202e-28
  local_diff=0.00637384
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.36612e-10
  0.141449	  0.139208	diff=0.00224101
 -0.000000	 -0.000000	diff=6.64415e-12
 -0.051303	 -0.051210	diff=9.27442e-05
  0.000000	  0.000000	diff=7.34172e-10
-10.081949	-10.300090	diff=0.218141
  0.000000	  0.000000	diff=1.7283e-12
 -0.427313	 -0.429863	diff=0.00255021
  0.000002	  0.000002	diff=1.72471e-08
  0.645249	  0.589195	diff=0.056054
 -0.000000	 -0.000000	diff=1.07554e-10
 -0.250880	 -0.248682	diff=0.00219798
  0.000002	  0.000002	diff=1.7243e-08
-39.052507	-48.093148	diff=9.04064
  0.000000	  0.000000	diff=2.85422e-12
 -1.833732	 -1.891739	diff=0.0580063
 -0.000080	 -0.000080	diff=3.73224e-07
  0.001548	  0.001542	diff=6.01329e-06
  0.856652	  0.854887	diff=0.00176502
  0.119273	  0.119784	diff=0.000510345
  0.100424	  0.100992	diff=0.000568028
  4.015067	  4.058219	diff=0.0431522
  0.000002	  0.000002	diff=2.03843e-08
 -0.000000	 -0.000000	diff=3.46268e-10
 -0.000061	 -0.000061	diff=2.11903e-07
 -0.195365	 -0.195682	diff=0.000317279
 -0.855340	 -0.857150	diff=0.00181043
  0.054962	  0.055070	diff=0.000108537
 -0.108978	 -0.108419	diff=0.000559092
  1.272769	  1.254360	diff=0.0184092
  0.000002	  0.000002	diff=1.1463e-08
  0.476651	  0.473620	diff=0.00303052
  0.122645	  0.123101	diff=0.000455664
 -0.311660	 -0.310889	diff=0.000770932
 -0.348081	 -0.349501	diff=0.00141992
  0.359056	  0.358154	diff=0.000901679
 -0.026671	 -0.026604	diff=6.66915e-05
 -0.000266	 -0.000265	diff=1.00308e-06
 -0.000001	 -0.000001	diff=5.54706e-09
  0.000007	  0.000007	diff=5.53458e-08
 -0.000000	 -0.000000	diff=4.02612e-12
 -0.033422	 -0.040448	diff=0.00702548
 -0.021014	 -0.021015	diff=1.07779e-06
 -0.010037	 -0.010033	diff=3.62453e-06
 -0.002583	 -0.002583	diff=3.30602e-07
  0.001963	 -0.000637	diff=0.00259928
 -0.000000	 -0.000000	diff=2.0484e-12
 -0.084897	 -0.085000	diff=0.000102408
  local_diff=9.46351
# W_tgt{2}, [8 4]
 -0.067048	 -0.066879	diff=0.000168609
 -0.002022	 -0.002027	diff=5.6241e-06
  2.639224	  2.643445	diff=0.00422108
 -0.001868	 -0.001863	diff=4.68043e-06
 -0.144376	 -0.144327	diff=4.93138e-05
 -0.021750	 -0.021742	diff=8.26169e-06
 -0.000377	 -0.000384	diff=6.88706e-06
 -0.097278	 -0.097820	diff=0.000541516
 -0.337594	 -0.338006	diff=0.000412173
 -0.848844	 -0.849370	diff=0.000525751
  0.017127	  0.017046	diff=8.08078e-05
 -0.150090	 -0.150266	diff=0.000175417
 -2.244617	 -2.263791	diff=0.0191747
 -0.301278	 -0.302497	diff=0.00121896
-11.097586	-15.471111	diff=4.37352
 -1.705289	 -1.706050	diff=0.000761059
 -0.815940	 -0.813121	diff=0.00281954
 -0.011686	 -0.011894	diff=0.000208274
 -0.081805	 -0.081996	diff=0.000191557
 -0.395191	 -0.395126	diff=6.58093e-05
 -1.088422	 -1.085797	diff=0.00262517
 -0.390058	 -0.390263	diff=0.000204916
  0.968236	  0.970129	diff=0.00189272
 -2.979695	 -2.973407	diff=0.00628751
  0.058841	  0.060224	diff=0.00138282
 -0.476163	 -0.476089	diff=7.34199e-05
 -1.821014	 -1.818654	diff=0.00236011
  1.162310	  1.162279	diff=3.12909e-05
  0.155519	  0.155486	diff=3.28991e-05
  0.274470	  0.275019	diff=0.000549244
 -1.069853	 -1.080967	diff=0.0111139
 11.627334	 11.615886	diff=0.0114484
  local_diff=4.44217
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000120	 -0.000122	diff=1.41149e-06
 -0.000000	 -0.000000	diff=2.86601e-10
 -0.000000	 -0.000000	diff=2.41099e-08
 -0.000000	 -0.000000	diff=2.78275e-08
  local_diff=1.46371e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.57234e-11
  0.000000	  0.000000	diff=2.2417e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
559.422329	-167.970287	diff=727.393
 86.801647	 78.323606	diff=8.47804
 -7.093948	 -7.355292	diff=0.261344
  3.874106	  3.800851	diff=0.0732549
  local_diff=736.205
# W_a, [2 2]
 -0.000008	 -0.000008	diff=1.2119e-08
  0.000294	  0.000315	diff=2.02761e-05
  0.001069	  0.001069	diff=1.51793e-09
 -0.043733	 -0.043731	diff=2.53705e-06
  local_diff=2.28268e-05
# W_h, [2 4]
 -0.023336	 -0.023335	diff=7.74494e-07
 -0.040031	 -0.040030	diff=9.22895e-07
  0.953211	  0.954506	diff=0.00129503
  1.635845	  1.637389	diff=0.00154428
  0.495630	  0.493584	diff=0.00204581
  3.290073	  3.285275	diff=0.00479753
  0.108388	  0.120890	diff=0.0125022
  9.094417	  8.793549	diff=0.300869
  local_diff=0.323055
# W_soft, [5 2]
  5.084964	  5.080611	diff=0.00435259
  3.185797	  3.184884	diff=0.000913657
 -0.403325	 -0.404028	diff=0.000702595
 -4.004497	 -4.005270	diff=0.000772983
 -3.852635	 -3.856197	diff=0.0035624
 -5.137220	 -5.143014	diff=0.00579312
  4.933049	  4.932879	diff=0.000169774
 -0.674094	 -0.674468	diff=0.00037425
  0.078470	  0.077928	diff=0.000541492
  0.812158	  0.806674	diff=0.00548365
  local_diff=0.0226665
# Num params=186, abs_diff=750.463
Elapsed time is 3.026946 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charOpt = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.65218e-34
  0.000000	  0.000000	diff=5.91556e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.09858e-34
  0.000000	 -0.000000	diff=7.47991e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78914e-73
  0.000000	 -0.000000	diff=5.65567e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.14971e-65
  0.000000	  0.000000	diff=3.21759e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.67058e-66
  0.000000	 -0.000000	diff=1.32023e-65
  0.000000	 -0.000000	diff=6.30511e-67
  0.000000	 -0.000000	diff=2.40542e-66
  0.000000	  0.000000	diff=1.58221e-66
  0.000000	 -0.000000	diff=1.03471e-65
  0.000000	  0.000000	diff=2.21115e-36
  0.000000	 -0.000000	diff=7.89148e-36
  0.000000	 -0.000000	diff=6.91426e-59
  0.000000	  0.000000	diff=5.43438e-58
  0.000000	  0.000000	diff=1.75048e-59
  0.000000	  0.000000	diff=9.03782e-59
  0.000000	 -0.000000	diff=7.68126e-59
  0.000000	  0.000000	diff=4.82943e-58
  0.000000	 -0.000000	diff=3.70742e-31
  0.000000	  0.000000	diff=3.56301e-28
  0.000000	  0.000000	diff=1.05848e-59
  0.000000	 -0.000000	diff=5.8891e-59
  0.000000	 -0.000000	diff=5.03736e-60
  0.000000	 -0.000000	diff=8.12493e-60
  0.000000	  0.000000	diff=7.41006e-60
  0.000000	 -0.000000	diff=4.89434e-59
  0.000000	  0.000000	diff=1.78997e-29
  0.000000	 -0.000000	diff=2.65034e-29
  0.000000	 -0.000000	diff=2.66933e-59
  0.000000	  0.000000	diff=5.54468e-58
  0.000000	  0.000000	diff=1.53992e-59
  0.000000	  0.000000	diff=2.12029e-58
  0.000000	 -0.000000	diff=1.51282e-59
  0.000000	  0.000000	diff=7.93366e-58
  0.000000	  0.000000	diff=7.42823e-29
  0.000000	  0.000000	diff=2.02294e-28
  local_diff=6.77651e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.57509e-45
  0.000000	  0.000000	diff=1.6093e-45
  0.000000	  0.000000	diff=3.50325e-45
  0.000000	 -0.000000	diff=8.75812e-47
  local_diff=7.77522e-45
# v_a, [1 2]
  0.000000	 -0.000000	diff=1.26117e-44
  0.000000	 -0.000000	diff=2.1742e-44
  local_diff=3.43537e-44
# W_h, [2 4]
  0.000000	 -0.000000	diff=7.31179e-31
  0.000000	 -0.000000	diff=5.18298e-31
  0.000000	  0.000000	diff=1.27282e-29
  0.000000	 -0.000000	diff=2.22416e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 3.249331 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.24178e-10
 -0.000001	 -0.000001	diff=3.35735e-08
 -0.000000	 -0.000000	diff=9.23208e-13
  0.000000	 -0.000000	diff=1.22998e-14
  0.000000	  0.000000	diff=7.50109e-16
  0.000000	 -0.000000	diff=3.45142e-17
  0.000002	  0.000001	diff=1.16688e-06
  0.000001	  0.000000	diff=5.16119e-07
  0.000000	  0.000000	diff=1.9336e-10
  0.000002	  0.000002	diff=5.22776e-08
  0.000000	  0.000000	diff=3.24497e-12
  0.000000	  0.000000	diff=1.56351e-14
  0.000000	 -0.000000	diff=5.41598e-21
  0.000000	  0.000000	diff=1.09328e-21
 -0.000000	 -0.000000	diff=7.75269e-12
  0.000000	 -0.000000	diff=6.10028e-13
  0.000000	 -0.000000	diff=1.96277e-15
  0.000000	 -0.000000	diff=3.53623e-16
  0.000000	 -0.000000	diff=4.27432e-16
  0.000000	  0.000000	diff=3.03856e-16
  0.000000	 -0.000000	diff=2.28356e-15
  0.000000	 -0.000000	diff=2.00771e-16
 -0.000001	 -0.000000	diff=5.3494e-07
  0.000000	  0.000000	diff=2.08217e-12
  0.000000	 -0.000000	diff=1.02119e-15
  0.000000	 -0.000000	diff=9.75781e-17
  0.000000	 -0.000000	diff=2.28338e-16
  0.000000	  0.000000	diff=3.02516e-16
  0.000000	 -0.000000	diff=1.2721e-15
  0.000000	  0.000000	diff=2.35946e-16
  0.000000	 -0.000000	diff=1.13198e-07
  0.000000	  0.000000	diff=3.03765e-11
  local_diff=2.41735e-06
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.20862e-14
  0.000000	 -0.000000	diff=4.4048e-14
  0.000000	 -0.000000	diff=2.62182e-16
  0.000000	 -0.000000	diff=6.57943e-15
  0.000000	  0.000000	diff=2.8293e-14
  0.000000	 -0.000000	diff=5.21379e-14
  0.000001	  0.000001	diff=4.33776e-08
  0.000001	  0.000001	diff=1.70611e-12
  0.000000	 -0.000000	diff=2.77795e-16
  0.000000	 -0.000000	diff=5.63374e-15
  0.000000	 -0.000000	diff=8.36424e-16
  0.000000	 -0.000000	diff=7.17424e-16
  0.000000	 -0.000000	diff=1.50588e-15
  0.000000	 -0.000000	diff=3.93762e-15
 -0.000001	 -0.000001	diff=9.18354e-09
  0.000000	  0.000000	diff=9.56181e-13
  0.000000	  0.000000	diff=2.00757e-15
  0.000000	 -0.000000	diff=7.5417e-15
  0.000000	 -0.000000	diff=7.11241e-16
  0.000000	 -0.000000	diff=1.42646e-15
  0.000000	  0.000000	diff=1.64769e-15
  0.000000	 -0.000000	diff=7.46326e-15
 -0.000000	 -0.000000	diff=6.16821e-10
  0.000001	  0.000001	diff=9.01622e-13
  0.000000	 -0.000000	diff=1.97847e-14
  0.000000	  0.000000	diff=4.11782e-14
  0.000000	  0.000000	diff=3.85982e-16
  0.000000	  0.000000	diff=5.81371e-15
  0.000000	 -0.000000	diff=2.50204e-14
  0.000000	  0.000000	diff=4.82658e-14
 -0.000000	 -0.000000	diff=2.25934e-12
 -0.000001	 -0.000001	diff=8.4946e-10
  local_diff=5.40335e-08
# W_tgt{1}, [8 6]
 -0.057961	 -0.057943	diff=1.81611e-05
  0.082130	  0.081320	diff=0.000809803
 -4.711075	 -4.746947	diff=0.0358716
 -0.000141	 -0.000141	diff=1.87113e-07
 -0.000000	 -0.000000	diff=1.37043e-09
 -2.439245	 -2.452244	diff=0.0129988
 -0.000000	 -0.000000	diff=1.34762e-09
  0.000588	  0.000586	diff=1.41194e-06
 -0.281804	 -0.281379	diff=0.000424902
 -0.057346	 -0.057964	diff=0.000617817
  4.566755	  4.533992	diff=0.0327632
 -0.000691	 -0.000686	diff=4.42706e-06
 -0.000001	 -0.000001	diff=8.18769e-09
 -9.028585	 -9.189446	diff=0.16086
  0.000000	  0.000000	diff=1.5805e-09
  0.002880	  0.002847	diff=3.34814e-05
  0.188818	  0.189014	diff=0.000196648
  0.025853	  0.025729	diff=0.000124206
  1.551040	  1.547162	diff=0.00387783
  0.000000	  0.000000	diff=3.15128e-10
  0.000000	  0.000000	diff=2.28175e-10
 -0.000034	 -0.000034	diff=1.49831e-07
  0.000000	  0.000000	diff=1.82911e-10
 -0.000000	 -0.000000	diff=1.64056e-09
  0.138579	  0.138685	diff=0.000105682
 -0.025194	 -0.025309	diff=0.000115024
  1.138759	  1.136673	diff=0.0020854
  0.000000	  0.000000	diff=1.67986e-10
  0.000000	  0.000000	diff=1.244e-10
 -0.000025	 -0.000025	diff=7.26434e-08
  0.000000	  0.000000	diff=8.3967e-11
 -0.000000	 -0.000000	diff=8.29957e-10
  0.166659	  0.166812	diff=0.000153047
 -0.000277	 -0.000276	diff=1.06979e-06
  1.402669	  1.399428	diff=0.00324017
  0.000000	  0.000000	diff=2.47764e-10
  0.000000	  0.000000	diff=1.83855e-10
 -0.000030	 -0.000030	diff=1.12077e-07
  0.000000	  0.000000	diff=6.04461e-11
 -0.000000	 -0.000000	diff=1.84561e-09
  0.000002	  0.000002	diff=1.49322e-12
  0.000001	  0.000001	diff=2.03827e-09
  0.001552	  0.001559	diff=7.16107e-06
  0.000000	  0.000000	diff=1.25207e-12
  0.000000	  0.000000	diff=1.11832e-14
 -0.000000	 -0.000000	diff=1.49735e-11
 -0.000000	 -0.000000	diff=7.91131e-13
 -0.000000	  0.000000	diff=3.53705e-12
  local_diff=0.254311
# W_tgt{2}, [8 4]
  0.985819	  0.989642	diff=0.00382325
 19.976366	 20.240821	diff=0.264455
  0.000023	  0.000023	diff=8.02204e-08
  3.162372	  3.160220	diff=0.00215259
  0.243761	  0.243327	diff=0.000434068
  0.320536	  0.321918	diff=0.00138185
  0.021342	  0.021189	diff=0.000152755
161.164801	164.362437	diff=3.19764
 -0.143424	 -0.143040	diff=0.000384105
 -3.085401	 -3.067347	diff=0.0180532
 -0.000034	 -0.000034	diff=1.16573e-07
 -0.201871	 -0.201167	diff=0.000704359
 -0.165536	 -0.164938	diff=0.000597789
 -0.179014	 -0.178879	diff=0.000135095
 -0.018542	 -0.017711	diff=0.000830752
 -0.506281	 -0.505969	diff=0.000312723
  0.026047	  0.026085	diff=3.76603e-05
  0.847236	  0.848913	diff=0.00167725
 -0.013916	 -0.013916	diff=1.13647e-07
  0.060027	  0.060094	diff=6.73038e-05
  0.036315	  0.036372	diff=5.67554e-05
  0.001684	  0.001681	diff=3.16828e-06
 -0.004608	 -0.004636	diff=2.7914e-05
 -0.376524	 -0.375672	diff=0.000852204
  0.911284	  0.912154	diff=0.000869803
  0.306710	  0.306692	diff=1.80763e-05
  0.529525	  0.529676	diff=0.000151198
  0.703426	  0.703283	diff=0.000142436
  0.545334	  0.545870	diff=0.000536039
  0.063470	  0.063543	diff=7.31266e-05
 -0.361964	 -0.361323	diff=0.000641495
 21.282467	 21.459658	diff=0.177191
  local_diff=3.6734
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=9.35416e-08
 -0.000003	 -0.000003	diff=1.23432e-07
 -0.000000	 -0.000000	diff=1.49049e-12
 -0.000000	 -0.000000	diff=6.31336e-13
  local_diff=2.16976e-07
# W_emb_tgt, [2 5]
 -2.639490	 -2.653357	diff=0.0138664
  1.757882	  1.752431	diff=0.00545156
  0.000000	  0.000000	diff=4.74772e-10
  0.000000	  0.000000	diff=3.77644e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -5.327623	 -5.016245	diff=0.311378
  3.521748	  3.613864	diff=0.0921155
 -9.643619	 -9.914613	diff=0.270994
  5.197446	  5.123369	diff=0.074077
  local_diff=0.767883
# W_src_char{1}, [8 4]
  0.000000	  0.000000	diff=5.60587e-10
  0.000000	  0.000000	diff=1.42261e-10
  0.000000	 -0.000000	diff=1.43128e-29
  0.000000	 -0.000000	diff=1.26851e-19
  0.000027	  0.000003	diff=2.42592e-05
  0.000000	  0.000000	diff=5.21831e-12
 -0.000000	 -0.000000	diff=1.28672e-08
  0.000000	  0.000000	diff=4.31258e-21
  0.000000	  0.000000	diff=4.93723e-10
  0.000000	  0.000000	diff=1.38413e-10
  0.000000	 -0.000000	diff=1.27569e-29
  0.000000	 -0.000000	diff=1.74385e-19
  0.000024	  0.000003	diff=2.16754e-05
  0.000000	  0.000000	diff=5.26897e-12
 -0.000000	 -0.000000	diff=1.15285e-08
  0.000000	  0.000000	diff=3.84378e-21
  0.000000	 -0.000000	diff=2.10597e-27
  0.000000	 -0.000000	diff=5.50205e-28
  0.000000	  0.000000	diff=4.65947e-46
  0.000000	 -0.000000	diff=1.72586e-20
  0.000000	 -0.000000	diff=4.92406e-22
  0.000000	 -0.000000	diff=1.40969e-20
  0.000000	  0.000000	diff=5.18828e-26
  0.000000	 -0.000000	diff=1.40385e-37
  0.000000	  0.000000	diff=6.193e-26
  0.000000	  0.000000	diff=1.61799e-26
  0.000000	 -0.000000	diff=1.37021e-44
  0.000000	 -0.000000	diff=1.58555e-20
  0.000000	  0.000000	diff=2.44712e-21
  0.000000	 -0.000000	diff=1.29509e-20
  0.000000	 -0.000000	diff=1.52572e-24
  0.000000	  0.000000	diff=4.12853e-36
  local_diff=4.59604e-05
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=1.84117e-22
  0.000000	 -0.000000	diff=3.2301e-21
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.7093e-21
  0.000000	 -0.000000	diff=4.09538e-21
  0.000000	  0.000000	diff=9.0678e-20
  0.000000	  0.000000	diff=5.6536e-20
 -0.000020	 -0.000002	diff=1.78784e-05
 -0.000017	 -0.000002	diff=1.51732e-05
  local_diff=3.30516e-05
# W_h, [2 4]
  0.000000	  0.000000	diff=4.14388e-12
  0.000000	  0.000000	diff=5.36793e-13
  0.000000	  0.000000	diff=3.15734e-12
 -0.000000	 -0.000000	diff=9.42019e-13
 -0.325991	 -0.326420	diff=0.000429169
 -0.676585	 -0.675622	diff=0.000963318
  8.394904	  8.403637	diff=0.00873297
  6.269603	  6.275263	diff=0.00566068
  local_diff=0.0157861
# W_soft, [5 2]
 -7.881623	 -7.887496	diff=0.00587307
 -0.213277	 -0.214481	diff=0.00120316
 -2.009898	 -2.013442	diff=0.00354447
 -4.774396	 -4.779238	diff=0.0048422
 14.894753	 14.894657	diff=9.60606e-05
 -3.262644	 -3.267948	diff=0.00530332
  0.255077	  0.254012	diff=0.00106472
 -6.271496	 -6.274698	diff=0.00320129
 -1.158563	 -1.162947	diff=0.00438388
 10.451615	 10.451580	diff=3.49931e-05
  local_diff=0.0295472
# Num params=224, abs_diff=4.74101
Elapsed time is 4.740233 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 2
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=5.29916e-20
 -0.000654	 -0.003369	diff=0.0027145
  0.000000	  0.000000	diff=1.02764e-12
  0.002048	  0.012410	diff=0.0103617
  0.000000	  0.000000	diff=1.4376e-15
 -0.000000	 -0.000000	diff=4.76581e-10
  0.000000	  0.000000	diff=5.77522e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.71038e-20
  0.000787	  0.004282	diff=0.00349548
 -0.000000	 -0.000000	diff=4.37804e-12
 -0.002463	 -0.015775	diff=0.0133119
  0.000000	 -0.000000	diff=1.82743e-15
 -0.000000	 -0.000000	diff=7.43666e-10
  0.000000	  0.000000	diff=9.28947e-11
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=8.34125e-21
 -0.000100	 -0.000524	diff=0.000424528
  0.000000	  0.000000	diff=1.59925e-13
  0.000312	  0.001931	diff=0.00161905
  0.000000	  0.000000	diff=2.23724e-16
  0.000000	 -0.000000	diff=3.80941e-13
  0.000000	  0.000000	diff=2.67938e-30
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.50705e-32
  0.000000	  0.000000	diff=8.61877e-16
  0.000000	 -0.000000	diff=4.80669e-25
  0.000000	 -0.000000	diff=1.7431e-15
  0.000000	 -0.000000	diff=2.18063e-27
  0.000000	  0.000000	diff=3.02453e-24
  0.000000	 -0.000000	diff=1.22573e-36
  0.000000	  0.000000	diff=0
  local_diff=0.0319271
# W_src{2}, [8 4]
-23.967476	-42.676395	diff=18.7089
  0.213302	  0.182618	diff=0.0306835
 -0.031399	 -0.022662	diff=0.00873718
  0.001160	  0.001137	diff=2.33936e-05
 -1.234819	 -2.322088	diff=1.08727
  0.171475	  0.226312	diff=0.0548371
 -0.000169	 -0.000264	diff=9.52834e-05
 -0.000001	 -0.000001	diff=8.72106e-08
  0.000000	  0.000000	diff=1.08161e-10
 -0.000000	 -0.000000	diff=4.67534e-12
  0.000000	 -0.000000	diff=2.52572e-13
  0.000000	 -0.000000	diff=1.66352e-15
  0.000000	  0.000000	diff=6.48039e-12
 -0.000000	 -0.000000	diff=4.96428e-12
  0.000000	  0.000000	diff=4.64713e-16
  0.000000	  0.000000	diff=2.79862e-18
 -0.763832	 -1.018687	diff=0.254855
  0.004661	  0.003119	diff=0.00154198
 -0.019198	  0.005475	diff=0.0246722
  0.001214	  0.000073	diff=0.00114091
  0.099263	 -0.140304	diff=0.239567
  0.007648	  0.002123	diff=0.00552535
 -1.021137	  0.459774	diff=1.48091
 -2.102155	 -0.985768	diff=1.11639
  0.003544	  0.007146	diff=0.00360183
 -0.000023	 -0.000020	diff=3.23027e-06
  0.000038	 -0.000043	diff=8.06185e-05
 -0.000003	  0.000000	diff=3.36798e-06
 -0.000115	  0.000684	diff=0.000798798
 -0.000033	 -0.000048	diff=1.58039e-05
  0.002212	 -0.001724	diff=0.00393581
  0.004379	  0.001022	diff=0.00335718
  local_diff=23.027
# W_tgt{1}, [8 6]
 -0.072592	 -0.074223	diff=0.001631
 17.336446	 20.151933	diff=2.81549
 -0.618312	 -0.855391	diff=0.237079
 -0.196171	 -1.541428	diff=1.34526
  0.019315	  0.050035	diff=0.0307201
  1.045372	  4.391475	diff=3.3461
 -0.000003	 -0.000001	diff=1.32073e-06
  0.010266	  0.004312	diff=0.00595457
 -0.352443	 -0.360433	diff=0.00799023
-16.917068	-19.452830	diff=2.53576
  0.586725	  0.797401	diff=0.210676
 -0.961656	 -7.485349	diff=6.52369
  0.093328	  0.242978	diff=0.14965
  3.753316	 18.921827	diff=15.1685
 -0.000013	 -0.000007	diff=6.57055e-06
  0.050345	  0.020939	diff=0.0294061
 -0.119046	  0.009479	diff=0.128525
  3.274312	  3.618729	diff=0.344417
  0.393515	  0.441978	diff=0.0484637
  0.451347	  3.581091	diff=3.12974
  0.057885	  0.151193	diff=0.0933087
  0.247301	  0.704008	diff=0.456707
 -0.000010	 -0.000005	diff=5.01148e-06
  0.023888	  0.045436	diff=0.0215486
  0.150233	  0.143360	diff=0.00687326
 -2.930852	 -3.237123	diff=0.306272
  0.287633	  0.321401	diff=0.0337676
 -0.550129	 -4.309769	diff=3.75964
 -0.043367	 -0.110783	diff=0.0674157
 -0.158307	 -0.543625	diff=0.385318
  0.000006	  0.000002	diff=3.23972e-06
 -0.019642	 -0.028987	diff=0.00934488
  0.056408	  0.118416	diff=0.0620082
 -0.000076	 -0.000092	diff=1.62364e-05
  0.227831	  0.292724	diff=0.0648929
 -0.000015	 -0.000043	diff=2.84639e-05
  0.000000	  0.000000	diff=6.3417e-09
 -0.000052	 -0.000069	diff=1.74113e-05
  0.000000	  0.000000	diff=8.68945e-10
 -0.000000	 -0.000001	diff=9.27659e-07
  0.000531	  0.001195	diff=0.000664692
  0.315018	  0.536837	diff=0.221819
 -0.014151	 -0.012180	diff=0.00197096
  0.000043	  0.000066	diff=2.26026e-05
  0.000001	  0.000002	diff=1.35449e-06
  0.544542	  0.902811	diff=0.358269
  0.000000	  0.000000	diff=3.51463e-10
  0.000000	  0.000001	diff=5.92028e-07
  local_diff=41.909
# W_tgt{2}, [8 4]
  1.348428	  1.667696	diff=0.319268
 20.692055	 25.474092	diff=4.78204
 -0.002887	 -0.005600	diff=0.00271335
 -0.326403	 -0.452630	diff=0.126227
  0.153058	 -0.061680	diff=0.214737
  0.444751	  0.521778	diff=0.0770269
  0.117293	  0.362152	diff=0.244859
 82.745783	 96.796458	diff=14.0507
 -0.092378	  0.231630	diff=0.324008
 -2.540441	 -1.922998	diff=0.617444
 -0.049747	 -0.142359	diff=0.092612
 -0.103140	 -0.089089	diff=0.0140507
 -5.335377	-16.531254	diff=11.1959
 -0.699881	 -1.324800	diff=0.624919
  0.195900	  9.734700	diff=9.5388
  0.056080	  0.327636	diff=0.271556
 -1.938971	 -2.409943	diff=0.470971
  0.127623	 -0.089709	diff=0.217331
  0.390172	  0.483153	diff=0.0929814
 -0.142912	 -0.128708	diff=0.0142041
 -1.416788	 -1.895422	diff=0.478634
  0.017154	  0.358228	diff=0.341074
  4.152271	  7.121173	diff=2.9689
 -4.533442	 -4.653787	diff=0.120345
  1.107366	  1.529863	diff=0.422496
 -2.668296	 -2.439380	diff=0.228916
  0.743321	  1.062481	diff=0.31916
  0.635143	  0.483344	diff=0.151799
  0.362020	  0.137603	diff=0.224417
 -0.300101	 -0.028230	diff=0.271871
 -0.649692	 -1.093827	diff=0.444134
 11.028371	  7.324226	diff=3.70414
  local_diff=52.9682
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=1.21473e-09
  0.000000	  0.000000	diff=1.63007e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.002417	  0.015378	diff=0.0129613
  0.002759	  0.017466	diff=0.0147072
  0.000000	  0.000000	diff=1.83415e-11
 -0.000000	  0.000000	diff=2.66969e-11
  local_diff=0.0276685
# W_emb_tgt, [2 5]
-41.375186	-46.503599	diff=5.12841
-10.466532	-11.911739	diff=1.44521
  0.000000	  0.000001	diff=5.68006e-07
  0.000000	  0.000000	diff=1.51572e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  2.237890	 91.898871	diff=89.661
 -3.596149	-62.822284	diff=59.2261
  5.234786	  8.763855	diff=3.52907
 -2.533096	 -4.524643	diff=1.99155
  local_diff=160.981
# W_tgt_char{1}, [8 4]
 -0.155622	 -0.155368	diff=0.000254437
  0.002070	  0.002061	diff=9.80898e-06
  0.000000	 -0.000000	diff=6.4115e-32
 -0.000000	 -0.000000	diff=2.27971e-09
  0.233754	  0.233612	diff=0.000142157
  0.821428	  0.823497	diff=0.0020691
  2.746261	  2.748889	diff=0.00262832
 -0.124580	 -0.126637	diff=0.00205713
 -0.971343	 -0.971277	diff=6.67008e-05
  0.246582	  0.246703	diff=0.000121111
  0.000000	 -0.000000	diff=5.71454e-32
 -0.000000	 -0.000000	diff=8.24281e-09
 -0.384165	 -0.384646	diff=0.000481315
  2.055277	  2.063150	diff=0.00787279
 -0.423752	 -0.422442	diff=0.00130938
 -0.811203	 -0.810915	diff=0.000288346
 -0.000046	 -0.000046	diff=1.43715e-08
  0.000000	  0.000000	diff=4.4682e-15
  0.000000	  0.000000	diff=3.04849e-34
 -0.000000	 -0.000000	diff=2.75778e-11
  0.000001	  0.000001	diff=8.46173e-10
  0.202380	  0.202461	diff=8.05538e-05
 -0.000000	 -0.000000	diff=3.20916e-12
  0.000000	 -0.000000	diff=5.80609e-12
 -0.000013	 -0.000013	diff=9.57817e-09
  0.000000	  0.000000	diff=3.21294e-15
  0.000000	 -0.000000	diff=4.5018e-35
 -0.000000	 -0.000000	diff=1.41901e-11
  0.000000	  0.000000	diff=5.2481e-11
  0.059882	  0.059859	diff=2.35098e-05
 -0.000000	 -0.000000	diff=1.53942e-12
  0.000000	 -0.000000	diff=8.73549e-14
  local_diff=0.0174047
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.949194	 -0.946895	diff=0.00229923
  0.677443	  0.678676	diff=0.00123308
  0.000000	  0.000000	diff=9.78403e-16
  0.000000	  0.000000	diff=7.93589e-16
 -0.000000	 -0.000000	diff=2.45774e-12
 -0.000000	 -0.000000	diff=1.95605e-10
  local_diff=0.00353231
# W_h, [2 4]
  1.310169	  2.228280	diff=0.918111
 -1.029203	 -2.007582	diff=0.978378
 -0.012512	 -0.019001	diff=0.00648813
  0.003148	  0.010135	diff=0.00698737
  0.285294	  0.089309	diff=0.195985
  3.396429	  2.608402	diff=0.788026
  5.737741	  2.639173	diff=3.09857
  7.095367	 17.182012	diff=10.0866
  local_diff=16.0792
# W_soft, [5 2]
 -1.189027	 -1.197234	diff=0.00820673
 -0.434854	 -0.437344	diff=0.00249
 -7.858412	 -7.865210	diff=0.00679784
 -1.836825	 -1.843846	diff=0.00702107
 11.344741	 11.343634	diff=0.00110696
  0.447493	  0.440709	diff=0.00678373
  0.316286	  0.313902	diff=0.00238458
 -4.448612	 -4.454413	diff=0.00580124
  1.182404	  1.176529	diff=0.00587509
  2.524998	  2.523273	diff=0.00172436
  local_diff=0.0481916
# W_soft_char, [5 2]
  0.142820	  0.142613	diff=0.000207182
 -0.068409	 -0.068529	diff=0.000120621
 -0.056110	 -0.056226	diff=0.000116075
  2.013721	  2.013290	diff=0.000430882
 -2.030854	 -2.031147	diff=0.000293348
  0.041567	  0.041550	diff=1.66289e-05
  0.022692	  0.022669	diff=2.30915e-05
  0.310145	  0.310112	diff=3.3344e-05
  0.566290	  0.563434	diff=0.00285615
 -0.934870	 -0.937765	diff=0.00289468
  local_diff=0.00699201
# Num params=234, abs_diff=295.1
Elapsed time is 5.690347 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=6.98392e-09
  0.000002	 -0.000018	diff=1.92463e-05
  0.000000	  0.000000	diff=7.02503e-13
  0.000000	 -0.000000	diff=3.4857e-18
  0.000000	 -0.000000	diff=4.18973e-16
  0.000000	  0.000000	diff=5.94062e-17
  0.000000	 -0.000000	diff=3.47237e-07
 -0.000000	 -0.000000	diff=9.37309e-08
  0.000000	  0.000000	diff=9.11496e-09
 -0.000002	  0.000022	diff=2.43455e-05
  0.000000	 -0.000000	diff=8.93042e-13
  0.000000	  0.000000	diff=4.66847e-18
  0.000000	  0.000000	diff=3.02511e-21
  0.000000	 -0.000000	diff=9.14751e-22
  0.000000	  0.000000	diff=2.37577e-12
  0.000000	  0.000000	diff=7.46617e-13
  0.000000	  0.000000	diff=6.73794e-16
  0.000000	 -0.000000	diff=4.99816e-16
  0.000000	  0.000000	diff=2.2056e-16
  0.000000	  0.000000	diff=1.99502e-17
  0.000000	  0.000000	diff=8.94353e-16
  0.000000	 -0.000000	diff=4.79865e-16
 -0.000000	  0.000000	diff=2.51546e-07
  0.000000	 -0.000000	diff=1.03504e-07
  0.000000	  0.000000	diff=1.73449e-17
  0.000000	  0.000000	diff=1.89673e-15
  0.000000	 -0.000000	diff=4.67104e-17
  0.000000	 -0.000000	diff=3.86655e-16
  0.000000	 -0.000000	diff=2.93656e-17
  0.000000	  0.000000	diff=1.51012e-15
  0.000000	 -0.000000	diff=1.51491e-07
 -0.000000	 -0.000000	diff=7.43268e-08
  local_diff=4.46298e-05
# W_src{2}, [8 4]
  0.000000	 -0.000000	diff=6.40908e-15
  0.000000	  0.000000	diff=7.91973e-15
  0.000000	  0.000000	diff=6.0596e-16
  0.000000	 -0.000000	diff=1.3015e-16
  0.000000	 -0.000000	diff=7.20919e-15
  0.000000	  0.000000	diff=7.05808e-15
  0.000000	 -0.000000	diff=3.30907e-07
  0.000000	 -0.000001	diff=6.88982e-07
  0.000000	  0.000000	diff=1.03761e-14
  0.000000	 -0.000000	diff=1.45817e-14
  0.000000	  0.000000	diff=6.01285e-17
  0.000000	  0.000000	diff=1.74165e-15
  0.000000	  0.000000	diff=1.2876e-14
  0.000000	 -0.000000	diff=1.243e-14
 -0.000000	  0.000001	diff=6.83486e-07
 -0.000000	 -0.000001	diff=1.28007e-06
  0.000000	  0.000000	diff=1.87537e-15
  0.000000	  0.000000	diff=1.60938e-15
  0.000000	  0.000000	diff=2.06874e-16
  0.000000	  0.000000	diff=1.00267e-15
  0.000000	  0.000000	diff=2.5611e-15
  0.000000	  0.000000	diff=1.26213e-15
 -0.000000	  0.000000	diff=1.20137e-07
  0.000000	 -0.000000	diff=1.51954e-07
  0.000000	 -0.000000	diff=3.123e-15
  0.000000	 -0.000000	diff=8.95566e-15
  0.000000	 -0.000000	diff=5.35279e-16
  0.000000	 -0.000000	diff=6.07476e-15
  0.000000	 -0.000000	diff=4.45897e-15
  0.000000	 -0.000000	diff=1.40444e-14
  0.000000	 -0.000000	diff=2.22188e-07
 -0.000000	 -0.000000	diff=1.29125e-07
  local_diff=3.60685e-06
# W_tgt{1}, [8 6]
 -0.004534	 -0.005945	diff=0.00141029
  0.059665	  0.216061	diff=0.156395
 -7.731177	-11.513694	diff=3.78252
 -0.000595	 -0.000594	diff=6.64235e-07
  0.000003	  0.000003	diff=2.69948e-09
 -1.226434	 -1.178373	diff=0.0480612
 -0.000000	 -0.000000	diff=3.01584e-08
  0.413923	  0.350937	diff=0.0629867
 -0.022122	 -0.028867	diff=0.00674545
 -1.301150	 -1.244285	diff=0.0568649
  7.302560	 10.996180	diff=3.69362
 -0.002904	 -0.002886	diff=1.80115e-05
  0.000016	  0.000016	diff=1.25132e-07
 -5.976683	 -5.722341	diff=0.254342
 -0.000000	  0.000000	diff=2.80536e-08
  2.002952	  1.704191	diff=0.298761
  0.005527	  0.007265	diff=0.00173751
  0.246183	  0.189081	diff=0.0571023
  0.950485	  1.444562	diff=0.494077
 -0.000001	 -0.000001	diff=1.47607e-07
  0.000000	  0.000000	diff=1.81967e-09
  0.373426	  0.315354	diff=0.0580723
  0.000000	  0.000000	diff=1.58136e-10
 -0.503608	 -0.425645	diff=0.0779629
  0.013706	  0.018054	diff=0.00434819
  0.612668	  0.470590	diff=0.142078
  2.313828	  3.504510	diff=1.19068
 -0.000002	 -0.000002	diff=3.61714e-07
  0.000000	  0.000000	diff=5.0526e-09
  0.930757	  0.783725	diff=0.147032
  0.000000	  0.000000	diff=4.08651e-10
 -1.253659	 -1.057825	diff=0.195834
  0.013019	  0.017146	diff=0.00412714
  0.575779	  0.438473	diff=0.137306
  2.489589	  3.738936	diff=1.24935
 -0.000002	 -0.000002	diff=3.43934e-07
  0.000000	  0.000000	diff=4.32116e-09
  0.883737	  0.744315	diff=0.139422
  0.000000	  0.000000	diff=3.9203e-10
 -1.190454	 -1.004633	diff=0.185821
  0.000000	  0.000000	diff=4.10068e-08
  0.000008	  0.000005	diff=2.70508e-06
  0.000170	  0.000276	diff=0.000105562
 -0.000000	 -0.000000	diff=3.30332e-12
  0.000000	  0.000000	diff=2.27408e-12
  0.000009	  0.000007	diff=1.35985e-06
  0.000000	  0.000000	diff=1.49664e-14
 -0.000012	 -0.000010	diff=1.83545e-06
  local_diff=12.4468
# W_tgt{2}, [8 4]
 -0.704681	 -1.209304	diff=0.504623
 29.834039	 43.269690	diff=13.4357
 -0.000422	 -0.000462	diff=4.00345e-05
  2.447698	  3.533056	diff=1.08536
 -0.395451	 -2.493794	diff=2.09834
  0.701641	  0.920232	diff=0.21859
  0.186024	  0.216911	diff=0.030887
172.963788	257.172370	diff=84.2086
 -0.064944	 -0.065262	diff=0.000317614
 -0.371677	 -0.372244	diff=0.000567129
  0.013283	  0.013071	diff=0.000211828
 -0.006941	 -0.005814	diff=0.00112697
 -0.133342	 -0.133653	diff=0.000311012
 -0.452285	 -0.452781	diff=0.000496054
 -2.492172	 -2.491745	diff=0.00042623
 -0.700944	 -0.672210	diff=0.0287334
  0.012590	  0.013275	diff=0.000685248
 -1.205960	 -1.281543	diff=0.0755829
  0.008608	  0.007861	diff=0.000746193
  0.023246	  0.021399	diff=0.0018467
  0.018704	  0.040679	diff=0.0219747
 -0.121566	 -0.125610	diff=0.00404396
 -0.052886	 -0.058006	diff=0.00512004
 -1.321119	 -1.507077	diff=0.185958
 -0.524073	 -0.533878	diff=0.00980531
  0.821692	  1.368394	diff=0.546702
 -0.361607	 -0.329539	diff=0.0320672
  0.632808	  0.792297	diff=0.159489
 -0.382461	 -0.479253	diff=0.0967912
 -0.161803	 -0.136210	diff=0.0255934
  0.199052	  0.178539	diff=0.0205128
 23.701800	 31.457780	diff=7.75598
  local_diff=110.557
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000003	 -0.000029	diff=3.1974e-05
  0.000003	 -0.000033	diff=3.66533e-05
 -0.000000	 -0.000000	diff=1.18127e-10
 -0.000000	 -0.000000	diff=1.31086e-10
  local_diff=6.86276e-05
# W_emb_tgt, [2 5]
 -4.673282	 -6.904800	diff=2.23152
  2.739500	  4.125798	diff=1.3863
  0.000000	  0.000000	diff=6.40986e-10
  0.000000	  0.000000	diff=4.66389e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -6.651747	 -7.435083	diff=0.783336
 12.240281	 11.765384	diff=0.474898
 -0.000264	 -0.000263	diff=1.30081e-06
  0.000101	  0.000121	diff=1.92229e-05
  local_diff=4.87607
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=8.59832e-11
  0.000000	 -0.000000	diff=2.34138e-11
  0.000000	  0.000000	diff=1.65086e-29
  0.000000	  0.000000	diff=1.46344e-19
  0.000000	 -0.000003	diff=3.74488e-06
  0.000000	 -0.000000	diff=6.45624e-13
 -0.000000	  0.000000	diff=2.02011e-09
  0.000000	 -0.000000	diff=5.97444e-21
  0.000000	 -0.000000	diff=7.78722e-11
  0.000000	 -0.000000	diff=2.08686e-11
  0.000000	  0.000000	diff=1.4714e-29
  0.000000	  0.000000	diff=2.01176e-19
  0.000000	 -0.000003	diff=3.33849e-06
  0.000000	 -0.000000	diff=5.75442e-13
 -0.000000	  0.000000	diff=1.80892e-09
  0.000000	 -0.000000	diff=5.32499e-21
  0.000000	  0.000000	diff=2.42905e-27
  0.000000	  0.000000	diff=7.62227e-28
  0.000000	 -0.000000	diff=5.37429e-46
  0.000000	  0.000000	diff=1.99088e-20
  0.000000	  0.000000	diff=5.67948e-22
  0.000000	  0.000000	diff=1.62596e-20
  0.000000	 -0.000000	diff=5.98423e-26
  0.000000	  0.000000	diff=1.94485e-37
  0.000000	 -0.000000	diff=7.14309e-26
  0.000000	 -0.000000	diff=2.24148e-26
  0.000000	  0.000000	diff=1.58042e-44
  0.000000	  0.000000	diff=1.82903e-20
  0.000000	 -0.000000	diff=2.82254e-21
  0.000000	  0.000000	diff=1.49377e-20
  0.000000	  0.000000	diff=1.75978e-24
  0.000000	 -0.000000	diff=5.71948e-36
  local_diff=7.08741e-06
# W_emb_src_char, [2 5]
  0.000000	 -0.000000	diff=2.12377e-22
  0.000000	  0.000000	diff=3.72589e-21
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=6.58214e-21
  0.000000	  0.000000	diff=4.72148e-21
  0.000000	 -0.000000	diff=1.04609e-19
  0.000000	 -0.000000	diff=6.52128e-20
 -0.000000	  0.000002	diff=2.66391e-06
 -0.000000	  0.000002	diff=2.26582e-06
  local_diff=4.92973e-06
# W_tgt_char{1}, [8 4]
 -0.005780	 -0.004987	diff=0.000792956
  0.033018	  0.032949	diff=6.86721e-05
  0.000000	 -0.000000	diff=8.71265e-16
  0.000000	  0.000000	diff=3.26004e-24
  0.089542	  0.089596	diff=5.43185e-05
  0.005060	  0.005050	diff=9.55535e-06
 -0.060858	 -0.060872	diff=1.39649e-05
 -0.079286	 -0.079760	diff=0.000474282
 -0.010566	 -0.007654	diff=0.00291217
  0.077976	  0.077890	diff=8.59557e-05
  0.000000	  0.000000	diff=1.32475e-15
  0.000000	 -0.000000	diff=3.2816e-24
  0.047475	  0.047490	diff=1.55099e-05
  0.077303	  0.077188	diff=0.000115015
  2.701851	  2.699008	diff=0.00284346
 -0.111385	 -0.111582	diff=0.000196797
  0.000003	  0.000003	diff=8.90883e-09
  0.000000	  0.000000	diff=1.60008e-21
  0.000000	 -0.000000	diff=2.93732e-18
  0.000000	  0.000000	diff=2.45596e-27
  0.000000	 -0.000000	diff=1.24526e-15
  0.000000	  0.000000	diff=9.68638e-16
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000355	  0.000356	diff=4.10909e-07
  0.000000	 -0.000000	diff=7.32903e-20
  0.000000	  0.000000	diff=4.34333e-17
  0.000000	 -0.000000	diff=4.51155e-26
  0.000000	  0.000000	diff=1.32141e-16
  0.000000	 -0.000000	diff=2.53916e-14
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.00758307
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.013131	  0.013231	diff=9.96633e-05
  0.001985	  0.001987	diff=2.25839e-06
 -0.000016	 -0.000016	diff=1.22769e-07
 -0.000002	 -0.000002	diff=2.78028e-09
  0.000000	 -0.000000	diff=1.31755e-14
  0.000000	 -0.000000	diff=2.72676e-14
  local_diff=0.000102047
# W_h, [2 4]
 -0.000000	  0.000000	diff=1.36708e-07
  0.000000	  0.000000	diff=1.64557e-08
  0.000000	 -0.000000	diff=3.66376e-08
 -0.000000	 -0.000000	diff=7.06703e-09
  0.662974	  0.286354	diff=0.37662
 -0.625573	 -0.127423	diff=0.49815
  0.879454	 19.565538	diff=18.6861
 13.982190	 14.417254	diff=0.435064
  local_diff=19.9959
# W_soft, [5 2]
 -0.771534	 -0.771536	diff=1.90039e-06
  0.023871	  0.023849	diff=2.2647e-05
 -4.545047	 -4.545049	diff=1.79736e-06
  2.423370	  2.420709	diff=0.00266117
  2.874690	  2.872028	diff=0.00266239
 -5.122689	 -5.122699	diff=9.51856e-06
  0.066884	  0.066746	diff=0.000137996
 -7.346218	 -7.346226	diff=7.82125e-06
  5.826661	  5.811541	diff=0.0151195
  6.605754	  6.590637	diff=0.0151172
  local_diff=0.0357419
# W_soft_char, [5 2]
  0.018975	  0.018964	diff=1.02297e-05
  0.005203	  0.005201	diff=2.07124e-06
 -0.012367	 -0.012378	diff=1.04975e-05
  0.001089	  0.001088	diff=5.24368e-07
 -0.012875	 -0.012876	diff=7.66089e-07
 -0.980835	 -0.981382	diff=0.000546266
 -0.156514	 -0.156657	diff=0.000143476
  1.038318	  1.037786	diff=0.000531956
 -0.051547	 -0.051594	diff=4.63289e-05
  0.151891	  0.151846	diff=4.43025e-05
  local_diff=0.00133642
# Num params=276, abs_diff=147.921
Elapsed time is 7.999839 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 3
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.016017	  0.144574	diff=0.128557
 -0.024419	 -0.095708	diff=0.0712888
 -0.000000	 -0.000000	diff=4.27586e-11
  0.000000	 -0.000000	diff=4.08332e-23
  0.017249	  0.155760	diff=0.138511
 -0.020623	 -0.080851	diff=0.0602277
 -0.010408	 -0.093043	diff=0.0826342
 -0.016162	 -0.063409	diff=0.0472469
 -0.047969	 -0.423606	diff=0.375637
  0.071097	  0.280425	diff=0.209328
  0.000000	  0.000000	diff=4.85713e-11
  0.000000	  0.000000	diff=5.19058e-23
 -0.051741	 -0.456382	diff=0.404641
  0.060111	  0.236895	diff=0.176784
  0.030011	  0.272618	diff=0.242607
  0.047243	  0.185792	diff=0.138549
  0.000000	  0.000000	diff=1.74228e-20
  0.000000	  0.000000	diff=6.73457e-24
  0.000000	  0.000000	diff=1.05898e-12
  0.000000	 -0.000000	diff=3.04077e-26
  0.000000	  0.000000	diff=1.27007e-19
  0.000000	  0.000000	diff=4.1987e-24
  0.000000	 -0.000000	diff=3.81335e-13
  0.000000	  0.000000	diff=4.97966e-13
  0.000000	 -0.000000	diff=3.20396e-20
  0.000000	 -0.000000	diff=1.41503e-23
  0.000000	 -0.000000	diff=1.94711e-12
  0.000000	  0.000000	diff=4.40291e-25
  0.000000	 -0.000000	diff=2.3353e-19
  0.000000	 -0.000000	diff=8.67305e-24
 -0.000000	 -0.000000	diff=1.19424e-11
  0.000000	 -0.000000	diff=2.76215e-13
  local_diff=2.07601
# W_src{2}, [8 4]
 -0.034484	 -0.103072	diff=0.0685887
  0.013403	 -0.056731	diff=0.0701342
  0.000000	  0.000000	diff=3.14349e-20
  0.000000	  0.000000	diff=1.35454e-21
 -0.066585	 -0.318649	diff=0.252064
  0.008401	 -0.065904	diff=0.0743052
  0.110917	  0.333260	diff=0.222342
  0.030175	 -0.127920	diff=0.158095
  0.063192	  0.189516	diff=0.126324
 -0.024744	  0.104310	diff=0.129054
  0.000000	  0.000000	diff=7.9808e-24
  0.000000	 -0.000000	diff=9.01602e-24
  0.120245	  0.585891	diff=0.465647
 -0.015565	  0.121177	diff=0.136741
 -0.206268	 -0.612756	diff=0.406489
 -0.055954	  0.235202	diff=0.291156
 -0.018391	 -0.207918	diff=0.189527
  0.035953	  0.011458	diff=0.0244943
  0.011130	  0.128194	diff=0.117064
  0.017333	  0.005523	diff=0.0118097
 -0.023977	 -0.196518	diff=0.172541
 -0.091766	 -0.318224	diff=0.226458
 -0.109584	 -1.177148	diff=1.06756
  0.049900	  0.015895	diff=0.0340057
  0.039091	  0.459056	diff=0.419965
 -0.079514	 -0.025298	diff=0.0542158
 -0.025124	 -0.283035	diff=0.257911
 -0.038318	 -0.012195	diff=0.0261231
  0.051596	  0.433887	diff=0.38229
  0.199902	  0.702596	diff=0.502695
  0.193470	  2.598988	diff=2.40552
 -0.110166	 -0.035093	diff=0.075073
  local_diff=8.3682
# W_tgt{1}, [8 6]
 -0.000755	 -0.000756	diff=1.24373e-06
  0.543714	  0.556835	diff=0.0131202
 -1.821135	 -1.381571	diff=0.439564
 -0.000074	  0.002330	diff=0.00240337
 -0.000002	 -0.000002	diff=2.50885e-07
 -5.328819	 -4.025959	diff=1.30286
 -0.000000	 -0.000000	diff=1.51458e-09
  0.000913	  0.000886	diff=2.64645e-05
 -0.003649	 -0.003673	diff=2.45292e-05
 -0.700909	 -0.645163	diff=0.0557461
  1.751213	  1.319624	diff=0.431589
 -0.000361	  0.011313	diff=0.0116737
 -0.000007	 -0.000008	diff=1.27655e-06
-20.139409	-14.518009	diff=5.6214
 -0.000002	 -0.000002	diff=1.90786e-08
  0.004427	  0.004303	diff=0.000124156
  0.000905	  0.000904	diff=1.12075e-06
 -0.016457	 -0.026875	diff=0.010418
  0.391460	  0.297424	diff=0.0940354
 -0.000037	 -0.002916	diff=0.00287878
  0.000000	  0.000000	diff=3.01831e-07
  0.268146	 -0.146796	diff=0.414942
  0.000000	  0.000000	diff=1.37177e-09
 -0.001085	 -0.001047	diff=3.8275e-05
  0.000943	  0.000942	diff=1.2295e-06
 -0.052633	 -0.062862	diff=0.0102289
  0.606390	  0.459696	diff=0.146694
 -0.000041	 -0.003040	diff=0.00299898
  0.000000	  0.000000	diff=3.14058e-07
  0.590682	  0.075861	diff=0.514821
  0.000000	  0.000000	diff=1.48527e-09
 -0.001647	 -0.001600	diff=4.77449e-05
 -0.000000	 -0.000000	diff=1.26013e-12
  0.089559	  0.090494	diff=0.000935705
  0.547878	  0.399500	diff=0.148378
 -0.000008	 -0.000008	diff=1.13776e-08
  0.000000	  0.000000	diff=1.16758e-09
  0.107866	  0.107408	diff=0.000457566
  0.000000	  0.000000	diff=1.76948e-12
 -0.001582	 -0.001569	diff=1.33068e-05
 -0.000079	 -0.000080	diff=3.75549e-08
  0.055672	  0.056744	diff=0.00107151
  0.000003	 -0.000002	diff=5.12474e-06
  0.000003	  0.000256	diff=0.00025317
 -0.000000	 -0.000000	diff=2.66147e-08
 -0.023735	  0.014892	diff=0.0386271
 -0.000000	 -0.000000	diff=5.28852e-13
 -0.000000	 -0.000003	diff=2.81324e-06
  local_diff=9.26538
# W_tgt{2}, [8 4]
  0.669779	  0.644300	diff=0.0254793
  7.540018	  7.543461	diff=0.00344332
  0.000043	  0.000051	diff=7.97829e-06
  1.789947	  1.570263	diff=0.219684
  0.540673	  0.491379	diff=0.0492943
  0.061458	  0.109449	diff=0.0479909
 -0.003118	 -0.011421	diff=0.00830303
 56.432592	 48.914168	diff=7.51842
  0.029187	  0.032205	diff=0.00301827
 -0.354859	 -0.386242	diff=0.0313828
 -0.013523	 -0.037149	diff=0.0236254
 -0.012205	 -0.015171	diff=0.00296525
  0.032145	  0.024121	diff=0.00802422
 -0.085982	 -0.140520	diff=0.0545375
  0.619469	  2.363190	diff=1.74372
 -0.909951	 -0.876308	diff=0.0336433
  0.123438	 -0.543749	diff=0.667187
  0.051410	  0.048358	diff=0.00305262
 -0.033063	  0.095152	diff=0.128215
 -0.083487	 -0.186688	diff=0.103201
  0.035958	 -0.172909	diff=0.208868
  0.067654	  0.092717	diff=0.025063
  0.103814	  0.301822	diff=0.198008
 -2.146091	 -4.836212	diff=2.69012
  0.494529	  0.114208	diff=0.38032
  0.349129	  0.171715	diff=0.177414
  0.194883	  0.274352	diff=0.0794686
  0.411169	  0.333106	diff=0.0780631
  0.276286	  0.149614	diff=0.126671
 -0.181856	 -0.161199	diff=0.0206577
 -0.195416	 -0.602809	diff=0.407393
 10.215704	  7.385197	diff=2.83051
  local_diff=17.8978
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000003	diff=2.26274e-06
 -0.000000	 -0.000003	diff=2.5903e-06
 -0.000000	 -0.000000	diff=3.83279e-10
 -0.000000	 -0.000000	diff=4.44783e-10
  local_diff=4.85387e-06
# W_emb_tgt, [2 5]
 -2.318687	 -2.035462	diff=0.283225
  0.338918	  0.174500	diff=0.164419
  0.000000	  0.000000	diff=6.21141e-09
  0.000000	 -0.000000	diff=7.67156e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -3.306237	  2.323451	diff=5.62969
  1.780763	 -0.803030	diff=2.58379
-23.171898	-18.351081	diff=4.82082
 11.466307	  9.482906	diff=1.9834
  local_diff=15.4653
# W_src_char{1}, [8 4]
  0.000079	  0.000974	diff=0.000894833
 -0.000000	 -0.000000	diff=1.17962e-07
  0.000014	  0.000190	diff=0.000176202
  0.000001	  0.000008	diff=7.38366e-06
-16.062486	-59.206923	diff=43.1444
  0.000000	  0.000006	diff=5.65728e-06
  0.000034	  0.000466	diff=0.000431868
 -0.000000	 -0.000000	diff=3.34982e-08
  0.000482	  0.006502	diff=0.00602035
  0.000001	  0.000008	diff=7.23293e-06
 -0.000861	 -0.011661	diff=0.0107996
 -0.000036	 -0.000489	diff=0.000452738
-21.479323	 72.184510	diff=93.6638
 -0.000036	 -0.000483	diff=0.000447747
 -0.002104	 -0.028581	diff=0.0264769
  0.000000	  0.000002	diff=2.0521e-06
 -0.000582	 -0.007910	diff=0.00732789
 -0.000001	 -0.000010	diff=9.52154e-06
  0.001128	  0.015359	diff=0.0142303
  0.000048	  0.000644	diff=0.000595998
  0.001433	  0.019397	diff=0.0179638
  0.000047	  0.000635	diff=0.000588426
  0.002778	  0.037644	diff=0.0348661
 -0.000000	 -0.000003	diff=2.70537e-06
  0.000000	  0.000000	diff=2.02523e-10
  0.000000	  0.000000	diff=2.80816e-13
 -0.000000	 -0.000000	diff=3.90994e-10
  0.000000	 -0.000000	diff=1.75774e-11
 -0.000000	 -0.000000	diff=4.89898e-10
  0.000000	 -0.000000	diff=1.73553e-11
 -0.000000	 -0.000000	diff=9.54086e-10
  0.000000	  0.000000	diff=7.97222e-14
  local_diff=136.93
# W_src_char{2}, [8 4]
  0.219101	  3.563092	diff=3.34399
 -0.956676	 -8.575479	diff=7.6188
  0.101134	  1.411010	diff=1.30988
 -0.008570	 -0.110869	diff=0.102299
  0.152774	  2.270279	diff=2.1175
 -0.114416	 -1.377587	diff=1.26317
 -0.097953	 -1.180797	diff=1.08284
  0.030786	  0.406214	diff=0.375428
  0.044432	  0.656327	diff=0.611895
 -0.002385	 -0.035906	diff=0.0335209
  0.016544	  0.238298	diff=0.221754
  0.049572	  0.793309	diff=0.743737
  0.008406	  0.120023	diff=0.111618
 -0.004364	 -0.065586	diff=0.0612214
 -0.000879	 -0.012600	diff=0.0117204
 -0.013420	 -0.199203	diff=0.185783
 -0.010009	 -0.120061	diff=0.110052
  0.061697	  0.821197	diff=0.7595
 -0.024310	 -0.302486	diff=0.278176
  0.000412	  0.005240	diff=0.0048276
 -0.047129	 -0.592432	diff=0.545303
 -0.035946	 -0.521748	diff=0.485802
  0.027362	  0.351842	diff=0.32448
 -0.000873	 -0.013274	diff=0.0124013
 -0.002709	  0.010136	diff=0.0128455
  0.115070	  1.587745	diff=1.47268
 -0.045544	 -0.547123	diff=0.501579
  0.022422	  0.347124	diff=0.324702
 -0.107773	 -1.301594	diff=1.19382
 -0.096408	 -1.333014	diff=1.23661
  0.065201	  0.863678	diff=0.798477
 -0.007922	 -0.118635	diff=0.110713
  local_diff=27.3671
# W_src_char{3}, [8 4]
 -0.079571	 -0.756668	diff=0.677097
 -0.489088	 -4.945518	diff=4.45643
  0.025244	  0.335658	diff=0.310414
  0.159869	  2.363196	diff=2.20333
 -0.007427	 -0.112056	diff=0.104629
 -0.012798	 -0.168812	diff=0.156014
 -0.073447	 -0.904699	diff=0.831252
 -0.009222	 -0.116088	diff=0.106866
  0.164810	  2.053286	diff=1.88848
  0.319280	  9.133448	diff=8.81417
  0.071762	  0.921076	diff=0.849314
 -0.100558	 -1.210062	diff=1.1095
 -0.014567	 -0.220763	diff=0.206197
 -0.043186	 -0.549453	diff=0.506268
 -0.189431	 -2.189946	diff=2.00052
  0.005662	  0.073838	diff=0.068176
  0.010529	  0.231026	diff=0.220496
  0.018541	  0.244979	diff=0.226438
  0.082349	  1.056998	diff=0.974649
  0.181741	  2.764209	diff=2.58247
  0.004004	  0.055772	diff=0.0517679
 -0.002872	 -0.029427	diff=0.0265549
 -0.176251	 -2.108240	diff=1.93199
 -0.010025	 -0.126919	diff=0.116893
  0.005941	  0.078751	diff=0.07281
  0.012575	  0.162901	diff=0.150325
  0.005594	  0.074072	diff=0.0684774
  0.002768	  0.035559	diff=0.0327914
  0.000295	  0.004264	diff=0.00396936
 -0.000645	 -0.007417	diff=0.00677186
 -0.012414	 -0.166274	diff=0.15386
 -0.000166	 -0.002136	diff=0.00197003
  local_diff=30.9109
# W_emb_src_char, [2 5]
 -3.635612	-22.107124	diff=18.4715
 -2.860769	-18.761135	diff=15.9004
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000020	diff=1.80117e-05
 -0.000025	 -0.000335	diff=0.00030939
  0.037783	  0.510810	diff=0.473027
 -0.002483	 -0.041590	diff=0.0391068
  0.000000	 -0.000000	diff=1.92254e-12
  0.000000	 -0.000000	diff=2.39116e-12
  local_diff=34.8843
# W_tgt_char{1}, [8 4]
 -0.003924	 -0.003919	diff=5.20493e-06
  0.017696	  0.017695	diff=8.77007e-07
 -0.055542	 -0.055007	diff=0.000534501
 -0.000000	 -0.000000	diff=4.64585e-09
 -0.006931	 -0.006913	diff=1.87259e-05
  0.028054	  0.028057	diff=3.00008e-06
  0.047830	  0.048621	diff=0.000791219
 -0.103984	 -0.103989	diff=5.47351e-06
  0.061364	  0.061403	diff=3.93973e-05
 -0.266218	 -0.265662	diff=0.000556085
  0.016187	  0.016233	diff=4.61741e-05
  0.000000	  0.000000	diff=4.01546e-10
  0.042569	  0.042644	diff=7.44053e-05
 -0.322684	 -0.321736	diff=0.000948562
 -0.637010	 -0.632369	diff=0.0046408
 -0.520854	 -0.520048	diff=0.000806813
 -0.000000	 -0.000000	diff=4.53309e-13
 -0.000000	 -0.000000	diff=1.35884e-11
  0.001352	  0.001352	diff=4.79465e-07
  0.000000	  0.000000	diff=6.68826e-12
  0.000001	  0.000001	diff=4.02112e-10
  0.000000	 -0.000000	diff=5.5872e-14
  0.000000	 -0.000000	diff=1.35985e-16
  0.000000	  0.000000	diff=4.7588e-19
 -0.000000	 -0.000000	diff=3.90377e-12
  0.000000	  0.000000	diff=3.2256e-11
 -0.000193	 -0.000191	diff=1.84931e-06
 -0.000000	 -0.000000	diff=2.23203e-11
 -0.000001	 -0.000001	diff=1.40008e-09
  0.000000	  0.000000	diff=5.00003e-13
  0.000000	  0.000000	diff=2.01987e-16
  0.000000	 -0.000000	diff=5.5816e-21
  local_diff=0.00847358
# W_tgt_char{2}, [8 4]
  0.010168	  0.010170	diff=2.44984e-06
  0.065947	  0.065953	diff=5.21007e-06
 -0.000088	 -0.000088	diff=2.6018e-09
  0.003777	  0.003777	diff=6.73562e-08
  0.009728	  0.009729	diff=8.77692e-07
  0.007884	  0.007887	diff=2.92466e-06
  0.007232	  0.007299	diff=6.65579e-05
  0.202773	  0.202970	diff=0.000197166
 -0.034505	 -0.034491	diff=1.40375e-05
 -0.071206	 -0.071184	diff=2.20671e-05
  0.000000	  0.000000	diff=3.91199e-13
  0.000000	  0.000000	diff=1.74883e-12
 -0.037339	 -0.037334	diff=4.37884e-06
 -0.002292	 -0.002276	diff=1.58986e-05
  0.192460	  0.193120	diff=0.000660759
 -0.462617	 -0.461843	diff=0.000773515
  0.159993	  0.159776	diff=0.000216815
 -0.214479	 -0.214706	diff=0.000227165
 -0.216882	 -0.217128	diff=0.000245734
 -0.040365	 -0.040348	diff=1.69292e-05
  1.536739	  1.543970	diff=0.00723073
 -0.236040	 -0.236571	diff=0.000531505
 -0.007068	 -0.007126	diff=5.80934e-05
  0.017183	  0.017040	diff=0.000143009
 -0.065705	 -0.065832	diff=0.000126535
 -0.033824	 -0.033895	diff=7.16161e-05
 -0.003188	 -0.003214	diff=2.5175e-05
 -0.417735	 -0.416682	diff=0.00105301
 -0.531581	 -0.531018	diff=0.000562873
 -0.460947	 -0.460688	diff=0.000258851
 -0.201278	 -0.200767	diff=0.000510604
 -0.489247	 -0.489032	diff=0.000214872
  local_diff=0.0132594
# W_tgt_char{3}, [8 4]
  0.697086	  0.696150	diff=0.000935606
 -0.121645	 -0.121798	diff=0.000152416
 -0.034435	 -0.034390	diff=4.46986e-05
 -0.070791	 -0.070838	diff=4.6952e-05
  0.364863	  0.365129	diff=0.000266172
  0.549713	  0.549994	diff=0.000281413
 -0.200189	 -0.200175	diff=1.41683e-05
  0.380523	  0.382371	diff=0.00184777
  0.122337	  0.122056	diff=0.00028089
  0.067935	  0.067673	diff=0.000261938
 -0.013728	 -0.013734	diff=6.46542e-06
  0.155591	  0.155441	diff=0.000149497
 -0.235713	 -0.235735	diff=2.18418e-05
 -0.632507	 -0.632139	diff=0.000368089
 -0.038560	 -0.038620	diff=6.03704e-05
 -0.117174	 -0.117287	diff=0.00011357
  0.144006	  0.144017	diff=1.09595e-05
 -0.092919	 -0.092926	diff=7.28124e-06
 -0.038100	 -0.038135	diff=3.50548e-05
  0.123157	  0.123087	diff=7.06211e-05
  0.050080	  0.050095	diff=1.42784e-05
 -0.527878	 -0.527628	diff=0.000249358
 -0.505939	 -0.509108	diff=0.00316887
 -0.002428	 -0.002419	diff=9.0061e-06
  0.064976	  0.064972	diff=3.36722e-06
 -0.068497	 -0.068506	diff=9.15915e-06
 -0.028956	 -0.028979	diff=2.27889e-05
  0.075027	  0.075005	diff=2.16946e-05
  0.021079	  0.021081	diff=1.29751e-06
 -0.320553	 -0.320455	diff=9.74818e-05
 -0.429219	 -0.431282	diff=0.00206317
 -0.009948	 -0.009949	diff=1.22268e-06
  local_diff=0.0106375
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.012171	 -0.012146	diff=2.42472e-05
 -0.276758	 -0.264137	diff=0.0126217
  0.000000	  0.000000	diff=7.39085e-10
 -0.000000	 -0.000000	diff=9.41688e-11
 -0.000000	 -0.000000	diff=1.44606e-11
  0.000000	  0.000000	diff=7.21887e-13
  local_diff=0.012646
# W_h, [2 4]
  0.083652	  0.056673	diff=0.0269796
 -0.036376	 -0.015674	diff=0.0207028
  0.257097	  0.171092	diff=0.086005
 -0.109353	 -0.046422	diff=0.0629314
 -2.105107	 -1.591480	diff=0.513627
  0.086053	  0.234419	diff=0.148366
  9.277558	 10.627652	diff=1.35009
  0.556247	 -0.535589	diff=1.09184
  local_diff=3.30054
# W_soft, [5 2]
  0.160076	  0.153252	diff=0.00682389
 -0.377414	 -0.377702	diff=0.000288105
 -4.177899	 -4.178184	diff=0.000285036
 -0.763197	 -0.763508	diff=0.000310454
  5.173012	  5.166142	diff=0.00687029
  0.228875	  0.212486	diff=0.016389
 -2.086824	 -2.089522	diff=0.00269756
 -4.696771	 -4.698025	diff=0.00125491
 -1.343485	 -1.345809	diff=0.00232386
  7.937388	  7.920871	diff=0.016517
  local_diff=0.0537601
# W_soft_char, [5 2]
 -0.359538	 -0.359918	diff=0.000379547
  0.161339	  0.160872	diff=0.000467061
  0.113608	  0.113253	diff=0.000354758
 -0.290179	 -0.290506	diff=0.000326606
  0.376753	  0.376299	diff=0.000453381
  0.417684	  0.416877	diff=0.000807083
 -1.066355	 -1.066595	diff=0.000239798
  0.466629	  0.465816	diff=0.000812089
 -0.098171	 -0.098285	diff=0.000114685
  0.282453	  0.282186	diff=0.000267201
  local_diff=0.00422221
# Num params=404, abs_diff=286.568
Elapsed time is 13.248394 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 1
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.416387	 -0.415368	diff=0.00101964
  0.222085	  0.222144	diff=5.95846e-05
  0.000000	  0.000000	diff=4.67113e-16
  0.000000	  0.000000	diff=1.02127e-24
 -0.258522	 -0.257994	diff=0.00052834
  0.222631	  0.222704	diff=7.22947e-05
  0.352076	  0.352637	diff=0.000561336
  0.212134	  0.212289	diff=0.00015538
  0.949690	  0.955035	diff=0.00534525
 -0.511083	 -0.510765	diff=0.000317409
  0.000000	 -0.000000	diff=7.91518e-16
  0.000000	 -0.000000	diff=1.73052e-24
  0.590413	  0.593193	diff=0.00277962
 -0.512436	 -0.512052	diff=0.000384498
 -0.813783	 -0.810801	diff=0.00298128
 -0.488931	 -0.488106	diff=0.00082501
  0.027896	  0.027898	diff=1.26231e-06
 -0.094990	 -0.094965	diff=2.5123e-05
  0.147189	  0.147275	diff=8.56599e-05
  0.022063	  0.022067	diff=3.96851e-06
  0.183350	  0.183484	diff=0.000134729
 -0.086228	 -0.086211	diff=1.6689e-05
 -1.535837	 -1.526346	diff=0.00949103
  0.042284	  0.042313	diff=2.8835e-05
 -0.042261	 -0.042258	diff=2.89279e-06
  0.143791	  0.143848	diff=5.76744e-05
 -0.223281	 -0.223084	diff=0.000197013
 -0.033435	 -0.033426	diff=9.10488e-06
 -0.278243	 -0.277933	diff=0.000310073
  0.130550	  0.130589	diff=3.83255e-05
  2.290861	  2.312032	diff=0.0211707
 -0.064160	 -0.064093	diff=6.62377e-05
  local_diff=0.046669
# W_src{2}, [8 4]
 -0.020106	 -0.020055	diff=5.0913e-05
 -0.176272	 -0.176210	diff=6.25694e-05
  0.076620	  0.076628	diff=8.17135e-06
 -0.004789	 -0.004792	diff=2.19061e-06
 -0.105979	 -0.105677	diff=0.000302347
 -0.203761	 -0.203615	diff=0.000145945
 -0.777232	 -0.776090	diff=0.00114286
 -0.162208	 -0.162002	diff=0.000206093
  0.013165	  0.013340	diff=0.000174706
 -0.045509	 -0.045394	diff=0.00011545
  0.165867	  0.165906	diff=3.83365e-05
 -0.010364	 -0.010374	diff=1.02654e-05
  0.208271	  0.209305	diff=0.00103406
 -0.084790	 -0.084588	diff=0.000201728
 -1.791771	 -1.778503	diff=0.0132679
  0.047777	  0.048088	diff=0.000311004
 -0.056008	 -0.056005	diff=3.07886e-06
 -0.112264	 -0.112252	diff=1.2683e-05
  0.084445	  0.084459	diff=1.45104e-05
 -0.024008	 -0.024018	diff=9.98218e-06
 -0.069681	 -0.069748	diff=6.71623e-05
 -0.099994	 -0.100037	diff=4.31157e-05
 -0.875112	 -0.873673	diff=0.00143946
 -0.085970	 -0.085871	diff=9.96419e-05
  0.086933	  0.086948	diff=1.56513e-05
  0.264066	  0.264143	diff=7.66069e-05
 -0.213993	 -0.213927	diff=6.58374e-05
  0.040657	  0.040625	diff=3.25387e-05
  0.085688	  0.085523	diff=0.000165416
  0.272590	  0.272456	diff=0.000134218
  2.215670	  2.224953	diff=0.00928325
  0.188165	  0.188622	diff=0.000457139
  local_diff=0.0289948
# W_tgt{1}, [8 6]
 -0.000467	 -0.000460	diff=7.64338e-06
 -0.000645	 -0.000655	diff=1.03565e-05
  5.678545	  5.634014	diff=0.0445311
 -0.000000	 -0.000000	diff=1.72336e-10
 -0.000040	 -0.000039	diff=6.51411e-07
 -0.000006	 -0.000006	diff=5.21161e-10
  0.000000	  0.000000	diff=4.28099e-13
  0.000000	  0.000000	diff=6.70538e-13
 -0.000000	 -0.000000	diff=2.14221e-10
  0.000556	  0.000545	diff=1.15797e-05
 -5.544473	 -5.581095	diff=0.036622
  0.000000	  0.000000	diff=3.09487e-12
 -0.000000	 -0.000000	diff=1.19233e-11
 -0.000030	 -0.000030	diff=1.15038e-08
 -0.000000	 -0.000000	diff=6.63467e-13
  0.000000	  0.000000	diff=1.40208e-11
  0.000113	  0.000113	diff=4.577e-07
  0.000065	  0.000065	diff=3.60707e-07
 -1.365947	 -1.368619	diff=0.00267217
 -0.000000	 -0.000000	diff=2.06306e-11
  0.000010	  0.000010	diff=4.00252e-08
 -0.000015	 -0.000015	diff=3.15874e-09
  0.000000	 -0.000000	diff=3.603e-16
 -0.000000	 -0.000000	diff=3.23655e-12
 -0.000148	 -0.000147	diff=7.79781e-07
  0.000055	  0.000056	diff=1.81033e-07
  1.784501	  1.780002	diff=0.00449892
  0.000000	  0.000000	diff=1.87511e-14
 -0.000013	 -0.000013	diff=6.81961e-08
  0.000000	  0.000000	diff=6.75567e-14
  0.000000	 -0.000000	diff=8.82627e-18
  0.000000	  0.000000	diff=5.77603e-25
  0.000106	  0.000107	diff=4.04608e-07
 -0.000035	 -0.000035	diff=1.3808e-07
 -1.302613	 -1.305031	diff=0.00241797
 -0.000000	 -0.000000	diff=3.80103e-13
  0.000009	  0.000009	diff=3.44855e-08
 -0.000000	 -0.000000	diff=1.49203e-11
  0.000000	  0.000000	diff=1.13446e-21
 -0.000000	 -0.000000	diff=2.9365e-12
  0.000000	  0.000000	diff=3.73267e-13
 -0.000000	 -0.000000	diff=1.52325e-12
 -0.000002	 -0.000002	diff=1.72378e-12
  0.000000	 -0.000000	diff=7.03797e-17
 -0.000000	 -0.000000	diff=8.3916e-13
  0.000000	 -0.000000	diff=2.06303e-15
  0.000000	  0.000000	diff=5.99635e-28
  0.000000	 -0.000000	diff=2.76417e-16
  local_diff=0.0907749
# W_tgt{2}, [8 4]
  2.804753	  2.809215	diff=0.00446237
 -7.396328	 -7.430348	diff=0.0340194
 -0.000022	 -0.000022	diff=9.15929e-08
 -0.905039	 -0.900426	diff=0.00461381
  0.425454	  0.423358	diff=0.00209613
  0.073691	  0.073931	diff=0.000240635
 -0.002562	 -0.002556	diff=6.28344e-06
-65.180681	-65.240958	diff=0.0602774
 -0.000034	 -0.000034	diff=1.80402e-07
  0.000048	  0.000048	diff=5.62726e-09
  0.000009	  0.000009	diff=1.15829e-08
 -0.000002	 -0.000002	diff=6.63568e-12
 -0.000014	 -0.000014	diff=3.44173e-08
  0.000002	  0.000002	diff=5.04273e-09
 -0.000055	 -0.000055	diff=1.14278e-07
 -0.000005	 -0.000005	diff=1.77245e-09
 -0.098676	 -0.098756	diff=7.94063e-05
 -0.435423	 -0.435914	diff=0.000491073
 -0.073866	 -0.073861	diff=4.97368e-06
  0.007842	  0.007902	diff=6.04495e-05
 -0.060872	 -0.060876	diff=4.04742e-06
 -0.040199	 -0.040162	diff=3.70075e-05
  0.056539	  0.056605	diff=6.63505e-05
  0.211138	  0.206858	diff=0.00428005
  3.305889	  3.304513	diff=0.00137546
 -2.115194	 -2.116813	diff=0.00161968
  1.610567	  1.609614	diff=0.000952785
  0.776322	  0.776924	diff=0.000602162
  1.329224	  1.329992	diff=0.000768236
 -0.787795	 -0.788221	diff=0.000426253
 -0.669388	 -0.667995	diff=0.00139249
  9.081479	  9.046513	diff=0.0349662
  local_diff=0.152843
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.17187e-10
 -0.000000	 -0.000000	diff=1.54185e-10
  0.000000	  0.000000	diff=7.97397e-15
  0.000000	  0.000000	diff=9.34977e-15
  local_diff=2.71389e-10
# W_emb_tgt, [2 5]
  2.950881	  2.938692	diff=0.0121896
 -2.209069	 -2.214811	diff=0.00574142
 -0.000000	 -0.000000	diff=1.02668e-10
  0.000000	  0.000000	diff=1.5726e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000350	  0.000346	diff=3.5211e-06
  0.000212	  0.000207	diff=5.41271e-06
 -0.000001	 -0.000001	diff=9.24709e-09
  0.000001	  0.000001	diff=4.93362e-09
  local_diff=0.01794
# W_src_char{1}, [8 4]
 -0.000298	 -0.000282	diff=1.58552e-05
  0.000000	  0.000000	diff=2.10958e-12
 -0.000355	 -0.000355	diff=3.39148e-09
 -0.000019	 -0.000019	diff=1.13553e-09
438.164241	204.835842	diff=233.328
 -0.000019	 -0.000019	diff=1.56267e-08
 -0.001182	 -0.001182	diff=7.16465e-08
  0.000000	  0.000000	diff=1.31666e-12
  0.001569	  0.001568	diff=1.27297e-06
 -0.000007	 -0.000007	diff=2.41281e-08
  0.021794	  0.021781	diff=1.26376e-05
  0.001183	  0.001188	diff=4.25179e-06
-50.746600	-249.719713	diff=198.973
  0.001181	  0.001185	diff=4.26468e-06
  0.072726	  0.072458	diff=0.000268081
 -0.000001	 -0.000001	diff=4.14981e-09
 -0.001771	 -0.001776	diff=4.79622e-06
  0.000007	  0.000007	diff=2.69196e-08
 -0.022936	 -0.022950	diff=1.42847e-05
 -0.001256	 -0.001251	diff=4.74365e-06
 -0.069219	 -0.068919	diff=0.000299227
 -0.001253	 -0.001248	diff=4.76193e-06
 -0.076048	 -0.076348	diff=0.000300243
  0.000001	  0.000001	diff=4.56577e-09
  0.000000	  0.000000	diff=1.71235e-12
  0.000000	 -0.000000	diff=4.49844e-15
  0.000000	  0.000000	diff=4.27649e-13
  0.000000	  0.000000	diff=7.98244e-13
  0.000000	  0.000000	diff=1.32669e-12
  0.000000	  0.000000	diff=7.96265e-13
  0.000000	  0.000000	diff=3.80821e-13
  0.000000	 -0.000000	diff=4.01576e-16
  local_diff=432.302
# W_src_char{2}, [8 4]
 -9.656858	 -8.994820	diff=0.662038
 23.186013	 23.825386	diff=0.639373
 -3.217475	 -3.150033	diff=0.0674417
  0.152894	  0.152369	diff=0.000525746
 -5.309193	 -5.112593	diff=0.1966
  2.361832	  2.412329	diff=0.0504964
  2.374308	  2.414968	diff=0.0406609
 -0.586921	 -0.582577	diff=0.00434352
 -0.688023	 -0.679194	diff=0.00882876
  0.035494	  0.035350	diff=0.00014458
 -0.413962	 -0.410534	diff=0.00342867
 -1.012976	 -0.998074	diff=0.0149024
 -0.037615	 -0.037419	diff=0.000195744
  0.041498	  0.041335	diff=0.000163226
  0.001100	  0.001111	diff=1.11274e-05
  0.003231	  0.003200	diff=3.04829e-05
  0.490413	  0.492523	diff=0.00210925
 -1.944893	 -1.913497	diff=0.0313958
  0.616601	  0.619471	diff=0.0028696
  0.040825	  0.040848	diff=2.3274e-05
  1.300838	  1.314982	diff=0.0141439
  0.995590	  1.006429	diff=0.0108394
 -0.826875	 -0.822241	diff=0.00463454
 -0.020353	 -0.020379	diff=2.59636e-05
  0.775299	  0.781589	diff=0.00629048
 -4.378857	 -4.222777	diff=0.15608
  1.166271	  1.176412	diff=0.0101416
 -0.207544	 -0.206761	diff=0.000782551
  2.593198	  2.649216	diff=0.0560175
  1.929965	  1.971550	diff=0.0415846
 -1.624462	 -1.606737	diff=0.0177248
 -0.038819	 -0.038924	diff=0.000105739
  local_diff=2.04395
# W_src_char{3}, [8 4]
  3.312991	  3.399085	diff=0.086094
 10.154886	 11.020264	diff=0.865378
 -0.992751	 -0.984879	diff=0.00787187
 -5.511110	 -5.268993	diff=0.242116
  0.418303	  0.420190	diff=0.00188689
  0.297784	  0.298834	diff=0.00104981
  1.620301	  1.646144	diff=0.0258426
  0.062727	  0.062257	diff=0.000469893
 -6.750338	 -6.424976	diff=0.325362
-23.011173	-19.899668	diff=3.11151
 -2.243932	 -2.205412	diff=0.0385203
  2.118264	  2.171043	diff=0.0527787
  0.890153	  0.898826	diff=0.00867229
  0.692151	  0.696857	diff=0.00470596
  3.188581	  3.289991	diff=0.10141
 -0.020276	 -0.020554	diff=0.000278002
  0.226863	  0.232205	diff=0.00534209
  0.982002	  0.998984	diff=0.0169815
 -2.890077	 -2.826827	diff=0.063251
 -6.140658	 -5.851929	diff=0.288729
 -0.045553	 -0.045420	diff=0.000133394
  0.148903	  0.149555	diff=0.000652397
  4.705832	  4.921601	diff=0.21577
  0.071197	  0.071063	diff=0.000134534
 -0.084534	 -0.084473	diff=6.07279e-05
 -0.172760	 -0.172533	diff=0.000227316
 -0.085508	 -0.085449	diff=5.96644e-05
 -0.040900	 -0.040886	diff=1.35307e-05
 -0.001177	 -0.001177	diff=9.78514e-08
  0.006411	  0.006412	diff=7.79581e-07
  0.162278	  0.162526	diff=0.000248465
  0.001047	  0.001047	diff=1.57935e-07
  local_diff=5.46555
# W_emb_src_char, [2 5]
471.551187	 76.483226	diff=395.068
398.314519	 64.907228	diff=333.407
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000005	 -0.000005	diff=3.7905e-09
  0.000078	  0.000079	diff=1.46227e-06
 -1.354622	 -1.354297	diff=0.00032477
  0.196560	  0.175305	diff=0.0212552
  0.000000	 -0.000000	diff=9.483e-16
  0.000000	  0.000000	diff=4.82653e-15
  local_diff=728.497
# W_h, [2 4]
  0.083554	  0.083531	diff=2.35754e-05
  0.276885	  0.276923	diff=3.87164e-05
 -0.548815	 -0.549439	diff=0.000624065
 -1.135973	 -1.135477	diff=0.000495465
  0.333984	  0.334513	diff=0.000528606
  4.893163	  4.894466	diff=0.00130303
  0.444860	  0.443036	diff=0.00182369
 -0.134213	 -0.130501	diff=0.00371129
  local_diff=0.00854844
# W_soft, [5 2]
  1.922689	  1.921989	diff=0.00069982
 -2.105460	 -2.108184	diff=0.00272418
 -1.105977	 -1.105996	diff=1.91164e-05
 -2.477353	 -2.484072	diff=0.00671917
  3.780873	  3.776263	diff=0.00460929
  4.734856	  4.734723	diff=0.000133338
 -0.022520	 -0.023218	diff=0.000698173
  4.535890	  4.535876	diff=1.45005e-05
 -3.656111	 -3.665110	diff=0.00899832
 -5.573857	 -5.582270	diff=0.00841376
  local_diff=0.0330297
# Num params=288, abs_diff=1168.69
Elapsed time is 6.383610 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charOpt = 3
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.365886	  0.919591	diff=1.28548
  0.215998	 -0.496994	diff=0.712992
 -0.000000	 -0.000000	diff=4.14416e-10
  0.000000	 -0.000000	diff=3.32478e-22
 -0.394274	  0.990744	diff=1.38502
  0.182498	 -0.419845	diff=0.602343
  0.234719	 -0.591817	diff=0.826536
  0.143103	 -0.329276	diff=0.472378
  1.062728	 -2.694433	diff=3.75716
 -0.636118	  1.456204	diff=2.09232
  0.000000	  0.000000	diff=5.17347e-10
  0.000000	  0.000000	diff=4.22635e-22
  1.144297	 -2.902913	diff=4.04721
 -0.537108	  1.230160	diff=1.76727
 -0.690368	  1.734043	diff=2.42441
 -0.421475	  0.964789	diff=1.38626
  0.000000	  0.000000	diff=8.36278e-20
  0.000000	  0.000000	diff=3.14708e-23
  0.000000	  0.000000	diff=5.083e-12
  0.000000	  0.000000	diff=3.05186e-24
  0.000000	  0.000000	diff=7.74101e-19
  0.000000	  0.000000	diff=1.01272e-23
  0.000000	 -0.000000	diff=1.91948e-12
  0.000000	  0.000000	diff=9.81359e-12
  0.000000	 -0.000000	diff=1.53768e-19
  0.000000	 -0.000000	diff=5.88052e-23
  0.000000	 -0.000000	diff=9.34597e-12
  0.000000	 -0.000000	diff=5.40579e-24
  0.000000	 -0.000000	diff=1.42332e-18
  0.000000	 -0.000000	diff=1.90805e-23
 -0.000000	 -0.000000	diff=1.97425e-11
  0.000000	 -0.000000	diff=6.7183e-13
  local_diff=20.7594
# W_src{2}, [8 4]
  0.207854	 -0.478181	diff=0.686035
  0.189567	 -0.511810	diff=0.701377
  0.000000	  0.000000	diff=2.02745e-19
  0.000000	 -0.000000	diff=2.41439e-20
  0.746912	 -1.774114	diff=2.52103
  0.205509	 -0.537553	diff=0.743062
 -0.675434	  1.546086	diff=2.22152
  0.427102	 -1.154053	diff=1.58116
 -0.383518	  0.879218	diff=1.26274
 -0.349371	  0.941052	diff=1.29042
  0.000000	 -0.000000	diff=3.55504e-24
  0.000000	 -0.000000	diff=4.31747e-24
 -1.393142	  3.262015	diff=4.65516
 -0.378993	  0.988384	diff=1.36738
  1.228593	 -2.842747	diff=4.07134
 -0.788933	  2.121926	diff=2.91086
  0.554559	 -1.341039	diff=1.8956
  0.040888	 -0.204266	diff=0.245153
 -0.343813	  0.826831	diff=1.17064
  0.019702	 -0.098466	diff=0.118168
  0.516183	 -1.209476	diff=1.72566
  0.688489	 -1.576355	diff=2.26484
  3.090062	 -7.592424	diff=10.6825
  0.056772	 -0.283355	diff=0.340127
 -1.237221	  2.960839	diff=4.19806
 -0.090139	  0.450992	diff=0.541131
  0.753572	 -1.825535	diff=2.57911
 -0.043488	  0.217399	diff=0.260887
 -1.151331	  2.670364	diff=3.8217
 -1.545269	  3.480385	diff=5.02565
 -7.258890	 16.763075	diff=24.022
 -0.124781	  0.625610	diff=0.750391
  local_diff=83.6536
# W_tgt{1}, [8 6]
 -0.000755	 -0.000758	diff=3.51254e-06
  0.510443	  0.569459	diff=0.0590153
 -1.176011	  3.270842	diff=4.44685
 -0.007856	  0.016186	diff=0.0240427
 -0.000001	 -0.000003	diff=2.49209e-06
-12.744169	 -0.221238	diff=12.5229
 -0.000000	 -0.000000	diff=8.54825e-09
  0.000999	  0.000732	diff=0.000266618
 -0.003646	 -0.003682	diff=3.55326e-05
 -0.844572	 -0.342513	diff=0.502059
  1.146788	 -3.124185	diff=4.27097
 -0.038345	  0.078603	diff=0.116948
 -0.000005	 -0.000017	diff=1.23325e-05
-47.606185	  1.412699	diff=49.0189
 -0.000002	 -0.000002	diff=6.65337e-09
  0.004841	  0.003555	diff=0.0012861
  0.000905	  0.000906	diff=1.59883e-06
  0.020809	 -0.083580	diff=0.104389
  0.250700	 -0.687533	diff=0.938233
  0.009259	 -0.019515	diff=0.0287732
 -0.000001	  0.000002	diff=3.02011e-06
  1.797218	 -2.368952	diff=4.16617
  0.000000	  0.000000	diff=2.5538e-09
 -0.001189	 -0.000863	diff=0.000326503
  0.000943	  0.000944	diff=1.60366e-06
 -0.013445	 -0.117775	diff=0.10433
  0.392894	 -1.068524	diff=1.46142
  0.009642	 -0.020332	diff=0.0299738
 -0.000001	  0.000003	diff=3.1424e-06
  2.710494	 -2.475472	diff=5.18597
  0.000000	  0.000000	diff=2.70632e-09
 -0.001755	 -0.001407	diff=0.000348025
 -0.000000	 -0.000000	diff=4.42422e-12
  0.090605	  0.102949	diff=0.0123445
  0.355229	 -1.122996	diff=1.47822
 -0.000008	 -0.000008	diff=1.1372e-08
  0.000000	 -0.000000	diff=1.19267e-08
  0.107866	  0.107408	diff=0.000457565
  0.000000	  0.000000	diff=1.3353e-12
 -0.001582	 -0.001569	diff=1.33068e-05
 -0.000079	 -0.000080	diff=2.76633e-07
  0.052469	  0.062456	diff=0.00998728
 -0.000001	 -0.000052	diff=5.12913e-05
 -0.000816	  0.001716	diff=0.00253181
  0.000000	 -0.000000	diff=2.66153e-07
 -0.170264	  0.215825	diff=0.386089
 -0.000000	 -0.000000	diff=1.10115e-10
  0.000009	 -0.000019	diff=2.81298e-05
  local_diff=84.873
# W_tgt{2}, [8 4]
  0.773116	  0.513467	diff=0.259649
  7.804302	  7.157814	diff=0.646487
  0.000026	  0.000108	diff=8.1546e-05
  1.670032	 -0.493229	diff=2.16326
  0.756661	  0.282581	diff=0.47408
  0.058417	  0.535919	diff=0.477502
  0.018907	 -0.064505	diff=0.0834114
 54.295326	-24.654539	diff=78.9499
  0.056402	  0.086661	diff=0.0302592
 -0.087433	 -0.400474	diff=0.313041
  0.027473	 -0.208900	diff=0.236373
  0.013585	 -0.016014	diff=0.0295985
  0.078736	 -0.001512	diff=0.0802478
  0.389562	 -0.160050	diff=0.549612
 -3.118487	 14.154395	diff=17.2729
 -1.377915	 -1.049427	diff=0.328487
  1.624046	 -5.048452	diff=6.6725
 -0.282038	 -0.313353	diff=0.0313154
 -0.325767	  0.956408	diff=1.28218
  0.352080	 -0.679470	diff=1.03155
  0.506544	 -1.582143	diff=2.08869
 -0.010737	  0.239505	diff=0.250242
 -0.225768	  1.752770	diff=1.97854
  8.048111	-19.000947	diff=27.0491
  1.340755	 -2.461263	diff=3.80202
  0.065922	 -1.709530	diff=1.77545
  0.017486	  0.813148	diff=0.795662
  0.627227	 -0.152813	diff=0.78004
  0.562996	 -0.703921	diff=1.26692
 -0.347053	 -0.140036	diff=0.207017
  0.832938	 -3.253302	diff=4.08624
 15.488902	-12.997248	diff=28.4861
  local_diff=183.478
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000004	 -0.000006	diff=1.07439e-05
  0.000005	 -0.000007	diff=1.23385e-05
 -0.000000	 -0.000000	diff=5.44044e-10
 -0.000000	 -0.000000	diff=6.22347e-10
  local_diff=2.30836e-05
# W_emb_tgt, [2 5]
 -1.976544	  0.485515	diff=2.46206
  0.099424	 -1.564168	diff=1.66359
  0.000000	  0.000000	diff=6.85668e-08
  0.000000	 -0.000000	diff=7.7403e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-19.305238	 31.296787	diff=50.602
 10.688750	-16.591006	diff=27.2798
-50.771333	 -9.068542	diff=41.7028
 26.426332	  4.686550	diff=21.7398
  local_diff=145.45
# W_src_char{1}, [8 4]
 -0.002659	  0.006467	diff=0.00912639
  0.000000	 -0.000001	diff=1.17963e-06
 -0.000494	  0.001268	diff=0.00176201
 -0.000021	  0.000053	diff=7.38378e-05
 66.222310	-392.893943	diff=459.116
 -0.000016	  0.000041	diff=5.62838e-05
 -0.001210	  0.003109	diff=0.00431875
  0.000000	 -0.000000	diff=3.34973e-07
 -0.016922	  0.043345	diff=0.0602676
 -0.000020	  0.000052	diff=7.22543e-05
  0.030303	 -0.077756	diff=0.108058
  0.001264	 -0.003258	diff=0.00452274
-423.208589	479.012043	diff=902.221
  0.001251	 -0.003222	diff=0.00447291
  0.073927	 -0.190578	diff=0.264505
 -0.000006	  0.000015	diff=2.05582e-05
  0.020483	 -0.052744	diff=0.0732273
  0.000027	 -0.000069	diff=9.53462e-05
 -0.039782	  0.102413	diff=0.142195
 -0.001677	  0.004292	diff=0.00596807
 -0.050539	  0.129340	diff=0.179879
 -0.001655	  0.004237	diff=0.00589231
 -0.098102	  0.251014	diff=0.349116
  0.000008	 -0.000019	diff=2.69896e-05
 -0.000000	  0.000000	diff=2.00227e-09
  0.000000	  0.000000	diff=1.87228e-12
  0.000000	 -0.000000	diff=3.8881e-09
  0.000000	 -0.000000	diff=1.74037e-10
  0.000000	 -0.000000	diff=4.89626e-09
  0.000000	 -0.000000	diff=1.72556e-10
  0.000000	 -0.000000	diff=9.53771e-09
  0.000000	  0.000000	diff=5.3153e-13
  local_diff=1362.55
# W_src_char{2}, [8 4]
 -9.721236	 23.644144	diff=33.3654
 19.513152	-56.968601	diff=76.4818
 -3.715891	  9.357412	diff=13.0733
  0.287698	 -0.736720	diff=1.02442
 -6.059562	 15.065575	diff=21.1251
  3.488743	 -9.146531	diff=12.6353
  3.009839	 -7.836086	diff=10.8459
 -1.060321	  2.696392	diff=3.75671
 -1.731261	  4.394631	diff=6.12589
  0.093988	 -0.241668	diff=0.335655
 -0.623650	  1.595593	diff=2.21924
 -2.090005	  5.339454	diff=7.42946
 -0.313984	  0.803653	diff=1.11764
  0.171587	 -0.441430	diff=0.613017
  0.032521	 -0.084367	diff=0.116888
  0.522089	 -1.340760	diff=1.86285
  0.308732	 -0.791567	diff=1.1003
 -2.150874	  5.442113	diff=7.59299
  0.778736	 -2.003885	diff=2.78262
 -0.013523	  0.034721	diff=0.0482443
  1.520339	 -3.934598	diff=5.45494
  1.349396	 -3.508663	diff=4.85806
 -0.913549	  2.329837	diff=3.24339
  0.034679	 -0.089386	diff=0.124065
 -0.037234	  0.096811	diff=0.134045
 -4.209177	 10.512703	diff=14.7219
  1.401854	 -3.616558	diff=5.01841
 -0.907619	  2.335665	diff=3.24328
  3.304856	 -8.642568	diff=11.9474
  3.403349	 -8.963254	diff=12.3666
 -2.257720	  5.718730	diff=7.97645
  0.310698	 -0.798593	diff=1.10929
  local_diff=273.851
# W_src_char{3}, [8 4]
  1.891753	 -4.867982	diff=6.75973
 11.890321	-32.803059	diff=44.6934
 -0.873492	  2.229994	diff=3.10349
 -6.343168	 15.672069	diff=22.0152
  0.291589	 -0.754323	diff=1.04591
  0.435579	 -1.123519	diff=1.5591
  2.305278	 -6.005148	diff=8.31043
  0.301920	 -0.769673	diff=1.07159
 -5.457595	 13.433215	diff=18.8908
-27.070018	 60.557110	diff=87.6271
 -2.410002	  6.079695	diff=8.4897
  3.061324	 -8.024211	diff=11.0855
  0.572924	 -1.487259	diff=2.06018
  1.410675	 -3.652323	diff=5.063
  5.462296	-14.535272	diff=19.9976
 -0.189902	  0.490026	diff=0.679928
 -0.619247	  1.593172	diff=2.21242
 -0.639038	  1.627955	diff=2.26699
 -2.770477	  6.971703	diff=9.74218
 -7.458032	 18.331755	diff=25.7898
 -0.145325	  0.372710	diff=0.518034
  0.074005	 -0.190271	diff=0.264277
  5.283040	-14.038847	diff=19.3219
  0.329024	 -0.841733	diff=1.17076
 -0.204301	  0.523775	diff=0.728076
 -0.422399	  1.080612	diff=1.50301
 -0.192131	  0.492611	diff=0.684743
 -0.092041	  0.235865	diff=0.327906
 -0.011104	  0.028592	diff=0.0396957
  0.019060	 -0.048655	diff=0.0677148
  0.430230	 -1.108373	diff=1.5386
  0.005526	 -0.014173	diff=0.0196986
  local_diff=308.648
# W_emb_src_char, [2 5]
 41.774043	-146.701681	diff=188.476
 37.205170	-124.497879	diff=161.703
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000051	  0.000130	diff=0.000180154
  0.000854	 -0.002223	diff=0.00307731
 -1.384850	  3.406134	diff=4.79098
  0.087224	 -0.277325	diff=0.36455
  0.000000	 -0.000000	diff=3.58984e-11
  0.000000	 -0.000000	diff=3.85578e-11
  local_diff=355.338
# W_tgt_char{1}, [8 4]
 -0.039239	 -0.039187	diff=5.20493e-05
  0.176957	  0.176949	diff=8.77007e-06
 -0.555420	 -0.550075	diff=0.00534501
 -0.000005	 -0.000005	diff=4.64699e-08
 -0.069313	 -0.069125	diff=0.000187259
  0.280540	  0.280570	diff=3.00008e-05
  0.478296	  0.486208	diff=0.00791219
 -1.039840	 -1.039894	diff=5.47351e-05
  0.613637	  0.614031	diff=0.000393973
 -2.662176	 -2.656615	diff=0.00556085
  0.161873	  0.162335	diff=0.000461741
  0.000001	  0.000001	diff=3.99272e-09
  0.425694	  0.426438	diff=0.000744053
 -3.226843	 -3.217357	diff=0.00948562
 -6.370098	 -6.323690	diff=0.046408
 -5.208544	 -5.200475	diff=0.00806813
 -0.000000	 -0.000000	diff=1.59018e-11
 -0.000000	 -0.000000	diff=1.47253e-10
  0.013517	  0.013521	diff=4.79465e-06
  0.000000	  0.000000	diff=4.98296e-11
  0.000009	  0.000009	diff=4.03249e-09
  0.000000	 -0.000000	diff=5.5872e-13
  0.000000	 -0.000000	diff=1.35985e-15
  0.000000	  0.000000	diff=4.7588e-18
 -0.000000	 -0.000000	diff=3.90377e-11
  0.000002	  0.000002	diff=3.11191e-10
 -0.001930	 -0.001912	diff=1.84931e-05
 -0.000000	 -0.000000	diff=2.23203e-10
 -0.000014	 -0.000014	diff=1.40065e-08
  0.000000	  0.000000	diff=5.00003e-12
  0.000000	  0.000000	diff=2.01987e-15
  0.000000	 -0.000000	diff=5.5816e-20
  local_diff=0.0847358
# W_tgt_char{2}, [8 4]
  0.101680	  0.101705	diff=2.44984e-05
  0.659474	  0.659527	diff=5.21007e-05
 -0.000884	 -0.000884	diff=2.6018e-08
  0.037773	  0.037773	diff=6.73551e-07
  0.097280	  0.097289	diff=8.77691e-06
  0.078844	  0.078873	diff=2.92466e-05
  0.072324	  0.072989	diff=0.000665579
  2.027730	  2.029702	diff=0.00197166
 -0.345053	 -0.344913	diff=0.000140375
 -0.712064	 -0.711843	diff=0.000220671
  0.000000	  0.000000	diff=1.77235e-12
  0.000001	  0.000001	diff=1.74883e-11
 -0.373388	 -0.373344	diff=4.37884e-05
 -0.022920	 -0.022761	diff=0.000158986
  1.924596	  1.931204	diff=0.00660759
 -4.626165	 -4.618430	diff=0.00773515
  1.599931	  1.597763	diff=0.00216815
 -2.144789	 -2.147061	diff=0.00227165
 -2.168823	 -2.171280	diff=0.00245734
 -0.403649	 -0.403479	diff=0.000169292
 15.367394	 15.439701	diff=0.0723073
 -2.360399	 -2.365714	diff=0.00531505
 -0.070684	 -0.071265	diff=0.000580934
  0.171827	  0.170397	diff=0.00143009
 -0.657054	 -0.658319	diff=0.00126535
 -0.338238	 -0.338955	diff=0.000716161
 -0.031885	 -0.032137	diff=0.00025175
 -4.177347	 -4.166817	diff=0.0105301
 -5.315809	 -5.310180	diff=0.00562873
 -4.609471	 -4.606883	diff=0.00258851
 -2.012779	 -2.007673	diff=0.00510604
 -4.892468	 -4.890319	diff=0.00214872
  local_diff=0.132594
# W_tgt_char{3}, [8 4]
  6.970855	  6.961499	diff=0.00935606
 -1.216452	 -1.217977	diff=0.00152416
 -0.344351	 -0.343904	diff=0.000446986
 -0.707911	 -0.708381	diff=0.00046952
  3.648632	  3.651293	diff=0.00266172
  5.497127	  5.499942	diff=0.00281413
 -2.001888	 -2.001746	diff=0.000141683
  3.805231	  3.823709	diff=0.0184777
  1.223368	  1.220559	diff=0.0028089
  0.679345	  0.676726	diff=0.00261938
 -0.137278	 -0.137343	diff=6.46543e-05
  1.555906	  1.554411	diff=0.00149497
 -2.357133	 -2.357351	diff=0.000218418
 -6.325069	 -6.321388	diff=0.00368089
 -0.385599	 -0.386203	diff=0.000603704
 -1.171737	 -1.172873	diff=0.0011357
  1.440057	  1.440167	diff=0.000109595
 -0.929189	 -0.929261	diff=7.28124e-05
 -0.380998	 -0.381349	diff=0.000350548
  1.231573	  1.230867	diff=0.000706211
  0.500804	  0.500947	diff=0.000142784
 -5.278777	 -5.276284	diff=0.00249358
 -5.059394	 -5.091083	diff=0.0316887
 -0.024281	 -0.024191	diff=9.0061e-05
  0.649756	  0.649722	diff=3.36722e-05
 -0.684966	 -0.685057	diff=9.15915e-05
 -0.289559	 -0.289787	diff=0.000227889
  0.750270	  0.750053	diff=0.000216946
  0.210794	  0.210807	diff=1.29751e-05
 -3.205527	 -3.204552	diff=0.000974818
 -4.292189	 -4.312821	diff=0.0206317
 -0.099480	 -0.099492	diff=1.22268e-05
  local_diff=0.106375
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.121707	 -0.121465	diff=0.000242472
 -2.767582	 -2.641365	diff=0.126217
  0.000000	  0.000000	diff=7.37948e-09
 -0.000000	 -0.000000	diff=9.30319e-10
 -0.000000	 -0.000000	diff=1.44606e-10
  0.000000	  0.000000	diff=1.53453e-12
  local_diff=0.12646
# W_h, [2 4]
  0.083652	 -0.186123	diff=0.269776
 -0.036376	  0.170663	diff=0.207039
  0.257097	 -0.602825	diff=0.859922
 -0.109353	  0.520052	diff=0.629405
 -1.536199	  3.630060	diff=5.16626
 -0.760460	  0.719030	diff=1.47949
  7.841815	 21.288212	diff=13.4464
  2.885827	 -8.085327	diff=10.9712
  local_diff=33.0294
# W_soft, [5 2]
  0.160076	  0.153252	diff=0.00682389
 -0.377414	 -0.377702	diff=0.000288105
 -4.177899	 -4.178184	diff=0.000285036
 -0.763197	 -0.763508	diff=0.000310454
  5.173012	  5.166142	diff=0.00687029
  0.228875	  0.212486	diff=0.016389
 -2.086824	 -2.089522	diff=0.00269756
 -4.696771	 -4.698025	diff=0.00125491
 -1.343485	 -1.345809	diff=0.00232386
  7.937388	  7.920871	diff=0.016517
  local_diff=0.0537601
# W_soft_char, [5 2]
 -3.595383	 -3.599179	diff=0.00379547
  1.613387	  1.608716	diff=0.00467061
  1.136075	  1.132528	diff=0.00354758
 -2.901792	 -2.905058	diff=0.00326606
  3.767526	  3.762993	diff=0.00453381
  4.176844	  4.168774	diff=0.00807083
-10.663550	-10.665948	diff=0.00239798
  4.666285	  4.658165	diff=0.00812089
 -0.981707	 -0.982854	diff=0.00114685
  2.824535	  2.821863	diff=0.00267201
  local_diff=0.0422221
# Num params=404, abs_diff=2852.18
Elapsed time is 12.971723 seconds.
[?1l>