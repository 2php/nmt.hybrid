# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 104, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 104
  src input 1: y y x y
  src mask: 1  1  1  1
  tgt input 1: <s> a b a
  tgt output 1: a b a </s>
  tgt mask: 1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=4.12108e-12
 -0.000000	 -0.000000	diff=2.62038e-13
 -0.000000	 -0.000000	diff=2.29777e-11
  0.000000	  0.000000	diff=5.08694e-12
 -0.000000	 -0.000000	diff=1.41871e-15
  0.000000	  0.000000	diff=3.76824e-13
 -0.000082	 -0.000082	diff=1.41073e-08
 -0.000429	 -0.000429	diff=5.82613e-09
 -0.000005	 -0.000005	diff=3.85284e-12
 -0.000002	 -0.000002	diff=1.41833e-11
 -0.000000	 -0.000000	diff=2.35784e-10
 -0.000000	 -0.000000	diff=4.20775e-12
  0.000000	  0.000000	diff=6.37582e-13
  0.000000	  0.000000	diff=1.55415e-14
 -0.001714	 -0.001714	diff=7.79316e-08
  0.000583	  0.000583	diff=1.44267e-08
 -0.000000	 -0.000000	diff=2.43737e-13
 -0.000000	 -0.000000	diff=2.62419e-13
 -0.000000	 -0.000000	diff=6.7098e-14
 -0.000000	 -0.000000	diff=2.40209e-13
  0.000000	  0.000000	diff=5.89005e-13
  0.000000	  0.000000	diff=5.07916e-13
 -0.000000	 -0.000000	diff=7.77005e-09
  0.000015	  0.000015	diff=1.10464e-10
  0.000000	  0.000000	diff=1.4889e-13
  0.000000	  0.000000	diff=4.96042e-13
  0.000000	  0.000000	diff=2.62731e-13
  0.000000	  0.000000	diff=4.80863e-14
 -0.000000	 -0.000000	diff=1.41999e-13
 -0.000000	 -0.000000	diff=1.99158e-13
 -0.000001	 -0.000001	diff=3.78879e-10
 -0.000010	 -0.000010	diff=1.80099e-08
  local_diff=1.38856e-07
# W_tgt{1}, [8 6]
 -0.000048	 -0.000048	diff=6.23528e-11
  0.000003	  0.000003	diff=4.21402e-12
  0.000008	  0.000008	diff=1.3699e-09
  0.000001	  0.000001	diff=1.52867e-10
 -0.000028	 -0.000028	diff=4.10949e-11
  0.000002	  0.000002	diff=6.22244e-13
 -0.000583	 -0.000584	diff=1.97963e-07
 -0.001178	 -0.001178	diff=2.08685e-08
 -0.000029	 -0.000029	diff=6.80607e-11
  0.000006	  0.000006	diff=8.83643e-12
 -0.000004	 -0.000004	diff=2.98218e-09
 -0.000003	 -0.000003	diff=3.50223e-10
 -0.000025	 -0.000025	diff=4.80695e-11
  0.000001	  0.000001	diff=2.12906e-11
 -0.012451	 -0.012452	diff=3.70661e-07
  0.000339	  0.000339	diff=3.0649e-09
  0.000000	  0.000000	diff=2.24188e-13
 -0.000000	 -0.000000	diff=2.90945e-14
 -0.000000	 -0.000000	diff=7.64907e-13
  0.000000	  0.000000	diff=7.07533e-13
 -0.000000	 -0.000000	diff=6.45375e-13
 -0.000000	 -0.000000	diff=3.09982e-13
 -0.000066	 -0.000066	diff=1.06522e-07
 -0.000001	 -0.000001	diff=2.34566e-11
 -0.000000	 -0.000000	diff=1.38788e-13
  0.000000	  0.000000	diff=1.30415e-13
  0.000000	  0.000000	diff=1.30545e-13
 -0.000000	 -0.000000	diff=3.6064e-13
 -0.000000	 -0.000000	diff=1.65886e-13
 -0.000000	 -0.000000	diff=2.34762e-13
 -0.000009	 -0.000009	diff=3.86424e-10
 -0.000000	 -0.000000	diff=7.96309e-09
  0.000000	  0.000000	diff=1.69923e-12
 -0.000000	 -0.000000	diff=8.78881e-14
 -0.000000	 -0.000000	diff=2.87261e-13
  0.000000	  0.000000	diff=3.92753e-13
 -0.000000	 -0.000000	diff=6.74556e-13
 -0.000000	 -0.000000	diff=6.85968e-13
 -0.000118	 -0.000118	diff=7.09232e-07
  0.000028	  0.000028	diff=2.59377e-09
 -0.000000	 -0.000000	diff=3.74429e-14
 -0.000000	 -0.000000	diff=7.93994e-13
  0.000000	  0.000000	diff=5.56238e-13
  0.000000	  0.000000	diff=2.52151e-13
 -0.000000	 -0.000000	diff=2.31236e-14
  0.000000	  0.000000	diff=4.54346e-13
  0.000054	  0.000054	diff=4.45869e-09
 -0.000023	 -0.000023	diff=8.81102e-08
  local_diff=1.51697e-06
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000825	  0.000825	diff=2.58159e-07
 -0.001517	 -0.001516	diff=6.64834e-07
  0.000079	  0.000079	diff=1.31214e-08
 -0.000444	 -0.000444	diff=2.36816e-07
  local_diff=1.17293e-06
# W_emb_tgt, [2 4]
 -0.003297	 -0.003296	diff=1.38301e-06
 -0.000952	 -0.000951	diff=3.06922e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.008593	 -0.008592	diff=5.44548e-07
 -0.003148	 -0.003147	diff=3.60548e-07
 -0.003640	 -0.003640	diff=3.84628e-07
 -0.001405	 -0.001405	diff=2.02457e-07
  local_diff=3.18211e-06
# W_soft, [4 2]
  0.001906	  0.001906	diff=4.54324e-08
 -0.001267	 -0.001267	diff=4.54347e-08
  0.002200	  0.002200	diff=4.54334e-08
 -0.002838	 -0.002838	diff=4.54343e-08
 -0.000094	 -0.000094	diff=1.8145e-08
  0.000714	  0.000714	diff=1.81449e-08
 -0.002257	 -0.002257	diff=1.81447e-08
  0.001638	  0.001638	diff=1.81453e-08
  local_diff=2.54315e-07
# Num params=104, abs_diff=6.26517e-06
Elapsed time is 0.712024 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.87871e-13
  0.000000	  0.000000	diff=4.75103e-15
 -0.000000	 -0.000000	diff=1.17588e-12
  0.000000	  0.000000	diff=5.47156e-13
 -0.000000	 -0.000000	diff=8.1325e-15
 -0.000000	 -0.000000	diff=8.36079e-13
  0.000078	  0.000078	diff=1.29093e-10
  0.000029	  0.000029	diff=2.99692e-10
  0.000000	  0.000000	diff=1.38588e-12
 -0.000000	 -0.000000	diff=1.45782e-12
  0.000000	  0.000000	diff=5.29089e-12
 -0.000000	 -0.000000	diff=1.9633e-12
  0.000000	  0.000000	diff=1.88295e-12
  0.000000	  0.000000	diff=1.46083e-12
 -0.000146	 -0.000146	diff=3.69597e-10
 -0.000050	 -0.000050	diff=7.14102e-10
  0.000000	  0.000000	diff=1.7042e-13
 -0.000000	 -0.000000	diff=2.19934e-13
  0.000000	  0.000000	diff=6.20103e-13
 -0.000000	 -0.000000	diff=8.92369e-15
  0.000000	  0.000000	diff=3.33915e-13
  0.000000	  0.000000	diff=4.07054e-13
 -0.000002	 -0.000002	diff=2.7209e-09
 -0.000001	 -0.000001	diff=5.82579e-12
 -0.000000	 -0.000000	diff=3.72225e-13
  0.000000	  0.000000	diff=9.99215e-14
 -0.000000	 -0.000000	diff=3.81436e-13
  0.000000	  0.000000	diff=9.86182e-13
 -0.000000	 -0.000000	diff=1.6738e-13
 -0.000000	 -0.000000	diff=4.96972e-13
  0.000002	  0.000002	diff=1.37024e-11
  0.000001	  0.000001	diff=1.14097e-09
  local_diff=5.41436e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=4.53474e-13
  0.000000	  0.000000	diff=1.34504e-13
  0.000000	  0.000000	diff=6.23959e-13
  0.000000	  0.000000	diff=7.88075e-13
 -0.000000	 -0.000000	diff=2.74073e-13
  0.000000	  0.000000	diff=4.31215e-13
 -0.000013	 -0.000013	diff=1.16015e-12
  0.000125	  0.000125	diff=3.2989e-11
 -0.000000	 -0.000000	diff=6.34955e-13
 -0.000000	 -0.000000	diff=3.00408e-13
 -0.000000	 -0.000000	diff=4.77675e-13
 -0.000000	 -0.000000	diff=5.29321e-14
  0.000000	  0.000000	diff=1.84297e-13
 -0.000000	 -0.000000	diff=1.00939e-12
  0.000011	  0.000011	diff=4.28623e-13
 -0.000110	 -0.000110	diff=2.32604e-11
  0.000000	  0.000000	diff=3.06914e-13
  0.000000	  0.000000	diff=1.83441e-13
  0.000000	  0.000000	diff=3.043e-13
  0.000000	  0.000000	diff=9.44611e-14
  0.000000	  0.000000	diff=2.75684e-14
 -0.000000	 -0.000000	diff=1.15939e-12
 -0.000000	 -0.000000	diff=3.36492e-10
  0.000002	  0.000002	diff=9.28825e-13
 -0.000000	 -0.000000	diff=3.50341e-13
 -0.000000	 -0.000000	diff=7.52409e-14
 -0.000000	 -0.000000	diff=1.74739e-14
 -0.000000	 -0.000000	diff=4.63679e-13
  0.000000	 -0.000000	diff=1.00198e-14
  0.000000	  0.000000	diff=3.02766e-13
  0.000000	  0.000000	diff=2.75185e-13
 -0.000003	 -0.000003	diff=3.49534e-09
  local_diff=3.89953e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.17737e-13
 -0.000000	 -0.000000	diff=1.38985e-12
  0.000000	  0.000000	diff=5.08026e-13
  0.000000	  0.000000	diff=1.20726e-11
  0.000000	  0.000000	diff=8.89307e-13
  0.000000	  0.000000	diff=1.65113e-12
 -0.000015	 -0.000015	diff=2.60037e-13
  0.000062	  0.000062	diff=9.26206e-10
 -0.000000	 -0.000000	diff=9.67936e-14
  0.000000	  0.000000	diff=1.41854e-12
 -0.000000	 -0.000000	diff=4.95997e-12
 -0.000000	 -0.000000	diff=1.86669e-11
 -0.000000	 -0.000000	diff=3.67983e-13
  0.000000	  0.000000	diff=1.24693e-12
  0.000039	  0.000039	diff=2.08119e-10
 -0.000246	 -0.000246	diff=1.15356e-09
 -0.000000	 -0.000000	diff=2.74914e-13
  0.000000	  0.000000	diff=8.15147e-13
 -0.000000	 -0.000000	diff=2.62175e-13
  0.000000	  0.000000	diff=7.42665e-13
 -0.000000	 -0.000000	diff=7.93994e-13
  0.000000	  0.000000	diff=3.29668e-13
  0.000000	  0.000000	diff=6.85349e-13
 -0.000000	 -0.000000	diff=3.92488e-13
 -0.000000	 -0.000000	diff=1.55321e-13
  0.000000	  0.000000	diff=4.17505e-13
 -0.000000	 -0.000000	diff=9.98782e-14
  0.000000	  0.000000	diff=4.81805e-13
 -0.000000	 -0.000000	diff=4.44256e-14
  0.000000	  0.000000	diff=3.88969e-13
 -0.000000	 -0.000000	diff=1.24565e-13
 -0.000000	 -0.000000	diff=4.05286e-12
 -0.000000	 -0.000000	diff=1.28261e-12
  0.000000	  0.000000	diff=1.38249e-13
 -0.000000	 -0.000000	diff=2.33193e-13
 -0.000000	 -0.000000	diff=1.12589e-12
 -0.000000	 -0.000000	diff=3.66089e-13
 -0.000000	 -0.000000	diff=7.37407e-13
  0.000001	  0.000001	diff=2.31297e-10
 -0.000003	 -0.000003	diff=1.38626e-10
  0.000000	  0.000000	diff=3.22522e-13
 -0.000000	 -0.000000	diff=7.6103e-14
  0.000000	  0.000000	diff=2.80737e-13
  0.000000	  0.000000	diff=3.54845e-13
  0.000000	  0.000000	diff=1.37503e-13
 -0.000000	 -0.000000	diff=9.48806e-13
 -0.000001	 -0.000001	diff=8.0484e-12
  0.000005	  0.000005	diff=4.11802e-09
  local_diff=6.84399e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.01666e-13
 -0.000000	 -0.000000	diff=3.55836e-13
  0.000000	  0.000000	diff=4.33285e-13
  0.000000	  0.000000	diff=3.49945e-13
  0.000000	  0.000000	diff=1.01009e-13
  0.000000	  0.000000	diff=5.52553e-13
 -0.000017	 -0.000017	diff=3.8587e-11
  0.000075	  0.000075	diff=1.12985e-09
  0.000000	  0.000000	diff=5.65055e-13
 -0.000000	 -0.000000	diff=3.45518e-13
  0.000000	  0.000000	diff=5.41945e-13
 -0.000000	 -0.000000	diff=2.11951e-13
  0.000000	  0.000000	diff=1.72483e-13
 -0.000000	 -0.000000	diff=3.24814e-14
 -0.000007	 -0.000007	diff=8.52036e-10
 -0.000017	 -0.000017	diff=5.05571e-09
 -0.000000	 -0.000000	diff=3.91826e-13
  0.000000	  0.000000	diff=3.82185e-13
  0.000000	  0.000000	diff=8.93196e-13
  0.000000	  0.000000	diff=1.01494e-13
  0.000000	  0.000000	diff=3.42643e-13
  0.000000	  0.000000	diff=7.43071e-13
 -0.000001	 -0.000001	diff=2.26882e-09
  0.000008	  0.000008	diff=1.23334e-10
  0.000000	  0.000000	diff=7.85061e-13
  0.000000	  0.000000	diff=3.95749e-13
 -0.000000	 -0.000000	diff=5.20942e-13
 -0.000000	 -0.000000	diff=4.53371e-13
 -0.000000	 -0.000000	diff=1.25216e-12
 -0.000000	 -0.000000	diff=5.07102e-13
  0.000001	  0.000001	diff=3.17078e-12
 -0.000007	 -0.000007	diff=2.27645e-10
  local_diff=9.70978e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000068	 -0.000068	diff=1.93566e-08
  0.000063	  0.000063	diff=5.08945e-08
 -0.000052	 -0.000052	diff=1.84554e-08
  0.000041	  0.000041	diff=4.53804e-08
  local_diff=1.34087e-07
# W_emb_tgt, [2 4]
 -0.000158	 -0.000158	diff=2.67855e-08
  0.000016	  0.000016	diff=6.77983e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000030	 -0.000030	diff=4.72495e-11
  0.000007	  0.000007	diff=4.74812e-09
  0.000048	  0.000048	diff=1.06678e-08
 -0.000004	 -0.000004	diff=1.79221e-09
  local_diff=5.08208e-08
# W_soft, [4 2]
  0.000042	  0.000042	diff=1.4367e-11
 -0.000201	 -0.000201	diff=1.39263e-11
  0.000111	  0.000111	diff=1.47236e-11
  0.000048	  0.000048	diff=1.45372e-11
  0.000418	  0.000418	diff=8.29578e-11
 -0.000214	 -0.000214	diff=8.33051e-11
 -0.000266	 -0.000266	diff=8.36797e-11
  0.000062	  0.000062	diff=8.33019e-11
  local_diff=3.90799e-10
# Num params=168, abs_diff=2.11166e-07
Elapsed time is 1.360828 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.09364e-12
  0.000000	  0.000000	diff=9.80612e-13
 -0.000000	 -0.000000	diff=2.95292e-12
  0.000000	  0.000000	diff=8.52952e-13
 -0.000000	 -0.000000	diff=1.13293e-12
 -0.000000	 -0.000000	diff=4.50829e-13
  0.000108	  0.000108	diff=1.9171e-10
  0.000037	  0.000037	diff=4.68442e-10
  0.000001	  0.000001	diff=2.80729e-12
 -0.000000	 -0.000000	diff=9.33952e-13
  0.000000	  0.000000	diff=1.06795e-11
 -0.000000	 -0.000000	diff=4.98434e-12
  0.000001	  0.000001	diff=2.87542e-12
  0.000000	  0.000000	diff=1.92008e-13
 -0.000174	 -0.000174	diff=6.12174e-10
 -0.000068	 -0.000068	diff=1.11872e-09
  0.000000	  0.000000	diff=2.52429e-13
 -0.000000	 -0.000000	diff=8.25308e-13
  0.000000	  0.000000	diff=2.05444e-13
 -0.000000	 -0.000000	diff=6.31417e-14
  0.000000	  0.000000	diff=4.44248e-13
  0.000000	  0.000000	diff=4.17173e-13
 -0.000003	 -0.000003	diff=3.14552e-09
 -0.000001	 -0.000001	diff=6.44732e-12
 -0.000000	 -0.000000	diff=1.65474e-13
  0.000000	  0.000000	diff=3.48623e-13
 -0.000000	 -0.000000	diff=9.29333e-14
  0.000000	  0.000000	diff=5.59084e-13
 -0.000000	 -0.000000	diff=3.0615e-13
 -0.000000	 -0.000000	diff=6.59088e-13
  0.000003	  0.000003	diff=1.35491e-11
  0.000001	  0.000001	diff=1.51822e-09
  local_diff=7.10905e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=5.50563e-13
  0.000000	  0.000000	diff=1.22676e-13
  0.000000	  0.000000	diff=1.91327e-13
  0.000000	  0.000000	diff=1.45279e-13
  0.000000	  0.000000	diff=2.66669e-13
 -0.000000	 -0.000000	diff=1.17497e-12
 -0.000007	 -0.000007	diff=1.82884e-12
  0.000161	  0.000161	diff=6.668e-11
 -0.000000	 -0.000000	diff=8.28265e-13
 -0.000000	 -0.000000	diff=3.25382e-15
 -0.000000	 -0.000000	diff=2.74441e-13
 -0.000000	 -0.000000	diff=8.13436e-13
 -0.000000	 -0.000000	diff=2.21267e-14
  0.000000	  0.000000	diff=4.63295e-13
  0.000005	  0.000005	diff=4.63231e-13
 -0.000135	 -0.000135	diff=4.89445e-11
  0.000000	  0.000000	diff=5.53561e-13
  0.000000	  0.000000	diff=8.26172e-13
  0.000000	  0.000000	diff=5.89552e-13
  0.000000	  0.000000	diff=5.68236e-13
  0.000000	  0.000000	diff=6.84781e-13
 -0.000000	 -0.000000	diff=5.87344e-14
 -0.000000	 -0.000000	diff=2.32642e-10
  0.000003	  0.000003	diff=2.15876e-13
 -0.000000	 -0.000000	diff=8.66625e-13
 -0.000000	 -0.000000	diff=5.98642e-13
 -0.000000	 -0.000000	diff=9.46902e-14
 -0.000000	 -0.000000	diff=3.99087e-13
 -0.000000	 -0.000000	diff=3.03796e-13
  0.000000	  0.000000	diff=5.1609e-13
  0.000000	  0.000000	diff=5.39588e-13
 -0.000004	 -0.000004	diff=4.05826e-09
  local_diff=4.42049e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.7816e-13
 -0.000000	 -0.000000	diff=2.8465e-12
  0.000000	  0.000000	diff=1.92235e-12
  0.000000	  0.000000	diff=3.1677e-11
  0.000000	  0.000000	diff=1.00932e-12
  0.000000	  0.000000	diff=2.36142e-12
 -0.000020	 -0.000020	diff=1.29066e-10
  0.000115	  0.000115	diff=1.38437e-09
 -0.000000	 -0.000000	diff=2.41373e-13
  0.000001	  0.000001	diff=1.48548e-12
 -0.000000	 -0.000000	diff=7.13818e-12
 -0.000000	 -0.000000	diff=3.64973e-11
 -0.000000	 -0.000000	diff=5.47413e-13
  0.000000	  0.000000	diff=6.64778e-13
  0.000022	  0.000022	diff=1.91815e-11
 -0.000201	 -0.000201	diff=2.07743e-09
 -0.000000	 -0.000000	diff=1.49093e-12
  0.000000	  0.000000	diff=9.12218e-14
 -0.000000	 -0.000000	diff=2.26095e-14
  0.000000	  0.000000	diff=1.17987e-13
 -0.000000	 -0.000000	diff=5.62661e-13
  0.000000	  0.000000	diff=6.83768e-13
  0.000000	  0.000000	diff=3.83518e-13
 -0.000000	 -0.000000	diff=4.67511e-13
 -0.000000	 -0.000000	diff=4.66735e-13
  0.000000	  0.000000	diff=2.78207e-13
 -0.000000	 -0.000000	diff=4.97995e-13
  0.000000	  0.000000	diff=4.71402e-13
  0.000000	  0.000000	diff=3.22534e-13
  0.000000	  0.000000	diff=4.02284e-13
  0.000000	  0.000000	diff=5.58212e-13
 -0.000000	 -0.000000	diff=4.76981e-12
 -0.000000	 -0.000000	diff=3.22877e-13
  0.000000	  0.000000	diff=7.48947e-13
 -0.000000	 -0.000000	diff=4.89491e-13
 -0.000000	 -0.000000	diff=5.9079e-13
 -0.000000	 -0.000000	diff=4.52118e-13
 -0.000000	 -0.000000	diff=5.36659e-13
  0.000001	  0.000001	diff=2.55753e-10
 -0.000005	 -0.000005	diff=1.76365e-10
  0.000000	  0.000000	diff=3.53711e-13
 -0.000000	 -0.000000	diff=2.12685e-14
  0.000000	  0.000000	diff=4.32161e-13
  0.000000	  0.000000	diff=4.9507e-13
  0.000000	  0.000000	diff=2.67875e-13
 -0.000000	 -0.000000	diff=1.02391e-13
 -0.000001	 -0.000001	diff=6.3292e-12
  0.000006	  0.000006	diff=6.28238e-09
  local_diff=1.04338e-08
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.02928e-12
 -0.000000	 -0.000000	diff=1.70213e-13
  0.000000	  0.000000	diff=7.19194e-13
  0.000000	  0.000000	diff=2.93348e-14
  0.000000	  0.000000	diff=4.01891e-13
  0.000000	  0.000000	diff=2.24166e-13
 -0.000025	 -0.000025	diff=2.19886e-10
  0.000184	  0.000184	diff=3.15538e-09
 -0.000000	 -0.000000	diff=3.3341e-15
 -0.000000	 -0.000000	diff=1.1556e-13
  0.000000	  0.000000	diff=2.3503e-13
 -0.000000	 -0.000000	diff=4.497e-13
  0.000000	  0.000000	diff=1.26662e-13
 -0.000000	 -0.000000	diff=7.56155e-13
 -0.000010	 -0.000010	diff=1.40094e-09
  0.000006	  0.000006	diff=3.61153e-09
 -0.000000	 -0.000000	diff=3.25059e-13
  0.000000	  0.000000	diff=1.93779e-13
  0.000000	  0.000000	diff=6.82007e-13
  0.000000	  0.000000	diff=1.46005e-13
 -0.000000	 -0.000000	diff=6.81174e-13
  0.000000	  0.000000	diff=5.09287e-13
 -0.000001	 -0.000001	diff=2.44011e-09
  0.000010	  0.000010	diff=1.44717e-10
  0.000000	  0.000000	diff=2.12523e-13
  0.000000	  0.000000	diff=2.90598e-13
 -0.000000	 -0.000000	diff=5.47854e-13
 -0.000000	 -0.000000	diff=3.97262e-13
  0.000000	  0.000000	diff=3.83309e-13
 -0.000000	 -0.000000	diff=2.3611e-13
  0.000001	  0.000001	diff=1.9942e-12
 -0.000010	 -0.000010	diff=3.88842e-09
  local_diff=1.48718e-08
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000069	 -0.000069	diff=2.71427e-08
  0.000052	  0.000052	diff=5.86418e-08
 -0.000077	 -0.000077	diff=3.39724e-08
  0.000055	  0.000055	diff=7.00118e-08
  local_diff=1.89769e-07
# W_emb_tgt, [2 4]
 -0.000194	 -0.000194	diff=4.48346e-08
  0.000009	  0.000009	diff=3.76697e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000066	 -0.000066	diff=1.23607e-09
  0.000005	  0.000005	diff=3.73416e-09
  0.000047	  0.000047	diff=1.31973e-08
 -0.000003	 -0.000003	diff=2.08585e-09
  local_diff=6.8855e-08
# W_soft, [4 2]
  0.000076	  0.000076	diff=3.22358e-11
 -0.000222	 -0.000222	diff=3.22656e-11
  0.000120	  0.000120	diff=3.27771e-11
  0.000025	  0.000025	diff=3.27508e-11
  0.000468	  0.000468	diff=1.4538e-10
 -0.000177	 -0.000177	diff=1.4486e-10
 -0.000386	 -0.000386	diff=1.45896e-10
  0.000095	  0.000095	diff=1.45087e-10
  local_diff=7.11253e-10
# Num params=168, abs_diff=2.9617e-07
Elapsed time is 1.407866 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 176, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 176
  src input 1: <s> y x x
  src mask: 0  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=3.2965e-13
  0.000000	  0.000000	diff=7.12138e-13
 -0.000000	 -0.000000	diff=1.97651e-13
  0.000000	  0.000000	diff=1.04118e-12
 -0.000000	 -0.000000	diff=1.27162e-12
 -0.000000	 -0.000000	diff=4.32033e-13
  0.000003	  0.000003	diff=1.86687e-11
  0.000002	  0.000002	diff=2.2171e-11
  0.000000	  0.000000	diff=1.12766e-12
 -0.000000	 -0.000000	diff=6.67334e-13
  0.000000	  0.000000	diff=1.12551e-12
 -0.000000	 -0.000000	diff=8.48588e-15
  0.000000	  0.000000	diff=4.10143e-13
  0.000000	  0.000000	diff=1.35247e-13
 -0.000006	 -0.000006	diff=8.70011e-11
 -0.000004	 -0.000004	diff=6.36233e-11
  0.000000	  0.000000	diff=1.66134e-13
 -0.000000	 -0.000000	diff=8.52312e-13
  0.000000	  0.000000	diff=5.15942e-14
 -0.000000	 -0.000000	diff=4.04008e-13
  0.000000	  0.000000	diff=6.76142e-13
  0.000000	  0.000000	diff=1.69425e-13
 -0.000000	 -0.000000	diff=1.14682e-10
 -0.000000	 -0.000000	diff=6.96233e-14
 -0.000000	 -0.000000	diff=1.39121e-12
  0.000000	  0.000000	diff=4.66441e-13
 -0.000000	 -0.000000	diff=1.11037e-12
  0.000000	  0.000000	diff=6.57036e-14
 -0.000000	 -0.000000	diff=1.08041e-12
 -0.000000	 -0.000000	diff=9.28536e-14
  0.000000	  0.000000	diff=2.60077e-14
  0.000000	  0.000000	diff=4.98597e-11
  local_diff=3.70086e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=5.74578e-13
  0.000000	  0.000000	diff=8.80815e-13
  0.000000	  0.000000	diff=4.65577e-13
  0.000000	  0.000000	diff=1.10136e-12
  0.000000	  0.000000	diff=1.85604e-12
 -0.000000	 -0.000000	diff=7.78986e-13
 -0.000002	 -0.000002	diff=6.26917e-13
  0.000004	  0.000004	diff=5.65538e-12
 -0.000000	 -0.000000	diff=4.1652e-13
 -0.000000	 -0.000000	diff=5.34292e-15
 -0.000000	 -0.000000	diff=1.64527e-13
 -0.000000	 -0.000000	diff=4.99913e-13
 -0.000000	 -0.000000	diff=4.77374e-13
  0.000000	  0.000000	diff=5.44519e-13
  0.000001	  0.000001	diff=3.76301e-13
 -0.000003	 -0.000003	diff=4.57409e-12
  0.000000	  0.000000	diff=5.60096e-13
  0.000000	  0.000000	diff=8.90438e-13
  0.000000	  0.000000	diff=8.04132e-13
  0.000000	  0.000000	diff=3.17729e-13
  0.000000	  0.000000	diff=2.73779e-13
 -0.000000	 -0.000000	diff=5.46029e-13
 -0.000000	 -0.000000	diff=1.36016e-11
  0.000000	  0.000000	diff=4.47956e-13
 -0.000000	 -0.000000	diff=4.0977e-13
 -0.000000	 -0.000000	diff=2.759e-13
 -0.000000	 -0.000000	diff=4.33386e-13
 -0.000000	 -0.000000	diff=1.32425e-13
 -0.000000	 -0.000000	diff=9.47494e-13
  0.000000	  0.000000	diff=6.62898e-13
  0.000000	  0.000000	diff=6.03045e-13
 -0.000000	 -0.000000	diff=1.41899e-10
  local_diff=1.81804e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=9.08303e-13
  0.000000	  0.000000	diff=2.92735e-13
  0.000000	  0.000000	diff=5.10214e-13
  0.000000	  0.000000	diff=1.4162e-12
  0.000000	  0.000000	diff=5.39393e-13
  0.000000	  0.000000	diff=1.14e-13
 -0.000001	 -0.000001	diff=2.09133e-11
 -0.000001	 -0.000001	diff=6.95669e-12
  0.000000	  0.000000	diff=5.9304e-13
 -0.000000	 -0.000000	diff=1.0049e-13
 -0.000000	 -0.000000	diff=1.00333e-12
 -0.000000	 -0.000000	diff=2.45925e-12
 -0.000000	 -0.000000	diff=1.16578e-12
 -0.000000	 -0.000000	diff=1.32972e-12
  0.000001	  0.000001	diff=1.28788e-11
 -0.000004	 -0.000004	diff=1.04733e-10
 -0.000000	  0.000000	diff=7.24181e-13
  0.000000	  0.000000	diff=6.54956e-14
 -0.000000	 -0.000000	diff=7.09276e-13
 -0.000000	 -0.000000	diff=6.97976e-13
 -0.000000	  0.000000	diff=7.1477e-13
  0.000000	  0.000000	diff=8.15942e-14
 -0.000000	 -0.000000	diff=2.47567e-13
 -0.000000	 -0.000000	diff=1.90431e-13
  0.000000	 -0.000000	diff=1.80093e-15
  0.000000	  0.000000	diff=2.09289e-13
  0.000000	 -0.000000	diff=6.77123e-15
  0.000000	  0.000000	diff=4.3077e-14
  0.000000	 -0.000000	diff=1.14006e-14
 -0.000000	  0.000000	diff=9.44019e-13
 -0.000000	 -0.000000	diff=1.08135e-12
 -0.000000	 -0.000000	diff=1.77677e-13
 -0.000000	 -0.000000	diff=9.95793e-13
  0.000000	  0.000000	diff=3.68679e-13
 -0.000000	 -0.000000	diff=1.16424e-12
 -0.000000	 -0.000000	diff=5.33128e-13
 -0.000000	 -0.000000	diff=2.46199e-13
 -0.000000	 -0.000000	diff=7.36933e-13
  0.000000	  0.000000	diff=1.36178e-11
 -0.000000	 -0.000000	diff=3.88981e-12
 -0.000000	 -0.000000	diff=8.87389e-13
 -0.000000	 -0.000000	diff=1.14106e-13
 -0.000000	 -0.000000	diff=1.0964e-12
  0.000000	  0.000000	diff=1.1347e-12
 -0.000000	 -0.000000	diff=8.42824e-13
  0.000000	  0.000000	diff=1.72391e-12
  0.000000	  0.000000	diff=3.36239e-13
  0.000000	  0.000000	diff=2.92498e-10
  local_diff=4.82006e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.3294e-12
 -0.000000	 -0.000000	diff=2.75226e-14
 -0.000000	 -0.000000	diff=7.05726e-13
  0.000000	  0.000000	diff=1.48057e-12
  0.000000	  0.000000	diff=7.8082e-13
  0.000000	  0.000000	diff=1.14096e-12
  0.000001	  0.000001	diff=4.21917e-13
  0.000023	  0.000023	diff=5.17121e-11
  0.000000	  0.000000	diff=2.45468e-13
 -0.000000	 -0.000000	diff=2.92155e-13
  0.000000	  0.000000	diff=1.35844e-12
 -0.000000	 -0.000000	diff=8.42123e-14
  0.000000	  0.000000	diff=7.96005e-13
 -0.000000	 -0.000000	diff=9.26576e-14
 -0.000000	 -0.000000	diff=4.85996e-13
 -0.000005	 -0.000005	diff=6.7674e-12
  0.000000	  0.000000	diff=4.8598e-14
 -0.000000	 -0.000000	diff=1.31257e-12
 -0.000000	 -0.000000	diff=7.00526e-13
  0.000000	  0.000000	diff=7.01765e-13
 -0.000000	 -0.000000	diff=5.54098e-14
  0.000000	  0.000000	diff=9.73242e-13
  0.000000	  0.000000	diff=5.71334e-12
  0.000000	  0.000000	diff=1.97919e-12
 -0.000000	 -0.000000	diff=3.31356e-13
  0.000000	  0.000000	diff=8.94313e-13
  0.000000	  0.000000	diff=9.99289e-14
 -0.000000	 -0.000000	diff=2.99627e-13
  0.000000	  0.000000	diff=5.20958e-13
 -0.000000	 -0.000000	diff=1.34272e-13
 -0.000000	 -0.000000	diff=1.71622e-12
 -0.000000	 -0.000000	diff=3.69546e-10
  local_diff=4.52749e-10
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.57778e-09
  0.000002	  0.000002	diff=2.14775e-09
 -0.000001	 -0.000001	diff=6.94524e-10
  0.000000	  0.000000	diff=1.26903e-09
  local_diff=5.68908e-09
# W_emb_tgt, [2 4]
 -0.000004	 -0.000004	diff=3.21835e-10
  0.000001	  0.000001	diff=4.44303e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000004	  0.000004	diff=2.41819e-11
 -0.000000	 -0.000000	diff=7.3905e-11
  0.000001	  0.000001	diff=2.56938e-10
  0.000000	  0.000000	diff=8.19036e-11
  local_diff=1.20307e-09
# W_h, [2 4]
 -0.000003	 -0.000003	diff=7.73707e-13
  0.000014	  0.000014	diff=8.08309e-13
  0.000004	  0.000004	diff=5.18853e-13
 -0.000017	 -0.000017	diff=1.8697e-13
  0.000011	  0.000011	diff=1.00476e-11
 -0.000010	 -0.000010	diff=1.89821e-12
  0.000008	  0.000008	diff=6.83052e-11
 -0.000018	 -0.000018	diff=7.83269e-11
  local_diff=1.60866e-10
# W_soft, [4 2]
  0.000011	  0.000011	diff=3.2259e-15
 -0.000007	 -0.000007	diff=1.27227e-13
  0.000000	  0.000000	diff=1.36648e-12
 -0.000004	 -0.000004	diff=1.35169e-12
  0.000005	  0.000005	diff=6.21382e-13
 -0.000006	 -0.000006	diff=6.0263e-13
  0.000001	  0.000001	diff=1.15134e-12
 -0.000000	 -0.000000	diff=4.66816e-13
  local_diff=5.69079e-12
# Num params=176, abs_diff=8.54535e-09
Elapsed time is 2.012053 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_pos=4 v_pos=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=2.71687e-13
  0.000000	  0.000000	diff=8.28964e-14
 -0.000000	 -0.000000	diff=1.7857e-13
  0.000000	  0.000000	diff=1.90113e-13
 -0.000000	 -0.000000	diff=6.89225e-14
 -0.000000	 -0.000000	diff=3.57871e-13
  0.000004	  0.000004	diff=1.07605e-11
  0.000003	  0.000003	diff=2.93421e-11
  0.000000	  0.000000	diff=5.04435e-13
 -0.000000	 -0.000000	diff=8.58211e-13
  0.000000	  0.000000	diff=1.39824e-12
 -0.000000	 -0.000000	diff=8.29743e-13
  0.000000	  0.000000	diff=3.15718e-13
  0.000000	  0.000000	diff=6.72157e-13
 -0.000008	 -0.000008	diff=2.33623e-11
 -0.000010	 -0.000010	diff=1.26155e-10
  0.000000	  0.000000	diff=6.78227e-13
 -0.000000	 -0.000000	diff=1.4656e-13
  0.000000	  0.000000	diff=5.10438e-13
 -0.000000	 -0.000000	diff=1.23407e-12
  0.000000	  0.000000	diff=8.56847e-13
  0.000000	  0.000000	diff=4.39557e-13
 -0.000000	 -0.000000	diff=2.07915e-10
 -0.000000	 -0.000000	diff=5.17253e-13
 -0.000000	 -0.000000	diff=7.17614e-13
  0.000000	  0.000000	diff=7.58801e-13
 -0.000000	 -0.000000	diff=6.36763e-13
  0.000000	  0.000000	diff=1.01506e-12
 -0.000000	 -0.000000	diff=1.93524e-13
 -0.000000	 -0.000000	diff=3.61677e-13
  0.000000	  0.000000	diff=8.23499e-13
  0.000000	  0.000000	diff=1.08666e-10
  local_diff=5.2082e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.02347e-12
  0.000000	  0.000000	diff=9.18735e-13
  0.000000	  0.000000	diff=2.30604e-13
  0.000000	  0.000000	diff=2.9795e-13
  0.000000	  0.000000	diff=9.87274e-13
 -0.000000	 -0.000000	diff=7.04221e-13
 -0.000006	 -0.000006	diff=2.10753e-12
  0.000003	  0.000003	diff=3.81267e-12
 -0.000000	 -0.000000	diff=5.63104e-14
 -0.000000	 -0.000000	diff=3.55146e-13
 -0.000000	 -0.000000	diff=3.27472e-13
 -0.000000	 -0.000000	diff=7.98446e-13
 -0.000000	 -0.000000	diff=1.22075e-12
  0.000000	  0.000000	diff=1.3376e-12
  0.000005	  0.000005	diff=1.24932e-12
 -0.000006	 -0.000006	diff=4.86803e-12
  0.000000	  0.000000	diff=3.39893e-13
  0.000000	  0.000000	diff=5.03933e-13
  0.000000	  0.000000	diff=3.75673e-13
  0.000000	  0.000000	diff=5.35814e-14
  0.000000	  0.000000	diff=6.8374e-13
 -0.000000	 -0.000000	diff=5.44613e-13
 -0.000000	 -0.000000	diff=7.73482e-11
  0.000000	  0.000000	diff=4.1021e-13
 -0.000000	 -0.000000	diff=2.98706e-13
 -0.000000	 -0.000000	diff=1.58369e-13
 -0.000000	 -0.000000	diff=2.97308e-14
 -0.000000	 -0.000000	diff=1.61023e-13
 -0.000000	 -0.000000	diff=1.15282e-13
  0.000000	  0.000000	diff=3.35517e-13
  0.000000	  0.000000	diff=3.19622e-13
 -0.000000	 -0.000000	diff=2.45057e-10
  local_diff=3.47031e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=5.03167e-13
 -0.000000	 -0.000000	diff=5.74068e-13
  0.000000	  0.000000	diff=2.455e-12
 -0.000000	 -0.000000	diff=1.20897e-12
  0.000000	  0.000000	diff=9.82009e-14
 -0.000000	 -0.000000	diff=9.87182e-14
 -0.000007	 -0.000007	diff=1.22237e-10
  0.000032	  0.000032	diff=2.39761e-10
  0.000000	  0.000000	diff=3.2665e-13
  0.000000	  0.000000	diff=3.49818e-13
 -0.000000	 -0.000000	diff=1.13498e-12
 -0.000000	 -0.000000	diff=2.27461e-12
  0.000000	  0.000000	diff=1.49257e-12
  0.000000	  0.000000	diff=2.8442e-13
  0.000004	  0.000004	diff=3.88136e-11
 -0.000031	 -0.000031	diff=3.71834e-10
 -0.000000	 -0.000000	diff=1.04728e-12
  0.000000	  0.000000	diff=7.14618e-13
 -0.000000	 -0.000000	diff=1.14585e-12
  0.000000	  0.000000	diff=9.14845e-14
 -0.000000	 -0.000000	diff=9.37029e-13
  0.000000	  0.000000	diff=5.66958e-13
  0.000000	  0.000000	diff=1.33375e-13
 -0.000000	 -0.000000	diff=4.97554e-14
  0.000000	  0.000000	diff=3.71943e-13
 -0.000000	 -0.000000	diff=8.14965e-13
 -0.000000	  0.000000	diff=1.62818e-12
 -0.000000	 -0.000000	diff=1.04998e-12
  0.000000	  0.000000	diff=4.93835e-13
 -0.000000	 -0.000000	diff=9.78392e-13
 -0.000000	 -0.000000	diff=6.6155e-13
  0.000000	  0.000000	diff=1.07926e-12
 -0.000000	 -0.000000	diff=1.89555e-13
  0.000000	  0.000000	diff=4.25635e-13
 -0.000000	 -0.000000	diff=2.53682e-13
 -0.000000	 -0.000000	diff=1.61235e-13
 -0.000000	 -0.000000	diff=5.27782e-14
  0.000000	  0.000000	diff=2.48394e-13
  0.000000	  0.000000	diff=5.81092e-10
 -0.000001	 -0.000001	diff=2.48722e-11
 -0.000000	 -0.000000	diff=6.65829e-14
  0.000000	  0.000000	diff=6.93715e-13
  0.000000	  0.000000	diff=7.15414e-14
  0.000000	  0.000000	diff=9.46472e-13
 -0.000000	 -0.000000	diff=4.11023e-13
  0.000000	  0.000000	diff=3.49565e-13
 -0.000000	 -0.000000	diff=5.31746e-12
  0.000000	  0.000000	diff=7.79432e-10
  local_diff=2.18979e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.09465e-12
  0.000000	  0.000000	diff=8.29531e-13
  0.000000	  0.000000	diff=3.57942e-13
  0.000000	  0.000000	diff=7.25626e-13
 -0.000000	 -0.000000	diff=3.35214e-13
  0.000000	  0.000000	diff=3.91768e-13
 -0.000014	 -0.000014	diff=5.96309e-12
  0.000019	  0.000019	diff=2.20487e-11
 -0.000000	 -0.000000	diff=2.22214e-13
  0.000000	  0.000000	diff=8.71873e-14
 -0.000000	 -0.000000	diff=5.05379e-14
  0.000000	  0.000000	diff=2.12022e-14
 -0.000000	 -0.000000	diff=4.02202e-13
  0.000000	  0.000000	diff=2.03783e-14
 -0.000018	 -0.000018	diff=4.47466e-11
  0.000021	  0.000021	diff=7.15971e-11
 -0.000000	 -0.000000	diff=5.55991e-13
 -0.000000	 -0.000000	diff=2.31795e-13
  0.000000	  0.000000	diff=5.1202e-13
  0.000000	  0.000000	diff=1.36825e-12
  0.000000	  0.000000	diff=5.01908e-13
  0.000000	  0.000000	diff=7.04833e-13
 -0.000000	 -0.000000	diff=8.09976e-10
  0.000000	  0.000000	diff=2.16895e-11
  0.000000	  0.000000	diff=2.93865e-13
 -0.000000	 -0.000000	diff=7.35344e-13
 -0.000000	 -0.000000	diff=1.16281e-12
 -0.000000	 -0.000000	diff=3.36868e-13
  0.000000	  0.000000	diff=4.6684e-13
 -0.000000	 -0.000000	diff=5.03331e-13
  0.000001	  0.000001	diff=3.81398e-12
 -0.000001	 -0.000001	diff=1.90861e-09
  local_diff=2.90036e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000005	 -0.000005	diff=1.70782e-09
 -0.000001	 -0.000001	diff=5.15328e-10
 -0.000003	 -0.000003	diff=1.28676e-09
 -0.000003	 -0.000003	diff=2.31388e-10
  local_diff=3.7413e-09
# W_emb_tgt, [2 4]
 -0.000016	 -0.000016	diff=4.41144e-09
  0.000002	  0.000002	diff=1.08393e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000014	 -0.000014	diff=5.36535e-09
  0.000002	  0.000002	diff=1.10428e-09
 -0.000005	 -0.000005	diff=2.92347e-09
  0.000002	  0.000002	diff=1.17225e-09
  local_diff=1.60607e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=3.99914e-15
  0.000000	  0.000000	diff=5.06273e-15
  0.000000	 -0.000000	diff=1.24126e-14
  0.000000	 -0.000000	diff=1.57138e-14
  local_diff=3.71882e-14
# v_pos, [1 2]
 -0.000000	  0.000000	diff=1.49251e-12
  0.000000	  0.000000	diff=2.52354e-13
  local_diff=1.74486e-12
# W_h, [2 4]
 -0.000009	 -0.000009	diff=2.12962e-13
  0.000006	  0.000006	diff=2.9753e-13
  0.000011	  0.000011	diff=3.7415e-13
 -0.000008	 -0.000008	diff=1.09474e-14
  0.000005	  0.000005	diff=3.55734e-12
  0.000000	  0.000000	diff=1.56363e-12
  0.000032	  0.000032	diff=1.59095e-10
 -0.000018	 -0.000018	diff=4.4842e-11
  local_diff=2.09954e-10
# W_soft, [4 2]
 -0.000017	 -0.000017	diff=5.5238e-13
 -0.000002	 -0.000002	diff=3.83745e-13
  0.000013	  0.000013	diff=2.08119e-14
  0.000005	  0.000005	diff=2.0477e-13
  0.000034	  0.000034	diff=1.38478e-13
 -0.000021	 -0.000021	diff=2.47524e-13
 -0.000013	 -0.000013	diff=3.38367e-13
  0.000001	  0.000001	diff=1.38259e-14
  local_diff=1.8999e-12
# Num params=182, abs_diff=2.59737e-08
Elapsed time is 2.708350 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 180, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 180
  src input 1: <s> <s> x y
  src mask: 0  0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=7.25527e-13
  0.000000	  0.000000	diff=3.30373e-13
 -0.000000	 -0.000000	diff=6.59947e-13
  0.000000	  0.000000	diff=3.96124e-13
 -0.000000	 -0.000000	diff=6.46696e-13
 -0.000000	 -0.000000	diff=3.60854e-13
  0.000004	  0.000004	diff=1.64823e-11
  0.000002	  0.000002	diff=2.46041e-11
  0.000000	  0.000000	diff=1.89628e-13
 -0.000000	 -0.000000	diff=1.09527e-12
  0.000000	  0.000000	diff=1.38839e-12
 -0.000000	 -0.000000	diff=5.56712e-13
  0.000000	  0.000000	diff=9.92847e-13
  0.000000	  0.000000	diff=7.81952e-13
 -0.000004	 -0.000004	diff=1.75265e-11
 -0.000008	 -0.000008	diff=1.09849e-10
  0.000000	  0.000000	diff=6.72281e-13
 -0.000000	 -0.000000	diff=7.11101e-13
  0.000000	  0.000000	diff=1.69794e-13
 -0.000000	 -0.000000	diff=6.40575e-13
 -0.000000	 -0.000000	diff=9.25861e-13
  0.000000	  0.000000	diff=1.08435e-12
 -0.000000	 -0.000000	diff=1.36348e-11
 -0.000000	 -0.000000	diff=1.1162e-12
 -0.000000	 -0.000000	diff=1.12875e-12
  0.000000	  0.000000	diff=4.8725e-13
 -0.000000	 -0.000000	diff=7.88368e-13
  0.000000	  0.000000	diff=7.05899e-13
  0.000000	  0.000000	diff=6.91426e-13
 -0.000000	 -0.000000	diff=1.12456e-12
  0.000000	  0.000000	diff=2.6305e-13
  0.000000	  0.000000	diff=8.86e-11
  local_diff=2.89331e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.77226e-13
  0.000000	  0.000000	diff=3.53462e-13
 -0.000000	 -0.000000	diff=8.21037e-13
  0.000000	  0.000000	diff=5.901e-13
  0.000000	  0.000000	diff=1.10312e-12
  0.000000	  0.000000	diff=1.46781e-12
  0.000004	  0.000004	diff=3.07653e-13
  0.000006	  0.000006	diff=1.02407e-12
  0.000000	  0.000000	diff=5.89346e-13
 -0.000000	 -0.000000	diff=1.48621e-12
  0.000000	  0.000000	diff=5.84522e-13
 -0.000000	 -0.000000	diff=1.85798e-13
 -0.000000	 -0.000000	diff=1.10088e-12
 -0.000000	 -0.000000	diff=8.72813e-13
 -0.000007	 -0.000007	diff=1.38621e-12
 -0.000011	 -0.000011	diff=2.23378e-12
 -0.000000	 -0.000000	diff=5.47288e-13
  0.000000	  0.000000	diff=1.36964e-12
 -0.000000	 -0.000000	diff=1.24207e-12
 -0.000000	  0.000000	diff=9.60686e-13
 -0.000000	  0.000000	diff=1.04472e-12
  0.000000	  0.000000	diff=1.12475e-12
  0.000000	  0.000000	diff=2.34169e-11
  0.000000	  0.000000	diff=1.64329e-12
  0.000000	  0.000000	diff=1.18779e-12
 -0.000000	 -0.000000	diff=4.0224e-13
  0.000000	  0.000000	diff=5.73037e-13
 -0.000000	 -0.000000	diff=1.38834e-13
 -0.000000	 -0.000000	diff=1.00893e-12
 -0.000000	 -0.000000	diff=1.09906e-12
 -0.000000	 -0.000000	diff=1.10885e-12
 -0.000000	 -0.000000	diff=3.64226e-11
  local_diff=8.76747e-11
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.04432e-12
 -0.000000	 -0.000000	diff=5.66269e-13
 -0.000000	 -0.000000	diff=2.60918e-12
 -0.000000	 -0.000000	diff=1.45481e-12
 -0.000000	 -0.000000	diff=6.97181e-13
 -0.000000	 -0.000000	diff=5.79122e-13
  0.000007	  0.000007	diff=1.62641e-10
  0.000064	  0.000064	diff=1.69971e-10
 -0.000000	 -0.000000	diff=1.37756e-12
  0.000000	  0.000000	diff=1.14599e-12
  0.000000	  0.000000	diff=1.04707e-14
 -0.000000	 -0.000000	diff=3.46298e-12
  0.000000	  0.000000	diff=5.90249e-13
  0.000000	  0.000000	diff=1.689e-12
 -0.000004	 -0.000004	diff=5.70541e-11
 -0.000036	 -0.000036	diff=2.73003e-10
 -0.000000	 -0.000000	diff=2.29041e-13
 -0.000000	 -0.000000	diff=4.95275e-13
 -0.000000	 -0.000000	diff=5.93886e-13
 -0.000000	 -0.000000	diff=6.37361e-13
 -0.000000	 -0.000000	diff=5.84604e-13
 -0.000000	 -0.000000	diff=9.52663e-13
  0.000000	  0.000000	diff=2.34704e-13
  0.000000	  0.000000	diff=6.99316e-13
 -0.000000	 -0.000000	diff=6.75809e-14
 -0.000000	 -0.000000	diff=3.48978e-13
  0.000000	 -0.000000	diff=3.91101e-13
 -0.000000	 -0.000000	diff=1.46681e-14
 -0.000000	 -0.000000	diff=6.65243e-13
 -0.000000	 -0.000000	diff=4.81605e-13
  0.000000	  0.000000	diff=1.11316e-12
  0.000000	  0.000000	diff=3.2885e-13
  0.000000	  0.000000	diff=1.37428e-12
  0.000000	  0.000000	diff=5.87971e-13
  0.000000	  0.000000	diff=1.42301e-13
  0.000000	  0.000000	diff=8.2193e-13
  0.000000	  0.000000	diff=1.59667e-12
  0.000000	  0.000000	diff=9.64348e-13
 -0.000000	 -0.000000	diff=3.62852e-10
 -0.000001	 -0.000001	diff=6.24802e-11
  0.000000	  0.000000	diff=1.3009e-12
  0.000000	  0.000000	diff=5.60905e-13
 -0.000000	 -0.000000	diff=1.06845e-12
  0.000000	  0.000000	diff=9.52214e-13
  0.000000	  0.000000	diff=2.4071e-13
  0.000000	  0.000000	diff=9.41199e-13
  0.000000	  0.000000	diff=2.07587e-12
 -0.000000	 -0.000000	diff=5.40467e-10
  local_diff=1.66416e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.14414e-12
  0.000000	  0.000000	diff=7.24542e-13
 -0.000000	 -0.000000	diff=5.47795e-13
  0.000000	  0.000000	diff=7.66428e-13
  0.000000	  0.000000	diff=7.08064e-13
  0.000000	  0.000000	diff=9.00708e-13
  0.000015	  0.000015	diff=5.81742e-12
  0.000024	  0.000024	diff=4.45132e-11
  0.000000	  0.000000	diff=5.18061e-13
  0.000000	  0.000000	diff=5.38292e-13
  0.000000	  0.000000	diff=2.11489e-13
  0.000000	  0.000000	diff=3.8802e-13
  0.000000	  0.000000	diff=1.61666e-13
  0.000000	  0.000000	diff=4.22923e-13
  0.000024	  0.000024	diff=5.52161e-12
  0.000046	  0.000046	diff=2.53993e-10
  0.000000	  0.000000	diff=9.30403e-13
 -0.000000	 -0.000000	diff=1.54542e-12
 -0.000000	 -0.000000	diff=8.06774e-13
 -0.000000	 -0.000000	diff=3.47252e-13
 -0.000000	 -0.000000	diff=4.79507e-13
 -0.000000	 -0.000000	diff=9.1413e-13
  0.000000	  0.000000	diff=6.49666e-10
  0.000000	  0.000000	diff=2.57365e-11
 -0.000000	 -0.000000	diff=6.15397e-13
 -0.000000	 -0.000000	diff=1.35272e-12
  0.000000	  0.000000	diff=5.85448e-13
 -0.000000	 -0.000000	diff=3.30374e-13
 -0.000000	 -0.000000	diff=1.3182e-12
 -0.000000	 -0.000000	diff=5.95356e-13
 -0.000001	 -0.000001	diff=1.67821e-12
 -0.000001	 -0.000001	diff=2.95445e-09
  local_diff=3.95823e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.73563e-09
 -0.000000	 -0.000000	diff=3.30264e-11
 -0.000003	 -0.000003	diff=1.21769e-09
 -0.000005	 -0.000005	diff=3.20416e-09
  local_diff=6.19051e-09
# W_emb_tgt, [2 4]
 -0.000027	 -0.000027	diff=2.64387e-09
 -0.000001	 -0.000001	diff=1.23787e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000037	 -0.000037	diff=8.6769e-09
  0.000000	  0.000000	diff=6.04578e-10
 -0.000024	 -0.000024	diff=1.27233e-09
 -0.000000	 -0.000000	diff=7.29822e-10
  local_diff=1.51654e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.72623e-15
  0.000000	 -0.000000	diff=2.0995e-15
  0.000000	  0.000000	diff=1.56581e-15
  0.000000	 -0.000000	diff=1.94789e-15
  local_diff=7.33944e-15
# W_h, [2 4]
  0.000014	  0.000014	diff=1.64191e-13
 -0.000010	 -0.000010	diff=1.82098e-12
 -0.000020	 -0.000020	diff=8.50536e-13
  0.000014	  0.000014	diff=1.94071e-12
 -0.000015	 -0.000015	diff=5.23726e-12
 -0.000003	 -0.000003	diff=4.53978e-12
 -0.000069	 -0.000069	diff=4.91424e-10
  0.000023	  0.000023	diff=2.77838e-12
  local_diff=5.08756e-10
# W_soft, [4 2]
  0.000052	  0.000052	diff=6.21727e-13
 -0.000028	 -0.000028	diff=1.61122e-13
 -0.000026	 -0.000026	diff=6.56221e-13
  0.000003	  0.000003	diff=6.92557e-13
  0.000014	  0.000014	diff=6.11559e-16
 -0.000001	 -0.000001	diff=1.18726e-12
 -0.000009	 -0.000009	diff=1.40216e-12
 -0.000004	 -0.000004	diff=9.63901e-13
  local_diff=5.68557e-12
# Num params=180, abs_diff=2.78697e-08
Elapsed time is 2.171712 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 v_a=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.21914e-12
  0.000000	  0.000000	diff=2.03453e-12
 -0.000000	 -0.000000	diff=1.08414e-12
  0.000000	  0.000000	diff=3.52963e-13
 -0.000000	 -0.000000	diff=8.92648e-13
 -0.000000	 -0.000000	diff=1.62804e-12
  0.000003	  0.000003	diff=1.42265e-11
  0.000003	  0.000003	diff=3.31189e-11
  0.000000	  0.000000	diff=1.30119e-12
 -0.000000	 -0.000000	diff=1.39862e-12
  0.000000	  0.000000	diff=1.91037e-12
 -0.000000	 -0.000000	diff=1.55124e-12
  0.000000	  0.000000	diff=1.31835e-12
  0.000000	  0.000000	diff=7.75057e-13
 -0.000006	 -0.000006	diff=3.56686e-11
 -0.000011	 -0.000011	diff=1.35085e-10
  0.000000	  0.000000	diff=8.70774e-13
 -0.000000	 -0.000000	diff=1.18393e-12
  0.000000	  0.000000	diff=1.328e-12
 -0.000000	 -0.000000	diff=1.49884e-12
  0.000000	  0.000000	diff=1.0172e-12
  0.000000	  0.000000	diff=1.02992e-12
 -0.000000	 -0.000000	diff=1.34342e-10
 -0.000000	 -0.000000	diff=2.32447e-12
 -0.000000	 -0.000000	diff=9.45594e-13
  0.000000	  0.000000	diff=6.25907e-13
 -0.000000	 -0.000000	diff=1.45837e-12
  0.000000	  0.000000	diff=1.06635e-12
 -0.000000	 -0.000000	diff=6.8813e-13
 -0.000000	 -0.000000	diff=1.9757e-12
  0.000000	  0.000000	diff=7.78732e-14
  0.000000	  0.000000	diff=1.31043e-10
  local_diff=5.15042e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.02997e-12
  0.000000	  0.000000	diff=1.3527e-12
  0.000000	  0.000000	diff=2.13038e-14
  0.000000	  0.000000	diff=6.30099e-13
  0.000000	  0.000000	diff=4.03861e-13
 -0.000000	 -0.000000	diff=4.09256e-13
 -0.000007	 -0.000007	diff=1.64441e-12
  0.000001	  0.000001	diff=5.66841e-12
 -0.000000	 -0.000000	diff=8.32569e-13
 -0.000000	 -0.000000	diff=8.74844e-13
 -0.000000	 -0.000000	diff=1.86688e-12
 -0.000000	 -0.000000	diff=1.13211e-12
 -0.000000	 -0.000000	diff=1.36893e-12
  0.000000	  0.000000	diff=1.04505e-12
  0.000005	  0.000005	diff=1.95071e-12
 -0.000003	 -0.000003	diff=6.48931e-12
  0.000000	  0.000000	diff=2.21508e-13
  0.000000	  0.000000	diff=1.75907e-13
  0.000000	  0.000000	diff=1.37113e-12
  0.000000	  0.000000	diff=1.58948e-12
  0.000000	  0.000000	diff=8.79805e-13
 -0.000000	 -0.000000	diff=1.02887e-12
 -0.000000	 -0.000000	diff=1.06276e-10
  0.000000	  0.000000	diff=8.28464e-13
 -0.000000	 -0.000000	diff=1.76287e-12
 -0.000000	 -0.000000	diff=1.84826e-12
 -0.000000	 -0.000000	diff=1.50769e-12
 -0.000000	 -0.000000	diff=1.5925e-12
 -0.000000	 -0.000000	diff=1.4096e-12
  0.000000	  0.000000	diff=1.17717e-12
  0.000000	  0.000000	diff=1.20899e-12
 -0.000000	 -0.000000	diff=1.18013e-10
  local_diff=2.67612e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.84834e-12
 -0.000000	 -0.000000	diff=5.95989e-14
  0.000000	  0.000000	diff=1.06029e-12
 -0.000000	 -0.000000	diff=4.87089e-14
  0.000000	  0.000000	diff=1.44694e-12
 -0.000000	 -0.000000	diff=1.56916e-12
 -0.000007	 -0.000007	diff=1.20166e-10
  0.000032	  0.000032	diff=2.38629e-10
  0.000000	  0.000000	diff=1.16166e-12
  0.000000	  0.000000	diff=7.57252e-13
 -0.000000	 -0.000000	diff=1.87051e-12
 -0.000000	 -0.000000	diff=2.82517e-12
  0.000000	  0.000000	diff=1.5794e-12
  0.000000	  0.000000	diff=6.67025e-13
  0.000004	  0.000004	diff=3.86825e-11
 -0.000031	 -0.000031	diff=3.70928e-10
 -0.000000	 -0.000000	diff=1.00294e-12
  0.000000	  0.000000	diff=1.01068e-12
 -0.000000	 -0.000000	diff=1.11095e-12
 -0.000000	  0.000000	diff=8.91698e-13
 -0.000000	 -0.000000	diff=1.64908e-13
  0.000000	  0.000000	diff=8.73505e-13
  0.000000	  0.000000	diff=9.03275e-13
 -0.000000	 -0.000000	diff=5.01985e-13
  0.000000	  0.000000	diff=2.65617e-13
 -0.000000	 -0.000000	diff=1.04406e-12
  0.000000	  0.000000	diff=1.32717e-13
 -0.000000	 -0.000000	diff=6.49373e-13
  0.000000	  0.000000	diff=3.72845e-13
 -0.000000	 -0.000000	diff=5.43755e-13
 -0.000000	 -0.000000	diff=1.27143e-12
  0.000000	  0.000000	diff=1.24055e-12
 -0.000000	 -0.000000	diff=9.01832e-13
  0.000000	  0.000000	diff=9.75696e-13
 -0.000000	 -0.000000	diff=4.58081e-13
 -0.000000	 -0.000000	diff=1.57529e-12
 -0.000000	 -0.000000	diff=1.37072e-12
  0.000000	  0.000000	diff=1.64666e-12
  0.000000	  0.000000	diff=5.79812e-10
 -0.000001	 -0.000001	diff=2.40755e-11
 -0.000000	 -0.000000	diff=1.4908e-12
  0.000000	  0.000000	diff=1.37224e-12
  0.000000	  0.000000	diff=6.41895e-13
  0.000000	  0.000000	diff=9.31566e-13
 -0.000000	 -0.000000	diff=1.12611e-12
  0.000000	  0.000000	diff=1.0162e-12
 -0.000000	 -0.000000	diff=5.52999e-12
  0.000000	  0.000000	diff=7.78741e-10
  local_diff=2.19694e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.09763e-12
  0.000000	  0.000000	diff=1.48361e-12
  0.000000	  0.000000	diff=1.06353e-12
  0.000000	  0.000000	diff=6.74564e-13
 -0.000000	 -0.000000	diff=1.04716e-12
  0.000000	  0.000000	diff=9.63086e-13
 -0.000014	 -0.000014	diff=5.07338e-12
  0.000019	  0.000019	diff=2.40577e-11
 -0.000000	 -0.000000	diff=9.41081e-13
  0.000000	  0.000000	diff=1.41527e-12
 -0.000000	 -0.000000	diff=1.47241e-12
  0.000000	  0.000000	diff=1.35831e-12
 -0.000000	 -0.000000	diff=2.44564e-12
  0.000000	  0.000000	diff=2.04321e-12
 -0.000018	 -0.000018	diff=4.33427e-11
  0.000021	  0.000021	diff=7.38484e-11
 -0.000000	 -0.000000	diff=1.26653e-12
 -0.000000	 -0.000000	diff=2.31901e-13
  0.000000	  0.000000	diff=1.22254e-12
  0.000000	  0.000000	diff=2.07891e-12
  0.000000	  0.000000	diff=1.21242e-12
  0.000000	  0.000000	diff=1.4157e-12
 -0.000000	 -0.000000	diff=8.11944e-10
  0.000000	  0.000000	diff=2.2411e-11
  0.000000	  0.000000	diff=1.12703e-12
 -0.000000	 -0.000000	diff=7.37007e-13
 -0.000000	 -0.000000	diff=1.16271e-12
 -0.000000	 -0.000000	diff=1.04809e-12
  0.000000	  0.000000	diff=4.66619e-13
 -0.000000	 -0.000000	diff=1.21589e-12
  0.000001	  0.000001	diff=4.5497e-12
 -0.000001	 -0.000001	diff=1.90854e-09
  local_diff=2.92296e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.27732e-09
 -0.000002	 -0.000002	diff=1.16182e-09
 -0.000002	 -0.000002	diff=9.71432e-10
 -0.000005	 -0.000005	diff=1.09873e-09
  local_diff=4.5093e-09
# W_emb_tgt, [2 4]
 -0.000016	 -0.000016	diff=4.41251e-09
  0.000002	  0.000002	diff=1.08315e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000014	 -0.000014	diff=5.36542e-09
  0.000002	  0.000002	diff=1.10349e-09
 -0.000005	 -0.000005	diff=2.92407e-09
  0.000002	  0.000002	diff=1.17214e-09
  local_diff=1.60608e-08
# W_a, [2 2]
  0.000000	 -0.000000	diff=4.40436e-23
  0.000000	 -0.000000	diff=7.2354e-23
  0.000000	 -0.000000	diff=1.65894e-22
  0.000000	 -0.000000	diff=2.95469e-22
  local_diff=5.7776e-22
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.25454e-12
  0.000000	  0.000000	diff=1.82986e-12
  local_diff=3.08441e-12
# W_h, [2 4]
 -0.000014	 -0.000014	diff=7.44315e-13
  0.000010	  0.000010	diff=1.54572e-12
  0.000018	  0.000018	diff=6.18696e-13
 -0.000013	 -0.000013	diff=1.6273e-13
  0.000005	  0.000005	diff=4.70519e-12
  0.000000	  0.000000	diff=8.86246e-14
  0.000032	  0.000032	diff=1.58294e-10
 -0.000018	 -0.000018	diff=4.72752e-11
  local_diff=2.13434e-10
# W_soft, [4 2]
 -0.000019	 -0.000019	diff=4.15344e-13
 -0.000001	 -0.000001	diff=7.38931e-13
  0.000015	  0.000015	diff=5.71911e-13
  0.000005	  0.000005	diff=1.11599e-12
  0.000025	  0.000025	diff=1.1856e-12
 -0.000019	 -0.000019	diff=3.03095e-14
 -0.000007	 -0.000007	diff=5.94445e-13
  0.000001	  0.000001	diff=1.09243e-12
  local_diff=5.74496e-12
# Num params=182, abs_diff=2.66949e-08
Elapsed time is 2.503138 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 290, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=16 W_emb_tgt=16 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 290
  src input 1: z x xy xz
  src mask: 1  1  1  1
  tgt input 1: <s> ac ac </s> </s>
  tgt output 1: ac ac </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.32499e-13
  0.000000	  0.000000	diff=5.39279e-14
 -0.000000	 -0.000000	diff=7.46625e-13
  0.000000	  0.000000	diff=7.54759e-13
  0.000000	  0.000000	diff=2.24049e-13
  0.000000	  0.000000	diff=4.43221e-13
  0.000000	  0.000000	diff=1.32842e-12
  0.000000	  0.000000	diff=2.17012e-14
 -0.000000	 -0.000000	diff=1.19713e-13
  0.000000	  0.000000	diff=1.07695e-12
 -0.000000	 -0.000000	diff=7.67846e-13
  0.000000	  0.000000	diff=2.39805e-13
 -0.000000	 -0.000000	diff=9.17058e-13
 -0.000000	 -0.000000	diff=1.26959e-12
  0.000000	  0.000000	diff=4.80827e-12
  0.000000	  0.000000	diff=3.41893e-12
 -0.000000	  0.000000	diff=1.53709e-12
  0.000000	  0.000000	diff=4.85935e-13
  0.000000	  0.000000	diff=3.77055e-13
 -0.000000	 -0.000000	diff=7.99601e-13
  0.000000	 -0.000000	diff=4.44971e-13
  0.000000	  0.000000	diff=5.94451e-13
 -0.000000	 -0.000000	diff=7.00703e-12
 -0.000000	 -0.000000	diff=3.6842e-15
  0.000000	 -0.000000	diff=4.37964e-13
 -0.000000	 -0.000000	diff=8.38039e-13
 -0.000000	 -0.000000	diff=3.90109e-13
  0.000000	  0.000000	diff=8.89207e-13
  0.000000	  0.000000	diff=8.02723e-13
 -0.000000	 -0.000000	diff=2.82533e-13
  0.000000	  0.000000	diff=1.20432e-13
  0.000000	  0.000000	diff=3.96651e-11
  local_diff=7.09993e-11
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.3752e-13
  0.000000	  0.000000	diff=5.2155e-13
 -0.000000	 -0.000000	diff=1.58142e-12
  0.000000	  0.000000	diff=1.61156e-13
  0.000000	 -0.000000	diff=1.391e-13
  0.000000	  0.000000	diff=2.35802e-13
  0.000001	  0.000001	diff=4.45624e-13
  0.000000	  0.000000	diff=1.03501e-12
  0.000000	  0.000000	diff=1.48897e-13
 -0.000000	 -0.000000	diff=1.69014e-13
  0.000000	  0.000000	diff=1.69949e-12
 -0.000000	 -0.000000	diff=1.70596e-12
  0.000000	  0.000000	diff=1.36705e-12
 -0.000000	 -0.000000	diff=9.93055e-14
 -0.000001	 -0.000001	diff=4.9486e-13
 -0.000000	 -0.000000	diff=7.11677e-13
  0.000000	 -0.000000	diff=6.07696e-13
  0.000000	  0.000000	diff=6.18426e-13
  0.000000	 -0.000000	diff=7.97483e-13
  0.000000	  0.000000	diff=7.52709e-13
  0.000000	  0.000000	diff=6.07055e-14
  0.000000	 -0.000000	diff=7.97874e-14
  0.000000	  0.000000	diff=5.47206e-11
  0.000000	  0.000000	diff=2.12432e-13
  0.000000	  0.000000	diff=7.37396e-13
  0.000000	 -0.000000	diff=7.47631e-13
  0.000000	  0.000000	diff=9.74078e-13
  0.000000	 -0.000000	diff=9.13528e-13
  0.000000	 -0.000000	diff=7.40321e-14
  0.000000	  0.000000	diff=9.67766e-14
 -0.000000	 -0.000000	diff=1.14023e-13
 -0.000000	 -0.000000	diff=3.86666e-11
  local_diff=1.11227e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=2.61242e-13
 -0.000000	 -0.000000	diff=3.0392e-13
 -0.000000	 -0.000000	diff=4.31816e-13
 -0.000000	 -0.000000	diff=2.09063e-13
 -0.000000	 -0.000000	diff=1.87236e-13
 -0.000000	 -0.000000	diff=1.01396e-13
  0.000001	  0.000001	diff=4.12354e-12
  0.000001	  0.000001	diff=1.72822e-12
 -0.000000	 -0.000000	diff=9.14838e-13
 -0.000000	 -0.000000	diff=1.07405e-14
 -0.000000	 -0.000000	diff=1.73054e-13
 -0.000000	 -0.000000	diff=7.8453e-13
 -0.000000	 -0.000000	diff=2.16706e-13
 -0.000000	 -0.000000	diff=6.57037e-13
  0.000000	  0.000000	diff=2.07961e-12
  0.000001	  0.000001	diff=9.36455e-13
 -0.000000	 -0.000000	diff=1.37111e-12
  0.000000	  0.000000	diff=4.27729e-14
  0.000000	 -0.000000	diff=3.06007e-14
  0.000000	 -0.000000	diff=3.02266e-14
  0.000000	 -0.000000	diff=3.43695e-14
  0.000000	  0.000000	diff=5.22863e-14
  0.000000	  0.000000	diff=9.40271e-13
  0.000000	  0.000000	diff=1.31409e-13
 -0.000000	  0.000000	diff=1.43607e-12
  0.000000	  0.000000	diff=1.39484e-13
 -0.000000	 -0.000000	diff=1.34855e-12
  0.000000	 -0.000000	diff=8.59417e-14
 -0.000000	  0.000000	diff=1.44388e-12
  0.000000	  0.000000	diff=1.4804e-13
  0.000000	  0.000000	diff=6.42819e-13
  0.000000	  0.000000	diff=1.78918e-12
  0.000000	  0.000000	diff=1.30571e-12
  0.000000	  0.000000	diff=1.23528e-12
 -0.000000	 -0.000000	diff=1.38004e-14
 -0.000000	 -0.000000	diff=1.27979e-13
  0.000000	  0.000000	diff=2.6961e-13
  0.000000	  0.000000	diff=5.54607e-13
  0.000000	  0.000000	diff=7.31934e-11
  0.000000	  0.000000	diff=6.00424e-12
  0.000000	  0.000000	diff=7.56204e-13
  0.000000	  0.000000	diff=1.06375e-13
 -0.000000	 -0.000000	diff=1.18997e-12
 -0.000000	 -0.000000	diff=8.27618e-14
  0.000000	  0.000000	diff=8.46587e-13
  0.000000	  0.000000	diff=8.5836e-13
  0.000000	  0.000000	diff=9.02728e-13
 -0.000000	 -0.000000	diff=3.24039e-11
  local_diff=1.42638e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.82232e-12
  0.000000	  0.000000	diff=4.96633e-13
  0.000000	  0.000000	diff=7.94276e-13
  0.000000	  0.000000	diff=1.23026e-12
  0.000000	  0.000000	diff=1.48351e-12
  0.000000	  0.000000	diff=4.75353e-13
  0.000003	  0.000003	diff=4.74533e-12
  0.000001	  0.000001	diff=4.49827e-12
  0.000000	  0.000000	diff=1.88418e-12
  0.000000	  0.000000	diff=4.44377e-13
  0.000000	  0.000000	diff=8.66165e-13
  0.000000	  0.000000	diff=2.67229e-13
  0.000000	  0.000000	diff=1.57945e-12
  0.000000	  0.000000	diff=7.73921e-13
  0.000002	  0.000002	diff=1.16224e-11
  0.000001	  0.000001	diff=2.8393e-12
  0.000000	 -0.000000	diff=1.29048e-13
  0.000000	 -0.000000	diff=5.21266e-13
  0.000000	 -0.000000	diff=4.16187e-13
  0.000000	  0.000000	diff=1.72516e-12
 -0.000000	 -0.000000	diff=5.12717e-13
  0.000000	 -0.000000	diff=8.00147e-13
  0.000000	  0.000000	diff=1.1894e-10
  0.000000	  0.000000	diff=3.51928e-12
  0.000000	 -0.000000	diff=4.30401e-13
  0.000000	 -0.000000	diff=9.92205e-13
  0.000000	  0.000000	diff=6.95969e-13
  0.000000	 -0.000000	diff=4.11668e-13
  0.000000	  0.000000	diff=3.47716e-13
 -0.000000	 -0.000000	diff=4.43467e-14
 -0.000000	 -0.000000	diff=7.52873e-13
 -0.000000	 -0.000000	diff=4.38057e-11
  local_diff=2.09868e-10
# W_emb_src, [2 8]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.88525e-10
  0.000000	  0.000000	diff=2.85197e-10
  0.000000	  0.000000	diff=1.57342e-11
 -0.000000	 -0.000000	diff=1.07398e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.96855e-10
# W_emb_tgt, [2 8]
 -0.000011	 -0.000011	diff=1.86034e-09
 -0.000002	 -0.000002	diff=1.51877e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=1.15608e-09
 -0.000001	 -0.000001	diff=3.75892e-10
 -0.000003	 -0.000003	diff=6.73786e-10
 -0.000001	 -0.000001	diff=5.217e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=6.10657e-09
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=4.74485e-13
 -0.000000	 -0.000000	diff=7.8765e-13
 -0.000000	 -0.000000	diff=6.36544e-13
 -0.000000	 -0.000000	diff=3.17987e-13
 -0.000000	 -0.000000	diff=1.67074e-13
 -0.000000	 -0.000000	diff=7.08888e-13
 -0.000000	 -0.000000	diff=1.61449e-12
  0.000000	  0.000000	diff=1.8538e-12
  0.000000	  0.000000	diff=1.83399e-13
 -0.000000	 -0.000000	diff=2.35296e-12
  0.000000	  0.000000	diff=6.75371e-13
  0.000000	  0.000000	diff=1.29425e-13
  0.000000	  0.000000	diff=1.57871e-13
  0.000000	  0.000000	diff=1.02422e-12
  0.000000	  0.000000	diff=2.5549e-13
  0.000000	  0.000000	diff=1.5628e-12
 -0.000000	 -0.000000	diff=7.1826e-13
  0.000000	  0.000000	diff=1.14466e-12
  0.000000	 -0.000000	diff=1.12071e-12
 -0.000000	 -0.000000	diff=6.98492e-13
 -0.000000	 -0.000000	diff=1.02712e-12
  0.000000	  0.000000	diff=1.20651e-12
 -0.000000	 -0.000000	diff=2.86046e-12
  0.000000	  0.000000	diff=2.87968e-13
  0.000000	  0.000000	diff=1.21597e-12
 -0.000000	 -0.000000	diff=3.55286e-14
  0.000000	  0.000000	diff=6.18789e-13
  0.000000	  0.000000	diff=9.53589e-14
  0.000000	  0.000000	diff=6.24107e-13
 -0.000000	 -0.000000	diff=1.61763e-12
  0.000000	  0.000000	diff=1.91943e-12
 -0.000000	 -0.000000	diff=3.46196e-12
  local_diff=3.15554e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.16487e-13
 -0.000000	 -0.000000	diff=7.62705e-12
 -0.000000	 -0.000000	diff=5.61981e-12
 -0.000000	 -0.000000	diff=3.75901e-12
 -0.000000	 -0.000000	diff=9.13721e-12
 -0.000000	 -0.000000	diff=1.37201e-11
  0.000000	  0.000000	diff=5.91651e-12
  0.000000	  0.000000	diff=1.47411e-11
  local_diff=6.12372e-11
# W_tgt_char{1}, [8 4]
  0.000000	  0.000000	diff=1.21519e-12
 -0.000000	 -0.000000	diff=2.4826e-13
  0.000000	  0.000000	diff=6.51651e-14
  0.000000	  0.000000	diff=5.44349e-13
  0.000000	  0.000000	diff=1.36686e-13
 -0.000000	 -0.000000	diff=1.42718e-12
  0.000000	  0.000000	diff=9.19308e-13
  0.000000	  0.000000	diff=1.28309e-13
 -0.000000	 -0.000000	diff=1.72132e-13
 -0.000000	 -0.000000	diff=9.62488e-13
  0.000000	  0.000000	diff=4.69037e-13
  0.000000	  0.000000	diff=3.15799e-13
  0.000000	  0.000000	diff=4.704e-13
  0.000000	 -0.000000	diff=1.97674e-12
  0.000000	  0.000000	diff=1.20047e-12
  0.000000	  0.000000	diff=8.59797e-14
 -0.000000	 -0.000000	diff=5.65328e-13
  0.000000	 -0.000000	diff=2.05798e-13
  0.000000	  0.000000	diff=3.49553e-14
  0.000000	  0.000000	diff=9.74021e-14
  0.000000	  0.000000	diff=2.09839e-13
  0.000000	 -0.000000	diff=1.42894e-12
 -0.000000	 -0.000000	diff=8.15362e-12
 -0.000000	 -0.000000	diff=1.49028e-13
 -0.000000	 -0.000000	diff=5.21256e-13
  0.000000	 -0.000000	diff=3.19327e-13
  0.000000	  0.000000	diff=1.42458e-12
  0.000000	  0.000000	diff=1.33027e-12
  0.000000	  0.000000	diff=4.15204e-13
  0.000000	 -0.000000	diff=1.05924e-13
 -0.000000	 -0.000000	diff=4.17866e-14
 -0.000000	 -0.000000	diff=9.05677e-13
  local_diff=2.62464e-11
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.42411e-11
 -0.000000	 -0.000000	diff=5.57348e-11
  0.000000	  0.000000	diff=7.12667e-12
 -0.000000	 -0.000000	diff=2.97974e-12
  0.000000	  0.000000	diff=6.99692e-12
 -0.000000	 -0.000000	diff=5.88879e-12
  0.000000	  0.000000	diff=1.42861e-11
 -0.000000	 -0.000000	diff=6.93432e-12
  local_diff=1.34188e-10
# W_pos, [2 2]
 -0.000000	 -0.000000	diff=1.41173e-12
  0.000000	 -0.000000	diff=4.1583e-15
 -0.000000	 -0.000000	diff=1.38511e-12
  0.000000	 -0.000000	diff=1.59832e-14
  local_diff=2.81698e-12
# v_pos, [1 2]
  0.000000	 -0.000000	diff=6.79767e-15
  0.000000	  0.000000	diff=3.41687e-14
  local_diff=4.09664e-14
# W_h, [2 4]
 -0.000001	 -0.000001	diff=1.17128e-12
 -0.000000	 -0.000000	diff=2.7597e-13
  0.000001	  0.000001	diff=9.40375e-13
  0.000000	  0.000000	diff=1.39463e-12
  0.000000	  0.000000	diff=2.20603e-12
  0.000000	  0.000000	diff=2.56506e-12
  0.000002	  0.000002	diff=1.18183e-12
  0.000002	  0.000002	diff=3.39945e-12
  local_diff=1.31346e-11
# W_soft, [8 2]
 -0.000002	 -0.000002	diff=1.70223e-13
  0.000007	  0.000007	diff=1.24175e-12
 -0.000002	 -0.000002	diff=2.01004e-12
  0.000001	  0.000001	diff=1.56264e-13
  0.000001	  0.000001	diff=2.06783e-13
  0.000001	  0.000001	diff=1.22336e-13
 -0.000002	 -0.000002	diff=3.77263e-13
 -0.000003	 -0.000003	diff=6.87957e-13
 -0.000003	 -0.000003	diff=5.21689e-13
  0.000011	  0.000011	diff=7.81887e-13
 -0.000002	 -0.000002	diff=9.1299e-13
  0.000000	  0.000000	diff=7.50907e-14
  0.000003	  0.000003	diff=2.14748e-13
  0.000001	  0.000001	diff=6.16305e-13
 -0.000005	 -0.000005	diff=8.84263e-13
 -0.000005	 -0.000005	diff=7.81093e-13
  local_diff=9.76068e-12
# Num params=290, abs_diff=7.51714e-09
Elapsed time is 5.964808 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 418, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=16 W_emb_tgt=16 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 418
  src input 1: x xy xy xy
  src mask: 1  1  1  1
  tgt input 1: <s> b c ab a
  tgt output 1: b c ab a </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=4.81621e-13
  0.000000	  0.000000	diff=6.79181e-13
  0.000000	  0.000000	diff=1.08532e-12
  0.000000	  0.000000	diff=1.05344e-12
 -0.000000	 -0.000000	diff=7.99104e-13
 -0.000000	 -0.000000	diff=1.86788e-12
  0.000001	  0.000001	diff=5.03506e-12
  0.000002	  0.000002	diff=1.95851e-11
  0.000000	  0.000000	diff=1.16864e-12
 -0.000000	 -0.000000	diff=2.92581e-12
 -0.000000	 -0.000000	diff=9.03406e-13
 -0.000000	 -0.000000	diff=2.51908e-12
  0.000000	  0.000000	diff=2.98562e-12
  0.000000	  0.000000	diff=1.7784e-13
 -0.000003	 -0.000003	diff=5.98042e-12
 -0.000002	 -0.000002	diff=2.82818e-11
 -0.000000	 -0.000000	diff=2.90129e-14
 -0.000000	 -0.000000	diff=1.5515e-12
 -0.000000	 -0.000000	diff=1.24526e-12
  0.000000	  0.000000	diff=1.53785e-12
 -0.000000	 -0.000000	diff=1.19575e-13
 -0.000000	 -0.000000	diff=2.20764e-13
 -0.000000	 -0.000000	diff=4.38045e-12
  0.000000	  0.000000	diff=1.33838e-13
  0.000000	  0.000000	diff=2.55471e-12
  0.000000	  0.000000	diff=2.48279e-12
  0.000000	  0.000000	diff=1.30088e-12
 -0.000000	 -0.000000	diff=1.58574e-12
  0.000000	  0.000000	diff=1.31035e-12
  0.000000	  0.000000	diff=2.15704e-12
  0.000000	  0.000000	diff=2.27932e-12
 -0.000000	 -0.000000	diff=6.05174e-11
  local_diff=1.58936e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.57587e-12
  0.000000	  0.000000	diff=1.83352e-12
  0.000000	  0.000000	diff=1.13322e-12
 -0.000000	 -0.000000	diff=1.6428e-12
  0.000000	  0.000000	diff=8.10266e-13
 -0.000000	 -0.000000	diff=6.2834e-13
  0.000001	  0.000001	diff=1.04592e-12
  0.000002	  0.000002	diff=1.57851e-12
  0.000000	  0.000000	diff=2.10711e-12
 -0.000000	 -0.000000	diff=1.12992e-12
 -0.000000	 -0.000000	diff=1.59632e-12
  0.000000	  0.000000	diff=6.27935e-13
 -0.000000	 -0.000000	diff=1.06259e-12
  0.000000	  0.000000	diff=2.69758e-13
 -0.000001	 -0.000001	diff=1.93347e-12
 -0.000002	 -0.000002	diff=1.3472e-12
  0.000000	  0.000000	diff=2.47063e-13
 -0.000000	 -0.000000	diff=1.08152e-12
  0.000000	  0.000000	diff=8.88637e-13
 -0.000000	 -0.000000	diff=9.79993e-13
  0.000000	  0.000000	diff=4.55383e-13
 -0.000000	 -0.000000	diff=8.75941e-13
  0.000000	  0.000000	diff=1.57284e-11
  0.000000	  0.000000	diff=1.24016e-14
 -0.000000	 -0.000000	diff=1.13203e-12
  0.000000	  0.000000	diff=2.04798e-12
 -0.000000	 -0.000000	diff=3.05846e-14
  0.000000	  0.000000	diff=2.25862e-12
 -0.000000	 -0.000000	diff=8.80872e-13
  0.000000	  0.000000	diff=2.59025e-12
 -0.000000	 -0.000000	diff=1.83873e-12
 -0.000000	 -0.000000	diff=7.83033e-11
  local_diff=1.29674e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=2.82324e-12
 -0.000000	 -0.000000	diff=4.81575e-13
 -0.000000	 -0.000000	diff=1.66327e-12
 -0.000000	 -0.000000	diff=1.54884e-12
 -0.000000	 -0.000000	diff=3.07121e-14
 -0.000000	 -0.000000	diff=1.61183e-12
  0.000000	  0.000000	diff=3.1094e-11
  0.000002	  0.000002	diff=3.88157e-11
 -0.000000	 -0.000000	diff=2.3847e-13
 -0.000000	 -0.000000	diff=3.63132e-13
 -0.000000	 -0.000000	diff=7.07228e-16
 -0.000000	 -0.000000	diff=1.80436e-12
 -0.000000	 -0.000000	diff=6.80539e-13
 -0.000000	 -0.000000	diff=1.51553e-12
  0.000001	  0.000001	diff=2.81312e-11
  0.000002	  0.000002	diff=3.91202e-11
 -0.000000	 -0.000000	diff=1.29253e-12
 -0.000000	 -0.000000	diff=1.10349e-12
 -0.000000	 -0.000000	diff=1.35708e-12
 -0.000000	 -0.000000	diff=1.32552e-12
 -0.000000	 -0.000000	diff=1.29872e-12
 -0.000000	 -0.000000	diff=1.13973e-12
  0.000000	  0.000000	diff=1.30308e-13
  0.000000	  0.000000	diff=6.75768e-13
 -0.000000	 -0.000000	diff=7.64549e-13
 -0.000000	 -0.000000	diff=1.14828e-12
 -0.000000	 -0.000000	diff=1.02807e-12
 -0.000000	 -0.000000	diff=7.15919e-13
 -0.000000	 -0.000000	diff=2.10507e-12
 -0.000000	 -0.000000	diff=1.0798e-12
  0.000000	  0.000000	diff=1.2746e-14
  0.000000	  0.000000	diff=1.10586e-12
  0.000000	  0.000000	diff=2.10741e-16
  0.000000	  0.000000	diff=1.3708e-12
  0.000000	  0.000000	diff=1.84284e-13
 -0.000000	 -0.000000	diff=1.4914e-13
  0.000000	  0.000000	diff=1.09424e-12
  0.000000	  0.000000	diff=1.17872e-12
 -0.000000	 -0.000000	diff=5.24562e-10
 -0.000000	 -0.000000	diff=4.24962e-11
  0.000000	  0.000000	diff=1.77302e-12
  0.000000	  0.000000	diff=1.01129e-12
 -0.000000	 -0.000000	diff=1.24388e-13
  0.000000	  0.000000	diff=3.93398e-13
  0.000000	  0.000000	diff=2.80992e-13
  0.000000	  0.000000	diff=2.58955e-12
  0.000000	  0.000000	diff=2.21273e-12
  0.000000	  0.000000	diff=2.92302e-11
  local_diff=7.74858e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=8.69149e-13
  0.000000	  0.000000	diff=1.72299e-12
  0.000000	  0.000000	diff=8.19213e-13
  0.000000	  0.000000	diff=7.03816e-13
  0.000000	  0.000000	diff=1.52651e-13
  0.000000	  0.000000	diff=1.88005e-12
  0.000003	  0.000003	diff=2.40662e-11
  0.000005	  0.000005	diff=5.19305e-11
  0.000000	  0.000000	diff=1.53526e-12
  0.000000	  0.000000	diff=7.55683e-14
  0.000000	  0.000000	diff=2.37646e-14
  0.000000	  0.000000	diff=1.3137e-12
  0.000000	  0.000000	diff=9.39944e-13
  0.000000	  0.000000	diff=8.9193e-13
 -0.000001	 -0.000001	diff=2.1039e-11
 -0.000000	 -0.000000	diff=4.21959e-11
  0.000000	 -0.000000	diff=9.88653e-13
 -0.000000	 -0.000000	diff=5.12974e-13
 -0.000000	 -0.000000	diff=8.84185e-13
  0.000000	  0.000000	diff=8.83564e-13
 -0.000000	 -0.000000	diff=8.92039e-14
  0.000000	  0.000000	diff=4.48688e-13
 -0.000000	 -0.000000	diff=2.62635e-10
 -0.000000	 -0.000000	diff=2.74943e-11
 -0.000000	 -0.000000	diff=7.38929e-13
 -0.000000	 -0.000000	diff=1.2138e-12
  0.000000	  0.000000	diff=6.37148e-13
 -0.000000	 -0.000000	diff=1.12737e-12
  0.000000	  0.000000	diff=1.99529e-12
 -0.000000	 -0.000000	diff=1.17568e-12
 -0.000000	 -0.000000	diff=4.03472e-12
 -0.000000	 -0.000000	diff=6.04971e-10
  local_diff=1.05999e-09
# W_emb_src, [2 8]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=4.88874e-10
  0.000002	  0.000002	diff=1.61627e-09
 -0.000001	 -0.000001	diff=2.67784e-10
 -0.000001	 -0.000001	diff=5.26569e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=2.8995e-09
# W_emb_tgt, [2 8]
  0.000009	  0.000009	diff=4.99922e-10
  0.000001	  0.000001	diff=6.4293e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000013	 -0.000013	diff=8.95608e-10
 -0.000001	 -0.000001	diff=7.68794e-10
 -0.000001	 -0.000001	diff=9.56064e-10
 -0.000000	 -0.000000	diff=1.88308e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=3.95163e-09
# W_src_char{1}, [8 4]
  0.000000	  0.000000	diff=1.4351e-14
 -0.000000	 -0.000000	diff=1.37138e-12
  0.000000	  0.000000	diff=1.79715e-15
  0.000000	 -0.000000	diff=1.78305e-14
  0.000000	  0.000000	diff=1.13087e-14
 -0.000000	 -0.000000	diff=1.37229e-12
  0.000000	  0.000000	diff=9.39487e-13
  0.000000	  0.000000	diff=1.17233e-12
  0.000000	  0.000000	diff=1.97629e-14
 -0.000000	 -0.000000	diff=1.41134e-12
  0.000000	  0.000000	diff=1.85619e-15
  0.000000	 -0.000000	diff=1.23072e-14
  0.000000	  0.000000	diff=1.43042e-14
 -0.000000	 -0.000000	diff=1.40145e-12
  0.000000	  0.000000	diff=1.64386e-12
  0.000000	  0.000000	diff=6.61442e-14
  0.000000	  0.000000	diff=5.08937e-17
  0.000000	 -0.000000	diff=2.33942e-16
  0.000000	  0.000000	diff=7.3682e-17
  0.000000	 -0.000000	diff=3.41717e-16
  0.000000	  0.000000	diff=9.32464e-17
  0.000000	 -0.000000	diff=5.22421e-16
 -0.000000	  0.000000	diff=1.4564e-12
 -0.000000	  0.000000	diff=1.49485e-12
  0.000000	 -0.000000	diff=3.5376e-16
  0.000000	  0.000000	diff=9.3886e-16
  0.000000	 -0.000000	diff=2.23527e-16
  0.000000	  0.000000	diff=3.75141e-16
  0.000000	 -0.000000	diff=5.10802e-16
  0.000000	  0.000000	diff=1.20917e-15
  0.000000	 -0.000000	diff=1.54362e-13
  0.000000	 -0.000000	diff=2.3184e-13
  local_diff=1.28142e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=1.16891e-16
  0.000000	 -0.000000	diff=7.60064e-16
  0.000000	 -0.000000	diff=8.03285e-17
  0.000000	 -0.000000	diff=2.44988e-16
  0.000000	 -0.000000	diff=1.32228e-16
  0.000000	 -0.000000	diff=7.90032e-16
  0.000000	  0.000000	diff=1.99164e-13
  0.000000	  0.000000	diff=7.88397e-13
  0.000000	  0.000000	diff=7.39609e-17
  0.000000	  0.000000	diff=9.73613e-16
  0.000000	  0.000000	diff=9.48328e-17
  0.000000	  0.000000	diff=3.68266e-16
  0.000000	  0.000000	diff=1.52264e-16
  0.000000	  0.000000	diff=1.19384e-15
  0.000000	  0.000000	diff=1.07424e-13
 -0.000000	 -0.000000	diff=1.1059e-12
  0.000000	 -0.000000	diff=3.39912e-21
  0.000000	 -0.000000	diff=1.10227e-19
  0.000000	  0.000000	diff=3.88021e-20
  0.000000	  0.000000	diff=5.00928e-20
  0.000000	  0.000000	diff=1.96189e-20
  0.000000	 -0.000000	diff=7.63401e-20
  0.000000	 -0.000000	diff=5.0786e-14
 -0.000000	  0.000000	diff=1.42952e-12
  0.000000	  0.000000	diff=1.03774e-19
  0.000000	  0.000000	diff=2.64724e-18
  0.000000	 -0.000000	diff=2.23305e-19
  0.000000	  0.000000	diff=3.94676e-20
  0.000000	  0.000000	diff=2.00814e-20
  0.000000	  0.000000	diff=2.75344e-18
 -0.000000	  0.000000	diff=1.83845e-12
  0.000000	 -0.000000	diff=1.47582e-13
  local_diff=5.67221e-12
# W_src_char{3}, [8 4]
  0.000000	  0.000000	diff=7.71793e-20
  0.000000	 -0.000000	diff=3.9155e-19
  0.000000	 -0.000000	diff=3.5935e-21
  0.000000	 -0.000000	diff=1.77772e-20
  0.000000	  0.000000	diff=1.17646e-19
  0.000000	 -0.000000	diff=5.59455e-19
 -0.000000	 -0.000000	diff=1.00877e-12
  0.000000	  0.000000	diff=2.72808e-13
  0.000000	 -0.000000	diff=1.67288e-19
  0.000000	  0.000000	diff=6.35313e-18
  0.000000	 -0.000000	diff=4.83063e-19
  0.000000	  0.000000	diff=1.98556e-18
  0.000000	 -0.000000	diff=8.06065e-19
  0.000000	  0.000000	diff=8.82368e-18
  0.000000	  0.000000	diff=1.00037e-12
 -0.000000	 -0.000000	diff=1.17447e-12
  0.000000	 -0.000000	diff=6.00394e-21
  0.000000	  0.000000	diff=2.12139e-20
  0.000000	  0.000000	diff=8.69079e-22
  0.000000	 -0.000000	diff=2.69837e-21
  0.000000	 -0.000000	diff=6.1052e-21
  0.000000	  0.000000	diff=2.17938e-20
 -0.000000	  0.000000	diff=1.50192e-12
  0.000000	 -0.000000	diff=7.08031e-14
  0.000000	 -0.000000	diff=2.96074e-20
  0.000000	  0.000000	diff=7.27342e-20
  0.000000	  0.000000	diff=5.41147e-21
  0.000000	 -0.000000	diff=1.72188e-20
  0.000000	 -0.000000	diff=2.82985e-20
  0.000000	  0.000000	diff=6.86556e-20
  0.000000	  0.000000	diff=3.90218e-13
 -0.000000	 -0.000000	diff=1.13971e-12
  local_diff=6.55909e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.00808e-12
 -0.000000	 -0.000000	diff=1.70301e-12
  0.000000	  0.000000	diff=1.97323e-14
  0.000000	  0.000000	diff=3.13817e-12
 -0.000000	 -0.000000	diff=7.81068e-13
 -0.000000	 -0.000000	diff=1.38209e-12
 -0.000000	 -0.000000	diff=2.45398e-12
 -0.000000	 -0.000000	diff=4.88522e-13
  local_diff=1.09747e-11
# W_tgt_char{1}, [8 4]
 -0.000000	  0.000000	diff=1.69971e-12
  0.000000	 -0.000000	diff=2.55853e-13
  0.000000	  0.000000	diff=1.26451e-14
 -0.000000	 -0.000000	diff=1.41384e-12
  0.000000	  0.000000	diff=2.03655e-13
  0.000000	 -0.000000	diff=1.78871e-13
  0.000000	  0.000000	diff=1.82741e-12
 -0.000000	 -0.000000	diff=1.04708e-12
  0.000000	 -0.000000	diff=9.6146e-14
 -0.000000	  0.000000	diff=1.43511e-12
 -0.000000	 -0.000000	diff=1.34267e-12
  0.000000	  0.000000	diff=6.65465e-14
  0.000000	 -0.000000	diff=1.51926e-13
 -0.000000	  0.000000	diff=1.51487e-12
 -0.000000	 -0.000000	diff=3.67189e-13
  0.000000	  0.000000	diff=2.1341e-12
  0.000000	 -0.000000	diff=1.6156e-15
  0.000000	  0.000000	diff=2.27408e-15
  0.000000	 -0.000000	diff=1.5359e-15
  0.000000	  0.000000	diff=1.22312e-15
  0.000000	 -0.000000	diff=3.2656e-15
  0.000000	  0.000000	diff=3.60422e-15
 -0.000000	 -0.000000	diff=2.91e-13
  0.000000	  0.000000	diff=2.34789e-12
  0.000000	 -0.000000	diff=6.07454e-16
  0.000000	  0.000000	diff=8.93358e-16
  0.000000	 -0.000000	diff=5.91543e-16
  0.000000	  0.000000	diff=3.45624e-16
  0.000000	 -0.000000	diff=1.25309e-15
  0.000000	  0.000000	diff=1.30329e-15
 -0.000000	 -0.000000	diff=1.15018e-12
  0.000000	  0.000000	diff=5.56876e-13
  local_diff=1.81121e-11
# W_tgt_char{2}, [8 4]
  0.000000	  0.000000	diff=1.10975e-15
  0.000000	 -0.000000	diff=1.73258e-15
  0.000000	  0.000000	diff=1.45995e-16
  0.000000	 -0.000000	diff=4.28174e-16
  0.000000	  0.000000	diff=1.07996e-15
  0.000000	 -0.000000	diff=1.75785e-15
 -0.000000	 -0.000000	diff=2.5203e-13
 -0.000000	 -0.000000	diff=1.04654e-12
  0.000000	  0.000000	diff=2.73899e-16
  0.000000	 -0.000000	diff=7.32731e-16
  0.000000	 -0.000000	diff=7.67998e-18
  0.000000	 -0.000000	diff=2.19042e-16
  0.000000	  0.000000	diff=3.20225e-16
  0.000000	 -0.000000	diff=8.08751e-16
 -0.000000	 -0.000000	diff=7.39983e-13
 -0.000000	 -0.000000	diff=1.26366e-12
  0.000000	  0.000000	diff=2.67656e-18
  0.000000	  0.000000	diff=6.95846e-19
  0.000000	  0.000000	diff=3.24263e-18
  0.000000	  0.000000	diff=8.69875e-20
  0.000000	  0.000000	diff=4.84246e-18
  0.000000	  0.000000	diff=5.86444e-19
 -0.000000	 -0.000000	diff=1.11071e-12
  0.000000	 -0.000000	diff=2.4572e-13
  0.000000	  0.000000	diff=3.56722e-18
  0.000000	 -0.000000	diff=2.98026e-18
  0.000000	  0.000000	diff=5.67154e-20
  0.000000	 -0.000000	diff=1.18708e-18
  0.000000	  0.000000	diff=3.91425e-18
  0.000000	 -0.000000	diff=4.24124e-18
 -0.000000	 -0.000000	diff=1.11672e-12
 -0.000000	 -0.000000	diff=1.1574e-12
  local_diff=6.94139e-12
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=7.95017e-18
  0.000000	  0.000000	diff=2.76619e-19
  0.000000	  0.000000	diff=4.46721e-18
  0.000000	  0.000000	diff=3.49407e-19
  0.000000	  0.000000	diff=9.60689e-18
  0.000000	  0.000000	diff=2.70715e-19
 -0.000000	 -0.000000	diff=2.29703e-12
 -0.000000	 -0.000000	diff=1.01105e-12
  0.000000	 -0.000000	diff=3.5927e-18
  0.000000	  0.000000	diff=6.03596e-19
  0.000000	 -0.000000	diff=1.66333e-18
  0.000000	  0.000000	diff=4.20861e-20
  0.000000	 -0.000000	diff=4.52174e-18
  0.000000	  0.000000	diff=5.7586e-19
 -0.000000	 -0.000000	diff=8.72938e-15
 -0.000000	 -0.000000	diff=1.27514e-12
  0.000000	  0.000000	diff=8.74454e-20
  0.000000	  0.000000	diff=1.98291e-20
  0.000000	  0.000000	diff=4.40081e-20
  0.000000	  0.000000	diff=8.34832e-21
  0.000000	  0.000000	diff=1.09095e-19
  0.000000	  0.000000	diff=2.48915e-20
 -0.000000	 -0.000000	diff=8.76165e-13
  0.000000	 -0.000000	diff=4.17525e-14
  0.000000	  0.000000	diff=1.73437e-19
  0.000000	  0.000000	diff=1.53172e-20
  0.000000	  0.000000	diff=9.89599e-20
  0.000000	  0.000000	diff=1.11797e-20
  0.000000	  0.000000	diff=2.25954e-19
  0.000000	  0.000000	diff=1.93542e-20
 -0.000000	 -0.000000	diff=1.22535e-12
  0.000000	 -0.000000	diff=2.78372e-14
  local_diff=6.76309e-12
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.39336e-12
  0.000000	  0.000000	diff=1.08233e-12
 -0.000000	 -0.000000	diff=8.46094e-13
 -0.000000	 -0.000000	diff=7.24392e-13
 -0.000000	 -0.000000	diff=6.75891e-13
 -0.000000	 -0.000000	diff=1.12959e-12
  0.000000	  0.000000	diff=1.70445e-12
  0.000000	  0.000000	diff=2.51914e-13
  local_diff=8.80802e-12
# W_pos, [2 2]
  0.000000	 -0.000000	diff=6.58935e-14
  0.000000	 -0.000000	diff=4.16648e-14
  0.000000	 -0.000000	diff=1.30291e-14
  0.000000	 -0.000000	diff=8.23839e-15
  local_diff=1.28826e-13
# v_pos, [1 2]
  0.000000	  0.000000	diff=3.76507e-14
  0.000000	 -0.000000	diff=2.33486e-14
  local_diff=6.09993e-14
# W_h, [2 4]
  0.000005	  0.000005	diff=1.00228e-12
  0.000001	  0.000001	diff=2.54718e-13
 -0.000006	 -0.000006	diff=6.29057e-13
 -0.000001	 -0.000001	diff=1.78398e-12
  0.000000	  0.000000	diff=5.38957e-12
  0.000000	  0.000000	diff=8.03267e-12
 -0.000005	 -0.000005	diff=5.64126e-11
 -0.000001	 -0.000001	diff=1.99794e-11
  local_diff=9.34842e-11
# W_soft, [8 2]
  0.000001	  0.000001	diff=7.21997e-14
 -0.000001	 -0.000001	diff=2.14049e-12
 -0.000001	 -0.000001	diff=1.00441e-12
 -0.000001	 -0.000001	diff=7.53971e-13
  0.000000	  0.000000	diff=7.56199e-13
 -0.000001	 -0.000001	diff=8.31255e-13
  0.000000	  0.000000	diff=5.07229e-13
  0.000002	  0.000002	diff=6.33054e-13
  0.000009	  0.000009	diff=3.38879e-13
 -0.000009	 -0.000009	diff=6.61256e-13
 -0.000003	 -0.000003	diff=5.13087e-13
 -0.000004	 -0.000004	diff=6.99804e-14
  0.000002	  0.000002	diff=4.18713e-13
 -0.000005	 -0.000005	diff=6.5997e-13
  0.000001	  0.000001	diff=1.12245e-12
  0.000009	  0.000009	diff=7.12977e-13
  local_diff=1.11961e-11
# Num params=418, abs_diff=9.1561e-09
Elapsed time is 9.940548 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 104, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 104
  src input 1: y y x y
  src mask: 1  1  1  1
  tgt input 1: <s> a b a
  tgt output 1: a b a </s>
  tgt mask: 1  1  1  1
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=6.82914e-27
  0.000000	 -0.000000	diff=1.95177e-30
  0.000000	  0.000000	diff=5.93316e-31
  0.000000	  0.000000	diff=1.85467e-30
  0.000000	  0.000000	diff=7.88768e-13
  0.000033	  0.000033	diff=1.27003e-07
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.11769e-35
  0.000000	 -0.000000	diff=9.28012e-28
  0.000000	 -0.000000	diff=2.65226e-31
  0.000000	  0.000000	diff=7.67726e-30
  0.000000	  0.000000	diff=2.52031e-31
  0.000000	  0.000000	diff=5.62715e-13
  0.000450	  0.000428	diff=2.19286e-05
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=6.95443e-36
  0.000000	  0.000000	diff=1.11817e-28
  0.000000	  0.000000	diff=1.76192e-31
  0.000000	  0.000000	diff=5.90119e-31
  0.000000	 -0.000000	diff=1.67428e-31
  0.000000	 -0.000000	diff=5.70229e-13
  0.000000	  0.000000	diff=7.35255e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.99214e-37
  0.000000	 -0.000000	diff=6.40794e-33
  0.000000	 -0.000000	diff=1.01069e-35
  0.000000	  0.000000	diff=8.40257e-36
  0.000000	  0.000000	diff=4.81695e-36
  0.000000	  0.000000	diff=3.26791e-17
 -0.000000	 -0.000000	diff=7.55856e-13
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.00763e-41
  local_diff=2.20557e-05
# W_tgt{1}, [8 6]
  0.665977	  0.690935	diff=0.0249579
  0.000000	  0.000000	diff=4.854e-10
  0.000000	  0.000000	diff=1.09604e-10
 -0.000000	 -0.000000	diff=8.31765e-13
-18.274228	-18.730010	diff=0.455782
  1.109839	  1.149613	diff=0.0397738
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.847529	 -0.811348	diff=0.0361808
  0.000000	  0.000000	diff=6.54257e-10
  0.000000	  0.000000	diff=6.09258e-12
  0.000000	  0.000000	diff=1.25222e-12
 22.609305	 21.994195	diff=0.61511
 -1.407330	 -1.349962	diff=0.0573681
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.60996e-36
  0.000000	  0.000000	diff=4.20065e-13
  0.000000	 -0.000000	diff=1.66166e-13
  0.000000	  0.000000	diff=5.21662e-62
  0.000000	 -0.000000	diff=6.33113e-39
  0.000000	 -0.000000	diff=2.09809e-30
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.86709e-32
  0.000000	  0.000000	diff=1.27216e-30
  0.000000	  0.000000	diff=8.70148e-13
  0.000000	 -0.000000	diff=9.14735e-60
  0.000000	  0.000000	diff=4.32829e-40
  0.000000	 -0.000000	diff=1.59049e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000331	  0.000330	diff=1.19105e-06
  0.000000	  0.000000	diff=4.20065e-13
  0.000000	 -0.000000	diff=1.66166e-13
  0.000000	  0.000000	diff=2.63438e-13
 -0.006521	 -0.006498	diff=2.29323e-05
 -0.111675	 -0.111293	diff=0.000381317
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.24856e-13
  0.000000	  0.000000	diff=1.27216e-30
  0.000000	  0.000000	diff=8.70148e-13
  0.000000	 -0.000000	diff=1.38642e-16
  0.000000	  0.000000	diff=1.48915e-13
  0.000008	  0.000008	diff=2.68628e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.22958
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000333	 -0.000347	diff=1.35904e-05
 -0.000013	 -0.000013	diff=1.84116e-08
 -0.000000	 -0.000000	diff=5.60943e-13
 -0.000000	 -0.000000	diff=2.59528e-13
  local_diff=1.36088e-05
# W_emb_tgt, [2 4]
-16.316047	-16.677489	diff=0.361442
-14.005769	-14.271785	diff=0.266017
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.00937e-09
 -0.000000	 -0.000000	diff=3.29865e-10
 -0.000000	 -0.000000	diff=1.12724e-12
 -0.000000	 -0.000000	diff=1.23536e-10
  local_diff=0.627458
# W_soft, [4 2]
  0.014631	  0.014616	diff=1.50311e-05
  0.151565	  0.151456	diff=0.000108968
 -0.406862	 -0.406893	diff=3.06572e-05
  0.240940	  0.240821	diff=0.000119271
 -1.424838	 -1.429208	diff=0.0043695
  2.618666	  2.617254	diff=0.00141252
  0.105468	  0.099156	diff=0.00631253
 -1.280499	 -1.287202	diff=0.00670337
  local_diff=0.0190718
# Num params=104, abs_diff=1.87614
Elapsed time is 0.792410 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.15445e-24
 -0.000000	  0.000000	diff=7.14491e-13
  0.000000	  0.000000	diff=1.7299e-28
  0.000000	  0.000000	diff=1.69429e-23
  0.000000	  0.000000	diff=3.77489e-25
 -0.000000	  0.000000	diff=7.14484e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.75108e-24
  0.000000	 -0.000000	diff=1.71075e-14
  0.000000	 -0.000000	diff=2.19901e-28
  0.000000	 -0.000000	diff=7.34087e-23
  0.000000	 -0.000000	diff=1.63511e-24
  0.000000	 -0.000000	diff=1.70785e-14
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=7.59486e-54
  0.000000	 -0.000000	diff=1.36095e-41
  0.000000	 -0.000000	diff=1.24309e-59
  0.000000	 -0.000000	diff=6.76941e-54
  0.000000	 -0.000000	diff=1.39484e-51
  0.000000	 -0.000000	diff=1.35864e-41
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.47202e-42
  0.000000	  0.000000	diff=5.71942e-31
  0.000000	  0.000000	diff=1.16737e-47
  0.000000	  0.000000	diff=3.03682e-44
  0.000000	  0.000000	diff=4.74941e-41
  0.000000	  0.000000	diff=5.70972e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.46316e-12
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=4.53762e-42
  0.000000	 -0.000000	diff=2.14155e-41
  0.000000	 -0.000000	diff=8.9099e-43
  0.000000	 -0.000000	diff=5.20718e-42
  0.000000	  0.000000	diff=4.77974e-42
  0.000000	 -0.000000	diff=2.66897e-41
  0.000000	 -0.000000	diff=1.81382e-26
  0.000000	 -0.000000	diff=6.06482e-26
  0.000000	 -0.000000	diff=1.05573e-31
  0.000000	  0.000000	diff=9.68972e-31
  0.000000	  0.000000	diff=7.73067e-33
  0.000000	  0.000000	diff=3.14478e-31
  0.000000	 -0.000000	diff=1.29258e-31
  0.000000	  0.000000	diff=1.32984e-30
  0.000000	  0.000000	diff=1.20203e-15
  0.000000	  0.000000	diff=1.88219e-15
  0.000000	  0.000000	diff=1.03886e-33
  0.000000	 -0.000000	diff=6.18645e-32
  0.000000	 -0.000000	diff=1.43998e-33
  0.000000	 -0.000000	diff=1.91375e-32
  0.000000	  0.000000	diff=2.32774e-33
  0.000000	 -0.000000	diff=5.9028e-32
  0.000000	  0.000000	diff=2.42931e-16
  0.000000	 -0.000000	diff=5.10375e-17
  0.000000	 -0.000000	diff=1.36325e-32
  0.000000	  0.000000	diff=1.66374e-30
  0.000000	 -0.000000	diff=4.04483e-33
  0.000000	  0.000000	diff=6.04443e-31
  0.000000	 -0.000000	diff=1.73299e-32
  0.000000	  0.000000	diff=2.94736e-30
  0.000000	  0.000000	diff=3.58103e-16
  0.000000	  0.000000	diff=2.20533e-15
  local_diff=5.94161e-15
# W_tgt{1}, [8 6]
 -0.000001	 -0.000001	diff=1.88913e-09
  0.000000	  0.000000	diff=3.15788e-18
 -0.000000	 -0.000000	diff=2.53582e-11
  0.000000	  0.000000	diff=1.01535e-25
 -0.000001	 -0.000001	diff=5.03243e-08
  0.000000	  0.000000	diff=9.90328e-12
  0.000000	 -0.000000	diff=1.00033e-43
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.50309e-10
  0.000000	 -0.000000	diff=5.35104e-18
 -0.000000	 -0.000000	diff=1.05437e-11
  0.000000	  0.000000	diff=6.51967e-26
 -0.000001	 -0.000001	diff=2.05349e-08
  0.000000	  0.000000	diff=3.66505e-12
  0.000000	  0.000000	diff=1.69504e-43
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.15066e-15
  0.000000	 -0.000000	diff=8.37396e-37
  0.000000	 -0.000000	diff=3.42575e-18
  0.000000	  0.000000	diff=2.42584e-34
  0.000000	 -0.000000	diff=2.01804e-15
  0.000000	  0.000000	diff=5.14885e-19
  0.000000	 -0.000000	diff=9.01108e-75
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.73834e-16
  0.000000	 -0.000000	diff=5.54152e-37
  0.000000	  0.000000	diff=5.17539e-19
  0.000000	 -0.000000	diff=3.66478e-35
  0.000000	  0.000000	diff=3.04872e-16
  0.000000	 -0.000000	diff=7.7785e-20
  0.000000	  0.000000	diff=4.38452e-75
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.21901e-15
  0.000000	 -0.000000	diff=5.65528e-39
  0.000000	  0.000000	diff=3.62924e-18
  0.000000	 -0.000000	diff=2.56993e-34
  0.000000	  0.000000	diff=2.13791e-15
  0.000000	 -0.000000	diff=5.45468e-19
  0.000000	  0.000000	diff=2.57998e-74
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.67957e-20
  0.000000	 -0.000000	diff=2.2675e-35
  0.000000	  0.000000	diff=1.09958e-22
  0.000000	 -0.000000	diff=7.81482e-39
  0.000000	  0.000000	diff=6.45327e-20
  0.000000	 -0.000000	diff=1.65384e-23
  0.000000	  0.000000	diff=2.90062e-67
  0.000000	  0.000000	diff=0
  local_diff=7.36481e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.14953e-15
  0.000000	  0.000000	diff=2.43245e-15
  0.000000	  0.000000	diff=2.30865e-16
  0.000000	  0.000000	diff=3.0348e-16
  0.000000	  0.000000	diff=6.88977e-16
  0.000000	  0.000000	diff=1.82705e-15
  0.000000	  0.000000	diff=1.8177e-13
 -0.000000	 -0.000000	diff=6.47252e-13
  0.000000	  0.000000	diff=3.82377e-20
  0.000000	  0.000000	diff=7.59735e-20
  0.000000	  0.000000	diff=7.20752e-21
  0.000000	  0.000000	diff=9.47454e-21
  0.000000	  0.000000	diff=2.40474e-20
  0.000000	  0.000000	diff=5.73201e-20
  0.000000	  0.000000	diff=8.13338e-14
 -0.000000	 -0.000000	diff=1.0627e-12
  0.000000	  0.000000	diff=1.90747e-15
  0.000000	 -0.000000	diff=2.9684e-15
  0.000000	 -0.000000	diff=6.52651e-16
  0.000000	 -0.000000	diff=8.57925e-16
  0.000000	  0.000000	diff=1.25482e-15
  0.000000	 -0.000000	diff=3.82632e-15
 -0.000000	 -0.000000	diff=4.43623e-13
  0.000000	  0.000000	diff=3.79858e-13
  0.000000	 -0.000000	diff=2.88163e-16
  0.000000	  0.000000	diff=4.48441e-16
  0.000000	  0.000000	diff=9.85969e-17
  0.000000	  0.000000	diff=1.29608e-16
  0.000000	 -0.000000	diff=1.89566e-16
  0.000000	  0.000000	diff=5.78049e-16
  0.000000	  0.000000	diff=1.37163e-13
 -0.000000	 -0.000000	diff=1.49624e-13
  local_diff=3.10316e-12
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.37314e-16
 -0.000000	  0.000000	diff=7.48364e-13
  0.000000	 -0.000000	diff=2.52839e-20
  0.000000	 -0.000000	diff=2.88587e-20
  local_diff=7.48701e-13
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=4.02888e-13
 -0.000000	 -0.000000	diff=1.3518e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.89532e-19
  0.000000	 -0.000000	diff=4.08172e-19
  0.000001	  0.000001	diff=4.94941e-08
 -0.000002	 -0.000001	diff=7.63413e-08
  local_diff=1.25836e-07
# W_soft, [4 2]
  0.000000	  0.000000	diff=1.63336e-13
 -0.000000	 -0.000000	diff=5.70279e-13
 -0.000000	 -0.000000	diff=1.78709e-13
  0.000000	  0.000000	diff=2.0178e-13
 -0.000000	 -0.000000	diff=6.28554e-13
  0.000000	  0.000000	diff=4.0722e-13
 -0.000000	 -0.000000	diff=1.98809e-13
 -0.000000	 -0.000000	diff=2.25247e-14
  local_diff=2.37121e-12
# Num params=168, abs_diff=1.99492e-07
Elapsed time is 1.412367 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=4.94782e-29
  0.000000	  0.000000	diff=2.62773e-17
  0.000000	  0.000000	diff=1.20299e-32
  0.000000	  0.000000	diff=3.98999e-27
  0.000000	  0.000000	diff=1.34912e-09
  0.000000	  0.000000	diff=6.48803e-20
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.1804e-37
  0.000000	 -0.000000	diff=6.3016e-29
  0.000000	 -0.000000	diff=3.36015e-17
  0.000000	 -0.000000	diff=1.5292e-32
  0.000000	 -0.000000	diff=5.15717e-27
  0.000000	 -0.000000	diff=6.21514e-31
  0.000000	 -0.000000	diff=2.81112e-19
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.69906e-66
  0.000000	 -0.000000	diff=4.38391e-52
  0.000000	 -0.000000	diff=1.96685e-71
  0.000000	 -0.000000	diff=6.34695e-66
  0.000000	 -0.000000	diff=1.04107e-64
  0.000000	 -0.000000	diff=4.38199e-52
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.5472e-50
  0.000000	  0.000000	diff=4.94712e-39
  0.000000	  0.000000	diff=1.08246e-56
  0.000000	  0.000000	diff=1.26422e-55
  0.000000	  0.000000	diff=1.52539e-51
  0.000000	  0.000000	diff=4.94541e-39
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.34912e-09
# W_src{2}, [8 4]
  0.000038	  0.000038	diff=1.80882e-07
  0.000415	  0.000413	diff=1.98257e-06
  0.000000	 -0.000000	diff=3.63844e-53
  0.000000	 -0.000000	diff=2.06029e-52
  0.005013	  0.005034	diff=2.04479e-05
 -0.017474	 -0.017408	diff=6.5837e-05
 -0.000000	 -0.000000	diff=4.08246e-12
  0.000000	  0.000000	diff=1.79006e-09
  0.000000	 -0.000000	diff=4.61099e-39
  0.000000	  0.000000	diff=6.91356e-39
  0.000000	  0.000000	diff=7.42599e-40
  0.000000	  0.000000	diff=2.34178e-39
  0.000000	 -0.000000	diff=5.13193e-39
  0.000000	  0.000000	diff=9.82144e-39
  0.000000	  0.000000	diff=2.00637e-19
  0.000000	  0.000000	diff=9.34894e-20
  0.000000	  0.000000	diff=3.3088e-40
  0.000000	  0.000000	diff=5.28168e-40
  0.000000	 -0.000000	diff=1.76609e-40
  0.000000	  0.000000	diff=2.94944e-40
  0.000000	  0.000000	diff=2.38521e-40
  0.000000	  0.000000	diff=2.33133e-39
  0.000000	  0.000000	diff=7.04271e-20
  0.000000	  0.000000	diff=1.01853e-20
  0.000000	 -0.000000	diff=3.98453e-39
  0.000000	  0.000000	diff=1.07568e-38
  0.000000	  0.000000	diff=1.04197e-39
  0.000000	  0.000000	diff=3.68464e-39
  0.000000	 -0.000000	diff=3.69414e-39
  0.000000	  0.000000	diff=1.8885e-38
  0.000000	 -0.000000	diff=1.2146e-20
  0.000000	  0.000000	diff=1.30199e-19
  local_diff=8.84501e-05
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=3.45527e-10
  0.000000	 -0.000000	diff=3.73798e-21
  0.000000	 -0.000000	diff=3.66215e-24
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.0097e-09
 -0.000000	 -0.000000	diff=2.30805e-10
  0.000000	  0.000000	diff=8.73997e-64
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.45361e-10
  0.000000	  0.000000	diff=6.16526e-15
  0.000000	  0.000000	diff=1.87866e-24
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.17618e-10
  0.000000	  0.000000	diff=7.06152e-13
  0.000000	 -0.000000	diff=1.48098e-63
  0.000000	 -0.000000	diff=4.25443e-14
  0.000000	 -0.000000	diff=3.49673e-27
  0.000000	  0.000000	diff=1.70264e-32
  0.000000	 -0.000000	diff=1.22029e-43
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.76264e-27
  0.000000	 -0.000000	diff=2.62114e-23
  0.000000	 -0.000000	diff=1.57043e-93
  0.000000	 -0.000000	diff=2.64791e-34
  0.000000	  0.000000	diff=2.568e-13
  0.000000	  0.000000	diff=1.43274e-31
  0.000000	 -0.000000	diff=9.47536e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.86381e-14
  0.000000	 -0.000000	diff=1.8717e-23
  0.000000	  0.000000	diff=9.11343e-77
  0.000000	 -0.000000	diff=2.22816e-33
  0.000000	 -0.000000	diff=7.71721e-56
  0.000000	 -0.000000	diff=1.3346e-41
  0.000000	  0.000000	diff=1.2448e-25
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.44065e-40
  0.000000	 -0.000000	diff=2.45677e-34
  0.000000	 -0.000000	diff=1.28386e-71
  0.000000	 -0.000000	diff=1.01822e-52
  0.000000	  0.000000	diff=1.07974e-34
  0.000000	 -0.000000	diff=4.40654e-32
  0.000000	  0.000000	diff=3.16473e-43
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.60383e-34
  0.000000	  0.000000	diff=2.17694e-23
  0.000000	  0.000000	diff=2.46413e-84
  0.000000	  0.000000	diff=6.85295e-34
  local_diff=3.5501e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=3.62451e-13
 -0.000000	 -0.000000	diff=1.3623e-13
 -0.000000	 -0.000000	diff=5.02925e-13
  0.000000	  0.000000	diff=5.4452e-14
  0.000000	  0.000000	diff=3.39417e-13
  0.000000	  0.000000	diff=2.12804e-14
  0.000000	  0.000000	diff=3.71072e-13
 -0.000000	 -0.000000	diff=5.09008e-13
  0.000000	 -0.000000	diff=6.03028e-20
  0.000000	  0.000000	diff=3.21492e-19
  0.000000	  0.000000	diff=2.83234e-24
  0.000000	  0.000000	diff=6.51055e-24
  0.000000	 -0.000000	diff=6.81393e-20
  0.000000	 -0.000000	diff=6.34477e-20
 -0.000000	 -0.000000	diff=3.17136e-13
  0.000000	  0.000000	diff=1.10669e-13
  0.021660	  0.021644	diff=1.62213e-05
 -0.010074	 -0.010082	diff=8.10324e-06
 -0.004782	 -0.004781	diff=9.56961e-07
  0.002654	  0.002654	diff=1.45711e-07
  0.035377	  0.035371	diff=5.56391e-06
 -0.003264	 -0.003268	diff=3.61935e-06
  0.015890	  0.015869	diff=2.0875e-05
  0.257396	  0.256733	diff=0.000663085
 -0.009115	 -0.009121	diff=5.81019e-06
  0.006978	  0.006988	diff=9.83407e-06
 -0.001094	 -0.001094	diff=4.8922e-07
 -0.041693	 -0.041925	diff=0.000231937
 -0.003097	 -0.003101	diff=4.02777e-06
  0.003241	  0.003238	diff=2.98127e-06
  0.032197	  0.032157	diff=3.96739e-05
 -0.488926	 -0.493737	diff=0.00481123
  local_diff=0.00582455
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.79244e-21
  0.000000	  0.000000	diff=6.21663e-19
  0.000000	  0.000000	diff=3.97312e-10
  0.000000	  0.000000	diff=4.98006e-17
  local_diff=3.97312e-10
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=3.56072e-10
  0.000000	 -0.000000	diff=4.47895e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.40444e-13
  0.000000	  0.000000	diff=6.05501e-16
  0.000000	  0.000000	diff=2.16515e-09
 -0.000000	 -0.000000	diff=3.52464e-09
  local_diff=6.04645e-09
# W_soft, [4 2]
  0.003314	  0.003257	diff=5.74002e-05
  0.063391	  0.063336	diff=5.48146e-05
 -0.169196	 -0.169247	diff=5.09466e-05
  0.102698	  0.102653	diff=4.43992e-05
 -0.035975	 -0.036002	diff=2.75974e-05
  0.098266	  0.098237	diff=2.84965e-05
 -0.088545	 -0.088565	diff=2.06253e-05
  0.026354	  0.026330	diff=2.37666e-05
  local_diff=0.000308046
# Num params=168, abs_diff=0.00622106
Elapsed time is 1.364980 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 176, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 176
  src input 1: <s> y x x
  src mask: 0  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.001254	  0.001261	diff=7.38686e-06
  0.000000	  0.000000	diff=5.78469e-17
  0.000000	 -0.000000	diff=1.01121e-31
  0.000000	 -0.000000	diff=1.92733e-29
  0.158212	  0.159173	diff=0.000960895
  0.000000	  0.000000	diff=4.33861e-16
 -0.000250	 -0.000248	diff=2.93254e-06
  0.000000	  0.000000	diff=1.29485e-16
  0.000000	  0.000000	diff=5.19006e-25
  0.000000	 -0.000000	diff=8.36502e-17
  0.000000	  0.000000	diff=1.28543e-31
  0.000000	  0.000000	diff=8.35137e-29
  0.000000	  0.000000	diff=1.40357e-31
  0.000000	 -0.000000	diff=1.43504e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.922e-61
  0.000000	 -0.000000	diff=2.62173e-53
  0.000000	  0.000000	diff=4.25152e-68
  0.000000	  0.000000	diff=1.54448e-67
  0.000000	 -0.000000	diff=1.74991e-69
  0.000000	 -0.000000	diff=3.29746e-54
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=9.83931e-46
  0.000000	  0.000000	diff=1.25062e-37
  0.000000	 -0.000000	diff=2.17623e-52
  0.000000	  0.000000	diff=4.85363e-54
  0.000000	 -0.000000	diff=4.24796e-55
  0.000000	  0.000000	diff=7.7452e-39
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.000971214
# W_src{2}, [8 4]
  0.003224	  0.003209	diff=1.46474e-05
 -0.004942	 -0.004918	diff=2.40502e-05
  0.000000	  0.000000	diff=1.0774e-53
  0.000000	  0.000000	diff=7.32354e-53
  0.261445	  0.262567	diff=0.001122
 -0.867284	 -0.864109	diff=0.00317517
 -0.000000	 -0.000000	diff=4.56003e-10
 -0.000002	 -0.000001	diff=1.52883e-08
  0.000000	  0.000000	diff=3.06686e-38
  0.000000	  0.000000	diff=5.73859e-38
  0.000000	 -0.000000	diff=6.36319e-39
  0.000000	  0.000000	diff=1.99628e-38
  0.000000	  0.000000	diff=3.31609e-38
  0.000000	  0.000000	diff=1.01018e-37
  0.000000	 -0.000000	diff=6.2176e-19
  0.000000	  0.000000	diff=7.32183e-19
  0.000000	 -0.000000	diff=3.68688e-39
  0.000000	 -0.000000	diff=1.20675e-38
  0.000000	  0.000000	diff=1.70066e-39
  0.000000	 -0.000000	diff=5.34929e-39
  0.000000	 -0.000000	diff=2.24077e-39
  0.000000	 -0.000000	diff=2.9601e-38
  0.000000	 -0.000000	diff=4.85458e-19
  0.000000	 -0.000000	diff=1.23966e-19
  0.000000	  0.000000	diff=3.59461e-38
  0.000000	  0.000000	diff=9.68826e-38
  0.000000	 -0.000000	diff=1.12433e-38
  0.000000	  0.000000	diff=3.39502e-38
  0.000000	  0.000000	diff=3.17958e-38
  0.000000	  0.000000	diff=2.06821e-37
  0.000000	  0.000000	diff=3.58141e-19
  0.000000	  0.000000	diff=5.10657e-19
  local_diff=0.00433588
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=3.53885e-11
  0.000000	 -0.000000	diff=4.20559e-22
  0.000000	  0.000000	diff=1.41973e-12
  0.000000	 -0.000000	diff=1.49227e-93
 -0.000000	 -0.000000	diff=4.01058e-10
  0.000000	  0.000000	diff=6.95415e-13
  0.000000	 -0.000000	diff=1.36148e-55
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.39873e-11
  0.016850	  0.017432	diff=0.000581548
 -0.000005	 -0.000005	diff=1.63489e-07
  0.000000	  0.000000	diff=6.27819e-18
 -0.000000	 -0.000000	diff=1.62473e-10
  0.000044	  0.000046	diff=1.5444e-06
  0.000000	  0.000000	diff=2.30701e-55
  3.273790	  3.530125	diff=0.256335
  0.000000	  0.000000	diff=2.36915e-13
 -0.002587	 -0.002574	diff=1.34491e-05
  0.000001	  0.000001	diff=3.91346e-09
  0.000000	 -0.000000	diff=9.58608e-19
  0.000000	  0.000000	diff=1.99412e-12
 -0.000007	 -0.000007	diff=3.46416e-08
  0.000000	 -0.000000	diff=8.35723e-94
 -0.000002	 -0.000002	diff=1.77143e-08
 -0.000000	 -0.000000	diff=9.90894e-13
 -0.002502	 -0.002489	diff=1.25791e-05
  0.000001	  0.000001	diff=3.66089e-09
  0.000000	 -0.000000	diff=9.27136e-19
 -0.000000	 -0.000000	diff=1.83621e-12
 -0.000006	 -0.000006	diff=3.24012e-08
  0.000000	  0.000000	diff=6.03763e-93
 -0.000002	 -0.000002	diff=1.65672e-08
  0.000000	 -0.000000	diff=1.00656e-19
 -0.001870	 -0.001862	diff=7.0359e-06
  0.000001	  0.000001	diff=2.04874e-09
  0.000000	 -0.000000	diff=6.93683e-19
 -0.000000	 -0.000000	diff=6.23814e-13
 -0.000005	 -0.000005	diff=1.81221e-08
  0.000000	  0.000000	diff=8.92759e-64
 -0.000001	 -0.000001	diff=9.25791e-09
  0.000000	 -0.000000	diff=1.85065e-25
  0.001802	  0.001809	diff=6.60194e-06
 -0.000001	 -0.000001	diff=1.9209e-09
  0.000000	  0.000000	diff=6.73598e-19
  0.000000	  0.000000	diff=2.46331e-16
  0.000005	  0.000005	diff=1.70028e-08
  0.000000	  0.000000	diff=5.46376e-84
  0.000001	  0.000001	diff=8.64204e-09
  local_diff=0.256958
# W_tgt{2}, [8 4]
  0.000482	  0.000487	diff=4.30135e-06
 -0.129208	 -0.128560	diff=0.000648313
  0.000000	  0.000000	diff=3.91993e-10
 -0.000203	 -0.000202	diff=1.22106e-06
 -0.000000	 -0.000000	diff=1.16504e-11
 -2.188387	 -2.180283	diff=0.00810429
 -0.000023	 -0.000022	diff=2.11442e-07
  0.000000	  0.000000	diff=4.03045e-09
 -0.000167	 -0.000166	diff=8.42192e-07
  0.121537	  0.122118	diff=0.000580739
 -0.000000	 -0.000000	diff=2.42734e-10
  0.000159	  0.000159	diff=7.54623e-07
  0.000000	  0.000000	diff=1.32217e-10
  2.025519	  2.033286	diff=0.00776719
  0.000022	  0.000022	diff=1.97718e-07
 -0.000000	 -0.000000	diff=3.78767e-09
 -0.117148	 -0.117065	diff=8.30687e-05
  0.175358	  0.175497	diff=0.000139066
  0.021245	  0.021241	diff=3.75291e-06
 -0.045413	 -0.045421	diff=7.9792e-06
 -0.249366	 -0.249207	diff=0.000159306
  0.080066	  0.080127	diff=6.063e-05
 -0.128219	 -0.128009	diff=0.000209255
 -1.835474	 -1.821901	diff=0.0135728
 -0.157398	 -0.156765	diff=0.000633399
  0.202520	  0.202529	diff=9.16323e-06
 -0.031462	 -0.031317	diff=0.00014483
  0.138145	  0.138453	diff=0.000308902
 -0.002893	 -0.002866	diff=2.68371e-05
  0.053886	  0.053856	diff=3.00519e-05
 -0.130706	 -0.130483	diff=0.000223197
 -0.496780	 -0.565991	diff=0.0692114
  local_diff=0.101932
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.449810	  0.457780	diff=0.00796968
  0.000000	  0.000000	diff=3.17353e-17
  0.000000	  0.000000	diff=5.2171e-09
  0.000000	  0.000000	diff=1.03568e-16
  local_diff=0.00796968
# W_emb_tgt, [2 4]
 -0.000000	 -0.000000	diff=2.77889e-12
 -0.000000	 -0.000000	diff=1.12537e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.82379e-23
  0.000000	 -0.000000	diff=1.44066e-12
  0.000000	  0.000000	diff=3.63588e-10
  0.174029	  0.174701	diff=0.000671944
  local_diff=0.000671945
# W_h, [2 4]
  0.007191	  0.007190	diff=4.53093e-07
  0.206067	  0.206068	diff=1.19647e-06
 -0.265919	 -0.266410	diff=0.000490461
 -7.793612	 -7.791739	diff=0.00187306
  1.911988	  1.911840	diff=0.000147331
 -2.593384	 -2.588799	diff=0.00458552
 -0.072544	 -0.073119	diff=0.000574981
  0.789250	  0.790091	diff=0.000841381
  local_diff=0.00851439
# W_soft, [4 2]
 -2.733187	 -2.735182	diff=0.0019956
  1.227116	  1.227054	diff=6.2027e-05
  1.540589	  1.540443	diff=0.000145849
 -0.030451	 -0.032314	diff=0.00186362
 -5.238513	 -5.241345	diff=0.00283206
  2.035890	  2.035819	diff=7.1456e-05
  3.086743	  3.086652	diff=9.0678e-05
  0.121598	  0.118874	diff=0.00272319
  local_diff=0.00978448
# Num params=176, abs_diff=0.391137
Elapsed time is 2.004804 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_pos=4 v_pos=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000020	  0.000020	diff=1.19702e-07
  0.000158	 -0.000005	diff=0.00016318
 -0.000000	 -0.000000	diff=3.79136e-10
  0.000006	  0.000006	diff=3.00514e-08
 -0.019692	 -0.019538	diff=0.000154198
 -0.000104	 -0.000103	diff=7.06928e-07
 -0.000005	 -0.000005	diff=6.23523e-08
  0.000053	  0.000053	diff=5.21627e-07
  0.000000	  0.000000	diff=5.1051e-09
 -0.000194	 -0.000000	diff=0.000193484
  0.000000	  0.000000	diff=1.4879e-33
  0.000000	 -0.000000	diff=1.14551e-25
  0.000000	 -0.000000	diff=5.91303e-30
  0.000000	 -0.000000	diff=1.80097e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000005	  0.000005	diff=1.77024e-08
  0.000003	  0.000003	diff=9.95974e-09
  0.000000	  0.000000	diff=1.75556e-10
 -0.000003	 -0.000003	diff=1.16707e-08
  0.014496	  0.014553	diff=5.7821e-05
  0.000049	  0.000049	diff=1.73519e-07
 -0.000000	 -0.000000	diff=2.80262e-13
 -0.000000	 -0.000000	diff=3.79726e-10
 -0.000000	 -0.000000	diff=1.31348e-12
  0.000000	  0.000000	diff=1.83824e-13
 -0.000000	 -0.000000	diff=2.43885e-13
  0.000000	  0.000000	diff=2.91847e-13
 -0.000028	 -0.000028	diff=3.71991e-09
  0.000001	  0.000001	diff=4.99505e-11
  0.000000	  0.000000	diff=4.66506e-13
 -0.000000	 -0.000000	diff=3.07049e-13
  local_diff=0.000570346
# W_src{2}, [8 4]
 -0.000588	 -0.000585	diff=2.5476e-06
  0.000125	  0.000124	diff=4.85875e-07
 -0.000023	 -0.000023	diff=7.97532e-08
 -0.000000	 -0.000000	diff=9.0729e-10
 -0.023150	 -0.023019	diff=0.00013055
 -0.011376	 -0.011347	diff=2.97192e-05
  0.000782	  0.000789	diff=6.62581e-06
 -0.000000	 -0.000000	diff=7.15729e-11
  0.000000	 -0.000000	diff=1.80015e-38
  0.000000	  0.000000	diff=1.054e-37
  0.000000	  0.000000	diff=7.52237e-39
  0.000000	  0.000000	diff=4.32932e-38
  0.000000	 -0.000000	diff=1.16579e-38
  0.000000	  0.000000	diff=1.68256e-37
  0.000000	 -0.000000	diff=9.09115e-19
  0.000000	  0.000000	diff=6.2568e-19
 -0.000317	 -0.000316	diff=1.11321e-06
  0.000267	  0.000266	diff=9.09454e-07
 -0.000001	 -0.000001	diff=1.85421e-09
  0.000001	  0.000001	diff=2.90036e-09
 -0.000668	 -0.000667	diff=6.24788e-07
 -0.000226	 -0.000226	diff=3.62964e-08
  0.000726	  0.000732	diff=5.71225e-06
  0.000000	  0.000000	diff=1.58999e-11
  0.000089	  0.000089	diff=8.98581e-08
  0.000092	  0.000093	diff=5.47743e-07
  0.000024	  0.000024	diff=8.78324e-08
  0.000001	  0.000001	diff=4.91936e-09
  0.026478	  0.026652	diff=0.00017376
  0.008571	  0.008574	diff=3.07465e-06
 -0.000205	 -0.000204	diff=4.4998e-07
 -0.000000	 -0.000000	diff=1.0598e-12
  local_diff=0.000356425
# W_tgt{1}, [8 6]
 -0.000001	 -0.000001	diff=4.19801e-09
  0.000000	 -0.000000	diff=5.93927e-20
  0.000000	  0.000000	diff=3.33753e-12
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.0626e-08
 -0.000000	 -0.000000	diff=7.51526e-13
  0.000000	  0.000000	diff=5.90485e-53
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.82159e-09
  0.000000	  0.000000	diff=1.2389e-12
  0.000000	  0.000000	diff=1.68655e-12
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=2.06042e-08
  0.000000	  0.000000	diff=1.6857e-12
  0.000000	 -0.000000	diff=1.00057e-52
 -0.000000	 -0.000000	diff=4.0213e-13
  0.000000	  0.000000	diff=6.94016e-12
  0.000000	  0.000000	diff=3.58775e-13
 -0.000000	 -0.000000	diff=2.42289e-13
  0.000000	  0.000000	diff=6.20853e-14
 -0.000000	 -0.000000	diff=1.43713e-11
  0.000000	  0.000000	diff=1.08379e-14
 -0.000000	 -0.000001	diff=4.99793e-07
  0.000003	  0.000002	diff=1.07353e-06
  0.000000	  0.000000	diff=7.01618e-12
 -0.000000	 -0.000000	diff=2.58601e-13
 -0.000000	 -0.000000	diff=1.05059e-12
 -0.000000	 -0.000000	diff=3.99415e-13
 -0.000000	 -0.000000	diff=1.39014e-11
 -0.000000	 -0.000000	diff=2.61914e-13
  0.000003	  0.000005	diff=1.97835e-06
 -0.000013	 -0.000009	diff=4.20626e-06
 -0.000027	 -0.000027	diff=6.56326e-08
  0.000000	  0.000000	diff=5.73235e-13
 -0.000031	 -0.000031	diff=9.11821e-08
  0.000000	  0.000000	diff=1.02302e-12
 -0.000012	 -0.000012	diff=3.45513e-08
 -0.000000	 -0.000000	diff=5.12906e-13
 -0.000000	 -0.000000	diff=4.22781e-11
  0.000000	  0.000000	diff=6.80762e-12
 -0.000001	 -0.000001	diff=1.01452e-10
  0.000000	  0.000000	diff=1.20733e-13
 -0.000001	 -0.000001	diff=1.46778e-10
  0.000000	  0.000000	diff=8.33417e-14
 -0.000000	 -0.000000	diff=6.25166e-11
  0.000000	  0.000000	diff=2.63575e-13
 -0.000000	 -0.000000	diff=6.84447e-08
  0.000000	  0.000000	diff=1.46928e-07
  local_diff=8.24234e-06
# W_tgt{2}, [8 4]
  0.001410	  0.001412	diff=1.464e-06
 -0.000000	 -0.000000	diff=2.93398e-10
 -0.000000	 -0.000000	diff=8.25959e-10
  0.000002	  0.000002	diff=9.62961e-10
 -0.000062	 -0.000061	diff=2.88258e-07
  0.000004	  0.000004	diff=1.78148e-08
  0.000001	  0.000002	diff=2.03498e-07
 -0.000003	 -0.000003	diff=4.4258e-08
 -0.000000	 -0.000000	diff=2.96047e-13
  0.000000	  0.000000	diff=6.09366e-13
 -0.000000	 -0.000000	diff=3.24934e-13
  0.000000	  0.000000	diff=8.44173e-14
 -0.000000	 -0.000000	diff=8.03062e-14
  0.000000	  0.000000	diff=5.43826e-13
  0.000000	  0.000005	diff=4.31779e-06
 -0.000013	 -0.000010	diff=2.86293e-06
  0.001093	  0.001093	diff=5.90998e-07
 -0.000000	 -0.000000	diff=1.58349e-10
 -0.000000	 -0.000000	diff=4.53642e-10
  0.000001	  0.000001	diff=5.24e-10
 -0.000052	 -0.000051	diff=2.05837e-07
  0.000003	  0.000003	diff=9.64209e-09
 -0.000000	 -0.000000	diff=3.65474e-09
  0.000000	  0.000000	diff=5.19358e-10
 -0.000300	 -0.000300	diff=7.34139e-08
  0.000000	  0.000000	diff=1.68296e-11
  0.000000	  0.000000	diff=4.80336e-11
 -0.000000	 -0.000000	diff=5.85121e-11
  0.000009	  0.000009	diff=1.02734e-08
 -0.000001	 -0.000001	diff=1.06621e-09
 -0.000000	 -0.000000	diff=3.09226e-08
  0.000000	  0.000000	diff=6.99742e-09
  local_diff=1.01352e-05
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.055225	 -0.053908	diff=0.00131691
  0.000000	  0.000000	diff=3.14847e-17
  0.000276	  0.000000	diff=0.000276148
  0.000319	  0.000000	diff=0.000318753
  local_diff=0.00191182
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=8.73261e-16
 -0.000000	 -0.000000	diff=6.5708e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.21566e-20
  0.000000	 -0.000000	diff=9.68362e-16
  0.000001	  0.000001	diff=5.11986e-08
 -0.000001	 -0.000001	diff=8.12709e-08
  local_diff=1.3247e-07
# W_pos, [2 2]
  0.013483	  0.013517	diff=3.4179e-05
  0.005323	  0.005291	diff=3.21478e-05
 -0.000000	 -0.000000	diff=8.69149e-14
 -0.000000	 -0.000000	diff=3.00446e-13
  local_diff=6.63268e-05
# v_pos, [1 2]
 -0.022079	 -0.021905	diff=0.000174608
 -0.076306	 -0.074289	diff=0.00201677
  local_diff=0.00219138
# W_h, [2 4]
 -0.000001	 -0.000001	diff=2.4264e-09
  0.018819	  0.018878	diff=5.95072e-05
  0.000000	  0.000000	diff=5.93914e-10
 -0.009100	 -0.009086	diff=1.38216e-05
 -0.000003	 -0.000004	diff=7.33727e-07
  0.055878	  0.056410	diff=0.000531996
 -0.000002	 -0.000007	diff=5.38299e-06
  0.000011	  0.000006	diff=4.7819e-06
  local_diff=0.000616227
# W_soft, [4 2]
 -0.009536	 -0.009583	diff=4.76194e-05
 -0.007614	 -0.010962	diff=0.00334772
  0.991862	  0.991821	diff=4.06572e-05
 -0.967893	 -0.971276	diff=0.00338334
 -0.009489	 -0.009536	diff=4.69765e-05
 -0.009284	 -0.012587	diff=0.00330246
  0.986164	  0.986124	diff=4.01076e-05
 -0.960663	 -0.964000	diff=0.00333755
  local_diff=0.0135464
# Num params=182, abs_diff=0.0192775
Elapsed time is 2.820945 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 180, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 180
  src input 1: <s> <s> x y
  src mask: 0  0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000010	 -0.000010	diff=5.80667e-08
  0.000000	  0.000000	diff=1.34186e-15
  0.000000	  0.000000	diff=1.18329e-22
  0.000000	  0.000000	diff=1.52873e-33
 -0.001243	 -0.001250	diff=7.4602e-06
  0.000000	  0.000000	diff=5.92526e-14
  0.000002	  0.000002	diff=2.30536e-08
  0.000000	  0.000000	diff=1.74694e-13
  0.000000	  0.000000	diff=2.32677e-30
  0.000000	  0.000000	diff=2.20413e-17
  0.000000	  0.000000	diff=5.53782e-34
  0.000000	 -0.000000	diff=1.82225e-33
  0.000000	  0.000000	diff=7.53374e-33
  0.000000	  0.000000	diff=2.06121e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.14396e-67
  0.000000	  0.000000	diff=1.6979e-54
  0.000000	 -0.000000	diff=1.41002e-23
  0.000000	  0.000000	diff=4.08255e-71
 -0.000000	 -0.000000	diff=3.93273e-10
  0.000000	 -0.000000	diff=1.41025e-28
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.56817e-28
  0.000000	 -0.000000	diff=2.03989e-51
  0.000000	 -0.000000	diff=1.73023e-38
  0.000000	  0.000000	diff=9.98634e-28
  0.000000	 -0.000000	diff=4.42823e-55
  0.000000	  0.000000	diff=4.94294e-13
  0.000000	  0.000000	diff=1.00228e-32
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.53593e-32
  local_diff=7.54171e-06
# W_src{2}, [8 4]
 -0.000067	 -0.000066	diff=3.00941e-07
  0.000566	  0.000564	diff=2.45139e-06
 -0.000000	 -0.000000	diff=3.82788e-10
  0.000003	  0.000003	diff=1.59276e-08
 -0.006707	 -0.006721	diff=1.32144e-05
 -0.046658	 -0.046516	diff=0.000142552
  0.000000	  0.000000	diff=5.88197e-10
  0.000000	  0.000000	diff=1.84115e-11
  0.000000	  0.000000	diff=9.57032e-39
  0.000000	 -0.000000	diff=4.70762e-38
  0.000000	 -0.000000	diff=1.0355e-39
  0.000000	 -0.000000	diff=4.18274e-39
  0.000000	  0.000000	diff=1.20606e-38
  0.000000	 -0.000000	diff=2.74019e-38
  0.000000	 -0.000000	diff=5.83619e-19
  0.000000	 -0.000000	diff=1.69628e-18
 -0.000000	 -0.000000	diff=1.08545e-09
  0.000322	  0.000321	diff=6.91994e-07
 -0.000000	 -0.000000	diff=2.35902e-11
  0.000002	  0.000002	diff=5.68942e-09
  0.000111	  0.000111	diff=5.39148e-08
 -0.001752	 -0.001750	diff=1.73542e-06
  0.000000	  0.000000	diff=1.36923e-10
  0.000000	  0.000000	diff=2.49311e-13
  0.000000	  0.000000	diff=7.7673e-10
 -0.000188	 -0.000188	diff=1.81268e-07
  0.000000	  0.000000	diff=1.84462e-10
 -0.000001	 -0.000001	diff=9.52992e-10
  0.000727	  0.000735	diff=8.16531e-06
  0.035747	  0.035835	diff=8.77148e-05
 -0.000000	 -0.000000	diff=9.55325e-11
 -0.000000	 -0.000000	diff=2.53747e-13
  local_diff=0.000257087
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.8438e-09
  0.000000	  0.000000	diff=6.60538e-20
  0.000000	  0.000000	diff=7.84351e-21
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.22368e-08
  0.000000	  0.000000	diff=5.80066e-09
  0.000000	  0.000000	diff=2.90095e-53
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.00612e-10
  0.000000	  0.000000	diff=4.25713e-20
  0.000000	 -0.000000	diff=1.58485e-21
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=9.04999e-09
 -0.000000	 -0.000000	diff=1.79588e-13
  0.000000	 -0.000000	diff=4.91562e-53
  0.000000	 -0.000000	diff=3.51855e-63
  0.000000	 -0.000000	diff=3.04511e-18
  0.000000	 -0.000000	diff=1.17092e-36
  0.000000	 -0.000000	diff=2.28769e-30
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.01836e-18
  0.000000	 -0.000000	diff=7.90179e-21
  0.000000	 -0.000000	diff=5.15549e-85
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.62986e-18
  0.000000	  0.000000	diff=1.52167e-36
  0.000000	  0.000000	diff=2.73768e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.68602e-18
  0.000000	  0.000000	diff=3.30789e-21
  0.000000	  0.000000	diff=6.69984e-85
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.72445e-51
  0.000000	  0.000000	diff=4.08275e-37
  0.000000	 -0.000000	diff=8.5963e-26
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=8.76291e-26
  0.000000	  0.000000	diff=4.44014e-33
  0.000000	  0.000000	diff=2.48029e-65
  0.000000	 -0.000000	diff=3.38679e-64
  0.000000	  0.000000	diff=1.79091e-26
  0.000000	  0.000000	diff=3.96354e-41
  0.000000	 -0.000000	diff=8.20729e-37
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.95143e-26
  0.000000	  0.000000	diff=1.24571e-22
  0.000000	  0.000000	diff=2.11743e-83
  0.000000	 -0.000000	diff=8.82269e-83
  local_diff=3.9732e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=3.56574e-17
  0.000000	 -0.000000	diff=9.58074e-18
  0.000000	 -0.000000	diff=1.87329e-19
  0.000000	 -0.000000	diff=6.38997e-19
  0.000000	  0.000000	diff=2.45419e-17
  0.000000	 -0.000000	diff=1.20626e-17
  0.000000	  0.000000	diff=5.85818e-13
  0.000000	  0.000000	diff=8.52086e-13
  0.000000	 -0.000000	diff=5.80114e-19
  0.000000	 -0.000000	diff=5.98519e-18
  0.000000	  0.000000	diff=5.94903e-23
  0.000000	  0.000000	diff=4.88193e-23
  0.000000	 -0.000000	diff=8.32051e-19
  0.000000	 -0.000000	diff=7.64317e-18
 -0.000000	 -0.000000	diff=2.71353e-13
 -0.000000	 -0.000000	diff=4.79567e-13
 -0.000060	 -0.000060	diff=1.13329e-08
 -0.000010	 -0.000010	diff=1.91944e-09
 -0.000041	 -0.000041	diff=7.85678e-09
  0.000164	  0.000164	diff=2.75008e-08
 -0.000001	 -0.000001	diff=1.67537e-10
  0.000004	  0.000004	diff=6.97502e-10
 -0.000000	 -0.000000	diff=2.78683e-11
  0.001613	  0.001614	diff=8.43897e-07
  0.001181	  0.001177	diff=4.31122e-06
  0.000192	  0.000193	diff=7.26157e-07
  0.000809	  0.000806	diff=2.98892e-06
 -0.003190	 -0.003200	diff=1.04156e-05
  0.000017	  0.000017	diff=6.32407e-08
 -0.000071	 -0.000071	diff=2.64007e-07
  0.000000	  0.000000	diff=4.05702e-11
 -0.031767	 -0.031444	diff=0.00032264
  local_diff=0.000342302
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003537	 -0.003599	diff=6.21049e-05
  0.000000	 -0.000000	diff=4.88283e-17
  0.000000	  0.000000	diff=7.98032e-09
  0.000000	  0.000000	diff=4.13408e-23
  local_diff=6.21129e-05
# W_emb_tgt, [2 4]
 -0.000000	 -0.000000	diff=8.95706e-09
  0.000000	  0.000000	diff=5.66152e-16
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.63368e-14
  0.000000	  0.000000	diff=5.20232e-22
  0.000000	  0.000000	diff=2.24885e-08
 -0.000001	 -0.000001	diff=3.5697e-08
  local_diff=6.71427e-08
# W_a, [2 2]
 -0.000021	 -0.000021	diff=3.70089e-10
 -0.000521	 -0.000521	diff=1.71619e-08
  0.000288	  0.000288	diff=7.68791e-08
  0.007194	  0.007197	diff=3.43123e-06
  local_diff=3.52564e-06
# W_h, [2 4]
 -0.001058	 -0.001056	diff=1.41846e-06
 -0.021041	 -0.021013	diff=2.80146e-05
  0.003438	  0.003453	diff=1.51023e-05
  0.068412	  0.068710	diff=0.000298424
 -0.000042	 -0.000042	diff=1.01615e-09
 -0.000860	 -0.000860	diff=4.58733e-08
  0.000597	  0.000597	diff=4.51913e-07
  0.011855	  0.011864	diff=8.91774e-06
  local_diff=0.000352376
# W_soft, [4 2]
  0.000034	  0.000034	diff=1.69184e-07
  0.996541	  0.996539	diff=1.68627e-06
 -0.996574	 -0.996576	diff=1.5133e-06
  0.000003	  0.000003	diff=1.50324e-08
  0.000034	  0.000034	diff=1.69393e-07
  0.989316	  0.989314	diff=1.68673e-06
 -0.989349	 -0.989351	diff=1.51355e-06
  0.000003	  0.000003	diff=1.50438e-08
  local_diff=6.76852e-06
# Num params=180, abs_diff=0.00103182
Elapsed time is 2.161467 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 v_a=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000001	  0.000001	diff=7.71111e-09
  0.000158	 -0.000005	diff=0.000163181
  0.000000	  0.000000	diff=1.93104e-11
  0.000006	  0.000006	diff=3.36581e-08
 -0.001355	 -0.001346	diff=9.21503e-06
 -0.000001	 -0.000001	diff=3.75515e-08
 -0.000000	 -0.000000	diff=2.01904e-09
  0.000060	  0.000060	diff=5.64828e-07
  0.000000	  0.000000	diff=5.10438e-09
 -0.000194	 -0.000000	diff=0.000193484
  0.000000	  0.000000	diff=1.4879e-33
  0.000000	 -0.000000	diff=1.14678e-25
  0.000000	 -0.000000	diff=6.28577e-30
  0.000000	 -0.000000	diff=2.29507e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.10326e-09
  0.000003	  0.000003	diff=1.08596e-08
  0.000000	  0.000000	diff=6.13123e-12
 -0.000004	 -0.000004	diff=1.2986e-08
  0.000962	  0.000963	diff=1.24815e-06
  0.000007	  0.000007	diff=2.70073e-08
  0.000000	  0.000000	diff=2.92672e-13
  0.000000	  0.000000	diff=5.82397e-11
 -0.000000	 -0.000000	diff=5.47623e-13
 -0.000000	 -0.000000	diff=7.6165e-13
 -0.000000	 -0.000000	diff=5.50316e-13
  0.000000	  0.000000	diff=2.0178e-13
 -0.000002	 -0.000002	diff=1.19224e-09
 -0.000000	 -0.000000	diff=2.50214e-11
  0.000000	  0.000000	diff=2.46577e-13
  0.000000	  0.000000	diff=5.68236e-13
  local_diff=0.000367833
# W_src{2}, [8 4]
 -0.000045	 -0.000045	diff=1.87212e-07
 -0.000309	 -0.000308	diff=1.2531e-06
 -0.000002	 -0.000002	diff=5.37233e-09
 -0.000001	 -0.000001	diff=3.91209e-09
 -0.003418	 -0.003401	diff=1.61501e-05
 -0.001512	 -0.001510	diff=2.10921e-06
  0.000063	  0.000064	diff=5.14387e-07
 -0.000000	 -0.000000	diff=2.42587e-11
  0.000000	 -0.000000	diff=1.88493e-38
  0.000000	  0.000000	diff=1.17096e-37
  0.000000	  0.000000	diff=7.70299e-39
  0.000000	  0.000000	diff=4.5087e-38
  0.000000	 -0.000000	diff=1.2678e-38
  0.000000	  0.000000	diff=1.78807e-37
  0.000000	 -0.000000	diff=8.80711e-19
  0.000000	  0.000000	diff=9.66699e-19
 -0.000026	 -0.000026	diff=8.6516e-08
 -0.000268	 -0.000267	diff=1.02299e-06
 -0.000000	 -0.000000	diff=1.48921e-10
 -0.000001	 -0.000001	diff=2.85365e-09
 -0.000216	 -0.000216	diff=6.9323e-07
 -0.000041	 -0.000041	diff=3.07332e-08
  0.000059	  0.000059	diff=4.43512e-07
 -0.000000	 -0.000000	diff=1.60273e-11
  0.000007	  0.000007	diff=6.92439e-09
  0.000095	  0.000095	diff=1.44847e-07
  0.000002	  0.000002	diff=5.79726e-09
  0.000000	  0.000000	diff=9.01186e-10
  0.003121	  0.003139	diff=1.77592e-05
  0.001323	  0.001323	diff=7.59726e-09
 -0.000017	 -0.000017	diff=3.48392e-08
  0.000000	  0.000000	diff=1.45749e-12
  local_diff=4.04634e-05
# W_tgt{1}, [8 6]
 -0.000001	 -0.000001	diff=4.19872e-09
  0.000000	 -0.000000	diff=5.93927e-20
  0.000000	  0.000000	diff=3.33753e-12
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.0626e-08
 -0.000000	 -0.000000	diff=7.51526e-13
  0.000000	  0.000000	diff=5.90485e-53
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.82159e-09
  0.000000	  0.000000	diff=5.28357e-13
  0.000000	  0.000000	diff=9.76005e-13
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=2.06035e-08
  0.000000	  0.000000	diff=9.75154e-13
  0.000000	 -0.000000	diff=1.00057e-52
 -0.000000	 -0.000000	diff=3.08413e-13
  0.000000	  0.000000	diff=1.07353e-12
  0.000000	  0.000000	diff=5.10656e-13
 -0.000000	 -0.000000	diff=6.21694e-13
  0.000000	  0.000000	diff=5.61926e-14
 -0.000000	 -0.000000	diff=4.56229e-13
  0.000000	  0.000000	diff=5.90052e-13
 -0.000000	 -0.000001	diff=4.99793e-07
  0.000003	  0.000002	diff=1.07353e-06
  0.000000	  0.000000	diff=1.51555e-12
 -0.000000	 -0.000000	diff=1.12705e-12
 -0.000000	 -0.000000	diff=9.86106e-14
 -0.000000	 -0.000000	diff=3.93558e-13
 -0.000000	 -0.000000	diff=5.81601e-13
 -0.000000	 -0.000000	diff=8.41935e-13
  0.000003	  0.000005	diff=1.97835e-06
 -0.000013	 -0.000009	diff=4.20626e-06
 -0.000002	 -0.000002	diff=5.18708e-09
  0.000000	  0.000000	diff=2.5367e-15
 -0.000002	 -0.000002	diff=7.16958e-09
  0.000000	  0.000000	diff=4.09434e-13
 -0.000001	 -0.000001	diff=2.78134e-09
 -0.000000	 -0.000000	diff=2.31839e-13
 -0.000000	 -0.000000	diff=1.18494e-11
  0.000000	  0.000000	diff=6.94714e-12
 -0.000000	 -0.000000	diff=7.18298e-12
  0.000000	  0.000000	diff=1.45839e-13
 -0.000000	 -0.000000	diff=1.12771e-11
  0.000000	  0.000000	diff=5.36816e-13
 -0.000000	 -0.000000	diff=5.2539e-12
  0.000000	  0.000000	diff=1.83226e-13
 -0.000000	 -0.000000	diff=6.84446e-08
  0.000000	  0.000000	diff=1.46927e-07
  local_diff=8.06576e-06
# W_tgt{2}, [8 4]
  0.000109	  0.000109	diff=4.31145e-08
 -0.000000	 -0.000000	diff=4.7707e-11
 -0.000000	 -0.000000	diff=6.42872e-11
  0.000000	  0.000000	diff=1.58615e-10
 -0.000005	 -0.000005	diff=2.3855e-08
  0.000001	  0.000001	diff=2.94526e-09
  0.000001	  0.000002	diff=2.03539e-07
 -0.000003	 -0.000003	diff=4.37609e-08
 -0.000000	 -0.000000	diff=2.96047e-13
  0.000000	  0.000000	diff=1.01176e-13
 -0.000000	 -0.000000	diff=3.24934e-13
  0.000000	  0.000000	diff=8.44173e-14
 -0.000000	 -0.000000	diff=8.03062e-14
  0.000000	  0.000000	diff=1.66716e-13
  0.000000	  0.000005	diff=4.31779e-06
 -0.000013	 -0.000010	diff=2.86293e-06
  0.000084	  0.000084	diff=3.69071e-09
 -0.000000	 -0.000000	diff=2.59601e-11
 -0.000000	 -0.000000	diff=3.47241e-11
  0.000000	  0.000000	diff=8.59228e-11
 -0.000004	 -0.000004	diff=1.5838e-08
  0.000000	  0.000000	diff=1.59444e-09
 -0.000000	 -0.000000	diff=3.63246e-09
  0.000000	  0.000000	diff=7.87449e-10
 -0.000023	 -0.000023	diff=2.54425e-09
  0.000000	  0.000000	diff=2.3192e-12
  0.000000	  0.000000	diff=3.88335e-12
 -0.000000	 -0.000000	diff=9.60237e-12
  0.000001	  0.000001	diff=9.86622e-10
 -0.000000	 -0.000000	diff=1.7678e-10
 -0.000000	 -0.000000	diff=3.09203e-08
  0.000000	  0.000000	diff=7.02617e-09
  local_diff=7.56557e-06
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003808	 -0.003702	diff=0.000105797
  0.000000	  0.000000	diff=4.23686e-17
  0.000276	  0.000000	diff=0.000276148
  0.000319	  0.000000	diff=0.000318753
  local_diff=0.000700698
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=8.73261e-16
 -0.000000	 -0.000000	diff=6.5708e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.21566e-20
  0.000000	 -0.000000	diff=9.68362e-16
  0.000001	  0.000001	diff=5.11986e-08
 -0.000001	 -0.000001	diff=8.12716e-08
  local_diff=1.32471e-07
# W_a, [2 2]
  0.000132	  0.000126	diff=5.62188e-06
 -0.000165	 -0.000164	diff=1.35735e-06
 -0.000000	 -0.000000	diff=4.68953e-13
  0.000000	  0.000000	diff=4.85336e-13
  local_diff=6.97923e-06
# v_a, [1 2]
 -0.004163	 -0.004146	diff=1.76561e-05
 -0.000435	 -0.000435	diff=2.00205e-07
  local_diff=1.78563e-05
# W_h, [2 4]
 -0.000004	 -0.000004	diff=1.4079e-08
  0.003128	  0.003139	diff=1.05677e-05
  0.000006	  0.000006	diff=3.00859e-08
 -0.004576	 -0.004553	diff=2.23587e-05
 -0.000010	 -0.000011	diff=7.87962e-07
  0.008809	  0.008893	diff=8.43632e-05
 -0.000002	 -0.000007	diff=5.38299e-06
  0.000011	  0.000006	diff=4.7819e-06
  local_diff=0.000128287
# W_soft, [4 2]
 -0.009588	 -0.009636	diff=4.78789e-05
 -0.002234	 -0.005573	diff=0.00333881
  0.992061	  0.992021	diff=3.96587e-05
 -0.973438	 -0.976813	diff=0.00337457
 -0.009596	 -0.009644	diff=4.77818e-05
 -0.002327	 -0.005659	diff=0.00333203
  0.991124	  0.991085	diff=3.95783e-05
 -0.972414	 -0.975781	diff=0.00336772
  local_diff=0.013588
# Num params=182, abs_diff=0.0148659
Elapsed time is 2.125514 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 290, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=16 W_emb_tgt=16 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 290
  src input 1: z x xy xz
  src mask: 1  1  1  1
  tgt input 1: <s> ac ac </s> </s>
  tgt output 1: ac ac </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.198079	  0.198794	diff=0.000715218
-10.547576	-10.711287	diff=0.163711
  0.000524	  0.000643	diff=0.000119372
  7.044050	  6.981231	diff=0.0628189
  2.763550	  2.738548	diff=0.025002
 -3.479404	 -3.499642	diff=0.0202383
 -0.075939	 -0.075372	diff=0.000567311
 16.583610	 16.367237	diff=0.216373
  0.000000	 -0.000000	diff=6.80241e-13
  0.000000	  0.000000	diff=3.39032e-10
 -0.004776	 -0.004627	diff=0.000148888
 -0.000000	 -0.000000	diff=2.34811e-10
  0.000000	  0.000000	diff=4.83786e-15
  0.000000	 -0.000000	diff=4.02747e-14
  0.000000	 -0.000000	diff=1.34332e-50
  0.000000	  0.000000	diff=3.01396e-48
 -0.021560	 -0.021558	diff=2.19411e-06
  9.421788	  9.303292	diff=0.118496
 -0.000556	 -0.000556	diff=7.26359e-08
 -6.087674	 -6.137969	diff=0.0502949
  3.854830	  3.732466	diff=0.122364
  2.959246	  2.943263	diff=0.0159829
  0.000037	  0.000037	diff=1.24991e-07
 -0.850681	 -0.854953	diff=0.00427209
 -0.020194	 -0.020178	diff=1.60335e-05
  0.042935	  0.042886	diff=4.88371e-05
 -0.000649	 -0.000649	diff=2.09072e-07
  0.021783	  0.021774	diff=8.48641e-06
 -1.831084	 -1.832197	diff=0.00111265
  0.019305	  0.019287	diff=1.75832e-05
  0.000018	  0.000018	diff=2.85492e-08
 -0.372005	 -0.372822	diff=0.000817045
  local_diff=0.803126
# W_src{2}, [8 4]
 -3.107971	 -3.086447	diff=0.021524
 -2.786913	 -2.788694	diff=0.00178115
 -0.838679	 -0.837008	diff=0.00167165
  0.016153	  0.016219	diff=6.60083e-05
  1.188852	  1.203212	diff=0.0143595
 -2.968216	 -2.962513	diff=0.00570298
  0.580404	  0.582607	diff=0.00220314
 -0.003450	 -0.003436	diff=1.35124e-05
 -0.038039	 -0.038024	diff=1.47997e-05
 -0.964742	 -0.964875	diff=0.000132536
 -0.362571	 -0.362260	diff=0.000311098
 -0.002015	 -0.002016	diff=1.24935e-06
  0.185086	  0.185004	diff=8.19974e-05
 -0.344368	 -0.344790	diff=0.000422079
  0.249309	  0.249710	diff=0.000400325
 -0.001180	 -0.001179	diff=1.44785e-06
  1.502846	  1.512717	diff=0.0098712
 -6.379711	 -6.400866	diff=0.0211553
 -1.196401	 -1.192106	diff=0.00429581
  0.050387	  0.050411	diff=2.45031e-05
  6.900821	  6.896645	diff=0.0041761
 -0.039341	 -0.039372	diff=3.06148e-05
  0.330818	  0.331748	diff=0.000929877
  0.011287	  0.011270	diff=1.66727e-05
 -0.169806	 -0.169661	diff=0.000144507
  1.093694	  1.093846	diff=0.00015245
  2.338732	  2.355773	diff=0.0170417
  0.016703	  0.016631	diff=7.21474e-05
 -1.006079	 -1.007207	diff=0.00112827
  1.700761	  1.691629	diff=0.00913282
 -4.787089	 -4.618767	diff=0.168322
  0.000191	  0.000201	diff=9.77181e-06
  local_diff=0.285192
# W_tgt{1}, [8 6]
  0.228690	  0.229090	diff=0.000400548
  0.637766	  0.634579	diff=0.00318667
 -0.913893	 -0.912574	diff=0.0013187
 -0.021825	 -0.021844	diff=1.8483e-05
 10.932199	 10.997146	diff=0.0649472
 -0.685884	 -0.679954	diff=0.00593034
 -0.000163	 -0.000172	diff=9.54649e-06
 -2.728310	 -2.742542	diff=0.0142315
  0.003556	  0.003771	diff=0.000215198
  3.353947	  3.279305	diff=0.074642
 -1.060054	 -1.055342	diff=0.00471238
 -0.021743	 -0.021807	diff=6.44189e-05
  9.726307	  9.781238	diff=0.0549313
  4.571903	  4.476081	diff=0.0958216
 -0.005382	 -0.005388	diff=6.23026e-06
 -3.251187	 -3.349938	diff=0.0987509
 -0.817084	 -0.815699	diff=0.00138572
  0.307720	  0.286958	diff=0.0207616
 -0.039370	 -0.038996	diff=0.000373826
 -0.033309	 -0.033365	diff=5.57671e-05
  0.446619	  0.447836	diff=0.00121739
  0.935585	  0.952518	diff=0.0169338
 -0.004762	 -0.004739	diff=2.31453e-05
  1.589983	  1.582292	diff=0.0076906
  0.024625	  0.024413	diff=0.00021223
  0.307325	  0.286578	diff=0.0207477
 -0.443074	 -0.441814	diff=0.0012595
 -0.125571	 -0.126030	diff=0.000459477
  0.447339	  0.448389	diff=0.00105024
  0.492271	  0.499618	diff=0.00734783
 -0.012217	 -0.012083	diff=0.000133528
 -0.522159	 -0.527470	diff=0.00531086
 -0.000397	 -0.000395	diff=1.99626e-06
  1.555014	  1.537859	diff=0.0171548
 -0.002334	 -0.002246	diff=8.83554e-05
  0.002244	  0.002241	diff=2.55946e-06
 -0.180134	 -0.179102	diff=0.00103198
  2.379195	  2.390353	diff=0.011158
  0.000041	  0.000041	diff=5.10817e-09
 -0.987209	 -0.996709	diff=0.00949961
 -0.428473	 -0.428533	diff=6.024e-05
  0.557701	  0.557311	diff=0.000389802
  0.065455	  0.065638	diff=0.000183285
  0.049316	  0.049238	diff=7.79386e-05
 -0.104927	 -0.104811	diff=0.000116137
  0.766788	  0.765587	diff=0.00120131
  0.004183	  0.004208	diff=2.49117e-05
  0.960391	  0.950800	diff=0.0095903
  local_diff=0.554731
# W_tgt{2}, [8 4]
 -3.674474	 -3.644557	diff=0.0299174
 -2.872547	 -2.858555	diff=0.0139926
 -0.878494	 -0.873002	diff=0.00549253
  0.003073	  0.002945	diff=0.00012819
 -0.376148	 -0.376064	diff=8.382e-05
  2.800526	  2.880983	diff=0.0804571
 -0.456156	 -0.456357	diff=0.000200283
 -1.501624	 -1.519950	diff=0.0183261
 -0.032592	 -0.031904	diff=0.000687565
  0.152460	  0.162522	diff=0.0100621
  1.011701	  1.019159	diff=0.00745781
 -0.299578	 -0.299850	diff=0.000271758
 -9.913930	 -9.922414	diff=0.00848397
 -0.648150	 -0.641513	diff=0.00663649
  6.383881	  6.812135	diff=0.428254
 -0.198596	 -0.199292	diff=0.000695495
  3.208152	  3.201810	diff=0.00634247
 -0.017482	 -0.017571	diff=8.9166e-05
 -3.665883	 -3.665498	diff=0.00038514
 -0.004038	 -0.004051	diff=1.26677e-05
-17.411643	-17.657039	diff=0.245395
 -2.102143	 -2.070416	diff=0.0317276
  2.812190	  2.806988	diff=0.00520168
  0.723590	  0.720065	diff=0.00352457
 -0.417166	 -0.417249	diff=8.30729e-05
  0.127520	  0.127851	diff=0.000330943
  0.380697	  0.381681	diff=0.00098333
 -0.257799	 -0.258456	diff=0.000656097
  1.795942	  1.793904	diff=0.00203751
  1.471641	  1.475995	diff=0.00435452
 -0.666013	 -0.666914	diff=0.000900598
 -0.102846	 -0.103429	diff=0.000583043
  local_diff=0.913754
# W_emb_src, [2 8]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.0105e-08
 -0.000000	 -0.000000	diff=8.49639e-09
 -0.005764	 -0.005549	diff=0.00021501
 -0.005274	 -0.005093	diff=0.000180781
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.000395809
# W_emb_tgt, [2 8]
-28.933871	-34.746557	diff=5.81269
 -6.430204	 -7.051598	diff=0.621394
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -3.242915	 -4.233268	diff=0.990353
  4.484965	  4.485285	diff=0.000320369
-10.918118	-10.871481	diff=0.0466374
 12.004756	 12.085975	diff=0.0812189
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=7.55261
# W_src_char{1}, [8 4]
 -0.405840	 -0.392033	diff=0.013807
 -0.000000	 -0.000000	diff=2.65522e-10
 -0.000028	 -0.000028	diff=3.25024e-08
 -0.000000	 -0.000000	diff=8.41766e-12
 -0.000000	 -0.000000	diff=3.7328e-12
  0.000000	  0.000000	diff=1.9463e-12
 -0.000001	 -0.000001	diff=1.36431e-09
  0.000000	  0.000000	diff=5.03034e-15
 -0.223128	 -0.219256	diff=0.00387257
  0.000000	  0.000000	diff=1.71678e-09
  0.000192	  0.000190	diff=1.50391e-06
  0.000000	  0.000000	diff=3.53064e-12
  0.000000	  0.000000	diff=8.00674e-11
  0.000000	  0.000000	diff=1.15852e-12
  0.000004	  0.000004	diff=6.59483e-08
  0.000000	 -0.000000	diff=3.46771e-14
  0.000000	  0.000000	diff=3.44026e-13
  0.000000	 -0.000000	diff=1.76457e-17
 -0.000000	 -0.000000	diff=6.56667e-12
  0.000000	  0.000000	diff=6.34957e-22
  0.000000	 -0.000000	diff=1.36923e-15
  0.000000	  0.000000	diff=1.6893e-25
  0.000000	  0.000000	diff=7.08141e-18
  0.000000	 -0.000000	diff=5.90287e-26
  0.000000	  0.000000	diff=4.4199e-12
  0.000000	 -0.000000	diff=1.40022e-15
 -0.000000	 -0.000000	diff=5.58883e-12
  0.000000	 -0.000000	diff=3.51829e-20
  0.000000	  0.000000	diff=7.5362e-15
  0.000000	 -0.000000	diff=1.06568e-23
  0.000000	 -0.000000	diff=3.9238e-16
  0.000000	  0.000000	diff=3.27078e-24
  local_diff=0.0176811
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.09061e-09
  0.000000	  0.000000	diff=9.39748e-10
 -0.118102	 -0.117015	diff=0.00108716
  0.256479	  0.261860	diff=0.00538083
 -0.003703	 -0.003688	diff=1.48682e-05
  0.005881	  0.006043	diff=0.000162465
 -0.008223	 -0.008123	diff=9.99704e-05
  0.017691	  0.018178	diff=0.000487694
  local_diff=0.00723299
# W_tgt_char{1}, [8 4]
  0.000000	  0.000000	diff=1.51718e-11
 -0.000000	 -0.000000	diff=9.99697e-09
 -0.000002	 -0.000001	diff=6.71099e-08
  0.000000	  0.000000	diff=6.47259e-10
  0.037666	  0.039220	diff=0.00155401
  0.000000	 -0.000000	diff=2.87005e-13
  0.000000	  0.000000	diff=1.85469e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.27582e-10
 -0.000000	 -0.000000	diff=6.40659e-10
 -0.000000	 -0.000000	diff=4.99893e-09
  0.000000	  0.000000	diff=4.42505e-11
  0.010530	  0.010647	diff=0.000116797
  0.000000	 -0.000000	diff=7.27666e-14
  0.000000	  0.000000	diff=1.46105e-10
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.52734e-27
  0.000000	  0.000000	diff=1.50262e-10
 -0.000000	 -0.000000	diff=2.00292e-10
  0.000000	  0.000000	diff=5.77832e-12
  0.003675	  0.003690	diff=1.40968e-05
  0.000000	  0.000000	diff=3.04501e-14
  0.000000	  0.000000	diff=1.52201e-15
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.62079e-27
  0.000000	  0.000000	diff=1.56134e-10
 -0.000000	 -0.000000	diff=2.15411e-10
 -0.000000	 -0.000000	diff=6.72675e-12
 -0.003704	 -0.003690	diff=1.41691e-05
  0.000000	  0.000000	diff=3.15592e-14
  0.000000	 -0.000000	diff=1.28275e-15
  0.000000	  0.000000	diff=0
  local_diff=0.00169916
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.001077	 -0.001076	diff=1.20277e-06
  0.038433	  0.040053	diff=0.00161967
  0.000000	  0.000000	diff=3.50474e-10
 -0.000000	 -0.000000	diff=3.21793e-11
 -0.000000	 -0.000000	diff=3.04001e-10
 -0.000001	 -0.000001	diff=6.34547e-08
  0.000000	 -0.000000	diff=4.36923e-13
  0.000000	  0.000000	diff=6.26994e-13
  local_diff=0.00162094
# W_pos, [2 2]
 -0.949869	 -0.944673	diff=0.00519564
 -0.219079	 -0.218121	diff=0.000958867
  1.078282	  1.033391	diff=0.0448911
 -0.132135	 -0.131303	diff=0.000831991
  local_diff=0.0518776
# v_pos, [1 2]
 -0.705766	 -0.700152	diff=0.00561451
  0.800787	  0.812379	diff=0.011592
  local_diff=0.0172065
# W_h, [2 4]
 -4.326865	 -4.353125	diff=0.0262593
-10.343959	-10.319093	diff=0.0248657
 -0.324282	 -0.325339	diff=0.00105728
 11.758236	 11.771238	diff=0.0130015
 -1.995811	 -1.999017	diff=0.00320513
 -3.926179	 -3.872265	diff=0.0539139
  5.506568	  5.521598	diff=0.0150299
  3.167594	  3.197097	diff=0.0295027
  local_diff=0.166835
# W_soft, [8 2]
  3.170784	  3.170617	diff=0.000166533
  9.182460	  9.182400	diff=6.0476e-05
  2.647897	  2.647864	diff=3.22856e-05
 -6.617619	 -6.618243	diff=0.000624357
 -0.047307	 -0.054627	diff=0.00732034
 -7.252153	 -7.259967	diff=0.00781417
  0.221974	  0.221942	diff=3.17468e-05
 -1.289927	 -1.289986	diff=5.83205e-05
  5.838613	  5.837490	diff=0.00112314
  1.814651	  1.814564	diff=8.72008e-05
 -0.463120	 -0.463168	diff=4.75093e-05
  8.707752	  8.706416	diff=0.00133639
 -0.971519	 -0.978120	diff=0.00660123
-11.255063	-11.261970	diff=0.00690653
 -1.640136	 -1.640178	diff=4.13602e-05
 -2.014971	 -2.015034	diff=6.27761e-05
  local_diff=0.0323144
# Num params=290, abs_diff=10.4063
Elapsed time is 5.764012 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 418, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=16 W_emb_tgt=16 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 418
  src input 1: x xy xy xy
  src mask: 1  1  1  1
  tgt input 1: <s> b c ab a
  tgt output 1: b c ab a </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  1.570423	  1.508521	diff=0.0619024
 -1.055616	 -0.986375	diff=0.0692411
  0.289483	  0.289418	diff=6.49745e-05
 -0.000140	 -0.000140	diff=2.9585e-08
  1.277767	  1.216736	diff=0.0610308
 -1.819969	 -1.790304	diff=0.0296652
  5.345025	  2.724161	diff=2.62086
  4.048542	  0.453755	diff=3.59479
 -6.437927	 -6.368463	diff=0.0694634
  4.330014	  4.282117	diff=0.0478976
 -1.232364	 -1.233556	diff=0.00119204
  0.000604	  0.000605	diff=5.43398e-07
 -5.174951	 -5.098751	diff=0.0762
  7.701151	  7.740135	diff=0.0389843
-11.009265	 -8.141162	diff=2.8681
 -8.871994	 -4.911808	diff=3.96019
 -6.716755	 -6.729987	diff=0.0132318
 -0.180458	 -0.180842	diff=0.000384379
 -4.317272	 -4.327365	diff=0.0100936
  0.004676	  0.004684	diff=8.79214e-06
 -5.190707	 -5.202695	diff=0.0119883
 -0.829246	 -0.827878	diff=0.00136722
 -0.110111	 -0.110632	diff=0.000521045
 -0.036159	 -0.036283	diff=0.000124252
  3.140254	  3.136920	diff=0.00333335
  0.120594	  0.120417	diff=0.000177694
  2.612946	  2.608878	diff=0.0040683
 -0.005197	 -0.005188	diff=8.59534e-06
  2.391959	  2.388999	diff=0.0029601
  0.476541	  0.477104	diff=0.000563704
  0.074849	  0.074600	diff=0.000248942
 -0.002141	 -0.002141	diff=6.03632e-07
  local_diff=13.5487
# W_src{2}, [8 4]
 22.383727	 22.993802	diff=0.610075
  2.175811	  1.277325	diff=0.898486
  0.124587	  0.124256	diff=0.000331171
  0.039667	  0.039783	diff=0.000116433
  0.547909	  1.202780	diff=0.654872
  0.185234	 -0.693643	diff=0.878877
-12.203392	 -0.837182	diff=11.3662
 -8.500314	  3.510853	diff=12.0112
 -1.423106	 -1.985746	diff=0.56264
 -0.661272	  0.051908	diff=0.71318
  0.006287	  0.006286	diff=8.4384e-07
  0.001756	  0.001757	diff=2.45229e-07
  0.690760	  0.173725	diff=0.517035
 -0.853020	 -0.152456	diff=0.700565
  9.815185	  0.828216	diff=8.98697
  6.724844	 -2.790747	diff=9.51559
  3.879697	  3.876086	diff=0.00361088
  0.386671	  0.386388	diff=0.000282562
  0.037142	  0.037116	diff=2.66131e-05
  0.010099	  0.010106	diff=7.00556e-06
  0.366778	  0.366989	diff=0.000210913
 -0.165963	 -0.165848	diff=0.000115156
  0.077938	  0.078050	diff=0.000111619
 -0.001596	 -0.001593	diff=2.30848e-06
 -0.119352	 -0.119352	diff=1.0471e-07
 -0.010982	 -0.010982	diff=2.56179e-07
 -0.001097	 -0.001097	diff=2.6491e-08
 -0.000292	 -0.000292	diff=6.79559e-09
 -0.010769	 -0.010769	diff=2.34597e-07
  0.004949	  0.004949	diff=2.15962e-07
 -0.002219	 -0.002219	diff=8.94876e-08
  0.000033	  0.000033	diff=1.84044e-09
  local_diff=47.4205
# W_tgt{1}, [8 6]
 -0.948528	 -0.954054	diff=0.00552586
 12.571131	  3.357502	diff=9.21363
  0.289849	  0.283723	diff=0.00612593
  0.022760	  0.027627	diff=0.00486749
 -3.138138	 -3.198791	diff=0.0606526
 -1.710470	 -5.455860	diff=3.74539
  0.333387	  0.332352	diff=0.00103504
 -0.957749	 -2.227541	diff=1.26979
 -1.080912	 -1.089126	diff=0.0082147
 58.370879	 13.070257	diff=45.3006
  0.186405	  0.181320	diff=0.00508482
 -1.361522	 -1.335040	diff=0.0264819
 -5.019165	 -5.146356	diff=0.127191
-14.738671	-31.770552	diff=17.0319
 -0.573857	 -0.569842	diff=0.00401464
 -9.885441	-16.015693	diff=6.13025
  0.143136	  0.143104	diff=3.22538e-05
  0.030864	  0.031306	diff=0.000441657
 -0.080313	 -0.080383	diff=6.99858e-05
 -0.554979	 -0.554631	diff=0.000347534
 -2.463577	 -2.471354	diff=0.00777651
 -0.065361	 -0.065282	diff=7.87249e-05
 -0.205563	 -0.204310	diff=0.0012537
  1.198536	  1.198454	diff=8.21498e-05
  0.433130	  0.432518	diff=0.000612493
 -0.190366	 -0.190563	diff=0.00019682
 -0.418015	 -0.420239	diff=0.00222384
 -4.271788	 -4.239327	diff=0.0324609
 -4.684420	 -4.958500	diff=0.27408
 -0.497141	 -0.498406	diff=0.00126453
 -0.260089	 -0.259669	diff=0.000419414
  0.801663	  0.797063	diff=0.00459989
  0.002258	  0.002204	diff=5.42349e-05
 -3.320641	 -2.984823	diff=0.335819
  0.094100	  0.093886	diff=0.000214056
  3.438164	  3.456971	diff=0.0188066
  7.365809	  7.346205	diff=0.0196032
 12.829059	 13.329310	diff=0.500251
 -0.002224	 -0.002224	diff=5.60726e-07
 -0.041365	 -0.003703	diff=0.0376623
 -0.021652	 -0.021660	diff=7.92662e-06
  2.321376	  2.090147	diff=0.231229
  0.049990	  0.050005	diff=1.44501e-05
  0.838980	  0.840035	diff=0.00105523
  4.017214	  4.019245	diff=0.00203097
 -9.212730	 -9.075515	diff=0.137215
  0.045013	  0.045054	diff=4.04049e-05
 -0.045288	 -0.075217	diff=0.0299292
  local_diff=84.5806
# W_tgt{2}, [8 4]
-16.786480	-16.784690	diff=0.00178987
 -0.247881	 -0.249922	diff=0.00204087
  0.007748	  0.007764	diff=1.6755e-05
  0.056853	  0.056749	diff=0.000103916
 -4.318490	 -4.329819	diff=0.0113284
 -1.664009	 -1.651594	diff=0.012415
  1.144174	  1.048750	diff=0.0954236
 -2.358599	 -2.367734	diff=0.0091352
 -1.427265	 -1.436695	diff=0.0094299
 -1.767920	 -1.767478	diff=0.000441801
 -0.122608	 -0.122415	diff=0.000192999
 -0.162477	 -0.163083	diff=0.000605446
 -4.565817	 -4.572174	diff=0.00635773
 -6.261562	 -6.259739	diff=0.00182344
  3.736765	  3.266935	diff=0.46983
 -2.312027	 -2.278649	diff=0.033378
 -0.363907	 -0.346317	diff=0.0175906
  1.727921	  1.729616	diff=0.00169509
  0.497667	  0.498073	diff=0.000406515
 -0.981437	 -0.981239	diff=0.000197993
  1.533319	  1.538495	diff=0.00517601
  3.823660	  3.833218	diff=0.0095583
  8.479669	  8.403763	diff=0.0759061
 33.673561	 34.166484	diff=0.492924
 -0.175851	 -0.175642	diff=0.000208082
 -0.322669	 -0.322629	diff=3.98223e-05
 -0.390636	 -0.390604	diff=3.17433e-05
  1.045328	  1.045526	diff=0.000198167
  0.430646	  0.429934	diff=0.000711406
  0.712977	  0.713143	diff=0.00016633
-12.353221	-12.328644	diff=0.0245774
-31.857090	-31.683646	diff=0.173444
  local_diff=1.45714
# W_emb_src, [2 8]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	  0.000000	diff=4.10509e-10
 -0.000000	  0.000000	diff=4.41886e-10
  0.000009	  0.000008	diff=3.76508e-07
  0.000010	  0.000009	diff=5.02274e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=8.79634e-07
# W_emb_tgt, [2 8]
-320.040992	-177.659016	diff=142.382
-51.486164	 42.967477	diff=94.4536
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
226.221353	135.270485	diff=90.9509
-44.211391	-58.895159	diff=14.6838
  2.479765	  2.419735	diff=0.0600298
 -2.637358	 -2.709538	diff=0.0721797
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=342.602
# W_src_char{1}, [8 4]
  0.000002	  0.000001	diff=5.46604e-07
  0.000000	 -0.000000	diff=9.55177e-09
  0.000000	  0.000000	diff=9.74119e-11
  0.000000	  0.000000	diff=1.17761e-11
  0.728649	  0.322941	diff=0.405709
 -0.000417	 -0.000073	diff=0.00034328
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.05257e-27
 -0.000000	  0.000000	diff=1.08304e-07
  0.000000	  0.000000	diff=3.81162e-09
  0.000000	  0.000000	diff=1.42187e-11
  0.000000	  0.000000	diff=6.00125e-13
  0.083663	  0.037580	diff=0.0460828
 -0.000048	 -0.000009	diff=3.93091e-05
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.23088e-27
  0.000001	  0.000000	diff=3.37596e-07
 -0.000000	 -0.000000	diff=1.33716e-09
  0.000000	  0.000000	diff=3.3714e-11
  0.000000	  0.000000	diff=4.97385e-14
  0.172705	  0.077102	diff=0.0956022
 -0.000098	 -0.000018	diff=8.07007e-05
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.46232e-15
  0.000000	  0.000000	diff=3.14439e-17
  0.000000	 -0.000000	diff=1.18995e-43
  0.000000	 -0.000000	diff=5.81735e-20
  0.000000	 -0.000000	diff=1.38536e-11
  0.000000	  0.000000	diff=3.37633e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.547858
# W_src_char{2}, [8 4]
 -2.474665	  0.134275	diff=2.60894
-143.852019	-13.720145	diff=130.132
 -0.000129	 -0.000027	diff=0.000102262
  0.002246	  0.000319	diff=0.0019269
 -0.055359	 -0.001057	diff=0.0543014
 -2.832707	 -0.398672	diff=2.43404
 12.560318	 -0.689902	diff=13.2502
-41.044280	 -5.168601	diff=35.8757
  0.000014	  0.000003	diff=1.11087e-05
 -0.000001	 -0.000000	diff=1.15446e-06
  0.000000	  0.000000	diff=2.07733e-08
 -0.000000	 -0.000000	diff=3.92009e-07
  0.000011	  0.000000	diff=1.03656e-05
 -0.000001	  0.000000	diff=1.10286e-06
 -0.000149	 -0.000030	diff=0.000118647
 -0.000040	 -0.000006	diff=3.40661e-05
 12.465083	 13.791746	diff=1.32666
 -4.480224	 -3.912393	diff=0.567831
  3.846726	  4.069949	diff=0.223223
 -0.485040	 -0.343970	diff=0.14107
  8.523675	  8.718113	diff=0.194438
-10.198397	 -8.365801	diff=1.8326
-33.508123	-26.341522	diff=7.1666
  1.666762	  4.439034	diff=2.77227
 -2.405627	 -0.158457	diff=2.24717
 -1.277973	 -1.075503	diff=0.20247
  0.212537	  0.352343	diff=0.139806
  0.112955	  0.008927	diff=0.104027
 -1.912321	  0.213190	diff=2.12551
 -2.355011	 -1.995869	diff=0.359142
 20.906375	  7.009251	diff=13.8971
 10.880124	  4.280474	diff=6.59965
  local_diff=224.257
# W_src_char{3}, [8 4]
  0.260317	  0.528655	diff=0.268339
-22.390855	-11.739218	diff=10.6516
  0.893755	  0.718704	diff=0.175051
  4.786023	  4.994022	diff=0.207999
  5.601855	  3.243606	diff=2.35825
 -5.832698	 -3.053030	diff=2.77967
  1.705998	 -0.140255	diff=1.84625
 29.141625	 41.977798	diff=12.8362
  1.012729	  0.715007	diff=0.297723
 -4.458251	 -2.672763	diff=1.78549
  0.142729	  0.115703	diff=0.027026
  1.745268	  1.673603	diff=0.0716657
  3.166093	  1.852241	diff=1.31385
 -1.132786	 -0.517129	diff=0.615657
 -7.986237	 -3.747633	diff=4.2386
 16.115561	 17.563735	diff=1.44817
  1.511687	  1.260769	diff=0.250918
-14.926562	 -7.218737	diff=7.70783
  0.547189	  0.498977	diff=0.0482121
  0.723408	  0.693272	diff=0.0301359
  3.836766	  3.157823	diff=0.678943
 -4.761359	 -2.571283	diff=2.19008
 -5.104352	 -3.875611	diff=1.22874
  1.483428	  3.689708	diff=2.20628
  1.345213	  0.851518	diff=0.493695
  1.885780	  1.917671	diff=0.0318919
 -0.163125	 -0.077124	diff=0.0860006
 -2.776031	 -2.822368	diff=0.0463367
 -0.179816	  0.694247	diff=0.874064
 -0.068411	 -0.087776	diff=0.0193647
 -6.643133	 -3.800501	diff=2.84263
-24.605736	-25.239691	diff=0.633955
  local_diff=60.2906
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.55965e-11
 -0.000000	 -0.000000	diff=2.07271e-10
 -0.000000	 -0.000000	diff=8.08973e-09
 -0.000000	 -0.000000	diff=5.36566e-08
 -0.130535	 -0.058748	diff=0.0717863
 -0.843407	 -0.382670	diff=0.460737
  0.000105	  0.000014	diff=9.12466e-05
  0.000673	  0.000089	diff=0.000584001
  local_diff=0.533198
# W_tgt_char{1}, [8 4]
  0.000000	  0.000000	diff=4.36169e-12
  0.000000	  0.000000	diff=4.05046e-09
 -0.000708	 -0.000734	diff=2.62537e-05
  0.000082	  0.000083	diff=2.57021e-07
 -0.007330	 -0.007301	diff=2.93935e-05
  2.216956	  2.193184	diff=0.0237722
 -0.021447	 -0.022415	diff=0.000967708
  0.000000	  0.000000	diff=3.01683e-12
 -0.000000	 -0.000000	diff=5.49828e-12
 -0.000000	 -0.000000	diff=1.1959e-10
  0.000209	  0.000207	diff=2.13971e-06
 -0.000470	 -0.000462	diff=8.15742e-06
  0.037779	  0.038494	diff=0.000714891
-11.768597	-12.505200	diff=0.736602
 -0.043783	 -0.048108	diff=0.00432443
  0.000000	  0.000000	diff=6.60911e-12
  0.000000	 -0.000000	diff=1.71407e-16
  0.000000	  0.000000	diff=1.14868e-14
  0.000000	  0.000000	diff=5.41805e-12
  0.000000	  0.000000	diff=2.23232e-12
 -0.000000	 -0.000000	diff=3.18124e-12
  0.000017	  0.000017	diff=3.47588e-11
  0.000000	 -0.000000	diff=1.85907e-37
  0.000000	  0.000000	diff=1.9861e-31
  0.000000	  0.000000	diff=1.0086e-12
  0.000000	  0.000000	diff=2.12331e-12
  0.000028	  0.000028	diff=6.93549e-08
  0.000000	  0.000000	diff=3.67089e-10
  0.000442	  0.000443	diff=1.69978e-06
  0.045912	  0.046060	diff=0.000147995
  0.000000	 -0.000000	diff=1.95463e-44
  0.000000	  0.000000	diff=2.08819e-38
  local_diff=0.766598
# W_tgt_char{2}, [8 4]
  7.278284	  7.149261	diff=0.129022
 -0.000203	 -0.000203	diff=3.22217e-08
-17.393281	-17.985939	diff=0.592657
  0.000089	  0.000089	diff=3.13606e-07
 -0.078528	 -0.078834	diff=0.000306321
 -0.008085	 -0.008062	diff=2.3528e-05
 12.355881	 11.717903	diff=0.637977
 -0.001557	 -0.001557	diff=2.21311e-07
  4.297377	  4.235986	diff=0.0613911
 -0.157911	 -0.158356	diff=0.000445068
-17.380555	-17.969181	diff=0.588626
  0.000088	  0.000089	diff=3.09359e-07
 -0.090452	 -0.090899	diff=0.00044613
 -0.907293	 -0.919206	diff=0.0119129
 12.343276	 11.709319	diff=0.633957
 -1.239725	 -1.253993	diff=0.014267
 -6.886011	 -7.004449	diff=0.118438
  0.000007	  0.000007	diff=2.56655e-08
 18.116329	 17.618583	diff=0.497747
 -0.000080	 -0.000080	diff=2.49369e-07
  0.077510	  0.077216	diff=0.000294468
  0.005740	  0.005761	diff=2.02498e-05
-10.885597	-11.533074	diff=0.647477
 -0.000025	 -0.000025	diff=1.76771e-07
  0.021934	  0.021916	diff=1.79436e-05
 -0.000000	 -0.000000	diff=3.22602e-12
 -0.057350	 -0.057452	diff=0.000101953
  0.000003	  0.000003	diff=1.53757e-10
 -0.000263	 -0.000263	diff=3.40647e-10
 -0.000112	 -0.000112	diff=6.20771e-09
  0.021351	  0.021225	diff=0.000126242
  0.000001	  0.000001	diff=6.36977e-11
  local_diff=3.93526
# W_tgt_char{3}, [8 4]
  3.431184	  3.400128	diff=0.0310557
-15.189190	-15.104636	diff=0.0845533
  1.853807	  1.854417	diff=0.000610355
  0.048161	  0.047977	diff=0.000184628
  4.582263	  3.724062	diff=0.858201
 -0.581444	 -0.579546	diff=0.00189853
 -0.533790	 -0.533534	diff=0.000255171
 -1.000299	 -1.007166	diff=0.00686702
 -0.103366	 -0.103374	diff=7.5216e-06
  0.159615	  0.159638	diff=2.30678e-05
  0.001569	  0.001569	diff=3.64897e-10
 -0.000071	 -0.000071	diff=7.68228e-11
 -0.203821	 -0.203957	diff=0.000136792
  0.005335	  0.005335	diff=2.08724e-07
 -0.000190	 -0.000190	diff=2.95729e-08
  0.000143	  0.000143	diff=3.30104e-09
 -3.124733	 -3.123873	diff=0.000859996
  0.227717	  0.225372	diff=0.00234491
  2.973138	  2.974583	diff=0.00144521
 -0.044383	 -0.044764	diff=0.000380786
  0.045773	  0.045773	diff=4.53441e-07
  0.058117	  0.058031	diff=8.61193e-05
 -0.863746	 -0.862700	diff=0.0010461
 -0.506158	 -0.520457	diff=0.0142995
 -5.778715	 -5.775707	diff=0.00300773
  0.342787	  0.334538	diff=0.00824955
  5.491378	  5.496397	diff=0.00501925
 -0.040840	 -0.042192	diff=0.00135153
  0.080017	  0.080015	diff=2.24732e-06
  0.098440	  0.098156	diff=0.000283685
 -1.586564	 -1.583018	diff=0.00354583
 -1.275272	 -1.326247	diff=0.0509754
  local_diff=1.07669
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.521141	 -0.504658	diff=0.0164831
 -0.113893	 -0.113067	diff=0.000825652
  0.035838	  0.033527	diff=0.00231127
 -0.015599	 -0.016102	diff=0.0005031
-23.763099	-27.065771	diff=3.30267
 -5.974033	 -6.163415	diff=0.189382
 -0.000125	 -0.000126	diff=7.86296e-07
 -0.000786	 -0.000818	diff=3.25283e-05
  local_diff=3.51221
# W_pos, [2 2]
 -1.496346	 -1.495296	diff=0.00104925
 -0.777497	 -0.777225	diff=0.0002722
  1.271888	  1.272126	diff=0.000238745
  0.819603	  0.819731	diff=0.000127996
  local_diff=0.00168819
# v_pos, [1 2]
  2.559148	  2.562309	diff=0.00316069
  0.707179	  0.707934	diff=0.000755006
  local_diff=0.0039157
# W_h, [2 4]
  1.933645	  1.918569	diff=0.015076
  0.125174	  0.125286	diff=0.000111579
 -2.057124	 -2.055925	diff=0.00119888
 -1.139648	 -1.139372	diff=0.000276213
110.427849	109.847290	diff=0.580559
  3.956503	  3.979801	diff=0.0232977
  1.552935	  1.580299	diff=0.0273643
 -1.025206	 -1.009905	diff=0.0153011
  local_diff=0.663185
# W_soft, [8 2]
 -0.034306	 -0.034346	diff=4.03655e-05
  2.823041	  2.814147	diff=0.00889383
 -2.036051	 -2.036068	diff=1.61135e-05
  1.768978	  1.761095	diff=0.0078824
  0.230324	  0.228491	diff=0.00183286
 -3.234315	 -3.234325	diff=9.66621e-06
  0.538163	  0.538136	diff=2.67589e-05
 -0.037117	 -0.037130	diff=1.37216e-05
  0.468150	  0.466707	diff=0.00144325
 12.423837	 12.398851	diff=0.0249862
 -3.946713	 -3.946806	diff=9.28695e-05
  5.908957	  5.887054	diff=0.0219031
 -2.212657	 -2.217057	diff=0.0043999
 -9.720072	 -9.720173	diff=0.000101443
 -1.656889	 -1.657480	diff=0.00059009
 -1.210995	 -1.211096	diff=0.000101737
  local_diff=0.0723343
# Num params=418, abs_diff=785.27
Elapsed time is 9.494520 seconds.
[?1l>