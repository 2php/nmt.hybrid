# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 104, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 104
  src input 1: y y x y
  src mask: 1  1  1  1
  tgt input 1: <s> a b a
  tgt output 1: a b a </s>
  tgt mask: 1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=4.12108e-12
 -0.000000	 -0.000000	diff=2.62038e-13
 -0.000000	 -0.000000	diff=2.29777e-11
  0.000000	  0.000000	diff=5.08694e-12
 -0.000000	 -0.000000	diff=1.41871e-15
  0.000000	  0.000000	diff=3.76824e-13
 -0.000082	 -0.000082	diff=1.41073e-08
 -0.000429	 -0.000429	diff=5.82613e-09
 -0.000005	 -0.000005	diff=3.85284e-12
 -0.000002	 -0.000002	diff=1.41833e-11
 -0.000000	 -0.000000	diff=2.35784e-10
 -0.000000	 -0.000000	diff=4.20775e-12
  0.000000	  0.000000	diff=6.37582e-13
  0.000000	  0.000000	diff=1.55415e-14
 -0.001714	 -0.001714	diff=7.79316e-08
  0.000583	  0.000583	diff=1.44267e-08
 -0.000000	 -0.000000	diff=2.43737e-13
 -0.000000	 -0.000000	diff=2.62419e-13
 -0.000000	 -0.000000	diff=6.7098e-14
 -0.000000	 -0.000000	diff=2.40209e-13
  0.000000	  0.000000	diff=5.89005e-13
  0.000000	  0.000000	diff=5.07916e-13
 -0.000000	 -0.000000	diff=7.77005e-09
  0.000015	  0.000015	diff=1.10464e-10
  0.000000	  0.000000	diff=1.4889e-13
  0.000000	  0.000000	diff=4.96042e-13
  0.000000	  0.000000	diff=2.62731e-13
  0.000000	  0.000000	diff=4.80863e-14
 -0.000000	 -0.000000	diff=1.41999e-13
 -0.000000	 -0.000000	diff=1.99158e-13
 -0.000001	 -0.000001	diff=3.78879e-10
 -0.000010	 -0.000010	diff=1.80099e-08
  local_diff=1.38856e-07
# W_tgt{1}, [8 6]
 -0.000048	 -0.000048	diff=6.23528e-11
  0.000003	  0.000003	diff=4.21402e-12
  0.000008	  0.000008	diff=1.3699e-09
  0.000001	  0.000001	diff=1.52867e-10
 -0.000028	 -0.000028	diff=4.10949e-11
  0.000002	  0.000002	diff=6.22244e-13
 -0.000583	 -0.000584	diff=1.97963e-07
 -0.001178	 -0.001178	diff=2.08685e-08
 -0.000029	 -0.000029	diff=6.80607e-11
  0.000006	  0.000006	diff=8.83643e-12
 -0.000004	 -0.000004	diff=2.98218e-09
 -0.000003	 -0.000003	diff=3.50223e-10
 -0.000025	 -0.000025	diff=4.80695e-11
  0.000001	  0.000001	diff=2.12906e-11
 -0.012451	 -0.012452	diff=3.70661e-07
  0.000339	  0.000339	diff=3.0649e-09
  0.000000	  0.000000	diff=2.24188e-13
 -0.000000	 -0.000000	diff=2.90945e-14
 -0.000000	 -0.000000	diff=7.64907e-13
  0.000000	  0.000000	diff=7.07533e-13
 -0.000000	 -0.000000	diff=6.45375e-13
 -0.000000	 -0.000000	diff=3.09982e-13
 -0.000066	 -0.000066	diff=1.06522e-07
 -0.000001	 -0.000001	diff=2.34566e-11
 -0.000000	 -0.000000	diff=1.38788e-13
  0.000000	  0.000000	diff=1.30415e-13
  0.000000	  0.000000	diff=1.30545e-13
 -0.000000	 -0.000000	diff=3.6064e-13
 -0.000000	 -0.000000	diff=1.65886e-13
 -0.000000	 -0.000000	diff=2.34762e-13
 -0.000009	 -0.000009	diff=3.86424e-10
 -0.000000	 -0.000000	diff=7.96309e-09
  0.000000	  0.000000	diff=1.69923e-12
 -0.000000	 -0.000000	diff=8.78881e-14
 -0.000000	 -0.000000	diff=2.87261e-13
  0.000000	  0.000000	diff=3.92753e-13
 -0.000000	 -0.000000	diff=6.74556e-13
 -0.000000	 -0.000000	diff=6.85968e-13
 -0.000118	 -0.000118	diff=7.09232e-07
  0.000028	  0.000028	diff=2.59377e-09
 -0.000000	 -0.000000	diff=3.74429e-14
 -0.000000	 -0.000000	diff=7.93994e-13
  0.000000	  0.000000	diff=5.56238e-13
  0.000000	  0.000000	diff=2.52151e-13
 -0.000000	 -0.000000	diff=2.31236e-14
  0.000000	  0.000000	diff=4.54346e-13
  0.000054	  0.000054	diff=4.45869e-09
 -0.000023	 -0.000023	diff=8.81102e-08
  local_diff=1.51697e-06
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000825	  0.000825	diff=2.58159e-07
 -0.001517	 -0.001516	diff=6.64834e-07
  0.000079	  0.000079	diff=1.31214e-08
 -0.000444	 -0.000444	diff=2.36816e-07
  local_diff=1.17293e-06
# W_emb_tgt, [2 4]
 -0.003297	 -0.003296	diff=1.38301e-06
 -0.000952	 -0.000951	diff=3.06922e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.008593	 -0.008592	diff=5.44548e-07
 -0.003148	 -0.003147	diff=3.60548e-07
 -0.003640	 -0.003640	diff=3.84628e-07
 -0.001405	 -0.001405	diff=2.02457e-07
  local_diff=3.18211e-06
# W_soft, [4 2]
  0.001906	  0.001906	diff=4.54324e-08
 -0.001267	 -0.001267	diff=4.54347e-08
  0.002200	  0.002200	diff=4.54334e-08
 -0.002838	 -0.002838	diff=4.54343e-08
 -0.000094	 -0.000094	diff=1.8145e-08
  0.000714	  0.000714	diff=1.81449e-08
 -0.002257	 -0.002257	diff=1.81447e-08
  0.001638	  0.001638	diff=1.81453e-08
  local_diff=2.54315e-07
# Num params=104, abs_diff=6.26517e-06
Elapsed time is 0.727852 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.87871e-13
  0.000000	  0.000000	diff=4.75103e-15
 -0.000000	 -0.000000	diff=1.17588e-12
  0.000000	  0.000000	diff=5.47156e-13
 -0.000000	 -0.000000	diff=8.1325e-15
 -0.000000	 -0.000000	diff=8.36079e-13
  0.000078	  0.000078	diff=1.29093e-10
  0.000029	  0.000029	diff=2.99692e-10
  0.000000	  0.000000	diff=1.38588e-12
 -0.000000	 -0.000000	diff=1.45782e-12
  0.000000	  0.000000	diff=5.29089e-12
 -0.000000	 -0.000000	diff=1.9633e-12
  0.000000	  0.000000	diff=1.88295e-12
  0.000000	  0.000000	diff=1.46083e-12
 -0.000146	 -0.000146	diff=3.69597e-10
 -0.000050	 -0.000050	diff=7.14102e-10
  0.000000	  0.000000	diff=1.7042e-13
 -0.000000	 -0.000000	diff=2.19934e-13
  0.000000	  0.000000	diff=6.20103e-13
 -0.000000	 -0.000000	diff=8.92369e-15
  0.000000	  0.000000	diff=3.33915e-13
  0.000000	  0.000000	diff=4.07054e-13
 -0.000002	 -0.000002	diff=2.7209e-09
 -0.000001	 -0.000001	diff=5.82579e-12
 -0.000000	 -0.000000	diff=3.72225e-13
  0.000000	  0.000000	diff=9.99215e-14
 -0.000000	 -0.000000	diff=3.81436e-13
  0.000000	  0.000000	diff=9.86182e-13
 -0.000000	 -0.000000	diff=1.6738e-13
 -0.000000	 -0.000000	diff=4.96972e-13
  0.000002	  0.000002	diff=1.37024e-11
  0.000001	  0.000001	diff=1.14097e-09
  local_diff=5.41436e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=4.53474e-13
  0.000000	  0.000000	diff=1.34504e-13
  0.000000	  0.000000	diff=6.23959e-13
  0.000000	  0.000000	diff=7.88075e-13
 -0.000000	 -0.000000	diff=2.74073e-13
  0.000000	  0.000000	diff=4.31215e-13
 -0.000013	 -0.000013	diff=1.16015e-12
  0.000125	  0.000125	diff=3.2989e-11
 -0.000000	 -0.000000	diff=6.34955e-13
 -0.000000	 -0.000000	diff=3.00408e-13
 -0.000000	 -0.000000	diff=4.77675e-13
 -0.000000	 -0.000000	diff=5.29321e-14
  0.000000	  0.000000	diff=1.84297e-13
 -0.000000	 -0.000000	diff=1.00939e-12
  0.000011	  0.000011	diff=4.28623e-13
 -0.000110	 -0.000110	diff=2.32604e-11
  0.000000	  0.000000	diff=3.06914e-13
  0.000000	  0.000000	diff=1.83441e-13
  0.000000	  0.000000	diff=3.043e-13
  0.000000	  0.000000	diff=9.44611e-14
  0.000000	  0.000000	diff=2.75684e-14
 -0.000000	 -0.000000	diff=1.15939e-12
 -0.000000	 -0.000000	diff=3.36492e-10
  0.000002	  0.000002	diff=9.28825e-13
 -0.000000	 -0.000000	diff=3.50341e-13
 -0.000000	 -0.000000	diff=7.52409e-14
 -0.000000	 -0.000000	diff=1.74739e-14
 -0.000000	 -0.000000	diff=4.63679e-13
  0.000000	 -0.000000	diff=1.00198e-14
  0.000000	  0.000000	diff=3.02766e-13
  0.000000	  0.000000	diff=2.75185e-13
 -0.000003	 -0.000003	diff=3.49534e-09
  local_diff=3.89953e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=5.17737e-13
 -0.000000	 -0.000000	diff=1.38985e-12
  0.000000	  0.000000	diff=5.08026e-13
  0.000000	  0.000000	diff=1.20726e-11
  0.000000	  0.000000	diff=8.89307e-13
  0.000000	  0.000000	diff=1.65113e-12
 -0.000015	 -0.000015	diff=2.60037e-13
  0.000062	  0.000062	diff=9.26206e-10
 -0.000000	 -0.000000	diff=9.67936e-14
  0.000000	  0.000000	diff=1.41854e-12
 -0.000000	 -0.000000	diff=4.95997e-12
 -0.000000	 -0.000000	diff=1.86669e-11
 -0.000000	 -0.000000	diff=3.67983e-13
  0.000000	  0.000000	diff=1.24693e-12
  0.000039	  0.000039	diff=2.08119e-10
 -0.000246	 -0.000246	diff=1.15356e-09
 -0.000000	 -0.000000	diff=2.74914e-13
  0.000000	  0.000000	diff=8.15147e-13
 -0.000000	 -0.000000	diff=2.62175e-13
  0.000000	  0.000000	diff=7.42665e-13
 -0.000000	 -0.000000	diff=7.93994e-13
  0.000000	  0.000000	diff=3.29668e-13
  0.000000	  0.000000	diff=6.85349e-13
 -0.000000	 -0.000000	diff=3.92488e-13
 -0.000000	 -0.000000	diff=1.55321e-13
  0.000000	  0.000000	diff=4.17505e-13
 -0.000000	 -0.000000	diff=9.98782e-14
  0.000000	  0.000000	diff=4.81805e-13
 -0.000000	 -0.000000	diff=4.44256e-14
  0.000000	  0.000000	diff=3.88969e-13
 -0.000000	 -0.000000	diff=1.24565e-13
 -0.000000	 -0.000000	diff=4.05286e-12
 -0.000000	 -0.000000	diff=1.28261e-12
  0.000000	  0.000000	diff=1.38249e-13
 -0.000000	 -0.000000	diff=2.33193e-13
 -0.000000	 -0.000000	diff=1.12589e-12
 -0.000000	 -0.000000	diff=3.66089e-13
 -0.000000	 -0.000000	diff=7.37407e-13
  0.000001	  0.000001	diff=2.31297e-10
 -0.000003	 -0.000003	diff=1.38626e-10
  0.000000	  0.000000	diff=3.22522e-13
 -0.000000	 -0.000000	diff=7.6103e-14
  0.000000	  0.000000	diff=2.80737e-13
  0.000000	  0.000000	diff=3.54845e-13
  0.000000	  0.000000	diff=1.37503e-13
 -0.000000	 -0.000000	diff=9.48806e-13
 -0.000001	 -0.000001	diff=8.0484e-12
  0.000005	  0.000005	diff=4.11802e-09
  local_diff=6.84399e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=2.01666e-13
 -0.000000	 -0.000000	diff=3.55836e-13
  0.000000	  0.000000	diff=4.33285e-13
  0.000000	  0.000000	diff=3.49945e-13
  0.000000	  0.000000	diff=1.01009e-13
  0.000000	  0.000000	diff=5.52553e-13
 -0.000017	 -0.000017	diff=3.8587e-11
  0.000075	  0.000075	diff=1.12985e-09
  0.000000	  0.000000	diff=5.65055e-13
 -0.000000	 -0.000000	diff=3.45518e-13
  0.000000	  0.000000	diff=5.41945e-13
 -0.000000	 -0.000000	diff=2.11951e-13
  0.000000	  0.000000	diff=1.72483e-13
 -0.000000	 -0.000000	diff=3.24814e-14
 -0.000007	 -0.000007	diff=8.52036e-10
 -0.000017	 -0.000017	diff=5.05571e-09
 -0.000000	 -0.000000	diff=3.91826e-13
  0.000000	  0.000000	diff=3.82185e-13
  0.000000	  0.000000	diff=8.93196e-13
  0.000000	  0.000000	diff=1.01494e-13
  0.000000	  0.000000	diff=3.42643e-13
  0.000000	  0.000000	diff=7.43071e-13
 -0.000001	 -0.000001	diff=2.26882e-09
  0.000008	  0.000008	diff=1.23334e-10
  0.000000	  0.000000	diff=7.85061e-13
  0.000000	  0.000000	diff=3.95749e-13
 -0.000000	 -0.000000	diff=5.20942e-13
 -0.000000	 -0.000000	diff=4.53371e-13
 -0.000000	 -0.000000	diff=1.25216e-12
 -0.000000	 -0.000000	diff=5.07102e-13
  0.000001	  0.000001	diff=3.17078e-12
 -0.000007	 -0.000007	diff=2.27645e-10
  local_diff=9.70978e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000068	 -0.000068	diff=1.93566e-08
  0.000063	  0.000063	diff=5.08945e-08
 -0.000052	 -0.000052	diff=1.84554e-08
  0.000041	  0.000041	diff=4.53804e-08
  local_diff=1.34087e-07
# W_emb_tgt, [2 4]
 -0.000158	 -0.000158	diff=2.67855e-08
  0.000016	  0.000016	diff=6.77983e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000030	 -0.000030	diff=4.72495e-11
  0.000007	  0.000007	diff=4.74812e-09
  0.000048	  0.000048	diff=1.06678e-08
 -0.000004	 -0.000004	diff=1.79221e-09
  local_diff=5.08208e-08
# W_soft, [4 2]
  0.000042	  0.000042	diff=1.4367e-11
 -0.000201	 -0.000201	diff=1.39263e-11
  0.000111	  0.000111	diff=1.47236e-11
  0.000048	  0.000048	diff=1.45372e-11
  0.000418	  0.000418	diff=8.29578e-11
 -0.000214	 -0.000214	diff=8.33051e-11
 -0.000266	 -0.000266	diff=8.36797e-11
  0.000062	  0.000062	diff=8.33019e-11
  local_diff=3.90799e-10
# Num params=168, abs_diff=2.11166e-07
Elapsed time is 1.369078 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.09364e-12
  0.000000	  0.000000	diff=9.80612e-13
 -0.000000	 -0.000000	diff=2.95292e-12
  0.000000	  0.000000	diff=8.52952e-13
 -0.000000	 -0.000000	diff=1.13293e-12
 -0.000000	 -0.000000	diff=4.50829e-13
  0.000108	  0.000108	diff=1.9171e-10
  0.000037	  0.000037	diff=4.68442e-10
  0.000001	  0.000001	diff=2.80729e-12
 -0.000000	 -0.000000	diff=9.33952e-13
  0.000000	  0.000000	diff=1.06795e-11
 -0.000000	 -0.000000	diff=4.98434e-12
  0.000001	  0.000001	diff=2.87542e-12
  0.000000	  0.000000	diff=1.92008e-13
 -0.000174	 -0.000174	diff=6.12174e-10
 -0.000068	 -0.000068	diff=1.11872e-09
  0.000000	  0.000000	diff=2.52429e-13
 -0.000000	 -0.000000	diff=8.25308e-13
  0.000000	  0.000000	diff=2.05444e-13
 -0.000000	 -0.000000	diff=6.31417e-14
  0.000000	  0.000000	diff=4.44248e-13
  0.000000	  0.000000	diff=4.17173e-13
 -0.000003	 -0.000003	diff=3.14552e-09
 -0.000001	 -0.000001	diff=6.44732e-12
 -0.000000	 -0.000000	diff=1.65474e-13
  0.000000	  0.000000	diff=3.48623e-13
 -0.000000	 -0.000000	diff=9.29333e-14
  0.000000	  0.000000	diff=5.59084e-13
 -0.000000	 -0.000000	diff=3.0615e-13
 -0.000000	 -0.000000	diff=6.59088e-13
  0.000003	  0.000003	diff=1.35491e-11
  0.000001	  0.000001	diff=1.51822e-09
  local_diff=7.10905e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=5.50563e-13
  0.000000	  0.000000	diff=1.22676e-13
  0.000000	  0.000000	diff=1.91327e-13
  0.000000	  0.000000	diff=1.45279e-13
  0.000000	  0.000000	diff=2.66669e-13
 -0.000000	 -0.000000	diff=1.17497e-12
 -0.000007	 -0.000007	diff=1.82884e-12
  0.000161	  0.000161	diff=6.668e-11
 -0.000000	 -0.000000	diff=8.28265e-13
 -0.000000	 -0.000000	diff=3.25382e-15
 -0.000000	 -0.000000	diff=2.74441e-13
 -0.000000	 -0.000000	diff=8.13436e-13
 -0.000000	 -0.000000	diff=2.21267e-14
  0.000000	  0.000000	diff=4.63295e-13
  0.000005	  0.000005	diff=4.63231e-13
 -0.000135	 -0.000135	diff=4.89445e-11
  0.000000	  0.000000	diff=5.53561e-13
  0.000000	  0.000000	diff=8.26172e-13
  0.000000	  0.000000	diff=5.89552e-13
  0.000000	  0.000000	diff=5.68236e-13
  0.000000	  0.000000	diff=6.84781e-13
 -0.000000	 -0.000000	diff=5.87344e-14
 -0.000000	 -0.000000	diff=2.32642e-10
  0.000003	  0.000003	diff=2.15876e-13
 -0.000000	 -0.000000	diff=8.66625e-13
 -0.000000	 -0.000000	diff=5.98642e-13
 -0.000000	 -0.000000	diff=9.46902e-14
 -0.000000	 -0.000000	diff=3.99087e-13
 -0.000000	 -0.000000	diff=3.03796e-13
  0.000000	  0.000000	diff=5.1609e-13
  0.000000	  0.000000	diff=5.39588e-13
 -0.000004	 -0.000004	diff=4.05826e-09
  local_diff=4.42049e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.7816e-13
 -0.000000	 -0.000000	diff=2.8465e-12
  0.000000	  0.000000	diff=1.92235e-12
  0.000000	  0.000000	diff=3.1677e-11
  0.000000	  0.000000	diff=1.00932e-12
  0.000000	  0.000000	diff=2.36142e-12
 -0.000020	 -0.000020	diff=1.29066e-10
  0.000115	  0.000115	diff=1.38437e-09
 -0.000000	 -0.000000	diff=2.41373e-13
  0.000001	  0.000001	diff=1.48548e-12
 -0.000000	 -0.000000	diff=7.13818e-12
 -0.000000	 -0.000000	diff=3.64973e-11
 -0.000000	 -0.000000	diff=5.47413e-13
  0.000000	  0.000000	diff=6.64778e-13
  0.000022	  0.000022	diff=1.91815e-11
 -0.000201	 -0.000201	diff=2.07743e-09
 -0.000000	 -0.000000	diff=1.49093e-12
  0.000000	  0.000000	diff=9.12218e-14
 -0.000000	 -0.000000	diff=2.26095e-14
  0.000000	  0.000000	diff=1.17987e-13
 -0.000000	 -0.000000	diff=5.62661e-13
  0.000000	  0.000000	diff=6.83768e-13
  0.000000	  0.000000	diff=3.83518e-13
 -0.000000	 -0.000000	diff=4.67511e-13
 -0.000000	 -0.000000	diff=4.66735e-13
  0.000000	  0.000000	diff=2.78207e-13
 -0.000000	 -0.000000	diff=4.97995e-13
  0.000000	  0.000000	diff=4.71402e-13
  0.000000	  0.000000	diff=3.22534e-13
  0.000000	  0.000000	diff=4.02284e-13
  0.000000	  0.000000	diff=5.58212e-13
 -0.000000	 -0.000000	diff=4.76981e-12
 -0.000000	 -0.000000	diff=3.22877e-13
  0.000000	  0.000000	diff=7.48947e-13
 -0.000000	 -0.000000	diff=4.89491e-13
 -0.000000	 -0.000000	diff=5.9079e-13
 -0.000000	 -0.000000	diff=4.52118e-13
 -0.000000	 -0.000000	diff=5.36659e-13
  0.000001	  0.000001	diff=2.55753e-10
 -0.000005	 -0.000005	diff=1.76365e-10
  0.000000	  0.000000	diff=3.53711e-13
 -0.000000	 -0.000000	diff=2.12685e-14
  0.000000	  0.000000	diff=4.32161e-13
  0.000000	  0.000000	diff=4.9507e-13
  0.000000	  0.000000	diff=2.67875e-13
 -0.000000	 -0.000000	diff=1.02391e-13
 -0.000001	 -0.000001	diff=6.3292e-12
  0.000006	  0.000006	diff=6.28238e-09
  local_diff=1.04338e-08
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.02928e-12
 -0.000000	 -0.000000	diff=1.70213e-13
  0.000000	  0.000000	diff=7.19194e-13
  0.000000	  0.000000	diff=2.93348e-14
  0.000000	  0.000000	diff=4.01891e-13
  0.000000	  0.000000	diff=2.24166e-13
 -0.000025	 -0.000025	diff=2.19886e-10
  0.000184	  0.000184	diff=3.15538e-09
 -0.000000	 -0.000000	diff=3.3341e-15
 -0.000000	 -0.000000	diff=1.1556e-13
  0.000000	  0.000000	diff=2.3503e-13
 -0.000000	 -0.000000	diff=4.497e-13
  0.000000	  0.000000	diff=1.26662e-13
 -0.000000	 -0.000000	diff=7.56155e-13
 -0.000010	 -0.000010	diff=1.40094e-09
  0.000006	  0.000006	diff=3.61153e-09
 -0.000000	 -0.000000	diff=3.25059e-13
  0.000000	  0.000000	diff=1.93779e-13
  0.000000	  0.000000	diff=6.82007e-13
  0.000000	  0.000000	diff=1.46005e-13
 -0.000000	 -0.000000	diff=6.81174e-13
  0.000000	  0.000000	diff=5.09287e-13
 -0.000001	 -0.000001	diff=2.44011e-09
  0.000010	  0.000010	diff=1.44717e-10
  0.000000	  0.000000	diff=2.12523e-13
  0.000000	  0.000000	diff=2.90598e-13
 -0.000000	 -0.000000	diff=5.47854e-13
 -0.000000	 -0.000000	diff=3.97262e-13
  0.000000	  0.000000	diff=3.83309e-13
 -0.000000	 -0.000000	diff=2.3611e-13
  0.000001	  0.000001	diff=1.9942e-12
 -0.000010	 -0.000010	diff=3.88842e-09
  local_diff=1.48718e-08
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000069	 -0.000069	diff=2.71427e-08
  0.000052	  0.000052	diff=5.86418e-08
 -0.000077	 -0.000077	diff=3.39724e-08
  0.000055	  0.000055	diff=7.00118e-08
  local_diff=1.89769e-07
# W_emb_tgt, [2 4]
 -0.000194	 -0.000194	diff=4.48346e-08
  0.000009	  0.000009	diff=3.76697e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000066	 -0.000066	diff=1.23607e-09
  0.000005	  0.000005	diff=3.73416e-09
  0.000047	  0.000047	diff=1.31973e-08
 -0.000003	 -0.000003	diff=2.08585e-09
  local_diff=6.8855e-08
# W_soft, [4 2]
  0.000076	  0.000076	diff=3.22358e-11
 -0.000222	 -0.000222	diff=3.22656e-11
  0.000120	  0.000120	diff=3.27771e-11
  0.000025	  0.000025	diff=3.27508e-11
  0.000468	  0.000468	diff=1.4538e-10
 -0.000177	 -0.000177	diff=1.4486e-10
 -0.000386	 -0.000386	diff=1.45896e-10
  0.000095	  0.000095	diff=1.45087e-10
  local_diff=7.11253e-10
# Num params=168, abs_diff=2.9617e-07
Elapsed time is 1.530468 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 176, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 176
  src input 1: <s> y x x
  src mask: 0  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=3.2965e-13
  0.000000	  0.000000	diff=7.12138e-13
 -0.000000	 -0.000000	diff=1.97651e-13
  0.000000	  0.000000	diff=1.04118e-12
 -0.000000	 -0.000000	diff=1.27162e-12
 -0.000000	 -0.000000	diff=4.32033e-13
  0.000003	  0.000003	diff=1.86687e-11
  0.000002	  0.000002	diff=2.2171e-11
  0.000000	  0.000000	diff=1.12766e-12
 -0.000000	 -0.000000	diff=6.67334e-13
  0.000000	  0.000000	diff=1.12551e-12
 -0.000000	 -0.000000	diff=8.48588e-15
  0.000000	  0.000000	diff=4.10143e-13
  0.000000	  0.000000	diff=1.35247e-13
 -0.000006	 -0.000006	diff=8.70011e-11
 -0.000004	 -0.000004	diff=6.36233e-11
  0.000000	  0.000000	diff=1.66134e-13
 -0.000000	 -0.000000	diff=8.52312e-13
  0.000000	  0.000000	diff=5.15942e-14
 -0.000000	 -0.000000	diff=4.04008e-13
  0.000000	  0.000000	diff=6.76142e-13
  0.000000	  0.000000	diff=1.69425e-13
 -0.000000	 -0.000000	diff=1.14682e-10
 -0.000000	 -0.000000	diff=6.96233e-14
 -0.000000	 -0.000000	diff=1.39121e-12
  0.000000	  0.000000	diff=4.66441e-13
 -0.000000	 -0.000000	diff=1.11037e-12
  0.000000	  0.000000	diff=6.57036e-14
 -0.000000	 -0.000000	diff=1.08041e-12
 -0.000000	 -0.000000	diff=9.28536e-14
  0.000000	  0.000000	diff=2.60077e-14
  0.000000	  0.000000	diff=4.98597e-11
  local_diff=3.70086e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=5.74578e-13
  0.000000	  0.000000	diff=8.80815e-13
  0.000000	  0.000000	diff=4.65577e-13
  0.000000	  0.000000	diff=1.10136e-12
  0.000000	  0.000000	diff=1.85604e-12
 -0.000000	 -0.000000	diff=7.78986e-13
 -0.000002	 -0.000002	diff=6.26917e-13
  0.000004	  0.000004	diff=5.65538e-12
 -0.000000	 -0.000000	diff=4.1652e-13
 -0.000000	 -0.000000	diff=5.34292e-15
 -0.000000	 -0.000000	diff=1.64527e-13
 -0.000000	 -0.000000	diff=4.99913e-13
 -0.000000	 -0.000000	diff=4.77374e-13
  0.000000	  0.000000	diff=5.44519e-13
  0.000001	  0.000001	diff=3.76301e-13
 -0.000003	 -0.000003	diff=4.57409e-12
  0.000000	  0.000000	diff=5.60096e-13
  0.000000	  0.000000	diff=8.90438e-13
  0.000000	  0.000000	diff=8.04132e-13
  0.000000	  0.000000	diff=3.17729e-13
  0.000000	  0.000000	diff=2.73779e-13
 -0.000000	 -0.000000	diff=5.46029e-13
 -0.000000	 -0.000000	diff=1.36016e-11
  0.000000	  0.000000	diff=4.47956e-13
 -0.000000	 -0.000000	diff=4.0977e-13
 -0.000000	 -0.000000	diff=2.759e-13
 -0.000000	 -0.000000	diff=4.33386e-13
 -0.000000	 -0.000000	diff=1.32425e-13
 -0.000000	 -0.000000	diff=9.47494e-13
  0.000000	  0.000000	diff=6.62898e-13
  0.000000	  0.000000	diff=6.03045e-13
 -0.000000	 -0.000000	diff=1.41899e-10
  local_diff=1.81804e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=9.08303e-13
  0.000000	  0.000000	diff=2.92735e-13
  0.000000	  0.000000	diff=5.10214e-13
  0.000000	  0.000000	diff=1.4162e-12
  0.000000	  0.000000	diff=5.39393e-13
  0.000000	  0.000000	diff=1.14e-13
 -0.000001	 -0.000001	diff=2.09133e-11
 -0.000001	 -0.000001	diff=6.95669e-12
  0.000000	  0.000000	diff=5.9304e-13
 -0.000000	 -0.000000	diff=1.0049e-13
 -0.000000	 -0.000000	diff=1.00333e-12
 -0.000000	 -0.000000	diff=2.45925e-12
 -0.000000	 -0.000000	diff=1.16578e-12
 -0.000000	 -0.000000	diff=1.32972e-12
  0.000001	  0.000001	diff=1.28788e-11
 -0.000004	 -0.000004	diff=1.04733e-10
 -0.000000	  0.000000	diff=7.24181e-13
  0.000000	  0.000000	diff=6.54956e-14
 -0.000000	 -0.000000	diff=7.09276e-13
 -0.000000	 -0.000000	diff=6.97976e-13
 -0.000000	  0.000000	diff=7.1477e-13
  0.000000	  0.000000	diff=8.15942e-14
 -0.000000	 -0.000000	diff=2.47567e-13
 -0.000000	 -0.000000	diff=1.90431e-13
  0.000000	 -0.000000	diff=1.80093e-15
  0.000000	  0.000000	diff=2.09289e-13
  0.000000	 -0.000000	diff=6.77123e-15
  0.000000	  0.000000	diff=4.3077e-14
  0.000000	 -0.000000	diff=1.14006e-14
 -0.000000	  0.000000	diff=9.44019e-13
 -0.000000	 -0.000000	diff=1.08135e-12
 -0.000000	 -0.000000	diff=1.77677e-13
 -0.000000	 -0.000000	diff=9.95793e-13
  0.000000	  0.000000	diff=3.68679e-13
 -0.000000	 -0.000000	diff=1.16424e-12
 -0.000000	 -0.000000	diff=5.33128e-13
 -0.000000	 -0.000000	diff=2.46199e-13
 -0.000000	 -0.000000	diff=7.36933e-13
  0.000000	  0.000000	diff=1.36178e-11
 -0.000000	 -0.000000	diff=3.88981e-12
 -0.000000	 -0.000000	diff=8.87389e-13
 -0.000000	 -0.000000	diff=1.14106e-13
 -0.000000	 -0.000000	diff=1.0964e-12
  0.000000	  0.000000	diff=1.1347e-12
 -0.000000	 -0.000000	diff=8.42824e-13
  0.000000	  0.000000	diff=1.72391e-12
  0.000000	  0.000000	diff=3.36239e-13
  0.000000	  0.000000	diff=2.92498e-10
  local_diff=4.82006e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.3294e-12
 -0.000000	 -0.000000	diff=2.75226e-14
 -0.000000	 -0.000000	diff=7.05726e-13
  0.000000	  0.000000	diff=1.48057e-12
  0.000000	  0.000000	diff=7.8082e-13
  0.000000	  0.000000	diff=1.14096e-12
  0.000001	  0.000001	diff=4.21917e-13
  0.000023	  0.000023	diff=5.17121e-11
  0.000000	  0.000000	diff=2.45468e-13
 -0.000000	 -0.000000	diff=2.92155e-13
  0.000000	  0.000000	diff=1.35844e-12
 -0.000000	 -0.000000	diff=8.42123e-14
  0.000000	  0.000000	diff=7.96005e-13
 -0.000000	 -0.000000	diff=9.26576e-14
 -0.000000	 -0.000000	diff=4.85996e-13
 -0.000005	 -0.000005	diff=6.7674e-12
  0.000000	  0.000000	diff=4.8598e-14
 -0.000000	 -0.000000	diff=1.31257e-12
 -0.000000	 -0.000000	diff=7.00526e-13
  0.000000	  0.000000	diff=7.01765e-13
 -0.000000	 -0.000000	diff=5.54098e-14
  0.000000	  0.000000	diff=9.73242e-13
  0.000000	  0.000000	diff=5.71334e-12
  0.000000	  0.000000	diff=1.97919e-12
 -0.000000	 -0.000000	diff=3.31356e-13
  0.000000	  0.000000	diff=8.94313e-13
  0.000000	  0.000000	diff=9.99289e-14
 -0.000000	 -0.000000	diff=2.99627e-13
  0.000000	  0.000000	diff=5.20958e-13
 -0.000000	 -0.000000	diff=1.34272e-13
 -0.000000	 -0.000000	diff=1.71622e-12
 -0.000000	 -0.000000	diff=3.69546e-10
  local_diff=4.52749e-10
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.57778e-09
  0.000002	  0.000002	diff=2.14775e-09
 -0.000001	 -0.000001	diff=6.94524e-10
  0.000000	  0.000000	diff=1.26903e-09
  local_diff=5.68908e-09
# W_emb_tgt, [2 4]
 -0.000004	 -0.000004	diff=3.21835e-10
  0.000001	  0.000001	diff=4.44303e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000004	  0.000004	diff=2.41819e-11
 -0.000000	 -0.000000	diff=7.3905e-11
  0.000001	  0.000001	diff=2.56938e-10
  0.000000	  0.000000	diff=8.19036e-11
  local_diff=1.20307e-09
# W_h, [2 4]
 -0.000003	 -0.000003	diff=7.73707e-13
  0.000014	  0.000014	diff=8.08309e-13
  0.000004	  0.000004	diff=5.18853e-13
 -0.000017	 -0.000017	diff=1.8697e-13
  0.000011	  0.000011	diff=1.00476e-11
 -0.000010	 -0.000010	diff=1.89821e-12
  0.000008	  0.000008	diff=6.83052e-11
 -0.000018	 -0.000018	diff=7.83269e-11
  local_diff=1.60866e-10
# W_soft, [4 2]
  0.000011	  0.000011	diff=3.2259e-15
 -0.000007	 -0.000007	diff=1.27227e-13
  0.000000	  0.000000	diff=1.36648e-12
 -0.000004	 -0.000004	diff=1.35169e-12
  0.000005	  0.000005	diff=6.21382e-13
 -0.000006	 -0.000006	diff=6.0263e-13
  0.000001	  0.000001	diff=1.15134e-12
 -0.000000	 -0.000000	diff=4.66816e-13
  local_diff=5.69079e-12
# Num params=176, abs_diff=8.54535e-09
Elapsed time is 2.179947 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_pos=4 v_pos=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=2.71687e-13
  0.000000	  0.000000	diff=8.28964e-14
 -0.000000	 -0.000000	diff=1.7857e-13
  0.000000	  0.000000	diff=1.90113e-13
 -0.000000	 -0.000000	diff=6.89225e-14
 -0.000000	 -0.000000	diff=3.57871e-13
  0.000004	  0.000004	diff=1.07605e-11
  0.000003	  0.000003	diff=2.93421e-11
  0.000000	  0.000000	diff=5.04435e-13
 -0.000000	 -0.000000	diff=8.58211e-13
  0.000000	  0.000000	diff=1.39824e-12
 -0.000000	 -0.000000	diff=8.29743e-13
  0.000000	  0.000000	diff=3.15718e-13
  0.000000	  0.000000	diff=6.72157e-13
 -0.000008	 -0.000008	diff=2.33623e-11
 -0.000010	 -0.000010	diff=1.26155e-10
  0.000000	  0.000000	diff=6.78227e-13
 -0.000000	 -0.000000	diff=1.4656e-13
  0.000000	  0.000000	diff=5.10438e-13
 -0.000000	 -0.000000	diff=1.23407e-12
  0.000000	  0.000000	diff=8.56847e-13
  0.000000	  0.000000	diff=4.39557e-13
 -0.000000	 -0.000000	diff=2.07915e-10
 -0.000000	 -0.000000	diff=5.17253e-13
 -0.000000	 -0.000000	diff=7.17614e-13
  0.000000	  0.000000	diff=7.58801e-13
 -0.000000	 -0.000000	diff=6.36763e-13
  0.000000	  0.000000	diff=1.01506e-12
 -0.000000	 -0.000000	diff=1.93524e-13
 -0.000000	 -0.000000	diff=3.61677e-13
  0.000000	  0.000000	diff=8.23499e-13
  0.000000	  0.000000	diff=1.08666e-10
  local_diff=5.2082e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.02347e-12
  0.000000	  0.000000	diff=9.18735e-13
  0.000000	  0.000000	diff=2.30604e-13
  0.000000	  0.000000	diff=2.9795e-13
  0.000000	  0.000000	diff=9.87274e-13
 -0.000000	 -0.000000	diff=7.04221e-13
 -0.000006	 -0.000006	diff=2.10753e-12
  0.000003	  0.000003	diff=3.81267e-12
 -0.000000	 -0.000000	diff=5.63104e-14
 -0.000000	 -0.000000	diff=3.55146e-13
 -0.000000	 -0.000000	diff=3.27472e-13
 -0.000000	 -0.000000	diff=7.98446e-13
 -0.000000	 -0.000000	diff=1.22075e-12
  0.000000	  0.000000	diff=1.3376e-12
  0.000005	  0.000005	diff=1.24932e-12
 -0.000006	 -0.000006	diff=4.86803e-12
  0.000000	  0.000000	diff=3.39893e-13
  0.000000	  0.000000	diff=5.03933e-13
  0.000000	  0.000000	diff=3.75673e-13
  0.000000	  0.000000	diff=5.35814e-14
  0.000000	  0.000000	diff=6.8374e-13
 -0.000000	 -0.000000	diff=5.44613e-13
 -0.000000	 -0.000000	diff=7.73482e-11
  0.000000	  0.000000	diff=4.1021e-13
 -0.000000	 -0.000000	diff=2.98706e-13
 -0.000000	 -0.000000	diff=1.58369e-13
 -0.000000	 -0.000000	diff=2.97308e-14
 -0.000000	 -0.000000	diff=1.61023e-13
 -0.000000	 -0.000000	diff=1.15282e-13
  0.000000	  0.000000	diff=3.35517e-13
  0.000000	  0.000000	diff=3.19622e-13
 -0.000000	 -0.000000	diff=2.45057e-10
  local_diff=3.47031e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=5.03167e-13
 -0.000000	 -0.000000	diff=5.74068e-13
  0.000000	  0.000000	diff=2.455e-12
 -0.000000	 -0.000000	diff=1.20897e-12
  0.000000	  0.000000	diff=9.82009e-14
 -0.000000	 -0.000000	diff=9.87182e-14
 -0.000007	 -0.000007	diff=1.22237e-10
  0.000032	  0.000032	diff=2.39761e-10
  0.000000	  0.000000	diff=3.2665e-13
  0.000000	  0.000000	diff=3.49818e-13
 -0.000000	 -0.000000	diff=1.13498e-12
 -0.000000	 -0.000000	diff=2.27461e-12
  0.000000	  0.000000	diff=1.49257e-12
  0.000000	  0.000000	diff=2.8442e-13
  0.000004	  0.000004	diff=3.88136e-11
 -0.000031	 -0.000031	diff=3.71834e-10
 -0.000000	 -0.000000	diff=1.04728e-12
  0.000000	  0.000000	diff=7.14618e-13
 -0.000000	 -0.000000	diff=1.14585e-12
  0.000000	  0.000000	diff=9.14845e-14
 -0.000000	 -0.000000	diff=9.37029e-13
  0.000000	  0.000000	diff=5.66958e-13
  0.000000	  0.000000	diff=1.33375e-13
 -0.000000	 -0.000000	diff=4.97554e-14
  0.000000	  0.000000	diff=3.71943e-13
 -0.000000	 -0.000000	diff=8.14965e-13
 -0.000000	  0.000000	diff=1.62818e-12
 -0.000000	 -0.000000	diff=1.04998e-12
  0.000000	  0.000000	diff=4.93835e-13
 -0.000000	 -0.000000	diff=9.78392e-13
 -0.000000	 -0.000000	diff=6.6155e-13
  0.000000	  0.000000	diff=1.07926e-12
 -0.000000	 -0.000000	diff=1.89555e-13
  0.000000	  0.000000	diff=4.25635e-13
 -0.000000	 -0.000000	diff=2.53682e-13
 -0.000000	 -0.000000	diff=1.61235e-13
 -0.000000	 -0.000000	diff=5.27782e-14
  0.000000	  0.000000	diff=2.48394e-13
  0.000000	  0.000000	diff=5.81092e-10
 -0.000001	 -0.000001	diff=2.48722e-11
 -0.000000	 -0.000000	diff=6.65829e-14
  0.000000	  0.000000	diff=6.93715e-13
  0.000000	  0.000000	diff=7.15414e-14
  0.000000	  0.000000	diff=9.46472e-13
 -0.000000	 -0.000000	diff=4.11023e-13
  0.000000	  0.000000	diff=3.49565e-13
 -0.000000	 -0.000000	diff=5.31746e-12
  0.000000	  0.000000	diff=7.79432e-10
  local_diff=2.18979e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.09465e-12
  0.000000	  0.000000	diff=8.29531e-13
  0.000000	  0.000000	diff=3.57942e-13
  0.000000	  0.000000	diff=7.25626e-13
 -0.000000	 -0.000000	diff=3.35214e-13
  0.000000	  0.000000	diff=3.91768e-13
 -0.000014	 -0.000014	diff=5.96309e-12
  0.000019	  0.000019	diff=2.20487e-11
 -0.000000	 -0.000000	diff=2.22214e-13
  0.000000	  0.000000	diff=8.71873e-14
 -0.000000	 -0.000000	diff=5.05379e-14
  0.000000	  0.000000	diff=2.12022e-14
 -0.000000	 -0.000000	diff=4.02202e-13
  0.000000	  0.000000	diff=2.03783e-14
 -0.000018	 -0.000018	diff=4.47466e-11
  0.000021	  0.000021	diff=7.15971e-11
 -0.000000	 -0.000000	diff=5.55991e-13
 -0.000000	 -0.000000	diff=2.31795e-13
  0.000000	  0.000000	diff=5.1202e-13
  0.000000	  0.000000	diff=1.36825e-12
  0.000000	  0.000000	diff=5.01908e-13
  0.000000	  0.000000	diff=7.04833e-13
 -0.000000	 -0.000000	diff=8.09976e-10
  0.000000	  0.000000	diff=2.16895e-11
  0.000000	  0.000000	diff=2.93865e-13
 -0.000000	 -0.000000	diff=7.35344e-13
 -0.000000	 -0.000000	diff=1.16281e-12
 -0.000000	 -0.000000	diff=3.36868e-13
  0.000000	  0.000000	diff=4.6684e-13
 -0.000000	 -0.000000	diff=5.03331e-13
  0.000001	  0.000001	diff=3.81398e-12
 -0.000001	 -0.000001	diff=1.90861e-09
  local_diff=2.90036e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000005	 -0.000005	diff=1.70782e-09
 -0.000001	 -0.000001	diff=5.15328e-10
 -0.000003	 -0.000003	diff=1.28676e-09
 -0.000003	 -0.000003	diff=2.31388e-10
  local_diff=3.7413e-09
# W_emb_tgt, [2 4]
 -0.000016	 -0.000016	diff=4.41144e-09
  0.000002	  0.000002	diff=1.08393e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000014	 -0.000014	diff=5.36535e-09
  0.000002	  0.000002	diff=1.10428e-09
 -0.000005	 -0.000005	diff=2.92347e-09
  0.000002	  0.000002	diff=1.17225e-09
  local_diff=1.60607e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=3.99914e-15
  0.000000	  0.000000	diff=5.06273e-15
  0.000000	 -0.000000	diff=1.24126e-14
  0.000000	 -0.000000	diff=1.57138e-14
  local_diff=3.71882e-14
# v_pos, [1 2]
 -0.000000	  0.000000	diff=1.49251e-12
  0.000000	  0.000000	diff=2.52354e-13
  local_diff=1.74486e-12
# W_h, [2 4]
 -0.000009	 -0.000009	diff=2.12962e-13
  0.000006	  0.000006	diff=2.9753e-13
  0.000011	  0.000011	diff=3.7415e-13
 -0.000008	 -0.000008	diff=1.09474e-14
  0.000005	  0.000005	diff=3.55734e-12
  0.000000	  0.000000	diff=1.56363e-12
  0.000032	  0.000032	diff=1.59095e-10
 -0.000018	 -0.000018	diff=4.4842e-11
  local_diff=2.09954e-10
# W_soft, [4 2]
 -0.000017	 -0.000017	diff=5.5238e-13
 -0.000002	 -0.000002	diff=3.83745e-13
  0.000013	  0.000013	diff=2.08119e-14
  0.000005	  0.000005	diff=2.0477e-13
  0.000034	  0.000034	diff=1.38478e-13
 -0.000021	 -0.000021	diff=2.47524e-13
 -0.000013	 -0.000013	diff=3.38367e-13
  0.000001	  0.000001	diff=1.38259e-14
  local_diff=1.8999e-12
# Num params=182, abs_diff=2.59737e-08
Elapsed time is 2.953428 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 180, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 180
  src input 1: <s> <s> x y
  src mask: 0  0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=7.25527e-13
  0.000000	  0.000000	diff=3.30373e-13
 -0.000000	 -0.000000	diff=6.59947e-13
  0.000000	  0.000000	diff=3.96124e-13
 -0.000000	 -0.000000	diff=6.46696e-13
 -0.000000	 -0.000000	diff=3.60854e-13
  0.000004	  0.000004	diff=1.64823e-11
  0.000002	  0.000002	diff=2.46041e-11
  0.000000	  0.000000	diff=1.89628e-13
 -0.000000	 -0.000000	diff=1.09527e-12
  0.000000	  0.000000	diff=1.38839e-12
 -0.000000	 -0.000000	diff=5.56712e-13
  0.000000	  0.000000	diff=9.92847e-13
  0.000000	  0.000000	diff=7.81952e-13
 -0.000004	 -0.000004	diff=1.75265e-11
 -0.000008	 -0.000008	diff=1.09849e-10
  0.000000	  0.000000	diff=6.72281e-13
 -0.000000	 -0.000000	diff=7.11101e-13
  0.000000	  0.000000	diff=1.69794e-13
 -0.000000	 -0.000000	diff=6.40575e-13
 -0.000000	 -0.000000	diff=9.25861e-13
  0.000000	  0.000000	diff=1.08435e-12
 -0.000000	 -0.000000	diff=1.36348e-11
 -0.000000	 -0.000000	diff=1.1162e-12
 -0.000000	 -0.000000	diff=1.12875e-12
  0.000000	  0.000000	diff=4.8725e-13
 -0.000000	 -0.000000	diff=7.88368e-13
  0.000000	  0.000000	diff=7.05899e-13
  0.000000	  0.000000	diff=6.91426e-13
 -0.000000	 -0.000000	diff=1.12456e-12
  0.000000	  0.000000	diff=2.6305e-13
  0.000000	  0.000000	diff=8.86e-11
  local_diff=2.89331e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.77226e-13
  0.000000	  0.000000	diff=3.53462e-13
 -0.000000	 -0.000000	diff=8.21037e-13
  0.000000	  0.000000	diff=5.901e-13
  0.000000	  0.000000	diff=1.10312e-12
  0.000000	  0.000000	diff=1.46781e-12
  0.000004	  0.000004	diff=3.07653e-13
  0.000006	  0.000006	diff=1.02407e-12
  0.000000	  0.000000	diff=5.89346e-13
 -0.000000	 -0.000000	diff=1.48621e-12
  0.000000	  0.000000	diff=5.84522e-13
 -0.000000	 -0.000000	diff=1.85798e-13
 -0.000000	 -0.000000	diff=1.10088e-12
 -0.000000	 -0.000000	diff=8.72813e-13
 -0.000007	 -0.000007	diff=1.38621e-12
 -0.000011	 -0.000011	diff=2.23378e-12
 -0.000000	 -0.000000	diff=5.47288e-13
  0.000000	  0.000000	diff=1.36964e-12
 -0.000000	 -0.000000	diff=1.24207e-12
 -0.000000	  0.000000	diff=9.60686e-13
 -0.000000	  0.000000	diff=1.04472e-12
  0.000000	  0.000000	diff=1.12475e-12
  0.000000	  0.000000	diff=2.34169e-11
  0.000000	  0.000000	diff=1.64329e-12
  0.000000	  0.000000	diff=1.18779e-12
 -0.000000	 -0.000000	diff=4.0224e-13
  0.000000	  0.000000	diff=5.73037e-13
 -0.000000	 -0.000000	diff=1.38834e-13
 -0.000000	 -0.000000	diff=1.00893e-12
 -0.000000	 -0.000000	diff=1.09906e-12
 -0.000000	 -0.000000	diff=1.10885e-12
 -0.000000	 -0.000000	diff=3.64226e-11
  local_diff=8.76747e-11
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.04432e-12
 -0.000000	 -0.000000	diff=5.66269e-13
 -0.000000	 -0.000000	diff=2.60918e-12
 -0.000000	 -0.000000	diff=1.45481e-12
 -0.000000	 -0.000000	diff=6.97181e-13
 -0.000000	 -0.000000	diff=5.79122e-13
  0.000007	  0.000007	diff=1.62641e-10
  0.000064	  0.000064	diff=1.69971e-10
 -0.000000	 -0.000000	diff=1.37756e-12
  0.000000	  0.000000	diff=1.14599e-12
  0.000000	  0.000000	diff=1.04707e-14
 -0.000000	 -0.000000	diff=3.46298e-12
  0.000000	  0.000000	diff=5.90249e-13
  0.000000	  0.000000	diff=1.689e-12
 -0.000004	 -0.000004	diff=5.70541e-11
 -0.000036	 -0.000036	diff=2.73003e-10
 -0.000000	 -0.000000	diff=2.29041e-13
 -0.000000	 -0.000000	diff=4.95275e-13
 -0.000000	 -0.000000	diff=5.93886e-13
 -0.000000	 -0.000000	diff=6.37361e-13
 -0.000000	 -0.000000	diff=5.84604e-13
 -0.000000	 -0.000000	diff=9.52663e-13
  0.000000	  0.000000	diff=2.34704e-13
  0.000000	  0.000000	diff=6.99316e-13
 -0.000000	 -0.000000	diff=6.75809e-14
 -0.000000	 -0.000000	diff=3.48978e-13
  0.000000	 -0.000000	diff=3.91101e-13
 -0.000000	 -0.000000	diff=1.46681e-14
 -0.000000	 -0.000000	diff=6.65243e-13
 -0.000000	 -0.000000	diff=4.81605e-13
  0.000000	  0.000000	diff=1.11316e-12
  0.000000	  0.000000	diff=3.2885e-13
  0.000000	  0.000000	diff=1.37428e-12
  0.000000	  0.000000	diff=5.87971e-13
  0.000000	  0.000000	diff=1.42301e-13
  0.000000	  0.000000	diff=8.2193e-13
  0.000000	  0.000000	diff=1.59667e-12
  0.000000	  0.000000	diff=9.64348e-13
 -0.000000	 -0.000000	diff=3.62852e-10
 -0.000001	 -0.000001	diff=6.24802e-11
  0.000000	  0.000000	diff=1.3009e-12
  0.000000	  0.000000	diff=5.60905e-13
 -0.000000	 -0.000000	diff=1.06845e-12
  0.000000	  0.000000	diff=9.52214e-13
  0.000000	  0.000000	diff=2.4071e-13
  0.000000	  0.000000	diff=9.41199e-13
  0.000000	  0.000000	diff=2.07587e-12
 -0.000000	 -0.000000	diff=5.40467e-10
  local_diff=1.66416e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.14414e-12
  0.000000	  0.000000	diff=7.24542e-13
 -0.000000	 -0.000000	diff=5.47795e-13
  0.000000	  0.000000	diff=7.66428e-13
  0.000000	  0.000000	diff=7.08064e-13
  0.000000	  0.000000	diff=9.00708e-13
  0.000015	  0.000015	diff=5.81742e-12
  0.000024	  0.000024	diff=4.45132e-11
  0.000000	  0.000000	diff=5.18061e-13
  0.000000	  0.000000	diff=5.38292e-13
  0.000000	  0.000000	diff=2.11489e-13
  0.000000	  0.000000	diff=3.8802e-13
  0.000000	  0.000000	diff=1.61666e-13
  0.000000	  0.000000	diff=4.22923e-13
  0.000024	  0.000024	diff=5.52161e-12
  0.000046	  0.000046	diff=2.53993e-10
  0.000000	  0.000000	diff=9.30403e-13
 -0.000000	 -0.000000	diff=1.54542e-12
 -0.000000	 -0.000000	diff=8.06774e-13
 -0.000000	 -0.000000	diff=3.47252e-13
 -0.000000	 -0.000000	diff=4.79507e-13
 -0.000000	 -0.000000	diff=9.1413e-13
  0.000000	  0.000000	diff=6.49666e-10
  0.000000	  0.000000	diff=2.57365e-11
 -0.000000	 -0.000000	diff=6.15397e-13
 -0.000000	 -0.000000	diff=1.35272e-12
  0.000000	  0.000000	diff=5.85448e-13
 -0.000000	 -0.000000	diff=3.30374e-13
 -0.000000	 -0.000000	diff=1.3182e-12
 -0.000000	 -0.000000	diff=5.95356e-13
 -0.000001	 -0.000001	diff=1.67821e-12
 -0.000001	 -0.000001	diff=2.95445e-09
  local_diff=3.95823e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.73563e-09
 -0.000000	 -0.000000	diff=3.30264e-11
 -0.000003	 -0.000003	diff=1.21769e-09
 -0.000005	 -0.000005	diff=3.20416e-09
  local_diff=6.19051e-09
# W_emb_tgt, [2 4]
 -0.000027	 -0.000027	diff=2.64387e-09
 -0.000001	 -0.000001	diff=1.23787e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000037	 -0.000037	diff=8.6769e-09
  0.000000	  0.000000	diff=6.04578e-10
 -0.000024	 -0.000024	diff=1.27233e-09
 -0.000000	 -0.000000	diff=7.29822e-10
  local_diff=1.51654e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.72623e-15
  0.000000	 -0.000000	diff=2.0995e-15
  0.000000	  0.000000	diff=1.56581e-15
  0.000000	 -0.000000	diff=1.94789e-15
  local_diff=7.33944e-15
# W_h, [2 4]
  0.000014	  0.000014	diff=1.64191e-13
 -0.000010	 -0.000010	diff=1.82098e-12
 -0.000020	 -0.000020	diff=8.50536e-13
  0.000014	  0.000014	diff=1.94071e-12
 -0.000015	 -0.000015	diff=5.23726e-12
 -0.000003	 -0.000003	diff=4.53978e-12
 -0.000069	 -0.000069	diff=4.91424e-10
  0.000023	  0.000023	diff=2.77838e-12
  local_diff=5.08756e-10
# W_soft, [4 2]
  0.000052	  0.000052	diff=6.21727e-13
 -0.000028	 -0.000028	diff=1.61122e-13
 -0.000026	 -0.000026	diff=6.56221e-13
  0.000003	  0.000003	diff=6.92557e-13
  0.000014	  0.000014	diff=6.11559e-16
 -0.000001	 -0.000001	diff=1.18726e-12
 -0.000009	 -0.000009	diff=1.40216e-12
 -0.000004	 -0.000004	diff=9.63901e-13
  local_diff=5.68557e-12
# Num params=180, abs_diff=2.78697e-08
Elapsed time is 2.252504 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 v_a=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.21914e-12
  0.000000	  0.000000	diff=2.03453e-12
 -0.000000	 -0.000000	diff=1.08414e-12
  0.000000	  0.000000	diff=3.52963e-13
 -0.000000	 -0.000000	diff=8.92648e-13
 -0.000000	 -0.000000	diff=1.62804e-12
  0.000003	  0.000003	diff=1.42265e-11
  0.000003	  0.000003	diff=3.31189e-11
  0.000000	  0.000000	diff=1.30119e-12
 -0.000000	 -0.000000	diff=1.39862e-12
  0.000000	  0.000000	diff=1.91037e-12
 -0.000000	 -0.000000	diff=1.55124e-12
  0.000000	  0.000000	diff=1.31835e-12
  0.000000	  0.000000	diff=7.75057e-13
 -0.000006	 -0.000006	diff=3.56686e-11
 -0.000011	 -0.000011	diff=1.35085e-10
  0.000000	  0.000000	diff=8.70774e-13
 -0.000000	 -0.000000	diff=1.18393e-12
  0.000000	  0.000000	diff=1.328e-12
 -0.000000	 -0.000000	diff=1.49884e-12
  0.000000	  0.000000	diff=1.0172e-12
  0.000000	  0.000000	diff=1.02992e-12
 -0.000000	 -0.000000	diff=1.34342e-10
 -0.000000	 -0.000000	diff=2.32447e-12
 -0.000000	 -0.000000	diff=9.45594e-13
  0.000000	  0.000000	diff=6.25907e-13
 -0.000000	 -0.000000	diff=1.45837e-12
  0.000000	  0.000000	diff=1.06635e-12
 -0.000000	 -0.000000	diff=6.8813e-13
 -0.000000	 -0.000000	diff=1.9757e-12
  0.000000	  0.000000	diff=7.78732e-14
  0.000000	  0.000000	diff=1.31043e-10
  local_diff=5.15042e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.02997e-12
  0.000000	  0.000000	diff=1.3527e-12
  0.000000	  0.000000	diff=2.13038e-14
  0.000000	  0.000000	diff=6.30099e-13
  0.000000	  0.000000	diff=4.03861e-13
 -0.000000	 -0.000000	diff=4.09256e-13
 -0.000007	 -0.000007	diff=1.64441e-12
  0.000001	  0.000001	diff=5.66841e-12
 -0.000000	 -0.000000	diff=8.32569e-13
 -0.000000	 -0.000000	diff=8.74844e-13
 -0.000000	 -0.000000	diff=1.86688e-12
 -0.000000	 -0.000000	diff=1.13211e-12
 -0.000000	 -0.000000	diff=1.36893e-12
  0.000000	  0.000000	diff=1.04505e-12
  0.000005	  0.000005	diff=1.95071e-12
 -0.000003	 -0.000003	diff=6.48931e-12
  0.000000	  0.000000	diff=2.21508e-13
  0.000000	  0.000000	diff=1.75907e-13
  0.000000	  0.000000	diff=1.37113e-12
  0.000000	  0.000000	diff=1.58948e-12
  0.000000	  0.000000	diff=8.79805e-13
 -0.000000	 -0.000000	diff=1.02887e-12
 -0.000000	 -0.000000	diff=1.06276e-10
  0.000000	  0.000000	diff=8.28464e-13
 -0.000000	 -0.000000	diff=1.76287e-12
 -0.000000	 -0.000000	diff=1.84826e-12
 -0.000000	 -0.000000	diff=1.50769e-12
 -0.000000	 -0.000000	diff=1.5925e-12
 -0.000000	 -0.000000	diff=1.4096e-12
  0.000000	  0.000000	diff=1.17717e-12
  0.000000	  0.000000	diff=1.20899e-12
 -0.000000	 -0.000000	diff=1.18013e-10
  local_diff=2.67612e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.84834e-12
 -0.000000	 -0.000000	diff=5.95989e-14
  0.000000	  0.000000	diff=1.06029e-12
 -0.000000	 -0.000000	diff=4.87089e-14
  0.000000	  0.000000	diff=1.44694e-12
 -0.000000	 -0.000000	diff=1.56916e-12
 -0.000007	 -0.000007	diff=1.20166e-10
  0.000032	  0.000032	diff=2.38629e-10
  0.000000	  0.000000	diff=1.16166e-12
  0.000000	  0.000000	diff=7.57252e-13
 -0.000000	 -0.000000	diff=1.87051e-12
 -0.000000	 -0.000000	diff=2.82517e-12
  0.000000	  0.000000	diff=1.5794e-12
  0.000000	  0.000000	diff=6.67025e-13
  0.000004	  0.000004	diff=3.86825e-11
 -0.000031	 -0.000031	diff=3.70928e-10
 -0.000000	 -0.000000	diff=1.00294e-12
  0.000000	  0.000000	diff=1.01068e-12
 -0.000000	 -0.000000	diff=1.11095e-12
 -0.000000	  0.000000	diff=8.91698e-13
 -0.000000	 -0.000000	diff=1.64908e-13
  0.000000	  0.000000	diff=8.73505e-13
  0.000000	  0.000000	diff=9.03275e-13
 -0.000000	 -0.000000	diff=5.01985e-13
  0.000000	  0.000000	diff=2.65617e-13
 -0.000000	 -0.000000	diff=1.04406e-12
  0.000000	  0.000000	diff=1.32717e-13
 -0.000000	 -0.000000	diff=6.49373e-13
  0.000000	  0.000000	diff=3.72845e-13
 -0.000000	 -0.000000	diff=5.43755e-13
 -0.000000	 -0.000000	diff=1.27143e-12
  0.000000	  0.000000	diff=1.24055e-12
 -0.000000	 -0.000000	diff=9.01832e-13
  0.000000	  0.000000	diff=9.75696e-13
 -0.000000	 -0.000000	diff=4.58081e-13
 -0.000000	 -0.000000	diff=1.57529e-12
 -0.000000	 -0.000000	diff=1.37072e-12
  0.000000	  0.000000	diff=1.64666e-12
  0.000000	  0.000000	diff=5.79812e-10
 -0.000001	 -0.000001	diff=2.40755e-11
 -0.000000	 -0.000000	diff=1.4908e-12
  0.000000	  0.000000	diff=1.37224e-12
  0.000000	  0.000000	diff=6.41895e-13
  0.000000	  0.000000	diff=9.31566e-13
 -0.000000	 -0.000000	diff=1.12611e-12
  0.000000	  0.000000	diff=1.0162e-12
 -0.000000	 -0.000000	diff=5.52999e-12
  0.000000	  0.000000	diff=7.78741e-10
  local_diff=2.19694e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.09763e-12
  0.000000	  0.000000	diff=1.48361e-12
  0.000000	  0.000000	diff=1.06353e-12
  0.000000	  0.000000	diff=6.74564e-13
 -0.000000	 -0.000000	diff=1.04716e-12
  0.000000	  0.000000	diff=9.63086e-13
 -0.000014	 -0.000014	diff=5.07338e-12
  0.000019	  0.000019	diff=2.40577e-11
 -0.000000	 -0.000000	diff=9.41081e-13
  0.000000	  0.000000	diff=1.41527e-12
 -0.000000	 -0.000000	diff=1.47241e-12
  0.000000	  0.000000	diff=1.35831e-12
 -0.000000	 -0.000000	diff=2.44564e-12
  0.000000	  0.000000	diff=2.04321e-12
 -0.000018	 -0.000018	diff=4.33427e-11
  0.000021	  0.000021	diff=7.38484e-11
 -0.000000	 -0.000000	diff=1.26653e-12
 -0.000000	 -0.000000	diff=2.31901e-13
  0.000000	  0.000000	diff=1.22254e-12
  0.000000	  0.000000	diff=2.07891e-12
  0.000000	  0.000000	diff=1.21242e-12
  0.000000	  0.000000	diff=1.4157e-12
 -0.000000	 -0.000000	diff=8.11944e-10
  0.000000	  0.000000	diff=2.2411e-11
  0.000000	  0.000000	diff=1.12703e-12
 -0.000000	 -0.000000	diff=7.37007e-13
 -0.000000	 -0.000000	diff=1.16271e-12
 -0.000000	 -0.000000	diff=1.04809e-12
  0.000000	  0.000000	diff=4.66619e-13
 -0.000000	 -0.000000	diff=1.21589e-12
  0.000001	  0.000001	diff=4.5497e-12
 -0.000001	 -0.000001	diff=1.90854e-09
  local_diff=2.92296e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.27732e-09
 -0.000002	 -0.000002	diff=1.16182e-09
 -0.000002	 -0.000002	diff=9.71432e-10
 -0.000005	 -0.000005	diff=1.09873e-09
  local_diff=4.5093e-09
# W_emb_tgt, [2 4]
 -0.000016	 -0.000016	diff=4.41251e-09
  0.000002	  0.000002	diff=1.08315e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000014	 -0.000014	diff=5.36542e-09
  0.000002	  0.000002	diff=1.10349e-09
 -0.000005	 -0.000005	diff=2.92407e-09
  0.000002	  0.000002	diff=1.17214e-09
  local_diff=1.60608e-08
# W_a, [2 2]
  0.000000	 -0.000000	diff=4.40436e-23
  0.000000	 -0.000000	diff=7.2354e-23
  0.000000	 -0.000000	diff=1.65894e-22
  0.000000	 -0.000000	diff=2.95469e-22
  local_diff=5.7776e-22
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.25454e-12
  0.000000	  0.000000	diff=1.82986e-12
  local_diff=3.08441e-12
# W_h, [2 4]
 -0.000014	 -0.000014	diff=7.44315e-13
  0.000010	  0.000010	diff=1.54572e-12
  0.000018	  0.000018	diff=6.18696e-13
 -0.000013	 -0.000013	diff=1.6273e-13
  0.000005	  0.000005	diff=4.70519e-12
  0.000000	  0.000000	diff=8.86246e-14
  0.000032	  0.000032	diff=1.58294e-10
 -0.000018	 -0.000018	diff=4.72752e-11
  local_diff=2.13434e-10
# W_soft, [4 2]
 -0.000019	 -0.000019	diff=4.15344e-13
 -0.000001	 -0.000001	diff=7.38931e-13
  0.000015	  0.000015	diff=5.71911e-13
  0.000005	  0.000005	diff=1.11599e-12
  0.000025	  0.000025	diff=1.1856e-12
 -0.000019	 -0.000019	diff=3.03095e-14
 -0.000007	 -0.000007	diff=5.94445e-13
  0.000001	  0.000001	diff=1.09243e-12
  local_diff=5.74496e-12
# Num params=182, abs_diff=2.66949e-08
Elapsed time is 2.279380 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 274, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 274
  src input 1: z z x xz
  src mask: 1  1  1  1
  tgt input 1: <s> abc ac c </s>
  tgt output 1: abc ac c </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.23022e-12
 -0.000000	 -0.000000	diff=1.19412e-12
 -0.000000	 -0.000000	diff=8.58795e-13
 -0.000000	 -0.000000	diff=3.9999e-14
 -0.000000	 -0.000000	diff=5.70238e-13
 -0.000000	 -0.000000	diff=2.01653e-12
  0.000002	  0.000002	diff=3.48763e-12
 -0.000000	 -0.000000	diff=9.06566e-13
  0.000000	  0.000000	diff=7.13041e-13
  0.000000	  0.000000	diff=1.2889e-14
  0.000000	  0.000000	diff=1.40761e-12
  0.000000	  0.000000	diff=2.51705e-12
  0.000000	  0.000000	diff=1.91184e-12
  0.000000	  0.000000	diff=1.41422e-12
 -0.000003	 -0.000003	diff=1.02339e-11
  0.000000	  0.000000	diff=3.08625e-12
  0.000000	  0.000000	diff=7.42827e-13
  0.000000	  0.000000	diff=4.1143e-13
  0.000000	  0.000000	diff=6.03888e-13
  0.000000	  0.000000	diff=1.90831e-13
  0.000000	  0.000000	diff=1.05393e-12
  0.000000	  0.000000	diff=9.12163e-13
 -0.000000	 -0.000000	diff=1.20387e-10
  0.000000	  0.000000	diff=2.16986e-12
 -0.000000	 -0.000000	diff=1.45249e-12
 -0.000000	 -0.000000	diff=6.1063e-13
 -0.000000	 -0.000000	diff=3.81888e-13
 -0.000000	 -0.000000	diff=1.2154e-12
 -0.000000	 -0.000000	diff=1.16281e-12
 -0.000000	 -0.000000	diff=1.12849e-12
  0.000000	  0.000000	diff=1.13005e-12
 -0.000000	 -0.000000	diff=1.47578e-11
  local_diff=1.79912e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.23647e-12
  0.000000	  0.000000	diff=1.04978e-12
  0.000000	  0.000000	diff=1.78552e-12
  0.000000	  0.000000	diff=2.15782e-13
 -0.000000	 -0.000000	diff=7.84835e-13
  0.000000	  0.000000	diff=1.53679e-12
 -0.000003	 -0.000003	diff=2.80371e-12
  0.000001	  0.000001	diff=2.30662e-12
 -0.000000	 -0.000000	diff=1.10787e-12
 -0.000000	 -0.000000	diff=1.69504e-12
 -0.000000	 -0.000000	diff=3.38081e-15
 -0.000000	 -0.000000	diff=8.55376e-13
  0.000000	  0.000000	diff=6.48237e-13
 -0.000000	 -0.000000	diff=9.87026e-13
  0.000003	  0.000003	diff=1.02957e-12
 -0.000001	 -0.000001	diff=1.89779e-12
  0.000000	  0.000000	diff=2.23183e-13
  0.000000	  0.000000	diff=1.66298e-12
  0.000000	  0.000000	diff=1.72447e-12
  0.000000	  0.000000	diff=1.49593e-12
  0.000000	 -0.000000	diff=4.26697e-13
  0.000000	  0.000000	diff=3.43695e-13
 -0.000000	 -0.000000	diff=1.53499e-10
  0.000000	  0.000000	diff=1.09749e-12
 -0.000000	 -0.000000	diff=2.13796e-12
 -0.000000	 -0.000000	diff=2.22553e-12
 -0.000000	 -0.000000	diff=4.18131e-13
 -0.000000	 -0.000000	diff=1.02178e-12
 -0.000000	  0.000000	diff=1.94108e-12
 -0.000000	 -0.000000	diff=9.91363e-13
  0.000000	  0.000000	diff=5.99877e-13
 -0.000000	 -0.000000	diff=5.5378e-11
  local_diff=2.45131e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.74888e-12
  0.000000	  0.000000	diff=2.03024e-12
 -0.000000	 -0.000000	diff=6.92659e-13
 -0.000000	 -0.000000	diff=1.58111e-12
  0.000000	  0.000000	diff=8.3904e-13
  0.000000	  0.000000	diff=1.66955e-12
  0.000001	  0.000001	diff=7.12587e-13
 -0.000003	 -0.000003	diff=2.17045e-12
  0.000000	  0.000000	diff=2.0064e-12
 -0.000000	 -0.000000	diff=2.31802e-12
 -0.000000	 -0.000000	diff=1.5327e-12
 -0.000000	 -0.000000	diff=2.51756e-12
  0.000000	  0.000000	diff=1.77611e-12
 -0.000000	 -0.000000	diff=2.99551e-13
  0.000005	  0.000005	diff=3.83861e-11
 -0.000003	 -0.000003	diff=9.77767e-11
  0.000000	 -0.000000	diff=6.5058e-17
  0.000000	 -0.000000	diff=2.15212e-14
  0.000000	 -0.000000	diff=4.41316e-15
  0.000000	  0.000000	diff=6.57852e-15
  0.000000	 -0.000000	diff=4.17132e-15
  0.000000	 -0.000000	diff=2.23264e-15
 -0.000000	 -0.000000	diff=8.61279e-13
  0.000000	  0.000000	diff=2.16615e-12
  0.000000	 -0.000000	diff=1.33309e-15
  0.000000	 -0.000000	diff=3.81924e-14
  0.000000	  0.000000	diff=3.38897e-15
  0.000000	  0.000000	diff=1.13688e-14
  0.000000	  0.000000	diff=3.38354e-15
  0.000000	 -0.000000	diff=3.03779e-14
  0.000000	  0.000000	diff=9.18352e-13
  0.000000	  0.000000	diff=1.80701e-12
  0.000000	  0.000000	diff=1.7227e-12
  0.000000	  0.000000	diff=1.33475e-12
 -0.000000	 -0.000000	diff=1.9263e-12
 -0.000000	 -0.000000	diff=1.33096e-12
 -0.000000	 -0.000000	diff=3.94178e-12
  0.000000	  0.000000	diff=2.46907e-13
  0.000000	  0.000000	diff=3.32726e-11
 -0.000000	 -0.000000	diff=9.51684e-13
 -0.000000	 -0.000000	diff=1.32183e-12
  0.000000	  0.000000	diff=2.495e-12
  0.000000	  0.000000	diff=6.07019e-13
 -0.000000	 -0.000000	diff=1.52134e-12
 -0.000000	 -0.000000	diff=1.82742e-12
  0.000000	  0.000000	diff=2.94774e-12
 -0.000000	 -0.000000	diff=1.11693e-12
 -0.000000	 -0.000000	diff=1.1821e-10
  local_diff=3.39712e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.67311e-12
  0.000000	  0.000000	diff=3.22642e-12
 -0.000000	 -0.000000	diff=1.05176e-12
 -0.000000	 -0.000000	diff=3.31147e-12
 -0.000000	 -0.000000	diff=1.55757e-12
  0.000000	  0.000000	diff=1.59522e-12
  0.000001	  0.000001	diff=4.16177e-12
 -0.000003	 -0.000003	diff=7.77068e-12
 -0.000000	 -0.000000	diff=1.52437e-12
  0.000000	  0.000000	diff=7.72478e-13
 -0.000000	 -0.000000	diff=1.68849e-12
 -0.000000	 -0.000000	diff=2.12762e-12
 -0.000000	 -0.000000	diff=2.11655e-13
 -0.000000	 -0.000000	diff=8.23558e-13
  0.000002	  0.000002	diff=3.35599e-13
 -0.000003	 -0.000003	diff=8.59561e-12
  0.000000	  0.000000	diff=8.73987e-13
 -0.000000	 -0.000000	diff=1.47594e-12
  0.000000	  0.000000	diff=8.6902e-13
  0.000000	  0.000000	diff=2.55329e-12
  0.000000	  0.000000	diff=2.70521e-12
 -0.000000	  0.000000	diff=2.01679e-12
 -0.000000	 -0.000000	diff=3.79663e-11
  0.000000	  0.000000	diff=3.79266e-12
 -0.000000	 -0.000000	diff=1.82785e-12
  0.000000	  0.000000	diff=1.17417e-12
 -0.000000	 -0.000000	diff=4.76171e-13
 -0.000000	 -0.000000	diff=1.51184e-12
 -0.000000	 -0.000000	diff=6.2027e-13
 -0.000000	 -0.000000	diff=5.48022e-13
  0.000000	  0.000000	diff=6.17651e-13
 -0.000000	 -0.000000	diff=5.36312e-11
  local_diff=1.53088e-10
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=5.57627e-10
  0.000002	  0.000002	diff=1.44268e-09
 -0.000002	 -0.000002	diff=6.67928e-10
  0.000002	  0.000002	diff=2.05108e-09
  local_diff=4.71931e-09
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.95306e-12
  0.000000	  0.000000	diff=1.78614e-12
  0.000000	  0.000000	diff=2.24426e-12
 -0.000000	 -0.000000	diff=7.11311e-13
 -0.000000	 -0.000000	diff=1.41524e-12
  0.000000	  0.000000	diff=2.15068e-12
  0.000000	  0.000000	diff=3.51551e-12
 -0.000000	 -0.000000	diff=1.58857e-12
 -0.000000	 -0.000000	diff=1.60405e-12
  0.000000	  0.000000	diff=1.207e-12
  0.000000	  0.000000	diff=6.83875e-13
 -0.000000	 -0.000000	diff=1.6316e-12
 -0.000000	 -0.000000	diff=1.09271e-12
 -0.000000	 -0.000000	diff=1.61656e-12
 -0.000000	 -0.000000	diff=2.26615e-12
  0.000000	  0.000000	diff=2.8908e-12
  0.000000	  0.000000	diff=1.8694e-12
 -0.000000	 -0.000000	diff=1.52738e-12
 -0.000000	 -0.000000	diff=9.63108e-13
  0.000000	  0.000000	diff=1.61658e-12
 -0.000000	 -0.000000	diff=2.09153e-12
  0.000000	  0.000000	diff=9.78767e-13
 -0.000000	 -0.000000	diff=2.6521e-12
  0.000000	  0.000000	diff=1.57575e-12
  0.000000	  0.000000	diff=1.8523e-12
 -0.000000	 -0.000000	diff=6.20494e-13
 -0.000000	 -0.000000	diff=2.3121e-12
  0.000000	  0.000000	diff=1.199e-12
 -0.000000	 -0.000000	diff=2.11752e-12
  0.000000	  0.000000	diff=8.91448e-13
 -0.000000	 -0.000000	diff=2.71103e-12
  0.000000	  0.000000	diff=1.99321e-12
  local_diff=5.53293e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.83836e-10
  0.000000	  0.000000	diff=9.37951e-12
 -0.000000	 -0.000000	diff=1.28762e-11
  0.000000	  0.000000	diff=2.62602e-12
 -0.000000	 -0.000000	diff=1.66504e-11
  0.000000	  0.000000	diff=4.43127e-12
 -0.000000	 -0.000000	diff=2.29594e-11
  0.000000	  0.000000	diff=3.19858e-12
  local_diff=2.55957e-10
# W_emb_tgt, [2 4]
 -0.000000	 -0.000000	diff=1.32473e-09
  0.000002	  0.000002	diff=1.16526e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000005	  0.000005	diff=5.1262e-10
 -0.000000	 -0.000000	diff=2.84464e-11
  0.000002	  0.000002	diff=1.24745e-10
 -0.000000	 -0.000000	diff=2.48005e-11
  local_diff=3.1806e-09
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.50791e-12
  0.000000	  0.000000	diff=1.49041e-12
  0.000000	  0.000000	diff=1.83057e-12
 -0.000000	 -0.000000	diff=4.26305e-13
 -0.000000	 -0.000000	diff=3.02336e-13
  0.000000	  0.000000	diff=1.22314e-12
 -0.000000	 -0.000000	diff=6.44501e-13
  0.000000	  0.000000	diff=9.30632e-14
 -0.000000	 -0.000000	diff=8.07036e-13
 -0.000000	 -0.000000	diff=2.12392e-12
 -0.000000	 -0.000000	diff=1.33262e-12
 -0.000000	 -0.000000	diff=7.1038e-13
  0.000000	  0.000000	diff=4.58188e-13
 -0.000000	 -0.000000	diff=9.92678e-13
  0.000000	  0.000000	diff=2.40455e-12
 -0.000000	 -0.000000	diff=6.35338e-13
 -0.000000	 -0.000000	diff=5.54264e-13
  0.000000	  0.000000	diff=7.11014e-13
  0.000000	  0.000000	diff=1.84565e-12
 -0.000000	 -0.000000	diff=1.18289e-12
  0.000000	  0.000000	diff=4.94356e-13
  0.000000	  0.000000	diff=4.18077e-13
 -0.000000	 -0.000000	diff=2.29356e-12
  0.000000	  0.000000	diff=1.11666e-12
 -0.000000	 -0.000000	diff=9.28499e-13
 -0.000000	  0.000000	diff=1.65723e-12
  0.000000	  0.000000	diff=1.38414e-12
 -0.000000	 -0.000000	diff=1.28791e-12
  0.000000	  0.000000	diff=5.48894e-13
  0.000000	  0.000000	diff=5.1955e-14
 -0.000000	 -0.000000	diff=1.30406e-12
 -0.000000	 -0.000000	diff=3.85946e-13
  local_diff=3.31481e-11
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.61256e-11
 -0.000000	 -0.000000	diff=4.34886e-11
 -0.000000	 -0.000000	diff=3.66092e-12
 -0.000000	 -0.000000	diff=5.28448e-12
 -0.000000	 -0.000000	diff=1.55763e-11
 -0.000000	 -0.000000	diff=1.3238e-11
 -0.000000	 -0.000000	diff=1.55576e-11
 -0.000000	 -0.000000	diff=1.30239e-11
  local_diff=1.85955e-10
# W_pos, [2 2]
  0.000000	  0.000000	diff=6.53625e-14
  0.000000	 -0.000000	diff=3.39823e-14
  0.000000	 -0.000000	diff=3.60051e-14
  0.000000	  0.000000	diff=1.87192e-14
  local_diff=1.54069e-13
# v_pos, [1 2]
  0.000000	 -0.000000	diff=3.91851e-14
  0.000000	 -0.000000	diff=8.70414e-17
  local_diff=3.92722e-14
# W_h, [2 4]
  0.000001	  0.000001	diff=1.26146e-12
 -0.000002	 -0.000002	diff=1.34946e-12
 -0.000001	 -0.000001	diff=1.65191e-12
  0.000003	  0.000003	diff=2.64529e-13
  0.000005	  0.000005	diff=5.51349e-12
 -0.000007	 -0.000007	diff=1.6944e-12
  0.000001	  0.000001	diff=8.0685e-12
  0.000003	  0.000003	diff=4.6191e-12
  local_diff=2.44229e-11
# W_soft, [8 2]
  0.000001	  0.000001	diff=1.3059e-12
 -0.000003	 -0.000003	diff=3.26301e-12
  0.000002	  0.000002	diff=2.42091e-12
  0.000002	  0.000002	diff=8.20029e-13
 -0.000002	 -0.000002	diff=5.6901e-13
  0.000001	  0.000001	diff=4.50568e-13
  0.000002	  0.000002	diff=1.24056e-12
 -0.000003	 -0.000003	diff=1.29871e-12
 -0.000002	 -0.000002	diff=1.54755e-12
 -0.000001	 -0.000001	diff=1.38859e-12
  0.000000	  0.000000	diff=1.19185e-12
 -0.000001	 -0.000001	diff=1.922e-12
  0.000003	  0.000003	diff=2.45026e-12
 -0.000001	 -0.000001	diff=2.01515e-12
 -0.000000	 -0.000000	diff=1.29701e-12
  0.000002	  0.000002	diff=9.77363e-13
  local_diff=2.41585e-11
# Num params=274, abs_diff=9.39692e-09
Elapsed time is 5.534961 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 402, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 402
  src input 1: <s> <s> <s> z
  src mask: 0  0  0  1
  tgt input 1: <s> c c </s> </s>
  tgt output 1: c c </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=3.20733e-13
  0.000000	  0.000000	diff=1.30488e-12
  0.000000	  0.000000	diff=1.01557e-13
 -0.000000	 -0.000000	diff=9.55281e-13
  0.000000	  0.000000	diff=7.0376e-13
  0.000000	  0.000000	diff=1.95301e-13
 -0.000001	 -0.000001	diff=4.82563e-13
  0.000000	  0.000000	diff=1.6489e-12
 -0.000000	 -0.000000	diff=9.88457e-14
  0.000000	  0.000000	diff=8.46162e-13
 -0.000000	 -0.000000	diff=7.91107e-13
  0.000000	  0.000000	diff=2.54891e-13
 -0.000000	 -0.000000	diff=6.27843e-13
 -0.000000	 -0.000000	diff=3.61808e-14
  0.000000	  0.000000	diff=7.43436e-14
  0.000000	  0.000000	diff=1.32658e-12
 -0.000000	 -0.000000	diff=2.96139e-13
  0.000000	  0.000000	diff=9.13625e-13
 -0.000000	 -0.000000	diff=6.22067e-13
  0.000000	  0.000000	diff=1.9993e-13
 -0.000000	 -0.000000	diff=9.93419e-14
 -0.000000	 -0.000000	diff=8.43285e-13
  0.000000	  0.000000	diff=3.54403e-11
  0.000000	  0.000000	diff=1.94802e-12
  0.000000	  0.000000	diff=1.06797e-12
 -0.000000	 -0.000000	diff=3.79879e-13
  0.000000	  0.000000	diff=3.8111e-13
 -0.000000	 -0.000000	diff=1.56749e-12
  0.000000	  0.000000	diff=3.13577e-13
  0.000000	  0.000000	diff=2.53919e-13
 -0.000000	 -0.000000	diff=2.22443e-14
 -0.000000	 -0.000000	diff=5.68184e-12
  local_diff=5.97996e-11
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=9.10855e-13
 -0.000000	 -0.000000	diff=2.61583e-13
 -0.000000	 -0.000000	diff=6.0144e-13
 -0.000000	 -0.000000	diff=2.2888e-13
 -0.000000	 -0.000000	diff=1.39382e-12
 -0.000000	 -0.000000	diff=1.45661e-13
  0.000000	  0.000000	diff=5.1981e-14
 -0.000000	 -0.000000	diff=6.72949e-13
  0.000000	  0.000000	diff=9.64446e-14
  0.000000	  0.000000	diff=9.6199e-14
  0.000000	  0.000000	diff=3.32207e-13
  0.000000	  0.000000	diff=3.06012e-13
 -0.000000	 -0.000000	diff=1.35345e-12
  0.000000	  0.000000	diff=2.59193e-13
 -0.000000	 -0.000000	diff=6.16629e-13
  0.000000	  0.000000	diff=1.01639e-12
 -0.000000	 -0.000000	diff=2.7595e-13
  0.000000	 -0.000000	diff=8.32833e-13
 -0.000000	 -0.000000	diff=2.76837e-14
  0.000000	 -0.000000	diff=2.45619e-13
  0.000000	 -0.000000	diff=2.85009e-13
  0.000000	  0.000000	diff=5.90414e-13
  0.000000	  0.000000	diff=5.359e-11
 -0.000000	 -0.000000	diff=1.23089e-12
  0.000000	  0.000000	diff=1.16709e-12
  0.000000	  0.000000	diff=1.01407e-12
  0.000000	  0.000000	diff=1.16877e-12
  0.000000	  0.000000	diff=3.01896e-13
  0.000000	  0.000000	diff=3.35128e-13
 -0.000000	 -0.000000	diff=7.24081e-13
 -0.000000	 -0.000000	diff=2.2225e-13
  0.000000	  0.000000	diff=2.79563e-11
  local_diff=9.83117e-11
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=6.63196e-14
  0.000000	  0.000000	diff=2.29914e-12
  0.000000	  0.000000	diff=9.21502e-13
 -0.000000	 -0.000000	diff=8.80914e-13
 -0.000000	 -0.000000	diff=1.9919e-13
  0.000000	  0.000000	diff=9.08404e-14
  0.000003	  0.000003	diff=5.26647e-12
 -0.000000	 -0.000000	diff=4.12696e-11
 -0.000000	 -0.000000	diff=3.63516e-13
  0.000000	  0.000000	diff=4.45598e-13
  0.000000	  0.000000	diff=1.11952e-12
 -0.000000	 -0.000000	diff=3.94732e-13
 -0.000000	 -0.000000	diff=8.39424e-14
  0.000000	  0.000000	diff=8.26258e-13
  0.000002	  0.000002	diff=1.88469e-11
 -0.000001	 -0.000001	diff=7.29825e-12
  0.000000	  0.000000	diff=1.23483e-12
  0.000000	 -0.000000	diff=1.09473e-13
  0.000000	 -0.000000	diff=1.15538e-14
  0.000000	 -0.000000	diff=6.02847e-14
  0.000000	  0.000000	diff=8.79098e-14
  0.000000	 -0.000000	diff=1.35097e-13
 -0.000000	 -0.000000	diff=5.9929e-14
 -0.000000	 -0.000000	diff=2.39744e-13
  0.000000	  0.000000	diff=1.21201e-12
  0.000000	 -0.000000	diff=1.61963e-13
  0.000000	 -0.000000	diff=4.03123e-14
  0.000000	 -0.000000	diff=5.1363e-14
  0.000000	  0.000000	diff=4.09441e-14
  0.000000	 -0.000000	diff=1.61863e-13
 -0.000000	 -0.000000	diff=5.72678e-13
 -0.000000	 -0.000000	diff=3.85974e-13
 -0.000000	 -0.000000	diff=2.12244e-13
  0.000000	  0.000000	diff=5.15842e-14
  0.000000	  0.000000	diff=7.40385e-13
  0.000000	  0.000000	diff=1.00064e-12
  0.000000	  0.000000	diff=8.21576e-14
  0.000000	  0.000000	diff=1.89732e-13
 -0.000000	 -0.000000	diff=8.77756e-11
  0.000000	  0.000000	diff=2.3616e-12
 -0.000000	 -0.000000	diff=2.36679e-13
  0.000000	  0.000000	diff=1.30202e-13
  0.000000	  0.000000	diff=1.42537e-13
  0.000000	  0.000000	diff=1.61907e-13
 -0.000000	 -0.000000	diff=9.65196e-13
  0.000000	  0.000000	diff=3.16837e-13
  0.000000	  0.000000	diff=3.30968e-12
  0.000000	  0.000000	diff=1.21231e-10
  local_diff=3.03847e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=5.78011e-14
  0.000000	  0.000000	diff=8.55938e-13
 -0.000000	 -0.000000	diff=8.58726e-13
  0.000000	  0.000000	diff=1.47014e-12
  0.000000	  0.000000	diff=2.66126e-13
  0.000000	  0.000000	diff=1.73482e-12
  0.000008	  0.000008	diff=8.37462e-12
 -0.000002	 -0.000002	diff=3.36601e-12
  0.000000	  0.000000	diff=6.92732e-13
  0.000000	  0.000000	diff=2.86366e-13
  0.000000	  0.000000	diff=1.82191e-13
  0.000000	  0.000000	diff=3.96762e-13
  0.000000	  0.000000	diff=8.76011e-13
  0.000000	  0.000000	diff=9.48993e-13
  0.000005	  0.000005	diff=2.18052e-11
 -0.000001	 -0.000001	diff=3.8741e-12
  0.000000	  0.000000	diff=3.1281e-13
 -0.000000	 -0.000000	diff=3.26174e-13
 -0.000000	 -0.000000	diff=4.18303e-14
 -0.000000	 -0.000000	diff=1.17294e-12
 -0.000000	 -0.000000	diff=1.17091e-12
 -0.000000	 -0.000000	diff=1.39273e-12
  0.000000	  0.000000	diff=5.78432e-10
 -0.000000	 -0.000000	diff=2.44413e-12
  0.000000	 -0.000000	diff=2.7856e-13
 -0.000000	 -0.000000	diff=7.58057e-14
  0.000000	  0.000000	diff=3.94155e-13
  0.000000	  0.000000	diff=6.54742e-13
  0.000000	  0.000000	diff=5.69421e-13
 -0.000000	 -0.000000	diff=1.70224e-12
 -0.000000	 -0.000000	diff=2.85616e-12
  0.000000	  0.000000	diff=1.0723e-10
  local_diff=7.45101e-10
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=4.64275e-10
  0.000001	  0.000001	diff=1.45198e-09
  0.000001	  0.000001	diff=3.52292e-10
 -0.000001	 -0.000001	diff=1.10242e-09
  local_diff=3.37097e-09
# W_src_char{1}, [8 4]
  0.000000	  0.000000	diff=1.39611e-14
  0.000000	 -0.000000	diff=1.93933e-14
  0.000000	 -0.000000	diff=7.32166e-15
  0.000000	 -0.000000	diff=6.81837e-15
  0.000000	  0.000000	diff=5.35389e-15
  0.000000	 -0.000000	diff=1.35748e-14
  0.000000	  0.000000	diff=7.09829e-14
 -0.000000	 -0.000000	diff=1.58348e-12
  0.000000	  0.000000	diff=1.59337e-14
  0.000000	 -0.000000	diff=1.26224e-14
  0.000000	  0.000000	diff=5.24414e-15
  0.000000	 -0.000000	diff=5.32016e-15
  0.000000	  0.000000	diff=1.56783e-14
  0.000000	 -0.000000	diff=9.58651e-15
  0.000000	  0.000000	diff=1.57682e-12
 -0.000000	 -0.000000	diff=2.05051e-13
  0.000000	 -0.000000	diff=1.4463e-16
  0.000000	 -0.000000	diff=4.78145e-16
  0.000000	  0.000000	diff=4.12735e-17
  0.000000	 -0.000000	diff=5.72867e-16
  0.000000	  0.000000	diff=3.57364e-17
  0.000000	 -0.000000	diff=7.34026e-16
  0.000000	  0.000000	diff=6.68301e-14
 -0.000000	 -0.000000	diff=1.11104e-12
  0.000000	 -0.000000	diff=1.11586e-16
  0.000000	 -0.000000	diff=3.3444e-16
  0.000000	  0.000000	diff=4.83824e-17
  0.000000	 -0.000000	diff=4.04319e-16
  0.000000	  0.000000	diff=3.99562e-17
  0.000000	 -0.000000	diff=5.16721e-16
  0.000000	  0.000000	diff=5.29936e-14
  0.000000	 -0.000000	diff=2.1785e-13
  local_diff=5.01933e-12
# W_src_char{2}, [8 4]
  0.000000	  0.000000	diff=1.13292e-17
  0.000000	 -0.000000	diff=4.83824e-16
  0.000000	  0.000000	diff=1.03544e-17
  0.000000	 -0.000000	diff=5.2576e-16
  0.000000	  0.000000	diff=1.31605e-17
  0.000000	 -0.000000	diff=4.3066e-16
 -0.000000	 -0.000000	diff=6.57186e-13
  0.000000	  0.000000	diff=3.78116e-13
  0.000000	  0.000000	diff=6.81847e-18
  0.000000	 -0.000000	diff=2.78867e-16
  0.000000	  0.000000	diff=7.79858e-18
  0.000000	 -0.000000	diff=3.21541e-16
  0.000000	  0.000000	diff=8.79478e-18
  0.000000	 -0.000000	diff=2.24537e-16
 -0.000000	 -0.000000	diff=6.33654e-13
  0.000000	 -0.000000	diff=1.30023e-13
  0.000000	  0.000000	diff=1.97893e-21
  0.000000	  0.000000	diff=2.08128e-19
  0.000000	 -0.000000	diff=1.93348e-21
  0.000000	  0.000000	diff=2.58791e-19
  0.000000	 -0.000000	diff=3.38593e-22
  0.000000	  0.000000	diff=4.02781e-19
  0.000000	  0.000000	diff=4.51589e-15
  0.000000	 -0.000000	diff=2.09036e-15
  0.000000	 -0.000000	diff=3.21683e-19
  0.000000	  0.000000	diff=2.4394e-17
  0.000000	 -0.000000	diff=1.97738e-19
  0.000000	  0.000000	diff=2.22053e-17
  0.000000	 -0.000000	diff=5.30989e-19
  0.000000	  0.000000	diff=2.95036e-17
  0.000000	  0.000000	diff=2.22056e-13
  0.000000	 -0.000000	diff=1.56113e-13
  local_diff=2.18616e-12
# W_src_char{3}, [8 4]
  0.000000	  0.000000	diff=1.85523e-18
  0.000000	 -0.000000	diff=1.26399e-18
  0.000000	  0.000000	diff=1.16999e-18
  0.000000	 -0.000000	diff=7.11124e-19
  0.000000	  0.000000	diff=2.47929e-18
  0.000000	 -0.000000	diff=1.7629e-18
  0.000000	 -0.000000	diff=6.67933e-13
  0.000000	  0.000000	diff=8.08561e-13
  0.000000	  0.000000	diff=4.25903e-16
  0.000000	 -0.000000	diff=4.06402e-16
  0.000000	  0.000000	diff=2.33841e-16
  0.000000	 -0.000000	diff=2.12714e-16
  0.000000	  0.000000	diff=4.13803e-16
  0.000000	 -0.000000	diff=3.96893e-16
 -0.000000	 -0.000000	diff=9.0637e-13
  0.000000	  0.000000	diff=4.37552e-13
  0.000000	  0.000000	diff=9.50181e-18
  0.000000	 -0.000000	diff=8.71399e-18
  0.000000	  0.000000	diff=6.44946e-18
  0.000000	 -0.000000	diff=5.70988e-18
  0.000000	  0.000000	diff=1.31459e-17
  0.000000	 -0.000000	diff=1.21308e-17
 -0.000000	 -0.000000	diff=1.43762e-12
  0.000000	  0.000000	diff=5.33532e-13
  0.000000	  0.000000	diff=6.84401e-18
  0.000000	 -0.000000	diff=6.27264e-18
  0.000000	  0.000000	diff=4.64637e-18
  0.000000	 -0.000000	diff=4.11038e-18
  0.000000	  0.000000	diff=9.47075e-18
  0.000000	 -0.000000	diff=8.73219e-18
 -0.000000	 -0.000000	diff=8.07001e-13
  0.000000	  0.000000	diff=1.57497e-13
  local_diff=5.75826e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.17171e-13
  0.000000	  0.000000	diff=1.9102e-12
 -0.000000	 -0.000000	diff=1.46116e-13
 -0.000000	 -0.000000	diff=8.11381e-13
  0.000000	  0.000000	diff=3.70296e-13
  0.000000	  0.000000	diff=3.58462e-13
  0.000000	  0.000000	diff=4.26242e-14
  0.000000	  0.000000	diff=5.56926e-13
  local_diff=5.01318e-12
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=4.61646e-11
 -0.000000	 -0.000000	diff=5.24248e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.31431e-10
  0.000001	  0.000001	diff=3.37362e-10
 -0.000002	 -0.000002	diff=9.60862e-10
 -0.000001	 -0.000001	diff=6.50429e-10
  local_diff=2.77867e-09
# W_tgt_char{1}, [8 4]
  0.000000	 -0.000000	diff=4.03676e-14
  0.000000	  0.000000	diff=5.40962e-14
  0.000000	 -0.000000	diff=2.76278e-15
  0.000000	  0.000000	diff=1.15544e-15
  0.000000	 -0.000000	diff=2.44306e-14
  0.000000	  0.000000	diff=2.77888e-14
  0.000000	  0.000000	diff=1.14941e-13
  0.000000	  0.000000	diff=1.4502e-13
  0.000000	 -0.000000	diff=6.77747e-14
  0.000000	  0.000000	diff=3.2338e-14
  0.000000	 -0.000000	diff=2.05376e-14
  0.000000	  0.000000	diff=2.08028e-14
  0.000000	 -0.000000	diff=5.67427e-14
  0.000000	  0.000000	diff=2.64157e-14
  0.000000	  0.000000	diff=1.18617e-13
  0.000000	  0.000000	diff=3.87887e-13
  0.000000	 -0.000000	diff=9.43433e-16
  0.000000	 -0.000000	diff=5.77092e-16
  0.000000	 -0.000000	diff=9.49685e-16
  0.000000	  0.000000	diff=6.64156e-16
  0.000000	 -0.000000	diff=1.49792e-15
  0.000000	  0.000000	diff=7.65827e-17
  0.000000	  0.000000	diff=9.32821e-13
  0.000000	  0.000000	diff=2.04783e-14
  0.000000	  0.000000	diff=3.15567e-16
  0.000000	  0.000000	diff=2.52063e-16
  0.000000	  0.000000	diff=2.45746e-16
  0.000000	 -0.000000	diff=3.67892e-16
  0.000000	  0.000000	diff=3.58736e-16
  0.000000	 -0.000000	diff=8.53387e-17
  0.000000	 -0.000000	diff=1.36416e-13
 -0.000000	 -0.000000	diff=1.08214e-12
  local_diff=3.31986e-12
# W_tgt_char{2}, [8 4]
  0.000000	 -0.000000	diff=2.82136e-15
  0.000000	  0.000000	diff=1.51112e-15
  0.000000	 -0.000000	diff=8.06212e-16
  0.000000	  0.000000	diff=6.42122e-16
  0.000000	 -0.000000	diff=2.71632e-15
  0.000000	  0.000000	diff=1.45653e-15
 -0.000000	 -0.000000	diff=7.21449e-13
  0.000000	  0.000000	diff=9.20335e-13
  0.000000	 -0.000000	diff=3.63406e-17
  0.000000	 -0.000000	diff=9.0542e-17
  0.000000	 -0.000000	diff=3.0203e-17
  0.000000	  0.000000	diff=1.97025e-17
  0.000000	 -0.000000	diff=4.53858e-17
  0.000000	 -0.000000	diff=1.08098e-17
  0.000000	  0.000000	diff=6.47746e-13
  0.000000	 -0.000000	diff=1.39089e-13
  0.000000	  0.000000	diff=1.01792e-17
  0.000000	 -0.000000	diff=5.01353e-18
  0.000000	  0.000000	diff=6.53275e-18
  0.000000	 -0.000000	diff=4.14526e-18
  0.000000	  0.000000	diff=1.52551e-17
  0.000000	 -0.000000	diff=8.0399e-18
  0.000000	  0.000000	diff=9.4726e-13
  0.000000	 -0.000000	diff=1.01967e-13
  0.000000	  0.000000	diff=4.23187e-17
  0.000000	 -0.000000	diff=1.96404e-17
  0.000000	  0.000000	diff=1.95552e-17
  0.000000	 -0.000000	diff=1.40461e-17
  0.000000	  0.000000	diff=5.051e-17
  0.000000	 -0.000000	diff=2.621e-17
  0.000000	  0.000000	diff=4.59117e-13
  0.000000	 -0.000000	diff=3.33791e-13
  local_diff=4.28116e-12
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=8.02419e-18
  0.000000	  0.000000	diff=5.12443e-18
  0.000000	 -0.000000	diff=3.5975e-19
  0.000000	  0.000000	diff=2.8432e-18
  0.000000	  0.000000	diff=7.15782e-18
  0.000000	  0.000000	diff=6.47842e-18
 -0.000000	 -0.000000	diff=7.19154e-13
 -0.000000	 -0.000000	diff=5.77394e-13
  0.000000	  0.000000	diff=1.78055e-17
  0.000000	  0.000000	diff=1.83671e-17
  0.000000	 -0.000000	diff=3.08863e-18
  0.000000	  0.000000	diff=9.44741e-18
  0.000000	  0.000000	diff=1.64735e-17
  0.000000	  0.000000	diff=2.07334e-17
 -0.000000	 -0.000000	diff=5.88531e-13
 -0.000000	 -0.000000	diff=3.00057e-13
  0.000000	 -0.000000	diff=1.48912e-20
  0.000000	  0.000000	diff=2.37514e-20
  0.000000	 -0.000000	diff=1.90494e-20
  0.000000	  0.000000	diff=1.36115e-20
  0.000000	 -0.000000	diff=2.91986e-20
  0.000000	  0.000000	diff=2.16045e-20
  0.000000	 -0.000000	diff=5.06447e-14
  0.000000	 -0.000000	diff=4.13942e-14
  0.000000	 -0.000000	diff=1.60782e-19
  0.000000	 -0.000000	diff=1.54803e-19
  0.000000	  0.000000	diff=3.18295e-20
  0.000000	 -0.000000	diff=8.94218e-20
  0.000000	 -0.000000	diff=1.26676e-19
  0.000000	 -0.000000	diff=2.04616e-19
  0.000000	  0.000000	diff=2.04623e-13
  0.000000	  0.000000	diff=2.16118e-13
  local_diff=2.69803e-12
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.82347e-13
 -0.000000	 -0.000000	diff=9.64438e-13
  0.000000	  0.000000	diff=1.50287e-12
 -0.000000	 -0.000000	diff=2.15784e-12
  0.000000	  0.000000	diff=4.09018e-14
 -0.000000	 -0.000000	diff=7.0918e-13
  0.000000	  0.000000	diff=7.89847e-13
 -0.000000	 -0.000000	diff=4.17443e-13
  local_diff=7.06487e-12
# W_pos, [2 2]
  0.000000	 -0.000000	diff=7.7172e-15
  0.000000	 -0.000000	diff=3.22867e-15
  0.000000	 -0.000000	diff=3.31842e-14
  0.000000	 -0.000000	diff=1.38834e-14
  local_diff=5.80135e-14
# v_pos, [1 2]
  0.000000	  0.000000	diff=1.40692e-12
  0.000000	 -0.000000	diff=3.23159e-14
  local_diff=1.43923e-12
# W_h, [2 4]
  0.000001	  0.000001	diff=6.92706e-14
  0.000000	  0.000000	diff=5.30279e-13
 -0.000001	 -0.000001	diff=2.71191e-13
 -0.000000	 -0.000000	diff=6.41485e-13
 -0.000004	 -0.000004	diff=4.20075e-12
 -0.000002	 -0.000002	diff=1.2358e-12
 -0.000004	 -0.000004	diff=1.50147e-11
 -0.000003	 -0.000003	diff=1.30026e-11
  local_diff=3.49662e-11
# W_soft, [8 2]
 -0.000002	 -0.000002	diff=1.58842e-13
  0.000001	  0.000001	diff=9.5308e-13
 -0.000001	 -0.000001	diff=4.31851e-13
  0.000000	  0.000000	diff=3.01433e-15
  0.000003	  0.000003	diff=2.33172e-13
 -0.000001	 -0.000001	diff=2.21639e-13
  0.000002	  0.000002	diff=7.36237e-13
 -0.000001	 -0.000001	diff=1.61753e-13
 -0.000002	 -0.000002	diff=1.96017e-14
 -0.000001	 -0.000001	diff=4.42453e-13
 -0.000001	 -0.000001	diff=2.26698e-13
  0.000000	  0.000000	diff=1.33421e-12
  0.000003	  0.000003	diff=2.31985e-14
 -0.000001	 -0.000001	diff=5.31562e-13
  0.000002	  0.000002	diff=9.53999e-13
 -0.000001	 -0.000001	diff=4.19973e-13
  local_diff=6.85128e-12
# Num params=402, abs_diff=7.43536e-09
Elapsed time is 9.138400 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 402, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 402
  src input 1: <s> <s> <s> z
  src mask: 0  0  0  1
  tgt input 1: <s> c c </s> </s>
  tgt output 1: c c </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=3.54935e-13
  0.000000	  0.000000	diff=8.81695e-13
  0.000000	  0.000000	diff=9.26124e-14
 -0.000000	 -0.000000	diff=3.68965e-14
  0.000000	  0.000000	diff=2.5055e-13
  0.000000	  0.000000	diff=5.16456e-13
 -0.000001	 -0.000001	diff=7.11306e-12
 -0.000000	 -0.000000	diff=9.21485e-13
 -0.000000	 -0.000000	diff=2.01257e-12
  0.000000	  0.000000	diff=4.26701e-13
 -0.000000	 -0.000000	diff=4.16869e-13
  0.000000	  0.000000	diff=3.12403e-13
 -0.000000	 -0.000000	diff=6.94387e-14
 -0.000000	 -0.000000	diff=5.93657e-13
  0.000001	  0.000001	diff=1.00568e-11
  0.000000	  0.000000	diff=2.86414e-12
 -0.000000	 -0.000000	diff=4.76523e-13
  0.000000	  0.000000	diff=8.59186e-13
 -0.000000	 -0.000000	diff=7.17053e-14
  0.000000	  0.000000	diff=3.21624e-13
 -0.000000	 -0.000000	diff=8.57065e-13
 -0.000000	 -0.000000	diff=1.1288e-13
  0.000000	  0.000000	diff=5.37902e-11
  0.000000	  0.000000	diff=5.07544e-13
  0.000000	  0.000000	diff=7.91683e-14
 -0.000000	 -0.000000	diff=8.73485e-13
  0.000000	  0.000000	diff=8.27444e-13
 -0.000000	 -0.000000	diff=3.54013e-13
  0.000000	  0.000000	diff=4.3436e-13
  0.000000	  0.000000	diff=2.27014e-13
 -0.000000	 -0.000000	diff=8.01519e-13
 -0.000000	 -0.000000	diff=9.13757e-12
  local_diff=9.66516e-11
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.9874e-13
 -0.000000	 -0.000000	diff=8.4269e-13
 -0.000000	 -0.000000	diff=1.08138e-12
 -0.000000	 -0.000000	diff=5.01548e-13
  0.000000	  0.000000	diff=8.12258e-13
 -0.000000	 -0.000000	diff=4.98677e-13
  0.000001	  0.000001	diff=1.52603e-12
 -0.000001	 -0.000001	diff=8.61385e-13
  0.000000	  0.000000	diff=1.2095e-13
  0.000000	  0.000000	diff=7.9276e-13
  0.000000	  0.000000	diff=4.01522e-13
  0.000000	  0.000000	diff=2.03171e-13
 -0.000000	 -0.000000	diff=1.97337e-13
  0.000000	  0.000000	diff=6.7638e-13
 -0.000000	 -0.000000	diff=1.36123e-12
  0.000001	  0.000001	diff=3.4743e-14
 -0.000000	 -0.000000	diff=8.48959e-13
 -0.000000	 -0.000000	diff=2.23288e-12
 -0.000000	 -0.000000	diff=8.66158e-13
 -0.000000	 -0.000000	diff=2.24298e-12
 -0.000000	 -0.000000	diff=7.26298e-13
  0.000000	  0.000000	diff=1.82328e-14
  0.000000	  0.000000	diff=8.66518e-11
 -0.000000	 -0.000000	diff=2.53174e-13
  0.000000	  0.000000	diff=4.43356e-13
  0.000000	  0.000000	diff=1.05119e-12
  0.000000	  0.000000	diff=1.83287e-13
  0.000000	  0.000000	diff=7.36471e-13
  0.000000	  0.000000	diff=6.0403e-13
 -0.000000	 -0.000000	diff=2.7825e-13
 -0.000000	 -0.000000	diff=3.16562e-13
  0.000000	  0.000000	diff=4.08819e-11
  local_diff=1.48546e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=2.38311e-13
  0.000000	  0.000000	diff=1.29312e-13
  0.000000	  0.000000	diff=9.70424e-13
 -0.000000	 -0.000000	diff=2.37935e-14
 -0.000000	 -0.000000	diff=3.6274e-13
  0.000000	  0.000000	diff=7.8858e-13
  0.000005	  0.000005	diff=1.6582e-11
 -0.000002	 -0.000002	diff=9.71516e-11
 -0.000000	 -0.000000	diff=5.84954e-13
  0.000000	  0.000000	diff=2.22589e-13
  0.000000	  0.000000	diff=7.36882e-13
 -0.000000	 -0.000000	diff=3.20644e-15
 -0.000000	 -0.000000	diff=7.66202e-13
  0.000000	  0.000000	diff=4.71127e-13
  0.000002	  0.000002	diff=3.63318e-11
 -0.000002	 -0.000002	diff=4.27814e-12
  0.000000	  0.000000	diff=9.9167e-13
  0.000000	 -0.000000	diff=2.58409e-13
  0.000000	  0.000000	diff=4.24307e-14
  0.000000	 -0.000000	diff=6.00648e-14
  0.000000	  0.000000	diff=2.32103e-13
  0.000000	 -0.000000	diff=2.59036e-13
 -0.000000	 -0.000000	diff=6.6431e-13
 -0.000000	 -0.000000	diff=1.08334e-12
  0.000000	  0.000000	diff=8.13851e-13
  0.000000	 -0.000000	diff=5.91659e-13
  0.000000	 -0.000000	diff=1.86302e-13
  0.000000	  0.000000	diff=1.16415e-13
  0.000000	  0.000000	diff=2.16987e-13
  0.000000	 -0.000000	diff=3.92259e-13
 -0.000000	 -0.000000	diff=4.6255e-13
  0.000000	  0.000000	diff=1.44952e-12
 -0.000000	 -0.000000	diff=1.24999e-12
  0.000000	  0.000000	diff=2.26305e-13
  0.000000	  0.000000	diff=7.44524e-13
  0.000000	  0.000000	diff=1.44777e-12
 -0.000000	 -0.000000	diff=7.31096e-13
  0.000000	  0.000000	diff=1.85523e-13
 -0.000000	 -0.000000	diff=3.64749e-11
  0.000000	  0.000000	diff=8.21843e-13
 -0.000000	 -0.000000	diff=7.10521e-13
  0.000000	  0.000000	diff=1.26097e-12
  0.000000	  0.000000	diff=1.70286e-12
  0.000000	  0.000000	diff=7.42864e-13
 -0.000000	 -0.000000	diff=2.54633e-13
  0.000000	  0.000000	diff=4.3191e-14
  0.000000	  0.000000	diff=6.98196e-12
  0.000000	  0.000000	diff=1.53132e-10
  local_diff=3.74174e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=2.16484e-13
  0.000000	  0.000000	diff=2.74818e-13
 -0.000000	 -0.000000	diff=4.92308e-13
  0.000000	  0.000000	diff=1.80249e-13
  0.000000	  0.000000	diff=3.53163e-13
  0.000000	  0.000000	diff=1.15619e-12
  0.000013	  0.000013	diff=1.42994e-11
 -0.000003	 -0.000003	diff=2.34452e-12
  0.000000	  0.000000	diff=4.5957e-13
 -0.000000	 -0.000000	diff=3.47145e-13
  0.000000	  0.000000	diff=2.65654e-13
  0.000000	  0.000000	diff=2.60816e-13
  0.000000	  0.000000	diff=9.01339e-13
  0.000000	  0.000000	diff=3.74288e-13
  0.000013	  0.000013	diff=5.31137e-11
 -0.000003	 -0.000003	diff=6.65755e-12
  0.000000	  0.000000	diff=6.98284e-14
 -0.000000	 -0.000000	diff=3.7869e-13
 -0.000000	 -0.000000	diff=9.72223e-13
 -0.000000	 -0.000000	diff=5.14661e-14
 -0.000000	 -0.000000	diff=2.83725e-13
 -0.000000	 -0.000000	diff=9.08728e-13
  0.000000	  0.000000	diff=8.97815e-10
 -0.000000	 -0.000000	diff=1.72613e-13
  0.000000	  0.000000	diff=2.09672e-12
 -0.000000	 -0.000000	diff=1.115e-13
  0.000000	  0.000000	diff=7.47924e-13
  0.000000	  0.000000	diff=1.03451e-12
  0.000000	  0.000000	diff=1.86743e-12
 -0.000000	 -0.000000	diff=7.3748e-13
 -0.000000	 -0.000000	diff=1.92385e-12
  0.000000	  0.000000	diff=1.90063e-10
  local_diff=1.18093e-09
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.95778e-10
  0.000001	  0.000001	diff=1.95931e-09
  0.000001	  0.000001	diff=6.9242e-10
 -0.000002	 -0.000002	diff=2.14387e-09
  local_diff=5.39137e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=1.15467e-13
  0.000000	 -0.000000	diff=6.2479e-14
  0.000000	 -0.000000	diff=3.3918e-14
  0.000000	 -0.000000	diff=2.0286e-14
  0.000000	 -0.000000	diff=8.49032e-14
  0.000000	 -0.000000	diff=4.6356e-14
 -0.000000	 -0.000000	diff=5.38563e-13
 -0.000000	 -0.000000	diff=2.82568e-13
  0.000000	 -0.000000	diff=4.80666e-14
  0.000000	 -0.000000	diff=1.00224e-14
  0.000000	 -0.000000	diff=1.78043e-14
  0.000000	 -0.000000	diff=9.26815e-15
  0.000000	 -0.000000	diff=3.47127e-14
  0.000000	 -0.000000	diff=6.83557e-15
 -0.000000	 -0.000000	diff=2.03706e-13
  0.000000	  0.000000	diff=9.77029e-13
  0.000000	 -0.000000	diff=2.18729e-15
  0.000000	 -0.000000	diff=1.16053e-15
  0.000000	 -0.000000	diff=2.61347e-15
  0.000000	 -0.000000	diff=1.41872e-15
  0.000000	 -0.000000	diff=3.4265e-15
  0.000000	 -0.000000	diff=1.75744e-15
  0.000000	 -0.000000	diff=8.38443e-13
  0.000000	 -0.000000	diff=5.6576e-13
  0.000000	 -0.000000	diff=1.54196e-15
  0.000000	 -0.000000	diff=8.07661e-16
  0.000000	 -0.000000	diff=1.81247e-15
  0.000000	 -0.000000	diff=9.61301e-16
  0.000000	 -0.000000	diff=2.38639e-15
  0.000000	 -0.000000	diff=1.19506e-15
  0.000000	 -0.000000	diff=5.80335e-13
 -0.000000	 -0.000000	diff=1.05896e-12
  local_diff=5.55675e-12
# W_src_char{2}, [8 4]
  0.000000	  0.000000	diff=7.06676e-18
  0.000000	 -0.000000	diff=8.0846e-15
  0.000000	  0.000000	diff=2.28711e-18
  0.000000	 -0.000000	diff=4.27024e-15
  0.000000	  0.000000	diff=6.33839e-18
  0.000000	 -0.000000	diff=6.89967e-15
 -0.000000	 -0.000000	diff=1.5669e-13
  0.000000	  0.000000	diff=8.68494e-13
  0.000000	  0.000000	diff=4.54897e-18
  0.000000	 -0.000000	diff=5.11341e-15
  0.000000	  0.000000	diff=1.68168e-18
  0.000000	 -0.000000	diff=2.70634e-15
  0.000000	  0.000000	diff=4.12109e-18
  0.000000	 -0.000000	diff=4.21377e-15
 -0.000000	 -0.000000	diff=8.32378e-13
  0.000000	  0.000000	diff=6.20959e-13
  0.000000	  0.000000	diff=1.31445e-22
  0.000000	  0.000000	diff=2.40906e-18
  0.000000	 -0.000000	diff=2.7271e-22
  0.000000	  0.000000	diff=2.22988e-18
  0.000000	 -0.000000	diff=5.26242e-22
  0.000000	  0.000000	diff=3.9111e-18
  0.000000	  0.000000	diff=6.66584e-16
  0.000000	 -0.000000	diff=6.12509e-14
  0.000000	 -0.000000	diff=4.20611e-19
  0.000000	  0.000000	diff=2.00388e-16
  0.000000	 -0.000000	diff=1.16965e-19
  0.000000	  0.000000	diff=1.79871e-16
  0.000000	 -0.000000	diff=4.49645e-19
  0.000000	  0.000000	diff=2.78947e-16
  0.000000	  0.000000	diff=2.60709e-13
 -0.000000	 -0.000000	diff=2.27416e-13
  local_diff=3.06055e-12
# W_src_char{3}, [8 4]
  0.000000	  0.000000	diff=5.17333e-18
  0.000000	 -0.000000	diff=7.84318e-19
  0.000000	  0.000000	diff=3.72155e-18
  0.000000	 -0.000000	diff=7.96255e-19
  0.000000	  0.000000	diff=6.61124e-18
  0.000000	 -0.000000	diff=1.25227e-18
  0.000000	 -0.000000	diff=7.32195e-13
 -0.000000	  0.000000	diff=1.52321e-12
  0.000000	  0.000000	diff=5.73139e-16
  0.000000	 -0.000000	diff=2.08993e-16
  0.000000	  0.000000	diff=3.62075e-16
  0.000000	 -0.000000	diff=1.34434e-16
  0.000000	  0.000000	diff=5.44461e-16
  0.000000	 -0.000000	diff=1.97085e-16
 -0.000000	 -0.000000	diff=7.21996e-13
  0.000000	  0.000000	diff=8.2041e-14
  0.000000	  0.000000	diff=1.4683e-17
  0.000000	 -0.000000	diff=5.49962e-18
  0.000000	  0.000000	diff=1.10973e-17
  0.000000	 -0.000000	diff=4.2248e-18
  0.000000	  0.000000	diff=1.9577e-17
  0.000000	 -0.000000	diff=7.26108e-18
 -0.000000	 -0.000000	diff=1.4017e-13
  0.000000	  0.000000	diff=7.00044e-13
  0.000000	  0.000000	diff=1.05968e-17
  0.000000	 -0.000000	diff=3.96442e-18
  0.000000	  0.000000	diff=8.01349e-18
  0.000000	 -0.000000	diff=3.04777e-18
  0.000000	  0.000000	diff=1.41452e-17
  0.000000	 -0.000000	diff=5.23945e-18
 -0.000000	 -0.000000	diff=8.94869e-13
  0.000000	  0.000000	diff=1.04036e-13
  local_diff=4.9007e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.09472e-12
 -0.000000	 -0.000000	diff=3.68328e-13
 -0.000000	 -0.000000	diff=7.95008e-13
 -0.000000	 -0.000000	diff=7.37961e-13
 -0.000000	 -0.000000	diff=1.6508e-13
 -0.000000	 -0.000000	diff=4.4982e-13
 -0.000000	 -0.000000	diff=8.45263e-13
 -0.000000	 -0.000000	diff=8.57378e-13
  local_diff=5.31356e-12
# W_emb_tgt, [2 4]
 -0.000002	 -0.000002	diff=1.52943e-09
 -0.000001	 -0.000001	diff=9.18266e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.19136e-09
  0.000001	  0.000001	diff=6.07144e-10
 -0.000004	 -0.000004	diff=3.32219e-09
 -0.000002	 -0.000002	diff=1.2712e-09
  local_diff=8.8396e-09
# W_tgt_char{1}, [8 4]
  0.000000	 -0.000000	diff=6.43801e-14
  0.000000	  0.000000	diff=8.71746e-14
  0.000000	  0.000000	diff=5.99461e-15
  0.000000	 -0.000000	diff=3.74175e-15
  0.000000	 -0.000000	diff=2.91296e-14
  0.000000	  0.000000	diff=3.91523e-14
  0.000000	  0.000000	diff=1.36491e-12
  0.000000	  0.000000	diff=2.4769e-13
  0.000000	 -0.000000	diff=8.52869e-14
  0.000000	  0.000000	diff=6.03801e-14
  0.000000	 -0.000000	diff=1.81125e-14
  0.000000	  0.000000	diff=2.50651e-14
  0.000000	 -0.000000	diff=5.91377e-14
  0.000000	  0.000000	diff=4.00575e-14
  0.000000	  0.000000	diff=4.00027e-13
  0.000000	  0.000000	diff=1.40881e-12
  0.000000	 -0.000000	diff=7.92523e-16
  0.000000	 -0.000000	diff=1.46869e-15
  0.000000	 -0.000000	diff=1.39094e-15
  0.000000	  0.000000	diff=1.06857e-15
  0.000000	 -0.000000	diff=1.5134e-15
  0.000000	 -0.000000	diff=3.03616e-16
  0.000000	  0.000000	diff=7.63304e-13
  0.000000	  0.000000	diff=8.74929e-13
  0.000000	  0.000000	diff=2.07431e-16
  0.000000	  0.000000	diff=5.06974e-16
  0.000000	  0.000000	diff=4.05941e-16
  0.000000	 -0.000000	diff=5.66986e-16
  0.000000	  0.000000	diff=3.2911e-16
  0.000000	 -0.000000	diff=2.68255e-17
  0.000000	 -0.000000	diff=1.97851e-13
  0.000000	 -0.000000	diff=4.97031e-13
  local_diff=6.28075e-12
# W_tgt_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.11629e-15
  0.000000	  0.000000	diff=2.44467e-15
  0.000000	 -0.000000	diff=1.52288e-15
  0.000000	  0.000000	diff=1.34608e-15
  0.000000	 -0.000000	diff=3.75488e-15
  0.000000	  0.000000	diff=2.14891e-15
 -0.000000	 -0.000000	diff=9.31925e-13
  0.000000	  0.000000	diff=1.11412e-12
  0.000000	 -0.000000	diff=1.90165e-16
  0.000000	  0.000000	diff=3.07432e-17
  0.000000	 -0.000000	diff=2.0481e-16
  0.000000	  0.000000	diff=1.86061e-16
  0.000000	 -0.000000	diff=2.83221e-16
  0.000000	  0.000000	diff=2.1749e-16
  0.000000	  0.000000	diff=6.02992e-13
  0.000000	  0.000000	diff=4.23844e-13
  0.000000	  0.000000	diff=2.2226e-17
  0.000000	 -0.000000	diff=1.22031e-17
  0.000000	  0.000000	diff=1.62815e-17
  0.000000	 -0.000000	diff=1.25735e-17
  0.000000	  0.000000	diff=3.09912e-17
  0.000000	 -0.000000	diff=1.94924e-17
  0.000000	  0.000000	diff=7.66563e-13
  0.000000	 -0.000000	diff=2.09738e-13
  0.000000	  0.000000	diff=8.5819e-17
  0.000000	 -0.000000	diff=4.2354e-17
  0.000000	  0.000000	diff=4.72054e-17
  0.000000	 -0.000000	diff=3.72382e-17
  0.000000	  0.000000	diff=9.66051e-17
  0.000000	 -0.000000	diff=5.48392e-17
  0.000000	  0.000000	diff=1.97262e-13
  0.000000	 -0.000000	diff=5.1411e-13
  local_diff=4.77747e-12
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=1.8024e-17
  0.000000	  0.000000	diff=6.90939e-18
  0.000000	  0.000000	diff=8.10796e-19
  0.000000	  0.000000	diff=4.70085e-18
  0.000000	  0.000000	diff=1.57818e-17
  0.000000	  0.000000	diff=1.01152e-17
 -0.000000	 -0.000000	diff=3.3821e-13
 -0.000000	 -0.000000	diff=1.20865e-13
  0.000000	  0.000000	diff=3.96297e-17
  0.000000	  0.000000	diff=2.96738e-17
  0.000000	 -0.000000	diff=2.55061e-18
  0.000000	  0.000000	diff=1.72238e-17
  0.000000	  0.000000	diff=3.63136e-17
  0.000000	  0.000000	diff=3.40169e-17
 -0.000000	 -0.000000	diff=1.01242e-12
 -0.000000	 -0.000000	diff=2.51113e-13
  0.000000	 -0.000000	diff=5.21698e-20
  0.000000	  0.000000	diff=7.45136e-20
  0.000000	 -0.000000	diff=5.87523e-20
  0.000000	  0.000000	diff=5.1832e-20
  0.000000	 -0.000000	diff=9.39724e-20
  0.000000	  0.000000	diff=8.45132e-20
  0.000000	 -0.000000	diff=1.40245e-13
  0.000000	 -0.000000	diff=8.38493e-14
  0.000000	 -0.000000	diff=5.14848e-19
  0.000000	 -0.000000	diff=2.97155e-19
  0.000000	  0.000000	diff=1.33563e-20
  0.000000	 -0.000000	diff=2.01732e-19
  0.000000	 -0.000000	diff=4.3997e-19
  0.000000	 -0.000000	diff=3.90344e-19
  0.000000	  0.000000	diff=9.87079e-13
  0.000000	  0.000000	diff=3.32666e-13
  local_diff=3.26667e-12
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.28781e-13
 -0.000000	 -0.000000	diff=5.86939e-13
  0.000000	  0.000000	diff=2.13101e-13
 -0.000000	 -0.000000	diff=7.32702e-13
  0.000000	  0.000000	diff=3.1128e-13
 -0.000000	 -0.000000	diff=8.38192e-13
  0.000000	  0.000000	diff=9.36176e-13
 -0.000000	 -0.000000	diff=4.47728e-14
  local_diff=3.79194e-12
# W_pos, [2 2]
  0.000000	  0.000000	diff=5.81807e-14
  0.000000	  0.000000	diff=2.43413e-14
 -0.000000	  0.000000	diff=3.66661e-10
 -0.000000	  0.000000	diff=5.2589e-11
  local_diff=4.19333e-10
# v_pos, [1 2]
  0.000000	 -0.000000	diff=3.31876e-14
 -0.000000	 -0.000000	diff=3.66636e-10
  local_diff=3.66669e-10
# W_h, [2 4]
  0.000001	  0.000001	diff=1.01415e-12
  0.000000	  0.000000	diff=9.80126e-14
 -0.000001	 -0.000001	diff=4.90171e-13
 -0.000000	 -0.000000	diff=1.71056e-13
 -0.000006	 -0.000006	diff=3.2089e-12
 -0.000003	 -0.000003	diff=5.38178e-12
 -0.000005	 -0.000005	diff=1.00926e-10
 -0.000010	 -0.000010	diff=4.19814e-11
  local_diff=1.53271e-10
# W_soft, [8 2]
 -0.000002	 -0.000002	diff=1.71195e-12
 -0.000001	 -0.000001	diff=9.73815e-13
 -0.000001	 -0.000001	diff=1.85752e-12
  0.000000	  0.000000	diff=5.6559e-13
  0.000005	  0.000005	diff=2.30493e-13
 -0.000002	 -0.000002	diff=1.23339e-13
  0.000002	  0.000002	diff=8.77748e-13
 -0.000002	 -0.000002	diff=4.85035e-13
 -0.000001	 -0.000001	diff=3.0627e-13
 -0.000004	 -0.000004	diff=5.11144e-13
 -0.000000	 -0.000000	diff=6.34857e-13
  0.000001	  0.000001	diff=2.83593e-13
  0.000005	  0.000005	diff=2.81244e-13
  0.000002	  0.000002	diff=7.42689e-13
 -0.000000	 -0.000000	diff=4.99952e-13
 -0.000002	 -0.000002	diff=4.30955e-13
  local_diff=1.05162e-11
# Num params=402, abs_diff=1.7018e-08
Elapsed time is 8.911777 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 104, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 104
  src input 1: y y x y
  src mask: 1  1  1  1
  tgt input 1: <s> a b a
  tgt output 1: a b a </s>
  tgt mask: 1  1  1  1
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=6.82914e-27
  0.000000	 -0.000000	diff=1.95177e-30
  0.000000	  0.000000	diff=5.93316e-31
  0.000000	  0.000000	diff=1.85467e-30
  0.000000	  0.000000	diff=7.88768e-13
  0.000033	  0.000033	diff=1.27003e-07
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.11769e-35
  0.000000	 -0.000000	diff=9.28012e-28
  0.000000	 -0.000000	diff=2.65226e-31
  0.000000	  0.000000	diff=7.67726e-30
  0.000000	  0.000000	diff=2.52031e-31
  0.000000	  0.000000	diff=5.62715e-13
  0.000450	  0.000428	diff=2.19286e-05
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=6.95443e-36
  0.000000	  0.000000	diff=1.11817e-28
  0.000000	  0.000000	diff=1.76192e-31
  0.000000	  0.000000	diff=5.90119e-31
  0.000000	 -0.000000	diff=1.67428e-31
  0.000000	 -0.000000	diff=5.70229e-13
  0.000000	  0.000000	diff=7.35255e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.99214e-37
  0.000000	 -0.000000	diff=6.40794e-33
  0.000000	 -0.000000	diff=1.01069e-35
  0.000000	  0.000000	diff=8.40257e-36
  0.000000	  0.000000	diff=4.81695e-36
  0.000000	  0.000000	diff=3.26791e-17
 -0.000000	 -0.000000	diff=7.55856e-13
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.00763e-41
  local_diff=2.20557e-05
# W_tgt{1}, [8 6]
  0.665977	  0.690935	diff=0.0249579
  0.000000	  0.000000	diff=4.854e-10
  0.000000	  0.000000	diff=1.09604e-10
 -0.000000	 -0.000000	diff=8.31765e-13
-18.274228	-18.730010	diff=0.455782
  1.109839	  1.149613	diff=0.0397738
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.847529	 -0.811348	diff=0.0361808
  0.000000	  0.000000	diff=6.54257e-10
  0.000000	  0.000000	diff=6.09258e-12
  0.000000	  0.000000	diff=1.25222e-12
 22.609305	 21.994195	diff=0.61511
 -1.407330	 -1.349962	diff=0.0573681
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.60996e-36
  0.000000	  0.000000	diff=4.20065e-13
  0.000000	 -0.000000	diff=1.66166e-13
  0.000000	  0.000000	diff=5.21662e-62
  0.000000	 -0.000000	diff=6.33113e-39
  0.000000	 -0.000000	diff=2.09809e-30
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.86709e-32
  0.000000	  0.000000	diff=1.27216e-30
  0.000000	  0.000000	diff=8.70148e-13
  0.000000	 -0.000000	diff=9.14735e-60
  0.000000	  0.000000	diff=4.32829e-40
  0.000000	 -0.000000	diff=1.59049e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000331	  0.000330	diff=1.19105e-06
  0.000000	  0.000000	diff=4.20065e-13
  0.000000	 -0.000000	diff=1.66166e-13
  0.000000	  0.000000	diff=2.63438e-13
 -0.006521	 -0.006498	diff=2.29323e-05
 -0.111675	 -0.111293	diff=0.000381317
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.24856e-13
  0.000000	  0.000000	diff=1.27216e-30
  0.000000	  0.000000	diff=8.70148e-13
  0.000000	 -0.000000	diff=1.38642e-16
  0.000000	  0.000000	diff=1.48915e-13
  0.000008	  0.000008	diff=2.68628e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.22958
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000333	 -0.000347	diff=1.35904e-05
 -0.000013	 -0.000013	diff=1.84116e-08
 -0.000000	 -0.000000	diff=5.60943e-13
 -0.000000	 -0.000000	diff=2.59528e-13
  local_diff=1.36088e-05
# W_emb_tgt, [2 4]
-16.316047	-16.677489	diff=0.361442
-14.005769	-14.271785	diff=0.266017
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.00937e-09
 -0.000000	 -0.000000	diff=3.29865e-10
 -0.000000	 -0.000000	diff=1.12724e-12
 -0.000000	 -0.000000	diff=1.23536e-10
  local_diff=0.627458
# W_soft, [4 2]
  0.014631	  0.014616	diff=1.50311e-05
  0.151565	  0.151456	diff=0.000108968
 -0.406862	 -0.406893	diff=3.06572e-05
  0.240940	  0.240821	diff=0.000119271
 -1.424838	 -1.429208	diff=0.0043695
  2.618666	  2.617254	diff=0.00141252
  0.105468	  0.099156	diff=0.00631253
 -1.280499	 -1.287202	diff=0.00670337
  local_diff=0.0190718
# Num params=104, abs_diff=1.87614
Elapsed time is 0.676224 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.15445e-24
 -0.000000	  0.000000	diff=7.14491e-13
  0.000000	  0.000000	diff=1.7299e-28
  0.000000	  0.000000	diff=1.69429e-23
  0.000000	  0.000000	diff=3.77489e-25
 -0.000000	  0.000000	diff=7.14484e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.75108e-24
  0.000000	 -0.000000	diff=1.71075e-14
  0.000000	 -0.000000	diff=2.19901e-28
  0.000000	 -0.000000	diff=7.34087e-23
  0.000000	 -0.000000	diff=1.63511e-24
  0.000000	 -0.000000	diff=1.70785e-14
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=7.59486e-54
  0.000000	 -0.000000	diff=1.36095e-41
  0.000000	 -0.000000	diff=1.24309e-59
  0.000000	 -0.000000	diff=6.76941e-54
  0.000000	 -0.000000	diff=1.39484e-51
  0.000000	 -0.000000	diff=1.35864e-41
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.47202e-42
  0.000000	  0.000000	diff=5.71942e-31
  0.000000	  0.000000	diff=1.16737e-47
  0.000000	  0.000000	diff=3.03682e-44
  0.000000	  0.000000	diff=4.74941e-41
  0.000000	  0.000000	diff=5.70972e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.46316e-12
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=4.53762e-42
  0.000000	 -0.000000	diff=2.14155e-41
  0.000000	 -0.000000	diff=8.9099e-43
  0.000000	 -0.000000	diff=5.20718e-42
  0.000000	  0.000000	diff=4.77974e-42
  0.000000	 -0.000000	diff=2.66897e-41
  0.000000	 -0.000000	diff=1.81382e-26
  0.000000	 -0.000000	diff=6.06482e-26
  0.000000	 -0.000000	diff=1.05573e-31
  0.000000	  0.000000	diff=9.68972e-31
  0.000000	  0.000000	diff=7.73067e-33
  0.000000	  0.000000	diff=3.14478e-31
  0.000000	 -0.000000	diff=1.29258e-31
  0.000000	  0.000000	diff=1.32984e-30
  0.000000	  0.000000	diff=1.20203e-15
  0.000000	  0.000000	diff=1.88219e-15
  0.000000	  0.000000	diff=1.03886e-33
  0.000000	 -0.000000	diff=6.18645e-32
  0.000000	 -0.000000	diff=1.43998e-33
  0.000000	 -0.000000	diff=1.91375e-32
  0.000000	  0.000000	diff=2.32774e-33
  0.000000	 -0.000000	diff=5.9028e-32
  0.000000	  0.000000	diff=2.42931e-16
  0.000000	 -0.000000	diff=5.10375e-17
  0.000000	 -0.000000	diff=1.36325e-32
  0.000000	  0.000000	diff=1.66374e-30
  0.000000	 -0.000000	diff=4.04483e-33
  0.000000	  0.000000	diff=6.04443e-31
  0.000000	 -0.000000	diff=1.73299e-32
  0.000000	  0.000000	diff=2.94736e-30
  0.000000	  0.000000	diff=3.58103e-16
  0.000000	  0.000000	diff=2.20533e-15
  local_diff=5.94161e-15
# W_tgt{1}, [8 6]
 -0.000001	 -0.000001	diff=1.88913e-09
  0.000000	  0.000000	diff=3.15788e-18
 -0.000000	 -0.000000	diff=2.53582e-11
  0.000000	  0.000000	diff=1.01535e-25
 -0.000001	 -0.000001	diff=5.03243e-08
  0.000000	  0.000000	diff=9.90328e-12
  0.000000	 -0.000000	diff=1.00033e-43
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.50309e-10
  0.000000	 -0.000000	diff=5.35104e-18
 -0.000000	 -0.000000	diff=1.05437e-11
  0.000000	  0.000000	diff=6.51967e-26
 -0.000001	 -0.000001	diff=2.05349e-08
  0.000000	  0.000000	diff=3.66505e-12
  0.000000	  0.000000	diff=1.69504e-43
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.15066e-15
  0.000000	 -0.000000	diff=8.37396e-37
  0.000000	 -0.000000	diff=3.42575e-18
  0.000000	  0.000000	diff=2.42584e-34
  0.000000	 -0.000000	diff=2.01804e-15
  0.000000	  0.000000	diff=5.14885e-19
  0.000000	 -0.000000	diff=9.01108e-75
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.73834e-16
  0.000000	 -0.000000	diff=5.54152e-37
  0.000000	  0.000000	diff=5.17539e-19
  0.000000	 -0.000000	diff=3.66478e-35
  0.000000	  0.000000	diff=3.04872e-16
  0.000000	 -0.000000	diff=7.7785e-20
  0.000000	  0.000000	diff=4.38452e-75
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.21901e-15
  0.000000	 -0.000000	diff=5.65528e-39
  0.000000	  0.000000	diff=3.62924e-18
  0.000000	 -0.000000	diff=2.56993e-34
  0.000000	  0.000000	diff=2.13791e-15
  0.000000	 -0.000000	diff=5.45468e-19
  0.000000	  0.000000	diff=2.57998e-74
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.67957e-20
  0.000000	 -0.000000	diff=2.2675e-35
  0.000000	  0.000000	diff=1.09958e-22
  0.000000	 -0.000000	diff=7.81482e-39
  0.000000	  0.000000	diff=6.45327e-20
  0.000000	 -0.000000	diff=1.65384e-23
  0.000000	  0.000000	diff=2.90062e-67
  0.000000	  0.000000	diff=0
  local_diff=7.36481e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.14953e-15
  0.000000	  0.000000	diff=2.43245e-15
  0.000000	  0.000000	diff=2.30865e-16
  0.000000	  0.000000	diff=3.0348e-16
  0.000000	  0.000000	diff=6.88977e-16
  0.000000	  0.000000	diff=1.82705e-15
  0.000000	  0.000000	diff=1.8177e-13
 -0.000000	 -0.000000	diff=6.47252e-13
  0.000000	  0.000000	diff=3.82377e-20
  0.000000	  0.000000	diff=7.59735e-20
  0.000000	  0.000000	diff=7.20752e-21
  0.000000	  0.000000	diff=9.47454e-21
  0.000000	  0.000000	diff=2.40474e-20
  0.000000	  0.000000	diff=5.73201e-20
  0.000000	  0.000000	diff=8.13338e-14
 -0.000000	 -0.000000	diff=1.0627e-12
  0.000000	  0.000000	diff=1.90747e-15
  0.000000	 -0.000000	diff=2.9684e-15
  0.000000	 -0.000000	diff=6.52651e-16
  0.000000	 -0.000000	diff=8.57925e-16
  0.000000	  0.000000	diff=1.25482e-15
  0.000000	 -0.000000	diff=3.82632e-15
 -0.000000	 -0.000000	diff=4.43623e-13
  0.000000	  0.000000	diff=3.79858e-13
  0.000000	 -0.000000	diff=2.88163e-16
  0.000000	  0.000000	diff=4.48441e-16
  0.000000	  0.000000	diff=9.85969e-17
  0.000000	  0.000000	diff=1.29608e-16
  0.000000	 -0.000000	diff=1.89566e-16
  0.000000	  0.000000	diff=5.78049e-16
  0.000000	  0.000000	diff=1.37163e-13
 -0.000000	 -0.000000	diff=1.49624e-13
  local_diff=3.10316e-12
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.37314e-16
 -0.000000	  0.000000	diff=7.48364e-13
  0.000000	 -0.000000	diff=2.52839e-20
  0.000000	 -0.000000	diff=2.88587e-20
  local_diff=7.48701e-13
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=4.02888e-13
 -0.000000	 -0.000000	diff=1.3518e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.89532e-19
  0.000000	 -0.000000	diff=4.08172e-19
  0.000001	  0.000001	diff=4.94941e-08
 -0.000002	 -0.000001	diff=7.63413e-08
  local_diff=1.25836e-07
# W_soft, [4 2]
  0.000000	  0.000000	diff=1.63336e-13
 -0.000000	 -0.000000	diff=5.70279e-13
 -0.000000	 -0.000000	diff=1.78709e-13
  0.000000	  0.000000	diff=2.0178e-13
 -0.000000	 -0.000000	diff=6.28554e-13
  0.000000	  0.000000	diff=4.0722e-13
 -0.000000	 -0.000000	diff=1.98809e-13
 -0.000000	 -0.000000	diff=2.25247e-14
  local_diff=2.37121e-12
# Num params=168, abs_diff=1.99492e-07
Elapsed time is 1.370547 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 168, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_soft=8
# assert = 0
# attnFunc = 0
# attnOpt = 0
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 168
  src input 1: <s> x y y
  src mask: 0  1  1  1
  tgt input 1: <s> b b </s> </s>
  tgt output 1: b b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=4.94782e-29
  0.000000	  0.000000	diff=2.62773e-17
  0.000000	  0.000000	diff=1.20299e-32
  0.000000	  0.000000	diff=3.98999e-27
  0.000000	  0.000000	diff=1.34912e-09
  0.000000	  0.000000	diff=6.48803e-20
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.1804e-37
  0.000000	 -0.000000	diff=6.3016e-29
  0.000000	 -0.000000	diff=3.36015e-17
  0.000000	 -0.000000	diff=1.5292e-32
  0.000000	 -0.000000	diff=5.15717e-27
  0.000000	 -0.000000	diff=6.21514e-31
  0.000000	 -0.000000	diff=2.81112e-19
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.69906e-66
  0.000000	 -0.000000	diff=4.38391e-52
  0.000000	 -0.000000	diff=1.96685e-71
  0.000000	 -0.000000	diff=6.34695e-66
  0.000000	 -0.000000	diff=1.04107e-64
  0.000000	 -0.000000	diff=4.38199e-52
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.5472e-50
  0.000000	  0.000000	diff=4.94712e-39
  0.000000	  0.000000	diff=1.08246e-56
  0.000000	  0.000000	diff=1.26422e-55
  0.000000	  0.000000	diff=1.52539e-51
  0.000000	  0.000000	diff=4.94541e-39
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.34912e-09
# W_src{2}, [8 4]
  0.000038	  0.000038	diff=1.80882e-07
  0.000415	  0.000413	diff=1.98257e-06
  0.000000	 -0.000000	diff=3.63844e-53
  0.000000	 -0.000000	diff=2.06029e-52
  0.005013	  0.005034	diff=2.04479e-05
 -0.017474	 -0.017408	diff=6.5837e-05
 -0.000000	 -0.000000	diff=4.08246e-12
  0.000000	  0.000000	diff=1.79006e-09
  0.000000	 -0.000000	diff=4.61099e-39
  0.000000	  0.000000	diff=6.91356e-39
  0.000000	  0.000000	diff=7.42599e-40
  0.000000	  0.000000	diff=2.34178e-39
  0.000000	 -0.000000	diff=5.13193e-39
  0.000000	  0.000000	diff=9.82144e-39
  0.000000	  0.000000	diff=2.00637e-19
  0.000000	  0.000000	diff=9.34894e-20
  0.000000	  0.000000	diff=3.3088e-40
  0.000000	  0.000000	diff=5.28168e-40
  0.000000	 -0.000000	diff=1.76609e-40
  0.000000	  0.000000	diff=2.94944e-40
  0.000000	  0.000000	diff=2.38521e-40
  0.000000	  0.000000	diff=2.33133e-39
  0.000000	  0.000000	diff=7.04271e-20
  0.000000	  0.000000	diff=1.01853e-20
  0.000000	 -0.000000	diff=3.98453e-39
  0.000000	  0.000000	diff=1.07568e-38
  0.000000	  0.000000	diff=1.04197e-39
  0.000000	  0.000000	diff=3.68464e-39
  0.000000	 -0.000000	diff=3.69414e-39
  0.000000	  0.000000	diff=1.8885e-38
  0.000000	 -0.000000	diff=1.2146e-20
  0.000000	  0.000000	diff=1.30199e-19
  local_diff=8.84501e-05
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=3.45527e-10
  0.000000	 -0.000000	diff=3.73798e-21
  0.000000	 -0.000000	diff=3.66215e-24
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.0097e-09
 -0.000000	 -0.000000	diff=2.30805e-10
  0.000000	  0.000000	diff=8.73997e-64
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.45361e-10
  0.000000	  0.000000	diff=6.16526e-15
  0.000000	  0.000000	diff=1.87866e-24
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.17618e-10
  0.000000	  0.000000	diff=7.06152e-13
  0.000000	 -0.000000	diff=1.48098e-63
  0.000000	 -0.000000	diff=4.25443e-14
  0.000000	 -0.000000	diff=3.49673e-27
  0.000000	  0.000000	diff=1.70264e-32
  0.000000	 -0.000000	diff=1.22029e-43
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.76264e-27
  0.000000	 -0.000000	diff=2.62114e-23
  0.000000	 -0.000000	diff=1.57043e-93
  0.000000	 -0.000000	diff=2.64791e-34
  0.000000	  0.000000	diff=2.568e-13
  0.000000	  0.000000	diff=1.43274e-31
  0.000000	 -0.000000	diff=9.47536e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.86381e-14
  0.000000	 -0.000000	diff=1.8717e-23
  0.000000	  0.000000	diff=9.11343e-77
  0.000000	 -0.000000	diff=2.22816e-33
  0.000000	 -0.000000	diff=7.71721e-56
  0.000000	 -0.000000	diff=1.3346e-41
  0.000000	  0.000000	diff=1.2448e-25
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.44065e-40
  0.000000	 -0.000000	diff=2.45677e-34
  0.000000	 -0.000000	diff=1.28386e-71
  0.000000	 -0.000000	diff=1.01822e-52
  0.000000	  0.000000	diff=1.07974e-34
  0.000000	 -0.000000	diff=4.40654e-32
  0.000000	  0.000000	diff=3.16473e-43
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.60383e-34
  0.000000	  0.000000	diff=2.17694e-23
  0.000000	  0.000000	diff=2.46413e-84
  0.000000	  0.000000	diff=6.85295e-34
  local_diff=3.5501e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=3.62451e-13
 -0.000000	 -0.000000	diff=1.3623e-13
 -0.000000	 -0.000000	diff=5.02925e-13
  0.000000	  0.000000	diff=5.4452e-14
  0.000000	  0.000000	diff=3.39417e-13
  0.000000	  0.000000	diff=2.12804e-14
  0.000000	  0.000000	diff=3.71072e-13
 -0.000000	 -0.000000	diff=5.09008e-13
  0.000000	 -0.000000	diff=6.03028e-20
  0.000000	  0.000000	diff=3.21492e-19
  0.000000	  0.000000	diff=2.83234e-24
  0.000000	  0.000000	diff=6.51055e-24
  0.000000	 -0.000000	diff=6.81393e-20
  0.000000	 -0.000000	diff=6.34477e-20
 -0.000000	 -0.000000	diff=3.17136e-13
  0.000000	  0.000000	diff=1.10669e-13
  0.021660	  0.021644	diff=1.62213e-05
 -0.010074	 -0.010082	diff=8.10324e-06
 -0.004782	 -0.004781	diff=9.56961e-07
  0.002654	  0.002654	diff=1.45711e-07
  0.035377	  0.035371	diff=5.56391e-06
 -0.003264	 -0.003268	diff=3.61935e-06
  0.015890	  0.015869	diff=2.0875e-05
  0.257396	  0.256733	diff=0.000663085
 -0.009115	 -0.009121	diff=5.81019e-06
  0.006978	  0.006988	diff=9.83407e-06
 -0.001094	 -0.001094	diff=4.8922e-07
 -0.041693	 -0.041925	diff=0.000231937
 -0.003097	 -0.003101	diff=4.02777e-06
  0.003241	  0.003238	diff=2.98127e-06
  0.032197	  0.032157	diff=3.96739e-05
 -0.488926	 -0.493737	diff=0.00481123
  local_diff=0.00582455
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.79244e-21
  0.000000	  0.000000	diff=6.21663e-19
  0.000000	  0.000000	diff=3.97312e-10
  0.000000	  0.000000	diff=4.98006e-17
  local_diff=3.97312e-10
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=3.56072e-10
  0.000000	 -0.000000	diff=4.47895e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.40444e-13
  0.000000	  0.000000	diff=6.05501e-16
  0.000000	  0.000000	diff=2.16515e-09
 -0.000000	 -0.000000	diff=3.52464e-09
  local_diff=6.04645e-09
# W_soft, [4 2]
  0.003314	  0.003257	diff=5.74002e-05
  0.063391	  0.063336	diff=5.48146e-05
 -0.169196	 -0.169247	diff=5.09466e-05
  0.102698	  0.102653	diff=4.43992e-05
 -0.035975	 -0.036002	diff=2.75974e-05
  0.098266	  0.098237	diff=2.84965e-05
 -0.088545	 -0.088565	diff=2.06253e-05
  0.026354	  0.026330	diff=2.37666e-05
  local_diff=0.000308046
# Num params=168, abs_diff=0.00622106
Elapsed time is 1.465843 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 176, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 176
  src input 1: <s> y x x
  src mask: 0  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.001254	  0.001261	diff=7.38686e-06
  0.000000	  0.000000	diff=5.78469e-17
  0.000000	 -0.000000	diff=1.01121e-31
  0.000000	 -0.000000	diff=1.92733e-29
  0.158212	  0.159173	diff=0.000960895
  0.000000	  0.000000	diff=4.33861e-16
 -0.000250	 -0.000248	diff=2.93254e-06
  0.000000	  0.000000	diff=1.29485e-16
  0.000000	  0.000000	diff=5.19006e-25
  0.000000	 -0.000000	diff=8.36502e-17
  0.000000	  0.000000	diff=1.28543e-31
  0.000000	  0.000000	diff=8.35137e-29
  0.000000	  0.000000	diff=1.40357e-31
  0.000000	 -0.000000	diff=1.43504e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.922e-61
  0.000000	 -0.000000	diff=2.62173e-53
  0.000000	  0.000000	diff=4.25152e-68
  0.000000	  0.000000	diff=1.54448e-67
  0.000000	 -0.000000	diff=1.74991e-69
  0.000000	 -0.000000	diff=3.29746e-54
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=9.83931e-46
  0.000000	  0.000000	diff=1.25062e-37
  0.000000	 -0.000000	diff=2.17623e-52
  0.000000	  0.000000	diff=4.85363e-54
  0.000000	 -0.000000	diff=4.24796e-55
  0.000000	  0.000000	diff=7.7452e-39
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.000971214
# W_src{2}, [8 4]
  0.003224	  0.003209	diff=1.46474e-05
 -0.004942	 -0.004918	diff=2.40502e-05
  0.000000	  0.000000	diff=1.0774e-53
  0.000000	  0.000000	diff=7.32354e-53
  0.261445	  0.262567	diff=0.001122
 -0.867284	 -0.864109	diff=0.00317517
 -0.000000	 -0.000000	diff=4.56003e-10
 -0.000002	 -0.000001	diff=1.52883e-08
  0.000000	  0.000000	diff=3.06686e-38
  0.000000	  0.000000	diff=5.73859e-38
  0.000000	 -0.000000	diff=6.36319e-39
  0.000000	  0.000000	diff=1.99628e-38
  0.000000	  0.000000	diff=3.31609e-38
  0.000000	  0.000000	diff=1.01018e-37
  0.000000	 -0.000000	diff=6.2176e-19
  0.000000	  0.000000	diff=7.32183e-19
  0.000000	 -0.000000	diff=3.68688e-39
  0.000000	 -0.000000	diff=1.20675e-38
  0.000000	  0.000000	diff=1.70066e-39
  0.000000	 -0.000000	diff=5.34929e-39
  0.000000	 -0.000000	diff=2.24077e-39
  0.000000	 -0.000000	diff=2.9601e-38
  0.000000	 -0.000000	diff=4.85458e-19
  0.000000	 -0.000000	diff=1.23966e-19
  0.000000	  0.000000	diff=3.59461e-38
  0.000000	  0.000000	diff=9.68826e-38
  0.000000	 -0.000000	diff=1.12433e-38
  0.000000	  0.000000	diff=3.39502e-38
  0.000000	  0.000000	diff=3.17958e-38
  0.000000	  0.000000	diff=2.06821e-37
  0.000000	  0.000000	diff=3.58141e-19
  0.000000	  0.000000	diff=5.10657e-19
  local_diff=0.00433588
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=3.53885e-11
  0.000000	 -0.000000	diff=4.20559e-22
  0.000000	  0.000000	diff=1.41973e-12
  0.000000	 -0.000000	diff=1.49227e-93
 -0.000000	 -0.000000	diff=4.01058e-10
  0.000000	  0.000000	diff=6.95415e-13
  0.000000	 -0.000000	diff=1.36148e-55
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.39873e-11
  0.016850	  0.017432	diff=0.000581548
 -0.000005	 -0.000005	diff=1.63489e-07
  0.000000	  0.000000	diff=6.27819e-18
 -0.000000	 -0.000000	diff=1.62473e-10
  0.000044	  0.000046	diff=1.5444e-06
  0.000000	  0.000000	diff=2.30701e-55
  3.273790	  3.530125	diff=0.256335
  0.000000	  0.000000	diff=2.36915e-13
 -0.002587	 -0.002574	diff=1.34491e-05
  0.000001	  0.000001	diff=3.91346e-09
  0.000000	 -0.000000	diff=9.58608e-19
  0.000000	  0.000000	diff=1.99412e-12
 -0.000007	 -0.000007	diff=3.46416e-08
  0.000000	 -0.000000	diff=8.35723e-94
 -0.000002	 -0.000002	diff=1.77143e-08
 -0.000000	 -0.000000	diff=9.90894e-13
 -0.002502	 -0.002489	diff=1.25791e-05
  0.000001	  0.000001	diff=3.66089e-09
  0.000000	 -0.000000	diff=9.27136e-19
 -0.000000	 -0.000000	diff=1.83621e-12
 -0.000006	 -0.000006	diff=3.24012e-08
  0.000000	  0.000000	diff=6.03763e-93
 -0.000002	 -0.000002	diff=1.65672e-08
  0.000000	 -0.000000	diff=1.00656e-19
 -0.001870	 -0.001862	diff=7.0359e-06
  0.000001	  0.000001	diff=2.04874e-09
  0.000000	 -0.000000	diff=6.93683e-19
 -0.000000	 -0.000000	diff=6.23814e-13
 -0.000005	 -0.000005	diff=1.81221e-08
  0.000000	  0.000000	diff=8.92759e-64
 -0.000001	 -0.000001	diff=9.25791e-09
  0.000000	 -0.000000	diff=1.85065e-25
  0.001802	  0.001809	diff=6.60194e-06
 -0.000001	 -0.000001	diff=1.9209e-09
  0.000000	  0.000000	diff=6.73598e-19
  0.000000	  0.000000	diff=2.46331e-16
  0.000005	  0.000005	diff=1.70028e-08
  0.000000	  0.000000	diff=5.46376e-84
  0.000001	  0.000001	diff=8.64204e-09
  local_diff=0.256958
# W_tgt{2}, [8 4]
  0.000482	  0.000487	diff=4.30135e-06
 -0.129208	 -0.128560	diff=0.000648313
  0.000000	  0.000000	diff=3.91993e-10
 -0.000203	 -0.000202	diff=1.22106e-06
 -0.000000	 -0.000000	diff=1.16504e-11
 -2.188387	 -2.180283	diff=0.00810429
 -0.000023	 -0.000022	diff=2.11442e-07
  0.000000	  0.000000	diff=4.03045e-09
 -0.000167	 -0.000166	diff=8.42192e-07
  0.121537	  0.122118	diff=0.000580739
 -0.000000	 -0.000000	diff=2.42734e-10
  0.000159	  0.000159	diff=7.54623e-07
  0.000000	  0.000000	diff=1.32217e-10
  2.025519	  2.033286	diff=0.00776719
  0.000022	  0.000022	diff=1.97718e-07
 -0.000000	 -0.000000	diff=3.78767e-09
 -0.117148	 -0.117065	diff=8.30687e-05
  0.175358	  0.175497	diff=0.000139066
  0.021245	  0.021241	diff=3.75291e-06
 -0.045413	 -0.045421	diff=7.9792e-06
 -0.249366	 -0.249207	diff=0.000159306
  0.080066	  0.080127	diff=6.063e-05
 -0.128219	 -0.128009	diff=0.000209255
 -1.835474	 -1.821901	diff=0.0135728
 -0.157398	 -0.156765	diff=0.000633399
  0.202520	  0.202529	diff=9.16323e-06
 -0.031462	 -0.031317	diff=0.00014483
  0.138145	  0.138453	diff=0.000308902
 -0.002893	 -0.002866	diff=2.68371e-05
  0.053886	  0.053856	diff=3.00519e-05
 -0.130706	 -0.130483	diff=0.000223197
 -0.496780	 -0.565991	diff=0.0692114
  local_diff=0.101932
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.449810	  0.457780	diff=0.00796968
  0.000000	  0.000000	diff=3.17353e-17
  0.000000	  0.000000	diff=5.2171e-09
  0.000000	  0.000000	diff=1.03568e-16
  local_diff=0.00796968
# W_emb_tgt, [2 4]
 -0.000000	 -0.000000	diff=2.77889e-12
 -0.000000	 -0.000000	diff=1.12537e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.82379e-23
  0.000000	 -0.000000	diff=1.44066e-12
  0.000000	  0.000000	diff=3.63588e-10
  0.174029	  0.174701	diff=0.000671944
  local_diff=0.000671945
# W_h, [2 4]
  0.007191	  0.007190	diff=4.53093e-07
  0.206067	  0.206068	diff=1.19647e-06
 -0.265919	 -0.266410	diff=0.000490461
 -7.793612	 -7.791739	diff=0.00187306
  1.911988	  1.911840	diff=0.000147331
 -2.593384	 -2.588799	diff=0.00458552
 -0.072544	 -0.073119	diff=0.000574981
  0.789250	  0.790091	diff=0.000841381
  local_diff=0.00851439
# W_soft, [4 2]
 -2.733187	 -2.735182	diff=0.0019956
  1.227116	  1.227054	diff=6.2027e-05
  1.540589	  1.540443	diff=0.000145849
 -0.030451	 -0.032314	diff=0.00186362
 -5.238513	 -5.241345	diff=0.00283206
  2.035890	  2.035819	diff=7.1456e-05
  3.086743	  3.086652	diff=9.0678e-05
  0.121598	  0.118874	diff=0.00272319
  local_diff=0.00978448
# Num params=176, abs_diff=0.391137
Elapsed time is 2.140557 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_pos=4 v_pos=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000020	  0.000020	diff=1.19702e-07
  0.000158	 -0.000005	diff=0.00016318
 -0.000000	 -0.000000	diff=3.79136e-10
  0.000006	  0.000006	diff=3.00514e-08
 -0.019692	 -0.019538	diff=0.000154198
 -0.000104	 -0.000103	diff=7.06928e-07
 -0.000005	 -0.000005	diff=6.23523e-08
  0.000053	  0.000053	diff=5.21627e-07
  0.000000	  0.000000	diff=5.1051e-09
 -0.000194	 -0.000000	diff=0.000193484
  0.000000	  0.000000	diff=1.4879e-33
  0.000000	 -0.000000	diff=1.14551e-25
  0.000000	 -0.000000	diff=5.91303e-30
  0.000000	 -0.000000	diff=1.80097e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000005	  0.000005	diff=1.77024e-08
  0.000003	  0.000003	diff=9.95974e-09
  0.000000	  0.000000	diff=1.75556e-10
 -0.000003	 -0.000003	diff=1.16707e-08
  0.014496	  0.014553	diff=5.7821e-05
  0.000049	  0.000049	diff=1.73519e-07
 -0.000000	 -0.000000	diff=2.80262e-13
 -0.000000	 -0.000000	diff=3.79726e-10
 -0.000000	 -0.000000	diff=1.31348e-12
  0.000000	  0.000000	diff=1.83824e-13
 -0.000000	 -0.000000	diff=2.43885e-13
  0.000000	  0.000000	diff=2.91847e-13
 -0.000028	 -0.000028	diff=3.71991e-09
  0.000001	  0.000001	diff=4.99505e-11
  0.000000	  0.000000	diff=4.66506e-13
 -0.000000	 -0.000000	diff=3.07049e-13
  local_diff=0.000570346
# W_src{2}, [8 4]
 -0.000588	 -0.000585	diff=2.5476e-06
  0.000125	  0.000124	diff=4.85875e-07
 -0.000023	 -0.000023	diff=7.97532e-08
 -0.000000	 -0.000000	diff=9.0729e-10
 -0.023150	 -0.023019	diff=0.00013055
 -0.011376	 -0.011347	diff=2.97192e-05
  0.000782	  0.000789	diff=6.62581e-06
 -0.000000	 -0.000000	diff=7.15729e-11
  0.000000	 -0.000000	diff=1.80015e-38
  0.000000	  0.000000	diff=1.054e-37
  0.000000	  0.000000	diff=7.52237e-39
  0.000000	  0.000000	diff=4.32932e-38
  0.000000	 -0.000000	diff=1.16579e-38
  0.000000	  0.000000	diff=1.68256e-37
  0.000000	 -0.000000	diff=9.09115e-19
  0.000000	  0.000000	diff=6.2568e-19
 -0.000317	 -0.000316	diff=1.11321e-06
  0.000267	  0.000266	diff=9.09454e-07
 -0.000001	 -0.000001	diff=1.85421e-09
  0.000001	  0.000001	diff=2.90036e-09
 -0.000668	 -0.000667	diff=6.24788e-07
 -0.000226	 -0.000226	diff=3.62964e-08
  0.000726	  0.000732	diff=5.71225e-06
  0.000000	  0.000000	diff=1.58999e-11
  0.000089	  0.000089	diff=8.98581e-08
  0.000092	  0.000093	diff=5.47743e-07
  0.000024	  0.000024	diff=8.78324e-08
  0.000001	  0.000001	diff=4.91936e-09
  0.026478	  0.026652	diff=0.00017376
  0.008571	  0.008574	diff=3.07465e-06
 -0.000205	 -0.000204	diff=4.4998e-07
 -0.000000	 -0.000000	diff=1.0598e-12
  local_diff=0.000356425
# W_tgt{1}, [8 6]
 -0.000001	 -0.000001	diff=4.19801e-09
  0.000000	 -0.000000	diff=5.93927e-20
  0.000000	  0.000000	diff=3.33753e-12
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.0626e-08
 -0.000000	 -0.000000	diff=7.51526e-13
  0.000000	  0.000000	diff=5.90485e-53
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.82159e-09
  0.000000	  0.000000	diff=1.2389e-12
  0.000000	  0.000000	diff=1.68655e-12
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=2.06042e-08
  0.000000	  0.000000	diff=1.6857e-12
  0.000000	 -0.000000	diff=1.00057e-52
 -0.000000	 -0.000000	diff=4.0213e-13
  0.000000	  0.000000	diff=6.94016e-12
  0.000000	  0.000000	diff=3.58775e-13
 -0.000000	 -0.000000	diff=2.42289e-13
  0.000000	  0.000000	diff=6.20853e-14
 -0.000000	 -0.000000	diff=1.43713e-11
  0.000000	  0.000000	diff=1.08379e-14
 -0.000000	 -0.000001	diff=4.99793e-07
  0.000003	  0.000002	diff=1.07353e-06
  0.000000	  0.000000	diff=7.01618e-12
 -0.000000	 -0.000000	diff=2.58601e-13
 -0.000000	 -0.000000	diff=1.05059e-12
 -0.000000	 -0.000000	diff=3.99415e-13
 -0.000000	 -0.000000	diff=1.39014e-11
 -0.000000	 -0.000000	diff=2.61914e-13
  0.000003	  0.000005	diff=1.97835e-06
 -0.000013	 -0.000009	diff=4.20626e-06
 -0.000027	 -0.000027	diff=6.56326e-08
  0.000000	  0.000000	diff=5.73235e-13
 -0.000031	 -0.000031	diff=9.11821e-08
  0.000000	  0.000000	diff=1.02302e-12
 -0.000012	 -0.000012	diff=3.45513e-08
 -0.000000	 -0.000000	diff=5.12906e-13
 -0.000000	 -0.000000	diff=4.22781e-11
  0.000000	  0.000000	diff=6.80762e-12
 -0.000001	 -0.000001	diff=1.01452e-10
  0.000000	  0.000000	diff=1.20733e-13
 -0.000001	 -0.000001	diff=1.46778e-10
  0.000000	  0.000000	diff=8.33417e-14
 -0.000000	 -0.000000	diff=6.25166e-11
  0.000000	  0.000000	diff=2.63575e-13
 -0.000000	 -0.000000	diff=6.84447e-08
  0.000000	  0.000000	diff=1.46928e-07
  local_diff=8.24234e-06
# W_tgt{2}, [8 4]
  0.001410	  0.001412	diff=1.464e-06
 -0.000000	 -0.000000	diff=2.93398e-10
 -0.000000	 -0.000000	diff=8.25959e-10
  0.000002	  0.000002	diff=9.62961e-10
 -0.000062	 -0.000061	diff=2.88258e-07
  0.000004	  0.000004	diff=1.78148e-08
  0.000001	  0.000002	diff=2.03498e-07
 -0.000003	 -0.000003	diff=4.4258e-08
 -0.000000	 -0.000000	diff=2.96047e-13
  0.000000	  0.000000	diff=6.09366e-13
 -0.000000	 -0.000000	diff=3.24934e-13
  0.000000	  0.000000	diff=8.44173e-14
 -0.000000	 -0.000000	diff=8.03062e-14
  0.000000	  0.000000	diff=5.43826e-13
  0.000000	  0.000005	diff=4.31779e-06
 -0.000013	 -0.000010	diff=2.86293e-06
  0.001093	  0.001093	diff=5.90998e-07
 -0.000000	 -0.000000	diff=1.58349e-10
 -0.000000	 -0.000000	diff=4.53642e-10
  0.000001	  0.000001	diff=5.24e-10
 -0.000052	 -0.000051	diff=2.05837e-07
  0.000003	  0.000003	diff=9.64209e-09
 -0.000000	 -0.000000	diff=3.65474e-09
  0.000000	  0.000000	diff=5.19358e-10
 -0.000300	 -0.000300	diff=7.34139e-08
  0.000000	  0.000000	diff=1.68296e-11
  0.000000	  0.000000	diff=4.80336e-11
 -0.000000	 -0.000000	diff=5.85121e-11
  0.000009	  0.000009	diff=1.02734e-08
 -0.000001	 -0.000001	diff=1.06621e-09
 -0.000000	 -0.000000	diff=3.09226e-08
  0.000000	  0.000000	diff=6.99742e-09
  local_diff=1.01352e-05
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.055225	 -0.053908	diff=0.00131691
  0.000000	  0.000000	diff=3.14847e-17
  0.000276	  0.000000	diff=0.000276148
  0.000319	  0.000000	diff=0.000318753
  local_diff=0.00191182
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=8.73261e-16
 -0.000000	 -0.000000	diff=6.5708e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.21566e-20
  0.000000	 -0.000000	diff=9.68362e-16
  0.000001	  0.000001	diff=5.11986e-08
 -0.000001	 -0.000001	diff=8.12709e-08
  local_diff=1.3247e-07
# W_pos, [2 2]
  0.013483	  0.013517	diff=3.4179e-05
  0.005323	  0.005291	diff=3.21478e-05
 -0.000000	 -0.000000	diff=8.69149e-14
 -0.000000	 -0.000000	diff=3.00446e-13
  local_diff=6.63268e-05
# v_pos, [1 2]
 -0.022079	 -0.021905	diff=0.000174608
 -0.076306	 -0.074289	diff=0.00201677
  local_diff=0.00219138
# W_h, [2 4]
 -0.000001	 -0.000001	diff=2.4264e-09
  0.018819	  0.018878	diff=5.95072e-05
  0.000000	  0.000000	diff=5.93914e-10
 -0.009100	 -0.009086	diff=1.38216e-05
 -0.000003	 -0.000004	diff=7.33727e-07
  0.055878	  0.056410	diff=0.000531996
 -0.000002	 -0.000007	diff=5.38299e-06
  0.000011	  0.000006	diff=4.7819e-06
  local_diff=0.000616227
# W_soft, [4 2]
 -0.009536	 -0.009583	diff=4.76194e-05
 -0.007614	 -0.010962	diff=0.00334772
  0.991862	  0.991821	diff=4.06572e-05
 -0.967893	 -0.971276	diff=0.00338334
 -0.009489	 -0.009536	diff=4.69765e-05
 -0.009284	 -0.012587	diff=0.00330246
  0.986164	  0.986124	diff=4.01076e-05
 -0.960663	 -0.964000	diff=0.00333755
  local_diff=0.0135464
# Num params=182, abs_diff=0.0192775
Elapsed time is 2.782941 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 180, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 180
  src input 1: <s> <s> x y
  src mask: 0  0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000010	 -0.000010	diff=5.80667e-08
  0.000000	  0.000000	diff=1.34186e-15
  0.000000	  0.000000	diff=1.18329e-22
  0.000000	  0.000000	diff=1.52873e-33
 -0.001243	 -0.001250	diff=7.4602e-06
  0.000000	  0.000000	diff=5.92526e-14
  0.000002	  0.000002	diff=2.30536e-08
  0.000000	  0.000000	diff=1.74694e-13
  0.000000	  0.000000	diff=2.32677e-30
  0.000000	  0.000000	diff=2.20413e-17
  0.000000	  0.000000	diff=5.53782e-34
  0.000000	 -0.000000	diff=1.82225e-33
  0.000000	  0.000000	diff=7.53374e-33
  0.000000	  0.000000	diff=2.06121e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.14396e-67
  0.000000	  0.000000	diff=1.6979e-54
  0.000000	 -0.000000	diff=1.41002e-23
  0.000000	  0.000000	diff=4.08255e-71
 -0.000000	 -0.000000	diff=3.93273e-10
  0.000000	 -0.000000	diff=1.41025e-28
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.56817e-28
  0.000000	 -0.000000	diff=2.03989e-51
  0.000000	 -0.000000	diff=1.73023e-38
  0.000000	  0.000000	diff=9.98634e-28
  0.000000	 -0.000000	diff=4.42823e-55
  0.000000	  0.000000	diff=4.94294e-13
  0.000000	  0.000000	diff=1.00228e-32
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.53593e-32
  local_diff=7.54171e-06
# W_src{2}, [8 4]
 -0.000067	 -0.000066	diff=3.00941e-07
  0.000566	  0.000564	diff=2.45139e-06
 -0.000000	 -0.000000	diff=3.82788e-10
  0.000003	  0.000003	diff=1.59276e-08
 -0.006707	 -0.006721	diff=1.32144e-05
 -0.046658	 -0.046516	diff=0.000142552
  0.000000	  0.000000	diff=5.88197e-10
  0.000000	  0.000000	diff=1.84115e-11
  0.000000	  0.000000	diff=9.57032e-39
  0.000000	 -0.000000	diff=4.70762e-38
  0.000000	 -0.000000	diff=1.0355e-39
  0.000000	 -0.000000	diff=4.18274e-39
  0.000000	  0.000000	diff=1.20606e-38
  0.000000	 -0.000000	diff=2.74019e-38
  0.000000	 -0.000000	diff=5.83619e-19
  0.000000	 -0.000000	diff=1.69628e-18
 -0.000000	 -0.000000	diff=1.08545e-09
  0.000322	  0.000321	diff=6.91994e-07
 -0.000000	 -0.000000	diff=2.35902e-11
  0.000002	  0.000002	diff=5.68942e-09
  0.000111	  0.000111	diff=5.39148e-08
 -0.001752	 -0.001750	diff=1.73542e-06
  0.000000	  0.000000	diff=1.36923e-10
  0.000000	  0.000000	diff=2.49311e-13
  0.000000	  0.000000	diff=7.7673e-10
 -0.000188	 -0.000188	diff=1.81268e-07
  0.000000	  0.000000	diff=1.84462e-10
 -0.000001	 -0.000001	diff=9.52992e-10
  0.000727	  0.000735	diff=8.16531e-06
  0.035747	  0.035835	diff=8.77148e-05
 -0.000000	 -0.000000	diff=9.55325e-11
 -0.000000	 -0.000000	diff=2.53747e-13
  local_diff=0.000257087
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.8438e-09
  0.000000	  0.000000	diff=6.60538e-20
  0.000000	  0.000000	diff=7.84351e-21
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.22368e-08
  0.000000	  0.000000	diff=5.80066e-09
  0.000000	  0.000000	diff=2.90095e-53
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.00612e-10
  0.000000	  0.000000	diff=4.25713e-20
  0.000000	 -0.000000	diff=1.58485e-21
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=9.04999e-09
 -0.000000	 -0.000000	diff=1.79588e-13
  0.000000	 -0.000000	diff=4.91562e-53
  0.000000	 -0.000000	diff=3.51855e-63
  0.000000	 -0.000000	diff=3.04511e-18
  0.000000	 -0.000000	diff=1.17092e-36
  0.000000	 -0.000000	diff=2.28769e-30
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=5.01836e-18
  0.000000	 -0.000000	diff=7.90179e-21
  0.000000	 -0.000000	diff=5.15549e-85
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.62986e-18
  0.000000	  0.000000	diff=1.52167e-36
  0.000000	  0.000000	diff=2.73768e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.68602e-18
  0.000000	  0.000000	diff=3.30789e-21
  0.000000	  0.000000	diff=6.69984e-85
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.72445e-51
  0.000000	  0.000000	diff=4.08275e-37
  0.000000	 -0.000000	diff=8.5963e-26
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=8.76291e-26
  0.000000	  0.000000	diff=4.44014e-33
  0.000000	  0.000000	diff=2.48029e-65
  0.000000	 -0.000000	diff=3.38679e-64
  0.000000	  0.000000	diff=1.79091e-26
  0.000000	  0.000000	diff=3.96354e-41
  0.000000	 -0.000000	diff=8.20729e-37
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.95143e-26
  0.000000	  0.000000	diff=1.24571e-22
  0.000000	  0.000000	diff=2.11743e-83
  0.000000	 -0.000000	diff=8.82269e-83
  local_diff=3.9732e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=3.56574e-17
  0.000000	 -0.000000	diff=9.58074e-18
  0.000000	 -0.000000	diff=1.87329e-19
  0.000000	 -0.000000	diff=6.38997e-19
  0.000000	  0.000000	diff=2.45419e-17
  0.000000	 -0.000000	diff=1.20626e-17
  0.000000	  0.000000	diff=5.85818e-13
  0.000000	  0.000000	diff=8.52086e-13
  0.000000	 -0.000000	diff=5.80114e-19
  0.000000	 -0.000000	diff=5.98519e-18
  0.000000	  0.000000	diff=5.94903e-23
  0.000000	  0.000000	diff=4.88193e-23
  0.000000	 -0.000000	diff=8.32051e-19
  0.000000	 -0.000000	diff=7.64317e-18
 -0.000000	 -0.000000	diff=2.71353e-13
 -0.000000	 -0.000000	diff=4.79567e-13
 -0.000060	 -0.000060	diff=1.13329e-08
 -0.000010	 -0.000010	diff=1.91944e-09
 -0.000041	 -0.000041	diff=7.85678e-09
  0.000164	  0.000164	diff=2.75008e-08
 -0.000001	 -0.000001	diff=1.67537e-10
  0.000004	  0.000004	diff=6.97502e-10
 -0.000000	 -0.000000	diff=2.78683e-11
  0.001613	  0.001614	diff=8.43897e-07
  0.001181	  0.001177	diff=4.31122e-06
  0.000192	  0.000193	diff=7.26157e-07
  0.000809	  0.000806	diff=2.98892e-06
 -0.003190	 -0.003200	diff=1.04156e-05
  0.000017	  0.000017	diff=6.32407e-08
 -0.000071	 -0.000071	diff=2.64007e-07
  0.000000	  0.000000	diff=4.05702e-11
 -0.031767	 -0.031444	diff=0.00032264
  local_diff=0.000342302
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003537	 -0.003599	diff=6.21049e-05
  0.000000	 -0.000000	diff=4.88283e-17
  0.000000	  0.000000	diff=7.98032e-09
  0.000000	  0.000000	diff=4.13408e-23
  local_diff=6.21129e-05
# W_emb_tgt, [2 4]
 -0.000000	 -0.000000	diff=8.95706e-09
  0.000000	  0.000000	diff=5.66152e-16
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.63368e-14
  0.000000	  0.000000	diff=5.20232e-22
  0.000000	  0.000000	diff=2.24885e-08
 -0.000001	 -0.000001	diff=3.5697e-08
  local_diff=6.71427e-08
# W_a, [2 2]
 -0.000021	 -0.000021	diff=3.70089e-10
 -0.000521	 -0.000521	diff=1.71619e-08
  0.000288	  0.000288	diff=7.68791e-08
  0.007194	  0.007197	diff=3.43123e-06
  local_diff=3.52564e-06
# W_h, [2 4]
 -0.001058	 -0.001056	diff=1.41846e-06
 -0.021041	 -0.021013	diff=2.80146e-05
  0.003438	  0.003453	diff=1.51023e-05
  0.068412	  0.068710	diff=0.000298424
 -0.000042	 -0.000042	diff=1.01615e-09
 -0.000860	 -0.000860	diff=4.58733e-08
  0.000597	  0.000597	diff=4.51913e-07
  0.011855	  0.011864	diff=8.91774e-06
  local_diff=0.000352376
# W_soft, [4 2]
  0.000034	  0.000034	diff=1.69184e-07
  0.996541	  0.996539	diff=1.68627e-06
 -0.996574	 -0.996576	diff=1.5133e-06
  0.000003	  0.000003	diff=1.50324e-08
  0.000034	  0.000034	diff=1.69393e-07
  0.989316	  0.989314	diff=1.68673e-06
 -0.989349	 -0.989351	diff=1.51355e-06
  0.000003	  0.000003	diff=1.50438e-08
  local_diff=6.76852e-06
# Num params=180, abs_diff=0.00103182
Elapsed time is 2.127741 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_emb_tgt=8 W_a=4 v_a=2 W_h=8 W_soft=8
# assert = 0
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 0
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# logId = 3
# srcSos = 1
# srcVocabSize = 4
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 4
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000001	  0.000001	diff=7.71111e-09
  0.000158	 -0.000005	diff=0.000163181
  0.000000	  0.000000	diff=1.93104e-11
  0.000006	  0.000006	diff=3.36581e-08
 -0.001355	 -0.001346	diff=9.21503e-06
 -0.000001	 -0.000001	diff=3.75515e-08
 -0.000000	 -0.000000	diff=2.01904e-09
  0.000060	  0.000060	diff=5.64828e-07
  0.000000	  0.000000	diff=5.10438e-09
 -0.000194	 -0.000000	diff=0.000193484
  0.000000	  0.000000	diff=1.4879e-33
  0.000000	 -0.000000	diff=1.14678e-25
  0.000000	 -0.000000	diff=6.28577e-30
  0.000000	 -0.000000	diff=2.29507e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.10326e-09
  0.000003	  0.000003	diff=1.08596e-08
  0.000000	  0.000000	diff=6.13123e-12
 -0.000004	 -0.000004	diff=1.2986e-08
  0.000962	  0.000963	diff=1.24815e-06
  0.000007	  0.000007	diff=2.70073e-08
  0.000000	  0.000000	diff=2.92672e-13
  0.000000	  0.000000	diff=5.82397e-11
 -0.000000	 -0.000000	diff=5.47623e-13
 -0.000000	 -0.000000	diff=7.6165e-13
 -0.000000	 -0.000000	diff=5.50316e-13
  0.000000	  0.000000	diff=2.0178e-13
 -0.000002	 -0.000002	diff=1.19224e-09
 -0.000000	 -0.000000	diff=2.50214e-11
  0.000000	  0.000000	diff=2.46577e-13
  0.000000	  0.000000	diff=5.68236e-13
  local_diff=0.000367833
# W_src{2}, [8 4]
 -0.000045	 -0.000045	diff=1.87212e-07
 -0.000309	 -0.000308	diff=1.2531e-06
 -0.000002	 -0.000002	diff=5.37233e-09
 -0.000001	 -0.000001	diff=3.91209e-09
 -0.003418	 -0.003401	diff=1.61501e-05
 -0.001512	 -0.001510	diff=2.10921e-06
  0.000063	  0.000064	diff=5.14387e-07
 -0.000000	 -0.000000	diff=2.42587e-11
  0.000000	 -0.000000	diff=1.88493e-38
  0.000000	  0.000000	diff=1.17096e-37
  0.000000	  0.000000	diff=7.70299e-39
  0.000000	  0.000000	diff=4.5087e-38
  0.000000	 -0.000000	diff=1.2678e-38
  0.000000	  0.000000	diff=1.78807e-37
  0.000000	 -0.000000	diff=8.80711e-19
  0.000000	  0.000000	diff=9.66699e-19
 -0.000026	 -0.000026	diff=8.6516e-08
 -0.000268	 -0.000267	diff=1.02299e-06
 -0.000000	 -0.000000	diff=1.48921e-10
 -0.000001	 -0.000001	diff=2.85365e-09
 -0.000216	 -0.000216	diff=6.9323e-07
 -0.000041	 -0.000041	diff=3.07332e-08
  0.000059	  0.000059	diff=4.43512e-07
 -0.000000	 -0.000000	diff=1.60273e-11
  0.000007	  0.000007	diff=6.92439e-09
  0.000095	  0.000095	diff=1.44847e-07
  0.000002	  0.000002	diff=5.79726e-09
  0.000000	  0.000000	diff=9.01186e-10
  0.003121	  0.003139	diff=1.77592e-05
  0.001323	  0.001323	diff=7.59726e-09
 -0.000017	 -0.000017	diff=3.48392e-08
  0.000000	  0.000000	diff=1.45749e-12
  local_diff=4.04634e-05
# W_tgt{1}, [8 6]
 -0.000001	 -0.000001	diff=4.19872e-09
  0.000000	 -0.000000	diff=5.93927e-20
  0.000000	  0.000000	diff=3.33753e-12
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.0626e-08
 -0.000000	 -0.000000	diff=7.51526e-13
  0.000000	  0.000000	diff=5.90485e-53
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.82159e-09
  0.000000	  0.000000	diff=5.28357e-13
  0.000000	  0.000000	diff=9.76005e-13
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=2.06035e-08
  0.000000	  0.000000	diff=9.75154e-13
  0.000000	 -0.000000	diff=1.00057e-52
 -0.000000	 -0.000000	diff=3.08413e-13
  0.000000	  0.000000	diff=1.07353e-12
  0.000000	  0.000000	diff=5.10656e-13
 -0.000000	 -0.000000	diff=6.21694e-13
  0.000000	  0.000000	diff=5.61926e-14
 -0.000000	 -0.000000	diff=4.56229e-13
  0.000000	  0.000000	diff=5.90052e-13
 -0.000000	 -0.000001	diff=4.99793e-07
  0.000003	  0.000002	diff=1.07353e-06
  0.000000	  0.000000	diff=1.51555e-12
 -0.000000	 -0.000000	diff=1.12705e-12
 -0.000000	 -0.000000	diff=9.86106e-14
 -0.000000	 -0.000000	diff=3.93558e-13
 -0.000000	 -0.000000	diff=5.81601e-13
 -0.000000	 -0.000000	diff=8.41935e-13
  0.000003	  0.000005	diff=1.97835e-06
 -0.000013	 -0.000009	diff=4.20626e-06
 -0.000002	 -0.000002	diff=5.18708e-09
  0.000000	  0.000000	diff=2.5367e-15
 -0.000002	 -0.000002	diff=7.16958e-09
  0.000000	  0.000000	diff=4.09434e-13
 -0.000001	 -0.000001	diff=2.78134e-09
 -0.000000	 -0.000000	diff=2.31839e-13
 -0.000000	 -0.000000	diff=1.18494e-11
  0.000000	  0.000000	diff=6.94714e-12
 -0.000000	 -0.000000	diff=7.18298e-12
  0.000000	  0.000000	diff=1.45839e-13
 -0.000000	 -0.000000	diff=1.12771e-11
  0.000000	  0.000000	diff=5.36816e-13
 -0.000000	 -0.000000	diff=5.2539e-12
  0.000000	  0.000000	diff=1.83226e-13
 -0.000000	 -0.000000	diff=6.84446e-08
  0.000000	  0.000000	diff=1.46927e-07
  local_diff=8.06576e-06
# W_tgt{2}, [8 4]
  0.000109	  0.000109	diff=4.31145e-08
 -0.000000	 -0.000000	diff=4.7707e-11
 -0.000000	 -0.000000	diff=6.42872e-11
  0.000000	  0.000000	diff=1.58615e-10
 -0.000005	 -0.000005	diff=2.3855e-08
  0.000001	  0.000001	diff=2.94526e-09
  0.000001	  0.000002	diff=2.03539e-07
 -0.000003	 -0.000003	diff=4.37609e-08
 -0.000000	 -0.000000	diff=2.96047e-13
  0.000000	  0.000000	diff=1.01176e-13
 -0.000000	 -0.000000	diff=3.24934e-13
  0.000000	  0.000000	diff=8.44173e-14
 -0.000000	 -0.000000	diff=8.03062e-14
  0.000000	  0.000000	diff=1.66716e-13
  0.000000	  0.000005	diff=4.31779e-06
 -0.000013	 -0.000010	diff=2.86293e-06
  0.000084	  0.000084	diff=3.69071e-09
 -0.000000	 -0.000000	diff=2.59601e-11
 -0.000000	 -0.000000	diff=3.47241e-11
  0.000000	  0.000000	diff=8.59228e-11
 -0.000004	 -0.000004	diff=1.5838e-08
  0.000000	  0.000000	diff=1.59444e-09
 -0.000000	 -0.000000	diff=3.63246e-09
  0.000000	  0.000000	diff=7.87449e-10
 -0.000023	 -0.000023	diff=2.54425e-09
  0.000000	  0.000000	diff=2.3192e-12
  0.000000	  0.000000	diff=3.88335e-12
 -0.000000	 -0.000000	diff=9.60237e-12
  0.000001	  0.000001	diff=9.86622e-10
 -0.000000	 -0.000000	diff=1.7678e-10
 -0.000000	 -0.000000	diff=3.09203e-08
  0.000000	  0.000000	diff=7.02617e-09
  local_diff=7.56557e-06
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003808	 -0.003702	diff=0.000105797
  0.000000	  0.000000	diff=4.23686e-17
  0.000276	  0.000000	diff=0.000276148
  0.000319	  0.000000	diff=0.000318753
  local_diff=0.000700698
# W_emb_tgt, [2 4]
  0.000000	  0.000000	diff=8.73261e-16
 -0.000000	 -0.000000	diff=6.5708e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.21566e-20
  0.000000	 -0.000000	diff=9.68362e-16
  0.000001	  0.000001	diff=5.11986e-08
 -0.000001	 -0.000001	diff=8.12716e-08
  local_diff=1.32471e-07
# W_a, [2 2]
  0.000132	  0.000126	diff=5.62188e-06
 -0.000165	 -0.000164	diff=1.35735e-06
 -0.000000	 -0.000000	diff=4.68953e-13
  0.000000	  0.000000	diff=4.85336e-13
  local_diff=6.97923e-06
# v_a, [1 2]
 -0.004163	 -0.004146	diff=1.76561e-05
 -0.000435	 -0.000435	diff=2.00205e-07
  local_diff=1.78563e-05
# W_h, [2 4]
 -0.000004	 -0.000004	diff=1.4079e-08
  0.003128	  0.003139	diff=1.05677e-05
  0.000006	  0.000006	diff=3.00859e-08
 -0.004576	 -0.004553	diff=2.23587e-05
 -0.000010	 -0.000011	diff=7.87962e-07
  0.008809	  0.008893	diff=8.43632e-05
 -0.000002	 -0.000007	diff=5.38299e-06
  0.000011	  0.000006	diff=4.7819e-06
  local_diff=0.000128287
# W_soft, [4 2]
 -0.009588	 -0.009636	diff=4.78789e-05
 -0.002234	 -0.005573	diff=0.00333881
  0.992061	  0.992021	diff=3.96587e-05
 -0.973438	 -0.976813	diff=0.00337457
 -0.009596	 -0.009644	diff=4.77818e-05
 -0.002327	 -0.005659	diff=0.00333203
  0.991124	  0.991085	diff=3.95783e-05
 -0.972414	 -0.975781	diff=0.00336772
  local_diff=0.013588
# Num params=182, abs_diff=0.0148659
Elapsed time is 2.231407 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 274, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 1
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 274
  src input 1: z z x xz
  src mask: 1  1  1  1
  tgt input 1: <s> abc ac c </s>
  tgt output 1: abc ac c </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.89559e-11
  0.000000	  0.000000	diff=1.92865e-08
 -0.000007	 -0.000002	diff=4.66624e-06
  0.000000	  0.000000	diff=2.53522e-11
  0.000000	 -0.000000	diff=1.41935e-15
 -0.000000	 -0.000000	diff=5.57794e-12
  0.000000	  0.000000	diff=1.16846e-21
  0.000000	 -0.000000	diff=1.22421e-19
  0.021585	 -0.001657	diff=0.023242
  4.569798	 -0.203085	diff=4.77288
  0.000010	  0.000005	diff=5.87802e-06
  0.000605	 -0.000016	diff=0.000620422
  0.021596	 -0.001646	diff=0.0232419
  2.040085	 -0.090293	diff=2.13038
 -0.000009	  0.000001	diff=9.87099e-06
  0.000338	 -0.000015	diff=0.00035303
 -0.000000	 -0.000000	diff=9.51637e-10
  0.000001	 -0.000000	diff=9.45777e-07
 -0.000000	  0.000000	diff=1.14946e-11
  0.000000	 -0.000000	diff=7.23369e-10
 -0.000000	 -0.000000	diff=2.31321e-09
  0.000000	 -0.000000	diff=4.21829e-07
 -0.000000	  0.000000	diff=5.70279e-12
  0.000000	 -0.000000	diff=6.43082e-11
  0.000001	  0.000000	diff=4.96121e-07
 -0.000484	  0.000013	diff=0.000497004
  0.000000	 -0.000000	diff=2.19329e-09
 -0.000000	  0.000000	diff=3.81551e-07
  0.000001	  0.000000	diff=1.21362e-06
 -0.000216	  0.000006	diff=0.000221669
 -0.000000	 -0.000000	diff=2.17677e-10
 -0.000000	  0.000000	diff=3.67015e-08
  local_diff=6.95146
# W_src{2}, [8 4]
  0.000000	 -0.000000	diff=1.14287e-07
  0.000010	  0.000002	diff=7.64307e-06
 -0.000000	 -0.000000	diff=1.73274e-07
  0.000003	  0.000001	diff=1.73235e-06
 -0.000000	 -0.000000	diff=4.79678e-08
  0.000013	  0.000005	diff=8.40657e-06
  0.003840	  0.001413	diff=0.00242708
  0.006761	  0.000688	diff=0.00607318
 -0.000055	  0.000033	diff=8.86448e-05
 -0.002732	 -0.000370	diff=0.00236221
  0.000058	  0.000015	diff=4.36306e-05
 -0.000562	 -0.000156	diff=0.000406517
 -0.000010	  0.000084	diff=9.38188e-05
 -0.003264	 -0.000904	diff=0.00236023
 -0.751259	 -0.380372	diff=0.370887
 -2.334204	 -0.085392	diff=2.24881
  0.000082	  0.000009	diff=7.35533e-05
  0.000138	 -0.000004	diff=0.000142336
 -0.000030	 -0.000004	diff=2.54816e-05
  0.000039	 -0.000002	diff=4.10158e-05
  0.000064	  0.000024	diff=3.99881e-05
  0.000138	 -0.000001	diff=0.000138667
  0.044458	  0.008399	diff=0.0360598
  0.147122	 -0.009737	diff=0.156859
  0.000174	  0.000031	diff=0.000142178
 -0.003285	 -0.001083	diff=0.00220208
  0.000033	  0.000017	diff=1.58064e-05
 -0.001232	 -0.000428	diff=0.000803981
  0.000265	  0.000093	diff=0.000171715
 -0.004620	 -0.001950	diff=0.00266981
 -0.433294	 -0.047562	diff=0.385732
 -1.747720	 -0.433355	diff=1.31436
  local_diff=4.53305
# W_tgt{1}, [8 6]
  2.258984	  2.229705	diff=0.0292798
 -0.018881	 -0.018954	diff=7.3122e-05
  0.549211	  0.552294	diff=0.00308368
 -0.103049	 -0.102805	diff=0.000244429
  4.096597	  4.100671	diff=0.00407427
-11.972525	-11.798291	diff=0.174235
 -0.001345	 -0.001335	diff=1.02025e-05
  0.001116	  0.001108	diff=8.47764e-06
  2.859256	  2.812066	diff=0.0471897
 -3.993814	 -4.019242	diff=0.0254278
  1.595542	  1.611226	diff=0.0156841
 -0.130715	 -0.130323	diff=0.000392356
  7.034273	  7.090599	diff=0.0563265
-17.446525	-17.181730	diff=0.264795
  0.130905	  0.129819	diff=0.00108566
-38.209414	-43.466399	diff=5.25699
 -2.230237	 -2.281194	diff=0.050957
  0.021947	  0.021969	diff=2.16687e-05
  1.128727	  1.133475	diff=0.00474807
  0.027352	  0.027331	diff=2.15304e-05
  2.367436	  2.380618	diff=0.0131818
 -0.078234	 -0.078728	diff=0.000494113
  0.001529	  0.001546	diff=1.67102e-05
  0.164629	  0.164616	diff=1.32096e-05
 -1.990324	 -2.030010	diff=0.0396865
  0.085095	  0.085117	diff=2.25748e-05
  1.420706	  1.427576	diff=0.00686971
 -0.014098	 -0.014176	diff=7.84226e-05
  3.846422	  3.854492	diff=0.00806993
  0.085081	  0.084423	diff=0.000657754
  0.000193	  0.000205	diff=1.28624e-05
  0.750005	  0.749751	diff=0.000253766
  0.033759	  0.033733	diff=2.67666e-05
 -0.004015	 -0.004002	diff=1.34256e-05
 -0.940729	 -0.937863	diff=0.00286678
  0.124922	  0.125268	diff=0.000345151
 -1.580451	 -1.569137	diff=0.0113143
 -0.031563	 -0.031245	diff=0.000317252
  0.000000	  0.000000	diff=1.28904e-11
  0.000000	  0.000000	diff=2.74435e-12
 -0.014858	 -0.014861	diff=3.36464e-06
 -0.000493	 -0.000492	diff=9.79941e-07
 -0.209908	 -0.209741	diff=0.0001668
 -0.051258	 -0.051204	diff=5.33327e-05
 -0.070723	 -0.068491	diff=0.00223185
  0.022023	  0.022090	diff=6.67091e-05
  0.000000	  0.000000	diff=6.37978e-12
 -0.000000	 -0.000000	diff=4.57577e-13
  local_diff=6.02141
# W_tgt{2}, [8 4]
  0.114834	 -0.045896	diff=0.16073
  1.605798	  1.582515	diff=0.0232838
 -0.016257	 -0.016225	diff=3.2684e-05
  0.176717	  0.176690	diff=2.76217e-05
 -0.412203	 -0.411618	diff=0.000585428
 -1.216800	 -1.231996	diff=0.0151959
-13.833276	-13.661890	diff=0.171386
  2.003147	  1.990326	diff=0.0128212
  5.606127	  5.610773	diff=0.00464628
 -0.571906	 -0.572710	diff=0.000804056
 -0.082141	 -0.081960	diff=0.000180622
  0.130629	  0.130658	diff=2.93005e-05
 -2.200705	 -2.202391	diff=0.00168668
 -2.946906	 -2.948343	diff=0.00143745
-14.016846	-13.872547	diff=0.144299
  0.517821	  0.517218	diff=0.000602983
 -0.127731	 -0.129396	diff=0.00166555
  0.219954	  0.220185	diff=0.0002308
 -0.118107	 -0.117663	diff=0.000443942
 -0.126605	 -0.127647	diff=0.00104185
  0.666330	  0.660818	diff=0.0055117
  1.550946	  1.552505	diff=0.00155898
  8.045311	  8.093968	diff=0.0486563
 -4.696020	 -4.685009	diff=0.0110113
 -0.015695	 -0.015630	diff=6.41109e-05
 -0.013259	 -0.013264	diff=5.30049e-06
 -0.007479	 -0.007481	diff=1.85175e-06
  0.027298	  0.027303	diff=4.26602e-06
  0.120355	  0.100635	diff=0.0197202
  0.007294	  0.007276	diff=1.75837e-05
  0.960485	  0.959535	diff=0.000949578
  0.948880	  0.947568	diff=0.00131205
  local_diff=0.629944
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.87548e-12
 -0.000000	  0.000000	diff=6.43929e-12
  0.000011	  0.000004	diff=7.74813e-06
  0.000011	  0.000003	diff=7.07703e-06
  local_diff=1.48252e-05
# W_src_char{1}, [8 4]
  0.000000	  0.000000	diff=5.54078e-15
  0.000000	 -0.000000	diff=1.78918e-09
  0.000000	  0.000000	diff=6.45007e-21
 -0.000000	  0.000000	diff=2.569e-09
  0.000000	  0.000000	diff=3.70615e-14
  0.000000	  0.000000	diff=8.13174e-18
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.50222e-14
 -0.000000	  0.000000	diff=3.97982e-09
  0.000000	  0.000000	diff=1.48523e-21
 -0.000000	  0.000000	diff=6.04236e-10
 -0.000000	 -0.000000	diff=5.67449e-12
  0.000000	  0.000000	diff=3.6723e-17
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.29056e-24
  0.000000	 -0.000000	diff=7.27647e-17
  0.000000	  0.000000	diff=1.80917e-25
 -0.000000	 -0.000000	diff=5.59578e-12
  0.000000	  0.000000	diff=2.25399e-16
  0.000000	 -0.000000	diff=1.24462e-33
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.02312e-15
  0.000000	 -0.000000	diff=1.46022e-12
  0.000000	  0.000000	diff=4.80887e-24
 -0.000000	  0.000000	diff=7.70137e-12
  0.000000	  0.000000	diff=2.37149e-15
  0.000000	 -0.000000	diff=4.43677e-18
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=8.96274e-09
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.18527e-09
 -0.000000	  0.000000	diff=1.81696e-09
  0.000000	 -0.000000	diff=3.01687e-09
  0.000000	 -0.000000	diff=6.03535e-10
 -0.000000	  0.000000	diff=3.04667e-11
  0.000000	 -0.000000	diff=1.39513e-11
 -0.000000	 -0.000000	diff=1.10608e-11
  0.000000	  0.000000	diff=5.2097e-12
  local_diff=6.68333e-09
# W_emb_tgt, [2 4]
  0.000034	  0.000004	diff=3.02376e-05
 -0.000014	  0.000002	diff=1.64961e-05
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.088629	 -0.089173	diff=0.00054427
  0.066343	  0.066005	diff=0.000337611
 -0.264886	 -0.262817	diff=0.00206951
  0.189867	  0.190945	diff=0.00107824
  local_diff=0.00407636
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=2.11993e-09
  0.000047	  0.000045	diff=1.67594e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.15479e-11
 -0.000058	 -0.000057	diff=1.3032e-06
  0.287108	  0.276476	diff=0.010632
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.64054e-28
 -0.000000	 -0.000000	diff=7.39396e-09
 -0.000027	 -0.000027	diff=5.97148e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.75455e-11
 -0.000083	 -0.000080	diff=3.35596e-06
 -0.164509	 -0.168289	diff=0.00377958
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.74372e-26
  0.000000	  0.000000	diff=5.78148e-13
  0.000000	  0.000000	diff=2.61519e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.58525e-13
  0.000000	 -0.000000	diff=1.5614e-16
 -0.000006	 -0.000006	diff=5.4148e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.37946e-27
 -0.000000	 -0.000000	diff=5.41546e-11
  0.000000	  0.000000	diff=6.65285e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.77903e-12
 -0.000020	 -0.000020	diff=8.2249e-08
  0.000663	  0.000665	diff=2.52784e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.3158e-27
  local_diff=0.0144211
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.005926	 -0.005933	diff=6.68077e-06
 -0.059193	 -0.059676	diff=0.000483782
  0.000000	  0.000000	diff=5.85865e-12
  0.000000	  0.000000	diff=5.16578e-12
  0.000000	  0.000000	diff=1.47269e-12
  0.000000	  0.000000	diff=5.00317e-12
  0.000016	  0.000016	diff=1.07048e-07
  0.000002	  0.000002	diff=1.62117e-09
  local_diff=0.000490572
# W_pos, [2 2]
 -0.014128	 -0.014130	diff=1.45293e-06
  0.007367	  0.007366	diff=4.35004e-07
 -0.001316	 -0.001318	diff=2.03129e-06
  0.000667	  0.000667	diff=5.72634e-07
  local_diff=4.49186e-06
# v_pos, [1 2]
  0.012335	  0.012335	diff=5.0369e-07
 -0.005841	 -0.005841	diff=4.43478e-07
  local_diff=9.47167e-07
# W_h, [2 4]
 -0.025174	 -0.025178	diff=3.85427e-06
 -0.016944	 -0.016946	diff=2.16545e-06
  0.112942	  0.112913	diff=2.90635e-05
  0.068037	  0.068021	diff=1.6283e-05
 10.109565	 10.164338	diff=0.0547739
  1.225456	  1.225607	diff=0.000151795
  0.980440	  0.980948	diff=0.000508504
 -1.308869	 -1.337660	diff=0.028791
  local_diff=0.0842766
# W_soft, [8 2]
 -0.039703	 -0.039801	diff=9.81869e-05
 -5.259310	 -5.259376	diff=6.63224e-05
 -1.014290	 -1.014295	diff=5.2914e-06
 -1.820245	 -1.820456	diff=0.000210607
  0.086939	  0.086890	diff=4.93063e-05
 -1.873173	 -1.873432	diff=0.000258662
 12.487702	 12.487630	diff=7.2196e-05
 -2.567155	 -2.567159	diff=4.53176e-06
  0.120309	  0.120019	diff=0.000289945
 -5.801219	 -5.801458	diff=0.000238791
 -1.671838	 -1.671858	diff=1.99417e-05
 -1.423379	 -1.424301	diff=0.000922066
 -0.469355	 -0.469385	diff=2.98826e-05
 -2.644440	 -2.644539	diff=9.94492e-05
 14.848591	 14.847693	diff=0.000898459
 -2.956154	 -2.956171	diff=1.72822e-05
  local_diff=0.00328092
# Num params=274, abs_diff=18.2424
Elapsed time is 5.345892 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 402, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 402
  src input 1: <s> <s> <s> z
  src mask: 0  0  0  1
  tgt input 1: <s> c c </s> </s>
  tgt output 1: c c </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  3.702995	  3.736308	diff=0.033313
 -0.804304	 -0.802374	diff=0.00192948
 -0.415522	 -0.416100	diff=0.00057735
  0.231862	  0.231989	diff=0.000127014
  1.857163	  1.866525	diff=0.00936175
  0.147261	  0.147411	diff=0.000149188
  2.985111	  3.023581	diff=0.0384698
  8.894455	  9.092723	diff=0.198268
  0.145917	  0.147038	diff=0.00112111
 -1.080954	 -1.077173	diff=0.0037809
 -0.046638	 -0.047772	diff=0.00113416
  0.070906	  0.070996	diff=8.97788e-05
 -0.326789	 -0.326048	diff=0.000741323
 -0.809417	 -0.807293	diff=0.00212367
 -1.603273	 -1.599159	diff=0.00411441
 -0.918086	 -0.916622	diff=0.00146321
 -2.667675	 -2.648624	diff=0.0190508
  0.004209	  0.004200	diff=8.68611e-06
 -0.858212	 -0.856858	diff=0.00135381
 -0.196893	 -0.196819	diff=7.36749e-05
 -4.366693	 -4.323339	diff=0.0433544
  0.423082	  0.422931	diff=0.00015176
 -5.508081	 -5.476678	diff=0.0314026
 -0.934554	 -0.931265	diff=0.00328936
 -1.192142	 -1.190284	diff=0.00185758
  0.481285	  0.481888	diff=0.00060279
 -0.041162	 -0.041248	diff=8.59591e-05
 -0.357558	 -0.357358	diff=0.000199735
 -0.820286	 -0.821073	diff=0.000786719
  0.160622	  0.160606	diff=1.62964e-05
  2.998836	  2.997563	diff=0.0012737
 -2.051767	 -2.043146	diff=0.00862055
  local_diff=0.408892
# W_src{2}, [8 4]
 -0.765173	 -0.763816	diff=0.00135752
 -0.284891	 -0.285196	diff=0.000304898
  0.197831	  0.197767	diff=6.37061e-05
 -0.078093	 -0.078241	diff=0.000148131
  0.215532	  0.215552	diff=1.95074e-05
  0.936602	  0.946867	diff=0.0102652
 -0.519998	 -0.519916	diff=8.14623e-05
 -0.436036	 -0.434710	diff=0.00132518
  0.390112	  0.390115	diff=3.2268e-06
 -0.107406	 -0.106535	diff=0.000870819
  0.258490	  0.258416	diff=7.47144e-05
 -0.034934	 -0.034957	diff=2.25478e-05
  0.392162	  0.392652	diff=0.000490307
 -0.476406	 -0.476432	diff=2.5704e-05
 -5.654249	 -5.542408	diff=0.111841
  1.390377	  1.396492	diff=0.0061153
 -0.127567	 -0.129836	diff=0.0022688
  0.081831	  0.072776	diff=0.00905482
  0.045100	  0.044946	diff=0.000154046
 -0.040793	 -0.040791	diff=1.94214e-06
  0.647500	  0.647879	diff=0.000378352
 -0.339406	 -0.337810	diff=0.00159615
 -0.876017	 -0.866347	diff=0.00967068
 -0.612288	 -0.610555	diff=0.00173274
  0.164653	  0.163980	diff=0.000672721
  0.463591	  0.462900	diff=0.000691467
  0.013604	  0.013558	diff=4.62743e-05
  0.100456	  0.100380	diff=7.64018e-05
  0.145132	  0.146429	diff=0.00129676
  0.573136	  0.573741	diff=0.000604683
  1.387048	  1.393829	diff=0.0067809
  0.127549	  0.129354	diff=0.00180572
  local_diff=0.169842
# W_tgt{1}, [8 6]
 14.726350	  0.651558	diff=14.0748
  0.001244	  0.001244	diff=1.1382e-08
-21.419342	-19.869517	diff=1.54983
  0.024594	  0.024595	diff=1.18058e-06
-73.992372	-64.500350	diff=9.49202
  0.003091	  0.003091	diff=1.81847e-08
  0.006340	  0.006341	diff=8.98468e-07
 -0.000302	 -0.000302	diff=2.52092e-08
 12.398416	  0.535887	diff=11.8625
 -0.000962	 -0.000960	diff=1.84246e-06
-17.328908	-16.297170	diff=1.03174
 -0.019987	 -0.019986	diff=7.85801e-07
-59.173051	-52.892237	diff=6.28081
 -0.002544	 -0.002544	diff=3.69991e-08
 -0.005171	 -0.005171	diff=5.9748e-07
  0.000246	  0.000246	diff=1.66993e-08
  0.007087	  0.007107	diff=2.04812e-05
 -0.316743	 -0.317681	diff=0.000938029
 -0.002411	 -0.002382	diff=2.88592e-05
  0.044567	  0.044597	diff=2.96996e-05
  0.109243	  0.109009	diff=0.000233432
 -0.049023	 -0.049093	diff=6.92115e-05
 -0.305832	 -0.304849	diff=0.000982813
  0.207545	  0.207742	diff=0.000196707
  0.034787	  0.034866	diff=7.95271e-05
 -0.553013	 -0.555221	diff=0.00220771
 -0.001522	 -0.001471	diff=5.12236e-05
  0.102346	  0.099432	diff=0.00291421
  0.320460	  0.320211	diff=0.000248865
 -0.129898	 -0.130028	diff=0.000129866
  0.117284	  0.116919	diff=0.000365301
  0.060239	  0.060030	diff=0.000208939
  0.010674	  0.010645	diff=2.91051e-05
  0.092601	  0.092502	diff=9.82015e-05
  1.406641	  1.413869	diff=0.00722708
  0.007082	  0.007067	diff=1.52224e-05
  4.468970	  4.512450	diff=0.0434805
  0.002429	  0.002421	diff=7.88288e-06
  0.012900	  0.012902	diff=1.71373e-06
 -0.018276	 -0.018274	diff=1.97849e-06
 -0.003514	 -0.003509	diff=4.35181e-06
 -0.069583	 -0.069308	diff=0.000274855
  0.059878	  0.059889	diff=1.13339e-05
  1.316751	  1.316172	diff=0.000578756
  0.344442	  0.345110	diff=0.000668259
  0.005907	  0.005947	diff=3.9741e-05
  0.048655	  0.048682	diff=2.71454e-05
 -0.025799	 -0.025796	diff=2.28765e-06
  local_diff=44.3529
# W_tgt{2}, [8 4]
 -0.837143	 -0.835847	diff=0.00129617
  4.256009	  4.283524	diff=0.0275144
  0.017312	  0.018633	diff=0.00132094
 -2.775853	 -2.762615	diff=0.013238
 -0.836011	 -0.835982	diff=2.88888e-05
 -0.029779	 -0.029072	diff=0.000707344
  1.007162	  0.700133	diff=0.30703
 10.715639	 10.973535	diff=0.257895
  0.295688	  0.295008	diff=0.00068019
  2.290958	  2.318271	diff=0.0273129
 -0.251315	 -0.252942	diff=0.00162702
 -0.357329	 -0.357571	diff=0.000242654
  0.500762	  0.511690	diff=0.0109284
 -1.060094	 -1.062163	diff=0.00206937
 15.132004	  5.611981	diff=9.52002
  0.034335	  0.034495	diff=0.000159497
 -1.088177	 -1.089576	diff=0.0013986
 -0.373538	 -0.372988	diff=0.000550082
 -0.149264	 -0.149586	diff=0.000321604
 -0.062303	 -0.062774	diff=0.000471203
 -1.905632	 -1.904960	diff=0.000672596
  0.279940	  0.281207	diff=0.00126771
 -2.005953	 -2.002754	diff=0.00319884
 -0.745919	 -0.710721	diff=0.0351982
  1.859258	  1.859254	diff=3.9167e-06
  0.056166	  0.056541	diff=0.000374867
  0.454420	  0.455386	diff=0.000966589
 -0.221247	 -0.221519	diff=0.000272027
  0.644789	  0.644562	diff=0.000226696
  0.037340	  0.037396	diff=5.61234e-05
 -1.822905	 -1.817631	diff=0.00527359
 -5.372313	 -5.333914	diff=0.0383987
  local_diff=10.2607
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.60957e-12
  0.000000	  0.000000	diff=5.5725e-12
  0.036060	  0.034408	diff=0.00165125
  0.032971	  0.031583	diff=0.00138765
  local_diff=0.00303889
# W_src_char{1}, [8 4]
  0.000021	  0.000021	diff=1.48322e-07
 -0.003779	 -0.003779	diff=6.55234e-09
  0.000000	  0.000001	diff=7.27679e-07
  0.000000	 -0.000000	diff=1.66992e-17
  0.001352	  0.001353	diff=1.62201e-07
 -0.000007	 -0.000007	diff=2.02501e-11
  0.000003	  0.000003	diff=1.8313e-11
  0.000245	  0.000245	diff=1.39032e-09
 59.080456	 57.233331	diff=1.84712
 91.707299	  7.147265	diff=84.56
  0.026541	  0.025345	diff=0.00119661
  0.434223	  0.433927	diff=0.000295321
 20.293988	 21.612230	diff=1.31824
 -1.271809	  2.243204	diff=3.51501
 -0.002684	 -0.002669	diff=1.42091e-05
  0.190678	  0.191816	diff=0.00113743
  1.022873	  1.026922	diff=0.0040492
  0.845281	  0.868238	diff=0.0229577
  0.001474	  0.001477	diff=3.09336e-06
 -0.180327	 -0.180377	diff=5.07886e-05
  1.863072	  2.174178	diff=0.311106
  3.095182	  3.111948	diff=0.0167657
  0.004018	  0.004050	diff=3.24077e-05
  0.198148	  0.195810	diff=0.0023375
  0.096349	  0.096382	diff=3.3186e-05
  1.119194	  1.122477	diff=0.00328284
  0.000053	  0.000053	diff=4.89615e-09
 -0.040845	 -0.040848	diff=2.60743e-06
  0.032142	  0.032148	diff=5.65619e-06
  0.479990	  0.480669	diff=0.000679001
  0.000000	  0.000000	diff=4.29867e-41
 -0.023130	 -0.023118	diff=1.23242e-05
  local_diff=91.6044
# W_src_char{2}, [8 4]
  2.528843	  2.403363	diff=0.12548
 -1.462910	  1.921258	diff=3.38417
  0.060280	  0.060468	diff=0.00018805
  0.585883	  0.429743	diff=0.15614
  0.584510	  0.456570	diff=0.12794
 -0.158283	 -0.157004	diff=0.00127882
 -2.132902	 -2.084460	diff=0.0484416
 -1.026043	 -1.015823	diff=0.0102203
 -4.175894	 -4.151612	diff=0.0242822
  8.103856	  8.297879	diff=0.194022
 -0.148775	 -0.148761	diff=1.41308e-05
 -0.753068	 -0.750629	diff=0.00243858
 -1.445157	 -1.441230	diff=0.00392711
 66.960490	-15.352604	diff=82.3131
  2.177252	  2.221172	diff=0.0439202
  1.002397	  0.358778	diff=0.643618
 -0.001346	 -0.001351	diff=5.04165e-06
 -0.145210	 -0.144934	diff=0.000276191
 -0.001477	 -0.001477	diff=1.09426e-08
  0.140101	  0.140166	diff=6.54753e-05
 -0.001219	 -0.001224	diff=4.9595e-06
  0.793823	  0.795085	diff=0.00126222
 -0.133442	 -0.133381	diff=6.11547e-05
 -3.994764	 -3.945499	diff=0.0492655
 -0.038068	 -0.038142	diff=7.40862e-05
  0.544250	  0.547126	diff=0.00287617
  0.002415	  0.002415	diff=3.19751e-07
 -0.385678	 -0.385031	diff=0.000646649
 -0.009282	 -0.009357	diff=7.48608e-05
 -2.323780	 -2.313622	diff=0.0101581
  0.398203	  0.398704	diff=0.000500798
 10.062877	 10.400020	diff=0.337142
  local_diff=87.4816
# W_src_char{3}, [8 4]
 -0.202122	 -0.202913	diff=0.000791361
  0.120523	  0.120941	diff=0.000417436
  0.004080	  0.004162	diff=8.1327e-05
 -0.024329	 -0.024378	diff=4.98756e-05
 -0.251745	 -0.252521	diff=0.000775721
  0.079040	  0.079441	diff=0.000401202
 -3.094917	 -3.022766	diff=0.0721512
  6.202426	  6.231834	diff=0.0294072
  6.158446	  6.215083	diff=0.0566373
 -1.021383	 -1.013452	diff=0.0079314
 -0.746281	 -0.743650	diff=0.00263115
 -0.033652	 -0.034577	diff=0.000925144
  3.785853	  3.796927	diff=0.0110739
 -1.337532	 -1.323905	diff=0.0136268
 -1.405070	 -0.429894	diff=0.975176
  4.446372	  3.803036	diff=0.643336
  1.316512	  1.318601	diff=0.00208913
  0.581050	  0.580310	diff=0.000739183
 -1.457186	 -1.450778	diff=0.00640734
  0.339306	  0.338120	diff=0.00118608
  0.269585	  0.272122	diff=0.00253701
  1.863446	  1.876784	diff=0.0133382
 18.711446	 18.668964	diff=0.0424818
 -7.911148	 -7.310515	diff=0.600633
  0.345075	  0.345181	diff=0.000105092
  0.578665	  0.577893	diff=0.000772639
 -0.701359	 -0.698657	diff=0.00270157
 -0.050847	 -0.052013	diff=0.00116531
 -0.161330	 -0.159612	diff=0.00171783
  1.047537	  1.049031	diff=0.00149382
 10.188581	  9.943470	diff=0.245111
 -0.285288	  0.036226	diff=0.321514
  local_diff=3.05941
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 41.150174	 73.484849	diff=32.3347
 79.179749	-36.119806	diff=115.3
  0.000000	 -0.000000	diff=1.86537e-27
-10.729759	-15.538912	diff=4.80915
  0.000014	  0.000014	diff=3.49968e-07
 -1.385290	 -1.368149	diff=0.0171412
  0.000001	  0.000001	diff=2.7414e-07
  5.764295	  5.705779	diff=0.0585161
  local_diff=152.519
# W_emb_tgt, [2 4]
-68.281993	-68.515896	diff=0.233903
 51.760509	 74.170902	diff=22.4104
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000016	 -0.000016	diff=6.32821e-08
  0.000011	  0.000011	diff=3.50587e-08
  0.000015	  0.000015	diff=1.27537e-07
  0.000021	  0.000021	diff=3.53935e-07
  local_diff=22.6443
# W_tgt_char{1}, [8 4]
 -0.007321	 -0.007233	diff=8.79833e-05
  1.023546	  1.012030	diff=0.0115165
  0.005423	  0.005473	diff=4.95537e-05
 -0.000000	 -0.000000	diff=1.14318e-12
  0.000580	  0.000576	diff=4.27842e-06
 -0.000000	 -0.000000	diff=4.58134e-09
  0.000000	  0.000000	diff=6.58092e-09
  0.000000	  0.000000	diff=4.89001e-12
  0.002134	  0.002141	diff=7.60939e-06
 -0.297133	 -0.298125	diff=0.00099175
  0.013405	  0.013714	diff=0.00030839
 -0.000000	 -0.000000	diff=1.45972e-12
  0.001477	  0.001450	diff=2.69835e-05
  0.006503	  0.006614	diff=0.000110987
 -0.000000	 -0.000000	diff=5.61192e-10
 -0.000028	 -0.000029	diff=1.94807e-07
  0.000000	  0.000000	diff=5.61197e-25
  0.000000	  0.000000	diff=1.91731e-17
  0.000000	  0.000000	diff=4.64258e-16
  0.000000	  0.000000	diff=8.86949e-21
  0.000000	  0.000000	diff=4.88736e-17
  0.000001	  0.000001	diff=3.37591e-12
  0.000000	 -0.000000	diff=4.76794e-30
  0.000000	  0.000000	diff=3.44267e-24
  0.000000	 -0.000000	diff=2.43707e-23
  0.000000	  0.000000	diff=9.11534e-17
  0.000000	  0.000000	diff=3.59988e-15
  0.000000	  0.000000	diff=4.21647e-20
  0.000000	  0.000000	diff=3.78968e-16
  0.000006	  0.000006	diff=8.38628e-11
  0.000000	  0.000000	diff=1.00659e-27
  0.000000	  0.000000	diff=2.66947e-23
  local_diff=0.0131042
# W_tgt_char{2}, [8 4]
 -0.000035	 -0.000035	diff=6.28135e-13
  0.000007	  0.000007	diff=4.12171e-12
  0.000000	 -0.000000	diff=9.45999e-15
  0.000000	  0.000000	diff=2.34977e-15
 -0.000035	 -0.000035	diff=3.69624e-12
  0.000007	  0.000007	diff=9.02234e-13
 -0.004982	 -0.004982	diff=3.23223e-08
  0.002648	  0.002648	diff=7.78073e-09
 -0.000740	 -0.000740	diff=7.3499e-10
  0.000147	  0.000147	diff=5.70241e-11
  0.000000	 -0.000000	diff=2.02442e-13
  0.000002	  0.000002	diff=1.71407e-13
 -0.000730	 -0.000730	diff=8.54193e-10
  0.000144	  0.000144	diff=7.8039e-11
 -0.105878	 -0.105863	diff=1.47961e-05
  0.054839	  0.054843	diff=3.97054e-06
  0.000000	  0.000000	diff=2.36266e-12
 -0.000019	 -0.000019	diff=4.82347e-11
  0.000000	  0.000000	diff=1.29597e-22
 -0.000008	 -0.000008	diff=8.04385e-12
  0.000000	  0.000000	diff=2.36895e-12
 -0.000028	 -0.000028	diff=6.09279e-11
  0.000000	  0.000000	diff=2.80339e-12
 -0.003973	 -0.003974	diff=1.23086e-06
  0.000000	  0.000000	diff=2.25079e-13
 -0.000006	 -0.000006	diff=6.08325e-12
  0.000000	  0.000000	diff=6.08316e-23
 -0.000003	 -0.000003	diff=2.19558e-13
  0.000000	  0.000000	diff=2.22127e-13
 -0.000009	 -0.000009	diff=5.55387e-12
  0.000000	  0.000000	diff=2.06981e-12
 -0.001292	 -0.001293	diff=1.30229e-07
  local_diff=2.01697e-05
# W_tgt_char{3}, [8 4]
  0.000436	  0.000436	diff=6.86164e-10
  0.000432	  0.000432	diff=3.9288e-10
  0.000000	  0.000000	diff=1.1328e-13
  0.000000	  0.000000	diff=1.03737e-13
  0.000446	  0.000446	diff=4.97797e-10
  0.000427	  0.000427	diff=4.72764e-10
 -0.032238	 -0.032235	diff=2.75929e-06
  0.038675	  0.038678	diff=2.76821e-06
  0.000170	  0.000170	diff=1.53885e-10
  0.000175	  0.000175	diff=7.30968e-11
 -0.000001	 -0.000001	diff=4.13694e-13
 -0.000004	 -0.000004	diff=1.24766e-12
  0.000173	  0.000173	diff=1.22679e-10
  0.000172	  0.000172	diff=6.45699e-11
 -0.013235	 -0.013234	diff=3.41941e-07
  0.014391	  0.014391	diff=4.26095e-07
  0.000001	  0.000001	diff=1.52072e-12
  0.000000	  0.000000	diff=2.9386e-12
 -0.000000	 -0.000000	diff=5.5212e-13
 -0.000001	 -0.000001	diff=1.93046e-12
  0.000001	  0.000001	diff=8.56916e-14
 -0.000001	 -0.000001	diff=2.72282e-13
 -0.000307	 -0.000307	diff=4.86449e-09
  0.000311	  0.000311	diff=6.26252e-09
 -0.000003	 -0.000003	diff=1.25086e-12
 -0.000001	 -0.000001	diff=2.86176e-12
  0.000001	  0.000001	diff=2.08558e-12
  0.000003	  0.000003	diff=4.2928e-12
 -0.000002	 -0.000002	diff=3.8287e-12
  0.000002	  0.000002	diff=2.55053e-12
  0.000925	  0.000925	diff=4.41049e-08
 -0.000938	 -0.000938	diff=5.68015e-08
  local_diff=6.41006e-06
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.033883	  0.035772	diff=0.00188907
 -0.018717	 -0.018217	diff=0.000499511
  0.000000	  0.000000	diff=3.47656e-18
  0.000000	 -0.000000	diff=3.86482e-17
  0.000000	  0.000000	diff=5.22332e-23
  0.000000	 -0.000000	diff=5.02544e-22
 -0.296028	 -0.297013	diff=0.000984897
  3.352941	  3.232887	diff=0.120054
  local_diff=0.123428
# W_pos, [2 2]
 -0.519292	 -0.519448	diff=0.000155585
 -0.130882	 -0.130942	diff=6.02337e-05
  1.141028	  1.142714	diff=0.00168584
  0.285524	  0.285380	diff=0.000144027
  local_diff=0.00204569
# v_pos, [1 2]
 -0.101248	 -0.101543	diff=0.000294727
  1.136620	  1.136341	diff=0.00027918
  local_diff=0.000573907
# W_h, [2 4]
  1.923286	  1.921903	diff=0.0013833
 -2.215926	 -2.216126	diff=0.000199964
 -2.622227	 -2.621949	diff=0.000277814
  2.615168	  2.615430	diff=0.000261957
  5.760411	  5.856536	diff=0.096125
  1.694180	  1.781646	diff=0.0874663
 11.166637	 11.176231	diff=0.00959398
  0.207188	  0.190202	diff=0.0169861
  local_diff=0.212294
# W_soft, [8 2]
 -2.887141	 -2.889586	diff=0.00244516
  0.473202	  0.472768	diff=0.000433417
  2.320677	  2.319561	diff=0.0011163
  1.881662	  1.877005	diff=0.00465786
 -3.174131	 -3.176486	diff=0.00235451
  1.856668	  1.853263	diff=0.0034048
 -2.078469	 -2.078832	diff=0.000363674
  1.626669	  1.622308	diff=0.00436076
 -3.867884	 -3.872148	diff=0.00426386
 -2.022454	 -2.023543	diff=0.00108946
  0.272286	  0.270272	diff=0.00201389
  1.718915	  1.706714	diff=0.0122014
 -3.195338	 -3.199373	diff=0.00403501
  4.610228	  4.598253	diff=0.0119757
 -3.190245	 -3.190903	diff=0.000657904
  5.725057	  5.710730	diff=0.014327
  local_diff=0.0697007
# Num params=402, abs_diff=412.925
Elapsed time is 9.430400 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'charShortList', 4, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 402, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=8 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_emb_tgt=8 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_pos=4 v_pos=2 W_h=8 W_soft=16
# assert = 0
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charNumLayers = 3
# charPrefix = 
# charShortList = 4
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# isGPU = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# srcCharVocabFile = ..char.vocab
# srcCharMapFile = ..char.map
# tgtCharVocabFile = ..char.vocab
# tgtCharMapFile = ..char.map
# srcSos = 1
# srcVocabSize = 8
# tgtSos = 1
# tgtEos = 2
# tgtVocabSize = 8
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# testPerplexity = 100000
# curTestPerpWord = 100000
# startIter = 0
# iter = 0
# epochBatchCount = 0
# finetuneCount = 0
# modelSize = 402
  src input 1: <s> <s> <s> z
  src mask: 0  0  0  1
  tgt input 1: <s> c c </s> </s>
  tgt output 1: c c </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  5.764342	  3.783622	diff=1.98072
  0.702725	  0.701237	diff=0.00148836
  0.403785	  0.287750	diff=0.116036
 -0.108072	 -0.111273	diff=0.00320074
  4.797855	  2.627099	diff=2.17076
  0.982331	  1.003584	diff=0.0212533
-86.268045	-49.418549	diff=36.8495
 10.302905	  6.561302	diff=3.7416
  0.501246	  0.031951	diff=0.469294
  0.209257	  0.208792	diff=0.00046542
 -0.046406	 -0.073970	diff=0.0275637
 -0.003899	 -0.004661	diff=0.000762091
 -0.106557	 -0.620445	diff=0.513888
  0.239391	  0.244078	diff=0.0046876
-18.211613	-10.617645	diff=7.59397
  2.270792	  1.359236	diff=0.911556
  0.374105	  0.613817	diff=0.239712
  0.022277	  0.070816	diff=0.0485389
  0.002564	  0.028894	diff=0.0263296
  0.502841	  0.506522	diff=0.00368044
  6.768170	  6.827640	diff=0.0594694
 -0.973808	 -0.920182	diff=0.0536261
  8.639495	  4.395061	diff=4.24443
  5.323195	  5.020998	diff=0.302198
  1.787470	  1.568169	diff=0.219301
  0.499718	  0.509706	diff=0.00998802
  0.271183	  0.226775	diff=0.0444075
  0.331941	  0.332848	diff=0.000907415
  5.331673	  4.865487	diff=0.466186
 -0.009318	  0.000953	diff=0.0102714
 -0.551640	 -1.212687	diff=0.661047
 -0.367941	 -0.435457	diff=0.0675154
  local_diff=60.8644
# W_src{2}, [8 4]
 -0.604871	 -1.539094	diff=0.934222
 -1.647602	 -1.641299	diff=0.00630221
 -0.536909	 -0.536492	diff=0.000417163
 -0.091468	 -0.091507	diff=3.88337e-05
 -4.656690	 -5.707286	diff=1.0506
 -2.877202	 -2.869022	diff=0.00818022
 -7.421189	 -1.364976	diff=6.05621
-14.241479	-13.971704	diff=0.269775
 -1.242906	 -1.425325	diff=0.182419
  0.127589	  0.128997	diff=0.00140805
 -0.301932	 -0.301815	diff=0.000116806
 -0.045400	 -0.045407	diff=7.83468e-06
 -4.563857	 -4.750312	diff=0.186455
 -0.500556	 -0.499936	diff=0.000619555
  0.523057	  1.711889	diff=1.18883
 -2.883207	 -2.872616	diff=0.0105905
 -1.730320	 -1.724042	diff=0.00627725
  1.373721	  1.378465	diff=0.00474384
 -0.078381	 -0.078574	diff=0.000193347
 -0.033843	 -0.033838	diff=4.98792e-06
 -1.669083	 -1.653016	diff=0.0160672
  2.040899	  2.047656	diff=0.00675729
 -5.303564	 -5.271038	diff=0.0325253
 -0.358392	 -0.358023	diff=0.000369225
  2.094835	  2.104699	diff=0.00986417
 -1.762601	 -1.757746	diff=0.00485498
 -0.046082	 -0.046660	diff=0.000578781
  0.029963	  0.029954	diff=8.59662e-06
 -1.399852	 -1.357767	diff=0.0420846
 -3.841268	 -3.814762	diff=0.0265063
 10.400809	 10.506747	diff=0.105939
  0.434276	  0.434872	diff=0.000595806
  local_diff=10.1536
# W_tgt{1}, [8 6]
  7.717901	  0.773739	diff=6.94416
 -0.018578	 -0.018573	diff=5.15484e-06
-10.406798	 -9.941863	diff=0.464935
 -0.043781	 -0.043777	diff=4.61273e-06
-10.893452	-10.541968	diff=0.351484
 -0.005799	 -0.005798	diff=1.30246e-06
  0.074472	  0.074388	diff=8.39789e-05
 -0.162020	 -0.162066	diff=4.63761e-05
  6.124869	  0.551956	diff=5.57291
  0.014874	  0.014875	diff=1.55297e-06
 -8.458056	 -8.147162	diff=0.310894
  0.035182	  0.035185	diff=2.9736e-06
 -8.851140	 -8.641162	diff=0.209977
  0.004860	  0.004868	diff=7.35943e-06
 -0.059758	 -0.059812	diff=5.42312e-05
  0.130341	  0.130311	diff=2.99746e-05
  0.608988	  0.610631	diff=0.00164305
 -5.801822	 -5.742169	diff=0.0596535
 -0.244315	 -0.243726	diff=0.000589626
  0.462800	  0.461348	diff=0.00145211
  0.405810	  0.410082	diff=0.0042719
 -0.096868	 -0.096821	diff=4.75885e-05
  0.945256	  0.948472	diff=0.00321568
 -0.101275	 -0.100690	diff=0.000584442
  0.836692	  0.839720	diff=0.00302806
 -5.520846	 -5.447355	diff=0.0734907
 -0.316659	 -0.315704	diff=0.000955847
 -1.045057	 -1.051672	diff=0.00661533
 -1.003211	 -0.973274	diff=0.0299369
 -0.205475	 -0.206031	diff=0.000555762
  1.632733	  1.641041	diff=0.00830821
  0.412546	  0.415040	diff=0.00249341
  0.225864	  0.225990	diff=0.000125902
  3.788311	  3.805350	diff=0.0170393
 -0.015535	 -0.015439	diff=9.65211e-05
  0.014700	  0.014717	diff=1.61042e-05
 -0.009516	 -0.008879	diff=0.000636775
  0.028264	  0.028278	diff=1.35191e-05
  0.393292	  0.393667	diff=0.00037447
 -0.017240	 -0.017244	diff=3.94144e-06
  0.100672	  0.101183	diff=0.000511482
  1.000147	  0.993362	diff=0.00678478
 -0.002949	 -0.002926	diff=2.30133e-05
 -2.664778	 -2.659989	diff=0.00478963
  0.217653	  0.220054	diff=0.00240071
  0.013451	  0.013400	diff=5.16853e-05
  0.062543	  0.062550	diff=7.39553e-06
 -0.496695	 -0.492761	diff=0.00393416
  local_diff=14.0883
# W_tgt{2}, [8 4]
  7.776845	  7.815597	diff=0.0387516
  1.211068	  1.209321	diff=0.00174646
 -6.233009	 -6.191103	diff=0.0419057
 -0.564377	 -0.563467	diff=0.000909547
 -1.120587	 -1.117062	diff=0.00352453
  6.153509	  6.190145	diff=0.0366358
  8.398035	  8.548181	diff=0.150146
-27.344863	-26.760945	diff=0.583918
  0.076812	  0.078066	diff=0.00125359
 -5.044330	 -5.038613	diff=0.00571734
  0.505634	  0.503111	diff=0.0025234
  0.232328	  0.233571	diff=0.00124348
 -7.379784	 -7.380955	diff=0.00117016
 -4.850930	 -4.845568	diff=0.0053622
 17.386149	 17.645939	diff=0.259789
 -0.522306	 -0.520610	diff=0.00169553
 -1.139702	 -1.128869	diff=0.0108334
  1.329166	  1.328476	diff=0.000689618
  1.670710	  1.690744	diff=0.0200336
 -0.178723	 -0.177920	diff=0.000803492
 -1.600613	 -1.593603	diff=0.00701095
 -2.456687	 -2.446775	diff=0.00991221
  0.947359	  1.151436	diff=0.204076
 16.677094	 17.118734	diff=0.44164
 -1.874819	 -1.865739	diff=0.00907996
 -0.829844	 -0.829420	diff=0.000423423
  2.697661	  2.703730	diff=0.00606896
  0.649546	  0.650365	diff=0.000818615
  0.074607	  0.095584	diff=0.0209772
 -1.462683	 -1.460574	diff=0.0021093
 -8.654932	 -8.301624	diff=0.353307
  5.437754	  5.511160	diff=0.0734067
  local_diff=2.29748
# W_emb_src, [2 4]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=9.53783e-08
 -0.000002	 -0.000002	diff=7.98923e-08
  0.014675	  0.014140	diff=0.000534523
  0.013429	  0.012979	diff=0.000449448
  local_diff=0.000984147
# W_src_char{1}, [8 4]
 -0.144932	 -0.012221	diff=0.132711
 -0.038848	  0.003243	diff=0.042091
 -0.146860	 -0.010772	diff=0.136088
  0.000000	 -0.000000	diff=1.24072e-13
 -0.051554	 -0.031899	diff=0.0196549
 -0.000069	  0.000006	diff=7.42426e-05
 -0.000024	 -0.000019	diff=4.89906e-06
  0.007989	 -0.000667	diff=0.00865557
 -0.151402	  0.185479	diff=0.336881
 33.072329	 -2.902144	diff=35.9745
 -0.441994	 -0.020930	diff=0.421065
 -0.000000	 -0.000000	diff=1.77036e-10
 32.961473	 27.574335	diff=5.38714
  0.061440	 -0.005118	diff=0.0665581
  0.021444	  0.016974	diff=0.0044699
 -7.196310	  0.596850	diff=7.79316
 -0.575624	 -0.425023	diff=0.150601
-72.920904	  5.504321	diff=78.4252
 -0.083284	 -0.032470	diff=0.0508148
  0.000000	  0.000000	diff=3.26527e-10
-72.324700	-52.304337	diff=20.0204
 -0.115882	  0.009707	diff=0.125589
 -0.040203	 -0.032192	diff=0.00801029
 13.391857	 -1.132009	diff=14.5239
  0.000000	  0.000000	diff=1.05325e-17
  0.000000	 -0.000000	diff=1.07054e-15
  0.000000	  0.000000	diff=7.22581e-19
  0.000000	  0.000000	diff=3.74056e-27
  0.000000	  0.000000	diff=1.30804e-15
  0.000000	 -0.000000	diff=1.88836e-18
  0.000000	  0.000000	diff=8.05168e-19
  0.000000	  0.000000	diff=2.2016e-16
  local_diff=163.627
# W_src_char{2}, [8 4]
 55.718702	  6.622699	diff=49.096
-47.832752	 -2.468402	diff=45.3644
  1.830183	  0.244108	diff=1.58607
 34.504841	  0.262135	diff=34.2427
 19.026834	  1.425683	diff=17.6012
 -0.304845	  0.597393	diff=0.902238
-74.632631	 -8.743617	diff=65.889
 -3.308021	  7.475569	diff=10.7836
-60.562898	 -7.716668	diff=52.8462
  2.304454	 -5.947302	diff=8.25176
 -3.656949	 -0.482681	diff=3.17427
 -0.124781	  0.277753	diff=0.402535
-27.570878	 -3.593326	diff=23.9776
  0.532658	 -1.341291	diff=1.87395
108.037790	 16.134744	diff=91.903
  5.868344	-16.824629	diff=22.693
 -0.207983	 -0.027920	diff=0.180063
 -0.140348	 -0.021975	diff=0.118372
 -0.012582	 -0.001662	diff=0.01092
 -0.030100	  0.000623	diff=0.030723
 -0.083959	 -0.011900	diff=0.0720586
  0.001555	 -0.004553	diff=0.00610812
  0.415172	  0.055587	diff=0.359585
  0.023968	 -0.057004	diff=0.0809712
 -2.731237	 -0.339862	diff=2.39137
 -1.420603	 -0.279462	diff=1.14114
 -0.166699	 -0.020509	diff=0.14619
 -0.311957	  0.009867	diff=0.321824
 -1.139016	 -0.148000	diff=0.991015
  0.023194	 -0.059006	diff=0.0822001
  5.471115	  0.684859	diff=4.78626
  0.331353	 -0.744384	diff=1.07574
  local_diff=442.382
# W_src_char{3}, [8 4]
 -6.797938	 -2.412997	diff=4.38494
  4.138067	  0.873874	diff=3.26419
  0.605655	  0.247315	diff=0.35834
 -1.861079	 -0.345138	diff=1.51594
 -8.560894	 -2.997309	diff=5.56359
  1.823424	  0.437372	diff=1.38605
-114.134050	-31.461920	diff=82.6721
123.732589	 23.195116	diff=100.537
  5.862408	  1.129658	diff=4.73275
 -2.765341	 -0.377914	diff=2.38743
 -1.176028	 -0.155118	diff=1.02091
  1.346092	  0.164128	diff=1.18196
  6.208629	  1.336899	diff=4.87173
 -1.151184	 -0.097294	diff=1.05389
  8.176729	 15.588339	diff=7.41161
-23.702054	-10.508543	diff=13.1935
 -1.707257	 -0.666150	diff=1.04111
  2.318074	  0.257459	diff=2.06061
 -1.242713	  0.005991	diff=1.2487
  0.447629	 -0.040145	diff=0.487774
 -3.602399	 -0.932295	diff=2.6701
  3.416601	  0.329569	diff=3.08703
 80.047971	 -2.669575	diff=82.7175
-60.186429	  0.853197	diff=61.0396
 -2.343044	 -0.727171	diff=1.61587
  2.428388	  0.311605	diff=2.11678
 -0.798486	  0.022982	diff=0.821468
 -0.046553	 -0.108847	diff=0.0622935
 -3.995713	 -0.988636	diff=3.00708
  2.765699	  0.264424	diff=2.50128
 44.244167	 -5.834992	diff=50.0792
-13.562997	  7.081831	diff=20.6448
  local_diff=470.738
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-456.855650	-441.281100	diff=15.5746
213.309493	-29.802117	diff=243.112
  0.000000	  0.000000	diff=3.66463e-10
 -0.000000	 -0.000000	diff=3.59307e-11
 -0.097335	 -0.008272	diff=0.0890634
  0.080972	  0.006652	diff=0.0743194
 -0.000186	 -0.000497	diff=0.000311544
 -0.000076	 -0.000201	diff=0.000125482
  local_diff=258.85
# W_emb_tgt, [2 4]
 -7.481227	-12.181505	diff=4.70028
  5.612457	 12.458039	diff=6.84558
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000189	  0.000194	diff=4.25014e-06
 -0.000060	 -0.000059	diff=4.58764e-07
 -0.004291	 -0.004318	diff=2.71073e-05
  0.003153	  0.003139	diff=1.44083e-05
  local_diff=11.5459
# W_tgt_char{1}, [8 4]
  0.022966	  0.022740	diff=0.00022525
 -0.639101	 -0.613796	diff=0.0253049
 -0.017040	 -0.017166	diff=0.000126275
  0.000000	  0.000000	diff=3.96711e-12
 -0.002692	 -0.002679	diff=1.38277e-05
  0.000005	  0.000005	diff=3.93755e-08
 -0.000009	 -0.000009	diff=1.70994e-07
 -0.000000	 -0.000000	diff=4.8485e-10
 -0.006692	 -0.006711	diff=1.94529e-05
  0.179007	  0.181140	diff=0.00213284
 -0.042226	 -0.043014	diff=0.000787118
  0.000000	  0.000000	diff=2.1604e-11
 -0.006799	 -0.006712	diff=8.7018e-05
  0.000013	  0.000013	diff=2.44996e-07
  0.000003	  0.000003	diff=1.46412e-08
 -0.000000	 -0.000000	diff=3.08798e-09
  0.000000	 -0.000000	diff=1.47704e-20
  0.000000	  0.000000	diff=3.08075e-18
  0.000000	 -0.000000	diff=6.49572e-13
  0.000000	  0.000000	diff=1.66277e-20
  0.000000	 -0.000000	diff=1.01363e-13
  0.000000	  0.000000	diff=1.9506e-16
  0.000000	 -0.000000	diff=9.80143e-24
  0.000000	 -0.000000	diff=1.22046e-19
  0.000000	 -0.000000	diff=1.63852e-18
  0.000000	 -0.000000	diff=1.49824e-16
  0.000000	 -0.000000	diff=3.38146e-12
  0.000000	  0.000000	diff=8.65581e-20
  0.000000	 -0.000000	diff=5.27663e-13
  0.000000	  0.000000	diff=1.01542e-15
  0.000000	  0.000000	diff=5.3723e-22
  0.000000	 -0.000000	diff=6.35326e-19
  local_diff=0.0286971
# W_tgt_char{2}, [8 4]
  0.000127	  0.000127	diff=5.858e-10
 -0.000039	 -0.000039	diff=5.66523e-12
  0.000000	  0.000000	diff=3.41914e-13
  0.000000	 -0.000000	diff=9.68461e-13
  0.000122	  0.000122	diff=5.24922e-10
 -0.000040	 -0.000040	diff=7.0869e-12
  0.006659	  0.006661	diff=1.62322e-06
 -0.004936	 -0.004936	diff=1.5521e-07
  0.001634	  0.001634	diff=9.76695e-08
 -0.000500	 -0.000500	diff=1.84255e-09
  0.000000	  0.000000	diff=1.01121e-12
 -0.000000	 -0.000000	diff=1.70928e-12
  0.001577	  0.001577	diff=8.87507e-08
 -0.000515	 -0.000515	diff=1.34556e-09
  0.085713	  0.085983	diff=0.000270203
 -0.063742	 -0.063716	diff=2.58625e-05
 -0.000000	 -0.000000	diff=3.85593e-12
  0.000000	  0.000000	diff=1.04072e-12
  0.000000	 -0.000000	diff=1.5356e-18
  0.000000	  0.000000	diff=5.94807e-19
 -0.000000	 -0.000000	diff=1.12499e-12
  0.000000	  0.000000	diff=1.75225e-12
 -0.000000	 -0.000000	diff=3.86341e-12
  0.000000	  0.000000	diff=3.93865e-12
 -0.000000	 -0.000000	diff=4.19915e-12
  0.000000	  0.000000	diff=4.46941e-12
  0.000000	 -0.000000	diff=8.12656e-19
  0.000000	  0.000000	diff=3.14778e-19
 -0.000000	 -0.000000	diff=2.75391e-12
  0.000000	  0.000000	diff=4.09286e-12
 -0.000000	 -0.000000	diff=7.80428e-13
  0.000000	  0.000000	diff=1.32288e-12
  local_diff=0.000298034
# W_tgt_char{3}, [8 4]
  0.000005	  0.000005	diff=3.41897e-08
 -0.001348	 -0.001348	diff=1.02989e-08
  0.000000	  0.000000	diff=9.53988e-14
 -0.000000	 -0.000000	diff=7.57398e-13
  0.000005	  0.000005	diff=3.77496e-08
 -0.001320	 -0.001320	diff=1.12085e-08
 -0.000219	 -0.000178	diff=4.00849e-05
 -0.056030	 -0.056047	diff=1.67176e-05
  0.000002	  0.000002	diff=5.47901e-09
 -0.000540	 -0.000540	diff=1.6575e-09
  0.000000	  0.000000	diff=3.82109e-14
 -0.000000	 -0.000000	diff=3.11949e-12
  0.000002	  0.000002	diff=6.05325e-09
 -0.000529	 -0.000529	diff=1.80366e-09
 -0.000078	 -0.000071	diff=6.43983e-06
 -0.022446	 -0.022449	diff=2.68084e-06
  0.000000	 -0.000000	diff=2.93206e-13
  0.000000	  0.000000	diff=3.63015e-12
  0.000000	 -0.000000	diff=5.37506e-21
  0.000000	  0.000000	diff=1.23849e-18
  0.000000	 -0.000000	diff=3.08138e-13
  0.000000	  0.000000	diff=4.89196e-13
  0.000000	  0.000000	diff=4.12089e-12
  0.000000	  0.000000	diff=2.46161e-12
  0.000000	  0.000000	diff=5.47608e-12
 -0.000000	 -0.000000	diff=3.95395e-18
  0.000000	  0.000000	diff=3.81789e-21
  0.000000	 -0.000000	diff=8.80571e-19
  0.000000	  0.000000	diff=2.18869e-13
 -0.000000	 -0.000000	diff=1.72945e-12
  0.000000	 -0.000000	diff=7.13504e-12
 -0.000000	 -0.000000	diff=2.92058e-12
  local_diff=6.60317e-05
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.112302	 -0.117514	diff=0.00521188
  0.058148	  0.056808	diff=0.00133977
  0.000000	 -0.000000	diff=1.47288e-13
  0.000000	  0.000000	diff=4.05324e-12
  0.000000	 -0.000000	diff=4.98007e-18
  0.000000	 -0.000000	diff=1.90136e-19
  0.178116	  0.180224	diff=0.00210852
 -2.184656	 -1.904906	diff=0.27975
  local_diff=0.28841
# W_pos, [2 2]
 -0.389782	 -0.385181	diff=0.00460111
  0.177376	  0.177792	diff=0.000416212
  3.284925	  3.305129	diff=0.0202041
  0.065534	  0.065570	diff=3.5564e-05
  local_diff=0.025257
# v_pos, [1 2]
 -0.961042	 -0.958576	diff=0.00246551
  1.797044	  1.804017	diff=0.00697222
  local_diff=0.00943774
# W_h, [2 4]
  6.661734	  6.665502	diff=0.00376842
 -0.054040	 -0.049626	diff=0.00441474
 -6.200259	 -6.187137	diff=0.0131218
  0.210743	  0.218184	diff=0.00744171
  7.111657	  7.168788	diff=0.057131
  2.559982	  2.564576	diff=0.00459488
 -9.639235	 -9.471601	diff=0.167634
 -3.937995	 -3.928259	diff=0.00973659
  local_diff=0.267843
# W_soft, [8 2]
 -3.988964	 -3.991941	diff=0.00297707
  0.466191	  0.466045	diff=0.000145566
  1.469787	  1.469380	diff=0.000406167
  3.627336	  3.623607	diff=0.00372953
 -2.351081	 -2.353938	diff=0.00285753
  0.794767	  0.791712	diff=0.00305439
 -1.768936	 -1.769248	diff=0.000311918
  1.768238	  1.764382	diff=0.00385554
 -5.648153	 -5.654129	diff=0.0059763
 -2.878504	 -2.878873	diff=0.000368478
  0.994305	  0.993584	diff=0.000721688
  4.368041	  4.354802	diff=0.0132387
 -4.165652	 -4.171359	diff=0.00570621
  4.082457	  4.067707	diff=0.0147499
 -3.160563	 -3.161363	diff=0.000799976
  6.466904	  6.449630	diff=0.0172736
  local_diff=0.0761726
# Num params=402, abs_diff=1435.24
Elapsed time is 8.900976 seconds.
[?1l>