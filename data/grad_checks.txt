# Script dir = /Users/lmthang/nmt.matlab/scripts
cd /Users/lmthang/nmt.matlab/scripts/../code

## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'attnFunc', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 1
# attnFunc = 0
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000010	  0.000010	diff=6.17714e-11
 -0.000011	 -0.000011	diff=6.72696e-11
  0.000004	  0.000004	diff=3.15016e-10
 -0.000003	 -0.000003	diff=2.69429e-10
  0.000000	  0.000000	diff=4.3928e-13
  0.000001	  0.000001	diff=4.75354e-12
  0.004421	  0.004421	diff=1.55788e-07
  0.006020	  0.006021	diff=9.30088e-08
 -0.000005	 -0.000005	diff=6.28422e-11
  0.000013	  0.000013	diff=1.74402e-11
 -0.000006	 -0.000006	diff=2.94658e-10
  0.000000	  0.000000	diff=4.27279e-11
 -0.000000	 -0.000000	diff=1.1015e-12
 -0.000001	 -0.000001	diff=1.29598e-12
 -0.000831	 -0.000831	diff=8.15894e-08
 -0.003179	 -0.003179	diff=4.09838e-08
 -0.000000	 -0.000000	diff=2.11932e-12
  0.000000	  0.000000	diff=2.29118e-13
 -0.000000	 -0.000000	diff=2.59559e-13
  0.000000	  0.000000	diff=4.41802e-15
  0.000000	  0.000000	diff=6.62351e-13
 -0.000000	 -0.000000	diff=4.75849e-13
 -0.000051	 -0.000051	diff=4.97827e-08
 -0.000075	 -0.000075	diff=2.70437e-11
  0.000000	  0.000000	diff=3.46346e-13
 -0.000000	 -0.000000	diff=5.79698e-13
  0.000000	  0.000000	diff=4.90412e-13
 -0.000000	 -0.000000	diff=2.13149e-13
 -0.000000	 -0.000000	diff=2.15859e-13
  0.000000	  0.000000	diff=1.96564e-14
  0.000012	  0.000012	diff=1.31192e-11
  0.000041	  0.000041	diff=3.99654e-08
  local_diff=4.62302e-07
# W_tgt{1}, [8 6]
 -0.000011	 -0.000011	diff=2.40903e-11
  0.000008	  0.000008	diff=6.29277e-11
 -0.000004	 -0.000004	diff=8.3275e-10
  0.000009	  0.000009	diff=2.96192e-10
  0.000000	  0.000000	diff=4.3047e-12
  0.000018	  0.000018	diff=2.80489e-13
 -0.003969	 -0.003969	diff=1.05323e-07
 -0.011719	 -0.011719	diff=3.27218e-08
 -0.000017	 -0.000017	diff=7.50905e-12
  0.000020	  0.000020	diff=3.55317e-11
 -0.000025	 -0.000025	diff=1.06332e-09
  0.000011	  0.000011	diff=1.28662e-09
 -0.000028	 -0.000028	diff=6.27872e-11
  0.000031	  0.000031	diff=9.20014e-12
 -0.008540	 -0.008540	diff=4.35927e-07
 -0.000826	 -0.000826	diff=3.14139e-07
 -0.000000	 -0.000000	diff=5.01594e-13
  0.000000	  0.000000	diff=5.78937e-13
 -0.000001	 -0.000001	diff=1.13911e-12
 -0.000000	 -0.000000	diff=3.4278e-13
 -0.000001	 -0.000001	diff=4.56117e-14
  0.000000	  0.000000	diff=3.65961e-13
 -0.000200	 -0.000200	diff=2.62442e-07
  0.000071	  0.000071	diff=1.39549e-08
  0.000000	  0.000000	diff=4.45994e-13
  0.000000	  0.000000	diff=8.10606e-13
  0.000000	  0.000000	diff=5.17207e-14
  0.000000	  0.000000	diff=1.96545e-13
  0.000000	  0.000000	diff=4.76632e-14
 -0.000000	 -0.000000	diff=2.93701e-13
  0.000123	  0.000123	diff=2.06469e-09
  0.000010	  0.000010	diff=1.85491e-07
 -0.000000	 -0.000000	diff=3.89233e-13
  0.000000	  0.000000	diff=2.29414e-13
 -0.000001	 -0.000001	diff=7.51087e-12
  0.000000	  0.000000	diff=1.06461e-12
 -0.000001	 -0.000001	diff=1.01553e-11
  0.000001	  0.000001	diff=5.14425e-13
 -0.000322	 -0.000321	diff=2.08661e-07
 -0.000175	 -0.000175	diff=2.39493e-08
  0.000000	  0.000000	diff=1.16091e-13
 -0.000000	 -0.000000	diff=4.31763e-13
  0.000001	  0.000001	diff=1.45715e-12
 -0.000000	 -0.000000	diff=6.29152e-13
  0.000000	  0.000000	diff=3.01951e-13
 -0.000000	 -0.000000	diff=4.29796e-13
  0.000170	  0.000170	diff=3.03361e-09
  0.000156	  0.000156	diff=2.24839e-07
  local_diff=1.81626e-06
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001416	  0.001416	diff=2.24161e-07
  0.000149	  0.000148	diff=4.83014e-07
  0.000265	  0.000265	diff=1.04332e-07
  0.001956	  0.001955	diff=1.18718e-06
  local_diff=1.99869e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.001049	  0.001049	diff=1.04602e-07
 -0.000958	 -0.000958	diff=6.36147e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.003521	 -0.003520	diff=4.02644e-07
 -0.000193	 -0.000193	diff=2.0067e-07
 -0.004962	 -0.004962	diff=3.19252e-07
 -0.001412	 -0.001412	diff=3.428e-07
  local_diff=2.00611e-06
# W_soft, [5 2]
  0.007849	  0.007849	diff=6.5062e-08
  0.007849	  0.007849	diff=6.50646e-08
  0.004800	  0.004799	diff=6.50659e-08
 -0.013796	 -0.013797	diff=6.50577e-08
 -0.006701	 -0.006701	diff=6.50775e-08
 -0.002503	 -0.002503	diff=1.97754e-08
 -0.002503	 -0.002503	diff=1.97757e-08
 -0.004838	 -0.004839	diff=1.97772e-08
  0.007189	  0.007189	diff=1.97739e-08
  0.002656	  0.002656	diff=1.97791e-08
  local_diff=4.24209e-07
# Num params=110, abs_diff=6.70758e-06
Elapsed time is 0.809703 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'attnFunc', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 1
# attnFunc = 0
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.01201e-12
 -0.000000	 -0.000000	diff=6.35909e-13
  0.000000	  0.000000	diff=1.04485e-11
 -0.000000	 -0.000000	diff=1.67593e-12
  0.000001	  0.000001	diff=1.9472e-12
  0.000000	  0.000000	diff=1.72778e-13
 -0.000150	 -0.000150	diff=1.6814e-10
 -0.000020	 -0.000020	diff=2.66738e-10
 -0.000001	 -0.000001	diff=2.50322e-12
  0.000000	  0.000000	diff=9.02429e-13
 -0.000000	 -0.000000	diff=1.98496e-11
  0.000000	  0.000000	diff=2.57834e-12
 -0.000001	 -0.000001	diff=5.14255e-12
 -0.000000	 -0.000000	diff=1.14396e-12
  0.000218	  0.000218	diff=1.87396e-10
  0.000030	  0.000030	diff=5.61483e-10
 -0.000000	 -0.000000	diff=6.42337e-13
  0.000000	  0.000000	diff=4.63791e-13
 -0.000000	 -0.000000	diff=4.84313e-13
  0.000000	  0.000000	diff=7.00858e-13
 -0.000000	 -0.000000	diff=4.78397e-13
 -0.000000	 -0.000000	diff=1.0118e-13
  0.000004	  0.000004	diff=5.00007e-09
  0.000001	  0.000001	diff=5.07508e-12
  0.000000	  0.000000	diff=3.66703e-13
 -0.000000	 -0.000000	diff=4.97045e-14
  0.000000	  0.000000	diff=6.06628e-14
 -0.000000	 -0.000000	diff=8.31975e-13
  0.000000	  0.000000	diff=5.95507e-14
  0.000000	  0.000000	diff=5.59007e-13
 -0.000003	 -0.000003	diff=3.08146e-11
 -0.000001	 -0.000001	diff=5.66983e-10
  local_diff=6.84051e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=8.03802e-14
 -0.000000	 -0.000000	diff=9.53185e-13
 -0.000000	 -0.000000	diff=7.28831e-13
 -0.000000	 -0.000000	diff=3.31755e-14
  0.000000	  0.000000	diff=9.56569e-13
 -0.000000	 -0.000000	diff=8.66522e-14
  0.000154	  0.000154	diff=5.96133e-11
 -0.000141	 -0.000141	diff=8.25531e-11
  0.000000	  0.000000	diff=4.29653e-13
  0.000000	  0.000000	diff=3.05068e-13
  0.000000	  0.000000	diff=2.04698e-13
  0.000000	  0.000000	diff=1.31599e-13
 -0.000000	 -0.000000	diff=2.76807e-13
  0.000000	  0.000000	diff=1.29988e-13
 -0.000126	 -0.000126	diff=3.95108e-11
  0.000117	  0.000117	diff=5.44827e-11
 -0.000000	 -0.000000	diff=4.19572e-13
 -0.000000	 -0.000000	diff=2.81248e-13
 -0.000000	 -0.000000	diff=4.47843e-13
 -0.000000	 -0.000000	diff=1.26669e-13
  0.000000	  0.000000	diff=9.66914e-13
 -0.000000	 -0.000000	diff=6.50479e-13
  0.000003	  0.000003	diff=4.50443e-09
 -0.000003	 -0.000003	diff=4.91204e-14
  0.000000	  0.000000	diff=1.25299e-13
  0.000000	  0.000000	diff=7.31938e-13
  0.000000	  0.000000	diff=4.39996e-13
  0.000000	  0.000000	diff=2.79286e-13
 -0.000000	 -0.000000	diff=1.28328e-14
  0.000000	  0.000000	diff=1.31276e-12
 -0.000004	 -0.000004	diff=3.12506e-13
  0.000003	  0.000003	diff=4.67157e-09
  local_diff=9.42263e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.1358e-12
  0.000000	  0.000000	diff=7.17355e-13
 -0.000000	 -0.000000	diff=3.55204e-12
 -0.000000	 -0.000000	diff=2.5533e-12
 -0.000000	 -0.000000	diff=1.15237e-13
  0.000000	  0.000000	diff=8.5841e-13
  0.000075	  0.000075	diff=3.31281e-10
 -0.000089	 -0.000089	diff=6.88033e-10
  0.000000	  0.000000	diff=3.59578e-13
 -0.000000	 -0.000000	diff=3.93993e-13
  0.000000	  0.000000	diff=2.05753e-11
  0.000000	  0.000000	diff=1.09593e-11
  0.000000	  0.000000	diff=1.59798e-12
 -0.000000	 -0.000000	diff=8.16826e-13
 -0.000200	 -0.000200	diff=1.91575e-09
  0.000218	  0.000218	diff=1.40996e-09
 -0.000000	 -0.000000	diff=2.48619e-13
  0.000000	  0.000000	diff=6.71826e-13
  0.000000	  0.000000	diff=9.36701e-13
 -0.000000	 -0.000000	diff=2.57788e-13
  0.000000	  0.000000	diff=1.30817e-13
  0.000000	  0.000000	diff=4.0149e-15
 -0.000000	 -0.000000	diff=1.9846e-12
  0.000000	  0.000000	diff=7.72185e-15
  0.000000	  0.000000	diff=9.7026e-14
 -0.000000	 -0.000000	diff=1.07181e-13
 -0.000000	 -0.000000	diff=2.49916e-13
  0.000000	  0.000000	diff=3.32967e-13
 -0.000000	 -0.000000	diff=1.64263e-13
 -0.000000	 -0.000000	diff=3.16626e-13
  0.000000	  0.000000	diff=5.38418e-13
 -0.000000	 -0.000000	diff=5.78386e-12
  0.000000	  0.000000	diff=3.21581e-13
 -0.000000	 -0.000000	diff=2.1214e-13
  0.000000	  0.000000	diff=1.09172e-12
  0.000000	  0.000000	diff=6.37362e-13
  0.000000	  0.000000	diff=6.32383e-13
 -0.000000	 -0.000000	diff=3.52803e-13
 -0.000006	 -0.000006	diff=1.72576e-08
  0.000006	  0.000006	diff=2.70846e-10
 -0.000000	 -0.000000	diff=7.56398e-13
  0.000000	  0.000000	diff=1.32195e-12
 -0.000000	 -0.000000	diff=6.8749e-14
 -0.000000	 -0.000000	diff=1.47369e-12
 -0.000000	 -0.000000	diff=4.59041e-13
  0.000000	  0.000000	diff=3.97613e-13
  0.000003	  0.000003	diff=1.66925e-10
 -0.000003	 -0.000003	diff=4.75861e-09
  local_diff=2.68622e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=8.65635e-13
 -0.000000	 -0.000000	diff=4.34091e-13
 -0.000000	 -0.000000	diff=7.33809e-14
 -0.000000	 -0.000000	diff=1.18128e-12
 -0.000000	 -0.000000	diff=5.30703e-14
 -0.000000	 -0.000000	diff=1.62783e-13
  0.000182	  0.000182	diff=3.50528e-09
 -0.000127	 -0.000127	diff=2.63484e-09
  0.000000	  0.000000	diff=4.47805e-14
 -0.000000	 -0.000000	diff=2.77995e-14
 -0.000000	 -0.000000	diff=4.2504e-14
 -0.000000	 -0.000000	diff=8.06954e-13
 -0.000000	 -0.000000	diff=5.8054e-13
 -0.000000	 -0.000000	diff=2.58382e-13
  0.000015	  0.000015	diff=2.75182e-09
 -0.000013	 -0.000013	diff=1.13536e-09
  0.000000	  0.000000	diff=1.48656e-12
 -0.000000	 -0.000000	diff=5.3465e-13
 -0.000000	 -0.000000	diff=5.83813e-13
 -0.000000	 -0.000000	diff=8.1559e-14
 -0.000000	 -0.000000	diff=5.2296e-14
 -0.000000	 -0.000000	diff=2.16327e-13
  0.000011	  0.000011	diff=3.31133e-08
 -0.000008	 -0.000008	diff=3.27926e-10
 -0.000000	 -0.000000	diff=6.03095e-13
  0.000000	  0.000000	diff=3.68365e-13
  0.000000	  0.000000	diff=1.76702e-13
  0.000000	  0.000000	diff=2.50519e-13
  0.000000	  0.000000	diff=1.74047e-13
  0.000000	  0.000000	diff=6.5127e-13
 -0.000016	 -0.000016	diff=9.35584e-11
  0.000010	  0.000010	diff=1.98404e-08
  local_diff=6.34122e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000075	  0.000075	diff=2.82593e-08
 -0.000092	 -0.000092	diff=9.28177e-08
  0.000074	  0.000074	diff=2.53399e-08
 -0.000081	 -0.000081	diff=7.86173e-08
  local_diff=2.25034e-07
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000022	  0.000022	diff=6.25761e-08
 -0.000053	 -0.000053	diff=2.94624e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000070	 -0.000070	diff=9.6036e-08
 -0.000063	 -0.000063	diff=4.16344e-08
  0.000021	  0.000021	diff=4.15104e-08
 -0.000032	 -0.000032	diff=2.02925e-08
  local_diff=2.91512e-07
# W_soft, [5 2]
 -0.000086	 -0.000086	diff=8.19208e-12
 -0.000086	 -0.000086	diff=7.88968e-12
 -0.000024	 -0.000024	diff=8.03629e-12
  0.000187	  0.000187	diff=8.942e-12
  0.000009	  0.000009	diff=8.86197e-12
  0.000190	  0.000190	diff=3.24091e-11
  0.000190	  0.000190	diff=3.27182e-11
  0.000086	  0.000086	diff=3.28738e-11
 -0.000414	 -0.000414	diff=3.26647e-11
 -0.000051	 -0.000051	diff=3.27591e-11
  local_diff=2.05347e-10
# Num params=174, abs_diff=6.23289e-07
Elapsed time is 1.744278 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'attnFunc', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 1
# attnFunc = 0
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.70699e-13
  0.000000	  0.000000	diff=1.76517e-13
  0.000000	  0.000000	diff=1.4175e-11
  0.000000	  0.000000	diff=1.21093e-12
  0.000000	  0.000000	diff=2.94252e-12
  0.000000	  0.000000	diff=3.72169e-13
 -0.000088	 -0.000088	diff=9.05964e-10
  0.000004	  0.000004	diff=3.24596e-11
 -0.000000	 -0.000000	diff=1.47084e-12
  0.000000	  0.000000	diff=3.51307e-13
 -0.000000	 -0.000000	diff=2.88642e-11
  0.000000	  0.000000	diff=2.9091e-12
 -0.000000	 -0.000000	diff=4.0228e-12
 -0.000000	 -0.000000	diff=1.74188e-12
  0.000076	  0.000076	diff=1.09826e-09
  0.000034	  0.000034	diff=7.39404e-10
 -0.000000	 -0.000000	diff=5.59183e-13
  0.000000	  0.000000	diff=1.05866e-13
 -0.000000	 -0.000000	diff=1.89004e-13
  0.000000	  0.000000	diff=5.61954e-13
 -0.000000	 -0.000000	diff=1.62299e-13
 -0.000000	 -0.000000	diff=2.25475e-13
  0.000002	  0.000002	diff=4.92705e-09
  0.000000	  0.000000	diff=6.29919e-12
  0.000000	  0.000000	diff=1.48164e-12
 -0.000000	 -0.000000	diff=7.9407e-13
  0.000000	  0.000000	diff=9.11813e-14
 -0.000000	 -0.000000	diff=1.78877e-13
  0.000000	  0.000000	diff=1.18734e-13
  0.000000	  0.000000	diff=6.98045e-13
 -0.000002	 -0.000002	diff=3.65579e-11
 -0.000001	 -0.000001	diff=4.20082e-10
  local_diff=8.23016e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.39122e-13
 -0.000000	 -0.000000	diff=8.35316e-13
 -0.000000	 -0.000000	diff=7.53571e-13
 -0.000000	 -0.000000	diff=1.04244e-13
  0.000000	  0.000000	diff=7.26414e-15
 -0.000000	 -0.000000	diff=3.27244e-13
  0.000111	  0.000111	diff=7.47341e-11
 -0.000035	 -0.000035	diff=4.90506e-11
  0.000000	  0.000000	diff=3.64479e-13
  0.000000	  0.000000	diff=9.94459e-14
  0.000000	  0.000000	diff=9.29944e-13
  0.000000	  0.000000	diff=5.39092e-13
 -0.000000	 -0.000000	diff=1.08016e-13
  0.000000	  0.000000	diff=2.46041e-13
 -0.000163	 -0.000163	diff=7.90881e-11
  0.000135	  0.000135	diff=9.3633e-11
 -0.000000	 -0.000000	diff=1.15611e-13
 -0.000000	 -0.000000	diff=6.17457e-13
 -0.000000	 -0.000000	diff=2.26721e-13
 -0.000000	 -0.000000	diff=2.51084e-13
  0.000000	  0.000000	diff=7.79556e-13
 -0.000000	 -0.000000	diff=5.86092e-13
  0.000003	  0.000003	diff=4.91467e-09
 -0.000001	 -0.000001	diff=6.2867e-13
  0.000000	  0.000000	diff=1.39697e-13
  0.000000	  0.000000	diff=9.37538e-13
  0.000000	  0.000000	diff=4.67156e-14
  0.000000	  0.000000	diff=3.52655e-13
 -0.000000	 -0.000000	diff=2.00908e-13
  0.000000	  0.000000	diff=1.70998e-13
 -0.000004	 -0.000004	diff=8.47843e-13
  0.000002	  0.000002	diff=4.77479e-09
  local_diff=9.99663e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.59023e-13
  0.000000	  0.000000	diff=2.58292e-13
 -0.000000	 -0.000000	diff=3.58941e-12
 -0.000000	 -0.000000	diff=4.98908e-12
 -0.000000	 -0.000000	diff=1.00825e-12
  0.000000	  0.000000	diff=3.37876e-14
  0.000042	  0.000042	diff=2.90536e-10
 -0.000112	 -0.000112	diff=1.38789e-09
  0.000000	  0.000000	diff=5.45505e-13
 -0.000000	 -0.000000	diff=1.89052e-12
  0.000000	  0.000000	diff=2.94054e-11
  0.000000	  0.000000	diff=2.19001e-11
  0.000000	  0.000000	diff=1.73231e-12
 -0.000000	 -0.000000	diff=4.31294e-13
 -0.000158	 -0.000158	diff=2.53594e-09
  0.000233	  0.000233	diff=1.98497e-09
 -0.000000	 -0.000000	diff=2.98429e-13
  0.000000	  0.000000	diff=9.2267e-14
  0.000000	  0.000000	diff=3.69807e-13
 -0.000000	 -0.000000	diff=8.34184e-13
  0.000000	  0.000000	diff=9.33658e-13
  0.000000	  0.000000	diff=1.59363e-13
 -0.000000	 -0.000000	diff=1.21301e-12
  0.000000	  0.000000	diff=3.80376e-13
  0.000000	  0.000000	diff=1.52892e-13
 -0.000000	 -0.000000	diff=1.60575e-13
 -0.000000	 -0.000000	diff=5.20818e-13
  0.000000	  0.000000	diff=8.54171e-14
 -0.000000	 -0.000000	diff=1.17125e-12
  0.000000	  0.000000	diff=8.69386e-13
  0.000000	  0.000000	diff=1.38672e-13
 -0.000000	 -0.000000	diff=9.15253e-12
  0.000000	  0.000000	diff=4.43923e-13
 -0.000000	 -0.000000	diff=8.00218e-14
  0.000000	  0.000000	diff=1.96003e-13
  0.000000	  0.000000	diff=4.49582e-13
  0.000000	  0.000000	diff=2.4237e-13
 -0.000000	 -0.000000	diff=4.30746e-13
 -0.000004	 -0.000004	diff=1.16943e-08
  0.000005	  0.000005	diff=3.52506e-10
 -0.000000	 -0.000000	diff=9.6141e-14
  0.000000	  0.000000	diff=9.16034e-14
 -0.000000	 -0.000000	diff=5.0626e-14
 -0.000000	 -0.000000	diff=4.09526e-13
 -0.000000	 -0.000000	diff=1.91686e-13
  0.000000	  0.000000	diff=2.76682e-13
  0.000002	  0.000002	diff=1.09243e-10
 -0.000004	 -0.000004	diff=6.36185e-09
  local_diff=2.48032e-08
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.01695e-12
 -0.000000	 -0.000000	diff=2.79277e-13
 -0.000000	 -0.000000	diff=4.14675e-13
 -0.000000	 -0.000000	diff=9.96538e-13
 -0.000000	 -0.000000	diff=1.59943e-13
 -0.000000	 -0.000000	diff=5.17265e-13
  0.000104	  0.000104	diff=2.3385e-09
  0.000012	  0.000012	diff=2.40086e-09
  0.000000	  0.000000	diff=2.45358e-13
 -0.000000	 -0.000000	diff=2.4845e-13
 -0.000000	 -0.000000	diff=5.49966e-13
 -0.000000	 -0.000000	diff=8.73966e-13
 -0.000000	 -0.000000	diff=1.00127e-13
 -0.000000	 -0.000000	diff=4.30607e-13
  0.000022	  0.000022	diff=4.77782e-09
 -0.000020	 -0.000020	diff=2.2462e-09
  0.000000	  0.000000	diff=1.13921e-13
  0.000000	  0.000000	diff=7.60806e-13
 -0.000000	 -0.000000	diff=1.66555e-13
 -0.000000	 -0.000000	diff=7.03774e-13
 -0.000000	 -0.000000	diff=5.38458e-13
 -0.000000	 -0.000000	diff=5.65232e-13
  0.000009	  0.000009	diff=2.80555e-08
 -0.000003	 -0.000003	diff=2.42601e-10
 -0.000000	 -0.000000	diff=1.4268e-12
  0.000000	  0.000000	diff=2.62208e-13
  0.000000	  0.000000	diff=3.31084e-13
  0.000000	  0.000000	diff=6.06037e-13
  0.000000	  0.000000	diff=2.41643e-13
  0.000000	  0.000000	diff=1.45481e-13
 -0.000015	 -0.000015	diff=7.61084e-11
  0.000005	  0.000005	diff=1.60776e-08
  local_diff=5.62269e-08
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=1.72009e-08
 -0.000014	 -0.000014	diff=4.22729e-08
  0.000062	  0.000062	diff=2.32496e-08
 -0.000020	 -0.000020	diff=1.66708e-08
  local_diff=9.93941e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000107	  0.000107	diff=5.82653e-08
 -0.000042	 -0.000042	diff=2.80125e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000033	  0.000033	diff=8.8686e-08
 -0.000040	 -0.000040	diff=2.87379e-08
  0.000068	  0.000068	diff=5.73714e-08
 -0.000034	 -0.000034	diff=2.63123e-08
  local_diff=2.87385e-07
# W_soft, [5 2]
 -0.000090	 -0.000090	diff=1.29046e-11
 -0.000090	 -0.000090	diff=1.25565e-11
 -0.000013	 -0.000013	diff=1.19156e-11
  0.000150	  0.000150	diff=1.24629e-11
  0.000042	  0.000042	diff=1.26882e-11
  0.000192	  0.000192	diff=4.55799e-11
  0.000192	  0.000192	diff=4.60538e-11
  0.000090	  0.000090	diff=4.51997e-11
 -0.000352	 -0.000352	diff=4.58334e-11
 -0.000122	 -0.000122	diff=4.54174e-11
  local_diff=2.90612e-10
# Num params=174, abs_diff=4.86327e-07
Elapsed time is 1.752799 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=5.74595e-13
  0.000000	  0.000000	diff=4.24412e-13
  0.000000	  0.000000	diff=3.59391e-14
 -0.000000	 -0.000000	diff=1.39309e-12
  0.000000	  0.000000	diff=4.75804e-13
  0.000000	  0.000000	diff=4.93945e-13
 -0.000004	 -0.000004	diff=3.10538e-11
  0.000000	  0.000000	diff=4.49739e-12
 -0.000000	 -0.000000	diff=1.3946e-12
  0.000000	  0.000000	diff=3.50637e-13
 -0.000000	 -0.000000	diff=3.49146e-13
  0.000000	  0.000000	diff=7.27216e-13
 -0.000000	 -0.000000	diff=3.48719e-13
 -0.000000	 -0.000000	diff=7.87611e-13
  0.000006	  0.000006	diff=3.00447e-11
  0.000002	  0.000002	diff=4.98799e-11
 -0.000000	 -0.000000	diff=2.75753e-14
  0.000000	  0.000000	diff=1.24249e-12
 -0.000000	 -0.000000	diff=1.42525e-13
  0.000000	  0.000000	diff=1.77035e-13
 -0.000000	 -0.000000	diff=7.88017e-13
 -0.000000	 -0.000000	diff=2.69676e-13
  0.000000	  0.000000	diff=9.22725e-11
  0.000000	  0.000000	diff=6.86964e-14
  0.000000	  0.000000	diff=1.99194e-13
 -0.000000	 -0.000000	diff=2.18605e-13
  0.000000	  0.000000	diff=3.30808e-13
 -0.000000	 -0.000000	diff=1.08416e-12
  0.000000	  0.000000	diff=3.2093e-13
  0.000000	  0.000000	diff=8.34294e-13
 -0.000000	 -0.000000	diff=1.03679e-12
 -0.000000	 -0.000000	diff=2.26303e-11
  local_diff=2.44475e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=3.56587e-13
 -0.000000	 -0.000000	diff=5.17321e-13
  0.000000	  0.000000	diff=2.13783e-13
 -0.000000	 -0.000000	diff=1.79745e-13
 -0.000000	 -0.000000	diff=1.94365e-12
 -0.000000	 -0.000000	diff=2.07854e-13
 -0.000002	 -0.000002	diff=1.06806e-12
 -0.000007	 -0.000007	diff=1.9624e-12
 -0.000000	 -0.000000	diff=1.13056e-13
  0.000000	  0.000000	diff=3.5745e-13
 -0.000000	 -0.000000	diff=3.59741e-13
  0.000000	  0.000000	diff=1.48901e-13
  0.000000	  0.000000	diff=1.04807e-12
  0.000000	  0.000000	diff=1.06276e-12
  0.000003	  0.000003	diff=1.01645e-12
  0.000008	  0.000008	diff=1.69181e-12
  0.000000	  0.000000	diff=1.14166e-12
 -0.000000	 -0.000000	diff=3.03627e-14
  0.000000	  0.000000	diff=8.84239e-13
 -0.000000	 -0.000000	diff=1.29057e-12
  0.000000	 -0.000000	diff=2.18884e-13
 -0.000000	 -0.000000	diff=4.2664e-15
 -0.000000	 -0.000000	diff=6.20349e-11
 -0.000000	 -0.000000	diff=6.60007e-13
 -0.000000	 -0.000000	diff=5.531e-13
  0.000000	  0.000000	diff=2.24175e-13
 -0.000000	 -0.000000	diff=4.75559e-13
  0.000000	  0.000000	diff=7.93873e-13
  0.000000	  0.000000	diff=2.70752e-13
  0.000000	  0.000000	diff=9.59044e-14
  0.000000	  0.000000	diff=8.4772e-13
  0.000000	  0.000000	diff=1.80854e-10
  local_diff=2.62628e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=6.33858e-13
  0.000000	  0.000000	diff=1.8447e-13
 -0.000000	 -0.000000	diff=6.37399e-13
 -0.000000	 -0.000000	diff=7.78965e-13
  0.000000	  0.000000	diff=1.09272e-12
  0.000000	  0.000000	diff=1.0736e-12
  0.000000	  0.000000	diff=1.11376e-12
 -0.000007	 -0.000007	diff=4.75299e-11
 -0.000000	 -0.000000	diff=1.33201e-13
 -0.000000	 -0.000000	diff=4.8014e-13
  0.000000	  0.000000	diff=9.86663e-13
  0.000000	  0.000000	diff=3.30314e-13
 -0.000000	 -0.000000	diff=1.31508e-13
 -0.000000	 -0.000000	diff=6.11025e-13
 -0.000001	 -0.000001	diff=3.63296e-11
  0.000002	  0.000002	diff=1.66037e-10
  0.000000	  0.000000	diff=5.37239e-13
  0.000000	  0.000000	diff=4.63115e-13
 -0.000000	 -0.000000	diff=1.10817e-12
  0.000000	  0.000000	diff=1.74903e-13
 -0.000000	 -0.000000	diff=1.31699e-12
  0.000000	  0.000000	diff=4.07322e-13
  0.000000	  0.000000	diff=1.10492e-13
  0.000000	  0.000000	diff=3.41996e-13
  0.000000	  0.000000	diff=8.12151e-14
  0.000000	  0.000000	diff=5.75156e-13
 -0.000000	 -0.000000	diff=5.87409e-13
 -0.000000	  0.000000	diff=7.37433e-13
 -0.000000	 -0.000000	diff=6.95598e-13
 -0.000000	  0.000000	diff=8.46119e-13
  0.000000	  0.000000	diff=5.57832e-13
  0.000000	  0.000000	diff=4.63593e-13
 -0.000000	 -0.000000	diff=2.91601e-13
 -0.000000	 -0.000000	diff=9.76572e-14
  0.000000	  0.000000	diff=3.49227e-13
  0.000000	  0.000000	diff=3.25779e-14
 -0.000000	 -0.000000	diff=1.18203e-14
 -0.000000	 -0.000000	diff=5.935e-13
 -0.000000	 -0.000000	diff=2.27674e-10
  0.000000	  0.000000	diff=3.32003e-11
 -0.000000	 -0.000000	diff=2.25259e-13
  0.000000	  0.000000	diff=4.57904e-14
 -0.000000	 -0.000000	diff=3.90297e-13
 -0.000000	 -0.000000	diff=7.07897e-14
  0.000000	  0.000000	diff=8.78889e-13
  0.000000	  0.000000	diff=6.31425e-13
  0.000000	  0.000000	diff=2.52201e-12
 -0.000000	 -0.000000	diff=2.01964e-10
  local_diff=7.36069e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.16442e-12
  0.000000	  0.000000	diff=3.11523e-13
  0.000000	  0.000000	diff=1.62102e-13
 -0.000000	 -0.000000	diff=2.06145e-13
  0.000000	  0.000000	diff=4.40521e-13
 -0.000000	 -0.000000	diff=3.82666e-13
 -0.000001	 -0.000001	diff=6.80624e-14
 -0.000004	 -0.000004	diff=6.9823e-12
  0.000000	  0.000000	diff=5.50379e-13
 -0.000000	 -0.000000	diff=5.08616e-13
 -0.000000	 -0.000000	diff=5.79325e-13
 -0.000000	 -0.000000	diff=2.86558e-13
 -0.000000	 -0.000000	diff=1.63343e-13
 -0.000000	 -0.000000	diff=2.76659e-14
 -0.000001	 -0.000001	diff=6.32789e-13
 -0.000002	 -0.000002	diff=3.55698e-13
 -0.000000	 -0.000000	diff=1.77239e-13
 -0.000000	 -0.000000	diff=5.88361e-13
  0.000000	  0.000000	diff=5.58973e-13
 -0.000000	 -0.000000	diff=1.10778e-13
  0.000000	  0.000000	diff=2.5414e-13
 -0.000000	 -0.000000	diff=5.24983e-13
 -0.000000	 -0.000000	diff=4.11156e-10
 -0.000000	 -0.000000	diff=1.88494e-11
  0.000000	  0.000000	diff=2.43123e-13
  0.000000	  0.000000	diff=5.09295e-14
 -0.000000	 -0.000000	diff=2.95153e-13
  0.000000	  0.000000	diff=7.84042e-13
 -0.000000	 -0.000000	diff=1.99528e-12
  0.000000	  0.000000	diff=9.08612e-13
  0.000000	  0.000000	diff=1.88003e-12
  0.000000	  0.000000	diff=8.46547e-10
  local_diff=1.29775e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=6.74532e-10
 -0.000001	 -0.000001	diff=8.90592e-10
  0.000002	  0.000002	diff=1.20965e-09
 -0.000002	 -0.000002	diff=2.77979e-09
  local_diff=5.55457e-09
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=6.8957e-10
 -0.000000	 -0.000000	diff=8.80521e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000007	 -0.000007	diff=2.34038e-09
 -0.000001	 -0.000001	diff=6.93654e-10
 -0.000009	 -0.000009	diff=1.11047e-09
 -0.000000	 -0.000000	diff=2.60515e-10
  local_diff=5.18263e-09
# W_h, [2 4]
  0.000000	  0.000000	diff=2.34492e-12
 -0.000006	 -0.000006	diff=8.39634e-13
  0.000001	  0.000001	diff=1.7938e-12
  0.000006	  0.000006	diff=1.56712e-12
 -0.000003	 -0.000003	diff=8.03945e-12
  0.000001	  0.000001	diff=3.7811e-12
  0.000011	  0.000011	diff=8.17347e-11
 -0.000001	 -0.000001	diff=3.21496e-11
  local_diff=1.3225e-10
# W_soft, [5 2]
  0.000040	  0.000040	diff=1.22914e-12
  0.000040	  0.000040	diff=1.71832e-12
 -0.000009	 -0.000009	diff=1.91319e-12
 -0.000047	 -0.000047	diff=1.35764e-12
 -0.000026	 -0.000026	diff=8.87137e-13
  0.000033	  0.000033	diff=8.36341e-13
  0.000033	  0.000033	diff=2.2834e-13
 -0.000013	 -0.000013	diff=8.19505e-13
 -0.000036	 -0.000036	diff=9.04005e-13
 -0.000018	 -0.000018	diff=1.2212e-12
  local_diff=1.11148e-11
# Num params=182, abs_diff=1.34215e-08
Elapsed time is 2.865112 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 1
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.31621e-12
  0.000000	  0.000000	diff=5.52343e-13
  0.000000	  0.000000	diff=9.34988e-13
  0.000000	  0.000000	diff=4.50825e-13
  0.000000	  0.000000	diff=3.72512e-13
  0.000000	  0.000000	diff=1.98733e-13
 -0.000011	 -0.000011	diff=8.84253e-11
  0.000007	  0.000007	diff=8.7564e-11
 -0.000000	 -0.000000	diff=2.03204e-13
 -0.000000	 -0.000000	diff=1.03148e-12
 -0.000000	 -0.000000	diff=7.38361e-13
 -0.000000	 -0.000000	diff=1.78631e-12
 -0.000000	 -0.000000	diff=2.61349e-13
 -0.000000	 -0.000000	diff=3.06462e-13
  0.000016	  0.000016	diff=1.94511e-10
 -0.000015	 -0.000015	diff=2.57379e-10
 -0.000000	 -0.000000	diff=3.34199e-13
 -0.000000	 -0.000000	diff=7.65688e-13
 -0.000000	 -0.000000	diff=3.31081e-14
 -0.000000	 -0.000000	diff=6.6221e-13
 -0.000000	 -0.000000	diff=3.27686e-13
  0.000000	  0.000000	diff=8.45683e-14
  0.000000	  0.000000	diff=1.03373e-10
 -0.000000	 -0.000000	diff=8.36996e-13
  0.000000	  0.000000	diff=1.29982e-12
  0.000000	  0.000000	diff=2.74183e-13
  0.000000	  0.000000	diff=3.98802e-14
  0.000000	  0.000000	diff=2.93106e-13
  0.000000	  0.000000	diff=3.41689e-13
  0.000000	  0.000000	diff=2.37731e-13
 -0.000000	 -0.000000	diff=2.79537e-13
  0.000000	  0.000000	diff=3.90692e-10
  local_diff=1.13591e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.03599e-13
  0.000000	  0.000000	diff=5.17043e-13
 -0.000000	 -0.000000	diff=5.29157e-13
  0.000000	  0.000000	diff=4.75126e-13
 -0.000000	 -0.000000	diff=1.037e-12
 -0.000000	 -0.000000	diff=5.83128e-14
  0.000034	  0.000034	diff=9.90651e-12
  0.000007	  0.000007	diff=6.08391e-12
  0.000000	  0.000000	diff=3.49285e-13
 -0.000000	 -0.000000	diff=6.67091e-13
  0.000000	  0.000000	diff=5.39419e-13
 -0.000000	 -0.000000	diff=4.29655e-13
  0.000000	  0.000000	diff=1.21428e-13
  0.000000	  0.000000	diff=2.00178e-13
 -0.000039	 -0.000039	diff=8.96773e-12
 -0.000008	 -0.000008	diff=5.56894e-12
 -0.000000	 -0.000000	diff=1.21721e-12
  0.000000	  0.000000	diff=1.19084e-12
 -0.000000	 -0.000000	diff=4.70931e-13
  0.000000	  0.000000	diff=2.05496e-13
 -0.000000	 -0.000000	diff=1.17678e-12
 -0.000000	 -0.000000	diff=2.47211e-13
  0.000001	  0.000001	diff=3.98049e-10
  0.000000	  0.000000	diff=1.0367e-13
  0.000000	  0.000000	diff=1.08783e-12
 -0.000000	 -0.000000	diff=7.97024e-14
  0.000000	  0.000000	diff=4.48404e-13
 -0.000000	 -0.000000	diff=3.00847e-13
  0.000000	  0.000000	diff=6.25214e-13
  0.000000	  0.000000	diff=2.24392e-13
 -0.000001	 -0.000001	diff=2.11553e-13
 -0.000000	 -0.000000	diff=1.73813e-10
  local_diff=6.15407e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=1.69408e-13
 -0.000000	 -0.000000	diff=3.54196e-13
 -0.000000	 -0.000000	diff=9.29245e-13
  0.000000	  0.000000	diff=5.75577e-13
 -0.000000	 -0.000000	diff=6.72091e-14
 -0.000000	 -0.000000	diff=4.00273e-13
  0.000008	  0.000008	diff=3.87779e-11
  0.000009	  0.000009	diff=5.28238e-11
  0.000000	  0.000000	diff=8.30622e-13
  0.000000	  0.000000	diff=6.64333e-13
  0.000000	  0.000000	diff=2.03377e-12
 -0.000000	 -0.000000	diff=2.54673e-12
  0.000000	  0.000000	diff=4.05248e-13
  0.000000	  0.000000	diff=4.07635e-13
 -0.000011	 -0.000011	diff=1.48571e-10
 -0.000016	 -0.000016	diff=1.13949e-07
  0.000000	 -0.000000	diff=9.2997e-13
  0.000000	 -0.000000	diff=1.30477e-13
  0.000000	  0.000000	diff=9.94296e-13
  0.000000	 -0.000000	diff=1.16394e-13
  0.000000	  0.000000	diff=6.93982e-14
  0.000000	 -0.000000	diff=9.2571e-13
 -0.000000	 -0.000000	diff=1.7322e-14
 -0.000000	 -0.000000	diff=5.19932e-13
  0.000000	  0.000000	diff=7.9129e-15
  0.000000	 -0.000000	diff=4.87123e-15
 -0.000000	 -0.000000	diff=6.03213e-13
  0.000000	  0.000000	diff=6.35027e-13
  0.000000	 -0.000000	diff=9.33646e-14
  0.000000	  0.000000	diff=6.0571e-14
 -0.000000	 -0.000000	diff=1.33303e-12
 -0.000000	 -0.000000	diff=9.28898e-14
  0.000000	  0.000000	diff=5.3017e-13
  0.000000	  0.000000	diff=5.80599e-13
  0.000000	  0.000000	diff=7.84909e-13
 -0.000000	 -0.000000	diff=5.71754e-13
  0.000000	  0.000000	diff=8.22481e-13
 -0.000000	 -0.000000	diff=2.4971e-13
 -0.000001	 -0.000001	diff=1.4325e-09
 -0.000001	 -0.000001	diff=1.32523e-11
 -0.000000	 -0.000000	diff=6.48839e-13
 -0.000000	 -0.000000	diff=3.11391e-13
 -0.000000	 -0.000000	diff=3.6093e-14
  0.000000	  0.000000	diff=2.43318e-13
 -0.000000	 -0.000000	diff=3.64625e-13
  0.000000	  0.000000	diff=5.21646e-14
  0.000000	  0.000000	diff=9.16542e-12
  0.000001	  0.000001	diff=1.29954e-09
  local_diff=1.16965e-07
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.13942e-12
 -0.000000	 -0.000000	diff=7.13161e-13
 -0.000000	 -0.000000	diff=9.3051e-13
  0.000000	  0.000000	diff=1.00736e-12
 -0.000000	 -0.000000	diff=3.93491e-13
  0.000000	  0.000000	diff=1.80987e-13
  0.000032	  0.000032	diff=2.59374e-11
  0.000012	  0.000012	diff=8.02837e-12
  0.000000	  0.000000	diff=7.17968e-13
  0.000000	  0.000000	diff=1.41022e-13
 -0.000000	 -0.000000	diff=9.14003e-13
  0.000000	  0.000000	diff=1.83987e-13
 -0.000000	 -0.000000	diff=1.0263e-12
  0.000000	  0.000000	diff=7.45756e-13
 -0.000005	 -0.000005	diff=5.90308e-11
 -0.000002	 -0.000002	diff=7.37449e-12
  0.000000	  0.000000	diff=1.03869e-12
 -0.000000	 -0.000000	diff=7.83274e-13
 -0.000000	 -0.000000	diff=6.64925e-13
  0.000000	  0.000000	diff=1.02934e-13
 -0.000000	 -0.000000	diff=4.27355e-13
  0.000000	  0.000000	diff=7.87749e-13
  0.000001	  0.000001	diff=4.32714e-09
  0.000001	  0.000001	diff=1.53376e-11
 -0.000000	 -0.000000	diff=8.76852e-14
  0.000000	  0.000000	diff=4.95516e-13
  0.000000	  0.000000	diff=9.04981e-14
 -0.000000	 -0.000000	diff=5.61283e-13
  0.000000	  0.000000	diff=3.56602e-13
 -0.000000	 -0.000000	diff=6.54929e-14
 -0.000002	 -0.000002	diff=8.23861e-12
 -0.000001	 -0.000001	diff=2.08975e-09
  local_diff=6.55439e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000007	  0.000007	diff=3.9544e-09
 -0.000017	 -0.000017	diff=1.69924e-08
  0.000007	  0.000007	diff=4.10764e-09
 -0.000015	 -0.000015	diff=1.58593e-08
  local_diff=4.09138e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.1248e-09
 -0.000003	 -0.000003	diff=2.18218e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.7246e-09
 -0.000002	 -0.000002	diff=1.66293e-09
 -0.000017	 -0.000017	diff=4.92777e-09
 -0.000001	 -0.000001	diff=1.11169e-09
  local_diff=1.5734e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=4.06858e-13
  0.000000	 -0.000000	diff=2.55439e-13
 -0.000000	 -0.000000	diff=3.45152e-14
  0.000000	  0.000000	diff=1.41914e-13
  local_diff=8.38726e-13
# v_pos, [1 2]
 -0.000000	 -0.000000	diff=7.59412e-13
 -0.000000	 -0.000000	diff=7.73219e-13
  local_diff=1.53263e-12
# W_h, [2 4]
  0.000023	  0.000023	diff=7.69881e-13
  0.000008	  0.000008	diff=1.07702e-13
 -0.000029	 -0.000029	diff=3.00442e-13
 -0.000010	 -0.000010	diff=1.55489e-14
  0.000013	  0.000013	diff=2.43289e-11
  0.000006	  0.000006	diff=2.95409e-13
 -0.000026	 -0.000026	diff=2.0875e-10
 -0.000014	 -0.000014	diff=1.84212e-11
  local_diff=2.52989e-10
# W_soft, [5 2]
 -0.000019	 -0.000019	diff=1.75008e-14
 -0.000019	 -0.000019	diff=5.77963e-13
  0.000008	  0.000008	diff=1.73708e-13
  0.000010	  0.000010	diff=1.36757e-13
  0.000020	  0.000020	diff=5.50159e-13
  0.000020	  0.000020	diff=2.72884e-13
  0.000020	  0.000020	diff=3.89366e-13
 -0.000005	 -0.000005	diff=5.23371e-13
 -0.000012	 -0.000012	diff=1.02778e-12
 -0.000022	 -0.000022	diff=8.17765e-14
  local_diff=3.75127e-12
# Num params=188, abs_diff=1.82177e-07
Elapsed time is 3.859305 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'normLocalAttn', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 1
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 1
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.23336e-12
  0.000000	  0.000000	diff=7.37021e-14
  0.000000	  0.000000	diff=8.44684e-13
  0.000000	  0.000000	diff=2.65157e-13
  0.000000	  0.000000	diff=7.92395e-13
  0.000000	  0.000000	diff=4.81875e-14
 -0.000033	 -0.000033	diff=9.10132e-12
  0.000010	  0.000010	diff=1.24717e-10
 -0.000000	 -0.000000	diff=1.22623e-12
 -0.000000	 -0.000000	diff=5.37701e-13
 -0.000000	 -0.000000	diff=3.27979e-12
 -0.000000	 -0.000000	diff=4.06664e-12
 -0.000000	 -0.000000	diff=1.01126e-12
 -0.000000	 -0.000000	diff=1.08989e-12
  0.000047	  0.000047	diff=2.2541e-11
 -0.000021	 -0.000021	diff=3.66994e-10
 -0.000000	 -0.000000	diff=2.84203e-13
 -0.000000	 -0.000000	diff=4.54436e-13
 -0.000000	 -0.000000	diff=2.80796e-13
 -0.000000	 -0.000000	diff=1.77684e-13
 -0.000000	 -0.000000	diff=1.12402e-12
 -0.000000	 -0.000000	diff=4.8374e-13
  0.000001	  0.000001	diff=3.2422e-10
 -0.000000	 -0.000000	diff=7.88631e-14
  0.000000	  0.000000	diff=7.40391e-13
  0.000000	  0.000000	diff=1.25248e-13
  0.000000	  0.000000	diff=6.27518e-13
  0.000000	  0.000000	diff=2.9083e-13
  0.000000	  0.000000	diff=3.03434e-13
  0.000000	  0.000000	diff=1.86422e-13
 -0.000001	 -0.000001	diff=5.40406e-13
  0.000000	  0.000000	diff=4.76041e-10
  local_diff=1.34378e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.23306e-13
  0.000000	  0.000000	diff=6.61723e-13
 -0.000000	 -0.000000	diff=9.6745e-14
  0.000000	  0.000000	diff=4.43598e-13
 -0.000000	 -0.000000	diff=1.05015e-12
 -0.000000	 -0.000000	diff=3.92465e-13
  0.000065	  0.000065	diff=3.88579e-12
  0.000007	  0.000007	diff=5.38894e-12
  0.000000	  0.000000	diff=7.07544e-14
 -0.000000	 -0.000000	diff=4.01125e-14
  0.000000	  0.000000	diff=9.9402e-13
 -0.000000	 -0.000000	diff=2.26011e-13
  0.000000	  0.000000	diff=4.8598e-13
  0.000000	  0.000000	diff=5.52531e-14
 -0.000075	 -0.000075	diff=3.35635e-12
 -0.000007	 -0.000007	diff=5.33823e-12
 -0.000000	 -0.000000	diff=1.28447e-13
  0.000000	  0.000000	diff=9.56152e-13
 -0.000000	 -0.000000	diff=5.01078e-13
  0.000000	  0.000000	diff=3.90475e-13
 -0.000000	 -0.000000	diff=3.48133e-13
 -0.000000	 -0.000000	diff=1.16265e-15
  0.000001	  0.000001	diff=9.19404e-10
  0.000000	  0.000000	diff=1.07247e-12
  0.000000	  0.000000	diff=9.60554e-13
 -0.000000	 -0.000000	diff=1.22468e-13
  0.000000	  0.000000	diff=4.00707e-13
 -0.000000	 -0.000000	diff=2.54567e-13
  0.000000	  0.000000	diff=8.32734e-13
  0.000000	  0.000000	diff=7.18838e-13
 -0.000001	 -0.000001	diff=6.06089e-13
 -0.000000	 -0.000000	diff=1.76565e-10
  local_diff=1.12597e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=4.77639e-13
 -0.000000	 -0.000000	diff=7.23608e-14
 -0.000000	 -0.000000	diff=9.54747e-13
  0.000000	  0.000000	diff=5.03965e-13
 -0.000000	 -0.000000	diff=4.00281e-15
 -0.000000	 -0.000000	diff=8.20865e-13
  0.000008	  0.000008	diff=4.01963e-11
  0.000009	  0.000009	diff=5.09311e-11
  0.000000	  0.000000	diff=1.21013e-13
  0.000000	  0.000000	diff=1.07517e-12
  0.000000	  0.000000	diff=1.31986e-12
 -0.000000	 -0.000000	diff=1.9707e-12
  0.000000	  0.000000	diff=3.08769e-13
  0.000000	  0.000000	diff=7.4246e-13
 -0.000011	 -0.000011	diff=1.48453e-10
 -0.000018	 -0.000016	diff=1.78601e-06
 -0.000000	 -0.000000	diff=2.14019e-14
 -0.000000	 -0.000000	diff=3.01082e-13
  0.000000	  0.000000	diff=4.08384e-13
  0.000000	 -0.000000	diff=1.58594e-13
  0.000000	  0.000000	diff=3.85494e-13
 -0.000000	 -0.000000	diff=2.04179e-13
 -0.000000	 -0.000000	diff=5.93821e-13
 -0.000000	 -0.000000	diff=1.97053e-13
  0.000000	  0.000000	diff=5.3709e-13
  0.000000	  0.000000	diff=6.70117e-13
 -0.000000	 -0.000000	diff=2.52586e-13
 -0.000000	  0.000000	diff=8.00988e-13
 -0.000000	 -0.000000	diff=4.4181e-13
  0.000000	  0.000000	diff=5.95454e-13
  0.000000	  0.000000	diff=4.21583e-14
 -0.000000	 -0.000000	diff=1.52587e-13
  0.000000	  0.000000	diff=1.69664e-13
  0.000000	  0.000000	diff=2.1406e-13
  0.000000	  0.000000	diff=6.33567e-13
 -0.000000	 -0.000000	diff=1.4968e-13
  0.000000	  0.000000	diff=5.88826e-13
 -0.000000	 -0.000000	diff=8.89277e-13
 -0.000001	 -0.000001	diff=1.43251e-09
 -0.000001	 -0.000001	diff=1.4501e-11
 -0.000000	 -0.000000	diff=5.83248e-14
 -0.000000	 -0.000000	diff=3.08187e-13
 -0.000000	 -0.000000	diff=4.61551e-14
  0.000000	  0.000000	diff=4.68773e-13
 -0.000000	 -0.000000	diff=3.58933e-13
  0.000000	  0.000000	diff=6.53137e-13
  0.000000	  0.000000	diff=8.7073e-12
  0.000001	  0.000001	diff=1.29893e-09
  local_diff=1.78902e-06
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.12671e-13
 -0.000000	 -0.000000	diff=2.2895e-14
 -0.000000	 -0.000000	diff=2.17658e-13
  0.000000	  0.000000	diff=4.22946e-13
 -0.000000	 -0.000000	diff=3.07106e-13
  0.000000	  0.000000	diff=5.06969e-13
  0.000032	  0.000032	diff=2.60096e-11
  0.000012	  0.000012	diff=8.5982e-12
  0.000000	  0.000000	diff=6.80526e-13
  0.000000	  0.000000	diff=8.66486e-13
 -0.000000	 -0.000000	diff=1.26331e-12
  0.000000	  0.000000	diff=4.83787e-13
 -0.000000	 -0.000000	diff=3.03024e-13
  0.000000	  0.000000	diff=7.60436e-13
 -0.000005	 -0.000005	diff=5.76209e-11
 -0.000002	 -0.000002	diff=7.50355e-12
  0.000000	  0.000000	diff=3.27881e-13
 -0.000000	 -0.000000	diff=7.3456e-14
 -0.000000	 -0.000000	diff=4.54982e-14
  0.000000	  0.000000	diff=1.02934e-13
 -0.000000	 -0.000000	diff=4.27156e-13
  0.000000	  0.000000	diff=7.67931e-14
  0.000001	  0.000001	diff=4.32853e-09
  0.000001	  0.000001	diff=1.48622e-11
 -0.000000	 -0.000000	diff=7.97315e-13
  0.000000	  0.000000	diff=2.13278e-13
  0.000000	  0.000000	diff=6.20041e-13
 -0.000000	 -0.000000	diff=5.61822e-13
  0.000000	  0.000000	diff=3.53392e-13
 -0.000000	 -0.000000	diff=6.71759e-14
 -0.000002	 -0.000002	diff=7.75418e-12
 -0.000001	 -0.000001	diff=2.08923e-09
  local_diff=6.55003e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000019	  0.000019	diff=9.66127e-09
 -0.000037	 -0.000037	diff=3.54832e-08
  0.000017	  0.000017	diff=9.08642e-09
 -0.000031	 -0.000031	diff=3.13232e-08
  local_diff=8.55541e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.12501e-09
 -0.000003	 -0.000003	diff=2.18237e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.72428e-09
 -0.000002	 -0.000002	diff=1.66339e-09
 -0.000017	 -0.000017	diff=4.92845e-09
 -0.000001	 -0.000001	diff=1.11138e-09
  local_diff=1.57349e-08
# W_pos, [2 2]
  0.000000	  0.000000	diff=1.09464e-21
  0.000000	 -0.000000	diff=9.20736e-22
  0.000000	 -0.000000	diff=2.80783e-21
  0.000000	  0.000000	diff=2.36175e-21
  local_diff=7.18496e-21
# v_pos, [1 2]
  0.000000	 -0.000000	diff=6.11517e-21
  0.000000	 -0.000000	diff=5.65448e-21
  local_diff=1.17697e-20
# W_h, [2 4]
  0.000073	  0.000073	diff=2.46518e-12
  0.000024	  0.000024	diff=1.01851e-12
 -0.000092	 -0.000092	diff=3.73253e-12
 -0.000031	 -0.000031	diff=7.63562e-14
  0.000013	  0.000013	diff=2.29175e-11
  0.000006	  0.000006	diff=6.13151e-13
 -0.000026	 -0.000026	diff=2.09058e-10
 -0.000014	 -0.000014	diff=1.86975e-11
  local_diff=2.58579e-10
# W_soft, [5 2]
 -0.000047	 -0.000047	diff=2.26221e-12
 -0.000047	 -0.000047	diff=1.9483e-12
  0.000020	  0.000020	diff=1.83017e-12
  0.000015	  0.000015	diff=2.06538e-12
  0.000058	  0.000058	diff=1.13099e-12
  0.000048	  0.000048	diff=1.08198e-12
  0.000048	  0.000048	diff=1.4994e-12
 -0.000017	 -0.000017	diff=1.55449e-12
 -0.000017	 -0.000017	diff=1.31868e-12
 -0.000062	 -0.000062	diff=1.65089e-12
  local_diff=1.63425e-11
# Num params=188, abs_diff=1.8996e-06
Elapsed time is 4.295226 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=6.04739e-13
  0.000000	  0.000000	diff=5.98343e-13
  0.000000	  0.000000	diff=1.57479e-12
 -0.000000	 -0.000000	diff=3.27475e-13
  0.000000	  0.000000	diff=2.55949e-13
  0.000000	  0.000000	diff=9.6334e-14
 -0.000026	 -0.000026	diff=1.86299e-12
  0.000000	  0.000000	diff=1.92141e-11
 -0.000000	 -0.000000	diff=1.70957e-12
  0.000000	  0.000000	diff=6.32765e-13
 -0.000000	 -0.000000	diff=3.33241e-12
  0.000000	  0.000000	diff=1.46732e-12
 -0.000000	 -0.000000	diff=7.02936e-13
 -0.000000	 -0.000000	diff=5.61703e-14
  0.000036	  0.000036	diff=2.35585e-11
  0.000001	  0.000001	diff=8.9004e-11
 -0.000000	 -0.000000	diff=1.42903e-13
  0.000000	  0.000000	diff=6.66173e-13
 -0.000000	 -0.000000	diff=3.04668e-13
  0.000000	  0.000000	diff=8.4506e-13
 -0.000000	 -0.000000	diff=3.11153e-13
 -0.000000	 -0.000000	diff=1.00388e-13
  0.000000	  0.000000	diff=5.28243e-10
  0.000000	  0.000000	diff=1.29124e-12
  0.000000	  0.000000	diff=9.54464e-15
 -0.000000	 -0.000000	diff=1.29781e-13
  0.000000	  0.000000	diff=6.37832e-13
 -0.000000	 -0.000000	diff=5.2727e-13
  0.000000	  0.000000	diff=9.25228e-13
  0.000000	  0.000000	diff=5.45098e-13
 -0.000000	 -0.000000	diff=2.43581e-12
 -0.000000	 -0.000000	diff=2.08083e-10
  local_diff=8.90197e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=5.35817e-13
 -0.000000	 -0.000000	diff=8.43591e-13
  0.000000	  0.000000	diff=7.99659e-14
 -0.000000	 -0.000000	diff=2.78523e-13
 -0.000000	 -0.000000	diff=6.95633e-13
 -0.000000	 -0.000000	diff=8.61523e-13
 -0.000011	 -0.000011	diff=4.73397e-12
 -0.000040	 -0.000040	diff=2.814e-12
 -0.000000	 -0.000000	diff=5.94329e-13
  0.000000	  0.000000	diff=1.49039e-12
 -0.000000	 -0.000000	diff=4.50403e-13
  0.000000	  0.000000	diff=1.37762e-13
  0.000000	  0.000000	diff=1.09415e-12
  0.000000	  0.000000	diff=8.26926e-13
  0.000012	  0.000012	diff=3.9224e-12
  0.000049	  0.000049	diff=1.58098e-12
  0.000000	  0.000000	diff=2.41692e-13
 -0.000000	 -0.000000	diff=4.74389e-13
  0.000000	  0.000000	diff=1.00377e-12
 -0.000000	 -0.000000	diff=1.5746e-12
 -0.000000	 -0.000000	diff=8.89446e-13
 -0.000000	 -0.000000	diff=1.12644e-12
 -0.000000	 -0.000000	diff=3.03426e-10
 -0.000001	 -0.000001	diff=2.21292e-13
 -0.000000	 -0.000000	diff=1.95016e-13
  0.000000	  0.000000	diff=5.14926e-13
 -0.000000	 -0.000000	diff=7.83673e-13
  0.000000	  0.000000	diff=3.02342e-13
  0.000000	  0.000000	diff=3.48797e-13
  0.000000	  0.000000	diff=4.73121e-13
  0.000000	  0.000000	diff=6.40663e-13
  0.000001	  0.000001	diff=7.82657e-10
  local_diff=1.11581e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.70891e-13
  0.000000	  0.000000	diff=1.62431e-13
  0.000000	  0.000000	diff=6.36109e-13
 -0.000000	 -0.000000	diff=5.1328e-13
  0.000000	  0.000000	diff=9.71646e-13
  0.000000	  0.000000	diff=8.72448e-13
 -0.000004	 -0.000004	diff=3.09094e-11
 -0.000014	 -0.000014	diff=8.81245e-11
 -0.000000	 -0.000000	diff=3.72032e-13
 -0.000000	 -0.000000	diff=9.10985e-14
 -0.000000	 -0.000000	diff=1.63121e-12
  0.000000	  0.000000	diff=4.96202e-12
 -0.000000	 -0.000000	diff=3.91419e-13
 -0.000000	 -0.000000	diff=3.87529e-14
  0.000011	  0.000011	diff=1.89287e-10
  0.000051	  0.000051	diff=5.71654e-11
  0.000000	 -0.000000	diff=2.93987e-13
  0.000000	 -0.000000	diff=4.84871e-13
  0.000000	  0.000000	diff=1.06928e-12
  0.000000	 -0.000000	diff=1.26508e-13
  0.000000	  0.000000	diff=7.9064e-13
 -0.000000	 -0.000000	diff=7.92987e-13
 -0.000000	 -0.000000	diff=1.10326e-13
 -0.000000	 -0.000000	diff=9.18608e-15
  0.000000	 -0.000000	diff=6.70466e-14
  0.000000	 -0.000000	diff=1.25202e-13
  0.000000	  0.000000	diff=7.10427e-14
  0.000000	  0.000000	diff=3.42726e-14
  0.000000	 -0.000000	diff=3.96014e-15
  0.000000	 -0.000000	diff=8.85726e-14
 -0.000000	 -0.000000	diff=1.0897e-12
 -0.000000	 -0.000000	diff=1.15678e-13
 -0.000000	 -0.000000	diff=1.81708e-13
 -0.000000	 -0.000000	diff=6.62717e-13
 -0.000000	 -0.000000	diff=8.28443e-13
  0.000000	  0.000000	diff=8.93269e-13
 -0.000000	 -0.000000	diff=4.12891e-13
  0.000000	  0.000000	diff=9.35911e-13
  0.000000	  0.000000	diff=7.23206e-10
  0.000001	  0.000001	diff=8.14302e-11
  0.000000	  0.000000	diff=8.84137e-13
  0.000000	  0.000000	diff=8.63979e-14
  0.000000	  0.000000	diff=3.05829e-13
 -0.000000	 -0.000000	diff=4.40123e-13
  0.000000	  0.000000	diff=7.78207e-13
 -0.000000	 -0.000000	diff=8.44029e-13
 -0.000000	 -0.000000	diff=5.83994e-12
 -0.000001	 -0.000001	diff=2.08169e-09
  local_diff=3.2812e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=8.27715e-13
  0.000000	  0.000000	diff=3.41263e-13
  0.000000	  0.000000	diff=8.34086e-13
 -0.000000	 -0.000000	diff=4.31226e-15
  0.000000	  0.000000	diff=5.25975e-13
 -0.000000	 -0.000000	diff=3.91778e-13
 -0.000013	 -0.000013	diff=1.91076e-11
 -0.000008	 -0.000008	diff=2.90562e-11
 -0.000000	 -0.000000	diff=1.07605e-13
 -0.000000	 -0.000000	diff=2.60858e-13
  0.000000	  0.000000	diff=1.19042e-12
  0.000000	  0.000000	diff=5.65587e-13
 -0.000000	 -0.000000	diff=4.1562e-13
  0.000000	  0.000000	diff=1.18229e-13
 -0.000001	 -0.000001	diff=2.29737e-11
  0.000001	  0.000001	diff=7.02989e-12
 -0.000000	 -0.000000	diff=9.82964e-14
  0.000000	  0.000000	diff=4.04574e-13
  0.000000	  0.000000	diff=3.92599e-13
 -0.000000	 -0.000000	diff=3.51918e-13
  0.000000	  0.000000	diff=1.12951e-12
 -0.000000	 -0.000000	diff=4.00604e-13
 -0.000001	 -0.000001	diff=2.018e-09
 -0.000001	 -0.000001	diff=5.65663e-11
  0.000000	  0.000000	diff=3.33899e-13
 -0.000000	 -0.000000	diff=1.19272e-13
 -0.000000	 -0.000000	diff=6.62537e-13
  0.000000	  0.000000	diff=5.00065e-13
 -0.000000	 -0.000000	diff=5.60353e-13
  0.000000	  0.000000	diff=2.09027e-13
  0.000001	  0.000001	diff=5.92201e-12
  0.000001	  0.000001	diff=4.28735e-09
  local_diff=6.45675e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=5.49364e-09
 -0.000016	 -0.000016	diff=1.35298e-08
  0.000014	  0.000014	diff=6.2227e-09
 -0.000017	 -0.000017	diff=1.65826e-08
  local_diff=4.18287e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000030	  0.000030	diff=1.69355e-09
  0.000002	  0.000002	diff=1.91243e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000044	  0.000044	diff=7.95032e-09
  0.000001	  0.000001	diff=1.67044e-09
  0.000026	  0.000026	diff=1.78487e-09
  0.000001	  0.000001	diff=9.94864e-10
  local_diff=1.60065e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=1.08363e-15
  0.000000	 -0.000000	diff=1.3373e-15
  0.000000	 -0.000000	diff=1.49043e-15
  0.000000	  0.000000	diff=1.83936e-15
  local_diff=5.75073e-15
# W_h, [2 4]
 -0.000044	 -0.000044	diff=1.27227e-12
 -0.000053	 -0.000053	diff=2.96776e-12
  0.000056	  0.000056	diff=1.35004e-12
  0.000067	  0.000067	diff=3.85215e-12
 -0.000009	 -0.000009	diff=1.66359e-11
 -0.000011	 -0.000011	diff=1.28302e-11
  0.000013	  0.000013	diff=1.80613e-10
  0.000022	  0.000022	diff=1.70888e-10
  local_diff=3.90409e-10
# W_soft, [5 2]
  0.000035	  0.000035	diff=1.87473e-12
  0.000035	  0.000035	diff=9.89072e-13
 -0.000001	 -0.000001	diff=1.50173e-12
 -0.000044	 -0.000044	diff=2.08948e-12
 -0.000024	 -0.000024	diff=1.36097e-12
  0.000007	  0.000007	diff=7.62328e-13
  0.000007	  0.000007	diff=3.29582e-13
 -0.000005	 -0.000005	diff=1.19979e-12
 -0.000005	 -0.000005	diff=2.80611e-13
 -0.000004	 -0.000004	diff=3.22048e-13
  local_diff=1.07103e-11
# Num params=186, abs_diff=6.99803e-08
Elapsed time is 3.921431 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.40323e-12
  0.000000	  0.000000	diff=9.2973e-14
  0.000000	  0.000000	diff=9.65984e-13
  0.000000	  0.000000	diff=9.91967e-13
  0.000000	  0.000000	diff=9.60465e-13
  0.000000	  0.000000	diff=6.74141e-14
 -0.000033	 -0.000033	diff=1.00719e-11
  0.000010	  0.000010	diff=1.25008e-10
 -0.000000	 -0.000000	diff=4.22838e-13
 -0.000000	 -0.000000	diff=8.36456e-13
 -0.000000	 -0.000000	diff=1.68719e-12
 -0.000000	 -0.000000	diff=3.13347e-12
 -0.000000	 -0.000000	diff=1.62888e-12
 -0.000000	 -0.000000	diff=4.94224e-13
  0.000047	  0.000047	diff=2.57119e-11
 -0.000020	 -0.000020	diff=3.61462e-10
 -0.000000	 -0.000000	diff=5.68193e-13
 -0.000000	 -0.000000	diff=4.20112e-13
 -0.000000	 -0.000000	diff=3.64106e-13
 -0.000000	 -0.000000	diff=1.00101e-12
 -0.000000	 -0.000000	diff=4.96748e-13
 -0.000000	 -0.000000	diff=1.59272e-15
  0.000001	  0.000001	diff=3.25408e-10
 -0.000000	 -0.000000	diff=6.45052e-14
  0.000000	  0.000000	diff=1.22075e-12
  0.000000	  0.000000	diff=5.32648e-13
  0.000000	  0.000000	diff=5.27596e-13
  0.000000	  0.000000	diff=2.87226e-14
  0.000000	  0.000000	diff=6.43584e-14
  0.000000	  0.000000	diff=2.50166e-13
 -0.000001	 -0.000001	diff=2.80192e-13
  0.000000	  0.000000	diff=4.67291e-10
  local_diff=1.33346e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.34989e-13
  0.000000	  0.000000	diff=7.55182e-13
 -0.000000	 -0.000000	diff=8.94247e-14
  0.000000	  0.000000	diff=4.46085e-13
 -0.000000	 -0.000000	diff=3.5271e-13
 -0.000000	 -0.000000	diff=3.22757e-13
  0.000065	  0.000065	diff=2.094e-12
  0.000007	  0.000007	diff=6.31388e-12
  0.000000	  0.000000	diff=7.74964e-13
 -0.000000	 -0.000000	diff=1.00085e-12
  0.000000	  0.000000	diff=1.27962e-12
 -0.000000	 -0.000000	diff=7.00149e-13
  0.000000	  0.000000	diff=7.58253e-13
  0.000000	  0.000000	diff=1.09243e-13
 -0.000074	 -0.000074	diff=1.67672e-12
 -0.000007	 -0.000007	diff=5.17166e-12
 -0.000000	 -0.000000	diff=2.46771e-14
  0.000000	  0.000000	diff=4.58518e-13
 -0.000000	 -0.000000	diff=8.57164e-13
  0.000000	  0.000000	diff=3.23885e-13
 -0.000000	 -0.000000	diff=2.16919e-13
 -0.000000	 -0.000000	diff=9.2417e-15
  0.000001	  0.000001	diff=9.1031e-10
  0.000000	  0.000000	diff=4.8816e-13
  0.000000	  0.000000	diff=5.33256e-13
 -0.000000	 -0.000000	diff=1.40201e-13
  0.000000	  0.000000	diff=2.28682e-13
 -0.000000	 -0.000000	diff=2.44004e-13
  0.000000	  0.000000	diff=4.81463e-13
  0.000000	  0.000000	diff=6.79843e-13
 -0.000001	 -0.000001	diff=5.54525e-13
 -0.000000	 -0.000000	diff=1.76286e-10
  local_diff=1.11392e-09
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=4.77631e-13
 -0.000000	 -0.000000	diff=6.38209e-13
 -0.000000	 -0.000000	diff=9.54758e-13
  0.000000	  0.000000	diff=2.06599e-13
 -0.000000	 -0.000000	diff=7.14536e-13
 -0.000000	 -0.000000	diff=1.10319e-13
  0.000008	  0.000008	diff=3.94888e-11
  0.000009	  0.000009	diff=5.23588e-11
  0.000000	  0.000000	diff=8.31524e-13
  0.000000	  0.000000	diff=3.92507e-13
  0.000000	  0.000000	diff=2.03042e-12
 -0.000000	 -0.000000	diff=2.67219e-12
  0.000000	  0.000000	diff=4.01741e-13
  0.000000	  0.000000	diff=1.74229e-15
 -0.000011	 -0.000011	diff=1.4845e-10
 -0.000016	 -0.000016	diff=1.59793e-11
 -0.000000	 -0.000000	diff=2.14368e-14
 -0.000000	 -0.000000	diff=2.99279e-13
  0.000000	  0.000000	diff=4.08464e-13
  0.000000	 -0.000000	diff=1.38913e-13
  0.000000	  0.000000	diff=3.85538e-13
 -0.000000	 -0.000000	diff=2.18175e-13
 -0.000000	 -0.000000	diff=4.07869e-13
 -0.000000	 -0.000000	diff=1.09914e-13
  0.000000	  0.000000	diff=1.24763e-12
  0.000000	  0.000000	diff=4.04252e-14
 -0.000000	 -0.000000	diff=2.52586e-13
  0.000000	  0.000000	diff=9.04455e-14
  0.000000	 -0.000000	diff=2.68732e-13
  0.000000	  0.000000	diff=1.15089e-13
  0.000000	  0.000000	diff=4.18917e-14
 -0.000000	 -0.000000	diff=1.52316e-13
  0.000000	  0.000000	diff=5.40878e-13
  0.000000	  0.000000	diff=2.13732e-13
  0.000000	  0.000000	diff=7.69751e-14
 -0.000000	 -0.000000	diff=8.60213e-13
  0.000000	  0.000000	diff=8.32258e-13
 -0.000000	 -0.000000	diff=1.24209e-12
 -0.000001	 -0.000001	diff=1.43251e-09
 -0.000001	 -0.000001	diff=1.3821e-11
 -0.000000	 -0.000000	diff=5.83268e-14
 -0.000000	 -0.000000	diff=3.09053e-13
 -0.000000	 -0.000000	diff=6.64387e-13
  0.000000	  0.000000	diff=2.41951e-13
 -0.000000	 -0.000000	diff=3.51612e-13
  0.000000	  0.000000	diff=5.65514e-14
  0.000000	  0.000000	diff=9.4179e-12
  0.000001	  0.000001	diff=1.29912e-09
  local_diff=3.03022e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.12671e-13
 -0.000000	 -0.000000	diff=7.33438e-13
 -0.000000	 -0.000000	diff=4.92884e-13
  0.000000	  0.000000	diff=4.22948e-13
 -0.000000	 -0.000000	diff=4.03437e-13
  0.000000	  0.000000	diff=2.03575e-13
  0.000032	  0.000032	diff=2.67303e-11
  0.000012	  0.000012	diff=8.58613e-12
  0.000000	  0.000000	diff=7.40721e-13
  0.000000	  0.000000	diff=1.26581e-12
 -0.000000	 -0.000000	diff=5.5232e-13
  0.000000	  0.000000	diff=2.27022e-13
 -0.000000	 -0.000000	diff=3.03483e-13
  0.000000	  0.000000	diff=6.59903e-13
 -0.000005	 -0.000005	diff=5.94036e-11
 -0.000002	 -0.000002	diff=7.33005e-12
  0.000000	  0.000000	diff=3.82659e-13
 -0.000000	 -0.000000	diff=7.83992e-13
 -0.000000	 -0.000000	diff=7.56041e-13
  0.000000	  0.000000	diff=1.02935e-13
 -0.000000	 -0.000000	diff=1.1377e-12
  0.000000	  0.000000	diff=6.33743e-13
  0.000001	  0.000001	diff=4.32787e-09
  0.000001	  0.000001	diff=1.48457e-11
 -0.000000	 -0.000000	diff=8.67694e-14
  0.000000	  0.000000	diff=2.13267e-13
  0.000000	  0.000000	diff=9.05051e-14
 -0.000000	 -0.000000	diff=5.61827e-13
  0.000000	  0.000000	diff=3.57156e-13
 -0.000000	 -0.000000	diff=6.43352e-13
 -0.000002	 -0.000002	diff=7.46108e-12
 -0.000001	 -0.000001	diff=2.0891e-09
  local_diff=6.5535e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000019	  0.000019	diff=9.6624e-09
 -0.000037	 -0.000037	diff=3.52227e-08
  0.000017	  0.000017	diff=9.08423e-09
 -0.000031	 -0.000031	diff=3.13264e-08
  local_diff=8.52957e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000025	 -0.000025	diff=4.12501e-09
 -0.000003	 -0.000003	diff=2.18237e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000010	 -0.000010	diff=1.72427e-09
 -0.000002	 -0.000002	diff=1.66336e-09
 -0.000017	 -0.000017	diff=4.92703e-09
 -0.000001	 -0.000001	diff=1.11208e-09
  local_diff=1.57341e-08
# W_a, [2 2]
  0.000000	  0.000000	diff=4.1513e-21
  0.000000	 -0.000000	diff=5.45876e-21
  0.000000	 -0.000000	diff=1.00716e-20
  0.000000	  0.000000	diff=1.32892e-20
  local_diff=3.29708e-20
# v_a, [1 2]
 -0.000000	 -0.000000	diff=1.06292e-12
  0.000000	  0.000000	diff=2.20924e-13
  local_diff=1.28385e-12
# W_h, [2 4]
  0.000073	  0.000073	diff=2.46453e-12
  0.000024	  0.000024	diff=5.88192e-13
 -0.000092	 -0.000092	diff=3.92422e-12
 -0.000030	 -0.000030	diff=3.76529e-13
  0.000013	  0.000013	diff=2.33505e-11
  0.000006	  0.000006	diff=5.03837e-13
 -0.000026	 -0.000026	diff=2.08801e-10
 -0.000014	 -0.000014	diff=1.93983e-11
  local_diff=2.59407e-10
# W_soft, [5 2]
 -0.000047	 -0.000047	diff=2.892e-12
 -0.000047	 -0.000047	diff=2.58812e-12
  0.000020	  0.000020	diff=1.93715e-12
  0.000015	  0.000015	diff=2.29384e-12
  0.000058	  0.000058	diff=1.65757e-12
  0.000048	  0.000048	diff=1.12348e-12
  0.000048	  0.000048	diff=1.52699e-12
 -0.000017	 -0.000017	diff=2.67361e-12
 -0.000017	 -0.000017	diff=1.55813e-12
 -0.000061	 -0.000061	diff=2.35484e-12
  local_diff=2.06057e-11
# Num params=188, abs_diff=1.13342e-07
Elapsed time is 4.539516 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 1
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=4.23891e-13
 -0.000000	 -0.000000	diff=4.51762e-13
 -0.000000	 -0.000000	diff=1.14117e-12
 -0.000000	 -0.000000	diff=7.13094e-13
 -0.000000	 -0.000000	diff=1.16536e-12
 -0.000000	 -0.000000	diff=1.24268e-12
  0.000014	  0.000014	diff=3.46434e-11
 -0.000007	 -0.000007	diff=3.61488e-11
  0.000000	  0.000000	diff=3.51164e-14
  0.000000	  0.000000	diff=7.86535e-14
  0.000000	  0.000000	diff=1.04014e-12
  0.000000	  0.000000	diff=7.34247e-13
  0.000000	  0.000000	diff=7.9398e-13
  0.000000	  0.000000	diff=8.43543e-13
 -0.000018	 -0.000018	diff=6.09003e-11
  0.000009	  0.000009	diff=6.45758e-11
  0.000000	  0.000000	diff=7.09647e-13
  0.000000	  0.000000	diff=1.31103e-12
  0.000000	  0.000000	diff=4.1252e-13
  0.000000	  0.000000	diff=4.52332e-13
  0.000000	  0.000000	diff=7.50077e-13
  0.000000	  0.000000	diff=1.16047e-12
 -0.000000	 -0.000000	diff=3.5046e-10
  0.000000	  0.000000	diff=2.57405e-12
 -0.000000	 -0.000000	diff=8.9944e-13
 -0.000000	 -0.000000	diff=6.22349e-13
 -0.000000	 -0.000000	diff=6.68985e-13
 -0.000000	 -0.000000	diff=1.60421e-12
 -0.000000	 -0.000000	diff=8.40788e-13
 -0.000000	 -0.000000	diff=1.52345e-13
  0.000000	  0.000000	diff=2.56678e-12
 -0.000000	 -0.000000	diff=3.92411e-10
  local_diff=9.62527e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.03004e-12
  0.000000	  0.000000	diff=1.33868e-12
  0.000000	  0.000000	diff=5.38973e-13
  0.000000	  0.000000	diff=5.11025e-13
 -0.000000	 -0.000000	diff=1.14427e-12
  0.000000	  0.000000	diff=1.15971e-12
  0.000000	  0.000000	diff=1.19249e-12
  0.000020	  0.000020	diff=7.18301e-12
  0.000000	  0.000000	diff=9.90843e-13
 -0.000000	 -0.000000	diff=7.73961e-13
 -0.000000	 -0.000000	diff=1.06046e-12
 -0.000000	 -0.000000	diff=3.28882e-14
  0.000000	  0.000000	diff=1.20249e-12
 -0.000000	 -0.000000	diff=1.02838e-12
 -0.000000	 -0.000000	diff=8.35085e-13
 -0.000016	 -0.000016	diff=5.36389e-12
  0.000000	  0.000000	diff=1.62961e-12
  0.000000	  0.000000	diff=5.22196e-13
  0.000000	  0.000000	diff=1.66981e-12
  0.000000	  0.000000	diff=7.4939e-13
 -0.000000	 -0.000000	diff=7.48412e-14
  0.000000	  0.000000	diff=4.47521e-13
 -0.000000	 -0.000000	diff=1.42779e-10
  0.000000	  0.000000	diff=3.7875e-13
 -0.000000	 -0.000000	diff=3.64083e-13
 -0.000000	 -0.000000	diff=3.7913e-13
 -0.000000	 -0.000000	diff=7.55597e-13
 -0.000000	 -0.000000	diff=1.1079e-12
  0.000000	  0.000000	diff=1.03291e-12
 -0.000000	 -0.000000	diff=1.22978e-12
  0.000000	  0.000000	diff=4.34029e-13
 -0.000000	 -0.000000	diff=4.53375e-10
  local_diff=6.33316e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.43518e-14
  0.000000	  0.000000	diff=5.97739e-13
  0.000000	  0.000000	diff=1.24123e-12
 -0.000000	 -0.000000	diff=1.32189e-12
  0.000000	  0.000000	diff=2.8042e-14
  0.000000	  0.000000	diff=1.87167e-12
 -0.000003	 -0.000003	diff=6.26459e-12
  0.000003	  0.000003	diff=2.957e-11
 -0.000000	 -0.000000	diff=1.91085e-12
 -0.000000	 -0.000000	diff=1.14355e-12
 -0.000000	 -0.000000	diff=4.12095e-13
  0.000000	  0.000000	diff=1.83826e-12
 -0.000000	 -0.000000	diff=6.80094e-13
 -0.000000	 -0.000000	diff=4.73348e-13
  0.000004	  0.000004	diff=2.12328e-11
  0.000011	  0.000011	diff=6.91788e-11
  0.000000	 -0.000000	diff=3.15217e-14
  0.000000	  0.000000	diff=1.50819e-13
  0.000000	 -0.000000	diff=5.30672e-14
  0.000000	  0.000000	diff=1.33321e-12
  0.000000	 -0.000000	diff=6.94749e-14
  0.000000	  0.000000	diff=7.86823e-13
 -0.000000	 -0.000000	diff=1.6331e-13
  0.000000	  0.000000	diff=9.67805e-13
  0.000000	 -0.000000	diff=2.437e-14
  0.000000	  0.000000	diff=4.60964e-13
  0.000000	  0.000000	diff=7.32978e-15
  0.000000	  0.000000	diff=2.73645e-13
  0.000000	 -0.000000	diff=1.20911e-14
  0.000000	  0.000000	diff=1.64498e-13
 -0.000000	 -0.000000	diff=4.46123e-13
  0.000000	  0.000000	diff=1.5047e-12
 -0.000000	 -0.000000	diff=9.271e-13
 -0.000000	 -0.000000	diff=3.0496e-13
 -0.000000	 -0.000000	diff=9.06741e-13
 -0.000000	 -0.000000	diff=6.23926e-13
 -0.000000	 -0.000000	diff=4.41812e-13
 -0.000000	 -0.000000	diff=1.83706e-12
  0.000000	  0.000000	diff=3.05031e-11
  0.000000	  0.000000	diff=3.19747e-11
  0.000000	  0.000000	diff=1.48398e-12
  0.000000	  0.000000	diff=4.58676e-13
  0.000000	  0.000000	diff=1.21186e-12
 -0.000000	 -0.000000	diff=9.02797e-13
  0.000000	  0.000000	diff=3.17917e-13
 -0.000000	 -0.000000	diff=6.26678e-13
  0.000000	  0.000000	diff=3.85094e-13
  0.000000	  0.000000	diff=1.52798e-10
  local_diff=3.69993e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=3.03373e-13
 -0.000000	 -0.000000	diff=1.00288e-12
  0.000000	  0.000000	diff=1.70306e-13
 -0.000000	 -0.000000	diff=7.68981e-13
  0.000000	  0.000000	diff=6.6304e-13
 -0.000000	 -0.000000	diff=6.14952e-13
 -0.000004	 -0.000004	diff=4.06481e-12
  0.000003	  0.000003	diff=2.03947e-11
 -0.000000	 -0.000000	diff=1.1353e-13
 -0.000000	 -0.000000	diff=1.41248e-12
  0.000000	  0.000000	diff=9.20285e-13
 -0.000000	 -0.000000	diff=1.0307e-12
  0.000000	  0.000000	diff=9.07444e-13
 -0.000000	 -0.000000	diff=4.68311e-13
 -0.000005	 -0.000005	diff=4.07137e-12
  0.000005	  0.000005	diff=9.44438e-11
 -0.000000	 -0.000000	diff=1.38401e-13
 -0.000000	 -0.000000	diff=1.02899e-12
  0.000000	  0.000000	diff=2.36287e-13
 -0.000000	 -0.000000	diff=9.45596e-13
  0.000000	  0.000000	diff=1.33956e-12
 -0.000000	 -0.000000	diff=1.83668e-14
 -0.000000	 -0.000000	diff=4.39183e-10
 -0.000000	 -0.000000	diff=4.36921e-11
  0.000000	  0.000000	diff=8.28972e-13
  0.000000	  0.000000	diff=4.69995e-13
 -0.000000	 -0.000000	diff=1.3417e-12
  0.000000	  0.000000	diff=4.51428e-13
 -0.000000	 -0.000000	diff=1.05276e-12
  0.000000	  0.000000	diff=6.5683e-13
  0.000000	  0.000000	diff=2.04472e-14
  0.000001	  0.000001	diff=3.07597e-09
  local_diff=3.69872e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000011	 -0.000011	diff=3.97779e-09
  0.000021	  0.000021	diff=1.39134e-08
 -0.000003	 -0.000003	diff=1.40956e-09
  0.000007	  0.000007	diff=4.88036e-09
  local_diff=2.41811e-08
# W_emb_tgt, [2 5]
  0.000043	  0.000043	diff=1.04286e-08
 -0.000002	 -0.000002	diff=4.57776e-11
  0.000022	  0.000022	diff=1.98763e-09
  0.000001	  0.000001	diff=1.08081e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=1.93765e-09
 -0.000001	 -0.000001	diff=1.96815e-10
  0.000005	  0.000005	diff=7.05334e-10
 -0.000001	 -0.000001	diff=2.60921e-10
  local_diff=1.66435e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=7.13954e-13
 -0.000000	 -0.000000	diff=6.59555e-13
 -0.000000	 -0.000000	diff=1.50111e-12
  0.000000	  0.000000	diff=8.56583e-13
 -0.000000	 -0.000000	diff=4.03334e-13
  0.000000	  0.000000	diff=1.62318e-12
  0.000000	  0.000000	diff=4.03635e-13
 -0.000000	 -0.000000	diff=1.27684e-12
  0.000000	  0.000000	diff=2.26033e-13
 -0.000000	 -0.000000	diff=9.04438e-13
 -0.000000	 -0.000000	diff=8.3291e-14
 -0.000000	 -0.000000	diff=8.10865e-13
  0.000000	  0.000000	diff=1.55375e-12
 -0.000000	 -0.000000	diff=2.33278e-13
  0.000000	  0.000000	diff=2.89783e-13
 -0.000001	 -0.000001	diff=1.09182e-11
  0.000000	  0.000000	diff=5.91003e-13
 -0.000000	 -0.000000	diff=1.05409e-12
  0.000000	 -0.000000	diff=2.42494e-13
  0.000000	  0.000000	diff=3.6881e-13
  0.000000	  0.000000	diff=6.84687e-14
 -0.000000	 -0.000000	diff=1.7283e-13
  0.000000	  0.000000	diff=3.05921e-12
 -0.000000	 -0.000000	diff=6.51227e-13
 -0.000000	 -0.000000	diff=1.95428e-12
  0.000000	  0.000000	diff=1.52349e-12
  0.000000	 -0.000000	diff=1.42375e-13
  0.000000	  0.000000	diff=3.02042e-13
 -0.000000	 -0.000000	diff=6.13516e-13
  0.000000	  0.000000	diff=1.29895e-12
 -0.000000	 -0.000000	diff=1.63182e-13
  0.000000	  0.000000	diff=3.49438e-12
  local_diff=3.81582e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.10466e-11
 -0.000000	 -0.000000	diff=2.17212e-10
 -0.000000	 -0.000000	diff=2.32522e-14
 -0.000000	 -0.000000	diff=3.21365e-11
 -0.000000	 -0.000000	diff=5.21871e-13
 -0.000000	 -0.000000	diff=3.4309e-11
 -0.000000	 -0.000000	diff=2.26966e-13
 -0.000000	 -0.000000	diff=7.59097e-11
  local_diff=4.11386e-10
# W_h, [2 4]
 -0.000024	 -0.000024	diff=8.79957e-13
 -0.000005	 -0.000005	diff=1.93797e-12
  0.000029	  0.000029	diff=8.97798e-13
  0.000006	  0.000006	diff=4.48888e-13
 -0.000005	 -0.000005	diff=7.22103e-12
 -0.000002	 -0.000002	diff=2.82202e-12
  0.000004	  0.000004	diff=1.34373e-10
 -0.000006	 -0.000006	diff=3.92501e-11
  local_diff=1.8783e-10
# W_soft, [5 2]
  0.000007	  0.000007	diff=5.70459e-13
 -0.000011	 -0.000011	diff=2.21938e-12
  0.000015	  0.000015	diff=1.17181e-12
  0.000000	  0.000000	diff=9.15284e-13
 -0.000011	 -0.000011	diff=1.51796e-12
  0.000001	  0.000001	diff=7.44001e-13
 -0.000003	 -0.000003	diff=1.49182e-12
  0.000006	  0.000006	diff=4.31866e-13
 -0.000000	 -0.000000	diff=3.57668e-13
 -0.000004	 -0.000004	diff=5.27355e-13
  local_diff=9.9476e-12
# Num params=224, abs_diff=4.71365e-08
Elapsed time is 5.073276 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 2
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=2.00438e-12
  0.000000	  0.000000	diff=1.19748e-12
  0.000000	  0.000000	diff=2.51014e-12
  0.000000	  0.000000	diff=7.85503e-13
 -0.000000	 -0.000000	diff=1.48178e-12
  0.000000	  0.000000	diff=9.18616e-13
  0.000015	  0.000015	diff=7.73478e-11
 -0.000007	 -0.000007	diff=1.03323e-11
  0.000000	  0.000000	diff=4.3437e-12
  0.000000	  0.000000	diff=2.82457e-13
  0.000000	  0.000000	diff=1.80993e-12
 -0.000000	 -0.000000	diff=2.21894e-13
  0.000000	  0.000000	diff=8.85212e-14
  0.000000	  0.000000	diff=2.49964e-12
  0.000014	  0.000014	diff=1.16248e-10
 -0.000006	 -0.000006	diff=1.44766e-11
 -0.000000	 -0.000000	diff=4.45091e-13
 -0.000000	 -0.000000	diff=5.28542e-13
  0.000000	  0.000000	diff=5.83951e-13
  0.000000	  0.000000	diff=2.31907e-12
  0.000000	  0.000000	diff=1.81354e-12
  0.000000	  0.000000	diff=4.41084e-13
  0.000000	  0.000000	diff=7.93871e-11
 -0.000000	 -0.000000	diff=1.36661e-12
  0.000000	  0.000000	diff=7.06676e-13
  0.000000	  0.000000	diff=4.30418e-13
 -0.000000	 -0.000000	diff=8.22844e-13
 -0.000000	 -0.000000	diff=1.1346e-12
 -0.000000	 -0.000000	diff=7.11432e-13
 -0.000000	 -0.000000	diff=3.66685e-13
 -0.000000	 -0.000000	diff=6.25395e-13
  0.000000	  0.000000	diff=6.51012e-11
  local_diff=3.93333e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=7.87706e-13
  0.000000	  0.000000	diff=4.13789e-13
 -0.000000	 -0.000000	diff=2.14782e-12
  0.000000	  0.000000	diff=9.06745e-13
 -0.000000	 -0.000000	diff=5.89866e-13
  0.000000	  0.000000	diff=1.19701e-12
 -0.000000	 -0.000000	diff=1.977e-12
 -0.000002	 -0.000002	diff=1.56139e-12
 -0.000000	 -0.000000	diff=1.55861e-12
 -0.000000	 -0.000000	diff=1.45142e-12
  0.000000	  0.000000	diff=8.2143e-13
 -0.000000	 -0.000000	diff=3.60908e-12
  0.000000	  0.000000	diff=8.56759e-13
 -0.000000	 -0.000000	diff=1.24657e-12
  0.000000	  0.000000	diff=1.11377e-12
  0.000010	  0.000010	diff=1.08836e-13
  0.000000	 -0.000000	diff=4.31494e-14
  0.000000	  0.000000	diff=9.79548e-13
  0.000000	  0.000000	diff=1.91022e-13
  0.000000	  0.000000	diff=4.03681e-13
  0.000000	 -0.000000	diff=2.57231e-13
  0.000000	  0.000000	diff=5.19281e-13
  0.000000	  0.000000	diff=4.4399e-12
 -0.000000	 -0.000000	diff=2.52057e-12
  0.000000	  0.000000	diff=4.20882e-14
 -0.000000	 -0.000000	diff=2.52041e-13
  0.000000	 -0.000000	diff=2.33866e-13
 -0.000000	 -0.000000	diff=1.48799e-12
  0.000000	  0.000000	diff=3.31959e-13
 -0.000000	 -0.000000	diff=2.38404e-13
 -0.000000	 -0.000000	diff=1.61456e-12
  0.000000	  0.000000	diff=1.56057e-10
  local_diff=1.8996e-10
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.56616e-13
  0.000000	  0.000000	diff=1.01692e-12
 -0.000000	 -0.000000	diff=6.24496e-13
 -0.000000	 -0.000000	diff=7.7289e-13
  0.000000	  0.000000	diff=3.21048e-13
  0.000000	  0.000000	diff=8.30279e-13
 -0.000004	 -0.000004	diff=1.10938e-11
  0.000013	  0.000013	diff=8.62935e-12
 -0.000000	 -0.000000	diff=3.14336e-13
 -0.000000	 -0.000000	diff=4.85935e-14
 -0.000000	 -0.000000	diff=3.49149e-14
 -0.000000	 -0.000000	diff=1.94804e-13
 -0.000000	 -0.000000	diff=6.21069e-13
 -0.000000	 -0.000000	diff=2.25105e-12
  0.000006	  0.000006	diff=5.13924e-11
  0.000001	  0.000001	diff=2.55038e-11
  0.000000	 -0.000000	diff=4.6609e-14
 -0.000000	 -0.000000	diff=1.77316e-12
  0.000000	  0.000000	diff=4.11061e-14
  0.000000	  0.000000	diff=1.80069e-12
  0.000000	 -0.000000	diff=4.12385e-14
  0.000000	 -0.000000	diff=2.60973e-13
 -0.000000	 -0.000000	diff=8.41082e-13
 -0.000000	 -0.000000	diff=4.84083e-13
  0.000000	  0.000000	diff=1.39058e-14
  0.000000	 -0.000000	diff=5.54851e-13
  0.000000	  0.000000	diff=3.47013e-14
  0.000000	  0.000000	diff=2.47636e-13
  0.000000	  0.000000	diff=3.05044e-14
 -0.000000	 -0.000000	diff=2.47303e-12
  0.000000	  0.000000	diff=1.17773e-12
 -0.000000	 -0.000000	diff=5.04786e-13
  0.000000	  0.000000	diff=1.03112e-13
 -0.000000	 -0.000000	diff=3.81248e-13
 -0.000000	 -0.000000	diff=1.0318e-12
 -0.000000	 -0.000000	diff=1.26598e-12
 -0.000000	 -0.000000	diff=1.30341e-12
 -0.000000	 -0.000000	diff=6.36028e-13
  0.000000	  0.000000	diff=2.28014e-11
 -0.000000	 -0.000000	diff=1.74684e-11
  0.000000	  0.000000	diff=5.27328e-13
  0.000000	  0.000000	diff=2.27394e-12
  0.000000	  0.000000	diff=1.45345e-12
 -0.000000	 -0.000000	diff=8.02358e-15
  0.000000	  0.000000	diff=1.7341e-12
 -0.000000	 -0.000000	diff=6.30383e-13
  0.000000	  0.000000	diff=4.31988e-12
  0.000000	  0.000000	diff=2.09726e-09
  local_diff=2.26743e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=3.25994e-13
 -0.000000	 -0.000000	diff=2.51732e-13
  0.000000	  0.000000	diff=3.14142e-13
  0.000000	  0.000000	diff=6.13185e-13
  0.000000	  0.000000	diff=6.22349e-14
 -0.000000	 -0.000000	diff=9.41787e-13
 -0.000002	 -0.000002	diff=3.16116e-12
  0.000012	  0.000012	diff=8.44509e-12
 -0.000000	 -0.000000	diff=3.5854e-12
 -0.000000	 -0.000000	diff=1.46797e-12
 -0.000000	 -0.000000	diff=1.38791e-12
 -0.000000	 -0.000000	diff=1.44404e-12
 -0.000000	 -0.000000	diff=1.38783e-12
 -0.000000	 -0.000000	diff=4.08947e-13
 -0.000007	 -0.000007	diff=7.38061e-12
  0.000011	  0.000011	diff=1.74725e-10
 -0.000000	 -0.000000	diff=2.20947e-12
 -0.000000	 -0.000000	diff=1.96221e-12
  0.000000	  0.000000	diff=7.39637e-13
  0.000000	  0.000000	diff=2.31612e-13
  0.000000	  0.000000	diff=5.99981e-13
  0.000000	  0.000000	diff=1.20111e-12
  0.000000	  0.000000	diff=3.41358e-11
 -0.000000	 -0.000000	diff=1.59793e-11
 -0.000000	  0.000000	diff=3.1524e-12
  0.000000	  0.000000	diff=4.13309e-13
 -0.000000	 -0.000000	diff=1.33424e-12
 -0.000000	 -0.000000	diff=2.23308e-12
  0.000000	 -0.000000	diff=7.25681e-14
  0.000000	 -0.000000	diff=4.98181e-13
  0.000000	  0.000000	diff=2.52956e-12
  0.000000	  0.000000	diff=1.30698e-09
  local_diff=1.58017e-09
# W_emb_src, [2 5]
 -0.000019	 -0.000019	diff=6.61184e-09
  0.000035	  0.000035	diff=2.56439e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=1.17564e-09
  0.000006	  0.000006	diff=4.11414e-09
 -0.000000	 -0.000000	diff=1.60802e-10
  0.000000	  0.000000	diff=4.42382e-10
  local_diff=3.81487e-08
# W_emb_tgt, [2 5]
  0.000037	  0.000037	diff=9.64146e-09
 -0.000003	 -0.000003	diff=1.06358e-09
  0.000009	  0.000009	diff=1.11431e-10
  0.000002	  0.000002	diff=1.04582e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000009	  0.000009	diff=1.85561e-09
  0.000000	  0.000000	diff=5.11782e-10
  0.000015	  0.000015	diff=2.03795e-09
 -0.000001	 -0.000001	diff=1.5537e-11
  local_diff=1.62832e-08
# W_tgt_char{1}, [8 4]
  0.000008	  0.000008	diff=4.06381e-12
  0.000007	  0.000007	diff=2.9643e-11
  0.000003	  0.000003	diff=1.09421e-10
 -0.000001	 -0.000001	diff=1.07615e-10
  0.000010	  0.000010	diff=2.96728e-13
  0.000004	  0.000004	diff=2.96424e-11
 -0.015995	 -0.015995	diff=1.43675e-07
  0.016736	  0.016736	diff=7.1127e-08
  0.000000	  0.000000	diff=1.1207e-11
  0.000004	  0.000004	diff=4.10643e-11
  0.000003	  0.000003	diff=3.24426e-10
 -0.000001	 -0.000001	diff=1.77737e-10
  0.000005	  0.000005	diff=1.74909e-11
 -0.000000	 -0.000000	diff=3.92942e-11
 -0.010151	 -0.010151	diff=1.01078e-07
  0.021186	  0.021186	diff=1.0911e-07
 -0.000000	 -0.000000	diff=1.18664e-12
  0.000000	  0.000000	diff=4.29024e-13
  0.000000	  0.000000	diff=1.07234e-12
 -0.000000	 -0.000000	diff=5.95541e-13
  0.000000	  0.000000	diff=1.40905e-12
  0.000000	  0.000000	diff=3.9833e-13
 -0.000087	 -0.000087	diff=1.50996e-07
  0.000027	  0.000027	diff=1.07765e-10
 -0.000000	 -0.000000	diff=6.2792e-13
  0.000000	  0.000000	diff=1.72483e-13
  0.000000	  0.000000	diff=4.20502e-13
 -0.000000	 -0.000000	diff=1.03337e-12
  0.000000	  0.000000	diff=8.48306e-13
 -0.000000	 -0.000000	diff=6.19249e-13
 -0.000025	 -0.000025	diff=6.12656e-12
  0.000057	  0.000057	diff=2.20894e-08
  local_diff=5.9909e-07
# W_emb_tgt_char, [2 5]
  0.012873	  0.012871	diff=1.91179e-06
 -0.011693	 -0.011695	diff=1.15829e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.003822	  0.003823	diff=2.29114e-07
 -0.010428	 -0.010424	diff=3.94919e-06
  0.004255	  0.004255	diff=7.36839e-07
 -0.001888	 -0.001890	diff=1.46235e-06
  0.002597	  0.002596	diff=8.22658e-07
  0.004580	  0.004576	diff=4.55605e-06
  local_diff=1.48263e-05
# W_h, [2 4]
  0.000003	  0.000003	diff=2.88141e-13
  0.000001	  0.000001	diff=5.99926e-13
 -0.000005	 -0.000005	diff=5.41573e-13
 -0.000001	 -0.000001	diff=1.7656e-12
 -0.000005	 -0.000005	diff=4.27112e-13
 -0.000005	 -0.000005	diff=8.93422e-13
 -0.000005	 -0.000005	diff=7.67632e-11
 -0.000009	 -0.000009	diff=2.97151e-11
  local_diff=1.10994e-10
# W_soft, [5 2]
 -0.000017	 -0.000017	diff=1.42065e-12
  0.000012	  0.000012	diff=3.29488e-13
  0.000018	  0.000018	diff=1.22e-12
 -0.000016	 -0.000016	diff=9.72515e-13
  0.000003	  0.000003	diff=1.50353e-12
 -0.000007	 -0.000007	diff=9.13182e-13
  0.000006	  0.000006	diff=2.83329e-13
 -0.000000	 -0.000000	diff=9.2343e-14
 -0.000002	 -0.000002	diff=2.49956e-13
  0.000003	  0.000003	diff=7.87467e-13
  local_diff=7.77245e-12
# W_soft_char, [5 2]
 -0.004081	 -0.004081	diff=7.73773e-09
  0.000061	  0.000061	diff=7.73792e-09
  0.002733	  0.002733	diff=7.73987e-09
 -0.000336	 -0.000336	diff=7.7399e-09
  0.001623	  0.001623	diff=7.73789e-09
  0.000812	  0.000812	diff=3.79437e-09
 -0.005105	 -0.005105	diff=3.79556e-09
 -0.000615	 -0.000615	diff=3.796e-09
  0.003165	  0.003165	diff=3.79386e-09
  0.001743	  0.001743	diff=3.79454e-09
  local_diff=5.76676e-08
# Num params=234, abs_diff=1.5542e-05
Elapsed time is 5.733539 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=3.3729e-12
 -0.000000	 -0.000000	diff=2.32617e-12
 -0.000000	 -0.000000	diff=6.80541e-12
 -0.000000	 -0.000000	diff=3.74594e-12
 -0.000000	 -0.000000	diff=4.27243e-12
 -0.000000	 -0.000000	diff=4.86862e-12
  0.000024	  0.000024	diff=7.63382e-11
 -0.000008	 -0.000008	diff=6.0477e-11
  0.000000	  0.000000	diff=2.43516e-12
  0.000000	  0.000000	diff=4.10648e-12
  0.000000	  0.000000	diff=3.75971e-12
  0.000000	  0.000000	diff=4.40756e-12
  0.000000	  0.000000	diff=2.79485e-12
  0.000000	  0.000000	diff=2.76405e-12
 -0.000031	 -0.000031	diff=1.50726e-10
  0.000011	  0.000011	diff=1.21465e-10
  0.000000	  0.000000	diff=3.84249e-12
  0.000000	  0.000000	diff=2.48184e-12
  0.000000	  0.000000	diff=2.76105e-12
  0.000000	  0.000000	diff=5.38007e-12
  0.000000	  0.000000	diff=4.55238e-12
  0.000000	  0.000000	diff=2.59436e-12
 -0.000000	 -0.000000	diff=3.52064e-10
  0.000000	  0.000000	diff=8.54965e-12
 -0.000000	 -0.000000	diff=1.73096e-12
 -0.000000	 -0.000000	diff=3.14443e-12
 -0.000000	 -0.000000	diff=2.73083e-12
 -0.000000	 -0.000000	diff=3.04705e-12
 -0.000000	 -0.000000	diff=6.11366e-12
  0.000000	 -0.000000	diff=3.644e-12
  0.000000	  0.000000	diff=1.68323e-12
 -0.000000	 -0.000000	diff=6.25922e-10
  local_diff=1.48491e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.08961e-12
 -0.000000	 -0.000000	diff=3.12788e-12
  0.000000	  0.000000	diff=2.70618e-12
 -0.000000	 -0.000000	diff=2.71541e-12
  0.000000	  0.000000	diff=3.4798e-12
  0.000000	  0.000000	diff=2.68518e-12
 -0.000043	 -0.000043	diff=7.85297e-12
 -0.000010	 -0.000010	diff=7.21403e-12
 -0.000000	 -0.000000	diff=5.51118e-12
  0.000000	  0.000000	diff=3.20815e-12
 -0.000000	 -0.000000	diff=1.77839e-12
  0.000000	  0.000000	diff=3.93751e-12
 -0.000000	 -0.000000	diff=3.78205e-12
 -0.000000	 -0.000000	diff=4.20395e-12
  0.000034	  0.000034	diff=4.82491e-12
  0.000008	  0.000008	diff=4.50849e-12
  0.000000	  0.000000	diff=2.7404e-12
 -0.000000	 -0.000000	diff=4.96695e-12
  0.000000	  0.000000	diff=3.78594e-12
 -0.000000	 -0.000000	diff=4.69527e-12
  0.000000	  0.000000	diff=5.55385e-12
  0.000000	  0.000000	diff=2.59982e-12
 -0.000001	 -0.000001	diff=1.06887e-09
 -0.000000	 -0.000000	diff=3.78629e-12
 -0.000000	 -0.000000	diff=2.44966e-12
  0.000000	  0.000000	diff=1.13175e-12
 -0.000000	 -0.000000	diff=2.40673e-12
  0.000000	  0.000000	diff=1.4663e-12
 -0.000000	 -0.000000	diff=3.45025e-12
 -0.000000	 -0.000000	diff=1.45844e-12
  0.000001	  0.000001	diff=3.03223e-12
  0.000000	  0.000000	diff=8.46111e-10
  local_diff=2.02213e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=1.25449e-12
  0.000000	  0.000000	diff=3.53528e-12
 -0.000000	 -0.000000	diff=2.41852e-12
 -0.000000	 -0.000000	diff=4.72335e-12
 -0.000000	 -0.000000	diff=3.99683e-12
  0.000000	  0.000000	diff=1.49412e-12
  0.000005	  0.000005	diff=3.44967e-11
 -0.000005	 -0.000005	diff=1.44061e-10
  0.000000	  0.000000	diff=4.75194e-12
 -0.000000	 -0.000000	diff=5.06661e-12
  0.000000	  0.000000	diff=1.79724e-12
  0.000000	  0.000000	diff=4.52049e-12
  0.000000	  0.000000	diff=1.71339e-12
 -0.000000	 -0.000000	diff=4.24121e-12
 -0.000005	 -0.000005	diff=4.35233e-11
  0.000027	  0.000027	diff=3.38607e-10
  0.000000	 -0.000000	diff=2.3866e-13
  0.000000	 -0.000000	diff=2.95334e-12
  0.000000	  0.000000	diff=1.0396e-13
  0.000000	  0.000000	diff=4.69032e-13
  0.000000	 -0.000000	diff=1.04154e-13
  0.000000	 -0.000000	diff=1.9125e-12
 -0.000000	 -0.000000	diff=1.69886e-12
 -0.000000	 -0.000000	diff=1.12939e-12
  0.000000	  0.000000	diff=2.74698e-12
  0.000000	  0.000000	diff=2.28948e-12
  0.000000	  0.000000	diff=5.90826e-14
  0.000000	  0.000000	diff=2.18861e-12
  0.000000	  0.000000	diff=2.70826e-12
  0.000000	  0.000000	diff=1.7797e-12
  0.000000	  0.000000	diff=2.9371e-12
  0.000000	  0.000000	diff=2.21217e-12
  0.000000	  0.000000	diff=4.01468e-12
 -0.000000	 -0.000000	diff=1.66998e-12
 -0.000000	 -0.000000	diff=3.35288e-12
  0.000000	  0.000000	diff=2.8285e-12
  0.000000	  0.000000	diff=1.10002e-12
 -0.000000	 -0.000000	diff=5.15036e-12
 -0.000000	 -0.000000	diff=3.68454e-10
  0.000001	  0.000001	diff=3.3962e-11
 -0.000000	 -0.000000	diff=2.85238e-12
  0.000000	  0.000000	diff=4.14656e-12
 -0.000000	 -0.000000	diff=3.54047e-12
 -0.000000	 -0.000000	diff=3.68902e-12
 -0.000000	 -0.000000	diff=3.07485e-12
  0.000000	  0.000000	diff=2.64421e-12
 -0.000000	 -0.000000	diff=3.23334e-12
 -0.000000	 -0.000000	diff=6.63584e-11
  local_diff=1.1358e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=3.41955e-12
 -0.000000	 -0.000000	diff=3.33992e-12
 -0.000000	 -0.000000	diff=4.56667e-12
 -0.000000	 -0.000000	diff=3.84839e-12
 -0.000000	 -0.000000	diff=8.47969e-13
 -0.000000	 -0.000000	diff=2.92318e-12
  0.000007	  0.000007	diff=1.05509e-11
 -0.000007	 -0.000007	diff=3.6941e-11
 -0.000000	 -0.000000	diff=1.82036e-12
 -0.000000	 -0.000000	diff=3.07765e-12
 -0.000000	 -0.000000	diff=4.27189e-12
 -0.000000	 -0.000000	diff=1.75286e-12
 -0.000000	 -0.000000	diff=4.07181e-12
 -0.000000	 -0.000000	diff=6.02826e-13
  0.000011	  0.000011	diff=1.68711e-11
  0.000001	  0.000001	diff=8.56787e-11
  0.000000	  0.000000	diff=1.72157e-12
 -0.000000	 -0.000000	diff=9.58226e-13
 -0.000000	 -0.000000	diff=1.90186e-12
 -0.000000	 -0.000000	diff=3.9548e-12
 -0.000000	 -0.000000	diff=2.78261e-12
 -0.000000	 -0.000000	diff=3.50153e-12
  0.000000	  0.000000	diff=7.46558e-10
 -0.000001	 -0.000001	diff=5.7976e-11
  0.000000	 -0.000000	diff=3.3829e-12
  0.000000	  0.000000	diff=1.863e-12
  0.000000	  0.000000	diff=4.50783e-12
  0.000000	  0.000000	diff=2.36251e-12
  0.000000	  0.000000	diff=4.93898e-12
  0.000000	  0.000000	diff=2.44318e-12
 -0.000000	 -0.000000	diff=3.34421e-12
  0.000001	  0.000001	diff=4.62377e-09
  local_diff=5.65055e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000019	 -0.000019	diff=7.14984e-09
  0.000029	  0.000029	diff=2.16135e-08
 -0.000006	 -0.000006	diff=2.30655e-09
  0.000013	  0.000013	diff=8.62926e-09
  local_diff=3.96992e-08
# W_emb_tgt, [2 5]
  0.000072	  0.000072	diff=8.84926e-09
  0.000002	  0.000002	diff=2.86045e-09
  0.000036	  0.000036	diff=7.49474e-09
 -0.000002	 -0.000002	diff=1.00336e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	  0.000013	diff=2.01822e-10
  0.000000	  0.000000	diff=4.71259e-10
  0.000009	  0.000009	diff=2.72835e-11
  0.000000	  0.000000	diff=3.69947e-10
  local_diff=2.12781e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=3.63133e-12
 -0.000000	 -0.000000	diff=2.36218e-12
  0.000000	 -0.000000	diff=1.9355e-12
  0.000000	  0.000000	diff=2.39097e-12
 -0.000000	 -0.000000	diff=2.23716e-12
  0.000000	  0.000000	diff=2.09482e-12
  0.000000	  0.000000	diff=2.59741e-12
 -0.000000	 -0.000000	diff=2.43876e-12
  0.000000	  0.000000	diff=3.00956e-12
 -0.000000	 -0.000000	diff=2.98095e-12
 -0.000000	 -0.000000	diff=2.73824e-12
 -0.000000	 -0.000000	diff=3.13194e-12
  0.000000	  0.000000	diff=1.44254e-12
 -0.000000	 -0.000000	diff=3.29748e-12
  0.000000	  0.000000	diff=6.33306e-13
 -0.000001	 -0.000001	diff=1.27036e-11
  0.000000	  0.000000	diff=1.73795e-12
  0.000000	 -0.000000	diff=1.84996e-12
  0.000000	 -0.000000	diff=2.01107e-13
  0.000000	  0.000000	diff=2.65078e-12
  0.000000	  0.000000	diff=1.88073e-12
  0.000000	 -0.000000	diff=1.31459e-12
  0.000000	  0.000000	diff=6.63795e-12
 -0.000000	 -0.000000	diff=2.6243e-12
  0.000000	 -0.000000	diff=2.78777e-12
  0.000000	  0.000000	diff=5.17571e-13
  0.000000	 -0.000000	diff=3.78878e-14
  0.000000	  0.000000	diff=1.03269e-12
  0.000000	 -0.000000	diff=2.77187e-12
  0.000000	  0.000000	diff=1.43391e-12
 -0.000000	 -0.000000	diff=4.67613e-12
  0.000000	  0.000000	diff=1.13477e-12
  local_diff=8.29157e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=4.87494e-11
 -0.000000	 -0.000000	diff=2.1973e-10
 -0.000000	 -0.000000	diff=4.1198e-12
 -0.000000	 -0.000000	diff=2.38383e-11
 -0.000000	 -0.000000	diff=3.38201e-12
 -0.000000	 -0.000000	diff=1.98581e-11
 -0.000000	 -0.000000	diff=2.24322e-12
 -0.000000	 -0.000000	diff=9.2401e-11
  local_diff=4.14322e-10
# W_tgt_char{1}, [8 4]
  0.000023	  0.000023	diff=3.73257e-10
  0.000011	  0.000011	diff=2.0294e-10
  0.000013	  0.000013	diff=3.12192e-10
  0.000031	  0.000031	diff=1.3557e-09
  0.000068	  0.000068	diff=2.87029e-10
  0.000075	  0.000075	diff=7.061e-11
 -0.026173	 -0.026174	diff=2.97355e-07
 -0.030773	 -0.030773	diff=5.62783e-07
 -0.000047	 -0.000047	diff=1.92919e-10
  0.000044	  0.000044	diff=8.52889e-11
  0.000028	  0.000028	diff=6.86901e-10
  0.000033	  0.000033	diff=1.04809e-09
 -0.000031	 -0.000031	diff=1.31896e-10
  0.000050	  0.000050	diff=1.0163e-10
 -0.006718	 -0.006718	diff=2.51368e-07
 -0.021207	 -0.021207	diff=1.58331e-07
  0.000001	  0.000001	diff=4.39374e-12
 -0.000001	 -0.000001	diff=7.04601e-12
 -0.000001	 -0.000001	diff=5.90377e-12
 -0.000001	 -0.000001	diff=2.80813e-12
  0.000000	  0.000000	diff=4.13544e-12
 -0.000001	 -0.000001	diff=8.72873e-14
  0.000314	  0.000314	diff=1.46565e-07
  0.000556	  0.000556	diff=7.48257e-10
  0.000001	  0.000001	diff=3.96213e-12
 -0.000000	 -0.000000	diff=2.52581e-12
 -0.000001	 -0.000001	diff=2.08919e-12
 -0.000001	 -0.000001	diff=5.21715e-12
  0.000000	  0.000000	diff=3.20051e-12
 -0.000001	 -0.000001	diff=4.37085e-13
  0.000310	  0.000310	diff=1.63504e-09
  0.000620	  0.000620	diff=4.26758e-07
  local_diff=1.85043e-06
# W_emb_tgt_char, [2 5]
  0.019313	  0.019311	diff=1.13234e-06
 -0.003571	 -0.003571	diff=2.89184e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.033827	 -0.033830	diff=3.1403e-06
  0.018269	  0.018267	diff=1.94274e-06
 -0.005612	 -0.005614	diff=2.39203e-06
  0.005518	  0.005517	diff=7.63408e-07
 -0.006433	 -0.006433	diff=4.30758e-07
  0.001249	  0.001249	diff=1.18843e-07
  local_diff=1.02096e-05
# W_h, [2 4]
  0.000013	  0.000013	diff=4.15922e-12
 -0.000067	 -0.000067	diff=4.38791e-12
 -0.000016	 -0.000016	diff=3.62787e-12
  0.000082	  0.000082	diff=4.81058e-12
  0.000003	  0.000003	diff=3.41759e-12
 -0.000015	 -0.000015	diff=1.6781e-11
 -0.000022	 -0.000022	diff=1.86606e-12
  0.000026	  0.000026	diff=2.4381e-10
  local_diff=2.8286e-10
# W_soft, [5 2]
 -0.000043	 -0.000043	diff=3.26505e-12
  0.000017	  0.000017	diff=1.32465e-12
 -0.000001	 -0.000001	diff=3.15131e-12
  0.000010	  0.000010	diff=1.75407e-12
  0.000017	  0.000017	diff=1.8736e-12
  0.000004	  0.000004	diff=1.06512e-12
 -0.000005	 -0.000005	diff=2.22887e-12
  0.000013	  0.000013	diff=2.88204e-12
 -0.000006	 -0.000006	diff=2.90984e-12
 -0.000006	 -0.000006	diff=2.28282e-12
  local_diff=2.27374e-11
# W_soft_char, [5 2]
  0.001081	  0.001081	diff=9.06133e-08
 -0.026076	 -0.026076	diff=9.06108e-08
  0.029185	  0.029185	diff=9.06109e-08
 -0.002364	 -0.002364	diff=9.0608e-08
 -0.001826	 -0.001826	diff=9.06104e-08
 -0.005737	 -0.005737	diff=6.63891e-08
 -0.022733	 -0.022733	diff=6.63871e-08
  0.016765	  0.016765	diff=6.63924e-08
  0.012345	  0.012345	diff=6.63884e-08
 -0.000640	 -0.000640	diff=6.63886e-08
  local_diff=7.84999e-07
# Num params=276, abs_diff=1.29171e-05
Elapsed time is 7.526780 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=5.30655e-13
  0.000000	  0.000000	diff=1.55928e-12
  0.000000	  0.000000	diff=1.23344e-13
  0.000000	  0.000000	diff=1.22291e-13
 -0.000000	 -0.000000	diff=1.28079e-12
 -0.000000	 -0.000000	diff=2.27743e-12
  0.000005	  0.000005	diff=1.71015e-11
  0.000000	  0.000000	diff=9.39317e-12
  0.000000	  0.000000	diff=2.34926e-12
 -0.000000	 -0.000000	diff=4.35218e-13
 -0.000000	 -0.000000	diff=7.38272e-13
 -0.000000	 -0.000000	diff=4.31571e-13
  0.000000	  0.000000	diff=9.77574e-13
  0.000000	  0.000000	diff=3.38841e-13
 -0.000007	 -0.000007	diff=3.93078e-11
 -0.000001	 -0.000001	diff=1.76382e-11
 -0.000000	 -0.000000	diff=5.53736e-13
 -0.000000	 -0.000000	diff=3.17774e-12
  0.000000	  0.000000	diff=4.06491e-13
 -0.000000	 -0.000000	diff=4.76673e-13
  0.000000	  0.000000	diff=1.4969e-12
  0.000000	  0.000000	diff=7.8643e-13
 -0.000000	 -0.000000	diff=2.3522e-10
 -0.000000	 -0.000000	diff=1.47143e-12
  0.000000	  0.000000	diff=1.67829e-15
  0.000000	  0.000000	diff=1.29507e-13
 -0.000000	 -0.000000	diff=1.81155e-12
  0.000000	  0.000000	diff=1.82809e-12
 -0.000000	 -0.000000	diff=1.20565e-12
 -0.000000	 -0.000000	diff=4.91335e-13
  0.000000	  0.000000	diff=8.48014e-13
  0.000000	  0.000000	diff=5.22793e-11
  local_diff=3.9679e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=4.00489e-15
  0.000000	  0.000000	diff=1.17957e-12
 -0.000000	 -0.000000	diff=1.53635e-12
  0.000000	  0.000000	diff=3.37708e-12
 -0.000000	 -0.000000	diff=2.67752e-13
  0.000000	  0.000000	diff=1.16067e-12
  0.000001	  0.000001	diff=2.72242e-12
  0.000006	  0.000006	diff=2.90564e-12
  0.000000	  0.000000	diff=1.76403e-12
 -0.000000	 -0.000000	diff=3.98668e-13
  0.000000	  0.000000	diff=1.27382e-12
 -0.000000	 -0.000000	diff=2.92045e-14
  0.000000	  0.000000	diff=8.37567e-13
 -0.000000	 -0.000000	diff=2.2959e-12
 -0.000001	 -0.000001	diff=1.48154e-12
 -0.000005	 -0.000005	diff=1.61679e-12
 -0.000000	 -0.000000	diff=9.78654e-13
  0.000000	  0.000000	diff=1.95982e-12
  0.000000	 -0.000000	diff=7.97214e-13
  0.000000	  0.000000	diff=4.78973e-13
  0.000000	  0.000000	diff=1.15069e-13
  0.000000	  0.000000	diff=2.75175e-12
  0.000000	  0.000000	diff=6.74949e-11
  0.000000	  0.000000	diff=6.62855e-13
  0.000000	  0.000000	diff=1.29956e-13
 -0.000000	 -0.000000	diff=2.08615e-12
  0.000000	  0.000000	diff=1.01103e-12
 -0.000000	 -0.000000	diff=1.05434e-12
  0.000000	 -0.000000	diff=4.77545e-14
 -0.000000	 -0.000000	diff=4.80614e-13
 -0.000000	 -0.000000	diff=1.32116e-12
 -0.000000	 -0.000000	diff=3.25178e-10
  local_diff=4.29399e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=2.06366e-13
 -0.000000	 -0.000000	diff=1.21275e-12
 -0.000000	 -0.000000	diff=2.02161e-12
  0.000000	  0.000000	diff=7.55858e-13
 -0.000000	 -0.000000	diff=1.1148e-12
 -0.000000	 -0.000000	diff=9.56723e-13
  0.000001	  0.000001	diff=2.28679e-11
  0.000013	  0.000013	diff=1.03727e-10
  0.000000	  0.000000	diff=8.04502e-13
  0.000000	  0.000000	diff=4.12786e-13
  0.000000	  0.000000	diff=3.75641e-13
 -0.000000	 -0.000000	diff=4.13292e-13
  0.000000	  0.000000	diff=1.50756e-12
  0.000000	  0.000000	diff=8.96865e-13
 -0.000004	 -0.000004	diff=5.99578e-11
 -0.000023	 -0.000023	diff=1.90703e-10
  0.000000	  0.000000	diff=1.3867e-13
  0.000000	  0.000000	diff=2.08403e-14
  0.000000	 -0.000000	diff=1.15753e-13
  0.000000	 -0.000000	diff=2.80208e-13
  0.000000	 -0.000000	diff=1.3952e-14
  0.000000	 -0.000000	diff=2.07245e-13
  0.000000	  0.000000	diff=2.40029e-13
  0.000000	  0.000000	diff=1.17952e-12
  0.000000	  0.000000	diff=1.71609e-13
  0.000000	  0.000000	diff=3.06291e-13
  0.000000	 -0.000000	diff=1.5742e-13
  0.000000	 -0.000000	diff=4.33699e-13
  0.000000	 -0.000000	diff=2.79684e-14
  0.000000	 -0.000000	diff=7.06276e-14
  0.000000	  0.000000	diff=1.46522e-12
  0.000000	  0.000000	diff=1.3796e-12
  0.000000	  0.000000	diff=7.26237e-13
  0.000000	  0.000000	diff=2.75505e-13
  0.000000	  0.000000	diff=8.01627e-13
 -0.000000	 -0.000000	diff=4.74384e-13
  0.000000	  0.000000	diff=1.08699e-12
  0.000000	  0.000000	diff=2.57827e-14
 -0.000000	 -0.000000	diff=1.34672e-10
 -0.000000	 -0.000000	diff=2.01642e-12
 -0.000000	 -0.000000	diff=2.44691e-12
 -0.000000	 -0.000000	diff=6.2328e-13
 -0.000000	 -0.000000	diff=5.88123e-13
  0.000000	  0.000000	diff=3.20489e-13
 -0.000000	 -0.000000	diff=6.06475e-13
 -0.000000	 -0.000000	diff=2.63198e-12
  0.000000	  0.000000	diff=8.02955e-13
 -0.000000	 -0.000000	diff=1.65974e-10
  local_diff=7.08216e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=1.43926e-12
  0.000000	  0.000000	diff=5.03526e-13
 -0.000000	 -0.000000	diff=1.30712e-12
  0.000000	  0.000000	diff=6.37233e-13
 -0.000000	 -0.000000	diff=1.54252e-12
  0.000000	  0.000000	diff=9.73353e-13
  0.000002	  0.000002	diff=1.02531e-12
  0.000006	  0.000006	diff=4.81961e-12
  0.000000	  0.000000	diff=2.09378e-12
  0.000000	  0.000000	diff=1.96868e-12
 -0.000000	 -0.000000	diff=3.36598e-13
  0.000000	  0.000000	diff=3.99119e-13
  0.000000	  0.000000	diff=3.61404e-13
  0.000000	  0.000000	diff=6.862e-13
  0.000001	  0.000001	diff=1.60551e-11
  0.000010	  0.000010	diff=6.44101e-11
  0.000000	  0.000000	diff=6.42762e-13
  0.000000	  0.000000	diff=2.40882e-12
 -0.000000	 -0.000000	diff=2.44393e-12
  0.000000	  0.000000	diff=1.21589e-13
 -0.000000	 -0.000000	diff=1.88395e-12
  0.000000	  0.000000	diff=1.13455e-12
  0.000000	  0.000000	diff=2.78195e-10
  0.000000	  0.000000	diff=2.15199e-12
 -0.000000	 -0.000000	diff=1.47902e-12
 -0.000000	 -0.000000	diff=6.02165e-13
  0.000000	  0.000000	diff=7.94074e-13
 -0.000000	 -0.000000	diff=3.05732e-13
  0.000000	  0.000000	diff=1.4505e-12
 -0.000000	 -0.000000	diff=5.52476e-14
 -0.000000	 -0.000000	diff=2.50583e-12
 -0.000000	 -0.000000	diff=1.97756e-11
  local_diff=4.1451e-10
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.36876e-09
  0.000004	  0.000004	diff=3.34411e-09
 -0.000001	 -0.000001	diff=4.10162e-10
  0.000002	  0.000002	diff=8.90803e-10
  local_diff=6.01384e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=4.09614e-09
 -0.000003	 -0.000003	diff=2.12263e-09
 -0.000025	 -0.000025	diff=4.32021e-10
 -0.000001	 -0.000001	diff=9.39123e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.34761e-10
 -0.000001	 -0.000001	diff=3.68621e-10
 -0.000004	 -0.000004	diff=1.28552e-10
 -0.000000	 -0.000000	diff=2.88622e-10
  local_diff=9.21047e-09
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.6982e-12
  0.000000	  0.000000	diff=1.34046e-14
  0.000000	  0.000000	diff=1.33076e-13
  0.000000	  0.000000	diff=4.60794e-16
  0.000000	 -0.000000	diff=5.78636e-13
  0.000000	  0.000000	diff=8.31557e-15
 -0.000000	 -0.000000	diff=2.01727e-12
 -0.000000	 -0.000000	diff=5.58674e-13
  0.000000	  0.000000	diff=2.69521e-13
  0.000000	  0.000000	diff=2.75086e-15
  0.000000	 -0.000000	diff=1.24343e-13
  0.000000	  0.000000	diff=1.01981e-15
  0.000000	  0.000000	diff=2.06925e-13
  0.000000	  0.000000	diff=3.48087e-15
 -0.000000	 -0.000000	diff=1.04902e-13
  0.000000	  0.000000	diff=6.50657e-14
  0.000000	  0.000000	diff=7.93544e-15
  0.000000	 -0.000000	diff=2.34487e-16
  0.000000	 -0.000000	diff=5.35381e-15
  0.000000	  0.000000	diff=8.41544e-17
  0.000000	  0.000000	diff=1.58234e-15
  0.000000	 -0.000000	diff=1.53259e-16
 -0.000000	 -0.000000	diff=9.94623e-13
  0.000000	 -0.000000	diff=2.56032e-13
  0.000000	 -0.000000	diff=1.49759e-16
  0.000000	 -0.000000	diff=1.95837e-17
  0.000000	 -0.000000	diff=2.56081e-16
  0.000000	  0.000000	diff=5.80115e-18
  0.000000	 -0.000000	diff=1.01227e-16
  0.000000	 -0.000000	diff=1.26251e-17
  0.000000	  0.000000	diff=1.72355e-12
  0.000000	  0.000000	diff=1.06873e-14
  local_diff=8.78683e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.31118e-15
  0.000000	 -0.000000	diff=7.08747e-15
  0.000000	  0.000000	diff=9.9794e-17
  0.000000	  0.000000	diff=9.93814e-17
  0.000000	 -0.000000	diff=2.50129e-15
  0.000000	 -0.000000	diff=4.82712e-15
  0.000000	  0.000000	diff=2.25081e-12
  0.000000	  0.000000	diff=2.18135e-12
  0.000000	 -0.000000	diff=3.11969e-16
  0.000000	 -0.000000	diff=2.75997e-15
  0.000000	  0.000000	diff=1.924e-16
  0.000000	  0.000000	diff=3.32302e-16
  0.000000	 -0.000000	diff=4.5453e-16
  0.000000	 -0.000000	diff=1.97276e-15
 -0.000000	 -0.000000	diff=5.95679e-13
 -0.000000	 -0.000000	diff=9.95283e-13
  0.000000	  0.000000	diff=4.18723e-18
  0.000000	  0.000000	diff=5.67395e-19
  0.000000	  0.000000	diff=3.32523e-17
  0.000000	  0.000000	diff=1.73098e-17
  0.000000	  0.000000	diff=2.89227e-17
  0.000000	  0.000000	diff=2.92644e-17
  0.000000	 -0.000000	diff=1.90505e-12
 -0.000000	 -0.000000	diff=1.4582e-12
  0.000000	  0.000000	diff=1.09315e-17
  0.000000	 -0.000000	diff=1.70185e-17
  0.000000	  0.000000	diff=2.77107e-17
  0.000000	  0.000000	diff=4.80864e-17
  0.000000	  0.000000	diff=3.31863e-17
  0.000000	  0.000000	diff=3.85647e-17
  0.000000	  0.000000	diff=3.0658e-13
  0.000000	 -0.000000	diff=7.07744e-15
  local_diff=9.72527e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.35254e-17
  0.000000	  0.000000	diff=1.16844e-16
  0.000000	 -0.000000	diff=3.36171e-18
  0.000000	  0.000000	diff=3.282e-17
  0.000000	 -0.000000	diff=2.4668e-17
  0.000000	  0.000000	diff=1.07651e-16
  0.000000	  0.000000	diff=7.67733e-13
 -0.000000	 -0.000000	diff=5.75691e-13
  0.000000	 -0.000000	diff=9.66621e-17
  0.000000	  0.000000	diff=3.29089e-16
  0.000000	 -0.000000	diff=7.76805e-18
  0.000000	  0.000000	diff=6.0959e-17
  0.000000	 -0.000000	diff=6.57754e-17
  0.000000	  0.000000	diff=3.00738e-16
  0.000000	  0.000000	diff=9.03323e-13
 -0.000000	 -0.000000	diff=1.39707e-12
  0.000000	 -0.000000	diff=9.21242e-20
  0.000000	  0.000000	diff=3.41308e-19
  0.000000	 -0.000000	diff=4.13707e-19
  0.000000	  0.000000	diff=6.17926e-19
  0.000000	 -0.000000	diff=4.85016e-19
  0.000000	  0.000000	diff=9.55346e-19
 -0.000000	 -0.000000	diff=1.74781e-12
  0.000000	  0.000000	diff=1.1593e-12
  0.000000	 -0.000000	diff=5.30812e-19
  0.000000	  0.000000	diff=2.99423e-18
  0.000000	 -0.000000	diff=6.17208e-19
  0.000000	  0.000000	diff=2.1317e-18
  0.000000	 -0.000000	diff=1.5238e-18
  0.000000	  0.000000	diff=5.22583e-18
  0.000000	  0.000000	diff=3.39764e-13
  0.000000	 -0.000000	diff=7.75107e-13
  local_diff=7.66699e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.17505e-12
  0.000000	  0.000000	diff=4.08161e-13
 -0.000000	 -0.000000	diff=4.72486e-13
  0.000000	  0.000000	diff=1.07238e-12
 -0.000000	 -0.000000	diff=2.34834e-12
  0.000000	  0.000000	diff=1.14698e-12
 -0.000000	 -0.000000	diff=5.25423e-13
  0.000000	  0.000000	diff=8.41968e-13
  local_diff=7.9908e-12
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=4.40528e-13
  0.000000	  0.000000	diff=2.05035e-12
  0.000000	  0.000000	diff=8.96631e-14
  0.000000	  0.000000	diff=1.85573e-13
 -0.000000	 -0.000000	diff=1.01563e-12
  0.000000	  0.000000	diff=5.21133e-13
 -0.000001	 -0.000001	diff=3.974e-12
  0.000001	  0.000001	diff=8.87789e-12
  0.000000	  0.000000	diff=1.00654e-12
 -0.000000	 -0.000000	diff=2.3084e-13
 -0.000000	 -0.000000	diff=8.05843e-13
  0.000000	  0.000000	diff=1.08314e-13
  0.000000	  0.000000	diff=2.90508e-13
 -0.000000	 -0.000000	diff=4.48174e-13
  0.000002	  0.000002	diff=4.6103e-11
  0.000003	  0.000003	diff=5.26155e-11
  0.000000	  0.000000	diff=1.27471e-12
 -0.000000	 -0.000000	diff=1.1995e-12
 -0.000000	 -0.000000	diff=4.37307e-13
  0.000000	  0.000000	diff=3.36442e-13
  0.000000	  0.000000	diff=1.45616e-12
 -0.000000	 -0.000000	diff=1.11396e-12
  0.000000	  0.000000	diff=4.19406e-11
  0.000000	  0.000000	diff=1.30546e-12
  0.000000	  0.000000	diff=2.16446e-12
  0.000000	 -0.000000	diff=6.67642e-13
  0.000000	  0.000000	diff=4.6152e-13
 -0.000000	 -0.000000	diff=1.51915e-13
  0.000000	  0.000000	diff=5.4492e-13
 -0.000000	 -0.000000	diff=1.31525e-12
  0.000000	  0.000000	diff=8.9233e-13
  0.000000	  0.000000	diff=7.40843e-13
  local_diff=1.74767e-10
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=1.40247e-12
  0.000000	  0.000000	diff=1.55337e-12
  0.000000	  0.000000	diff=1.54112e-12
  0.000000	  0.000000	diff=1.34424e-12
 -0.000000	 -0.000000	diff=2.33319e-13
  0.000000	  0.000000	diff=3.28784e-13
 -0.000000	 -0.000000	diff=1.09849e-12
 -0.000000	 -0.000000	diff=1.39794e-12
  0.000000	  0.000000	diff=6.67224e-13
 -0.000000	 -0.000000	diff=1.37652e-12
  0.000000	 -0.000000	diff=1.77398e-12
 -0.000000	 -0.000000	diff=1.12697e-13
  0.000000	  0.000000	diff=7.24723e-13
 -0.000000	 -0.000000	diff=2.48085e-13
  0.000001	  0.000001	diff=1.93753e-12
  0.000002	  0.000002	diff=1.50381e-12
  0.000000	  0.000000	diff=8.1455e-14
  0.000000	 -0.000000	diff=4.81719e-13
  0.000000	  0.000000	diff=6.53365e-14
  0.000000	 -0.000000	diff=1.67407e-13
  0.000000	  0.000000	diff=1.76697e-13
  0.000000	 -0.000000	diff=5.37637e-13
 -0.000000	 -0.000000	diff=2.13402e-11
  0.000000	  0.000000	diff=2.36449e-13
  0.000000	  0.000000	diff=2.17672e-13
  0.000000	 -0.000000	diff=5.00706e-13
  0.000000	  0.000000	diff=2.05418e-14
  0.000000	 -0.000000	diff=1.93918e-13
  0.000000	  0.000000	diff=2.50714e-13
  0.000000	 -0.000000	diff=6.17457e-13
  0.000000	  0.000000	diff=8.82727e-13
  0.000000	  0.000000	diff=2.14139e-11
  local_diff=6.44289e-11
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=2.58328e-12
  0.000000	  0.000000	diff=2.61748e-12
  0.000000	  0.000000	diff=2.5494e-12
  0.000000	 -0.000000	diff=1.97384e-14
  0.000000	  0.000000	diff=2.32282e-13
  0.000000	  0.000000	diff=2.27626e-12
  0.000001	  0.000001	diff=4.31418e-13
  0.000000	  0.000000	diff=4.13773e-14
  0.000000	  0.000000	diff=1.48591e-13
  0.000000	 -0.000000	diff=1.58924e-12
  0.000000	  0.000000	diff=1.14855e-13
  0.000000	 -0.000000	diff=5.33952e-13
  0.000000	  0.000000	diff=2.67834e-12
  0.000000	 -0.000000	diff=1.83361e-12
  0.000000	  0.000000	diff=4.70815e-14
 -0.000004	 -0.000004	diff=1.23292e-12
  0.000000	 -0.000000	diff=1.19267e-14
  0.000000	  0.000000	diff=2.3562e-14
  0.000000	 -0.000000	diff=4.6286e-15
  0.000000	  0.000000	diff=1.02265e-14
  0.000000	 -0.000000	diff=1.96261e-14
  0.000000	  0.000000	diff=3.16896e-14
 -0.000000	 -0.000000	diff=2.45803e-11
  0.000000	  0.000000	diff=1.635e-12
  0.000000	 -0.000000	diff=5.0902e-15
  0.000000	  0.000000	diff=1.08408e-14
  0.000000	 -0.000000	diff=1.57338e-15
  0.000000	  0.000000	diff=4.75865e-15
  0.000000	 -0.000000	diff=8.04198e-15
  0.000000	  0.000000	diff=1.46402e-14
 -0.000000	 -0.000000	diff=1.19271e-13
  0.000000	  0.000000	diff=1.42092e-11
  local_diff=5.96201e-11
# W_emb_tgt_char, [2 5]
  0.000001	  0.000001	diff=3.7919e-10
 -0.000002	 -0.000002	diff=4.94425e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000002	  0.000002	diff=1.41123e-10
 -0.000002	 -0.000002	diff=8.67353e-11
 -0.000000	 -0.000000	diff=4.44469e-11
 -0.000000	 -0.000000	diff=1.35493e-10
 -0.000000	 -0.000000	diff=2.43706e-11
 -0.000000	 -0.000000	diff=1.37235e-10
  local_diff=9.98036e-10
# W_h, [2 4]
 -0.000001	 -0.000001	diff=9.03292e-13
  0.000008	  0.000008	diff=1.72795e-12
  0.000002	  0.000002	diff=1.11429e-12
 -0.000009	 -0.000009	diff=8.76115e-13
 -0.000003	 -0.000003	diff=4.04875e-12
  0.000002	  0.000002	diff=2.41857e-12
 -0.000011	 -0.000011	diff=4.82194e-11
 -0.000009	 -0.000009	diff=4.84696e-11
  local_diff=1.07778e-10
# W_soft, [5 2]
 -0.000015	 -0.000015	diff=8.74361e-13
  0.000013	  0.000013	diff=1.39945e-12
 -0.000003	 -0.000003	diff=4.3558e-13
  0.000009	  0.000009	diff=1.17098e-12
 -0.000004	 -0.000004	diff=7.10521e-13
 -0.000019	 -0.000019	diff=1.78901e-12
  0.000012	  0.000012	diff=2.49223e-12
  0.000005	  0.000005	diff=9.17458e-13
  0.000009	  0.000009	diff=1.57438e-12
 -0.000007	 -0.000007	diff=2.48929e-12
  local_diff=1.38533e-11
# W_soft_char, [5 2]
  0.000003	  0.000003	diff=9.84814e-13
 -0.000002	 -0.000002	diff=5.98245e-14
 -0.000000	 -0.000000	diff=1.13227e-12
 -0.000000	 -0.000000	diff=9.96261e-13
 -0.000000	 -0.000000	diff=1.20354e-12
  0.000002	  0.000002	diff=1.21476e-12
 -0.000004	 -0.000004	diff=3.28635e-13
  0.000001	  0.000001	diff=8.03685e-13
  0.000000	  0.000000	diff=8.24922e-13
  0.000000	  0.000000	diff=3.29835e-13
  local_diff=7.87854e-12
# Num params=404, abs_diff=1.86337e-08
Elapsed time is 12.738819 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 1
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=9.14316e-14
  0.000000	  0.000000	diff=2.1033e-13
  0.000000	  0.000000	diff=5.94518e-14
  0.000000	  0.000000	diff=2.64893e-14
  0.000000	  0.000000	diff=2.25987e-13
  0.000000	  0.000000	diff=9.71939e-14
  0.000000	  0.000000	diff=7.70693e-11
  0.000001	  0.000001	diff=1.93192e-12
  0.000000	  0.000000	diff=8.85939e-13
 -0.000000	 -0.000000	diff=3.11317e-13
 -0.000000	 -0.000000	diff=2.84298e-13
 -0.000000	 -0.000000	diff=4.71654e-13
 -0.000000	 -0.000000	diff=1.0861e-12
 -0.000000	 -0.000000	diff=7.41577e-13
 -0.000000	 -0.000000	diff=1.77178e-10
 -0.000002	 -0.000002	diff=6.16655e-12
 -0.000000	 -0.000000	diff=1.42499e-13
 -0.000000	 -0.000000	diff=4.95422e-13
 -0.000000	 -0.000000	diff=3.95349e-13
  0.000000	  0.000000	diff=4.95407e-13
 -0.000000	 -0.000000	diff=3.89424e-13
 -0.000000	 -0.000000	diff=1.45928e-13
  0.000000	  0.000000	diff=1.87989e-11
  0.000000	  0.000000	diff=6.80437e-13
  0.000000	  0.000000	diff=5.2223e-13
  0.000000	  0.000000	diff=6.06922e-13
  0.000000	  0.000000	diff=5.31366e-13
 -0.000000	 -0.000000	diff=7.6757e-13
  0.000000	  0.000000	diff=6.19356e-13
  0.000000	  0.000000	diff=4.68612e-13
 -0.000000	 -0.000000	diff=5.86043e-14
 -0.000000	 -0.000000	diff=5.98994e-11
  local_diff=3.51855e-10
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.48524e-13
 -0.000000	 -0.000000	diff=3.83571e-13
  0.000000	  0.000000	diff=3.44288e-14
 -0.000000	 -0.000000	diff=5.12635e-13
  0.000000	  0.000000	diff=6.18709e-14
 -0.000000	 -0.000000	diff=2.10681e-13
 -0.000017	 -0.000017	diff=3.72062e-12
 -0.000018	 -0.000018	diff=2.14725e-12
 -0.000000	 -0.000000	diff=8.38905e-13
  0.000000	  0.000000	diff=6.40416e-14
 -0.000000	 -0.000000	diff=3.13259e-13
  0.000000	  0.000000	diff=1.17615e-12
 -0.000000	 -0.000000	diff=6.73624e-13
  0.000000	  0.000000	diff=4.68937e-13
  0.000021	  0.000021	diff=1.95617e-12
  0.000022	  0.000022	diff=2.85112e-12
  0.000000	  0.000000	diff=2.89688e-13
 -0.000000	 -0.000000	diff=8.35229e-14
  0.000000	  0.000000	diff=1.02211e-14
 -0.000000	 -0.000000	diff=1.68437e-13
  0.000000	  0.000000	diff=3.23392e-13
 -0.000000	 -0.000000	diff=1.0694e-13
 -0.000000	 -0.000000	diff=1.24242e-10
 -0.000000	 -0.000000	diff=2.52325e-13
 -0.000000	 -0.000000	diff=3.75908e-13
  0.000000	  0.000000	diff=1.34199e-12
 -0.000000	 -0.000000	diff=2.82618e-13
  0.000000	  0.000000	diff=3.23691e-13
 -0.000000	 -0.000000	diff=4.15719e-13
  0.000000	  0.000000	diff=7.80023e-13
  0.000000	  0.000000	diff=1.06256e-13
  0.000000	  0.000000	diff=2.74886e-10
  local_diff=4.19551e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=7.82275e-13
  0.000000	  0.000000	diff=1.21334e-12
 -0.000000	 -0.000000	diff=7.08264e-13
 -0.000000	 -0.000000	diff=1.16469e-12
 -0.000000	 -0.000000	diff=2.05532e-13
  0.000000	  0.000000	diff=6.89501e-13
 -0.000003	 -0.000003	diff=5.31655e-11
 -0.000002	 -0.000002	diff=1.10567e-10
  0.000000	  0.000000	diff=1.47187e-12
 -0.000000	 -0.000000	diff=3.94512e-13
  0.000000	  0.000000	diff=5.2757e-13
  0.000000	  0.000000	diff=5.39185e-13
  0.000000	  0.000000	diff=9.07259e-13
 -0.000000	 -0.000000	diff=1.02649e-12
 -0.000005	 -0.000005	diff=1.02672e-10
  0.000008	  0.000008	diff=1.50818e-10
  0.000000	  0.000000	diff=1.25193e-13
 -0.000000	 -0.000000	diff=1.52659e-13
 -0.000000	 -0.000000	diff=5.84393e-14
  0.000000	  0.000000	diff=8.54978e-15
  0.000000	 -0.000000	diff=5.74944e-14
  0.000000	 -0.000000	diff=1.15902e-12
  0.000000	  0.000000	diff=7.28337e-13
 -0.000000	 -0.000000	diff=1.06666e-13
 -0.000000	 -0.000000	diff=1.78165e-14
  0.000000	  0.000000	diff=2.15668e-13
  0.000000	  0.000000	diff=3.19785e-14
  0.000000	 -0.000000	diff=5.01003e-13
  0.000000	 -0.000000	diff=6.04249e-15
  0.000000	  0.000000	diff=3.8445e-13
 -0.000000	 -0.000000	diff=8.10707e-13
  0.000000	  0.000000	diff=2.80611e-13
  0.000000	  0.000000	diff=3.26095e-13
 -0.000000	 -0.000000	diff=1.51034e-13
  0.000000	  0.000000	diff=4.24617e-14
  0.000000	  0.000000	diff=1.55744e-13
  0.000000	  0.000000	diff=2.92551e-13
 -0.000000	 -0.000000	diff=6.72952e-14
 -0.000000	 -0.000000	diff=7.86029e-10
  0.000000	  0.000000	diff=8.45975e-12
 -0.000000	 -0.000000	diff=9.59988e-15
  0.000000	  0.000000	diff=6.44214e-13
  0.000000	  0.000000	diff=9.06688e-13
 -0.000000	 -0.000000	diff=2.79468e-13
 -0.000000	 -0.000000	diff=5.67873e-14
  0.000000	  0.000000	diff=6.12508e-13
 -0.000000	 -0.000000	diff=5.14246e-12
 -0.000000	 -0.000000	diff=1.63504e-10
  local_diff=1.39818e-09
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=2.533e-13
 -0.000000	 -0.000000	diff=4.24756e-13
 -0.000000	 -0.000000	diff=8.38512e-13
 -0.000000	 -0.000000	diff=2.93193e-13
  0.000000	  0.000000	diff=5.82192e-13
 -0.000000	 -0.000000	diff=2.85683e-13
 -0.000005	 -0.000005	diff=3.05229e-11
 -0.000002	 -0.000002	diff=1.78457e-12
  0.000000	  0.000000	diff=5.08518e-13
 -0.000000	 -0.000000	diff=6.22127e-13
 -0.000000	 -0.000000	diff=6.07425e-13
 -0.000000	 -0.000000	diff=6.67504e-13
  0.000000	  0.000000	diff=6.29519e-13
 -0.000000	 -0.000000	diff=4.11926e-13
 -0.000012	 -0.000012	diff=1.944e-10
  0.000003	  0.000003	diff=3.4538e-13
  0.000000	  0.000000	diff=4.87387e-13
 -0.000000	 -0.000000	diff=5.13106e-13
 -0.000000	 -0.000000	diff=3.85273e-13
 -0.000000	 -0.000000	diff=6.73019e-13
 -0.000000	 -0.000000	diff=6.50426e-13
 -0.000000	 -0.000000	diff=2.72322e-13
  0.000000	  0.000000	diff=1.01607e-09
 -0.000000	 -0.000000	diff=5.84374e-12
 -0.000000	 -0.000000	diff=4.69794e-13
  0.000000	  0.000000	diff=1.33613e-12
  0.000000	  0.000000	diff=1.08703e-13
  0.000000	  0.000000	diff=7.29085e-13
  0.000000	  0.000000	diff=5.61587e-13
  0.000000	  0.000000	diff=3.27173e-13
 -0.000001	 -0.000001	diff=5.98636e-12
  0.000000	  0.000000	diff=1.78226e-09
  local_diff=3.04985e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.47152e-10
 -0.000001	 -0.000001	diff=3.23309e-10
  0.000000	  0.000000	diff=3.3021e-11
 -0.000001	 -0.000001	diff=5.23149e-10
  local_diff=1.02663e-09
# W_emb_tgt, [2 5]
 -0.000001	 -0.000001	diff=2.17309e-08
 -0.000007	 -0.000007	diff=5.12841e-09
  0.000006	  0.000006	diff=6.36856e-09
 -0.000002	 -0.000002	diff=1.2053e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.02573e-09
 -0.000003	 -0.000003	diff=2.43713e-09
 -0.000001	 -0.000001	diff=3.43747e-09
 -0.000002	 -0.000002	diff=1.7029e-09
  local_diff=4.70364e-08
# W_src_char{1}, [8 4]
 -0.000000	 -0.000000	diff=3.35668e-13
  0.000000	 -0.000000	diff=1.3466e-14
  0.000000	  0.000000	diff=2.01322e-13
  0.000000	 -0.000000	diff=1.2277e-14
 -0.000000	 -0.000000	diff=2.042e-13
  0.000000	 -0.000000	diff=7.33276e-13
 -0.000000	 -0.000000	diff=6.79643e-14
 -0.000000	 -0.000000	diff=2.97312e-13
 -0.000000	  0.000000	diff=1.26352e-12
  0.000000	  0.000000	diff=6.7493e-14
 -0.000000	 -0.000000	diff=3.98379e-13
  0.000000	 -0.000000	diff=9.53835e-15
  0.000000	  0.000000	diff=2.44324e-13
  0.000000	  0.000000	diff=4.2419e-14
 -0.000000	 -0.000000	diff=1.65438e-12
 -0.000000	 -0.000000	diff=1.29719e-12
  0.000000	  0.000000	diff=1.56583e-14
  0.000000	  0.000000	diff=1.06904e-15
  0.000000	 -0.000000	diff=9.22046e-15
  0.000000	 -0.000000	diff=1.67292e-16
  0.000000	  0.000000	diff=4.95031e-15
  0.000000	  0.000000	diff=6.88359e-16
 -0.000000	 -0.000000	diff=1.38889e-13
 -0.000000	 -0.000000	diff=5.4542e-13
  0.000000	  0.000000	diff=5.76642e-16
  0.000000	  0.000000	diff=1.58361e-16
  0.000000	 -0.000000	diff=1.18983e-15
  0.000000	 -0.000000	diff=1.89395e-16
  0.000000	 -0.000000	diff=3.09272e-16
  0.000000	  0.000000	diff=2.99098e-17
  0.000000	  0.000000	diff=6.12205e-13
  0.000000	  0.000000	diff=3.83107e-13
  local_diff=8.55655e-12
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=6.3619e-15
  0.000000	 -0.000000	diff=1.40041e-14
  0.000000	  0.000000	diff=2.12357e-15
  0.000000	  0.000000	diff=1.76635e-15
  0.000000	 -0.000000	diff=1.68489e-15
  0.000000	 -0.000000	diff=6.30097e-15
 -0.000000	 -0.000000	diff=2.14448e-13
 -0.000000	 -0.000000	diff=3.84314e-13
  0.000000	 -0.000000	diff=6.61152e-16
  0.000000	 -0.000000	diff=4.96563e-15
  0.000000	  0.000000	diff=1.12912e-15
  0.000000	  0.000000	diff=1.67011e-15
  0.000000	  0.000000	diff=2.61573e-16
  0.000000	 -0.000000	diff=1.75734e-15
 -0.000000	 -0.000000	diff=6.1453e-13
 -0.000000	 -0.000000	diff=1.1915e-12
  0.000000	 -0.000000	diff=2.37018e-17
  0.000000	 -0.000000	diff=1.04725e-16
  0.000000	  0.000000	diff=4.35937e-17
  0.000000	  0.000000	diff=3.8921e-17
  0.000000	  0.000000	diff=1.03432e-17
  0.000000	 -0.000000	diff=2.61858e-17
 -0.000000	 -0.000000	diff=1.01754e-13
 -0.000000	 -0.000000	diff=2.79201e-13
  0.000000	  0.000000	diff=8.04814e-19
  0.000000	 -0.000000	diff=1.39478e-16
  0.000000	  0.000000	diff=4.67166e-17
  0.000000	  0.000000	diff=1.34066e-16
  0.000000	  0.000000	diff=4.23743e-17
  0.000000	  0.000000	diff=2.43853e-17
  0.000000	  0.000000	diff=2.59814e-13
  0.000000	  0.000000	diff=2.4984e-13
  local_diff=3.33872e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=1.21564e-17
  0.000000	  0.000000	diff=1.06656e-16
  0.000000	 -0.000000	diff=1.21026e-17
  0.000000	  0.000000	diff=2.83083e-17
  0.000000	 -0.000000	diff=1.45248e-17
  0.000000	  0.000000	diff=6.75099e-17
 -0.000000	 -0.000000	diff=1.86618e-14
  0.000000	  0.000000	diff=7.58661e-13
  0.000000	 -0.000000	diff=8.59946e-17
  0.000000	  0.000000	diff=3.55736e-16
  0.000000	 -0.000000	diff=1.63852e-17
  0.000000	 -0.000000	diff=1.70086e-17
  0.000000	 -0.000000	diff=2.11662e-17
  0.000000	  0.000000	diff=1.30954e-16
 -0.000000	 -0.000000	diff=6.49827e-15
  0.000000	  0.000000	diff=6.4602e-13
  0.000000	 -0.000000	diff=1.15368e-19
  0.000000	  0.000000	diff=1.22002e-18
  0.000000	 -0.000000	diff=8.23662e-19
  0.000000	  0.000000	diff=1.71738e-18
  0.000000	 -0.000000	diff=9.12809e-19
  0.000000	  0.000000	diff=2.91002e-18
 -0.000000	 -0.000000	diff=2.38888e-13
  0.000000	  0.000000	diff=2.21319e-13
  0.000000	  0.000000	diff=9.21833e-19
  0.000000	 -0.000000	diff=2.86176e-19
  0.000000	 -0.000000	diff=1.18945e-18
  0.000000	  0.000000	diff=4.03114e-18
  0.000000	 -0.000000	diff=1.37107e-18
  0.000000	  0.000000	diff=5.32428e-18
 -0.000000	 -0.000000	diff=3.72323e-14
  0.000000	  0.000000	diff=1.83104e-13
  local_diff=2.11127e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=3.02994e-13
  0.000000	  0.000000	diff=9.29505e-13
 -0.000000	 -0.000000	diff=5.27578e-13
  0.000000	  0.000000	diff=1.75567e-13
 -0.000000	 -0.000000	diff=6.9161e-13
  0.000000	  0.000000	diff=3.63038e-14
 -0.000000	 -0.000000	diff=1.81367e-13
  0.000000	  0.000000	diff=7.21727e-15
  local_diff=2.85214e-12
# W_h, [2 4]
  0.000005	  0.000005	diff=1.95179e-13
  0.000018	  0.000018	diff=2.13379e-13
 -0.000006	 -0.000006	diff=2.83191e-13
 -0.000023	 -0.000023	diff=5.56948e-13
  0.000003	  0.000003	diff=1.37876e-12
  0.000006	  0.000006	diff=9.5665e-12
  0.000008	  0.000008	diff=1.30733e-10
  0.000002	  0.000002	diff=1.53565e-10
  local_diff=2.96493e-10
# W_soft, [5 2]
 -0.000032	 -0.000032	diff=6.65818e-13
  0.000012	  0.000012	diff=8.79437e-13
  0.000001	  0.000001	diff=4.69016e-13
  0.000008	  0.000008	diff=3.9575e-13
  0.000011	  0.000011	diff=1.40354e-13
  0.000027	  0.000027	diff=1.54637e-13
 -0.000009	 -0.000009	diff=4.17914e-13
 -0.000005	 -0.000005	diff=8.00189e-13
 -0.000005	 -0.000005	diff=4.56571e-13
 -0.000008	 -0.000008	diff=3.02318e-13
  local_diff=4.682e-12
# Num params=288, abs_diff=5.36005e-08
Elapsed time is 6.145016 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.53807e-11
  0.000000	  0.000000	diff=1.1438e-12
  0.000000	  0.000000	diff=1.10414e-11
  0.000000	  0.000000	diff=3.00658e-12
 -0.000000	 -0.000000	diff=1.17275e-11
 -0.000000	 -0.000000	diff=3.26857e-12
  0.000005	  0.000005	diff=2.60397e-11
  0.000000	  0.000000	diff=1.53462e-11
  0.000000	  0.000000	diff=5.16633e-12
 -0.000000	 -0.000000	diff=1.11079e-11
 -0.000000	 -0.000000	diff=1.81255e-11
 -0.000000	 -0.000000	diff=5.18383e-12
  0.000000	  0.000000	diff=1.66668e-11
  0.000000	  0.000000	diff=1.03321e-13
 -0.000007	 -0.000007	diff=5.07197e-11
 -0.000001	 -0.000001	diff=6.82303e-13
 -0.000000	 -0.000000	diff=5.38873e-13
 -0.000000	 -0.000000	diff=2.5036e-12
  0.000000	  0.000000	diff=8.13937e-12
 -0.000000	 -0.000000	diff=4.74862e-13
  0.000000	  0.000000	diff=7.20874e-12
  0.000000	  0.000000	diff=7.74578e-12
 -0.000000	 -0.000000	diff=2.21641e-10
 -0.000000	 -0.000000	diff=1.07851e-13
  0.000000	  0.000000	diff=2.82829e-12
  0.000000	  0.000000	diff=1.26993e-13
 -0.000000	 -0.000000	diff=9.54047e-12
  0.000000	  0.000000	diff=3.85775e-12
 -0.000000	 -0.000000	diff=1.18254e-12
 -0.000000	 -0.000000	diff=9.01307e-12
  0.000000	  0.000000	diff=1.91977e-11
  0.000000	  0.000000	diff=7.32078e-11
  local_diff=5.62025e-10
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=2.86423e-12
  0.000000	  0.000000	diff=1.20674e-12
 -0.000000	 -0.000000	diff=4.15489e-12
  0.000000	  0.000000	diff=2.32413e-12
  0.000000	 -0.000000	diff=3.13779e-12
  0.000000	  0.000000	diff=7.37191e-12
  0.000001	  0.000001	diff=4.33043e-12
  0.000006	  0.000006	diff=1.08922e-11
  0.000000	  0.000000	diff=9.58264e-12
 -0.000000	 -0.000000	diff=2.4207e-12
  0.000000	  0.000000	diff=7.24713e-12
 -0.000000	 -0.000000	diff=1.52077e-14
  0.000000	  0.000000	diff=1.9814e-12
 -0.000000	 -0.000000	diff=5.41182e-13
 -0.000001	 -0.000001	diff=8.19905e-13
 -0.000005	 -0.000005	diff=2.71134e-11
  0.000000	 -0.000000	diff=4.70602e-12
  0.000000	  0.000000	diff=3.72535e-12
  0.000000	 -0.000000	diff=7.97457e-13
  0.000000	  0.000000	diff=5.20582e-12
  0.000000	  0.000000	diff=1.14403e-13
  0.000000	  0.000000	diff=8.6171e-12
  0.000000	  0.000000	diff=7.20936e-11
  0.000000	  0.000000	diff=1.64705e-11
  0.000000	  0.000000	diff=5.55398e-12
  0.000000	 -0.000000	diff=9.28153e-12
  0.000000	  0.000000	diff=1.03574e-11
  0.000000	 -0.000000	diff=7.47162e-12
  0.000000	 -0.000000	diff=4.69455e-14
  0.000000	 -0.000000	diff=3.32258e-12
 -0.000000	 -0.000000	diff=1.82082e-11
 -0.000000	 -0.000000	diff=3.04379e-10
  local_diff=5.56355e-10
# W_tgt{1}, [8 6]
 -0.000000	 -0.000000	diff=6.02766e-12
 -0.000000	 -0.000000	diff=1.25409e-11
 -0.000000	 -0.000000	diff=3.69853e-12
  0.000000	  0.000000	diff=2.65103e-11
 -0.000000	 -0.000000	diff=7.52401e-12
 -0.000000	 -0.000000	diff=1.21704e-12
  0.000001	  0.000001	diff=1.1916e-11
  0.000013	  0.000013	diff=1.1987e-10
  0.000000	  0.000000	diff=1.89585e-12
  0.000000	  0.000000	diff=3.18274e-11
  0.000000	  0.000000	diff=8.84226e-12
 -0.000000	 -0.000000	diff=8.70549e-12
  0.000000	  0.000000	diff=9.72844e-12
  0.000000	  0.000000	diff=1.87455e-11
 -0.000004	 -0.000004	diff=4.03861e-11
 -0.000023	 -0.000023	diff=2.02264e-10
  0.000000	  0.000000	diff=1.38674e-13
  0.000000	  0.000000	diff=2.08465e-14
  0.000000	 -0.000000	diff=1.15754e-13
  0.000000	 -0.000000	diff=2.80208e-13
  0.000000	 -0.000000	diff=1.395e-14
  0.000000	 -0.000000	diff=2.07236e-13
  0.000000	  0.000000	diff=2.33943e-13
  0.000000	  0.000000	diff=4.49326e-12
  0.000000	  0.000000	diff=1.11971e-11
  0.000000	  0.000000	diff=3.06296e-13
  0.000000	 -0.000000	diff=1.57422e-13
  0.000000	 -0.000000	diff=4.33695e-13
  0.000000	 -0.000000	diff=2.79662e-14
  0.000000	 -0.000000	diff=7.06167e-14
  0.000000	  0.000000	diff=7.05275e-12
  0.000000	  0.000000	diff=1.45236e-12
  0.000000	  0.000000	diff=4.95764e-12
  0.000000	  0.000000	diff=5.41441e-12
  0.000000	  0.000000	diff=2.03866e-12
 -0.000000	 -0.000000	diff=8.04649e-12
  0.000000	  0.000000	diff=1.028e-11
  0.000000	  0.000000	diff=2.45383e-14
 -0.000000	 -0.000000	diff=1.22123e-10
 -0.000000	 -0.000000	diff=5.39227e-12
 -0.000000	 -0.000000	diff=3.23903e-12
 -0.000000	 -0.000000	diff=6.16109e-13
 -0.000000	 -0.000000	diff=5.09628e-12
  0.000000	  0.000000	diff=5.37116e-12
 -0.000000	 -0.000000	diff=3.44943e-12
 -0.000000	 -0.000000	diff=8.73667e-12
  0.000000	  0.000000	diff=1.41093e-11
 -0.000000	 -0.000000	diff=1.46845e-10
  local_diff=8.83641e-10
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.24324e-12
  0.000000	  0.000000	diff=5.01444e-13
 -0.000000	 -0.000000	diff=1.00597e-11
  0.000000	  0.000000	diff=7.90619e-12
 -0.000000	 -0.000000	diff=9.82233e-12
  0.000000	  0.000000	diff=1.88261e-12
  0.000002	  0.000002	diff=1.85495e-11
  0.000006	  0.000006	diff=2.08648e-11
  0.000000	  0.000000	diff=2.09658e-12
  0.000000	  0.000000	diff=9.39611e-12
 -0.000000	 -0.000000	diff=5.34819e-12
  0.000000	  0.000000	diff=8.93033e-12
  0.000000	  0.000000	diff=3.63946e-13
  0.000000	  0.000000	diff=7.83562e-12
  0.000001	  0.000001	diff=1.39406e-11
  0.000010	  0.000010	diff=4.76346e-11
  0.000000	  0.000000	diff=7.88378e-12
  0.000000	  0.000000	diff=6.11775e-12
  0.000000	 -0.000000	diff=8.9246e-12
  0.000000	  0.000000	diff=1.22579e-13
  0.000000	 -0.000000	diff=3.80026e-12
  0.000000	  0.000000	diff=4.55085e-12
  0.000000	  0.000000	diff=2.94859e-10
  0.000000	  0.000000	diff=2.03155e-11
  0.000000	 -0.000000	diff=4.20526e-12
  0.000000	 -0.000000	diff=5.08204e-12
  0.000000	  0.000000	diff=7.94261e-13
 -0.000000	 -0.000000	diff=5.37729e-12
  0.000000	  0.000000	diff=7.07617e-12
 -0.000000	 -0.000000	diff=5.36928e-14
 -0.000000	 -0.000000	diff=2.23304e-11
 -0.000000	 -0.000000	diff=2.98669e-11
  local_diff=5.90736e-10
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000004	 -0.000004	diff=1.35849e-09
  0.000004	  0.000004	diff=3.34795e-09
 -0.000001	 -0.000001	diff=4.09339e-10
  0.000002	  0.000002	diff=9.06132e-10
  local_diff=6.02191e-09
# W_emb_tgt, [2 5]
 -0.000014	 -0.000014	diff=4.11617e-09
 -0.000003	 -0.000003	diff=2.11464e-09
 -0.000025	 -0.000025	diff=4.14448e-10
 -0.000001	 -0.000001	diff=9.37206e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.4179e-10
 -0.000001	 -0.000001	diff=3.50958e-10
 -0.000004	 -0.000004	diff=1.36204e-10
 -0.000000	 -0.000000	diff=2.72252e-10
  local_diff=9.18367e-09
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=1.14394e-12
  0.000000	  0.000000	diff=1.34068e-14
  0.000000	  0.000000	diff=1.33075e-13
  0.000000	  0.000000	diff=4.61009e-16
  0.000000	 -0.000000	diff=5.78618e-13
  0.000000	  0.000000	diff=8.31706e-15
 -0.000000	 -0.000000	diff=9.36319e-12
 -0.000000	 -0.000000	diff=6.24556e-12
  0.000000	  0.000000	diff=1.10992e-11
  0.000000	  0.000000	diff=2.74991e-15
  0.000000	 -0.000000	diff=1.24334e-13
  0.000000	  0.000000	diff=1.02016e-15
  0.000000	  0.000000	diff=2.0692e-13
  0.000000	  0.000000	diff=3.48047e-15
 -0.000000	 -0.000000	diff=5.78896e-12
  0.000000	  0.000000	diff=8.46122e-12
  0.000000	  0.000000	diff=7.93511e-15
  0.000000	 -0.000000	diff=2.34534e-16
  0.000000	 -0.000000	diff=5.35366e-15
  0.000000	  0.000000	diff=8.41704e-17
  0.000000	  0.000000	diff=1.58221e-15
  0.000000	 -0.000000	diff=1.53288e-16
  0.000000	 -0.000000	diff=1.84774e-12
  0.000000	 -0.000000	diff=2.56072e-13
  0.000000	 -0.000000	diff=1.49783e-16
  0.000000	 -0.000000	diff=1.95903e-17
  0.000000	 -0.000000	diff=2.56007e-16
  0.000000	  0.000000	diff=5.80488e-18
  0.000000	 -0.000000	diff=1.01195e-16
  0.000000	 -0.000000	diff=1.26287e-17
  0.000000	  0.000000	diff=9.64515e-12
  0.000000	  0.000000	diff=1.1358e-11
  local_diff=6.62973e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.3111e-15
  0.000000	 -0.000000	diff=7.08725e-15
  0.000000	  0.000000	diff=9.97666e-17
  0.000000	  0.000000	diff=9.93559e-17
  0.000000	 -0.000000	diff=2.50127e-15
  0.000000	 -0.000000	diff=4.82707e-15
  0.000000	  0.000000	diff=6.26988e-12
  0.000000	  0.000000	diff=3.49742e-12
  0.000000	 -0.000000	diff=3.11943e-16
  0.000000	 -0.000000	diff=2.7599e-15
  0.000000	  0.000000	diff=1.92378e-16
  0.000000	  0.000000	diff=3.3226e-16
  0.000000	 -0.000000	diff=4.54549e-16
  0.000000	 -0.000000	diff=1.97279e-15
 -0.000000	 -0.000000	diff=5.96313e-13
  0.000000	 -0.000000	diff=4.68838e-12
  0.000000	  0.000000	diff=4.18735e-18
  0.000000	  0.000000	diff=5.69667e-19
  0.000000	  0.000000	diff=3.32523e-17
  0.000000	  0.000000	diff=1.73088e-17
  0.000000	  0.000000	diff=2.89224e-17
  0.000000	  0.000000	diff=2.92653e-17
  0.000000	 -0.000000	diff=1.90513e-12
  0.000000	 -0.000000	diff=1.38404e-12
  0.000000	  0.000000	diff=1.09308e-17
  0.000000	 -0.000000	diff=1.70157e-17
  0.000000	  0.000000	diff=2.77096e-17
  0.000000	  0.000000	diff=4.80826e-17
  0.000000	  0.000000	diff=3.31842e-17
  0.000000	  0.000000	diff=3.85634e-17
  0.000000	  0.000000	diff=1.10622e-11
  0.000000	 -0.000000	diff=1.13759e-11
  local_diff=4.08045e-11
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.35252e-17
  0.000000	  0.000000	diff=1.16842e-16
  0.000000	 -0.000000	diff=3.36124e-18
  0.000000	  0.000000	diff=3.28185e-17
  0.000000	 -0.000000	diff=2.46679e-17
  0.000000	  0.000000	diff=1.0765e-16
  0.000000	  0.000000	diff=6.44895e-12
 -0.000000	 -0.000000	diff=5.70709e-13
  0.000000	 -0.000000	diff=9.66615e-17
  0.000000	  0.000000	diff=3.29087e-16
  0.000000	 -0.000000	diff=7.76752e-18
  0.000000	  0.000000	diff=6.09583e-17
  0.000000	 -0.000000	diff=6.57759e-17
  0.000000	  0.000000	diff=3.00741e-16
  0.000000	  0.000000	diff=4.77553e-12
 -0.000000	 -0.000000	diff=9.98065e-12
  0.000000	 -0.000000	diff=9.21218e-20
  0.000000	  0.000000	diff=3.41264e-19
  0.000000	 -0.000000	diff=4.13694e-19
  0.000000	  0.000000	diff=6.17865e-19
  0.000000	 -0.000000	diff=4.85001e-19
  0.000000	  0.000000	diff=9.55243e-19
  0.000000	 -0.000000	diff=1.09432e-12
  0.000000	  0.000000	diff=1.02094e-11
  0.000000	 -0.000000	diff=5.30817e-19
  0.000000	  0.000000	diff=2.99418e-18
  0.000000	 -0.000000	diff=6.17168e-19
  0.000000	  0.000000	diff=2.13155e-18
  0.000000	 -0.000000	diff=1.52377e-18
  0.000000	  0.000000	diff=5.22562e-18
  0.000000	  0.000000	diff=3.39909e-13
  0.000000	 -0.000000	diff=7.75333e-13
  local_diff=3.4196e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.66517e-12
  0.000000	  0.000000	diff=5.27817e-12
 -0.000000	 -0.000000	diff=8.05637e-12
  0.000000	  0.000000	diff=1.76732e-12
 -0.000000	 -0.000000	diff=3.34175e-12
  0.000000	  0.000000	diff=1.02157e-11
 -0.000000	 -0.000000	diff=5.153e-12
  0.000000	  0.000000	diff=4.8486e-12
  local_diff=4.03261e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.00896e-11
  0.000000	  0.000000	diff=3.45047e-12
  0.000000	  0.000000	diff=1.61564e-11
  0.000000	  0.000000	diff=3.82861e-12
 -0.000000	 -0.000000	diff=1.01563e-11
  0.000000	  0.000000	diff=4.7301e-13
 -0.000005	 -0.000005	diff=5.6793e-11
  0.000007	  0.000007	diff=7.74102e-11
  0.000000	  0.000000	diff=1.30324e-12
 -0.000000	 -0.000000	diff=1.93614e-11
 -0.000000	 -0.000000	diff=1.37428e-11
  0.000000	  0.000000	diff=6.76749e-12
  0.000000	  0.000000	diff=2.77926e-12
 -0.000000	 -0.000000	diff=1.58504e-11
  0.000024	  0.000024	diff=4.72399e-10
  0.000029	  0.000029	diff=5.26155e-10
  0.000000	  0.000000	diff=1.27471e-11
 -0.000000	 -0.000000	diff=5.05803e-12
 -0.000000	 -0.000000	diff=1.00574e-11
  0.000000	  0.000000	diff=2.31993e-12
  0.000000	  0.000000	diff=2.02459e-11
 -0.000000	 -0.000000	diff=1.11396e-11
  0.000000	  0.000000	diff=4.36459e-10
  0.000000	  0.000000	diff=3.99845e-12
  0.000000	  0.000000	diff=4.59154e-12
  0.000000	 -0.000000	diff=6.67642e-12
  0.000000	  0.000000	diff=1.02995e-11
 -0.000000	 -0.000000	diff=7.20349e-12
  0.000000	  0.000000	diff=1.11335e-11
 -0.000000	 -0.000000	diff=7.46813e-12
  0.000000	  0.000000	diff=1.46076e-11
  0.000000	  0.000000	diff=1.30928e-11
  local_diff=1.81382e-09
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=8.34039e-12
  0.000000	  0.000000	diff=2.12181e-11
  0.000000	  0.000000	diff=4.04255e-12
  0.000000	  0.000000	diff=2.07374e-12
 -0.000000	 -0.000000	diff=2.50706e-11
  0.000000	  0.000000	diff=1.46565e-11
 -0.000004	 -0.000004	diff=2.23536e-11
 -0.000002	 -0.000002	diff=1.39794e-11
  0.000000	  0.000000	diff=9.87899e-13
 -0.000000	 -0.000000	diff=8.08082e-12
  0.000000	 -0.000000	diff=1.77398e-11
 -0.000000	 -0.000000	diff=1.818e-11
  0.000000	  0.000000	diff=2.43003e-11
 -0.000000	 -0.000000	diff=1.45722e-11
  0.000007	  0.000007	diff=8.00659e-12
  0.000016	  0.000016	diff=2.07225e-11
  0.000000	  0.000000	diff=8.1455e-13
  0.000000	 -0.000000	diff=4.81719e-12
  0.000000	  0.000000	diff=6.53365e-13
  0.000000	 -0.000000	diff=1.30428e-11
  0.000000	  0.000000	diff=1.76697e-12
  0.000000	 -0.000000	diff=5.37637e-12
 -0.000000	 -0.000000	diff=2.19086e-10
  0.000000	  0.000000	diff=1.46885e-11
  0.000000	  0.000000	diff=9.19196e-12
  0.000000	 -0.000000	diff=5.00706e-12
  0.000000	  0.000000	diff=2.05418e-13
  0.000000	 -0.000000	diff=1.93918e-12
  0.000000	  0.000000	diff=8.86154e-12
  0.000000	 -0.000000	diff=6.17457e-12
  0.000000	  0.000000	diff=8.82727e-12
  0.000000	  0.000000	diff=2.14139e-10
  local_diff=7.38917e-10
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=2.01485e-11
  0.000000	  0.000000	diff=2.04904e-11
  0.000000	  0.000000	diff=1.98096e-11
  0.000000	 -0.000000	diff=1.97384e-13
  0.000000	  0.000000	diff=2.32282e-12
  0.000000	  0.000000	diff=1.70783e-11
  0.000008	  0.000008	diff=1.27388e-11
  0.000002	  0.000002	diff=5.27057e-12
  0.000000	  0.000000	diff=1.48591e-12
  0.000000	 -0.000000	diff=1.58924e-11
  0.000000	  0.000000	diff=1.14855e-12
  0.000000	 -0.000000	diff=1.67082e-11
  0.000000	  0.000000	diff=2.1099e-11
  0.000000	 -0.000000	diff=1.83361e-11
  0.000003	  0.000003	diff=1.65822e-11
 -0.000036	 -0.000036	diff=1.80135e-11
  0.000000	 -0.000000	diff=1.19267e-13
  0.000000	  0.000000	diff=2.3562e-13
  0.000000	 -0.000000	diff=4.6286e-14
  0.000000	  0.000000	diff=1.02265e-13
  0.000000	 -0.000000	diff=1.96261e-13
  0.000000	  0.000000	diff=3.16896e-13
 -0.000000	 -0.000000	diff=2.57171e-10
  0.000001	  0.000001	diff=1.06656e-11
  0.000000	 -0.000000	diff=5.0902e-14
  0.000000	  0.000000	diff=1.08408e-13
  0.000000	 -0.000000	diff=1.57338e-14
  0.000000	  0.000000	diff=4.75865e-14
  0.000000	 -0.000000	diff=8.04198e-14
  0.000000	  0.000000	diff=1.46402e-13
 -0.000000	 -0.000000	diff=1.0176e-11
  0.000000	  0.000000	diff=1.42092e-10
  local_diff=6.28893e-10
# W_emb_tgt_char, [2 5]
  0.000014	  0.000014	diff=3.80896e-09
 -0.000018	 -0.000018	diff=5.05794e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000016	  0.000016	diff=1.41123e-09
 -0.000020	 -0.000020	diff=8.61669e-10
 -0.000002	 -0.000002	diff=4.44469e-10
 -0.000005	 -0.000005	diff=1.36061e-09
 -0.000001	 -0.000001	diff=2.55074e-10
 -0.000005	 -0.000005	diff=1.36666e-09
  local_diff=1.00145e-08
# W_h, [2 4]
 -0.000001	 -0.000001	diff=1.53309e-11
  0.000008	  0.000008	diff=1.3559e-11
  0.000002	  0.000002	diff=1.47648e-11
 -0.000009	 -0.000009	diff=1.1455e-11
 -0.000003	 -0.000003	diff=1.24172e-11
  0.000002	  0.000002	diff=1.88802e-11
 -0.000011	 -0.000011	diff=6.12535e-11
 -0.000009	 -0.000009	diff=4.01483e-11
  local_diff=1.87809e-10
# W_soft, [5 2]
 -0.000015	 -0.000015	diff=9.40087e-12
  0.000013	  0.000013	diff=7.12706e-12
 -0.000003	 -0.000003	diff=4.3558e-13
  0.000009	  0.000009	diff=4.51336e-12
 -0.000004	 -0.000004	diff=2.13165e-12
 -0.000019	 -0.000019	diff=7.47335e-12
  0.000012	  0.000012	diff=3.19212e-12
  0.000005	  0.000005	diff=9.17458e-13
  0.000009	  0.000009	diff=4.10997e-12
 -0.000007	 -0.000007	diff=8.87939e-12
  local_diff=4.81808e-11
# W_soft_char, [5 2]
  0.000029	  0.000029	diff=7.20488e-12
 -0.000022	 -0.000022	diff=1.76513e-11
 -0.000003	 -0.000003	diff=1.13227e-11
 -0.000002	 -0.000002	diff=9.96261e-12
 -0.000002	 -0.000002	diff=6.66691e-13
  0.000021	  0.000021	diff=1.7832e-11
 -0.000035	 -0.000035	diff=8.97069e-12
  0.000007	  0.000007	diff=1.37212e-11
  0.000004	  0.000004	diff=1.39336e-11
  0.000004	  0.000004	diff=1.37547e-11
  local_diff=1.1502e-10
# Num params=404, abs_diff=3.15271e-08
Elapsed time is 12.332375 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.65755e-12
  0.000000	  0.000000	diff=1.29581e-12
 -0.000000	 -0.000000	diff=1.12489e-12
  0.000000	  0.000000	diff=8.33908e-13
 -0.000000	 -0.000000	diff=1.58584e-12
 -0.000000	 -0.000000	diff=1.33229e-13
  0.000009	  0.000009	diff=6.43695e-11
  0.000001	  0.000001	diff=3.69682e-11
  0.000000	  0.000000	diff=2.29993e-12
 -0.000000	 -0.000000	diff=1.42528e-12
  0.000000	  0.000000	diff=1.50477e-12
 -0.000000	 -0.000000	diff=4.21353e-13
  0.000000	  0.000000	diff=1.85475e-12
  0.000000	  0.000000	diff=7.62123e-14
 -0.000013	 -0.000013	diff=1.11788e-10
 -0.000001	 -0.000001	diff=6.30961e-11
  0.000000	  0.000000	diff=4.39496e-13
 -0.000000	 -0.000000	diff=6.50857e-13
  0.000000	  0.000000	diff=2.13567e-14
 -0.000000	 -0.000000	diff=6.53473e-13
  0.000000	  0.000000	diff=1.59731e-12
  0.000000	  0.000000	diff=9.56929e-13
 -0.000000	 -0.000000	diff=6.41859e-10
 -0.000000	 -0.000000	diff=1.97198e-12
 -0.000000	 -0.000000	diff=1.07593e-12
  0.000000	  0.000000	diff=8.13595e-13
 -0.000000	 -0.000000	diff=6.22994e-13
  0.000000	  0.000000	diff=1.755e-12
 -0.000000	 -0.000000	diff=3.07261e-12
 -0.000000	 -0.000000	diff=2.05528e-12
  0.000000	  0.000000	diff=6.48628e-12
  0.000000	  0.000000	diff=1.71118e-10
  local_diff=1.12558e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.3678e-12
  0.000000	  0.000000	diff=4.80795e-13
 -0.000000	 -0.000000	diff=1.55885e-12
  0.000000	  0.000000	diff=2.56578e-13
 -0.000000	 -0.000000	diff=2.11417e-12
  0.000000	  0.000000	diff=1.60656e-12
  0.000019	  0.000019	diff=4.43555e-12
  0.000034	  0.000034	diff=1.96974e-12
  0.000000	  0.000000	diff=2.00159e-12
 -0.000000	 -0.000000	diff=8.63526e-13
  0.000000	  0.000000	diff=5.42251e-13
 -0.000000	 -0.000000	diff=2.2975e-12
  0.000000	  0.000000	diff=1.11447e-12
 -0.000000	 -0.000000	diff=6.4292e-13
 -0.000016	 -0.000016	diff=3.56973e-12
 -0.000028	 -0.000028	diff=8.36791e-14
 -0.000000	 -0.000000	diff=7.25497e-13
  0.000000	  0.000000	diff=6.84027e-13
 -0.000000	 -0.000000	diff=9.12278e-13
  0.000000	  0.000000	diff=2.50644e-12
 -0.000000	 -0.000000	diff=4.16109e-13
  0.000000	  0.000000	diff=3.573e-13
  0.000000	  0.000000	diff=3.31453e-10
  0.000001	  0.000001	diff=6.80245e-13
  0.000000	  0.000000	diff=1.73817e-13
 -0.000000	 -0.000000	diff=1.10194e-12
  0.000000	  0.000000	diff=1.67747e-12
 -0.000000	 -0.000000	diff=8.20511e-13
  0.000000	  0.000000	diff=1.80068e-13
 -0.000000	 -0.000000	diff=2.61903e-13
 -0.000000	 -0.000000	diff=7.06261e-13
 -0.000001	 -0.000001	diff=1.37918e-09
  local_diff=1.74674e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.5322e-14
 -0.000000	 -0.000000	diff=4.29494e-13
  0.000000	  0.000000	diff=2.71139e-12
  0.000000	  0.000000	diff=2.74652e-12
  0.000000	  0.000000	diff=2.43033e-13
 -0.000000	 -0.000000	diff=2.30927e-13
 -0.000004	 -0.000004	diff=2.41968e-11
  0.000011	  0.000011	diff=1.59893e-10
 -0.000000	 -0.000000	diff=6.70552e-14
  0.000000	  0.000000	diff=4.22993e-13
 -0.000000	 -0.000000	diff=3.35327e-14
 -0.000000	 -0.000000	diff=1.74189e-12
 -0.000000	 -0.000000	diff=5.58374e-13
  0.000000	  0.000000	diff=1.34219e-12
  0.000010	  0.000010	diff=6.53287e-11
 -0.000030	 -0.000030	diff=2.91306e-10
  0.000000	  0.000000	diff=2.76123e-12
  0.000000	 -0.000000	diff=4.29965e-13
  0.000000	 -0.000000	diff=2.92276e-12
  0.000000	  0.000000	diff=2.31767e-12
  0.000000	 -0.000000	diff=2.85095e-12
  0.000000	  0.000000	diff=2.73076e-12
  0.000000	  0.000000	diff=1.27088e-13
 -0.000000	 -0.000000	diff=2.32253e-12
  0.000000	 -0.000000	diff=3.00646e-12
  0.000000	  0.000000	diff=2.07679e-12
  0.000000	  0.000000	diff=2.59837e-12
  0.000000	 -0.000000	diff=3.09632e-12
  0.000000	  0.000000	diff=2.75389e-12
  0.000000	  0.000000	diff=2.3803e-12
 -0.000000	 -0.000000	diff=7.54692e-13
  0.000000	  0.000000	diff=7.51191e-13
 -0.000000	 -0.000000	diff=6.7072e-13
  0.000000	  0.000000	diff=7.85763e-13
 -0.000000	 -0.000000	diff=6.83106e-13
 -0.000000	 -0.000000	diff=1.00296e-13
 -0.000000	 -0.000000	diff=2.72224e-14
  0.000000	  0.000000	diff=2.57614e-12
  0.000000	  0.000000	diff=2.94268e-10
 -0.000001	 -0.000001	diff=7.8857e-12
  0.000000	  0.000000	diff=1.224e-14
 -0.000000	 -0.000000	diff=3.59936e-14
  0.000000	  0.000000	diff=1.75443e-12
  0.000000	  0.000000	diff=6.15546e-13
  0.000000	  0.000000	diff=2.65384e-13
 -0.000000	 -0.000000	diff=8.6898e-13
 -0.000000	 -0.000000	diff=9.39026e-13
  0.000000	  0.000000	diff=8.64108e-11
  local_diff=9.83057e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.25574e-12
  0.000000	  0.000000	diff=1.97897e-14
  0.000000	  0.000000	diff=1.3571e-12
  0.000000	  0.000000	diff=2.65067e-12
  0.000000	  0.000000	diff=1.09e-12
  0.000000	  0.000000	diff=8.44646e-14
 -0.000006	 -0.000006	diff=3.69612e-12
  0.000011	  0.000011	diff=4.97884e-12
 -0.000000	 -0.000000	diff=2.67507e-12
  0.000000	  0.000000	diff=7.21998e-13
  0.000000	  0.000000	diff=6.33696e-13
  0.000000	  0.000000	diff=3.14573e-13
 -0.000000	 -0.000000	diff=2.51386e-13
  0.000000	  0.000000	diff=3.0412e-13
 -0.000002	 -0.000002	diff=1.37345e-11
  0.000002	  0.000002	diff=6.83746e-11
 -0.000000	 -0.000000	diff=1.34625e-12
  0.000000	  0.000000	diff=1.36194e-12
  0.000000	  0.000000	diff=1.77963e-13
  0.000000	  0.000000	diff=4.2148e-14
  0.000000	  0.000000	diff=9.55591e-13
  0.000000	  0.000000	diff=4.09129e-13
 -0.000000	 -0.000000	diff=5.66299e-10
  0.000001	  0.000001	diff=5.88349e-12
  0.000000	  0.000000	diff=4.02324e-13
  0.000000	 -0.000000	diff=1.12073e-12
 -0.000000	 -0.000000	diff=1.18651e-12
 -0.000000	 -0.000000	diff=5.89438e-14
 -0.000000	 -0.000000	diff=2.43707e-12
 -0.000000	 -0.000000	diff=3.177e-12
  0.000001	  0.000001	diff=8.20761e-13
 -0.000001	 -0.000001	diff=2.60613e-09
  local_diff=3.29395e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000006	 -0.000006	diff=1.90017e-09
  0.000005	  0.000005	diff=5.44586e-09
 -0.000004	 -0.000004	diff=1.04047e-09
  0.000006	  0.000006	diff=3.52292e-09
  local_diff=1.19094e-08
# W_emb_tgt, [2 5]
 -0.000033	 -0.000033	diff=1.49619e-08
  0.000007	  0.000007	diff=4.08775e-09
 -0.000026	 -0.000025	diff=1.02144e-08
  0.000006	  0.000006	diff=2.94117e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=9.4055e-10
  0.000001	  0.000001	diff=3.48284e-10
 -0.000004	 -0.000004	diff=2.00809e-09
  0.000001	  0.000001	diff=4.09503e-10
  local_diff=3.59117e-08
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=1.01914e-12
  0.000000	  0.000000	diff=2.24288e-14
  0.000000	  0.000000	diff=7.89472e-14
  0.000000	  0.000000	diff=3.44207e-15
  0.000000	 -0.000000	diff=5.32089e-13
  0.000000	  0.000000	diff=1.39595e-14
 -0.000000	 -0.000000	diff=7.42419e-13
 -0.000000	 -0.000000	diff=7.27079e-13
  0.000000	  0.000000	diff=2.58179e-12
  0.000000	  0.000000	diff=3.68606e-14
  0.000000	 -0.000000	diff=2.9188e-12
  0.000000	 -0.000000	diff=2.67154e-15
  0.000000	  0.000000	diff=2.59743e-12
  0.000000	  0.000000	diff=2.81167e-12
 -0.000000	 -0.000000	diff=1.32227e-13
  0.000000	  0.000000	diff=5.8962e-13
  0.000000	  0.000000	diff=4.84939e-15
  0.000000	 -0.000000	diff=3.98539e-16
  0.000000	 -0.000000	diff=5.39693e-15
  0.000000	  0.000000	diff=1.2208e-16
  0.000000	 -0.000000	diff=7.05437e-16
  0.000000	 -0.000000	diff=2.53632e-16
  0.000000	 -0.000000	diff=2.17201e-12
  0.000000	 -0.000000	diff=5.45636e-13
  0.000000	  0.000000	diff=4.10084e-16
  0.000000	  0.000000	diff=6.40115e-17
  0.000000	 -0.000000	diff=8.71803e-17
  0.000000	 -0.000000	diff=1.24682e-17
  0.000000	  0.000000	diff=3.49643e-16
  0.000000	  0.000000	diff=4.31127e-17
  0.000000	  0.000000	diff=1.27525e-12
  0.000000	  0.000000	diff=1.15836e-13
  local_diff=1.8932e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.2786e-15
  0.000000	 -0.000000	diff=8.46302e-15
  0.000000	 -0.000000	diff=3.95752e-16
  0.000000	 -0.000000	diff=4.68064e-16
  0.000000	 -0.000000	diff=2.85657e-15
  0.000000	 -0.000000	diff=6.53011e-15
  0.000000	  0.000000	diff=2.77339e-14
  0.000000	  0.000000	diff=7.55619e-13
  0.000000	 -0.000000	diff=3.25575e-16
  0.000000	 -0.000000	diff=3.05993e-15
  0.000000	  0.000000	diff=3.69473e-17
  0.000000	  0.000000	diff=1.67064e-16
  0.000000	 -0.000000	diff=5.53103e-16
  0.000000	 -0.000000	diff=2.56132e-15
  0.000000	 -0.000000	diff=1.88381e-12
  0.000000	  0.000000	diff=1.42269e-14
  0.000000	  0.000000	diff=1.33237e-17
  0.000000	  0.000000	diff=3.60047e-17
  0.000000	  0.000000	diff=3.51625e-17
  0.000000	  0.000000	diff=2.82156e-17
  0.000000	  0.000000	diff=3.71322e-17
  0.000000	  0.000000	diff=6.4609e-17
  0.000000	 -0.000000	diff=1.81051e-12
  0.000000	 -0.000000	diff=1.56907e-12
  0.000000	  0.000000	diff=1.76265e-17
  0.000000	  0.000000	diff=1.27749e-17
  0.000000	  0.000000	diff=3.23551e-17
  0.000000	  0.000000	diff=5.32748e-17
  0.000000	  0.000000	diff=4.27736e-17
  0.000000	  0.000000	diff=6.69162e-17
  0.000000	  0.000000	diff=2.81745e-12
  0.000000	 -0.000000	diff=3.23268e-13
  local_diff=9.23183e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.31801e-17
  0.000000	  0.000000	diff=1.56357e-16
  0.000000	 -0.000000	diff=3.57352e-18
  0.000000	  0.000000	diff=4.80794e-17
  0.000000	 -0.000000	diff=2.37948e-17
  0.000000	  0.000000	diff=1.46745e-16
  0.000000	  0.000000	diff=1.86641e-12
 -0.000000	 -0.000000	diff=1.7252e-12
  0.000000	 -0.000000	diff=8.60468e-17
  0.000000	  0.000000	diff=3.92729e-16
  0.000000	 -0.000000	diff=6.34878e-18
  0.000000	  0.000000	diff=8.82984e-17
  0.000000	 -0.000000	diff=6.14625e-17
  0.000000	  0.000000	diff=3.82883e-16
  0.000000	  0.000000	diff=3.6107e-13
 -0.000000	 -0.000000	diff=2.35203e-12
  0.000000	 -0.000000	diff=6.15797e-20
  0.000000	  0.000000	diff=3.36071e-19
  0.000000	 -0.000000	diff=3.19911e-19
  0.000000	  0.000000	diff=5.66078e-19
  0.000000	 -0.000000	diff=3.67438e-19
  0.000000	  0.000000	diff=9.22967e-19
  0.000000	 -0.000000	diff=8.63803e-13
  0.000000	  0.000000	diff=9.4612e-13
  0.000000	 -0.000000	diff=5.38401e-19
  0.000000	  0.000000	diff=4.35971e-18
  0.000000	 -0.000000	diff=5.08008e-19
  0.000000	  0.000000	diff=2.61707e-18
  0.000000	 -0.000000	diff=1.34001e-18
  0.000000	  0.000000	diff=6.73557e-18
  0.000000	  0.000000	diff=4.41771e-13
  0.000000	 -0.000000	diff=1.22152e-12
  local_diff=9.77937e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.266e-12
  0.000000	  0.000000	diff=2.41214e-12
 -0.000000	 -0.000000	diff=7.06102e-13
  0.000000	  0.000000	diff=8.38701e-13
 -0.000000	 -0.000000	diff=2.40576e-12
  0.000000	  0.000000	diff=2.80497e-12
 -0.000000	 -0.000000	diff=6.85732e-13
  0.000000	  0.000000	diff=1.76515e-12
  local_diff=1.28846e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=5.97193e-13
  0.000000	  0.000000	diff=1.06578e-13
  0.000000	  0.000000	diff=1.22801e-13
  0.000000	  0.000000	diff=1.73413e-12
 -0.000000	 -0.000000	diff=1.38883e-12
  0.000000	  0.000000	diff=1.74008e-12
  0.000007	  0.000007	diff=6.45305e-11
  0.000004	  0.000004	diff=9.51192e-11
 -0.000000	 -0.000000	diff=2.93846e-12
 -0.000000	 -0.000000	diff=9.3209e-13
 -0.000000	 -0.000000	diff=4.37476e-13
  0.000000	  0.000000	diff=1.18342e-12
  0.000000	  0.000000	diff=2.41185e-13
 -0.000000	 -0.000000	diff=1.33354e-12
  0.000031	  0.000031	diff=3.5437e-10
  0.000016	  0.000016	diff=3.7389e-10
  0.000000	  0.000000	diff=1.13869e-13
 -0.000000	 -0.000000	diff=3.32606e-12
 -0.000000	 -0.000000	diff=1.70796e-12
  0.000000	  0.000000	diff=9.38879e-13
  0.000000	  0.000000	diff=7.35911e-13
 -0.000000	 -0.000000	diff=9.66138e-13
  0.000000	  0.000000	diff=2.79677e-10
  0.000000	  0.000000	diff=2.24686e-12
  0.000000	  0.000000	diff=1.2886e-13
 -0.000000	 -0.000000	diff=2.04371e-12
  0.000000	  0.000000	diff=3.94302e-12
 -0.000000	 -0.000000	diff=3.29593e-13
  0.000000	  0.000000	diff=2.74677e-12
 -0.000000	 -0.000000	diff=1.55161e-13
  0.000000	  0.000000	diff=4.34841e-13
  0.000000	  0.000000	diff=1.9798e-11
  local_diff=1.21996e-09
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=2.29449e-12
  0.000000	  0.000000	diff=1.277e-12
  0.000000	  0.000000	diff=3.33326e-12
  0.000000	  0.000000	diff=5.22558e-13
 -0.000000	 -0.000000	diff=2.62098e-12
  0.000000	  0.000000	diff=8.2996e-13
 -0.000001	 -0.000001	diff=7.88138e-13
 -0.000000	 -0.000000	diff=1.1478e-12
  0.000000	  0.000000	diff=1.55643e-12
 -0.000000	 -0.000000	diff=1.0243e-12
 -0.000000	 -0.000000	diff=1.48337e-12
 -0.000000	 -0.000000	diff=3.29196e-13
  0.000000	  0.000000	diff=3.59174e-13
 -0.000000	 -0.000000	diff=7.72971e-13
  0.000008	  0.000008	diff=1.56073e-13
  0.000009	  0.000009	diff=3.96904e-12
  0.000000	  0.000000	diff=8.18311e-13
  0.000000	 -0.000000	diff=2.41221e-12
  0.000000	 -0.000000	diff=8.13626e-13
  0.000000	 -0.000000	diff=8.33967e-13
  0.000000	  0.000000	diff=1.9966e-13
  0.000000	 -0.000000	diff=2.5145e-12
  0.000000	  0.000000	diff=1.34088e-10
  0.000000	  0.000000	diff=1.10796e-12
  0.000000	  0.000000	diff=1.83608e-12
  0.000000	 -0.000000	diff=3.1153e-12
  0.000000	 -0.000000	diff=6.32559e-13
  0.000000	 -0.000000	diff=1.10532e-12
  0.000000	  0.000000	diff=1.5619e-12
  0.000000	 -0.000000	diff=3.72058e-12
  0.000000	  0.000000	diff=1.15923e-13
  0.000000	  0.000000	diff=1.25089e-10
  local_diff=3.0243e-10
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=4.64131e-13
  0.000000	  0.000000	diff=1.26531e-12
  0.000000	  0.000000	diff=1.09981e-12
  0.000000	  0.000000	diff=4.23785e-13
  0.000000	  0.000000	diff=3.36967e-12
  0.000000	  0.000000	diff=6.51269e-13
  0.000002	  0.000002	diff=2.16342e-13
  0.000002	  0.000002	diff=6.6641e-14
 -0.000000	 -0.000000	diff=8.98499e-13
 -0.000000	 -0.000000	diff=1.39023e-12
  0.000000	 -0.000000	diff=2.91549e-12
  0.000000	 -0.000000	diff=1.22132e-12
 -0.000000	 -0.000000	diff=9.05423e-13
 -0.000000	 -0.000000	diff=9.09778e-13
 -0.000010	 -0.000010	diff=3.55491e-12
 -0.000008	 -0.000008	diff=6.29396e-13
  0.000000	  0.000000	diff=3.85296e-14
  0.000000	  0.000000	diff=4.26546e-14
  0.000000	  0.000000	diff=3.56318e-14
  0.000000	  0.000000	diff=2.36492e-14
  0.000000	  0.000000	diff=5.37917e-14
  0.000000	  0.000000	diff=5.29706e-14
  0.000000	  0.000000	diff=1.75182e-10
  0.000000	  0.000000	diff=1.85377e-12
  0.000000	  0.000000	diff=1.84886e-14
  0.000000	  0.000000	diff=2.13967e-14
  0.000000	  0.000000	diff=1.84658e-14
  0.000000	  0.000000	diff=1.22281e-14
  0.000000	  0.000000	diff=2.77312e-14
  0.000000	  0.000000	diff=2.76601e-14
  0.000000	  0.000000	diff=2.38698e-12
  0.000000	  0.000000	diff=7.97213e-11
  local_diff=2.795e-10
# W_emb_tgt_char, [2 5]
 -0.000002	 -0.000002	diff=8.3434e-10
 -0.000007	 -0.000007	diff=1.30337e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.92618e-10
 -0.000006	 -0.000006	diff=1.24992e-09
 -0.000001	 -0.000001	diff=2.508e-10
 -0.000003	 -0.000003	diff=7.44068e-10
 -0.000002	 -0.000002	diff=2.74219e-10
 -0.000003	 -0.000003	diff=9.4973e-10
  local_diff=6.19906e-09
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.77788e-17
  0.000000	  0.000000	diff=3.42525e-17
  0.000000	  0.000000	diff=7.97432e-17
  0.000000	 -0.000000	diff=9.76569e-17
  local_diff=2.39431e-16
# W_h, [2 4]
 -0.000023	 -0.000023	diff=2.59804e-13
  0.000033	  0.000033	diff=2.78786e-12
  0.000028	  0.000028	diff=1.84589e-12
 -0.000039	 -0.000039	diff=2.31439e-12
 -0.000008	 -0.000008	diff=4.00818e-12
  0.000011	  0.000011	diff=6.43802e-12
  0.000013	  0.000013	diff=1.34302e-10
 -0.000025	 -0.000025	diff=1.47412e-10
  local_diff=2.99368e-10
# W_h_char, [2 4]
 -0.000000	 -0.000000	diff=1.48178e-12
 -0.000000	 -0.000000	diff=2.1346e-12
  0.000000	  0.000000	diff=6.75892e-14
  0.000000	  0.000000	diff=1.63052e-12
 -0.000000	 -0.000000	diff=1.03302e-12
 -0.000000	 -0.000000	diff=2.4781e-12
  0.000000	  0.000000	diff=1.93709e-13
  0.000000	  0.000000	diff=2.01078e-12
  local_diff=1.10301e-11
# W_soft, [5 2]
  0.000006	  0.000006	diff=3.56454e-13
  0.000003	  0.000003	diff=4.97887e-13
 -0.000016	 -0.000016	diff=2.91177e-12
  0.000004	  0.000004	diff=8.56274e-13
  0.000002	  0.000002	diff=1.77486e-12
 -0.000017	 -0.000017	diff=3.07593e-13
  0.000011	  0.000011	diff=4.30092e-13
 -0.000003	 -0.000003	diff=2.76554e-12
  0.000008	  0.000008	diff=1.05944e-13
  0.000001	  0.000001	diff=3.05075e-13
  local_diff=1.03115e-11
# W_soft_char, [5 2]
  0.000003	  0.000003	diff=1.27732e-12
 -0.000002	 -0.000002	diff=2.28717e-12
 -0.000001	 -0.000001	diff=1.38603e-12
 -0.000000	 -0.000000	diff=2.00461e-12
 -0.000000	 -0.000000	diff=1.28385e-12
  0.000002	  0.000002	diff=1.20796e-12
 -0.000004	 -0.000004	diff=4.40247e-13
  0.000001	  0.000001	diff=2.80182e-12
  0.000000	  0.000000	diff=2.25851e-12
  0.000000	  0.000000	diff=1.81797e-12
  local_diff=1.67655e-11
# Num params=416, abs_diff=6.33597e-08
Elapsed time is 12.532382 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'normLocalAttn', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 1
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.65755e-12
  0.000000	  0.000000	diff=1.29581e-12
 -0.000000	 -0.000000	diff=1.12489e-12
  0.000000	  0.000000	diff=8.33908e-13
 -0.000000	 -0.000000	diff=1.58584e-12
 -0.000000	 -0.000000	diff=1.33229e-13
  0.000009	  0.000009	diff=6.43695e-11
  0.000001	  0.000001	diff=3.69682e-11
  0.000000	  0.000000	diff=2.29993e-12
 -0.000000	 -0.000000	diff=1.42528e-12
  0.000000	  0.000000	diff=1.50477e-12
 -0.000000	 -0.000000	diff=4.21353e-13
  0.000000	  0.000000	diff=1.85475e-12
  0.000000	  0.000000	diff=7.62123e-14
 -0.000013	 -0.000013	diff=1.11788e-10
 -0.000001	 -0.000001	diff=6.30961e-11
  0.000000	  0.000000	diff=4.39496e-13
 -0.000000	 -0.000000	diff=6.50857e-13
  0.000000	  0.000000	diff=2.13567e-14
 -0.000000	 -0.000000	diff=6.53473e-13
  0.000000	  0.000000	diff=1.59731e-12
  0.000000	  0.000000	diff=9.56929e-13
 -0.000000	 -0.000000	diff=6.41859e-10
 -0.000000	 -0.000000	diff=1.97198e-12
 -0.000000	 -0.000000	diff=1.07593e-12
  0.000000	  0.000000	diff=8.13595e-13
 -0.000000	 -0.000000	diff=6.22994e-13
  0.000000	  0.000000	diff=1.755e-12
 -0.000000	 -0.000000	diff=3.07261e-12
 -0.000000	 -0.000000	diff=2.05528e-12
  0.000000	  0.000000	diff=6.48628e-12
  0.000000	  0.000000	diff=1.71118e-10
  local_diff=1.12558e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.3678e-12
  0.000000	  0.000000	diff=4.80795e-13
 -0.000000	 -0.000000	diff=1.55885e-12
  0.000000	  0.000000	diff=2.56578e-13
 -0.000000	 -0.000000	diff=2.11417e-12
  0.000000	  0.000000	diff=1.60656e-12
  0.000019	  0.000019	diff=4.43555e-12
  0.000034	  0.000034	diff=1.96974e-12
  0.000000	  0.000000	diff=2.00159e-12
 -0.000000	 -0.000000	diff=8.63526e-13
  0.000000	  0.000000	diff=5.42251e-13
 -0.000000	 -0.000000	diff=2.2975e-12
  0.000000	  0.000000	diff=1.11447e-12
 -0.000000	 -0.000000	diff=6.4292e-13
 -0.000016	 -0.000016	diff=3.56973e-12
 -0.000028	 -0.000028	diff=8.36791e-14
 -0.000000	 -0.000000	diff=7.25497e-13
  0.000000	  0.000000	diff=6.84027e-13
 -0.000000	 -0.000000	diff=9.12278e-13
  0.000000	  0.000000	diff=2.50644e-12
 -0.000000	 -0.000000	diff=4.16109e-13
  0.000000	  0.000000	diff=3.573e-13
  0.000000	  0.000000	diff=3.31453e-10
  0.000001	  0.000001	diff=6.80245e-13
  0.000000	  0.000000	diff=1.73817e-13
 -0.000000	 -0.000000	diff=1.10194e-12
  0.000000	  0.000000	diff=1.67747e-12
 -0.000000	 -0.000000	diff=8.20511e-13
  0.000000	  0.000000	diff=1.80068e-13
 -0.000000	 -0.000000	diff=2.61903e-13
 -0.000000	 -0.000000	diff=7.06261e-13
 -0.000001	 -0.000001	diff=1.37918e-09
  local_diff=1.74674e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=2.5322e-14
 -0.000000	 -0.000000	diff=4.29494e-13
  0.000000	  0.000000	diff=2.71139e-12
  0.000000	  0.000000	diff=2.74652e-12
  0.000000	  0.000000	diff=2.43033e-13
 -0.000000	 -0.000000	diff=2.30927e-13
 -0.000004	 -0.000004	diff=2.41968e-11
  0.000011	  0.000011	diff=1.59893e-10
 -0.000000	 -0.000000	diff=6.70552e-14
  0.000000	  0.000000	diff=4.22993e-13
 -0.000000	 -0.000000	diff=3.35327e-14
 -0.000000	 -0.000000	diff=1.74189e-12
 -0.000000	 -0.000000	diff=5.58374e-13
  0.000000	  0.000000	diff=1.34219e-12
  0.000010	  0.000010	diff=6.53287e-11
 -0.000030	 -0.000030	diff=2.91306e-10
  0.000000	  0.000000	diff=2.76123e-12
  0.000000	 -0.000000	diff=4.29965e-13
  0.000000	 -0.000000	diff=2.92276e-12
  0.000000	  0.000000	diff=2.31767e-12
  0.000000	 -0.000000	diff=2.85095e-12
  0.000000	  0.000000	diff=2.73076e-12
  0.000000	  0.000000	diff=1.27088e-13
 -0.000000	 -0.000000	diff=2.32253e-12
  0.000000	 -0.000000	diff=3.00646e-12
  0.000000	  0.000000	diff=2.07679e-12
  0.000000	  0.000000	diff=2.59837e-12
  0.000000	 -0.000000	diff=3.09632e-12
  0.000000	  0.000000	diff=2.75389e-12
  0.000000	  0.000000	diff=2.3803e-12
 -0.000000	 -0.000000	diff=7.54692e-13
  0.000000	  0.000000	diff=7.51191e-13
 -0.000000	 -0.000000	diff=6.7072e-13
  0.000000	  0.000000	diff=7.85763e-13
 -0.000000	 -0.000000	diff=6.83106e-13
 -0.000000	 -0.000000	diff=1.00296e-13
 -0.000000	 -0.000000	diff=2.72224e-14
  0.000000	  0.000000	diff=2.57614e-12
  0.000000	  0.000000	diff=2.94268e-10
 -0.000001	 -0.000001	diff=7.8857e-12
  0.000000	  0.000000	diff=1.224e-14
 -0.000000	 -0.000000	diff=3.59936e-14
  0.000000	  0.000000	diff=1.75443e-12
  0.000000	  0.000000	diff=6.15546e-13
  0.000000	  0.000000	diff=2.65384e-13
 -0.000000	 -0.000000	diff=8.6898e-13
 -0.000000	 -0.000000	diff=9.39026e-13
  0.000000	  0.000000	diff=8.64108e-11
  local_diff=9.83057e-10
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.25574e-12
  0.000000	  0.000000	diff=1.97897e-14
  0.000000	  0.000000	diff=1.3571e-12
  0.000000	  0.000000	diff=2.65067e-12
  0.000000	  0.000000	diff=1.09e-12
  0.000000	  0.000000	diff=8.44646e-14
 -0.000006	 -0.000006	diff=3.69612e-12
  0.000011	  0.000011	diff=4.97884e-12
 -0.000000	 -0.000000	diff=2.67507e-12
  0.000000	  0.000000	diff=7.21998e-13
  0.000000	  0.000000	diff=6.33696e-13
  0.000000	  0.000000	diff=3.14573e-13
 -0.000000	 -0.000000	diff=2.51386e-13
  0.000000	  0.000000	diff=3.0412e-13
 -0.000002	 -0.000002	diff=1.37345e-11
  0.000002	  0.000002	diff=6.83746e-11
 -0.000000	 -0.000000	diff=1.34625e-12
  0.000000	  0.000000	diff=1.36194e-12
  0.000000	  0.000000	diff=1.77963e-13
  0.000000	  0.000000	diff=4.2148e-14
  0.000000	  0.000000	diff=9.55591e-13
  0.000000	  0.000000	diff=4.09129e-13
 -0.000000	 -0.000000	diff=5.66299e-10
  0.000001	  0.000001	diff=5.88349e-12
  0.000000	  0.000000	diff=4.02324e-13
  0.000000	 -0.000000	diff=1.12073e-12
 -0.000000	 -0.000000	diff=1.18651e-12
 -0.000000	 -0.000000	diff=5.89438e-14
 -0.000000	 -0.000000	diff=2.43707e-12
 -0.000000	 -0.000000	diff=3.177e-12
  0.000001	  0.000001	diff=8.20761e-13
 -0.000001	 -0.000001	diff=2.60613e-09
  local_diff=3.29395e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000006	 -0.000006	diff=1.90017e-09
  0.000005	  0.000005	diff=5.44586e-09
 -0.000004	 -0.000004	diff=1.04047e-09
  0.000006	  0.000006	diff=3.52292e-09
  local_diff=1.19094e-08
# W_emb_tgt, [2 5]
 -0.000033	 -0.000033	diff=1.49619e-08
  0.000007	  0.000007	diff=4.08775e-09
 -0.000026	 -0.000025	diff=1.02144e-08
  0.000006	  0.000006	diff=2.94117e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=9.4055e-10
  0.000001	  0.000001	diff=3.48284e-10
 -0.000004	 -0.000004	diff=2.00809e-09
  0.000001	  0.000001	diff=4.09503e-10
  local_diff=3.59117e-08
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=1.01914e-12
  0.000000	  0.000000	diff=2.24288e-14
  0.000000	  0.000000	diff=7.89472e-14
  0.000000	  0.000000	diff=3.44207e-15
  0.000000	 -0.000000	diff=5.32089e-13
  0.000000	  0.000000	diff=1.39595e-14
 -0.000000	 -0.000000	diff=7.42419e-13
 -0.000000	 -0.000000	diff=7.27079e-13
  0.000000	  0.000000	diff=2.58179e-12
  0.000000	  0.000000	diff=3.68606e-14
  0.000000	 -0.000000	diff=2.9188e-12
  0.000000	 -0.000000	diff=2.67154e-15
  0.000000	  0.000000	diff=2.59743e-12
  0.000000	  0.000000	diff=2.81167e-12
 -0.000000	 -0.000000	diff=1.32227e-13
  0.000000	  0.000000	diff=5.8962e-13
  0.000000	  0.000000	diff=4.84939e-15
  0.000000	 -0.000000	diff=3.98539e-16
  0.000000	 -0.000000	diff=5.39693e-15
  0.000000	  0.000000	diff=1.2208e-16
  0.000000	 -0.000000	diff=7.05437e-16
  0.000000	 -0.000000	diff=2.53632e-16
  0.000000	 -0.000000	diff=2.17201e-12
  0.000000	 -0.000000	diff=5.45636e-13
  0.000000	  0.000000	diff=4.10084e-16
  0.000000	  0.000000	diff=6.40115e-17
  0.000000	 -0.000000	diff=8.71803e-17
  0.000000	 -0.000000	diff=1.24682e-17
  0.000000	  0.000000	diff=3.49643e-16
  0.000000	  0.000000	diff=4.31127e-17
  0.000000	  0.000000	diff=1.27525e-12
  0.000000	  0.000000	diff=1.15836e-13
  local_diff=1.8932e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.2786e-15
  0.000000	 -0.000000	diff=8.46302e-15
  0.000000	 -0.000000	diff=3.95752e-16
  0.000000	 -0.000000	diff=4.68064e-16
  0.000000	 -0.000000	diff=2.85657e-15
  0.000000	 -0.000000	diff=6.53011e-15
  0.000000	  0.000000	diff=2.77339e-14
  0.000000	  0.000000	diff=7.55619e-13
  0.000000	 -0.000000	diff=3.25575e-16
  0.000000	 -0.000000	diff=3.05993e-15
  0.000000	  0.000000	diff=3.69473e-17
  0.000000	  0.000000	diff=1.67064e-16
  0.000000	 -0.000000	diff=5.53103e-16
  0.000000	 -0.000000	diff=2.56132e-15
  0.000000	 -0.000000	diff=1.88381e-12
  0.000000	  0.000000	diff=1.42269e-14
  0.000000	  0.000000	diff=1.33237e-17
  0.000000	  0.000000	diff=3.60047e-17
  0.000000	  0.000000	diff=3.51625e-17
  0.000000	  0.000000	diff=2.82156e-17
  0.000000	  0.000000	diff=3.71322e-17
  0.000000	  0.000000	diff=6.4609e-17
  0.000000	 -0.000000	diff=1.81051e-12
  0.000000	 -0.000000	diff=1.56907e-12
  0.000000	  0.000000	diff=1.76265e-17
  0.000000	  0.000000	diff=1.27749e-17
  0.000000	  0.000000	diff=3.23551e-17
  0.000000	  0.000000	diff=5.32748e-17
  0.000000	  0.000000	diff=4.27736e-17
  0.000000	  0.000000	diff=6.69162e-17
  0.000000	  0.000000	diff=2.81745e-12
  0.000000	 -0.000000	diff=3.23268e-13
  local_diff=9.23183e-12
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.31801e-17
  0.000000	  0.000000	diff=1.56357e-16
  0.000000	 -0.000000	diff=3.57352e-18
  0.000000	  0.000000	diff=4.80794e-17
  0.000000	 -0.000000	diff=2.37948e-17
  0.000000	  0.000000	diff=1.46745e-16
  0.000000	  0.000000	diff=1.86641e-12
 -0.000000	 -0.000000	diff=1.7252e-12
  0.000000	 -0.000000	diff=8.60468e-17
  0.000000	  0.000000	diff=3.92729e-16
  0.000000	 -0.000000	diff=6.34878e-18
  0.000000	  0.000000	diff=8.82984e-17
  0.000000	 -0.000000	diff=6.14625e-17
  0.000000	  0.000000	diff=3.82883e-16
  0.000000	  0.000000	diff=3.6107e-13
 -0.000000	 -0.000000	diff=2.35203e-12
  0.000000	 -0.000000	diff=6.15797e-20
  0.000000	  0.000000	diff=3.36071e-19
  0.000000	 -0.000000	diff=3.19911e-19
  0.000000	  0.000000	diff=5.66078e-19
  0.000000	 -0.000000	diff=3.67438e-19
  0.000000	  0.000000	diff=9.22967e-19
  0.000000	 -0.000000	diff=8.63803e-13
  0.000000	  0.000000	diff=9.4612e-13
  0.000000	 -0.000000	diff=5.38401e-19
  0.000000	  0.000000	diff=4.35971e-18
  0.000000	 -0.000000	diff=5.08008e-19
  0.000000	  0.000000	diff=2.61707e-18
  0.000000	 -0.000000	diff=1.34001e-18
  0.000000	  0.000000	diff=6.73557e-18
  0.000000	  0.000000	diff=4.41771e-13
  0.000000	 -0.000000	diff=1.22152e-12
  local_diff=9.77937e-12
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.266e-12
  0.000000	  0.000000	diff=2.41214e-12
 -0.000000	 -0.000000	diff=7.06102e-13
  0.000000	  0.000000	diff=8.38701e-13
 -0.000000	 -0.000000	diff=2.40576e-12
  0.000000	  0.000000	diff=2.80497e-12
 -0.000000	 -0.000000	diff=6.85732e-13
  0.000000	  0.000000	diff=1.76515e-12
  local_diff=1.28846e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=5.97193e-13
  0.000000	  0.000000	diff=1.06578e-13
  0.000000	  0.000000	diff=1.22801e-13
  0.000000	  0.000000	diff=1.73413e-12
 -0.000000	 -0.000000	diff=1.38883e-12
  0.000000	  0.000000	diff=1.74008e-12
  0.000007	  0.000007	diff=6.45305e-11
  0.000004	  0.000004	diff=9.51192e-11
 -0.000000	 -0.000000	diff=2.93846e-12
 -0.000000	 -0.000000	diff=9.3209e-13
 -0.000000	 -0.000000	diff=4.37476e-13
  0.000000	  0.000000	diff=1.18342e-12
  0.000000	  0.000000	diff=2.41185e-13
 -0.000000	 -0.000000	diff=1.33354e-12
  0.000031	  0.000031	diff=3.5437e-10
  0.000016	  0.000016	diff=3.7389e-10
  0.000000	  0.000000	diff=1.13869e-13
 -0.000000	 -0.000000	diff=3.32606e-12
 -0.000000	 -0.000000	diff=1.70796e-12
  0.000000	  0.000000	diff=9.38879e-13
  0.000000	  0.000000	diff=7.35911e-13
 -0.000000	 -0.000000	diff=9.66138e-13
  0.000000	  0.000000	diff=2.79677e-10
  0.000000	  0.000000	diff=2.24686e-12
  0.000000	  0.000000	diff=1.2886e-13
 -0.000000	 -0.000000	diff=2.04371e-12
  0.000000	  0.000000	diff=3.94302e-12
 -0.000000	 -0.000000	diff=3.29593e-13
  0.000000	  0.000000	diff=2.74677e-12
 -0.000000	 -0.000000	diff=1.55161e-13
  0.000000	  0.000000	diff=4.34841e-13
  0.000000	  0.000000	diff=1.9798e-11
  local_diff=1.21996e-09
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=2.29449e-12
  0.000000	  0.000000	diff=1.277e-12
  0.000000	  0.000000	diff=3.33326e-12
  0.000000	  0.000000	diff=5.22558e-13
 -0.000000	 -0.000000	diff=2.62098e-12
  0.000000	  0.000000	diff=8.2996e-13
 -0.000001	 -0.000001	diff=7.88138e-13
 -0.000000	 -0.000000	diff=1.1478e-12
  0.000000	  0.000000	diff=1.55643e-12
 -0.000000	 -0.000000	diff=1.0243e-12
 -0.000000	 -0.000000	diff=1.48337e-12
 -0.000000	 -0.000000	diff=3.29196e-13
  0.000000	  0.000000	diff=3.59174e-13
 -0.000000	 -0.000000	diff=7.72971e-13
  0.000008	  0.000008	diff=1.56073e-13
  0.000009	  0.000009	diff=3.96904e-12
  0.000000	  0.000000	diff=8.18311e-13
  0.000000	 -0.000000	diff=2.41221e-12
  0.000000	 -0.000000	diff=8.13626e-13
  0.000000	 -0.000000	diff=8.33967e-13
  0.000000	  0.000000	diff=1.9966e-13
  0.000000	 -0.000000	diff=2.5145e-12
  0.000000	  0.000000	diff=1.34088e-10
  0.000000	  0.000000	diff=1.10796e-12
  0.000000	  0.000000	diff=1.83608e-12
  0.000000	 -0.000000	diff=3.1153e-12
  0.000000	 -0.000000	diff=6.32559e-13
  0.000000	 -0.000000	diff=1.10532e-12
  0.000000	  0.000000	diff=1.5619e-12
  0.000000	 -0.000000	diff=3.72058e-12
  0.000000	  0.000000	diff=1.15923e-13
  0.000000	  0.000000	diff=1.25089e-10
  local_diff=3.0243e-10
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=4.64131e-13
  0.000000	  0.000000	diff=1.26531e-12
  0.000000	  0.000000	diff=1.09981e-12
  0.000000	  0.000000	diff=4.23785e-13
  0.000000	  0.000000	diff=3.36967e-12
  0.000000	  0.000000	diff=6.51269e-13
  0.000002	  0.000002	diff=2.16342e-13
  0.000002	  0.000002	diff=6.6641e-14
 -0.000000	 -0.000000	diff=8.98499e-13
 -0.000000	 -0.000000	diff=1.39023e-12
  0.000000	 -0.000000	diff=2.91549e-12
  0.000000	 -0.000000	diff=1.22132e-12
 -0.000000	 -0.000000	diff=9.05423e-13
 -0.000000	 -0.000000	diff=9.09778e-13
 -0.000010	 -0.000010	diff=3.55491e-12
 -0.000008	 -0.000008	diff=6.29396e-13
  0.000000	  0.000000	diff=3.85296e-14
  0.000000	  0.000000	diff=4.26546e-14
  0.000000	  0.000000	diff=3.56318e-14
  0.000000	  0.000000	diff=2.36492e-14
  0.000000	  0.000000	diff=5.37917e-14
  0.000000	  0.000000	diff=5.29706e-14
  0.000000	  0.000000	diff=1.75182e-10
  0.000000	  0.000000	diff=1.85377e-12
  0.000000	  0.000000	diff=1.84886e-14
  0.000000	  0.000000	diff=2.13967e-14
  0.000000	  0.000000	diff=1.84658e-14
  0.000000	  0.000000	diff=1.22281e-14
  0.000000	  0.000000	diff=2.77312e-14
  0.000000	  0.000000	diff=2.76601e-14
  0.000000	  0.000000	diff=2.38698e-12
  0.000000	  0.000000	diff=7.97213e-11
  local_diff=2.795e-10
# W_emb_tgt_char, [2 5]
 -0.000002	 -0.000002	diff=8.3434e-10
 -0.000007	 -0.000007	diff=1.30337e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000001	 -0.000001	diff=5.92618e-10
 -0.000006	 -0.000006	diff=1.24992e-09
 -0.000001	 -0.000001	diff=2.508e-10
 -0.000003	 -0.000003	diff=7.44068e-10
 -0.000002	 -0.000002	diff=2.74219e-10
 -0.000003	 -0.000003	diff=9.4973e-10
  local_diff=6.19906e-09
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.77788e-17
  0.000000	  0.000000	diff=3.42525e-17
  0.000000	  0.000000	diff=7.97432e-17
  0.000000	 -0.000000	diff=9.76569e-17
  local_diff=2.39431e-16
# W_h, [2 4]
 -0.000023	 -0.000023	diff=2.59804e-13
  0.000033	  0.000033	diff=2.78786e-12
  0.000028	  0.000028	diff=1.84589e-12
 -0.000039	 -0.000039	diff=2.31439e-12
 -0.000008	 -0.000008	diff=4.00818e-12
  0.000011	  0.000011	diff=6.43802e-12
  0.000013	  0.000013	diff=1.34302e-10
 -0.000025	 -0.000025	diff=1.47412e-10
  local_diff=2.99368e-10
# W_h_char, [2 4]
 -0.000000	 -0.000000	diff=1.48178e-12
 -0.000000	 -0.000000	diff=2.1346e-12
  0.000000	  0.000000	diff=6.75892e-14
  0.000000	  0.000000	diff=1.63052e-12
 -0.000000	 -0.000000	diff=1.03302e-12
 -0.000000	 -0.000000	diff=2.4781e-12
  0.000000	  0.000000	diff=1.93709e-13
  0.000000	  0.000000	diff=2.01078e-12
  local_diff=1.10301e-11
# W_soft, [5 2]
  0.000006	  0.000006	diff=3.56454e-13
  0.000003	  0.000003	diff=4.97887e-13
 -0.000016	 -0.000016	diff=2.91177e-12
  0.000004	  0.000004	diff=8.56274e-13
  0.000002	  0.000002	diff=1.77486e-12
 -0.000017	 -0.000017	diff=3.07593e-13
  0.000011	  0.000011	diff=4.30092e-13
 -0.000003	 -0.000003	diff=2.76554e-12
  0.000008	  0.000008	diff=1.05944e-13
  0.000001	  0.000001	diff=3.05075e-13
  local_diff=1.03115e-11
# W_soft_char, [5 2]
  0.000003	  0.000003	diff=1.27732e-12
 -0.000002	 -0.000002	diff=2.28717e-12
 -0.000001	 -0.000001	diff=1.38603e-12
 -0.000000	 -0.000000	diff=2.00461e-12
 -0.000000	 -0.000000	diff=1.28385e-12
  0.000002	  0.000002	diff=1.20796e-12
 -0.000004	 -0.000004	diff=4.40247e-13
  0.000001	  0.000001	diff=2.80182e-12
  0.000000	  0.000000	diff=2.25851e-12
  0.000000	  0.000000	diff=1.81797e-12
  local_diff=1.67655e-11
# Num params=416, abs_diff=6.33597e-08
Elapsed time is 12.943185 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=1.00711e-11
  0.000000	  0.000000	diff=1.7115e-12
 -0.000000	 -0.000000	diff=2.37731e-12
  0.000000	  0.000000	diff=4.33416e-12
 -0.000000	 -0.000000	diff=4.59655e-12
 -0.000000	 -0.000000	diff=3.12446e-12
  0.000009	  0.000009	diff=6.3282e-11
  0.000001	  0.000001	diff=3.90022e-11
  0.000000	  0.000000	diff=1.67846e-12
 -0.000000	 -0.000000	diff=7.8576e-12
  0.000000	  0.000000	diff=6.04329e-12
 -0.000000	 -0.000000	diff=1.08033e-12
  0.000000	  0.000000	diff=9.13505e-12
  0.000000	  0.000000	diff=4.25032e-12
 -0.000013	 -0.000013	diff=1.07545e-10
 -0.000001	 -0.000001	diff=5.64131e-11
  0.000000	  0.000000	diff=6.56331e-13
 -0.000000	 -0.000000	diff=3.46563e-12
  0.000000	  0.000000	diff=5.46569e-12
 -0.000000	 -0.000000	diff=6.24546e-13
  0.000000	  0.000000	diff=1.34228e-12
  0.000000	  0.000000	diff=6.56778e-12
 -0.000000	 -0.000000	diff=6.40283e-10
 -0.000000	 -0.000000	diff=2.09603e-11
 -0.000000	 -0.000000	diff=4.42618e-12
  0.000000	  0.000000	diff=3.67932e-12
 -0.000000	 -0.000000	diff=3.6317e-12
  0.000000	  0.000000	diff=1.77999e-12
 -0.000000	 -0.000000	diff=2.39536e-12
 -0.000000	 -0.000000	diff=4.95888e-12
  0.000000	  0.000000	diff=3.1856e-12
  0.000000	  0.000000	diff=1.67865e-10
  local_diff=1.19379e-09
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=1.41282e-12
  0.000000	  0.000000	diff=5.48698e-12
 -0.000000	 -0.000000	diff=1.22173e-12
  0.000000	  0.000000	diff=5.16283e-12
 -0.000000	 -0.000000	diff=4.69855e-12
  0.000000	  0.000000	diff=3.40854e-12
  0.000019	  0.000019	diff=2.95504e-12
  0.000034	  0.000034	diff=1.40433e-11
  0.000000	  0.000000	diff=1.95732e-12
 -0.000000	 -0.000000	diff=1.41803e-12
  0.000000	  0.000000	diff=4.94357e-13
 -0.000000	 -0.000000	diff=3.17766e-12
  0.000000	  0.000000	diff=4.16426e-12
 -0.000000	 -0.000000	diff=1.04422e-13
 -0.000016	 -0.000016	diff=5.22077e-12
 -0.000028	 -0.000028	diff=5.12241e-12
 -0.000000	 -0.000000	diff=7.28453e-13
  0.000000	  0.000000	diff=3.51329e-12
 -0.000000	 -0.000000	diff=3.75643e-12
  0.000000	  0.000000	diff=3.1859e-12
 -0.000000	 -0.000000	diff=6.09436e-12
  0.000000	  0.000000	diff=5.31135e-12
  0.000000	  0.000000	diff=3.26563e-10
  0.000001	  0.000001	diff=6.97211e-12
  0.000000	  0.000000	diff=5.85455e-12
 -0.000000	 -0.000000	diff=1.11753e-12
  0.000000	  0.000000	diff=4.51723e-12
 -0.000000	 -0.000000	diff=2.03132e-12
  0.000000	  0.000000	diff=5.87178e-12
 -0.000000	 -0.000000	diff=5.4414e-12
 -0.000000	 -0.000000	diff=7.8331e-13
 -0.000001	 -0.000001	diff=1.36459e-09
  local_diff=1.80638e-09
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=8.84971e-12
 -0.000000	 -0.000000	diff=6.72496e-12
  0.000000	  0.000000	diff=5.2261e-12
  0.000000	  0.000000	diff=1.66519e-12
  0.000000	  0.000000	diff=9.48983e-12
 -0.000000	 -0.000000	diff=1.19197e-12
 -0.000004	 -0.000004	diff=2.47558e-11
  0.000011	  0.000011	diff=1.54251e-10
 -0.000000	 -0.000000	diff=6.8856e-12
  0.000000	  0.000000	diff=4.37705e-12
 -0.000000	 -0.000000	diff=8.54302e-13
 -0.000000	 -0.000000	diff=5.55381e-12
 -0.000000	 -0.000000	diff=5.23165e-12
  0.000000	  0.000000	diff=2.14317e-12
  0.000010	  0.000010	diff=7.70694e-11
 -0.000030	 -0.000030	diff=3.12182e-10
  0.000000	  0.000000	diff=8.0913e-14
  0.000000	 -0.000000	diff=4.29989e-13
  0.000000	 -0.000000	diff=8.05654e-14
  0.000000	  0.000000	diff=5.24522e-13
  0.000000	 -0.000000	diff=8.78095e-15
  0.000000	  0.000000	diff=1.11408e-13
  0.000000	  0.000000	diff=1.78379e-13
 -0.000000	 -0.000000	diff=4.9603e-13
  0.000000	 -0.000000	diff=1.64245e-13
  0.000000	  0.000000	diff=7.654e-13
  0.000000	  0.000000	diff=2.43734e-13
  0.000000	 -0.000000	diff=2.54164e-13
  0.000000	  0.000000	diff=8.82539e-14
  0.000000	  0.000000	diff=4.61879e-13
 -0.000000	 -0.000000	diff=4.86246e-12
  0.000000	  0.000000	diff=7.20142e-13
 -0.000000	 -0.000000	diff=7.03994e-13
  0.000000	  0.000000	diff=4.85685e-12
 -0.000000	 -0.000000	diff=8.15803e-13
 -0.000000	 -0.000000	diff=5.81464e-12
 -0.000000	 -0.000000	diff=5.57574e-12
  0.000000	  0.000000	diff=2.56798e-12
  0.000000	  0.000000	diff=2.98821e-10
 -0.000001	 -0.000001	diff=3.57003e-12
  0.000000	  0.000000	diff=2.88449e-12
 -0.000000	 -0.000000	diff=1.51512e-14
  0.000000	  0.000000	diff=1.01844e-12
  0.000000	  0.000000	diff=5.11171e-12
  0.000000	  0.000000	diff=6.047e-12
 -0.000000	 -0.000000	diff=3.71752e-12
 -0.000000	 -0.000000	diff=2.7814e-12
  0.000000	  0.000000	diff=7.04408e-11
  local_diff=1.05066e-09
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=1.1486e-12
  0.000000	  0.000000	diff=2.81721e-12
  0.000000	  0.000000	diff=4.44463e-12
  0.000000	  0.000000	diff=5.46807e-12
  0.000000	  0.000000	diff=4.0367e-12
  0.000000	  0.000000	diff=1.06402e-13
 -0.000006	 -0.000006	diff=2.47167e-12
  0.000011	  0.000011	diff=3.23387e-12
 -0.000000	 -0.000000	diff=3.05678e-12
  0.000000	  0.000000	diff=7.11185e-13
  0.000000	  0.000000	diff=6.03295e-13
  0.000000	  0.000000	diff=3.17309e-13
 -0.000000	 -0.000000	diff=3.08097e-12
  0.000000	  0.000000	diff=2.54576e-12
 -0.000002	 -0.000002	diff=4.80293e-12
  0.000002	  0.000002	diff=6.67647e-11
 -0.000000	 -0.000000	diff=1.50058e-12
  0.000000	  0.000000	diff=1.48028e-12
  0.000000	  0.000000	diff=5.51993e-12
  0.000000	  0.000000	diff=4.07563e-14
  0.000000	  0.000000	diff=1.87996e-12
  0.000000	  0.000000	diff=4.10186e-13
 -0.000000	 -0.000000	diff=5.59529e-10
  0.000001	  0.000001	diff=1.41613e-11
  0.000000	  0.000000	diff=3.96851e-13
  0.000000	 -0.000000	diff=1.12076e-12
 -0.000000	 -0.000000	diff=1.16978e-12
 -0.000000	 -0.000000	diff=5.62734e-12
 -0.000000	 -0.000000	diff=5.27078e-12
 -0.000000	 -0.000000	diff=2.50589e-12
  0.000001	  0.000001	diff=6.55496e-12
 -0.000001	 -0.000001	diff=2.59735e-09
  local_diff=3.31013e-09
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000006	 -0.000006	diff=1.88604e-09
  0.000005	  0.000005	diff=5.44571e-09
 -0.000004	 -0.000004	diff=1.03197e-09
  0.000006	  0.000006	diff=3.53645e-09
  local_diff=1.19002e-08
# W_emb_tgt, [2 5]
 -0.000033	 -0.000033	diff=1.49389e-08
  0.000007	  0.000007	diff=4.10339e-09
 -0.000026	 -0.000026	diff=1.02107e-08
  0.000006	  0.000006	diff=2.94499e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000003	 -0.000003	diff=9.28311e-10
  0.000001	  0.000001	diff=3.68429e-10
 -0.000004	 -0.000004	diff=1.99374e-09
  0.000001	  0.000001	diff=4.26822e-10
  local_diff=3.59152e-08
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=1.02038e-12
  0.000000	  0.000000	diff=2.24385e-14
  0.000000	  0.000000	diff=7.90613e-14
  0.000000	  0.000000	diff=3.43426e-15
  0.000000	 -0.000000	diff=5.32728e-13
  0.000000	  0.000000	diff=1.39535e-14
 -0.000000	 -0.000000	diff=4.73524e-12
 -0.000000	 -0.000000	diff=3.61483e-12
  0.000000	  0.000000	diff=2.60686e-13
  0.000000	  0.000000	diff=3.6952e-14
  0.000000	 -0.000000	diff=7.67384e-14
  0.000000	 -0.000000	diff=2.68234e-15
  0.000000	  0.000000	diff=2.45013e-13
  0.000000	  0.000000	diff=3.05663e-14
 -0.000000	 -0.000000	diff=2.67497e-12
  0.000000	  0.000000	diff=5.94659e-13
  0.000000	  0.000000	diff=4.85626e-15
  0.000000	 -0.000000	diff=3.97979e-16
  0.000000	 -0.000000	diff=5.40322e-15
  0.000000	  0.000000	diff=1.22045e-16
  0.000000	 -0.000000	diff=7.05388e-16
  0.000000	 -0.000000	diff=2.53262e-16
  0.000000	 -0.000000	diff=2.17444e-12
  0.000000	 -0.000000	diff=5.46204e-13
  0.000000	  0.000000	diff=4.10328e-16
  0.000000	  0.000000	diff=6.42077e-17
  0.000000	 -0.000000	diff=8.73432e-17
  0.000000	 -0.000000	diff=1.2637e-17
  0.000000	  0.000000	diff=3.49874e-16
  0.000000	  0.000000	diff=4.31843e-17
  0.000000	  0.000000	diff=1.56882e-12
  0.000000	  0.000000	diff=1.16272e-13
  local_diff=1.83628e-11
# W_src_char{2}, [8 4]
  0.000000	 -0.000000	diff=4.28303e-15
  0.000000	 -0.000000	diff=8.47359e-15
  0.000000	 -0.000000	diff=3.9623e-16
  0.000000	 -0.000000	diff=4.68269e-16
  0.000000	 -0.000000	diff=2.85961e-15
  0.000000	 -0.000000	diff=6.53769e-15
  0.000000	  0.000000	diff=2.89803e-12
  0.000000	  0.000000	diff=2.00536e-12
  0.000000	 -0.000000	diff=3.25889e-16
  0.000000	 -0.000000	diff=3.06388e-15
  0.000000	  0.000000	diff=3.6947e-17
  0.000000	  0.000000	diff=1.67447e-16
  0.000000	 -0.000000	diff=5.53727e-16
  0.000000	 -0.000000	diff=2.56431e-15
  0.000000	 -0.000000	diff=1.88507e-12
  0.000000	  0.000000	diff=5.67019e-12
  0.000000	  0.000000	diff=1.33383e-17
  0.000000	  0.000000	diff=3.6026e-17
  0.000000	  0.000000	diff=3.51994e-17
  0.000000	  0.000000	diff=2.82469e-17
  0.000000	  0.000000	diff=3.71716e-17
  0.000000	  0.000000	diff=6.46701e-17
  0.000000	 -0.000000	diff=1.8125e-12
  0.000000	 -0.000000	diff=1.57098e-12
  0.000000	  0.000000	diff=1.76446e-17
  0.000000	  0.000000	diff=1.27683e-17
  0.000000	  0.000000	diff=3.23875e-17
  0.000000	  0.000000	diff=5.33464e-17
  0.000000	  0.000000	diff=4.28165e-17
  0.000000	  0.000000	diff=6.69873e-17
  0.000000	  0.000000	diff=2.46319e-14
  0.000000	 -0.000000	diff=3.23367e-13
  local_diff=1.62203e-11
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.32045e-17
  0.000000	  0.000000	diff=1.56523e-16
  0.000000	 -0.000000	diff=3.57612e-18
  0.000000	  0.000000	diff=4.81295e-17
  0.000000	 -0.000000	diff=2.38198e-17
  0.000000	  0.000000	diff=1.46901e-16
  0.000000	  0.000000	diff=1.81502e-12
 -0.000000	 -0.000000	diff=4.65126e-12
  0.000000	 -0.000000	diff=8.61327e-17
  0.000000	  0.000000	diff=3.93158e-16
  0.000000	 -0.000000	diff=6.35358e-18
  0.000000	  0.000000	diff=8.83923e-17
  0.000000	 -0.000000	diff=6.15287e-17
  0.000000	  0.000000	diff=3.83299e-16
  0.000000	  0.000000	diff=4.28765e-13
 -0.000000	 -0.000000	diff=2.4652e-12
  0.000000	 -0.000000	diff=6.16275e-20
  0.000000	  0.000000	diff=3.36437e-19
  0.000000	 -0.000000	diff=3.20167e-19
  0.000000	  0.000000	diff=5.6672e-19
  0.000000	 -0.000000	diff=3.67731e-19
  0.000000	  0.000000	diff=9.23993e-19
  0.000000	 -0.000000	diff=8.64503e-13
  0.000000	  0.000000	diff=9.47239e-13
  0.000000	 -0.000000	diff=5.39067e-19
  0.000000	  0.000000	diff=4.36433e-18
  0.000000	 -0.000000	diff=5.08409e-19
  0.000000	  0.000000	diff=2.61986e-18
  0.000000	 -0.000000	diff=1.34131e-18
  0.000000	  0.000000	diff=6.74279e-18
  0.000000	  0.000000	diff=4.42562e-13
  0.000000	 -0.000000	diff=1.22284e-12
  local_diff=1.28388e-11
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.43976e-12
  0.000000	  0.000000	diff=3.45681e-12
 -0.000000	 -0.000000	diff=4.59178e-13
  0.000000	  0.000000	diff=5.78179e-13
 -0.000000	 -0.000000	diff=5.40849e-12
  0.000000	  0.000000	diff=3.04949e-12
 -0.000000	 -0.000000	diff=5.70935e-13
  0.000000	  0.000000	diff=7.32846e-12
  local_diff=2.22913e-11
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=1.73406e-11
  0.000000	  0.000000	diff=1.03029e-11
  0.000000	  0.000000	diff=1.01407e-11
  0.000000	  0.000000	diff=5.9726e-12
 -0.000000	 -0.000000	diff=1.95726e-11
  0.000000	  0.000000	diff=5.3366e-12
  0.000075	  0.000075	diff=6.45305e-10
  0.000040	  0.000040	diff=9.62561e-10
 -0.000000	 -0.000000	diff=6.6472e-12
 -0.000000	 -0.000000	diff=1.34165e-11
 -0.000000	 -0.000000	diff=1.83626e-11
  0.000000	  0.000000	diff=1.18342e-11
  0.000000	  0.000000	diff=8.95683e-12
 -0.000000	 -0.000000	diff=7.65106e-12
  0.000308	  0.000308	diff=3.56643e-09
  0.000157	  0.000157	diff=3.72753e-09
  0.000000	  0.000000	diff=1.13869e-12
 -0.000000	 -0.000000	diff=1.05232e-11
 -0.000000	 -0.000000	diff=5.71094e-12
  0.000000	  0.000000	diff=3.70445e-12
  0.000000	  0.000000	diff=1.53783e-11
 -0.000000	 -0.000000	diff=9.66138e-12
  0.000002	  0.000002	diff=2.7854e-09
  0.000001	  0.000001	diff=2.68743e-13
  0.000000	  0.000000	diff=1.00801e-11
 -0.000000	 -0.000000	diff=9.06837e-12
  0.000000	  0.000000	diff=1.66929e-11
 -0.000000	 -0.000000	diff=1.46646e-11
  0.000000	  0.000000	diff=4.7303e-12
 -0.000000	 -0.000000	diff=1.29203e-11
  0.000000	  0.000000	diff=1.57171e-11
  0.000000	  0.000000	diff=2.09348e-10
  local_diff=1.21624e-08
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=2.07542e-13
  0.000000	  0.000000	diff=9.96733e-12
  0.000000	  0.000000	diff=1.05952e-11
  0.000000	  0.000000	diff=1.75118e-11
 -0.000000	 -0.000000	diff=3.47247e-12
  0.000000	  0.000000	diff=3.06908e-12
 -0.000005	 -0.000005	diff=3.4873e-12
 -0.000005	 -0.000005	diff=1.1478e-11
  0.000000	  0.000000	diff=4.1956e-12
 -0.000000	 -0.000000	diff=1.24944e-11
 -0.000000	 -0.000000	diff=9.1494e-12
 -0.000000	 -0.000000	diff=3.29196e-12
  0.000000	  0.000000	diff=7.77694e-12
 -0.000000	 -0.000000	diff=3.63898e-12
  0.000081	  0.000081	diff=1.56073e-12
  0.000091	  0.000091	diff=1.6953e-11
  0.000000	  0.000000	diff=1.45543e-11
 -0.000000	 -0.000000	diff=1.38473e-12
  0.000000	 -0.000000	diff=8.13626e-12
 -0.000000	 -0.000000	diff=3.02901e-12
  0.000000	  0.000000	diff=1.9966e-12
 -0.000000	 -0.000000	diff=2.40767e-12
  0.000001	  0.000001	diff=1.32951e-09
  0.000001	  0.000001	diff=5.39529e-12
  0.000000	  0.000000	diff=4.3766e-12
 -0.000000	 -0.000000	diff=8.41559e-12
  0.000000	 -0.000000	diff=6.32559e-12
  0.000000	 -0.000000	diff=1.10532e-11
  0.000000	  0.000000	diff=9.93466e-12
 -0.000000	 -0.000000	diff=1.44685e-11
  0.000001	  0.000001	diff=1.15923e-12
  0.000001	  0.000001	diff=1.22815e-09
  local_diff=2.76916e-09
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=6.72737e-12
  0.000000	  0.000000	diff=1.00843e-11
  0.000000	  0.000000	diff=3.7054e-13
  0.000000	  0.000000	diff=4.23785e-12
  0.000000	  0.000000	diff=1.09593e-11
  0.000000	  0.000000	diff=8.28353e-13
  0.000024	  0.000024	diff=9.20527e-12
  0.000018	  0.000018	diff=5.01793e-12
 -0.000000	 -0.000000	diff=2.3837e-12
 -0.000000	 -0.000000	diff=2.53364e-12
 -0.000000	 -0.000000	diff=6.41755e-12
 -0.000000	 -0.000000	diff=8.44494e-13
 -0.000000	 -0.000000	diff=2.31445e-12
 -0.000000	 -0.000000	diff=2.27091e-12
 -0.000102	 -0.000102	diff=1.28117e-11
 -0.000078	 -0.000078	diff=6.29396e-12
  0.000000	  0.000000	diff=3.85296e-13
  0.000000	  0.000000	diff=4.26546e-13
  0.000000	  0.000000	diff=3.56318e-13
  0.000000	  0.000000	diff=2.36492e-13
  0.000000	  0.000000	diff=5.37917e-13
  0.000000	  0.000000	diff=5.29706e-13
  0.000001	  0.000001	diff=1.74614e-09
  0.000001	  0.000001	diff=7.16903e-12
  0.000000	  0.000000	diff=1.84886e-13
  0.000000	  0.000000	diff=2.13967e-13
  0.000000	  0.000000	diff=1.84658e-13
  0.000000	  0.000000	diff=1.22281e-13
  0.000000	  0.000000	diff=2.77312e-13
  0.000000	  0.000000	diff=2.76601e-13
  0.000001	  0.000001	diff=1.25012e-11
  0.000001	  0.000001	diff=8.08582e-10
  local_diff=2.66143e-09
# W_emb_tgt_char, [2 5]
 -0.000022	 -0.000022	diff=8.3434e-09
 -0.000068	 -0.000068	diff=1.30223e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000013	 -0.000013	diff=5.92618e-09
 -0.000060	 -0.000060	diff=1.24651e-08
 -0.000007	 -0.000007	diff=2.51369e-09
 -0.000028	 -0.000029	diff=7.41794e-09
 -0.000016	 -0.000016	diff=2.74219e-09
 -0.000026	 -0.000026	diff=9.4973e-09
  local_diff=6.19281e-08
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.79895e-17
  0.000000	  0.000000	diff=3.4511e-17
  0.000000	  0.000000	diff=8.01398e-17
  0.000000	 -0.000000	diff=9.81423e-17
  local_diff=2.40783e-16
# W_h, [2 4]
 -0.000023	 -0.000023	diff=5.38391e-12
  0.000033	  0.000033	diff=9.7629e-14
  0.000028	  0.000028	diff=4.73733e-12
 -0.000039	 -0.000039	diff=3.31742e-12
 -0.000008	 -0.000008	diff=6.85738e-12
  0.000011	  0.000011	diff=6.43053e-12
  0.000013	  0.000013	diff=1.4006e-10
 -0.000025	 -0.000025	diff=1.53017e-10
  local_diff=3.19901e-10
# W_h_char, [2 4]
 -0.000000	 -0.000000	diff=9.1335e-12
 -0.000000	 -0.000000	diff=1.39135e-12
  0.000000	  0.000000	diff=5.00845e-12
  0.000000	  0.000000	diff=4.93651e-12
 -0.000000	 -0.000000	diff=1.03302e-11
 -0.000000	 -0.000000	diff=1.34124e-11
  0.000000	  0.000000	diff=9.43159e-12
  0.000000	  0.000000	diff=2.01078e-11
  local_diff=7.37517e-11
# W_soft, [5 2]
  0.000006	  0.000006	diff=5.32789e-12
  0.000003	  0.000003	diff=4.97887e-13
 -0.000016	 -0.000016	diff=2.91177e-12
  0.000004	  0.000004	diff=4.82807e-12
  0.000002	  0.000002	diff=3.90948e-12
 -0.000017	 -0.000017	diff=5.99194e-12
  0.000011	  0.000011	diff=5.25425e-12
 -0.000003	 -0.000003	diff=2.9188e-12
  0.000008	  0.000008	diff=5.5784e-12
  0.000001	  0.000001	diff=2.5371e-12
  local_diff=3.97556e-11
# W_soft_char, [5 2]
  0.000034	  0.000034	diff=1.40447e-12
 -0.000023	 -0.000023	diff=1.34356e-13
 -0.000007	 -0.000007	diff=8.87705e-12
 -0.000001	 -0.000001	diff=8.67739e-12
 -0.000002	 -0.000002	diff=1.46978e-12
  0.000024	  0.000024	diff=7.10948e-13
 -0.000039	 -0.000039	diff=1.00868e-11
  0.000006	  0.000006	diff=5.28084e-12
  0.000005	  0.000005	diff=1.52267e-13
  0.000004	  0.000004	diff=1.81797e-11
  local_diff=5.49736e-11
# Num params=416, abs_diff=1.35255e-07
Elapsed time is 12.663173 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charSrcSample', 0.5)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0.5
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000013	 -0.000000	diff=1.30162e-05
  0.000000	  0.000000	diff=3.91283e-13
  0.000013	 -0.000000	diff=1.30074e-05
  0.000013	  0.000000	diff=1.30033e-05
  0.000013	 -0.000000	diff=1.30216e-05
 -0.000000	 -0.000000	diff=1.42191e-12
  0.000016	  0.000007	diff=9.19807e-06
  0.000002	  0.000002	diff=2.98767e-11
  0.000013	  0.000000	diff=1.29924e-05
 -0.000000	 -0.000000	diff=1.57667e-12
  0.000000	  0.000000	diff=9.54136e-13
  0.000013	 -0.000000	diff=1.30053e-05
  0.000013	  0.000000	diff=1.2985e-05
  0.000013	  0.000000	diff=1.29986e-05
 -0.000008	 -0.000008	diff=8.8583e-11
  0.000014	 -0.000002	diff=1.62783e-05
  0.000000	  0.000000	diff=1.33501e-12
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30044e-05
  0.000013	  0.000000	diff=1.3004e-05
  0.000000	  0.000000	diff=1.01841e-12
  0.000013	 -0.000000	diff=1.29311e-05
 -0.000000	 -0.000000	diff=1.00855e-12
 -0.000000	 -0.000000	diff=5.23564e-13
  0.000000	  0.000000	diff=1.36439e-14
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=4.63256e-13
 -0.000000	 -0.000000	diff=5.07172e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.3068e-05
  0.000000	  0.000000	diff=5.67535e-11
  local_diff=0.000233531
# W_src{2}, [8 4]
  0.000013	 -0.000000	diff=1.30045e-05
  0.000013	  0.000000	diff=1.30033e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=2.29761e-13
 -0.000000	 -0.000000	diff=1.08928e-12
  0.000013	  0.000000	diff=1.30037e-05
  0.000023	  0.000009	diff=1.32111e-05
  0.000020	  0.000020	diff=3.96364e-12
  0.000013	  0.000000	diff=1.30041e-05
 -0.000000	 -0.000000	diff=3.11414e-13
  0.000000	  0.000000	diff=4.02677e-13
 -0.000000	 -0.000000	diff=7.68277e-13
  0.000013	  0.000000	diff=1.30038e-05
  0.000013	 -0.000000	diff=1.30047e-05
 -0.000008	 -0.000008	diff=1.2352e-12
 -0.000016	 -0.000016	diff=3.53807e-13
 -0.000000	 -0.000000	diff=2.18677e-12
  0.000000	  0.000000	diff=7.33162e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=6.96059e-13
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=2.5302e-11
  0.000013	  0.000000	diff=1.31918e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=6.6508e-13
 -0.000000	 -0.000000	diff=2.27747e-14
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=1.71692e-12
 -0.000000	 -0.000000	diff=8.88425e-13
 -0.000000	 -0.000000	diff=1.95863e-10
  local_diff=0.000195457
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.85928e-14
  0.000013	 -0.000000	diff=1.3005e-05
  0.000013	  0.000000	diff=1.30009e-05
  0.000000	  0.000000	diff=1.2573e-12
  0.000013	  0.000000	diff=1.30021e-05
 -0.000000	 -0.000000	diff=9.0851e-13
  0.000009	 -0.000004	diff=1.30043e-05
  0.000011	  0.000011	diff=1.60564e-10
  0.000013	 -0.000000	diff=1.30047e-05
  0.000013	  0.000000	diff=1.30029e-05
  0.000013	 -0.000000	diff=1.301e-05
 -0.000000	 -0.000000	diff=3.21587e-12
  0.000013	 -0.000000	diff=1.30081e-05
  0.000013	  0.000000	diff=1.30126e-05
  0.000023	  0.000010	diff=1.30044e-05
 -0.000017	 -0.000030	diff=1.30039e-05
  0.000000	  0.000000	diff=1.14571e-13
  0.000000	 -0.000000	diff=5.82423e-13
  0.000000	 -0.000000	diff=9.61777e-14
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=4.98047e-15
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=6.05131e-13
 -0.000000	 -0.000000	diff=2.08495e-12
  0.000000	 -0.000000	diff=1.21563e-13
  0.000000	  0.000000	diff=5.41283e-13
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=1.56248e-12
  0.000013	  0.000000	diff=1.30041e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30038e-05
 -0.000000	 -0.000000	diff=3.00984e-13
 -0.000000	 -0.000000	diff=2.08854e-12
  0.000013	 -0.000000	diff=1.30044e-05
  0.000000	  0.000000	diff=2.229e-12
  0.000013	  0.000000	diff=1.28964e-05
  0.000013	 -0.000001	diff=1.33615e-05
  0.000000	  0.000000	diff=3.99737e-14
  0.000013	 -0.000000	diff=1.30046e-05
  0.000000	  0.000000	diff=4.64027e-13
  0.000013	  0.000000	diff=1.30041e-05
  0.000013	  0.000000	diff=1.30042e-05
  0.000013	 -0.000000	diff=1.30044e-05
  0.000013	  0.000000	diff=1.30857e-05
 -0.000000	 -0.000000	diff=1.90527e-10
  local_diff=0.000364462
# W_tgt{2}, [8 4]
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=1.38637e-12
  0.000013	  0.000000	diff=1.30038e-05
  0.000013	  0.000000	diff=1.30042e-05
  0.000000	  0.000000	diff=7.50089e-13
 -0.000005	 -0.000005	diff=1.22831e-12
  0.000014	  0.000008	diff=6.11139e-06
 -0.000000	 -0.000000	diff=3.99154e-13
  0.000000	  0.000000	diff=1.8614e-12
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=6.86465e-13
  0.000013	  0.000000	diff=1.30044e-05
  0.000007	 -0.000003	diff=1.07547e-05
  0.000022	  0.000005	diff=1.73089e-05
 -0.000000	 -0.000000	diff=5.93589e-13
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=2.12355e-12
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=4.33665e-10
  0.000013	  0.000000	diff=1.27219e-05
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=9.81748e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=3.16853e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000001	diff=1.28436e-05
  0.000012	 -0.000001	diff=1.32954e-05
  local_diff=0.0002681
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=0
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000006	diff=1.86765e-05
  0.000005	  0.000005	diff=5.44405e-09
  0.000000	  0.000000	diff=0
  0.000019	  0.000000	diff=1.86337e-05
  local_diff=8.93326e-05
# W_emb_tgt, [2 5]
 -0.000020	 -0.000033	diff=1.29886e-05
  0.000020	  0.000007	diff=1.30097e-05
 -0.000013	 -0.000025	diff=1.29887e-05
  0.000019	  0.000006	diff=1.30135e-05
  0.000000	  0.000000	diff=0
  0.000013	  0.000000	diff=1.30043e-05
  0.000010	 -0.000003	diff=1.30033e-05
  0.000001	  0.000001	diff=3.4841e-10
 -0.000004	 -0.000004	diff=2.01014e-09
  0.000001	  0.000001	diff=4.0932e-10
  local_diff=7.80109e-05
# W_src_char{1}, [8 4]
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=7.89489e-14
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=1.43859e-14
  0.000013	 -0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=4.50678e-13
  0.000000	  0.000000	diff=3.40723e-13
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=2.65739e-15
  0.000000	  0.000000	diff=3.25248e-13
  0.000000	  0.000000	diff=4.35472e-14
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30042e-05
  0.000000	  0.000000	diff=4.84911e-15
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=5.39639e-15
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=2.54215e-16
 -0.000000	 -0.000000	diff=6.70072e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=6.37292e-17
  0.000000	 -0.000000	diff=8.70951e-17
  0.000000	 -0.000000	diff=1.23388e-17
  0.000000	  0.000000	diff=3.49598e-16
  0.000000	  0.000000	diff=4.29502e-17
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  local_diff=0.000208068
# W_src_char{2}, [8 4]
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=9.66251e-15
  0.000000	 -0.000000	diff=3.95745e-16
  0.000000	 -0.000000	diff=4.67978e-16
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=7.73063e-15
  0.000000	  0.000000	diff=1.15886e-12
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=3.89675e-15
  0.000000	  0.000000	diff=3.70036e-17
  0.000000	  0.000000	diff=1.66865e-16
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=1.72137e-13
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=1.33252e-17
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=1.0317e-12
 -0.000000	 -0.000000	diff=1.27307e-12
  0.000000	  0.000000	diff=1.76306e-17
  0.000000	  0.000000	diff=1.27795e-17
  0.000000	  0.000000	diff=3.23617e-17
  0.000000	  0.000000	diff=5.32463e-17
  0.000000	  0.000000	diff=4.27841e-17
  0.000000	  0.000000	diff=6.68927e-17
  0.000000	  0.000000	diff=2.50325e-14
  0.000013	 -0.000000	diff=1.30043e-05
  local_diff=0.000169055
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=2.50703e-17
  0.000000	  0.000000	diff=1.62762e-16
  0.000000	 -0.000000	diff=3.57849e-18
  0.000000	  0.000000	diff=4.80765e-17
  0.000000	 -0.000000	diff=2.56841e-17
  0.000000	  0.000000	diff=1.53151e-16
  0.000000	  0.000000	diff=9.50042e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=1.05582e-16
  0.000000	  0.000000	diff=4.5923e-16
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=8.09854e-17
  0.000000	  0.000000	diff=4.49384e-16
  0.000000	  0.000000	diff=1.2714e-12
 -0.000000	 -0.000000	diff=1.46914e-12
  0.000000	 -0.000000	diff=6.15958e-20
  0.000000	  0.000000	diff=3.36051e-19
  0.000000	 -0.000000	diff=3.2005e-19
  0.000000	  0.000000	diff=5.66051e-19
  0.000000	 -0.000000	diff=3.67592e-19
  0.000000	  0.000000	diff=9.22918e-19
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=5.08401e-19
  0.000000	  0.000000	diff=2.61692e-18
  0.000000	 -0.000000	diff=1.34057e-18
  0.000000	  0.000000	diff=6.73521e-18
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  local_diff=0.000117038
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=8.55658e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=2.1652e-14
 -0.000000	 -0.000000	diff=6.99988e-13
  0.000013	  0.000000	diff=1.30043e-05
  local_diff=6.50213e-05
# W_tgt_char{1}, [8 4]
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=4.59071e-13
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=9.81432e-13
  0.000000	  0.000000	diff=1.75038e-12
  0.000020	  0.000007	diff=1.30043e-05
  0.000004	  0.000004	diff=9.47891e-11
  0.000013	 -0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=9.15764e-13
 -0.000000	 -0.000000	diff=2.41947e-13
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=6.21427e-13
 -0.000000	 -0.000000	diff=1.34904e-12
  0.000031	  0.000031	diff=3.54981e-10
  0.000016	  0.000016	diff=3.73581e-10
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=1.71898e-12
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=9.48931e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=2.78108e-10
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=2.05447e-12
  0.000000	  0.000000	diff=1.74147e-12
 -0.000000	 -0.000000	diff=3.29552e-13
  0.000000	  0.000000	diff=1.36678e-13
 -0.000000	 -0.000000	diff=1.60293e-13
  0.000000	  0.000000	diff=2.10784e-12
  0.000013	  0.000000	diff=1.30043e-05
  local_diff=0.000169057
# W_tgt_char{2}, [8 4]
 -0.000000	 -0.000000	diff=2.29834e-12
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=5.23127e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000012	 -0.000001	diff=1.30043e-05
 -0.000000	 -0.000000	diff=4.14273e-13
  0.000000	  0.000000	diff=1.55405e-12
  0.000013	 -0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=1.35329e-12
 -0.000000	 -0.000000	diff=3.23075e-13
  0.000000	  0.000000	diff=3.51866e-13
 -0.000000	 -0.000000	diff=7.81343e-13
  0.000008	  0.000008	diff=1.1309e-13
  0.000022	  0.000009	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=4.29687e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30044e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=3.11556e-12
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=1.10546e-12
  0.000000	  0.000000	diff=1.28028e-12
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=1.2314e-10
  local_diff=0.000234077
# W_tgt_char{3}, [8 4]
  0.000000	  0.000000	diff=4.64036e-13
  0.000000	  0.000000	diff=1.26526e-12
  0.000000	  0.000000	diff=1.09986e-12
  0.000000	  0.000000	diff=4.23778e-13
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000002	  0.000002	diff=1.06631e-13
  0.000002	  0.000002	diff=3.14944e-13
 -0.000000	 -0.000000	diff=8.98088e-13
 -0.000000	 -0.000000	diff=1.39006e-12
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=9.05968e-13
  0.000013	 -0.000000	diff=1.30043e-05
  0.000003	 -0.000010	diff=1.30041e-05
  0.000005	 -0.000008	diff=1.30045e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=2.36529e-14
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=5.29774e-14
  0.000013	  0.000000	diff=1.30044e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=1.84686e-14
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=2.77354e-14
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  local_diff=0.000247081
# W_emb_tgt_char, [2 5]
 -0.000002	 -0.000002	diff=8.35496e-10
 -0.000007	 -0.000007	diff=1.30188e-09
  0.000000	  0.000000	diff=0
  0.000013	  0.000000	diff=1.30043e-05
  0.000012	 -0.000001	diff=1.30049e-05
 -0.000006	 -0.000006	diff=1.24873e-09
 -0.000001	 -0.000001	diff=2.50671e-10
 -0.000003	 -0.000003	diff=7.4375e-10
  0.000011	 -0.000002	diff=1.30045e-05
  0.000010	 -0.000003	diff=1.30052e-05
  local_diff=5.20232e-05
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.36729e-17
  0.000013	  0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=9.88116e-17
  local_diff=2.60085e-05
# W_h, [2 4]
  0.000002	 -0.000012	diff=1.43568e-05
  0.000017	  0.000017	diff=1.93775e-12
  0.000015	  0.000015	diff=1.63732e-12
 -0.000021	 -0.000021	diff=7.2326e-14
  0.000010	 -0.000005	diff=1.43142e-05
  0.000006	  0.000006	diff=4.61871e-12
  0.000023	  0.000010	diff=1.27907e-05
 -0.000007	 -0.000021	diff=1.39411e-05
  local_diff=5.54029e-05
# W_h_char, [2 4]
  0.000013	 -0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=9.33365e-13
  0.000000	  0.000000	diff=1.21247e-12
  0.000013	  0.000000	diff=1.30042e-05
 -0.000000	 -0.000000	diff=7.68186e-13
 -0.000000	 -0.000000	diff=3.72593e-13
  0.000013	  0.000000	diff=1.30042e-05
  0.000000	  0.000000	diff=7.8818e-13
  local_diff=3.90127e-05
# W_soft, [5 2]
  0.000009	  0.000009	diff=8.91653e-13
 -0.000001	 -0.000001	diff=2.50996e-14
  0.000002	 -0.000011	diff=1.29644e-05
  0.000013	  0.000002	diff=1.16026e-05
  0.000015	  0.000001	diff=1.42659e-05
 -0.000011	 -0.000011	diff=1.00427e-12
  0.000006	  0.000006	diff=1.00277e-12
 -0.000000	 -0.000000	diff=1.47692e-12
  0.000005	  0.000005	diff=5.58394e-13
  0.000014	  0.000000	diff=1.42365e-05
  local_diff=5.30694e-05
# W_soft_char, [5 2]
  0.000016	  0.000003	diff=1.30042e-05
 -0.000002	 -0.000002	diff=1.28623e-12
  0.000012	 -0.000001	diff=1.30043e-05
  0.000013	 -0.000000	diff=1.30042e-05
 -0.000000	 -0.000000	diff=1.35733e-12
  0.000002	  0.000002	diff=6.48241e-13
 -0.000004	 -0.000004	diff=1.29276e-12
  0.000001	  0.000001	diff=2.29805e-12
  0.000013	  0.000000	diff=1.30042e-05
  0.000013	  0.000000	diff=1.30043e-05
  local_diff=6.50212e-05
# Num params=416, abs_diff=0.00272883
Elapsed time is 12.978065 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charTgtSample', 0.5)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0.5
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
 -0.000000	 -0.000000	diff=6.31982e-10
  0.000000	  0.000000	diff=1.28868e-09
 -0.000000	 -0.000000	diff=1.09041e-09
  0.000000	  0.000000	diff=1.59644e-09
 -0.000000	 -0.000000	diff=5.92938e-10
 -0.000000	 -0.000000	diff=8.98366e-10
  0.000009	  0.000009	diff=3.60376e-10
  0.000001	  0.000001	diff=8.17714e-10
  0.000000	  0.000000	diff=7.12006e-10
 -0.000000	 -0.000000	diff=8.14451e-10
  0.000000	  0.000000	diff=1.72972e-09
 -0.000000	 -0.000000	diff=2.01555e-09
  0.000000	  0.000000	diff=1.31281e-09
  0.000000	  0.000000	diff=1.32468e-09
 -0.000013	 -0.000013	diff=5.65082e-10
 -0.000001	 -0.000001	diff=2.39165e-09
  0.000000	  0.000000	diff=3.75615e-10
 -0.000000	 -0.000000	diff=1.0538e-09
 -0.000000	  0.000000	diff=9.12368e-10
  0.000000	 -0.000000	diff=1.22865e-10
  0.000000	  0.000000	diff=5.72534e-10
 -0.000000	  0.000000	diff=7.40852e-10
 -0.000000	 -0.000000	diff=1.64434e-09
 -0.000000	 -0.000000	diff=1.21119e-09
 -0.000000	 -0.000000	diff=9.02727e-10
 -0.000000	  0.000000	diff=1.17869e-09
 -0.000000	 -0.000000	diff=7.89499e-12
 -0.000000	  0.000000	diff=1.68081e-09
 -0.000000	 -0.000000	diff=4.23242e-10
 -0.000000	 -0.000000	diff=3.10581e-10
  0.000000	  0.000000	diff=9.31234e-10
  0.000000	  0.000000	diff=2.71701e-10
  local_diff=3.04833e-08
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=5.98336e-10
  0.000000	  0.000000	diff=5.5184e-10
  0.000000	 -0.000000	diff=8.03049e-10
  0.000000	  0.000000	diff=9.12072e-10
 -0.000000	 -0.000000	diff=6.01804e-10
  0.000000	  0.000000	diff=1.6103e-09
  0.000019	  0.000019	diff=1.72267e-10
  0.000034	  0.000034	diff=1.02577e-09
  0.000000	  0.000000	diff=7.31274e-10
 -0.000000	 -0.000000	diff=9.18308e-11
  0.000000	  0.000000	diff=3.5757e-10
  0.000000	 -0.000000	diff=1.24433e-09
  0.000000	  0.000000	diff=5.26922e-10
 -0.000000	 -0.000000	diff=1.31655e-09
 -0.000016	 -0.000016	diff=1.28158e-09
 -0.000028	 -0.000028	diff=2.79924e-10
 -0.000000	 -0.000000	diff=1.01677e-09
  0.000000	  0.000000	diff=5.17959e-10
 -0.000000	 -0.000000	diff=4.53835e-10
  0.000000	  0.000000	diff=7.64026e-11
  0.000000	 -0.000000	diff=6.25694e-10
 -0.000000	  0.000000	diff=1.59519e-10
  0.000000	  0.000000	diff=2.074e-10
  0.000001	  0.000001	diff=4.39242e-10
  0.000000	  0.000000	diff=8.44299e-10
 -0.000000	 -0.000000	diff=1.84347e-09
 -0.000000	  0.000000	diff=2.74013e-10
  0.000000	 -0.000000	diff=1.49815e-10
  0.000000	  0.000000	diff=1.19551e-10
 -0.000000	 -0.000000	diff=1.51514e-09
 -0.000000	 -0.000000	diff=4.45537e-10
 -0.000001	 -0.000001	diff=2.14643e-09
  local_diff=2.29405e-08
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=9.06564e-10
 -0.000000	 -0.000000	diff=7.04331e-10
  0.000000	  0.000000	diff=1.45788e-09
  0.000000	  0.000000	diff=1.00321e-09
  0.000000	  0.000000	diff=9.60826e-10
 -0.000000	 -0.000000	diff=3.80665e-10
 -0.000004	 -0.000004	diff=1.6855e-09
  0.000011	  0.000011	diff=3.16235e-10
 -0.000000	 -0.000000	diff=1.67852e-10
  0.000000	  0.000000	diff=1.54016e-09
 -0.000000	 -0.000000	diff=4.66082e-10
 -0.000000	 -0.000000	diff=1.32482e-10
 -0.000000	 -0.000000	diff=7.90906e-11
  0.000000	  0.000000	diff=7.6611e-10
  0.000010	  0.000010	diff=3.68747e-10
 -0.000030	 -0.000030	diff=4.4129e-10
 -0.000000	  0.000000	diff=8.58417e-10
  0.000000	 -0.000000	diff=3.69912e-10
 -0.000000	 -0.000000	diff=6.56461e-10
  0.000000	  0.000000	diff=5.34767e-11
  0.000000	 -0.000000	diff=2.85095e-12
 -0.000000	  0.000000	diff=9.97713e-10
  0.000000	  0.000000	diff=5.62878e-10
 -0.000000	 -0.000000	diff=3.4158e-10
 -0.000000	 -0.000000	diff=1.96378e-09
  0.000000	  0.000000	diff=2.74925e-10
 -0.000000	  0.000000	diff=1.38438e-09
 -0.000000	 -0.000000	diff=1.38957e-09
 -0.000000	  0.000000	diff=3.26938e-10
 -0.000000	  0.000000	diff=1.04922e-09
 -0.000000	 -0.000000	diff=5.60823e-11
  0.000000	  0.000000	diff=1.62752e-10
 -0.000000	 -0.000000	diff=1.55534e-09
  0.000000	  0.000000	diff=3.07741e-10
 -0.000000	 -0.000000	diff=2.11526e-09
 -0.000000	 -0.000000	diff=1.0174e-09
 -0.000000	 -0.000000	diff=1.06863e-09
  0.000000	  0.000000	diff=1.65104e-09
  0.000000	  0.000000	diff=7.86798e-10
 -0.000001	 -0.000001	diff=5.11575e-10
  0.000000	  0.000000	diff=7.58849e-10
 -0.000000	 -0.000000	diff=1.63144e-09
  0.000000	  0.000000	diff=2.06391e-10
  0.000000	  0.000000	diff=1.08632e-09
 -0.000000	  0.000000	diff=3.18057e-10
 -0.000000	 -0.000000	diff=1.25537e-09
 -0.000000	 -0.000000	diff=7.57212e-10
  0.000000	  0.000000	diff=6.61403e-10
  local_diff=3.75168e-08
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=7.40553e-10
  0.000000	  0.000000	diff=2.30196e-10
 -0.000000	  0.000000	diff=8.0866e-10
  0.000000	  0.000000	diff=1.07811e-10
 -0.000000	  0.000000	diff=3.93973e-10
 -0.000000	  0.000000	diff=1.29327e-09
 -0.000006	 -0.000006	diff=4.03617e-10
  0.000011	  0.000011	diff=9.34819e-10
  0.000000	 -0.000000	diff=7.41638e-10
 -0.000000	  0.000000	diff=1.4431e-09
  0.000000	  0.000000	diff=9.65704e-10
  0.000000	  0.000000	diff=2.89587e-10
  0.000000	 -0.000000	diff=9.06902e-10
 -0.000000	  0.000000	diff=9.77403e-10
 -0.000002	 -0.000002	diff=6.12853e-10
  0.000002	  0.000002	diff=9.30103e-11
 -0.000000	 -0.000000	diff=2.23185e-10
  0.000000	  0.000000	diff=3.70844e-10
  0.000000	  0.000000	diff=3.67704e-11
 -0.000000	  0.000000	diff=7.33238e-10
 -0.000000	  0.000000	diff=5.98742e-10
 -0.000000	  0.000000	diff=9.58221e-10
 -0.000000	 -0.000000	diff=1.93683e-10
  0.000001	  0.000001	diff=2.6182e-10
  0.000000	  0.000000	diff=4.25923e-10
  0.000000	 -0.000000	diff=1.05272e-09
 -0.000000	 -0.000000	diff=6.69566e-10
 -0.000000	 -0.000000	diff=1.15114e-09
  0.000000	 -0.000000	diff=2.98023e-10
 -0.000000	 -0.000000	diff=1.60549e-09
  0.000001	  0.000001	diff=3.76595e-11
 -0.000001	 -0.000001	diff=3.58334e-09
  local_diff=2.31435e-08
# W_emb_src, [2 5]
 -0.000000	  0.000000	diff=2.12594e-09
  0.000000	  0.000000	diff=7.56017e-10
 -0.000000	  0.000000	diff=1.36993e-09
 -0.000000	  0.000000	diff=9.09495e-10
 -0.000000	  0.000000	diff=1.04023e-09
 -0.000000	  0.000000	diff=1.81331e-09
 -0.000006	 -0.000006	diff=1.06904e-09
  0.000005	  0.000005	diff=5.08698e-09
 -0.000004	 -0.000004	diff=5.96252e-10
  0.000006	  0.000006	diff=4.26372e-09
  local_diff=1.90309e-08
# W_emb_tgt, [2 5]
 -0.000033	 -0.000033	diff=1.55548e-08
  0.000007	  0.000007	diff=2.74429e-09
 -0.000026	 -0.000025	diff=1.25687e-08
  0.000006	  0.000006	diff=2.4115e-09
 -0.000000	  0.000000	diff=1.59162e-09
 -0.000000	  0.000000	diff=6.53699e-10
 -0.000003	 -0.000003	diff=1.48727e-09
  0.000001	  0.000001	diff=5.1126e-10
 -0.000004	 -0.000004	diff=2.61739e-09
  0.000001	  0.000001	diff=7.37666e-10
  local_diff=4.08782e-08
# W_src_char{1}, [8 4]
  0.000000	 -0.000000	diff=8.19564e-10
 -0.000000	  0.000000	diff=1.56322e-09
 -0.000000	  0.000000	diff=1.1739e-09
 -0.000000	  0.000000	diff=7.98653e-10
  0.000000	 -0.000000	diff=1.66889e-09
 -0.000000	  0.000000	diff=6.30976e-10
 -0.000000	 -0.000000	diff=1.77846e-09
 -0.000000	 -0.000000	diff=2.29489e-10
 -0.000000	  0.000000	diff=2.77706e-09
 -0.000000	  0.000000	diff=1.65702e-09
  0.000000	 -0.000000	diff=7.78831e-10
 -0.000000	 -0.000000	diff=1.18234e-09
  0.000000	  0.000000	diff=4.34607e-10
 -0.000000	  0.000000	diff=9.46473e-10
 -0.000000	 -0.000000	diff=1.42379e-09
  0.000000	  0.000000	diff=3.78599e-10
 -0.000000	  0.000000	diff=1.13735e-11
 -0.000000	 -0.000000	diff=4.718e-10
 -0.000000	 -0.000000	diff=2.31352e-09
 -0.000000	  0.000000	diff=1.32445e-09
 -0.000000	 -0.000000	diff=1.65983e-09
 -0.000000	 -0.000000	diff=1.56319e-09
 -0.000000	 -0.000000	diff=2.87729e-10
 -0.000000	 -0.000000	diff=5.36625e-10
  0.000000	  0.000000	diff=6.82117e-11
  0.000000	  0.000000	diff=2.55795e-10
 -0.000000	 -0.000000	diff=1.36424e-10
 -0.000000	 -0.000000	diff=8.18545e-10
  0.000000	  0.000000	diff=2.1032e-10
  0.000000	  0.000000	diff=2.84217e-10
  0.000000	  0.000000	diff=9.96035e-10
 -0.000000	  0.000000	diff=1.56331e-09
  local_diff=3.07432e-08
# W_src_char{2}, [8 4]
 -0.000000	 -0.000000	diff=5.85483e-10
  0.000000	 -0.000000	diff=3.58122e-10
 -0.000000	 -0.000000	diff=1.3415e-09
  0.000000	 -0.000000	diff=6.08225e-10
 -0.000000	 -0.000000	diff=1.17666e-09
  0.000000	 -0.000000	diff=6.65075e-10
  0.000000	  0.000000	diff=2.33086e-10
 -0.000000	  0.000000	diff=4.10028e-10
 -0.000000	 -0.000000	diff=4.49063e-10
 -0.000000	 -0.000000	diff=1.48077e-09
  0.000000	  0.000000	diff=4.54747e-10
  0.000000	  0.000000	diff=1.21645e-09
 -0.000000	 -0.000000	diff=6.4233e-10
 -0.000000	 -0.000000	diff=5.28641e-10
 -0.000000	 -0.000000	diff=1.61815e-09
  0.000000	  0.000000	diff=2.64308e-10
 -0.000000	  0.000000	diff=4.12115e-10
  0.000000	  0.000000	diff=1.6712e-09
 -0.000000	  0.000000	diff=1.22213e-10
 -0.000000	  0.000000	diff=7.27596e-10
  0.000000	  0.000000	diff=8.52651e-11
 -0.000000	  0.000000	diff=1.02318e-09
  0.000000	 -0.000000	diff=1.80867e-10
  0.000000	 -0.000000	diff=1.09296e-09
  0.000000	  0.000000	diff=5.68434e-11
 -0.000000	  0.000000	diff=6.76437e-10
  0.000000	  0.000000	diff=2.72848e-10
 -0.000000	  0.000000	diff=1.54614e-09
  0.000000	  0.000000	diff=2.58638e-10
 -0.000000	  0.000000	diff=2.54374e-09
 -0.000000	  0.000000	diff=8.66887e-10
 -0.000000	 -0.000000	diff=9.74541e-10
  local_diff=2.45441e-08
# W_src_char{3}, [8 4]
  0.000000	 -0.000000	diff=4.54747e-10
 -0.000000	  0.000000	diff=1.15392e-09
 -0.000000	 -0.000000	diff=1.75078e-09
 -0.000000	  0.000000	diff=1.22213e-09
 -0.000000	 -0.000000	diff=1.15392e-09
 -0.000000	  0.000000	diff=1.87015e-09
 -0.000000	  0.000000	diff=1.08953e-09
 -0.000000	 -0.000000	diff=1.69505e-09
 -0.000000	 -0.000000	diff=8.98126e-10
 -0.000000	  0.000000	diff=3.18324e-10
 -0.000000	 -0.000000	diff=6.70752e-10
 -0.000000	  0.000000	diff=1.80762e-09
 -0.000000	 -0.000000	diff=1.69678e-09
 -0.000000	  0.000000	diff=1.14255e-09
 -0.000000	  0.000000	diff=2.98788e-10
  0.000000	 -0.000000	diff=1.71618e-09
 -0.000000	 -0.000000	diff=9.43601e-10
 -0.000000	  0.000000	diff=1.29035e-09
  0.000000	 -0.000000	diff=9.60654e-10
  0.000000	  0.000000	diff=4.54747e-10
 -0.000000	 -0.000000	diff=2.27374e-10
 -0.000000	  0.000000	diff=1.62004e-10
 -0.000000	 -0.000000	diff=1.82381e-09
  0.000000	  0.000000	diff=8.9718e-10
 -0.000000	 -0.000000	diff=9.32232e-10
  0.000000	  0.000000	diff=2.44427e-10
 -0.000000	 -0.000000	diff=6.82121e-11
  0.000000	  0.000000	diff=6.82121e-11
  0.000000	 -0.000000	diff=6.19593e-10
 -0.000000	  0.000000	diff=1.21361e-09
  0.000000	  0.000000	diff=4.31568e-10
 -0.000000	 -0.000000	diff=1.2806e-09
  local_diff=3.05575e-08
# W_emb_src_char, [2 5]
 -0.000000	  0.000000	diff=4.09273e-10
 -0.000000	  0.000000	diff=1.08571e-09
 -0.000000	 -0.000000	diff=2.77261e-10
 -0.000000	  0.000000	diff=8.16139e-10
 -0.000000	 -0.000000	diff=7.65244e-10
 -0.000000	  0.000000	diff=2.89069e-10
 -0.000000	 -0.000000	diff=1.50201e-10
 -0.000000	  0.000000	diff=1.04312e-09
  0.000000	 -0.000000	diff=9.59974e-10
  0.000000	  0.000000	diff=2.17764e-10
  local_diff=6.01375e-09
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=3.92252e-10
  0.000000	  0.000000	diff=3.40995e-10
  0.000000	  0.000000	diff=8.63897e-10
  0.000000	  0.000000	diff=5.92906e-10
 -0.000000	 -0.000000	diff=2.02707e-09
  0.000000	  0.000000	diff=2.3532e-10
  0.000014	  0.000014	diff=4.1976e-10
  0.000007	  0.000007	diff=4.07099e-10
 -0.000000	 -0.000000	diff=2.38179e-11
 -0.000000	 -0.000000	diff=5.15526e-11
 -0.000000	 -0.000000	diff=2.36338e-10
  0.000000	  0.000000	diff=6.60567e-10
 -0.000000	 -0.000000	diff=2.33629e-09
 -0.000000	 -0.000000	diff=1.22991e-09
  0.000037	  0.000037	diff=1.44435e-09
  0.000019	  0.000019	diff=4.49646e-10
  0.000000	  0.000000	diff=2.56006e-10
  0.000000	 -0.000000	diff=5.54666e-10
  0.000000	 -0.000000	diff=1.09879e-09
 -0.000000	  0.000000	diff=5.87467e-11
 -0.000000	  0.000000	diff=2.84626e-10
  0.000000	 -0.000000	diff=5.16268e-10
  0.000000	  0.000000	diff=1.63837e-09
  0.000000	  0.000000	diff=2.50255e-09
 -0.000000	  0.000000	diff=2.64328e-09
 -0.000000	 -0.000000	diff=1.23021e-10
  0.000000	  0.000000	diff=1.58419e-09
 -0.000000	 -0.000000	diff=1.30138e-09
 -0.000000	  0.000000	diff=5.94038e-10
  0.000000	 -0.000000	diff=4.12261e-10
  0.000000	  0.000000	diff=1.07747e-09
  0.000000	  0.000000	diff=1.27935e-09
  local_diff=2.76368e-08
# W_tgt_char{2}, [8 4]
  0.000000	 -0.000000	diff=7.5975e-10
 -0.000000	  0.000000	diff=1.29504e-09
 -0.000000	  0.000000	diff=3.91729e-10
 -0.000000	  0.000000	diff=9.95282e-10
 -0.000000	 -0.000000	diff=1.99114e-09
 -0.000000	  0.000000	diff=7.94081e-10
  0.000001	  0.000001	diff=1.49075e-09
  0.000001	  0.000001	diff=9.9459e-10
 -0.000000	  0.000000	diff=1.94776e-09
 -0.000000	 -0.000000	diff=1.0862e-09
 -0.000000	 -0.000000	diff=2.18983e-09
  0.000000	 -0.000000	diff=2.27044e-10
 -0.000000	  0.000000	diff=1.91814e-09
 -0.000000	 -0.000000	diff=1.408e-10
  0.000008	  0.000008	diff=4.35605e-10
  0.000009	  0.000009	diff=6.78312e-10
 -0.000000	  0.000000	diff=1.45317e-09
  0.000000	 -0.000000	diff=1.21783e-10
 -0.000000	 -0.000000	diff=4.45407e-10
 -0.000000	 -0.000000	diff=1.46573e-09
 -0.000000	  0.000000	diff=2.38942e-10
  0.000000	 -0.000000	diff=2.41257e-10
  0.000000	  0.000000	diff=4.58096e-10
  0.000000	  0.000000	diff=4.11007e-10
 -0.000000	  0.000000	diff=1.15576e-09
 -0.000000	 -0.000000	diff=1.45776e-09
 -0.000000	 -0.000000	diff=1.31813e-09
  0.000000	 -0.000000	diff=1.37103e-09
 -0.000000	  0.000000	diff=2.17285e-10
  0.000000	 -0.000000	diff=5.48797e-11
  0.000000	  0.000000	diff=9.26664e-10
  0.000000	  0.000000	diff=5.11557e-10
  local_diff=2.91845e-08
# W_tgt_char{3}, [8 4]
 -0.000000	 -0.000000	diff=4.77018e-10
 -0.000000	  0.000000	diff=1.43348e-09
  0.000000	  0.000000	diff=9.76607e-10
  0.000000	  0.000000	diff=2.32634e-10
 -0.000000	  0.000000	diff=1.00183e-09
 -0.000000	  0.000000	diff=2.00903e-10
  0.000001	  0.000001	diff=9.79994e-10
  0.000001	  0.000001	diff=6.17922e-10
 -0.000000	 -0.000000	diff=6.1423e-10
 -0.000000	 -0.000000	diff=1.55307e-09
 -0.000000	 -0.000000	diff=1.21353e-09
 -0.000000	 -0.000000	diff=5.33107e-10
 -0.000000	 -0.000000	diff=3.0263e-10
  0.000000	 -0.000000	diff=4.59671e-10
 -0.000011	 -0.000011	diff=2.06677e-10
 -0.000008	 -0.000008	diff=2.111e-10
 -0.000000	  0.000000	diff=1.55186e-09
 -0.000000	  0.000000	diff=4.37737e-10
 -0.000000	  0.000000	diff=1.22217e-09
 -0.000000	  0.000000	diff=8.64044e-10
 -0.000000	  0.000000	diff=2.27912e-11
 -0.000000	  0.000000	diff=1.06302e-09
  0.000000	  0.000000	diff=1.06116e-09
  0.000000	  0.000000	diff=7.31426e-10
  0.000000	  0.000000	diff=7.81579e-10
  0.000000	  0.000000	diff=2.33037e-10
 -0.000000	  0.000000	diff=1.61437e-09
 -0.000000	  0.000000	diff=4.5487e-11
 -0.000000	  0.000000	diff=2.29082e-09
 -0.000000	  0.000000	diff=1.11416e-09
  0.000000	  0.000000	diff=2.18392e-10
  0.000000	  0.000000	diff=8.1272e-10
  local_diff=2.50792e-08
# W_emb_tgt_char, [2 5]
 -0.000003	 -0.000003	diff=1.4049e-09
 -0.000009	 -0.000009	diff=1.24041e-09
  0.000000	  0.000000	diff=7.5886e-10
  0.000000	  0.000000	diff=4.94538e-10
 -0.000001	 -0.000001	diff=2.12739e-09
 -0.000006	 -0.000006	diff=3.30328e-10
 -0.000001	 -0.000001	diff=1.83251e-09
 -0.000003	 -0.000003	diff=1.07492e-09
 -0.000002	 -0.000002	diff=1.15058e-10
 -0.000003	 -0.000003	diff=5.96411e-10
  local_diff=9.97533e-09
# W_a, [2 2]
 -0.000000	 -0.000000	diff=1.30171e-09
 -0.000000	  0.000000	diff=5.68438e-12
 -0.000000	  0.000000	diff=4.94538e-10
 -0.000000	 -0.000000	diff=8.83915e-10
  local_diff=2.68585e-09
# W_h, [2 4]
 -0.000023	 -0.000023	diff=5.06171e-10
  0.000033	  0.000033	diff=8.98067e-10
  0.000028	  0.000028	diff=9.6819e-10
 -0.000039	 -0.000039	diff=1.12886e-09
 -0.000008	 -0.000008	diff=7.1506e-10
  0.000011	  0.000011	diff=3.44655e-10
  0.000013	  0.000013	diff=8.96008e-10
 -0.000025	 -0.000025	diff=2.11703e-09
  local_diff=7.57405e-09
# W_h_char, [2 4]
 -0.000000	 -0.000000	diff=2.23976e-10
 -0.000000	 -0.000000	diff=1.44022e-09
  0.000000	  0.000000	diff=1.12938e-11
  0.000000	  0.000000	diff=1.75115e-10
 -0.000000	 -0.000000	diff=1.76254e-09
 -0.000000	 -0.000000	diff=2.23439e-09
 -0.000000	  0.000000	diff=6.70887e-10
 -0.000000	  0.000000	diff=1.68715e-09
  local_diff=8.20556e-09
# W_soft, [5 2]
  0.000006	  0.000006	diff=4.54391e-10
  0.000003	  0.000003	diff=6.04885e-10
 -0.000016	 -0.000016	diff=1.36417e-09
  0.000004	  0.000004	diff=1.23265e-09
  0.000002	  0.000002	diff=2.85992e-10
 -0.000017	 -0.000017	diff=2.87293e-11
  0.000011	  0.000011	diff=1.21886e-09
 -0.000003	 -0.000003	diff=7.4173e-10
  0.000008	  0.000008	diff=3.24113e-10
  0.000001	  0.000001	diff=2.41554e-09
  local_diff=8.67106e-09
# W_soft_char, [5 2]
  0.000004	  0.000004	diff=1.89863e-09
 -0.000004	 -0.000004	diff=3.92426e-10
 -0.000000	 -0.000000	diff=2.70229e-10
  0.000000	  0.000000	diff=7.08099e-10
  0.000000	  0.000000	diff=1.69142e-09
  0.000003	  0.000003	diff=8.52412e-10
 -0.000005	 -0.000005	diff=6.57926e-10
  0.000001	  0.000001	diff=2.76694e-10
  0.000001	  0.000001	diff=8.65316e-10
  0.000001	  0.000001	diff=5.80656e-10
  local_diff=8.1938e-09
# Num params=416, abs_diff=3.93058e-07
Elapsed time is 14.138236 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charSrcSample', 0.5, 'charTgtSample', 0.5)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=0.1
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0.5
# charTgtSample = 0.5
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 0.1
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000013	 -0.000000	diff=1.30165e-05
  0.000013	  0.000000	diff=1.29991e-05
  0.000013	 -0.000000	diff=1.30073e-05
  0.000000	  0.000000	diff=2.98227e-10
  0.000013	 -0.000000	diff=1.30213e-05
  0.000013	 -0.000000	diff=1.30099e-05
  0.000007	  0.000007	diff=5.75419e-10
  0.000002	  0.000002	diff=5.89315e-11
  0.000000	  0.000000	diff=8.70641e-11
 -0.000000	 -0.000000	diff=3.16841e-10
  0.000000	  0.000000	diff=1.12352e-09
  0.000013	 -0.000000	diff=1.30044e-05
  0.000013	  0.000000	diff=1.29843e-05
  0.000013	  0.000000	diff=1.29997e-05
 -0.000008	 -0.000008	diff=2.74858e-10
  0.000014	 -0.000002	diff=1.62766e-05
 -0.000000	  0.000000	diff=4.7047e-10
  0.000000	 -0.000000	diff=1.17961e-10
  0.000013	  0.000000	diff=1.30036e-05
  0.000013	 -0.000000	diff=1.30052e-05
  0.000013	  0.000000	diff=1.30054e-05
 -0.000000	  0.000000	diff=6.64051e-10
 -0.000000	 -0.000000	diff=6.15936e-10
  0.000013	 -0.000000	diff=1.30627e-05
  0.000000	 -0.000000	diff=1.62909e-09
  0.000000	  0.000000	diff=3.24022e-10
 -0.000000	 -0.000000	diff=1.27948e-10
  0.000013	  0.000000	diff=1.30053e-05
  0.000000	 -0.000000	diff=1.41774e-09
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30684e-05
  0.000013	  0.000000	diff=1.29547e-05
  local_diff=0.000224437
# W_src{2}, [8 4]
 -0.000000	 -0.000000	diff=7.52227e-10
  0.000000	  0.000000	diff=1.18066e-10
  0.000000	 -0.000000	diff=8.30976e-10
  0.000013	  0.000000	diff=1.30046e-05
  0.000013	 -0.000000	diff=1.30052e-05
  0.000000	  0.000000	diff=8.77967e-10
  0.000023	  0.000009	diff=1.32115e-05
  0.000027	  0.000020	diff=7.63683e-06
  0.000000	  0.000000	diff=1.93792e-10
  0.000013	 -0.000000	diff=1.30043e-05
  0.000013	  0.000000	diff=1.30056e-05
  0.000000	 -0.000000	diff=5.33563e-10
  0.000000	  0.000000	diff=5.36667e-10
  0.000000	 -0.000000	diff=1.23156e-09
  0.000005	 -0.000008	diff=1.24899e-05
 -0.000016	 -0.000016	diff=1.31427e-09
  0.000000	 -0.000000	diff=8.69049e-10
 -0.000000	  0.000000	diff=3.51696e-10
  0.000000	 -0.000000	diff=9.59186e-10
  0.000000	  0.000000	diff=1.25094e-09
  0.000000	 -0.000000	diff=7.93662e-10
  0.000013	  0.000000	diff=1.30037e-05
  0.000000	  0.000000	diff=1.93153e-10
  0.000000	  0.000000	diff=4.54812e-10
  0.000000	  0.000000	diff=9.31392e-10
  0.000000	 -0.000000	diff=1.06818e-09
 -0.000000	  0.000000	diff=5.1661e-10
 -0.000000	 -0.000000	diff=5.03041e-10
  0.000013	  0.000000	diff=1.30046e-05
 -0.000000	 -0.000000	diff=7.40154e-12
 -0.000000	 -0.000000	diff=3.73717e-11
  0.000012	 -0.000000	diff=1.27686e-05
  local_diff=0.000124149
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=3.32616e-10
 -0.000000	 -0.000000	diff=2.24799e-10
  0.000013	  0.000000	diff=1.30013e-05
  0.000013	  0.000000	diff=1.29952e-05
  0.000000	  0.000000	diff=1.30781e-09
  0.000013	 -0.000000	diff=1.29996e-05
  0.000009	 -0.000004	diff=1.30047e-05
  0.000024	  0.000011	diff=1.30054e-05
  0.000013	 -0.000000	diff=1.30049e-05
  0.000013	  0.000000	diff=1.30022e-05
  0.000013	 -0.000000	diff=1.3009e-05
  0.000013	 -0.000000	diff=1.30193e-05
  0.000013	 -0.000000	diff=1.30075e-05
  0.000013	  0.000000	diff=1.3013e-05
  0.000023	  0.000010	diff=1.30037e-05
 -0.000030	 -0.000030	diff=1.0032e-09
  0.000000	  0.000000	diff=6.19479e-10
  0.000013	 -0.000000	diff=1.3004e-05
  0.000013	 -0.000000	diff=1.3005e-05
 -0.000000	  0.000000	diff=2.93315e-10
  0.000013	 -0.000000	diff=1.30047e-05
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	  0.000000	diff=6.87198e-10
  0.000013	 -0.000000	diff=1.30052e-05
 -0.000000	 -0.000000	diff=7.90002e-10
  0.000013	  0.000000	diff=1.30053e-05
  0.000000	  0.000000	diff=3.86365e-10
  0.000013	 -0.000000	diff=1.30052e-05
  0.000013	  0.000000	diff=1.30034e-05
 -0.000000	  0.000000	diff=3.11586e-12
  0.000000	 -0.000000	diff=9.56526e-10
  0.000000	  0.000000	diff=8.13589e-10
  0.000013	 -0.000000	diff=1.30048e-05
  0.000013	  0.000000	diff=1.3003e-05
  0.000000	 -0.000000	diff=1.5032e-09
 -0.000000	 -0.000000	diff=2.39496e-10
  0.000013	 -0.000000	diff=1.30056e-05
  0.000000	  0.000000	diff=3.6335e-11
  0.000000	  0.000000	diff=5.67723e-10
 -0.000001	 -0.000001	diff=4.51638e-10
  0.000013	  0.000000	diff=1.30041e-05
 -0.000000	 -0.000000	diff=6.70022e-10
  0.000013	  0.000000	diff=1.30035e-05
  0.000000	  0.000000	diff=2.99034e-10
  0.000013	  0.000000	diff=1.30044e-05
  0.000013	 -0.000000	diff=1.30055e-05
  0.000013	  0.000000	diff=1.30866e-05
 -0.000000	 -0.000000	diff=5.14582e-10
  local_diff=0.000364232
# W_tgt{2}, [8 4]
  0.000013	 -0.000000	diff=1.30042e-05
  0.000000	  0.000000	diff=1.72527e-09
  0.000013	  0.000000	diff=1.30044e-05
  0.000013	  0.000000	diff=1.30043e-05
  0.000000	  0.000000	diff=6.93308e-10
  0.000000	  0.000000	diff=2.40834e-10
  0.000012	 -0.000005	diff=1.65682e-05
  0.000014	  0.000008	diff=6.11144e-06
  0.000000	 -0.000000	diff=9.38314e-10
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	  0.000000	diff=3.46988e-10
  0.000013	  0.000000	diff=1.30041e-05
 -0.000000	 -0.000000	diff=3.40375e-10
 -0.000000	  0.000000	diff=7.52578e-10
  0.000007	 -0.000003	diff=1.07546e-05
  0.000005	  0.000005	diff=4.83659e-11
  0.000000	 -0.000000	diff=6.54293e-10
  0.000000	  0.000000	diff=2.42599e-10
 -0.000000	  0.000000	diff=5.90447e-11
  0.000013	  0.000000	diff=1.3004e-05
  0.000000	  0.000000	diff=3.62871e-10
  0.000000	  0.000000	diff=7.28785e-11
  0.000013	 -0.000000	diff=1.31563e-05
  0.000000	  0.000000	diff=1.13199e-09
  0.000013	  0.000000	diff=1.30041e-05
 -0.000000	 -0.000000	diff=1.60143e-10
  0.000013	 -0.000000	diff=1.3003e-05
  0.000000	 -0.000000	diff=2.62777e-10
  0.000013	 -0.000000	diff=1.30042e-05
  0.000013	 -0.000000	diff=1.30035e-05
  0.000001	  0.000001	diff=3.46462e-10
  0.000012	 -0.000001	diff=1.32958e-05
  local_diff=0.000189935
# W_emb_src, [2 5]
  0.000013	  0.000000	diff=1.30041e-05
  0.000013	  0.000000	diff=1.30036e-05
  0.000000	  0.000000	diff=1.81899e-10
  0.000013	  0.000000	diff=1.30054e-05
  0.000000	  0.000000	diff=9.32232e-10
 -0.000000	  0.000000	diff=3.97904e-10
  0.000013	 -0.000006	diff=1.86771e-05
  0.000013	  0.000005	diff=7.5653e-06
  0.000000	  0.000000	diff=2.27374e-10
  0.000019	  0.000000	diff=1.86332e-05
  local_diff=8.38904e-05
# W_emb_tgt, [2 5]
 -0.000020	 -0.000033	diff=1.29879e-05
  0.000007	  0.000007	diff=4.42803e-09
 -0.000013	 -0.000025	diff=1.29878e-05
  0.000006	  0.000006	diff=2.70684e-09
 -0.000000	  0.000000	diff=6.76437e-10
  0.000013	  0.000000	diff=1.30048e-05
 -0.000003	 -0.000003	diff=4.96475e-10
  0.000014	  0.000001	diff=1.30049e-05
  0.000009	 -0.000004	diff=1.30031e-05
  0.000014	  0.000001	diff=1.30053e-05
  local_diff=7.80021e-05
# W_src_char{1}, [8 4]
  0.000013	 -0.000000	diff=1.30038e-05
  0.000000	  0.000000	diff=6.47992e-10
  0.000000	  0.000000	diff=6.45094e-10
  0.000000	  0.000000	diff=2.27339e-11
  0.000013	 -0.000000	diff=1.30042e-05
  0.000000	  0.000000	diff=8.98112e-10
  0.000013	 -0.000000	diff=1.30041e-05
  0.000013	 -0.000000	diff=1.30053e-05
  0.000000	  0.000000	diff=1.30399e-10
  0.000000	  0.000000	diff=1.98902e-10
  0.000013	 -0.000000	diff=1.3004e-05
 -0.000000	 -0.000000	diff=7.5033e-10
 -0.000000	  0.000000	diff=2.84542e-10
 -0.000000	  0.000000	diff=2.01838e-10
  0.000013	  0.000000	diff=1.30032e-05
  0.000013	  0.000000	diff=1.30023e-05
 -0.000000	  0.000000	diff=6.42335e-10
  0.000013	 -0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=2.72843e-10
  0.000000	  0.000000	diff=4.49063e-10
 -0.000000	 -0.000000	diff=2.78532e-10
 -0.000000	 -0.000000	diff=4.54745e-11
 -0.000000	 -0.000000	diff=6.2879e-10
  0.000013	 -0.000000	diff=1.3005e-05
  0.000000	  0.000000	diff=7.56017e-10
  0.000013	  0.000000	diff=1.30037e-05
  0.000013	 -0.000000	diff=1.30039e-05
  0.000013	 -0.000000	diff=1.30053e-05
  0.000000	  0.000000	diff=3.58113e-10
  0.000000	  0.000000	diff=1.64846e-10
 -0.000000	  0.000000	diff=2.91468e-10
  0.000000	  0.000000	diff=3.23892e-10
  local_diff=0.000156057
# W_src_char{2}, [8 4]
  0.000013	 -0.000000	diff=1.30031e-05
  0.000000	 -0.000000	diff=1.19381e-10
  0.000013	 -0.000000	diff=1.30041e-05
  0.000000	 -0.000000	diff=1.00044e-09
  0.000000	 -0.000000	diff=8.75392e-10
  0.000013	 -0.000000	diff=1.30042e-05
  0.000013	  0.000000	diff=1.30051e-05
  0.000013	  0.000000	diff=1.30033e-05
  0.000013	 -0.000000	diff=1.30033e-05
  0.000013	 -0.000000	diff=1.30021e-05
  0.000000	  0.000000	diff=8.52651e-11
  0.000013	  0.000000	diff=1.30042e-05
  0.000013	 -0.000000	diff=1.30037e-05
  0.000000	 -0.000000	diff=1.19372e-09
  0.000013	  0.000000	diff=1.30042e-05
 -0.000000	  0.000000	diff=6.00895e-10
  0.000013	  0.000000	diff=1.30047e-05
 -0.000000	  0.000000	diff=4.60432e-10
  0.000000	  0.000000	diff=1.13687e-10
 -0.000000	  0.000000	diff=9.37916e-10
  0.000000	  0.000000	diff=2.84217e-11
  0.000013	  0.000000	diff=1.30048e-05
  0.000013	 -0.000000	diff=1.30035e-05
  0.000013	 -0.000000	diff=1.30039e-05
 -0.000000	  0.000000	diff=6.42331e-10
 -0.000000	  0.000000	diff=6.82121e-10
 -0.000000	  0.000000	diff=9.09495e-11
 -0.000000	  0.000000	diff=3.97904e-11
  0.000013	  0.000000	diff=1.3005e-05
  0.000000	  0.000000	diff=8.81073e-10
  0.000000	  0.000000	diff=2.78508e-10
 -0.000000	 -0.000000	diff=6.36323e-10
  local_diff=0.000195068
# W_src_char{3}, [8 4]
 -0.000000	 -0.000000	diff=1.93268e-10
  0.000000	  0.000000	diff=4.03588e-10
  0.000000	 -0.000000	diff=5.22959e-10
  0.000000	  0.000000	diff=1.25055e-10
  0.000013	 -0.000000	diff=1.30031e-05
  0.000013	  0.000000	diff=1.30042e-05
  0.000000	  0.000000	diff=4.39586e-10
 -0.000000	 -0.000000	diff=1.56543e-09
  0.000000	 -0.000000	diff=1.1255e-09
  0.000000	  0.000000	diff=1.42677e-09
  0.000013	 -0.000000	diff=1.3005e-05
  0.000000	  0.000000	diff=1.62004e-09
  0.000013	 -0.000000	diff=1.30041e-05
 -0.000000	  0.000000	diff=5.00223e-10
  0.000013	  0.000000	diff=1.30034e-05
  0.000000	 -0.000000	diff=9.98979e-10
  0.000013	 -0.000000	diff=1.30045e-05
  0.000013	  0.000000	diff=1.30054e-05
  0.000013	 -0.000000	diff=1.30044e-05
 -0.000000	  0.000000	diff=1.17666e-09
  0.000000	 -0.000000	diff=1.58593e-09
  0.000013	  0.000000	diff=1.30047e-05
  0.000013	 -0.000000	diff=1.30047e-05
  0.000013	  0.000000	diff=1.30051e-05
  0.000013	 -0.000000	diff=1.30052e-05
  0.000000	  0.000000	diff=8.52651e-10
  0.000013	 -0.000000	diff=1.30042e-05
  0.000000	  0.000000	diff=3.46745e-10
 -0.000000	 -0.000000	diff=8.92442e-10
  0.000013	  0.000000	diff=1.30042e-05
  0.000013	  0.000000	diff=1.30053e-05
  0.000013	 -0.000000	diff=1.30043e-05
  local_diff=0.000208086
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=1.87583e-10
  0.000000	  0.000000	diff=4.60432e-10
  0.000000	 -0.000000	diff=1.05997e-09
  0.000000	  0.000000	diff=1.84833e-11
  0.000000	 -0.000000	diff=5.70569e-10
  0.000013	  0.000000	diff=1.30049e-05
  0.000013	 -0.000000	diff=1.30037e-05
  0.000000	  0.000000	diff=1.62029e-10
  0.000013	 -0.000000	diff=1.30036e-05
  0.000013	  0.000000	diff=1.3003e-05
  local_diff=5.20177e-05
# W_tgt_char{1}, [8 4]
 -0.000000	 -0.000000	diff=2.80429e-10
  0.000013	  0.000000	diff=1.3003e-05
  0.000000	  0.000000	diff=1.60821e-09
  0.000013	  0.000000	diff=1.30049e-05
 -0.000000	 -0.000000	diff=8.6155e-10
  0.000013	  0.000000	diff=1.30048e-05
  0.000027	  0.000014	diff=1.30036e-05
  0.000007	  0.000007	diff=7.52139e-10
 -0.000000	 -0.000000	diff=2.8142e-10
  0.000013	 -0.000000	diff=1.30049e-05
 -0.000000	 -0.000000	diff=6.47773e-10
  0.000013	  0.000000	diff=1.30042e-05
 -0.000000	 -0.000000	diff=2.96897e-10
  0.000013	 -0.000000	diff=1.30059e-05
  0.000037	  0.000037	diff=8.56721e-10
  0.000032	  0.000019	diff=1.30042e-05
  0.000013	  0.000000	diff=1.30044e-05
  0.000000	 -0.000000	diff=8.90127e-10
 -0.000000	 -0.000000	diff=8.05458e-10
  0.000013	  0.000000	diff=1.30046e-05
 -0.000000	  0.000000	diff=3.07719e-10
 -0.000000	 -0.000000	diff=1.658e-10
  0.000000	  0.000000	diff=5.70167e-10
  0.000000	  0.000000	diff=1.25009e-09
  0.000013	  0.000000	diff=1.30047e-05
  0.000000	 -0.000000	diff=8.4049e-10
  0.000013	  0.000000	diff=1.30043e-05
 -0.000000	 -0.000000	diff=9.91464e-11
  0.000013	  0.000000	diff=1.30039e-05
  0.000013	 -0.000000	diff=1.3005e-05
  0.000000	  0.000000	diff=6.16585e-10
  0.000013	  0.000000	diff=1.30041e-05
  local_diff=0.000195077
# W_tgt_char{2}, [8 4]
  0.000013	 -0.000000	diff=1.30059e-05
  0.000013	  0.000000	diff=1.30044e-05
  0.000000	  0.000000	diff=1.61769e-09
  0.000013	  0.000000	diff=1.30028e-05
  0.000013	 -0.000000	diff=1.30042e-05
  0.000013	  0.000000	diff=1.30041e-05
  0.000001	  0.000001	diff=1.35234e-09
  0.000001	  0.000001	diff=5.20284e-10
  0.000013	  0.000000	diff=1.30038e-05
  0.000013	 -0.000000	diff=1.30051e-05
 -0.000000	 -0.000000	diff=1.26409e-10
  0.000000	 -0.000000	diff=1.05981e-09
  0.000013	  0.000000	diff=1.3004e-05
  0.000013	 -0.000000	diff=1.30036e-05
  0.000021	  0.000008	diff=1.30043e-05
  0.000022	  0.000009	diff=1.30033e-05
  0.000000	  0.000000	diff=1.41458e-09
  0.000000	 -0.000000	diff=1.35995e-10
  0.000013	 -0.000000	diff=1.3004e-05
  0.000013	 -0.000000	diff=1.30046e-05
  0.000013	  0.000000	diff=1.30048e-05
  0.000000	 -0.000000	diff=6.05055e-10
  0.000000	  0.000000	diff=6.3376e-10
  0.000000	  0.000000	diff=1.32604e-09
  0.000013	  0.000000	diff=1.30031e-05
 -0.000000	 -0.000000	diff=6.13636e-10
  0.000013	 -0.000000	diff=1.30043e-05
  0.000000	 -0.000000	diff=3.05218e-10
 -0.000000	  0.000000	diff=4.67396e-10
  0.000013	 -0.000000	diff=1.30053e-05
  0.000000	  0.000000	diff=1.22529e-10
  0.000000	  0.000000	diff=1.49708e-10
  local_diff=0.000221082
# W_tgt_char{3}, [8 4]
 -0.000000	 -0.000000	diff=1.30273e-10
  0.000013	  0.000000	diff=1.30029e-05
 -0.000000	  0.000000	diff=5.12691e-10
  0.000000	  0.000000	diff=1.8716e-10
  0.000013	  0.000000	diff=1.30052e-05
  0.000000	  0.000000	diff=4.30059e-10
  0.000001	  0.000001	diff=3.93076e-10
  0.000001	  0.000001	diff=1.62937e-10
  0.000013	 -0.000000	diff=1.30039e-05
  0.000013	 -0.000000	diff=1.30029e-05
  0.000013	 -0.000000	diff=1.30036e-05
  0.000013	 -0.000000	diff=1.30052e-05
 -0.000000	 -0.000000	diff=1.48326e-12
  0.000013	 -0.000000	diff=1.3003e-05
  0.000002	 -0.000011	diff=1.30034e-05
 -0.000008	 -0.000008	diff=2.53619e-10
 -0.000000	  0.000000	diff=3.46783e-10
  0.000013	  0.000000	diff=1.30046e-05
 -0.000000	  0.000000	diff=1.4666e-09
  0.000013	  0.000000	diff=1.30052e-05
  0.000000	  0.000000	diff=5.67896e-11
  0.000013	  0.000000	diff=1.30042e-05
  0.000000	  0.000000	diff=1.63588e-09
  0.000013	  0.000000	diff=1.30046e-05
  0.000013	  0.000000	diff=1.30046e-05
  0.000013	  0.000000	diff=1.30045e-05
  0.000013	  0.000000	diff=1.3003e-05
  0.000013	  0.000000	diff=1.30041e-05
  0.000013	  0.000000	diff=1.30042e-05
  0.000013	  0.000000	diff=1.30051e-05
  0.000000	  0.000000	diff=9.08446e-10
  0.000013	  0.000000	diff=1.30049e-05
  local_diff=0.000247086
# W_emb_tgt_char, [2 5]
 -0.000003	 -0.000003	diff=1.11918e-09
 -0.000009	 -0.000009	diff=3.21638e-09
  0.000000	  0.000000	diff=1.00613e-09
  0.000013	  0.000000	diff=1.30047e-05
  0.000012	 -0.000001	diff=1.30048e-05
 -0.000006	 -0.000006	diff=2.48291e-10
 -0.000001	 -0.000001	diff=7.3384e-10
  0.000010	 -0.000003	diff=1.30052e-05
  0.000011	 -0.000002	diff=1.30033e-05
  0.000010	 -0.000003	diff=1.30046e-05
  local_diff=6.50288e-05
# W_a, [2 2]
  0.000013	 -0.000000	diff=1.30033e-05
  0.000000	  0.000000	diff=3.24007e-10
  0.000013	  0.000000	diff=1.30037e-05
 -0.000000	 -0.000000	diff=7.67386e-10
  local_diff=2.60081e-05
# W_h, [2 4]
 -0.000012	 -0.000012	diff=1.28207e-09
  0.000017	  0.000017	diff=3.37318e-10
  0.000015	  0.000015	diff=5.58266e-10
 -0.000005	 -0.000021	diff=1.54409e-05
  0.000010	 -0.000005	diff=1.43144e-05
  0.000017	  0.000006	diff=1.04111e-05
  0.000010	  0.000010	diff=1.02944e-09
 -0.000007	 -0.000021	diff=1.39403e-05
  local_diff=5.41099e-05
# W_h_char, [2 4]
  0.000013	 -0.000000	diff=1.30041e-05
  0.000013	 -0.000000	diff=1.30035e-05
  0.000013	  0.000000	diff=1.3004e-05
  0.000000	  0.000000	diff=6.22555e-10
  0.000013	 -0.000000	diff=1.30042e-05
  0.000013	 -0.000000	diff=1.30038e-05
  0.000000	  0.000000	diff=8.69261e-10
  0.000000	  0.000000	diff=4.58939e-10
  local_diff=6.50216e-05
# W_soft, [5 2]
  0.000009	  0.000009	diff=9.27439e-10
  0.000013	 -0.000001	diff=1.34038e-05
 -0.000011	 -0.000011	diff=8.00566e-10
  0.000002	  0.000002	diff=8.90607e-10
  0.000015	  0.000001	diff=1.42655e-05
  0.000004	 -0.000011	diff=1.49065e-05
  0.000006	  0.000006	diff=3.16484e-10
 -0.000000	 -0.000000	diff=8.62655e-10
  0.000017	  0.000005	diff=1.17274e-05
  0.000000	  0.000000	diff=2.9478e-10
  local_diff=5.43072e-05
# W_soft_char, [5 2]
  0.000004	  0.000004	diff=4.84203e-10
 -0.000004	 -0.000004	diff=6.64271e-10
  0.000013	 -0.000000	diff=1.30038e-05
  0.000013	  0.000000	diff=1.30052e-05
  0.000013	  0.000000	diff=1.30032e-05
  0.000016	  0.000003	diff=1.30029e-05
 -0.000005	 -0.000005	diff=3.1719e-10
  0.000001	  0.000001	diff=1.30832e-09
  0.000014	  0.000001	diff=1.30042e-05
  0.000001	  0.000001	diff=2.41537e-10
  local_diff=6.50223e-05
# Num params=416, abs_diff=0.00266862
Elapsed time is 14.234380 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'attnFunc', 0, 'feedInput', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 110, individual sizes:  W_src{1}=32 W_tgt{1}=48 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 1
# attnFunc = 0
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 1
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 110
  src input 1: <s> y x
  src mask: 0  1  1
  tgt input 1: <s> a </s> </s> </s>
  tgt output 1: a </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.89253e-14
 -0.000000	 -0.000000	diff=3.80665e-13
  0.011919	  0.012356	diff=0.000436738
  0.000000	 -0.000000	diff=1.29395e-40
  0.000000	 -0.000000	diff=2.65023e-25
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.41404e-45
  0.000000	 -0.000000	diff=2.22235e-14
  0.000000	  0.000000	diff=7.91298e-13
 -0.015140	 -0.014509	diff=0.000631498
  0.000000	  0.000000	diff=1.39212e-40
  0.000000	 -0.000000	diff=3.6014e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.27927e-45
  0.000000	 -0.000000	diff=1.78724e-15
  0.000000	  0.000000	diff=5.13634e-39
 -0.001200	 -0.001196	diff=4.19215e-06
  0.000000	  0.000000	diff=1.24599e-41
  0.000000	  0.000000	diff=2.39132e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.35452e-56
  0.000000	  0.000000	diff=1.78724e-15
  0.000000	 -0.000000	diff=5.13634e-39
  0.001192	  0.001196	diff=4.17447e-06
  0.000000	 -0.000000	diff=1.23898e-41
  0.000000	 -0.000000	diff=2.36631e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.3542e-56
  local_diff=0.0010766
# W_tgt{1}, [8 6]
 -0.766914	 -0.785267	diff=0.018353
  0.000000	  0.000000	diff=1.06531e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.8815e-12
 -9.037399	 -9.410081	diff=0.372682
  0.054244	  0.055534	diff=0.00128949
 -0.000000	 -0.000000	diff=3.22055e-11
  0.000000	 -0.000000	diff=2.24719e-27
  1.007635	  0.981278	diff=0.0263573
  0.000000	  0.000000	diff=1.39069e-11
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.38594e-09
 12.379994	 11.758937	diff=0.621058
 -0.071480	 -0.069396	diff=0.00208473
  0.000000	  0.000000	diff=1.10955e-09
  0.000000	  0.000000	diff=1.34546e-26
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=1.49381e-27
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
  0.000000	 -0.000000	diff=2.84648e-29
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  0.009854	  0.009853	diff=6.14645e-07
  0.000000	  0.000000	diff=3.20479e-13
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=8.05226e-13
  0.034902	  0.034894	diff=8.33009e-06
  0.000064	  0.000064	diff=1.54139e-08
  0.000000	  0.000000	diff=1.45692e-13
  0.000000	  0.000000	diff=2.8019e-29
 -0.000227	 -0.000227	diff=5.94934e-10
 -0.000000	 -0.000000	diff=3.90064e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=7.45318e-13
 -0.000208	 -0.000208	diff=1.64888e-09
 -0.000002	 -0.000002	diff=2.72793e-11
  0.000000	 -0.000000	diff=4.30744e-13
  0.000000	 -0.000000	diff=5.33908e-31
  local_diff=1.04184
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.35585e-26
  0.000000	  0.000000	diff=2.8781e-25
  0.011324	  0.011717	diff=0.000393193
  0.010423	  0.010755	diff=0.000331839
  local_diff=0.000725031
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.22647e-11
 -0.000000	 -0.000000	diff=7.69642e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-11.591312	-12.408891	diff=0.817579
-10.192270	-10.804343	diff=0.612073
  0.000000	  0.000000	diff=1.82339e-09
  0.000000	  0.000000	diff=2.75363e-10
  local_diff=1.42965
# W_soft, [5 2]
  0.117985	  0.117958	diff=2.65055e-05
  0.128902	  0.128874	diff=2.84991e-05
 -0.253645	 -0.253670	diff=2.57773e-05
 -0.106455	 -0.106480	diff=2.53615e-05
  0.113363	  0.113319	diff=4.41675e-05
 -0.001808	 -0.001808	diff=8.08635e-09
 -0.001955	 -0.001955	diff=8.59921e-09
  0.002521	  0.002521	diff=7.92679e-09
  0.001512	  0.001512	diff=7.7748e-09
 -0.000270	 -0.000270	diff=1.26002e-08
  local_diff=0.000150356
# Num params=110, abs_diff=2.47345
Elapsed time is 0.872170 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'attnFunc', 0, 'feedInput', 1, 'numLayers', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 1
# attnFunc = 0
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.34816e-20
 -0.000000	 -0.000000	diff=2.53023e-09
  0.000000	  0.000000	diff=4.3787e-23
  0.000000	 -0.000000	diff=2.83846e-15
  0.000000	 -0.000000	diff=2.28652e-28
  0.000000	  0.000000	diff=3.16321e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.98503e-20
  0.000000	  0.000000	diff=3.93833e-09
  0.000000	 -0.000000	diff=5.56607e-23
  0.000000	  0.000000	diff=3.60822e-15
  0.000000	  0.000000	diff=2.87025e-28
  0.000000	 -0.000000	diff=4.73009e-22
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.51073e-51
  0.000000	  0.000000	diff=5.03598e-38
  0.000000	 -0.000000	diff=6.16669e-54
  0.000000	  0.000000	diff=7.00845e-46
  0.000000	  0.000000	diff=1.10983e-58
  0.000000	  0.000000	diff=2.51678e-53
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.8831e-45
  0.000000	 -0.000000	diff=2.23274e-32
  0.000000	  0.000000	diff=5.80397e-48
  0.000000	 -0.000000	diff=3.76267e-40
  0.000000	 -0.000000	diff=1.84266e-52
  0.000000	 -0.000000	diff=2.51047e-47
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=6.46857e-09
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=2.55428e-54
  0.000000	  0.000000	diff=8.76417e-53
  0.000000	 -0.000000	diff=1.31334e-54
  0.000000	  0.000000	diff=3.68385e-53
  0.000000	  0.000000	diff=1.67269e-54
  0.000000	  0.000000	diff=2.26763e-52
  0.000000	  0.000000	diff=1.02191e-29
  0.000000	  0.000000	diff=1.48421e-29
  0.000000	  0.000000	diff=1.97708e-48
  0.000000	 -0.000000	diff=1.69155e-47
  0.000000	  0.000000	diff=5.19604e-49
  0.000000	 -0.000000	diff=1.38666e-47
  0.000000	  0.000000	diff=3.01272e-48
  0.000000	 -0.000000	diff=8.27168e-47
  0.000000	 -0.000000	diff=9.0586e-24
  0.000000	  0.000000	diff=2.23467e-23
  0.000000	 -0.000000	diff=1.84561e-48
  0.000000	  0.000000	diff=3.1409e-48
  0.000000	  0.000000	diff=4.54393e-49
  0.000000	  0.000000	diff=1.14558e-48
  0.000000	 -0.000000	diff=1.83828e-48
  0.000000	  0.000000	diff=9.21113e-48
  0.000000	  0.000000	diff=6.85573e-25
  0.000000	 -0.000000	diff=2.36092e-24
  0.000000	 -0.000000	diff=1.01887e-47
  0.000000	 -0.000000	diff=7.26663e-47
  0.000000	  0.000000	diff=2.82651e-48
  0.000000	 -0.000000	diff=2.63008e-47
  0.000000	 -0.000000	diff=1.01827e-47
  0.000000	 -0.000000	diff=2.60012e-46
  0.000000	 -0.000000	diff=2.47598e-24
  0.000000	  0.000000	diff=1.0339e-24
  local_diff=3.79617e-23
# W_tgt{1}, [8 6]
 -0.000004	 -0.000004	diff=4.98508e-09
  0.050148	  0.048173	diff=0.00197547
 -0.000001	 -0.000001	diff=9.19684e-10
 -0.004852	 -0.004846	diff=6.11891e-06
 -0.000004	 -0.000004	diff=5.01857e-09
-16.861985	-16.882693	diff=0.0207085
 -0.000000	 -0.000000	diff=2.24089e-12
 -0.075760	 -0.075641	diff=0.000118743
 -0.000018	 -0.000018	diff=1.17178e-07
  0.286069	  0.239398	diff=0.0466703
 -0.000004	 -0.000004	diff=1.53264e-08
 -0.023675	 -0.023531	diff=0.000144739
 -0.000018	 -0.000019	diff=1.17959e-07
-64.009606	-64.502290	diff=0.492685
 -0.000000	 -0.000000	diff=5.06447e-12
 -0.370083	 -0.367324	diff=0.00275931
 -0.000003	 -0.000003	diff=2.8759e-09
 -0.092075	 -0.092172	diff=9.71693e-05
 -0.000000	 -0.000000	diff=5.83548e-11
  0.000138	  0.000138	diff=1.60813e-08
 -0.000003	 -0.000003	diff=2.98059e-09
  0.268381	  0.268231	diff=0.000150384
 -0.000000	 -0.000000	diff=1.88724e-12
 -0.095132	 -0.094937	diff=0.000195029
  0.000005	  0.000005	diff=6.1152e-09
  0.080428	  0.079878	diff=0.00055015
  0.000000	  0.000000	diff=3.99928e-12
  0.000395	  0.000395	diff=1.31383e-07
  0.000004	  0.000004	diff=5.45053e-09
  0.823579	  0.822744	diff=0.000835628
  0.000000	  0.000000	diff=1.41454e-12
  0.120081	  0.120523	diff=0.000441736
  0.000000	  0.000000	diff=2.37094e-13
 -0.000000	 -0.000000	diff=1.57625e-12
  0.000000	  0.000000	diff=5.50291e-13
  0.000000	  0.000000	diff=1.12205e-12
  0.000000	  0.000000	diff=1.65518e-13
  0.000001	  0.000001	diff=7.18465e-13
  0.000000	  0.000000	diff=3.33371e-17
 -0.000000	 -0.000000	diff=6.37372e-13
 -0.000002	 -0.000002	diff=1.67656e-09
  0.167861	  0.166870	diff=0.000990917
  0.000000	  0.000000	diff=3.56582e-11
 -0.000657	 -0.000656	diff=7.12819e-07
 -0.000001	 -0.000001	diff=4.07367e-10
 -0.704294	 -0.705065	diff=0.00077068
 -0.000000	 -0.000000	diff=1.96455e-12
 -0.007005	 -0.007064	diff=5.90446e-05
  local_diff=0.56916
# W_tgt{2}, [8 4]
  0.000000	  0.000000	diff=4.80799e-13
  0.000003	  0.000003	diff=1.17527e-12
  0.000001	  0.000001	diff=1.04317e-12
  0.000000	  0.000000	diff=1.1646e-12
  0.000000	  0.000000	diff=1.85515e-13
  0.000004	  0.000004	diff=8.67471e-13
 -0.000003	 -0.000003	diff=7.61113e-13
  0.000003	  0.000003	diff=7.73975e-13
  0.050823	  0.050903	diff=8.01664e-05
 -2.046568	 -2.047222	diff=0.000653766
 -0.207671	 -0.207474	diff=0.000197039
 -0.402314	 -0.402361	diff=4.70955e-05
 -0.077828	 -0.076264	diff=0.00156383
 -2.684246	 -2.690338	diff=0.00609235
  0.696532	  0.700552	diff=0.00401905
 -3.778872	 -3.779618	diff=0.000745874
 -0.128987	 -0.129030	diff=4.26756e-05
  0.061208	  0.061151	diff=5.68663e-05
 -0.126904	 -0.126919	diff=1.4947e-05
 -0.070657	 -0.070722	diff=6.55408e-05
 -0.291341	 -0.291436	diff=9.54034e-05
 -0.097532	 -0.097713	diff=0.000181571
  1.118120	  1.118619	diff=0.000499494
  0.380550	  0.379815	diff=0.000735855
  0.012946	  0.013209	diff=0.000263206
  0.461725	  0.461779	diff=5.36815e-05
  0.191919	  0.191890	diff=2.89226e-05
  0.679034	  0.678886	diff=0.000147656
  0.083802	  0.084460	diff=0.000658393
  1.541852	  1.540874	diff=0.000977706
 -1.205213	 -1.205056	diff=0.000157264
  4.465138	  4.463566	diff=0.00157229
  local_diff=0.0189506
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=7.02828e-09
 -0.000000	 -0.000000	diff=9.2605e-09
 -0.000000	 -0.000000	diff=2.94841e-12
 -0.000000	 -0.000000	diff=4.24691e-12
  local_diff=1.6296e-08
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=4.57964e-09
  0.000000	  0.000000	diff=3.29025e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-46.634814	-48.192947	diff=1.55813
 23.595116	 22.914322	diff=0.680794
-63.733324	-63.722799	diff=0.0105255
 32.900101	 32.948650	diff=0.0485487
  local_diff=2.298
# W_soft, [5 2]
 -0.194189	 -0.194362	diff=0.000173622
 -0.792482	 -0.792957	diff=0.00047466
  0.789507	  0.789365	diff=0.00014269
  0.710923	  0.710812	diff=0.00011126
 -0.512379	 -0.512858	diff=0.000478206
  0.259154	  0.258965	diff=0.000189717
  1.222390	  1.221652	diff=0.000737428
 -0.731666	 -0.731842	diff=0.000175899
 -1.237164	 -1.237267	diff=0.000103252
  0.489267	  0.488492	diff=0.000774967
  local_diff=0.0033617
# Num params=174, abs_diff=2.88947
Elapsed time is 1.824783 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'attnFunc', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 174, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_soft=10
# assert = 1
# attnFunc = 0
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 0
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 174
  src input 1: y y y x
  src mask: 1  1  1  1
  tgt input 1: <s> a a </s> </s>
  tgt output 1: a a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=1.05792e-13
  0.000000	  0.000000	diff=2.53484e-11
  0.000000	  0.000000	diff=1.75957e-17
  0.000000	 -0.000000	diff=4.30662e-21
  0.000165	  0.000169	diff=3.88032e-06
  0.000000	  0.000000	diff=2.26316e-19
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=2.31863e-18
  0.000000	 -0.000000	diff=3.43153e-26
 -0.000000	 -0.000000	diff=3.86931e-11
  0.000000	 -0.000000	diff=6.93468e-30
  0.000000	  0.000000	diff=5.47442e-21
  0.000000	 -0.000000	diff=2.10102e-35
  0.000000	 -0.000000	diff=1.15918e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.72548e-14
  0.000000	 -0.000000	diff=1.60375e-31
  0.000000	 -0.000000	diff=2.86987e-18
  0.000000	  0.000000	diff=6.57819e-32
 -0.000028	 -0.000028	diff=1.05142e-07
  0.000000	 -0.000000	diff=3.6913e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.77983e-19
  0.000000	  0.000000	diff=9.96869e-30
  0.000000	  0.000000	diff=1.84957e-41
  0.000000	  0.000000	diff=1.65824e-33
  0.000000	 -0.000000	diff=3.60782e-48
  0.000000	  0.000000	diff=1.59079e-20
  0.000000	 -0.000000	diff=1.27157e-36
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=3.78485e-34
  local_diff=3.98552e-06
# W_src{2}, [8 4]
  0.000156	  0.000155	diff=7.41308e-07
 -0.051950	 -0.051700	diff=0.000249554
  0.000002	  0.000002	diff=9.04276e-09
 -0.000395	 -0.000397	diff=1.88223e-06
  0.074041	  0.074211	diff=0.000169735
  0.015131	  0.015085	diff=4.60317e-05
  0.000000	  0.000000	diff=1.70435e-09
 -0.000000	 -0.000000	diff=8.95798e-11
  0.000000	 -0.000000	diff=1.04337e-60
  0.000000	  0.000000	diff=7.70033e-59
  0.000000	 -0.000000	diff=1.38359e-60
  0.000000	  0.000000	diff=1.86874e-59
  0.000000	 -0.000000	diff=3.10002e-60
  0.000000	  0.000000	diff=8.22314e-59
  0.000000	  0.000000	diff=1.00804e-29
  0.000000	  0.000000	diff=6.01278e-29
 -0.000001	 -0.000001	diff=3.38417e-09
 -0.025529	 -0.025469	diff=6.0629e-05
  0.000000	  0.000000	diff=6.1963e-11
 -0.000195	 -0.000195	diff=4.56596e-07
 -0.014545	 -0.014577	diff=3.201e-05
  0.008044	  0.008026	diff=1.81218e-05
  0.000000	  0.000000	diff=4.27358e-10
 -0.000000	 -0.000000	diff=7.18604e-11
  0.000001	  0.000001	diff=1.38785e-09
  0.020501	  0.020540	diff=3.89527e-05
 -0.000001	 -0.000001	diff=5.53349e-09
  0.000158	  0.000158	diff=2.98779e-07
 -0.077118	 -0.077009	diff=0.000109619
  0.006137	  0.006129	diff=7.8771e-06
 -0.000000	 -0.000000	diff=2.57831e-10
  0.000000	  0.000000	diff=4.56238e-11
  local_diff=0.000735931
# W_tgt{1}, [8 6]
  0.000068	  0.000068	diff=1.77923e-07
 -0.377777	 -0.375082	diff=0.00269499
  0.000038	  0.000038	diff=5.64938e-10
  0.179689	  0.179851	diff=0.000162355
  0.000086	  0.000086	diff=1.94569e-07
  0.430188	  0.390988	diff=0.0392
  0.000015	  0.000015	diff=5.30743e-08
 -0.037834	 -0.037604	diff=0.000229806
 -0.000000	 -0.000000	diff=2.53059e-09
 -0.335776	 -0.257176	diff=0.0786002
  0.000000	  0.000000	diff=2.89869e-09
  0.002525	  0.002506	diff=1.96204e-05
 -0.000000	 -0.000000	diff=2.47296e-09
  4.101734	  3.545747	diff=0.555988
 -0.000000	 -0.000000	diff=5.12821e-13
 -0.129065	 -0.124496	diff=0.00456849
 -0.000000	 -0.000000	diff=1.44817e-11
  0.016114	  0.016652	diff=0.000537924
  0.000000	  0.000000	diff=2.58485e-12
 -0.000028	 -0.000028	diff=1.18119e-10
  0.000001	  0.000001	diff=9.44108e-12
 -0.009378	 -0.009462	diff=8.34718e-05
  0.000000	  0.000000	diff=3.45116e-13
  0.003196	  0.003198	diff=1.76973e-06
  0.000000	  0.000000	diff=1.08825e-10
  0.004006	  0.005904	diff=0.00189828
  0.000005	  0.000005	diff=1.34465e-10
 -0.000122	 -0.000122	diff=7.82769e-08
  0.000009	  0.000009	diff=2.47621e-09
 -0.774061	 -0.774462	diff=0.00040099
  0.000000	  0.000000	diff=1.11953e-12
  0.008891	  0.008938	diff=4.66139e-05
 -0.000000	 -0.000000	diff=1.24573e-09
  0.000263	  0.000262	diff=7.83304e-07
 -0.000018	 -0.000018	diff=1.62356e-09
  0.000036	  0.000036	diff=1.03458e-07
 -0.000030	 -0.000030	diff=3.13933e-08
  0.000281	  0.000280	diff=8.98631e-07
 -0.000000	 -0.000000	diff=2.92322e-13
  0.000000	  0.000000	diff=1.08686e-12
 -0.000000	 -0.000000	diff=7.96117e-12
  0.002446	  0.003417	diff=0.000971146
 -0.000001	 -0.000001	diff=1.05707e-11
  0.000058	  0.000058	diff=1.59554e-08
 -0.000002	 -0.000002	diff=1.94472e-10
  0.417876	  0.417789	diff=8.67988e-05
 -0.000000	 -0.000000	diff=3.22329e-13
 -0.003831	 -0.003815	diff=1.58554e-05
  local_diff=0.685509
# W_tgt{2}, [8 4]
 -0.000000	 -0.000000	diff=6.66348e-13
  0.000000	  0.000000	diff=6.10105e-13
  0.000000	  0.000000	diff=9.65873e-13
  0.000000	  0.000000	diff=1.90049e-12
 -0.000000	 -0.000000	diff=1.11083e-12
  0.000000	  0.000000	diff=1.87989e-12
 -0.000000	 -0.000000	diff=1.35319e-12
  0.000000	  0.000000	diff=5.8262e-13
  0.217844	  0.218061	diff=0.00021704
 -0.472190	 -0.469976	diff=0.00221478
 -0.097230	 -0.097174	diff=5.5989e-05
 -0.325293	 -0.325539	diff=0.000246364
  0.557278	  0.559871	diff=0.00259358
 -1.526243	 -1.518094	diff=0.00814958
 -1.531277	 -1.529493	diff=0.00178395
 -0.515424	 -0.514534	diff=0.000889868
  0.068274	  0.068202	diff=7.15025e-05
 -0.053350	 -0.053277	diff=7.3371e-05
 -0.124763	 -0.124748	diff=1.50754e-05
 -0.005424	 -0.005436	diff=1.22185e-05
 -0.075474	 -0.075506	diff=3.23948e-05
 -0.183737	 -0.183720	diff=1.71131e-05
  0.407739	  0.407946	diff=0.000207326
 -0.249140	 -0.250224	diff=0.00108407
  0.072757	  0.072690	diff=6.67605e-05
  0.288081	  0.288275	diff=0.000194448
  0.089550	  0.089540	diff=9.712e-06
  0.362486	  0.363060	diff=0.000573974
 -0.168338	 -0.167893	diff=0.000445409
  1.041265	  1.041665	diff=0.000400359
 -0.279811	 -0.279331	diff=0.000480321
  3.008567	  3.001825	diff=0.00674267
  local_diff=0.0265779
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=5.09246e-10
  0.000000	  0.000000	diff=9.31547e-11
  0.000118	  0.000120	diff=1.95821e-06
  0.000000	 -0.000000	diff=6.74767e-15
  local_diff=1.95882e-06
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.02899e-11
 -0.000000	 -0.000000	diff=3.4354e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 29.868986	 30.897636	diff=1.02865
-15.147911	-14.914619	diff=0.233291
 -4.963032	 -5.462542	diff=0.49951
  2.964002	  2.824189	diff=0.139814
  local_diff=1.90126
# W_soft, [5 2]
 -0.169247	 -0.169422	diff=0.000174874
 -0.453029	 -0.453367	diff=0.000338023
  0.500466	  0.500293	diff=0.000173735
  0.537580	  0.537427	diff=0.000153904
 -0.414584	 -0.414930	diff=0.000346442
 -0.109892	 -0.110159	diff=0.000267945
  0.622417	  0.621976	diff=0.000441468
  0.210969	  0.210769	diff=0.00019921
 -1.050254	 -1.050476	diff=0.000222186
  0.328336	  0.327891	diff=0.000444995
  local_diff=0.00276278
# Num params=174, abs_diff=2.61686
Elapsed time is 2.081004 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 182, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 182
  src input 1: x x x x
  src mask: 1  1  1  1
  tgt input 1: <s> a b </s> </s>
  tgt output 1: a b </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=4.93503e-18
  0.000000	 -0.000000	diff=3.19414e-09
  0.000000	 -0.000000	diff=2.44249e-21
  0.000000	 -0.000000	diff=3.08856e-20
 -0.000024	 -0.000025	diff=7.41198e-07
  0.000000	  0.000000	diff=2.83662e-21
  0.000000	  0.000000	diff=0
 -0.004338	 -0.003739	diff=0.000598602
  0.000000	  0.000000	diff=8.36234e-18
 -0.000000	  0.000000	diff=5.10538e-09
  0.000000	 -0.000000	diff=5.85081e-30
  0.000000	  0.000000	diff=3.92607e-20
  0.000000	  0.000000	diff=1.67468e-35
  0.000000	  0.000000	diff=1.84301e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.37043e-65
  0.000000	  0.000000	diff=6.32063e-49
  0.000000	  0.000000	diff=3.04085e-22
  0.000000	  0.000000	diff=9.55397e-59
  0.000003	  0.000003	diff=1.18872e-08
  0.000000	 -0.000000	diff=3.52699e-22
  0.000000	  0.000000	diff=0
  0.000457	  0.000465	diff=8.08051e-06
  0.000000	  0.000000	diff=5.91871e-58
  0.000000	 -0.000000	diff=1.94462e-41
  0.000000	  0.000000	diff=4.20975e-41
  0.000000	 -0.000000	diff=2.93941e-51
  0.000000	  0.000000	diff=4.3221e-25
  0.000000	 -0.000000	diff=1.53881e-40
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=9.70234e-24
  local_diff=0.000607444
# W_src{2}, [8 4]
  0.000176	  0.000175	diff=8.10861e-07
 -0.001072	 -0.001068	diff=4.8646e-06
 -0.000006	 -0.000006	diff=2.76992e-08
  0.000009	  0.000009	diff=4.11615e-08
 -0.095347	 -0.095019	diff=0.000327664
  0.921614	  0.892052	diff=0.0295616
  0.000001	  0.000001	diff=7.21874e-09
 -0.000000	 -0.000000	diff=7.24867e-10
  0.000000	  0.000000	diff=3.88e-60
  0.000000	 -0.000000	diff=3.71388e-58
  0.000000	 -0.000000	diff=1.9284e-60
  0.000000	  0.000000	diff=3.08079e-60
  0.000000	  0.000000	diff=5.03233e-60
  0.000000	 -0.000000	diff=3.3848e-58
  0.000000	  0.000000	diff=2.031e-29
  0.000000	 -0.000000	diff=1.33195e-27
 -0.000006	 -0.000006	diff=1.38662e-08
 -0.001520	 -0.001516	diff=3.57357e-06
 -0.000000	 -0.000000	diff=2.80933e-10
 -0.000011	 -0.000011	diff=2.82381e-08
  0.051977	  0.051983	diff=6.17477e-06
  0.022476	  0.022467	diff=8.61443e-06
  0.000000	  0.000000	diff=1.73889e-09
 -0.000000	 -0.000000	diff=4.40835e-12
  0.000005	  0.000005	diff=1.0826e-08
 -0.000529	 -0.000533	diff=4.35019e-06
  0.000004	  0.000004	diff=1.62897e-08
 -0.000016	 -0.000016	diff=7.8695e-08
  0.183422	  0.182336	diff=0.00108665
 -0.719404	 -0.740052	diff=0.0206481
 -0.000000	 -0.000000	diff=1.18566e-09
  0.000000	  0.000000	diff=1.08773e-12
  local_diff=0.0516526
# W_tgt{1}, [8 6]
  0.000001	  0.000001	diff=2.19747e-09
  0.002266	  0.002363	diff=9.72871e-05
  0.000000	  0.000000	diff=4.32551e-12
  0.011301	  0.011283	diff=1.85713e-05
  0.000001	  0.000001	diff=2.20818e-09
  0.118309	  0.130815	diff=0.0125056
  0.000000	  0.000000	diff=1.1398e-12
  0.001645	  0.001653	diff=8.50111e-06
  0.000006	  0.000006	diff=5.15827e-08
  0.065185	  0.067860	diff=0.00267472
  0.000000	  0.000000	diff=4.87833e-11
  0.055231	  0.054791	diff=0.000439789
  0.000006	  0.000007	diff=5.18455e-08
 -1.550383	 -1.247777	diff=0.302606
  0.000000	  0.000000	diff=1.44921e-12
 -0.118018	 -0.118740	diff=0.000721926
  0.000001	  0.000001	diff=2.09766e-09
 -0.001827	 -0.001725	diff=0.000101285
 -0.000000	 -0.000000	diff=1.23039e-10
 -0.026644	 -0.026746	diff=0.000102817
 -0.000316	 -0.000315	diff=7.61028e-07
 -0.047123	 -0.046817	diff=0.000306806
  0.000001	  0.000001	diff=6.13507e-09
 -0.000442	 -0.000433	diff=8.51723e-06
 -0.000004	 -0.000004	diff=8.85394e-09
  0.010328	  0.010447	diff=0.00011902
 -0.000000	 -0.000000	diff=8.68028e-10
 -0.000704	 -0.000704	diff=2.19909e-08
 -0.000847	 -0.000842	diff=5.33828e-06
 -0.300936	 -0.301531	diff=0.000595316
  0.000003	  0.000003	diff=4.33726e-08
 -0.002802	 -0.002771	diff=3.04059e-05
 -0.000083	 -0.000083	diff=2.86866e-07
 -0.000050	 -0.000050	diff=1.97653e-07
 -0.000117	 -0.000116	diff=4.79512e-07
 -0.000064	 -0.000064	diff=2.61839e-07
  0.000484	  0.000486	diff=2.09958e-06
 -0.000011	 -0.000011	diff=4.4027e-08
 -0.000002	 -0.000002	diff=1.57142e-08
  0.000000	  0.000000	diff=1.02258e-11
  0.000001	  0.000001	diff=6.88076e-09
  0.000927	  0.000916	diff=1.04522e-05
  0.000000	  0.000000	diff=4.89584e-10
  0.002259	  0.002258	diff=7.12133e-07
  0.000627	  0.000630	diff=2.97819e-06
  0.079501	  0.079544	diff=4.22841e-05
 -0.000003	 -0.000003	diff=2.40266e-08
  0.000580	  0.000581	diff=7.55174e-07
  local_diff=0.320404
# W_tgt{2}, [8 4]
  0.000623	  0.000626	diff=2.82309e-06
 -0.000521	 -0.000521	diff=2.5315e-07
 -0.000003	 -0.000003	diff=1.36912e-08
  0.000336	  0.000335	diff=1.38493e-06
 -0.000708	 -0.000704	diff=3.80235e-06
  0.002136	  0.002146	diff=9.99194e-06
  0.000001	  0.000001	diff=3.62809e-09
  0.001020	  0.001025	diff=4.68635e-06
 -0.028184	 -0.028198	diff=1.35057e-05
 -0.698397	 -0.698107	diff=0.000289259
  0.005698	  0.005695	diff=3.21144e-06
 -0.012854	 -0.012841	diff=1.27889e-05
 -0.269652	 -0.271364	diff=0.00171247
 -1.439698	 -1.439778	diff=7.97449e-05
 -3.502950	 -3.498598	diff=0.00435172
 -1.256629	 -1.254933	diff=0.00169609
  0.055009	  0.055023	diff=1.35538e-05
  0.032590	  0.032581	diff=8.61794e-06
  0.014903	  0.014895	diff=7.44831e-06
 -0.059815	 -0.059821	diff=5.41646e-06
 -0.107267	 -0.106750	diff=0.000516204
 -0.001726	 -0.001739	diff=1.38488e-05
 -0.224488	 -0.224554	diff=6.61953e-05
 -0.754026	 -0.754435	diff=0.000408903
  0.807687	  0.806899	diff=0.000787914
  0.294375	  0.294421	diff=4.58131e-05
 -0.040411	 -0.040401	diff=9.91927e-06
 -0.375986	 -0.376130	diff=0.000144564
  0.350550	  0.350486	diff=6.32274e-05
  0.076409	  0.076324	diff=8.51704e-05
 -0.469218	 -0.469692	diff=0.000474252
 -4.537947	 -4.547018	diff=0.0090705
  local_diff=0.0199033
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000749	 -0.000730	diff=1.96452e-05
 -0.000000	 -0.000000	diff=2.39108e-11
  0.000000	  0.000000	diff=7.15057e-09
  0.000000	  0.000000	diff=8.25471e-09
  local_diff=1.96606e-05
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.54862e-12
 -0.000000	 -0.000000	diff=1.45275e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-30.217535	-26.560473	diff=3.65706
 12.763276	 13.667926	diff=0.90465
  7.149709	  7.083902	diff=0.0658071
 -3.640520	 -3.660044	diff=0.0195236
  local_diff=4.64704
# W_h, [2 4]
  0.361054	  0.356239	diff=0.00481585
 -0.000253	 -0.000252	diff=6.80117e-07
 -0.589500	 -0.603836	diff=0.0143357
  0.000514	  0.000516	diff=2.82851e-06
  3.893030	  3.840736	diff=0.0522934
 -2.774627	 -2.775989	diff=0.0013617
  2.929506	  2.932247	diff=0.00274088
 -2.944228	 -2.940896	diff=0.00333148
  local_diff=0.0788825
# W_soft, [5 2]
 -0.956667	 -0.957174	diff=0.000506976
  5.213387	  5.206646	diff=0.00674059
  0.155391	  0.148653	diff=0.0067377
 -2.569958	 -2.570744	diff=0.000785518
 -1.827009	 -1.827381	diff=0.000371877
  2.047773	  2.046128	diff=0.0016451
  0.008199	  0.004965	diff=0.0032344
  1.898402	  1.894751	diff=0.00365141
 -1.834499	 -1.836127	diff=0.00162829
 -2.109547	 -2.109716	diff=0.000168959
  local_diff=0.0254708
# Num params=182, abs_diff=5.14398
Elapsed time is 3.461454 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 1
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=1.6908e-34
  0.000000	  0.000000	diff=6.52136e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.14811e-34
  0.000000	 -0.000000	diff=8.31817e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78785e-73
  0.000000	 -0.000000	diff=5.70539e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.11556e-65
  0.000000	  0.000000	diff=3.2557e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.98983e-66
  0.000000	 -0.000000	diff=1.35318e-65
  0.000000	 -0.000000	diff=6.80857e-67
  0.000000	 -0.000000	diff=2.33138e-66
  0.000000	  0.000000	diff=1.85977e-66
  0.000000	 -0.000000	diff=1.05465e-65
  0.000000	  0.000000	diff=1.86755e-36
  0.000000	 -0.000000	diff=8.34134e-36
  0.000000	 -0.000000	diff=7.79664e-59
  0.000000	  0.000000	diff=5.83381e-58
  0.000000	  0.000000	diff=1.82474e-59
  0.000000	  0.000000	diff=9.23776e-59
  0.000000	 -0.000000	diff=8.49407e-59
  0.000000	  0.000000	diff=5.16748e-58
  0.000000	  0.000000	diff=1.11184e-29
  0.000000	  0.000000	diff=3.97523e-28
  0.000000	  0.000000	diff=1.29167e-59
  0.000000	 -0.000000	diff=5.90976e-59
  0.000000	 -0.000000	diff=5.78638e-60
  0.000000	 -0.000000	diff=8.1766e-60
  0.000000	  0.000000	diff=8.49742e-60
  0.000000	 -0.000000	diff=4.77459e-59
  0.000000	  0.000000	diff=1.60399e-29
  0.000000	 -0.000000	diff=2.8376e-29
  0.000000	 -0.000000	diff=2.05037e-59
  0.000000	  0.000000	diff=5.8094e-58
  0.000000	  0.000000	diff=1.34231e-59
  0.000000	  0.000000	diff=2.23857e-58
  0.000000	 -0.000000	diff=9.57301e-60
  0.000000	  0.000000	diff=8.27746e-58
  0.000000	  0.000000	diff=6.35455e-29
  0.000000	  0.000000	diff=2.21817e-28
  local_diff=7.38419e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_pos, [2 2]
  0.000000	 -0.000000	diff=1.5568e-29
  0.000000	  0.000000	diff=1.31341e-29
  0.000000	 -0.000000	diff=1.2133e-30
  0.000000	  0.000000	diff=1.25461e-30
  local_diff=3.117e-29
# v_pos, [1 2]
  0.000000	 -0.000000	diff=1.01433e-29
  0.000000	 -0.000000	diff=1.01748e-29
  local_diff=2.03181e-29
# W_h, [2 4]
  0.000000	 -0.000000	diff=3.05378e-30
  0.000000	 -0.000000	diff=3.65282e-30
  0.000000	 -0.000000	diff=1.54583e-30
  0.000000	  0.000000	diff=6.8135e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 3.836978 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 4, 'attnOpt', 1, 'normLocalAttn', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_pos=4 v_pos=2 W_h=8 W_soft=10
# assert = 1
# attnFunc = 4
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 1
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# distSigma = 0.5
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=2.05207e-34
  0.000000	  0.000000	diff=6.39362e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.6068e-34
  0.000000	 -0.000000	diff=8.10493e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78973e-73
  0.000000	 -0.000000	diff=5.66328e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.16685e-65
  0.000000	  0.000000	diff=3.22509e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.60818e-66
  0.000000	 -0.000000	diff=1.3726e-65
  0.000000	 -0.000000	diff=6.18161e-67
  0.000000	 -0.000000	diff=2.44331e-66
  0.000000	  0.000000	diff=1.53545e-66
  0.000000	 -0.000000	diff=1.09255e-65
  0.000000	  0.000000	diff=2.25926e-36
  0.000000	 -0.000000	diff=8.31161e-36
  0.000000	 -0.000000	diff=6.88912e-59
  0.000000	  0.000000	diff=5.69263e-58
  0.000000	  0.000000	diff=1.75168e-59
  0.000000	  0.000000	diff=9.00757e-59
  0.000000	 -0.000000	diff=7.69346e-59
  0.000000	  0.000000	diff=5.11068e-58
  0.000000	 -0.000000	diff=1.01718e-30
  0.000000	  0.000000	diff=3.83279e-28
  0.000000	  0.000000	diff=1.01335e-59
  0.000000	 -0.000000	diff=5.90452e-59
  0.000000	 -0.000000	diff=4.90621e-60
  0.000000	 -0.000000	diff=8.12488e-60
  0.000000	  0.000000	diff=7.24879e-60
  0.000000	 -0.000000	diff=4.95743e-59
  0.000000	  0.000000	diff=1.91065e-29
  0.000000	 -0.000000	diff=2.59326e-29
  0.000000	 -0.000000	diff=2.93937e-59
  0.000000	  0.000000	diff=5.46405e-58
  0.000000	  0.000000	diff=1.6321e-59
  0.000000	  0.000000	diff=2.08201e-58
  0.000000	 -0.000000	diff=1.73338e-59
  0.000000	  0.000000	diff=7.82759e-58
  0.000000	  0.000000	diff=7.59635e-29
  0.000000	  0.000000	diff=1.95989e-28
  local_diff=7.01288e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_pos, [2 2]
  0.000000	 -0.000000	diff=2.03525e-62
  0.000000	  0.000000	diff=1.99993e-62
  0.000000	 -0.000000	diff=7.41185e-61
  0.000000	  0.000000	diff=7.19324e-61
  local_diff=1.50086e-60
# v_pos, [1 2]
  0.000000	 -0.000000	diff=3.58507e-60
  0.000000	 -0.000000	diff=3.45947e-60
  local_diff=7.04454e-60
# W_h, [2 4]
  0.000000	 -0.000000	diff=1.64514e-31
  0.000000	 -0.000000	diff=4.52564e-30
  0.000000	  0.000000	diff=1.45161e-29
  0.000000	  0.000000	diff=7.35024e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 4.237008 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 2)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 186, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 186
  src input 1: <s> <s> <s> x
  src mask: 0  0  0  1
  tgt input 1: <s> b a </s> </s>
  tgt output 1: b a </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  0.000000	  0.000000	diff=2.84136e-12
 -0.000000	 -0.000000	diff=1.08705e-08
  0.000000	  0.000000	diff=4.35354e-28
  0.000000	 -0.000000	diff=3.7902e-19
  0.000000	  0.000000	diff=3.80498e-09
  0.000000	 -0.000000	diff=1.31211e-21
  0.000000	  0.000000	diff=0
 -0.000295	 -0.000313	diff=1.84108e-05
  0.000000	 -0.000000	diff=1.37629e-15
  0.000000	  0.000000	diff=1.706e-08
  0.000000	 -0.000000	diff=5.53448e-28
  0.000000	  0.000000	diff=4.81797e-19
  0.000000	  0.000000	diff=3.92982e-34
  0.000000	  0.000000	diff=1.34276e-26
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.36393e-63
  0.000000	  0.000000	diff=7.75651e-48
  0.000000	 -0.000000	diff=1.12218e-66
  0.000000	  0.000000	diff=1.17244e-57
  0.000000	  0.000000	diff=4.94959e-73
  0.000000	  0.000000	diff=1.08775e-65
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=6.34168e-56
  0.000000	 -0.000000	diff=2.3864e-40
  0.000000	  0.000000	diff=4.14312e-59
  0.000000	 -0.000000	diff=3.60717e-50
  0.000000	 -0.000000	diff=2.1743e-65
  0.000000	 -0.000000	diff=6.26542e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=1.84426e-05
# W_src{2}, [8 4]
  0.202300	  0.201320	diff=0.000980529
 -0.001527	 -0.001520	diff=7.25286e-06
  0.000000	  0.000000	diff=1.93239e-67
  0.000000	  0.000000	diff=1.29673e-65
 -0.054229	 -0.054985	diff=0.00075551
 -0.447640	 -0.445843	diff=0.00179676
 -0.000002	 -0.000002	diff=1.93635e-08
 -0.000001	 -0.000001	diff=6.58602e-09
  0.000000	  0.000000	diff=1.22435e-58
  0.000000	 -0.000000	diff=1.23594e-57
  0.000000	 -0.000000	diff=1.35677e-59
  0.000000	 -0.000000	diff=3.63704e-58
  0.000000	  0.000000	diff=1.65614e-58
  0.000000	 -0.000000	diff=1.05421e-57
  0.000000	 -0.000000	diff=1.00518e-28
  0.000000	 -0.000000	diff=1.80973e-29
  0.000000	  0.000000	diff=1.39634e-60
  0.000000	  0.000000	diff=8.05558e-59
  0.000000	  0.000000	diff=8.07005e-61
  0.000000	  0.000000	diff=1.57179e-59
  0.000000	  0.000000	diff=1.31804e-60
  0.000000	  0.000000	diff=1.68458e-59
  0.000000	 -0.000000	diff=5.92634e-29
  0.000000	  0.000000	diff=5.1287e-29
  0.000000	  0.000000	diff=2.10671e-58
  0.000000	 -0.000000	diff=1.84624e-57
  0.000000	 -0.000000	diff=4.8877e-59
  0.000000	 -0.000000	diff=6.59965e-58
  0.000000	  0.000000	diff=2.12639e-58
  0.000000	 -0.000000	diff=1.84458e-57
  0.000000	 -0.000000	diff=1.14264e-28
  0.000000	 -0.000000	diff=6.37404e-28
  local_diff=0.00354008
# W_tgt{1}, [8 6]
  0.000000	  0.000000	diff=7.33769e-10
  0.141449	  0.139208	diff=0.00224101
 -0.000000	 -0.000000	diff=6.64415e-12
 -0.051303	 -0.051210	diff=9.27442e-05
  0.000000	  0.000000	diff=7.34172e-10
-10.081949	-10.300090	diff=0.218141
  0.000000	  0.000000	diff=4.57047e-12
 -0.427313	 -0.429863	diff=0.00255021
  0.000002	  0.000002	diff=1.72443e-08
  0.645249	  0.589195	diff=0.056054
 -0.000000	 -0.000000	diff=1.07554e-10
 -0.250880	 -0.248682	diff=0.00219798
  0.000002	  0.000002	diff=1.7243e-08
-39.052507	-48.093148	diff=9.04064
  0.000000	  0.000000	diff=2.85422e-12
 -1.833732	 -1.891739	diff=0.0580063
  0.000001	  0.000001	diff=5.43038e-09
  0.001548	  0.001542	diff=6.01329e-06
  0.424869	  0.422093	diff=0.00277549
  0.119273	  0.119784	diff=0.000510345
  0.052768	  0.053011	diff=0.00024304
  4.015067	  4.058219	diff=0.0431522
 -0.000000	 -0.000000	diff=1.05603e-10
 -0.000000	 -0.000000	diff=3.46268e-10
  0.000001	  0.000001	diff=2.66145e-09
 -0.195365	 -0.195682	diff=0.000317279
 -0.419288	 -0.422083	diff=0.00279547
  0.054962	  0.055070	diff=0.000108537
 -0.052796	 -0.052552	diff=0.000243923
  1.272769	  1.254360	diff=0.0184092
 -0.000000	 -0.000000	diff=7.63491e-11
  0.476651	  0.473620	diff=0.00303052
  0.078380	  0.078648	diff=0.000268224
 -0.152772	 -0.152642	diff=0.00012968
 -0.145966	 -0.147191	diff=0.00122452
  0.176620	  0.175848	diff=0.000771725
 -0.008779	 -0.008769	diff=1.01943e-05
 -0.000130	 -0.000130	diff=4.92318e-07
 -0.000000	 -0.000000	diff=3.42909e-09
  0.000004	  0.000004	diff=2.71752e-08
 -0.000000	 -0.000000	diff=3.79138e-12
 -0.033422	 -0.040448	diff=0.00702548
 -0.010347	 -0.010349	diff=1.67465e-06
 -0.010037	 -0.010033	diff=3.62452e-06
 -0.001294	 -0.001293	diff=1.47119e-07
  0.001963	 -0.000637	diff=0.00259928
  0.000000	 -0.000000	diff=1.49367e-12
 -0.084897	 -0.085000	diff=0.000102408
  local_diff=9.46365
# W_tgt{2}, [8 4]
 -0.040413	 -0.040317	diff=9.55762e-05
  0.000114	  0.000113	diff=1.1906e-06
  1.634853	  1.626268	diff=0.00858488
 -0.000344	 -0.000342	diff=1.47626e-06
 -0.074450	 -0.074472	diff=2.24648e-05
 -0.007065	 -0.007057	diff=7.93432e-06
 -0.000549	 -0.000554	diff=4.2382e-06
 -0.024913	 -0.024986	diff=7.31898e-05
 -0.337594	 -0.338006	diff=0.000412173
 -0.848844	 -0.849370	diff=0.000525751
  0.017127	  0.017046	diff=8.08078e-05
 -0.150090	 -0.150266	diff=0.000175417
 -2.244617	 -2.263791	diff=0.0191747
 -0.301278	 -0.302497	diff=0.00121896
-11.097586	-15.471111	diff=4.37352
 -1.705289	 -1.706050	diff=0.000761059
 -0.650955	 -0.649652	diff=0.00130242
  0.024215	  0.024068	diff=0.000146728
 -0.109012	 -0.109162	diff=0.000149659
 -0.391435	 -0.391355	diff=8.00617e-05
 -0.691580	 -0.691759	diff=0.000178916
 -0.373718	 -0.373923	diff=0.000204181
  1.130090	  1.131621	diff=0.00153064
 -3.652747	 -3.647718	diff=0.00502912
  0.061236	  0.062593	diff=0.00135647
 -0.476080	 -0.476005	diff=7.51332e-05
 -1.021855	 -1.027286	diff=0.00543084
  1.161597	  1.161564	diff=3.35334e-05
  0.146315	  0.146280	diff=3.42331e-05
  0.262901	  0.263450	diff=0.000548911
 -1.070078	 -1.081191	diff=0.0111123
 11.577245	 11.566087	diff=0.0111583
  local_diff=4.44304
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000059	 -0.000060	diff=6.96861e-07
 -0.000000	 -0.000000	diff=2.83759e-10
 -0.000000	 -0.000000	diff=2.41071e-08
 -0.000000	 -0.000000	diff=2.78246e-08
  local_diff=7.49076e-07
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=3.57234e-11
  0.000000	  0.000000	diff=2.2417e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
559.422329	-167.970287	diff=727.393
 86.801647	 78.323606	diff=8.47804
 -7.093948	 -7.355292	diff=0.261344
  3.874106	  3.800851	diff=0.0732549
  local_diff=736.205
# W_a, [2 2]
  0.000000	 -0.000000	diff=2.0582e-61
  0.000000	  0.000000	diff=5.37308e-60
  0.000000	 -0.000000	diff=3.17416e-61
  0.000000	  0.000000	diff=3.10515e-60
  local_diff=9.00147e-60
# W_h, [2 4]
 -0.000125	 -0.000125	diff=2.24866e-08
 -0.113956	 -0.113957	diff=1.76377e-06
  0.005056	  0.005093	diff=3.74346e-05
  4.664955	  4.661302	diff=0.00365234
  0.562005	  0.559830	diff=0.0021747
  3.015950	  3.010888	diff=0.00506216
  0.180880	  0.193368	diff=0.0124887
  9.070915	  8.770021	diff=0.300893
  local_diff=0.324311
# W_soft, [5 2]
  5.298956	  5.294504	diff=0.00445189
  3.496526	  3.495333	diff=0.00119262
 -0.611222	 -0.611921	diff=0.000698424
 -4.256638	 -4.257401	diff=0.000763058
 -3.917092	 -3.920516	diff=0.00342374
 -4.843103	 -4.848733	diff=0.00563023
  5.135636	  5.135463	diff=0.00017362
 -1.028531	 -1.028903	diff=0.000371967
 -0.129944	 -0.130478	diff=0.000534327
  0.877976	  0.872652	diff=0.00532419
  local_diff=0.0225641
# Num params=186, abs_diff=750.462
Elapsed time is 3.298395 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'initRange', 10, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 0.8, 'isReverse', 1, 'attnFunc', 1, 'attnOpt', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 188, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_a=4 v_a=2 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 3
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 0
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 0
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 0
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 0
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 5
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# tgtVocabSize = 5
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# modelSize = 188
  src input 1: <s> <s> y x
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=1.14917e-16
  0.000000	  0.000000	diff=2.00631e-11
  0.000000	 -0.000000	diff=6.9535e-25
  0.000000	  0.000000	diff=5.70226e-25
  0.000000	  0.000000	diff=2.05207e-34
  0.000000	  0.000000	diff=6.39362e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=1.46081e-16
 -0.000000	 -0.000000	diff=3.25774e-11
  0.000000	  0.000000	diff=1.17829e-24
  0.000000	 -0.000000	diff=7.13564e-25
  0.000000	 -0.000000	diff=2.6068e-34
  0.000000	 -0.000000	diff=8.10514e-27
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.66965e-60
  0.000000	 -0.000000	diff=1.72064e-50
  0.000000	  0.000000	diff=7.08952e-64
  0.000000	  0.000000	diff=1.02267e-64
  0.000000	 -0.000000	diff=1.78973e-73
  0.000000	 -0.000000	diff=5.66328e-66
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=4.39037e-52
  0.000000	  0.000000	diff=4.50645e-41
  0.000000	 -0.000000	diff=5.49013e-56
  0.000000	  0.000000	diff=1.1819e-56
  0.000000	  0.000000	diff=1.16685e-65
  0.000000	  0.000000	diff=3.22509e-58
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=5.26408e-11
# W_src{2}, [8 4]
  0.000000	  0.000000	diff=1.60818e-66
  0.000000	 -0.000000	diff=1.3726e-65
  0.000000	 -0.000000	diff=6.18161e-67
  0.000000	 -0.000000	diff=2.44331e-66
  0.000000	  0.000000	diff=1.53545e-66
  0.000000	 -0.000000	diff=1.09255e-65
  0.000000	  0.000000	diff=2.25926e-36
  0.000000	 -0.000000	diff=8.31161e-36
  0.000000	 -0.000000	diff=6.88945e-59
  0.000000	  0.000000	diff=5.69275e-58
  0.000000	  0.000000	diff=1.75181e-59
  0.000000	  0.000000	diff=9.00792e-59
  0.000000	 -0.000000	diff=7.69378e-59
  0.000000	  0.000000	diff=5.1108e-58
  0.000000	 -0.000000	diff=1.06584e-30
  0.000000	  0.000000	diff=3.83362e-28
  0.000000	  0.000000	diff=1.01334e-59
  0.000000	 -0.000000	diff=5.90469e-59
  0.000000	 -0.000000	diff=4.90635e-60
  0.000000	 -0.000000	diff=8.12542e-60
  0.000000	  0.000000	diff=7.24875e-60
  0.000000	 -0.000000	diff=4.95763e-59
  0.000000	  0.000000	diff=1.91338e-29
  0.000000	 -0.000000	diff=2.5942e-29
  0.000000	 -0.000000	diff=2.94027e-59
  0.000000	  0.000000	diff=5.46423e-58
  0.000000	  0.000000	diff=1.63229e-59
  0.000000	  0.000000	diff=2.08208e-58
  0.000000	 -0.000000	diff=1.73417e-59
  0.000000	  0.000000	diff=7.82782e-58
  0.000000	  0.000000	diff=7.60647e-29
  0.000000	  0.000000	diff=1.96064e-28
  local_diff=7.01633e-28
# W_tgt{1}, [8 6]
 -0.109245	 -0.108524	diff=0.000721356
 -1.491054	 -1.501271	diff=0.0102161
  0.105101	  0.105759	diff=0.000657979
 -0.009639	 -0.009740	diff=0.000101434
 14.565365	 14.516677	diff=0.0486882
  3.264152	  3.295769	diff=0.0316176
 -0.000002	 -0.000002	diff=2.24829e-08
  0.000066	  0.000066	diff=3.63528e-07
  0.000014	  0.000014	diff=1.07976e-07
 -0.294587	 -0.297338	diff=0.00275053
  0.000000	  0.000000	diff=7.65692e-11
  0.021883	  0.021709	diff=0.000173546
  0.000014	  0.000014	diff=1.08827e-07
  9.393393	  9.873064	diff=0.479671
  0.000000	  0.000000	diff=5.43812e-13
  0.680081	  0.680679	diff=0.00059825
 -0.000255	 -0.000256	diff=6.65952e-07
 -1.031588	 -1.036162	diff=0.0045743
 -0.038411	 -0.038320	diff=9.01421e-05
 -0.006482	 -0.006497	diff=1.56389e-05
 -5.394742	 -5.406885	diff=0.0121424
  1.024424	  1.035646	diff=0.0112218
  0.000000	  0.000000	diff=1.18231e-12
 -0.000025	 -0.000025	diff=8.89229e-08
 -0.000003	 -0.000003	diff=7.22607e-09
 -0.001107	 -0.001103	diff=3.97415e-06
 -0.000000	 -0.000000	diff=8.90249e-12
 -0.000920	 -0.000921	diff=1.14986e-06
 -0.000003	 -0.000003	diff=7.43795e-09
 -0.043856	 -0.044760	diff=0.000903666
 -0.000000	 -0.000000	diff=7.75454e-14
  0.000031	  0.000031	diff=6.14265e-08
 -0.000411	 -0.000412	diff=1.56012e-06
  0.316470	  0.316048	diff=0.000422506
 -0.060278	 -0.060060	diff=0.000218637
  0.000000	  0.000000	diff=1.62665e-11
 -8.284228	 -8.314884	diff=0.0306569
  0.000093	  0.000093	diff=1.68128e-08
  0.000000	 -0.000000	diff=1.83605e-12
  0.000000	  0.000000	diff=3.46882e-13
  0.000001	  0.000001	diff=5.77721e-10
  0.000287	  0.000288	diff=3.00061e-07
 -0.000025	 -0.000025	diff=3.8735e-11
  0.000890	  0.000890	diff=2.90528e-07
 -0.003520	 -0.003520	diff=3.91565e-09
  0.146241	  0.146259	diff=1.7761e-05
  0.000000	  0.000000	diff=4.10365e-13
 -0.000012	 -0.000012	diff=4.53154e-09
  local_diff=0.635468
# W_tgt{2}, [8 4]
  1.882066	  1.879364	diff=0.00270274
 23.159913	 23.069040	diff=0.0908728
  0.073628	  0.073519	diff=0.000109129
 -0.508463	 -0.508402	diff=6.10836e-05
  1.484611	  1.484511	diff=0.000100181
  0.172622	  0.173328	diff=0.000706449
 -0.063103	 -0.062922	diff=0.000180578
 42.484958	 42.947960	diff=0.463002
 -0.606334	 -0.605905	diff=0.00042819
 -0.302393	 -0.302121	diff=0.000271581
  0.065885	  0.065841	diff=4.3862e-05
  0.065513	  0.065517	diff=4.76313e-06
 -1.284509	 -1.283960	diff=0.000549235
 -0.801008	 -0.800121	diff=0.000886765
 -5.810743	 -5.801940	diff=0.00880256
 -0.404072	 -0.402524	diff=0.00154879
 -0.300640	 -0.300249	diff=0.000390754
 -0.077945	 -0.077951	diff=5.39903e-06
 -0.003349	 -0.003384	diff=3.43511e-05
 -0.006138	 -0.006123	diff=1.51682e-05
 -0.508465	 -0.508079	diff=0.0003854
 -0.071423	 -0.071449	diff=2.58403e-05
 -0.811968	 -0.809860	diff=0.00210822
 -0.478058	 -0.476134	diff=0.00192334
  2.819417	  2.820698	diff=0.00128154
  0.269680	  0.269954	diff=0.000274573
  0.090168	  0.090088	diff=8.01495e-05
 -0.701471	 -0.701253	diff=0.000217403
  2.223355	  2.222940	diff=0.000415121
 -0.209228	 -0.209088	diff=0.000140169
 -0.919323	 -0.917636	diff=0.00168664
 -9.096269	 -9.062007	diff=0.0342613
  local_diff=0.613516
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=5.79948e-11
  0.000000	  0.000000	diff=7.79868e-11
  0.000000	 -0.000000	diff=6.4734e-16
  0.000000	 -0.000000	diff=7.41616e-16
  local_diff=1.35983e-10
# W_emb_tgt, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=2.10642e-13
  0.000001	  0.000001	diff=7.78654e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-29.277122	-26.627525	diff=2.6496
 13.925877	 14.625599	diff=0.699722
113.571414	116.212283	diff=2.64087
-11.099175	-10.951618	diff=0.147557
  local_diff=6.13774
# W_a, [2 2]
  0.000000	  0.000000	diff=8.92233e-45
  0.000000	 -0.000000	diff=4.22374e-45
  0.000000	 -0.000000	diff=1.05097e-45
  0.000000	  0.000000	diff=7.00649e-46
  local_diff=1.48977e-44
# v_a, [1 2]
  0.000000	 -0.000000	diff=3.50325e-46
  0.000000	 -0.000000	diff=1.22614e-44
  local_diff=1.26117e-44
# W_h, [2 4]
  0.000000	 -0.000000	diff=1.54773e-31
  0.000000	 -0.000000	diff=4.51954e-30
  0.000000	  0.000000	diff=1.46735e-29
  0.000000	  0.000000	diff=7.43004e-30
  4.342580	  4.345694	diff=0.00311458
  3.006372	  3.006686	diff=0.000314818
 16.380408	 16.281451	diff=0.0989567
  1.176798	  1.158479	diff=0.0183195
  local_diff=0.120706
# W_soft, [5 2]
 -1.947622	 -1.950933	diff=0.00331034
 -0.584315	 -0.585922	diff=0.0016075
 -0.173022	 -0.173301	diff=0.000278853
 -2.039176	 -2.042249	diff=0.00307274
  4.752537	  4.752405	diff=0.00013258
  0.068892	  0.068544	diff=0.000347511
  0.071598	  0.071378	diff=0.000220456
 -0.494063	 -0.494123	diff=6.00079e-05
 -0.845745	 -0.846086	diff=0.000341469
  1.200331	  1.200287	diff=4.3288e-05
  local_diff=0.00941474
# Num params=188, abs_diff=7.51685
Elapsed time is 3.026579 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 224, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 1
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 224
  src input 1: <s> xy xy xyz
  src mask: 0  1  1  1
  tgt input 1: <s> abc </s> </s> </s>
  tgt output 1: abc </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.014422	  0.004109	diff=0.0185308
  0.002207	  0.001194	diff=0.00101295
 -0.088446	 -0.017919	diff=0.0705269
 -0.000890	 -0.000792	diff=9.80391e-05
 -0.014316	  0.004225	diff=0.0185406
  0.002208	  0.001233	diff=0.000974889
  7.393809	  0.781977	diff=6.61183
 -3.372355	 -1.054398	diff=2.31796
  0.000000	  0.000000	diff=4.8101e-08
 -0.000007	  0.000008	diff=1.47318e-05
  0.114852	  0.022921	diff=0.0919317
 -0.000000	  0.000000	diff=1.12815e-08
  0.000000	  0.000000	diff=1.06674e-15
  0.000000	 -0.000000	diff=2.93856e-16
  0.000000	 -0.000000	diff=1.66919e-13
  0.000000	  0.000000	diff=3.7071e-14
 -0.034329	 -0.023917	diff=0.0104124
 -0.005477	 -0.002234	diff=0.00324344
 -0.005999	 -0.004005	diff=0.00199342
  0.002666	  0.002544	diff=0.000122491
 -0.039335	 -0.026850	diff=0.012485
 -0.003770	 -0.000660	diff=0.00310974
  2.101842	  0.905877	diff=1.19596
  0.088754	 -0.237278	diff=0.326033
 -0.016374	 -0.018685	diff=0.00231134
  0.002571	  0.001982	diff=0.000589444
 -0.002824	 -0.003270	diff=0.000446457
  0.001832	  0.001855	diff=2.29966e-05
 -0.019701	 -0.022475	diff=0.00277456
  0.004397	  0.003832	diff=0.000564804
  0.287555	  0.555542	diff=0.267988
 -0.549028	 -0.486991	diff=0.0620366
  local_diff=11.0215
# W_src{2}, [8 4]
  0.233995	  0.191042	diff=0.0429527
 -0.183902	 -0.239386	diff=0.0554836
 -0.025584	 -0.013430	diff=0.0121539
 -0.006252	 -0.019072	diff=0.0128199
  0.303681	  0.265829	diff=0.037852
 -0.259637	 -0.319260	diff=0.0596226
 -2.412230	 -1.267142	diff=1.14509
  1.502105	 -0.488374	diff=1.99048
  0.057157	  0.051821	diff=0.00533587
  0.016757	 -0.011268	diff=0.0280247
 -0.022915	 -0.016064	diff=0.00685069
  0.018561	  0.009948	diff=0.00861331
  0.051425	  0.053951	diff=0.00252671
  0.034471	 -0.000509	diff=0.0349801
  2.665795	  1.567593	diff=1.0982
 -0.022388	 -0.258163	diff=0.235775
  0.111623	  0.099489	diff=0.0121339
  0.137407	  0.066069	diff=0.0713381
 -0.054560	 -0.038598	diff=0.0159621
  0.064103	  0.040976	diff=0.0231269
  0.081585	  0.087472	diff=0.00588721
  0.208652	  0.117014	diff=0.0916375
  9.297132	  5.147540	diff=4.14959
  3.802074	  2.053153	diff=1.74892
 -0.367908	 -0.264432	diff=0.103476
 -0.092203	  0.021873	diff=0.114076
  0.078660	  0.046298	diff=0.0323622
 -0.079249	 -0.045145	diff=0.0341041
 -0.414744	 -0.328902	diff=0.0858429
 -0.076785	  0.053404	diff=0.130189
 -3.098983	 -1.297944	diff=1.80104
 -9.215878	 -5.532977	diff=3.6829
  local_diff=16.8793
# W_tgt{1}, [8 6]
 -0.063488	 -0.063476	diff=1.21489e-05
 12.344147	 13.613755	diff=1.26961
 -0.368576	 -0.362635	diff=0.00594132
 -0.000186	 -0.000185	diff=2.45764e-07
  0.000027	  0.000027	diff=3.71466e-08
 -0.001175	 -0.001244	diff=6.91386e-05
 -0.000000	 -0.000000	diff=2.47531e-09
  0.195654	  0.195597	diff=5.69358e-05
 -0.308531	 -0.308248	diff=0.000283235
-13.400021	-12.275934	diff=1.12409
  0.340943	  0.346256	diff=0.00531311
 -0.000906	 -0.000900	diff=5.81538e-06
  0.000130	  0.000131	diff=8.33416e-07
 -0.013987	 -0.014807	diff=0.00081995
 -0.000002	 -0.000002	diff=2.62967e-08
  0.951107	  0.949845	diff=0.00126223
  0.186769	  0.186939	diff=0.000170751
  3.184186	  3.239933	diff=0.0557476
  0.444885	  0.443537	diff=0.00134792
 -0.000277	 -0.000276	diff=5.43852e-07
  0.000040	  0.000040	diff=7.8441e-08
 -0.009054	 -0.009049	diff=5.20689e-06
 -0.000001	 -0.000001	diff=2.46748e-09
  0.290942	  0.290817	diff=0.000124917
  0.147115	  0.147202	diff=8.61456e-05
 -3.179073	 -3.123390	diff=0.0556826
  0.432079	  0.431054	diff=0.00102501
  0.000273	  0.000274	diff=5.35598e-07
 -0.000040	 -0.000040	diff=7.75832e-08
  0.008771	  0.008774	diff=3.63073e-06
  0.000001	  0.000001	diff=2.38538e-09
 -0.288918	 -0.289047	diff=0.000129052
  0.170964	  0.171107	diff=0.000142369
 -0.000670	 -0.000667	diff=2.54844e-06
 -0.108413	 -0.107224	diff=0.00118864
 -0.000000	 -0.000000	diff=4.49061e-10
  0.000000	  0.000000	diff=1.92735e-10
 -0.000043	 -0.000043	diff=1.59735e-07
  0.000000	  0.000000	diff=6.07306e-11
 -0.000000	 -0.000000	diff=3.11299e-09
  0.000002	  0.000002	diff=1.21584e-12
 -0.000062	 -0.000062	diff=3.3293e-08
  0.001479	  0.001486	diff=7.09472e-06
 -0.000000	 -0.000000	diff=5.01585e-12
 -0.000000	 -0.000000	diff=2.59033e-12
 -0.000000	 -0.000000	diff=1.04254e-11
 -0.000000	 -0.000000	diff=1.9783e-14
 -0.000000	 -0.000000	diff=2.12846e-13
  local_diff=2.52313
# W_tgt{2}, [8 4]
  0.974809	  0.978309	diff=0.00349973
 27.706547	 27.808332	diff=0.101785
  0.000014	  0.000014	diff=6.62687e-08
  1.660358	  1.658404	diff=0.00195456
 -0.406903	 -0.404933	diff=0.00197002
  0.408841	  0.410625	diff=0.00178412
  0.039603	  0.039314	diff=0.000288672
127.071163	129.756504	diff=2.68534
 -0.188134	 -0.187743	diff=0.000391793
 -3.438284	 -3.420086	diff=0.0181983
  0.004952	  0.004952	diff=5.68997e-08
 -0.210480	 -0.209761	diff=0.000718862
 -0.264860	 -0.264650	diff=0.000209897
 -0.103094	 -0.103210	diff=0.000116119
 -0.069055	 -0.069236	diff=0.000180697
  0.465427	  0.467928	diff=0.00250117
 -0.708201	 -0.707310	diff=0.000890822
  0.812518	  0.814392	diff=0.00187373
 -0.124010	 -0.123955	diff=5.46603e-05
  0.206051	  0.206144	diff=9.34132e-05
 -0.554753	 -0.553971	diff=0.000782481
 -0.025742	 -0.025735	diff=7.21046e-06
  4.112097	  4.149727	diff=0.0376293
  1.889458	  1.912904	diff=0.0234454
  0.429533	  0.434850	diff=0.00531673
 -1.868884	 -1.866832	diff=0.00205155
  0.853706	  0.853964	diff=0.00025758
  0.467196	  0.467090	diff=0.000105321
  0.333282	  0.337077	diff=0.00379457
 -0.015168	 -0.015089	diff=7.86582e-05
  0.052626	  0.213486	diff=0.16086
 11.019080	 11.063477	diff=0.044397
  local_diff=3.10058
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.138601	  0.027477	diff=0.111124
  0.126834	  0.025219	diff=0.101615
  0.000000	  0.000000	diff=5.72897e-09
  0.000000	  0.000000	diff=4.81156e-09
  local_diff=0.21274
# W_emb_tgt, [2 5]
-36.884855	-30.966136	diff=5.91872
 -8.553378	 -8.037560	diff=0.515818
  0.000000	  0.000000	diff=3.59372e-09
  0.000000	  0.000000	diff=2.94128e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.588719	  1.202578	diff=0.386141
  0.868476	  0.883820	diff=0.0153439
  0.048908	  0.045882	diff=0.00302644
 -0.012470	 -0.012821	diff=0.000351222
  local_diff=6.8394
# W_src_char{1}, [8 4]
 -0.000019	 -0.000002	diff=1.70618e-05
  0.000000	 -0.000000	diff=5.91703e-12
  0.000000	  0.000000	diff=3.57402e-09
 -0.000000	 -0.000000	diff=1.60189e-09
-94.587483	 -8.032023	diff=86.5555
 -0.000000	 -0.000000	diff=1.45945e-09
 -0.000000	  0.000000	diff=3.37515e-10
  0.000000	 -0.000000	diff=1.25495e-22
  0.000050	  0.000005	diff=4.4389e-05
  0.000000	 -0.000000	diff=5.89174e-12
 -0.000000	 -0.000000	diff=8.65729e-09
 -0.000000	 -0.000000	diff=1.43662e-09
 45.144488	 20.126447	diff=25.018
 -0.000000	 -0.000000	diff=1.18066e-09
 -0.000000	  0.000000	diff=3.04782e-10
  0.000000	 -0.000000	diff=1.88685e-22
  0.000000	 -0.000000	diff=2.63646e-16
  0.000000	  0.000000	diff=1.21865e-22
  0.000000	  0.000000	diff=2.71588e-20
  0.000000	 -0.000000	diff=5.73245e-16
  0.000000	 -0.000000	diff=3.00416e-08
  0.000000	 -0.000000	diff=5.51693e-16
  0.000000	  0.000000	diff=2.08452e-18
  0.000000	  0.000000	diff=6.22403e-37
  0.000000	 -0.000000	diff=1.59668e-16
  0.000000	  0.000000	diff=1.79282e-17
  0.000000	 -0.000000	diff=4.22106e-22
 -0.000000	 -0.000000	diff=2.85149e-10
  0.000000	  0.000000	diff=2.13558e-10
 -0.000000	 -0.000000	diff=2.65583e-10
  0.000000	  0.000000	diff=3.06663e-13
  0.000000	  0.000000	diff=9.15598e-32
  local_diff=111.574
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-157.222165	-12.215117	diff=145.007
-128.851761	-10.366313	diff=118.485
 -0.000000	 -0.000000	diff=1.20656e-10
  0.000000	  0.000000	diff=7.31143e-11
  0.000000	  0.000000	diff=4.05199e-17
  0.000000	  0.000000	diff=3.67074e-17
 -0.000000	  0.000000	diff=4.80065e-07
 -0.000000	  0.000000	diff=4.07677e-07
  local_diff=263.492
# W_h, [2 4]
  0.251961	  0.252619	diff=0.000657305
 -0.240736	 -0.240234	diff=0.000502268
  0.536017	  0.540001	diff=0.00398339
 -0.198684	 -0.195946	diff=0.00273749
 -1.895505	 -1.859309	diff=0.0361962
  2.260466	  2.298338	diff=0.0378719
  7.673585	  7.682288	diff=0.00870324
  6.419681	  6.424294	diff=0.00461324
  local_diff=0.095265
# W_soft, [5 2]
 -3.616408	 -3.623944	diff=0.00753578
 -0.587658	 -0.589593	diff=0.00193576
 -2.798729	 -2.803633	diff=0.00490443
 -5.155564	 -5.161880	diff=0.00631648
 12.179231	 12.179051	diff=0.00018039
 -0.887331	 -0.894244	diff=0.00691321
  0.564688	  0.562831	diff=0.00185689
 -5.457808	 -5.462392	diff=0.00458364
 -0.702117	 -0.707950	diff=0.00583258
  6.501921	  6.501755	diff=0.000165847
  local_diff=0.040225
# Num params=224, abs_diff=415.778
Elapsed time is 4.582427 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 2, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 234, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 2
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 0
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 234
  src input 1: <s> <s> z x
  src mask: 0  0  1  1
  tgt input 1: <s> a ac ab </s>
  tgt output 1: a ac ab </s> </s>
  tgt mask: 1  1  1  1  0
# W_src{1}, [8 4]
  0.000000	 -0.000000	diff=6.69581e-20
 -0.001017	 -0.000992	diff=2.46865e-05
  0.000000	  0.000000	diff=1.28083e-12
  0.003501	  0.003416	diff=8.49343e-05
  0.000000	  0.000000	diff=1.1721e-15
 -0.000000	 -0.000000	diff=4.05371e-12
  0.000000	  0.000000	diff=2.92024e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=8.51796e-20
  0.001223	  0.001261	diff=3.84404e-05
 -0.000000	 -0.000000	diff=4.05619e-12
 -0.004210	 -0.004342	diff=0.000132258
  0.000000	 -0.000000	diff=1.48994e-15
 -0.000000	 -0.000000	diff=9.3185e-12
  0.000000	  0.000000	diff=4.52049e-13
  0.000000	  0.000000	diff=0
  0.000000	 -0.000000	diff=1.03964e-20
 -0.000155	 -0.000154	diff=5.89648e-07
  0.000000	  0.000000	diff=1.99327e-13
  0.000534	  0.000532	diff=2.02872e-06
  0.000000	  0.000000	diff=1.82406e-16
  0.000000	 -0.000000	diff=3.55281e-13
  0.000000	  0.000000	diff=4.5761e-31
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.58112e-32
  0.000000	  0.000000	diff=4.33703e-16
  0.000000	 -0.000000	diff=4.94871e-25
  0.000000	 -0.000000	diff=8.74853e-16
  0.000000	 -0.000000	diff=1.58928e-27
  0.000000	  0.000000	diff=8.28497e-25
  0.000000	 -0.000000	diff=2.09341e-37
  0.000000	  0.000000	diff=0
  local_diff=0.000282938
# W_src{2}, [8 4]
-36.336455	-35.508745	diff=0.82771
  0.247732	  0.246779	diff=0.000953535
 -0.047409	 -0.047228	diff=0.000181021
  0.001248	  0.001252	diff=4.66453e-06
 -1.879593	 -1.884170	diff=0.00457718
  0.214467	  0.213741	diff=0.000725739
 -0.000247	 -0.000249	diff=1.88456e-06
 -0.000001	 -0.000001	diff=5.23673e-09
  0.000000	  0.000000	diff=6.42882e-12
  0.000000	 -0.000000	diff=1.23423e-12
  0.000000	 -0.000000	diff=4.36262e-14
  0.000000	 -0.000000	diff=7.56933e-16
  0.000000	  0.000000	diff=1.91475e-12
  0.000000	 -0.000000	diff=4.8604e-13
  0.000000	  0.000000	diff=2.99366e-16
  0.000000	  0.000000	diff=3.42358e-18
 -1.139794	 -1.138520	diff=0.00127405
  0.005803	  0.005802	diff=9.65583e-07
 -0.013934	 -0.013934	diff=2.61114e-07
  0.000972	  0.000972	diff=1.91398e-08
  0.029268	  0.029248	diff=2.04762e-05
  0.008791	  0.008790	diff=1.2125e-06
 -0.705213	 -0.705880	diff=0.000666625
 -1.844929	 -1.845361	diff=0.000432
  0.003976	  0.003976	diff=1.56484e-08
 -0.000021	 -0.000021	diff=2.11335e-11
  0.000025	  0.000025	diff=1.27587e-12
 -0.000002	 -0.000002	diff=8.82459e-12
  0.000043	  0.000043	diff=8.298e-11
 -0.000031	 -0.000031	diff=4.76591e-11
  0.001342	  0.001342	diff=3.53038e-10
  0.003619	  0.003619	diff=2.334e-09
  local_diff=0.836549
# W_tgt{1}, [8 6]
 -0.139161	 -0.139209	diff=4.78733e-05
 23.770062	 24.043233	diff=0.273171
 -0.061175	 -0.073489	diff=0.0123143
 -0.390394	 -0.389729	diff=0.000665048
  0.011154	  0.011168	diff=1.45908e-05
  0.881904	  0.871370	diff=0.0105346
 -0.000005	 -0.000005	diff=1.5653e-08
  0.005565	  0.005551	diff=1.44898e-05
 -0.674880	 -0.676016	diff=0.00113593
-23.199911	-22.944646	diff=0.255265
  0.061832	  0.050359	diff=0.0114722
 -1.908207	 -1.892565	diff=0.015642
  0.053893	  0.054236	diff=0.000342872
  3.048515	  2.907906	diff=0.140609
 -0.000024	 -0.000023	diff=3.04919e-07
  0.027300	  0.026956	diff=0.000343958
 -0.054017	 -0.054347	diff=0.000330279
  4.189372	  4.193772	diff=0.00440042
  0.313803	  0.311800	diff=0.00200281
  0.901021	  0.904613	diff=0.00359226
  0.033050	  0.033179	diff=0.000128887
  0.312929	  0.311240	diff=0.00168832
 -0.000014	 -0.000014	diff=1.10347e-07
  0.017743	  0.017590	diff=0.000153217
  0.272076	  0.271931	diff=0.000145336
 -3.693094	 -3.687654	diff=0.00544
  0.227136	  0.225991	diff=0.00114477
 -1.092672	 -1.087494	diff=0.00517857
 -0.025034	 -0.024961	diff=7.31035e-05
 -0.224618	 -0.225875	diff=0.00125754
  0.000009	  0.000010	diff=4.98599e-08
 -0.012191	 -0.012269	diff=7.84718e-05
  0.184270	  0.184073	diff=0.000197026
 -0.000171	 -0.000170	diff=6.89088e-07
  0.075004	  0.073207	diff=0.00179718
  0.000212	  0.000212	diff=5.71065e-08
  0.000000	  0.000000	diff=4.17464e-10
  0.000394	  0.000392	diff=1.49807e-06
  0.000000	  0.000000	diff=1.42066e-11
  0.000013	  0.000013	diff=9.14739e-08
  0.002507	  0.002507	diff=3.54567e-07
  0.882999	  0.887612	diff=0.00461319
 -0.021733	 -0.021709	diff=2.41123e-05
  0.000045	  0.000044	diff=1.98569e-07
  0.000000	  0.000000	diff=1.55963e-10
  0.519540	  0.517830	diff=0.00171055
 -0.000000	 -0.000000	diff=4.6749e-13
  0.000000	  0.000000	diff=1.37543e-10
  local_diff=0.755532
# W_tgt{2}, [8 4]
  0.416205	  0.419231	diff=0.00302601
 21.348272	 21.414496	diff=0.0662239
 -0.000454	 -0.000456	diff=1.46871e-06
  1.595286	  1.592171	diff=0.00311566
 -0.223619	 -0.222656	diff=0.000963035
  0.596951	  0.599337	diff=0.00238605
 -0.035078	 -0.034681	diff=0.000396702
130.104937	131.933988	diff=1.82905
 -0.168035	 -0.167301	diff=0.000734428
 -6.425028	 -6.420993	diff=0.00403591
 -0.025505	 -0.025474	diff=3.03038e-05
 -0.289395	 -0.288941	diff=0.000454025
 -6.140129	 -6.120216	diff=0.0199139
 -0.193763	 -0.193832	diff=6.92039e-05
 -1.112966	 -1.099940	diff=0.0130255
  0.938170	  0.938570	diff=0.00039995
 -1.856565	 -1.858195	diff=0.00162999
  1.494938	  1.496566	diff=0.00162754
  0.331587	  0.331396	diff=0.000190768
  0.018772	  0.018908	diff=0.000135381
 -1.358280	 -1.358290	diff=9.28333e-06
  0.056751	  0.056806	diff=5.46585e-05
  6.060892	  6.075288	diff=0.0143969
 -2.269058	 -2.225993	diff=0.0430645
  0.108592	  0.108385	diff=0.000206673
 -1.841262	 -1.842288	diff=0.0010254
  0.378338	  0.378348	diff=1.00283e-05
  0.639766	  0.639701	diff=6.54582e-05
  0.146331	  0.146474	diff=0.000142881
  0.068254	  0.068338	diff=8.33167e-05
 -0.468855	 -0.468410	diff=0.000445235
  8.069074	  8.085550	diff=0.0164754
  local_diff=2.02339
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=3.34477e-11
  0.000000	  0.000000	diff=3.49124e-12
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.004301	  0.004124	diff=0.000176575
  0.004912	  0.004683	diff=0.000228579
  0.000000	 -0.000000	diff=2.40796e-12
  0.000000	 -0.000000	diff=2.75863e-12
  local_diff=0.000405155
# W_emb_tgt, [2 5]
-56.352701	-54.885797	diff=1.4669
-14.644961	-14.542994	diff=0.101966
  0.000000	  0.000000	diff=6.63661e-09
  0.000000	  0.000000	diff=2.93937e-10
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  5.129003	  6.056058	diff=0.927055
 -5.496570	 -4.913687	diff=0.582883
  5.029100	  4.823337	diff=0.205763
 -2.437845	 -2.489783	diff=0.0519376
  local_diff=3.33651
# W_tgt_char{1}, [8 4]
-15.763023	-15.423768	diff=0.339254
 -1.502042	 -1.544894	diff=0.0428512
  0.000000	  0.000000	diff=6.38918e-32
 -0.000001	 -0.000001	diff=2.18286e-08
  0.133736	  0.136827	diff=0.00309123
 -2.898406	 -2.922962	diff=0.0245552
 -0.000000	 -0.000000	diff=2.39091e-10
  0.132653	  0.138297	diff=0.00564427
 -5.866143	 -5.818246	diff=0.0478968
 -0.576698	 -0.582875	diff=0.00617758
  0.000000	  0.000000	diff=5.69464e-32
 -0.000001	 -0.000001	diff=1.75586e-08
  0.051209	  0.051653	diff=0.000444702
 -5.899977	 -6.003083	diff=0.103106
 -0.000000	 -0.000000	diff=1.68657e-10
  0.051361	  0.052178	diff=0.000817479
 -2.327200	 -2.315352	diff=0.0118478
 -0.308982	 -0.310744	diff=0.00176183
  0.000000	  0.000000	diff=2.26583e-34
 -0.000000	 -0.000000	diff=7.1667e-10
  0.027335	  0.027461	diff=0.000126044
  0.001040	  0.001040	diff=1.03642e-08
 -0.000000	 -0.000000	diff=9.86306e-12
  0.027263	  0.027498	diff=0.000235252
  2.491283	  2.500861	diff=0.00957768
  0.303789	  0.302106	diff=0.00168314
  0.000000	  0.000000	diff=2.18141e-34
 -0.000000	 -0.000000	diff=6.44155e-10
 -0.026578	 -0.026461	diff=0.000117735
  0.007069	  0.007068	diff=4.94165e-07
 -0.000000	 -0.000000	diff=1.03292e-11
 -0.026125	 -0.025910	diff=0.000215935
  local_diff=0.599405
# W_emb_tgt_char, [2 5]
  0.509238	  0.510871	diff=0.00163373
 -6.641246	 -6.669132	diff=0.0278866
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  3.484715	  3.450186	diff=0.0345296
 -2.457187	 -2.474802	diff=0.0176147
  0.000000	  0.000000	diff=3.04494e-13
  0.000000	  0.000000	diff=1.90082e-13
  0.000001	  0.000001	diff=3.98445e-08
  0.000000	  0.000000	diff=7.45093e-10
  local_diff=0.0816647
# W_h, [2 4]
  2.494387	  2.496384	diff=0.00199719
 -1.805104	 -1.803475	diff=0.00162927
 -0.018447	 -0.018447	diff=3.25889e-08
  0.004838	  0.004838	diff=5.26651e-09
 -0.640082	 -0.633594	diff=0.00648834
  4.368997	  4.369157	diff=0.000159798
  5.655179	  5.661480	diff=0.00630095
  7.404143	  7.408223	diff=0.00408009
  local_diff=0.0206557
# W_soft, [5 2]
 -1.115153	 -1.123407	diff=0.00825367
 -0.439376	 -0.441885	diff=0.00250814
 -7.855593	 -7.862405	diff=0.00681147
 -1.814174	 -1.821235	diff=0.00706107
 11.250031	 11.248931	diff=0.00109965
  0.452958	  0.446154	diff=0.00680378
  0.315976	  0.313602	diff=0.00237381
 -4.431559	 -4.437357	diff=0.00579824
  1.196870	  1.190980	diff=0.00589027
  2.488309	  2.486620	diff=0.0016886
  local_diff=0.0482887
# W_soft_char, [5 2]
 -0.001448	 -0.001448	diff=1.81682e-08
 -0.001461	 -0.001461	diff=4.12214e-08
  0.006787	  0.006787	diff=1.98725e-07
  5.153041	  5.153041	diff=4.11994e-07
 -5.156918	 -5.156918	diff=6.19049e-07
 -0.010007	 -0.010008	diff=8.88544e-07
 -0.010064	 -0.010065	diff=9.13467e-07
  0.047459	  0.047458	diff=1.09787e-06
  4.851874	  4.851872	diff=1.52024e-06
 -4.879256	 -4.879258	diff=1.70022e-06
  local_diff=7.40951e-06
# Num params=234, abs_diff=7.70269
Elapsed time is 5.691678 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 276, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 1
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 276
  src input 1: <s> x xz xz
  src mask: 0  1  1  1
  tgt input 1: <s> ac c ab ab
  tgt output 1: ac c ab ab </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.004225	  0.004225	diff=1.03877e-08
 -0.000816	 -0.000817	diff=1.58699e-07
  0.000212	  0.000212	diff=5.71938e-10
  0.000035	  0.000035	diff=5.42385e-13
  0.004243	  0.004243	diff=1.04557e-08
 -0.000821	 -0.000821	diff=1.93224e-09
 -0.978736	 -0.978312	diff=0.000423978
  0.071263	  0.071327	diff=6.39368e-05
 -0.000000	 -0.000000	diff=1.79686e-10
 -0.000008	 -0.000008	diff=2.50088e-07
  0.000000	  0.000000	diff=2.44597e-09
  0.000000	  0.000000	diff=6.47681e-16
  0.000000	 -0.000000	diff=3.51641e-17
  0.000000	  0.000000	diff=3.43584e-17
  0.000000	  0.000000	diff=3.69112e-14
  0.000000	 -0.000000	diff=1.71675e-14
 -0.001477	 -0.001477	diff=8.957e-09
  0.000900	  0.000900	diff=3.04811e-10
 -0.000292	 -0.000292	diff=3.16118e-10
 -0.000039	 -0.000039	diff=5.24756e-12
 -0.001777	 -0.001777	diff=1.28327e-08
  0.000861	  0.000861	diff=2.70214e-10
  0.166356	  0.166469	diff=0.000112813
 -0.103660	 -0.103656	diff=4.03814e-06
  0.000310	  0.000310	diff=3.92813e-10
 -0.000189	 -0.000189	diff=1.75909e-11
  0.000061	  0.000061	diff=1.20774e-11
  0.000008	  0.000008	diff=4.43704e-12
  0.000373	  0.000373	diff=5.62318e-10
 -0.000181	 -0.000181	diff=1.31486e-11
 -0.034991	 -0.034986	diff=4.98171e-06
  0.021785	  0.021785	diff=1.78379e-07
  local_diff=0.000610385
# W_src{2}, [8 4]
  0.004828	  0.004828	diff=8.63803e-08
 -0.020759	 -0.020759	diff=9.10377e-08
  0.001418	  0.001418	diff=2.58831e-09
 -0.002571	 -0.002571	diff=4.60758e-09
  0.006124	  0.006124	diff=1.01101e-07
 -0.016388	 -0.016388	diff=1.80829e-07
 -0.616502	 -0.616640	diff=0.000137551
 -1.119571	 -1.119723	diff=0.000151665
  0.001349	  0.001349	diff=5.39743e-09
 -0.011323	 -0.011323	diff=3.14818e-09
  0.001240	  0.001240	diff=1.20686e-09
 -0.001953	 -0.001953	diff=2.36172e-09
  0.002788	  0.002788	diff=2.31621e-09
 -0.010013	 -0.010013	diff=5.7267e-08
 -0.259866	 -0.259908	diff=4.23973e-05
 -0.333913	 -0.333931	diff=1.78424e-05
 -0.005665	 -0.005665	diff=1.88013e-07
 -0.017153	 -0.017153	diff=2.47474e-08
  0.002918	  0.002918	diff=5.76365e-09
 -0.004509	 -0.004509	diff=2.027e-10
 -0.003639	 -0.003639	diff=2.35503e-07
 -0.018776	 -0.018776	diff=7.89196e-08
 -0.539501	 -0.539482	diff=1.90008e-05
 -0.683450	 -0.683391	diff=5.94026e-05
  0.008724	  0.008724	diff=1.70228e-07
  0.027886	  0.027886	diff=1.97754e-07
 -0.004152	 -0.004152	diff=1.05989e-08
  0.009279	  0.009279	diff=1.92955e-10
  0.006574	  0.006574	diff=3.56921e-07
  0.028640	  0.028640	diff=5.4917e-08
  1.075059	  1.075015	diff=4.33934e-05
  1.022152	  1.021934	diff=0.000217861
  local_diff=0.000690975
# W_tgt{1}, [8 6]
 -0.004684	 -0.004678	diff=5.62255e-06
  0.019359	  0.022013	diff=0.00265396
 -7.012709	 -6.980881	diff=0.0318279
 -0.000856	 -0.000854	diff=1.13041e-06
  0.000003	  0.000003	diff=3.66859e-09
 -1.466654	 -1.465742	diff=0.000911944
 -0.000000	 -0.000000	diff=5.41805e-11
  0.333898	  0.334313	diff=0.000415632
 -0.022851	 -0.022718	diff=0.000133004
 -1.129295	 -1.130005	diff=0.00070952
  6.637822	  6.666920	diff=0.0290977
 -0.004176	 -0.004149	diff=2.67481e-05
  0.000013	  0.000013	diff=8.22329e-08
 -7.139220	 -7.117835	diff=0.0213844
  0.000000	  0.000000	diff=6.3587e-11
  1.613635	  1.623466	diff=0.00983094
  0.005831	  0.005840	diff=8.7394e-06
  0.233502	  0.233302	diff=0.000199876
  0.859950	  0.860095	diff=0.000144975
  0.000062	  0.000062	diff=4.63154e-09
 -0.000000	 -0.000000	diff=8.28424e-11
  0.421008	  0.420426	diff=0.000581623
  0.000000	  0.000000	diff=9.76668e-13
 -0.415055	 -0.414401	diff=0.000654514
  0.014090	  0.014141	diff=5.11785e-05
  0.563931	  0.562737	diff=0.00119415
  2.017081	  2.018911	diff=0.00183084
 -0.000065	 -0.000065	diff=2.28849e-09
  0.000000	  0.000000	diff=5.83297e-10
  0.721038	  0.717588	diff=0.00344953
  0.000000	  0.000000	diff=6.39675e-12
 -1.006712	 -1.002880	diff=0.00383224
  0.013447	  0.013494	diff=4.66055e-05
  0.528880	  0.527851	diff=0.00102901
  2.309258	  2.311743	diff=0.00248461
 -0.000002	 -0.000002	diff=7.60984e-09
  0.000000	  0.000000	diff=5.40978e-10
  0.771710	  0.768563	diff=0.0031469
  0.000000	  0.000000	diff=5.02447e-12
 -0.960630	 -0.957140	diff=0.0034899
  0.000000	  0.000000	diff=4.56444e-12
  0.000006	  0.000006	diff=1.79912e-10
  0.000182	  0.000182	diff=2.31685e-11
 -0.000000	 -0.000000	diff=1.13711e-12
  0.000000	  0.000000	diff=1.96026e-12
  0.000008	  0.000008	diff=1.01879e-12
  0.000000	  0.000000	diff=1.21625e-14
 -0.000010	 -0.000010	diff=3.69222e-13
  local_diff=0.119143
# W_tgt{2}, [8 4]
 -0.618602	 -0.620034	diff=0.00143169
 34.826452	 34.955718	diff=0.129265
 -0.000467	 -0.000466	diff=1.7596e-06
  2.108959	  2.101364	diff=0.00759446
 -0.311495	 -0.310335	diff=0.00116005
  0.816771	  0.819663	diff=0.00289142
  0.199357	  0.198828	diff=0.000528831
172.704635	175.205310	diff=2.50067
 -0.053698	 -0.053691	diff=7.74606e-06
 -0.296335	 -0.296293	diff=4.23106e-05
  0.016408	  0.016408	diff=1.28067e-07
 -0.007321	 -0.007321	diff=3.96389e-09
 -0.092463	 -0.092468	diff=5.81359e-06
 -0.351160	 -0.351129	diff=3.09617e-05
 -2.081964	 -2.081558	diff=0.000405803
 -0.774559	 -0.774048	diff=0.000510788
  0.022330	  0.022330	diff=1.09784e-07
 -1.596962	 -1.598162	diff=0.00120034
  0.004210	  0.004211	diff=1.85295e-07
  0.018248	  0.018289	diff=4.15087e-05
  0.008070	  0.008076	diff=5.83545e-06
 -0.144297	 -0.144195	diff=0.000102228
  0.083432	  0.083496	diff=6.37878e-05
 -2.863639	 -2.861647	diff=0.00199191
 -0.388986	 -0.388973	diff=1.3001e-05
  0.875196	  0.876188	diff=0.000992683
 -0.330100	 -0.330027	diff=7.28334e-05
  0.555573	  0.555378	diff=0.000195746
 -0.264388	 -0.264518	diff=0.000129603
 -0.153705	 -0.153740	diff=3.55668e-05
 -1.020267	 -1.020864	diff=0.000597437
 22.094157	 22.094597	diff=0.000439467
  local_diff=2.65043
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000011	  0.000011	diff=4.46702e-07
  0.000013	  0.000012	diff=5.88788e-07
  0.000000	  0.000000	diff=3.40556e-09
  0.000000	  0.000000	diff=2.86809e-09
  local_diff=1.04176e-06
# W_emb_tgt, [2 5]
 -4.150419	 -4.126101	diff=0.024318
  2.512054	  2.517529	diff=0.00547484
  0.000000	  0.000000	diff=8.44076e-10
  0.000000	  0.000000	diff=8.79058e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
-13.541134	-12.722949	diff=0.818185
 14.411866	 14.468853	diff=0.0569877
 -0.000199	 -0.000200	diff=1.11435e-06
  0.000094	  0.000094	diff=6.58371e-08
  local_diff=0.904966
# W_src_char{1}, [8 4]
  0.000002	  0.000002	diff=8.62566e-09
  0.000000	 -0.000000	diff=3.65001e-13
 -0.000000	 -0.000000	diff=2.39807e-12
  0.000000	  0.000000	diff=3.40193e-12
  8.463539	  8.356453	diff=0.107086
  0.000000	  0.000000	diff=4.41219e-12
  0.000000	  0.000000	diff=4.94277e-12
  0.000000	 -0.000000	diff=7.21628e-23
 -0.000006	 -0.000006	diff=1.71406e-07
  0.000000	 -0.000000	diff=3.25324e-13
  0.000000	  0.000000	diff=2.5431e-12
  0.000000	  0.000000	diff=3.39781e-12
-20.676962	-20.939395	diff=0.262433
  0.000000	  0.000000	diff=1.72509e-12
  0.000000	  0.000000	diff=6.87714e-12
  0.000000	 -0.000000	diff=3.99469e-23
  0.000000	 -0.000000	diff=4.20086e-16
  0.000000	 -0.000000	diff=3.87956e-23
  0.000000	  0.000000	diff=4.32729e-20
  0.000000	  0.000000	diff=1.82491e-16
 -0.000000	 -0.000000	diff=1.80362e-11
  0.000000	  0.000000	diff=1.76264e-16
  0.000000	 -0.000000	diff=6.65994e-19
  0.000000	 -0.000000	diff=1.98108e-37
  0.000000	  0.000000	diff=5.10167e-17
  0.000000	 -0.000000	diff=5.7074e-18
  0.000000	  0.000000	diff=1.34486e-22
  0.000000	  0.000000	diff=7.25889e-12
 -0.000000	 -0.000000	diff=3.69267e-12
  0.000000	  0.000000	diff=8.17505e-12
  0.000000	 -0.000000	diff=9.79776e-14
  0.000000	 -0.000000	diff=2.91478e-32
  local_diff=0.369519
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 12.917945	 12.708510	diff=0.209435
 10.945333	 10.785030	diff=0.160303
  0.000000	  0.000000	diff=1.01038e-12
  0.000000	 -0.000000	diff=7.42275e-12
  0.000000	 -0.000000	diff=4.79513e-17
  0.000000	 -0.000000	diff=4.2228e-17
  0.000000	  0.000000	diff=6.93077e-10
  0.000000	  0.000000	diff=5.52831e-10
  local_diff=0.369738
# W_tgt_char{1}, [8 4]
 -0.010485	 -0.010263	diff=0.000222088
 -2.177288	 -1.916100	diff=0.261189
  0.000000	  0.000000	diff=1.38193e-14
  0.000000	  0.000000	diff=1.17682e-23
  0.000076	  0.000079	diff=3.04092e-06
  0.000000	  0.000000	diff=3.22269e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.020265	 -0.019461	diff=0.000804299
  0.710115	  0.749201	diff=0.0390861
  0.000000	 -0.000000	diff=2.10121e-14
  0.000000	 -0.000000	diff=4.75741e-24
 -0.000032	 -0.000031	diff=4.82101e-07
  0.000000	  0.000000	diff=6.05044e-13
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=2.11773e-10
  0.275536	  0.276763	diff=0.00122644
  0.000000	 -0.000000	diff=2.23028e-23
  0.000000	  0.000000	diff=4.76479e-32
  0.000009	  0.000009	diff=4.51387e-08
  0.000000	 -0.000000	diff=4.08664e-20
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000097	  0.000097	diff=9.62496e-08
  0.246376	  0.247147	diff=0.000771343
  0.000000	 -0.000000	diff=2.60228e-15
  0.000000	 -0.000000	diff=1.72273e-24
  0.000008	  0.000008	diff=3.0473e-08
  0.000000	 -0.000000	diff=2.18849e-14
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  local_diff=0.303303
# W_emb_tgt_char, [2 5]
  0.038125	  0.038230	diff=0.000104538
  0.372300	  0.382529	diff=0.010229
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.003621	  0.003649	diff=2.75018e-05
  0.000547	  0.000548	diff=6.23193e-07
 -0.000016	 -0.000016	diff=1.22764e-07
 -0.000002	 -0.000002	diff=2.78538e-09
  0.000000	  0.000000	diff=6.72361e-12
  0.000000	  0.000000	diff=4.20054e-12
  local_diff=0.0103618
# W_h, [2 4]
  0.183326	  0.183297	diff=2.92211e-05
 -0.532279	 -0.532275	diff=4.16808e-06
 -0.541714	 -0.541885	diff=0.000171107
  1.132979	  1.132956	diff=2.32411e-05
  2.253517	  2.254282	diff=0.000764997
 -1.495047	 -1.495828	diff=0.000780758
  3.456025	  3.420427	diff=0.0355986
 13.940128	 13.944804	diff=0.00467584
  local_diff=0.0420479
# W_soft, [5 2]
  0.269660	  0.269602	diff=5.76963e-05
 -0.040092	 -0.040187	diff=9.48393e-05
 -5.543897	 -5.544093	diff=0.000196152
  1.929045	  1.926131	diff=0.00291416
  3.391361	  3.388547	diff=0.00281338
 -4.416079	 -4.416099	diff=2.02526e-05
  0.027429	  0.027277	diff=0.000152505
 -7.668208	 -7.668245	diff=3.68213e-05
  4.676505	  4.662461	diff=0.0140436
  7.408642	  7.394606	diff=0.0140361
  local_diff=0.0343655
# W_soft_char, [5 2]
  0.000115	  0.000115	diff=5.77134e-11
 -0.000036	 -0.000036	diff=5.8569e-11
  0.000117	  0.000117	diff=5.84158e-11
 -0.000250	 -0.000250	diff=6.15451e-11
  0.000053	  0.000053	diff=5.93425e-11
 -7.994430	 -8.006610	diff=0.0121803
 -0.021529	 -0.021566	diff=3.72348e-05
  5.813241	  5.801079	diff=0.012162
 -0.009888	 -0.009890	diff=1.85612e-06
  2.236990	  2.236988	diff=1.86052e-06
  local_diff=0.0243832
# Num params=276, abs_diff=4.82956
Elapsed time is 8.790440 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.788143	 -0.788997	diff=0.000854638
 -0.089580	 -0.089550	diff=3.00453e-05
 -0.133116	 -0.133127	diff=1.08415e-05
  0.052326	  0.052324	diff=2.43076e-06
 -1.105455	 -1.107613	diff=0.00215814
 -0.211590	 -0.211554	diff=3.67171e-05
  2.601119	  2.582093	diff=0.0190257
 -2.794677	 -2.796401	diff=0.0017244
  0.386007	  0.386123	diff=0.000116753
  0.028616	  0.028614	diff=2.3377e-06
  0.072328	  0.072333	diff=5.50979e-06
 -0.005154	 -0.005154	diff=1.54198e-08
  0.614895	  0.615207	diff=0.000312678
  0.056544	  0.056547	diff=3.14861e-06
 -1.070930	 -1.069914	diff=0.00101544
  0.464343	  0.464336	diff=6.508e-06
  0.998717	  0.998250	diff=0.000466419
 -0.117300	 -0.117191	diff=0.000108956
  0.251113	  0.251115	diff=2.10931e-06
 -0.158614	 -0.158646	diff=3.24555e-05
  1.806401	  1.804946	diff=0.00145539
  0.000798	  0.000819	diff=2.09529e-05
 -1.925159	 -1.928153	diff=0.00299385
  0.419551	  0.419603	diff=5.20117e-05
 -0.456034	 -0.455876	diff=0.000158341
 -0.064495	 -0.064590	diff=9.44467e-05
 -0.112614	 -0.112605	diff=8.94901e-06
 -0.116011	 -0.116047	diff=3.61896e-05
 -0.851704	 -0.851123	diff=0.000580846
 -0.040255	 -0.040251	diff=4.10473e-06
  0.758721	  0.758792	diff=7.05902e-05
  0.276150	  0.276394	diff=0.000243805
  local_diff=0.0316347
# W_src{2}, [8 4]
 -1.044570	 -1.044293	diff=0.000277428
 -0.275709	 -0.275479	diff=0.000229821
  0.323822	  0.323529	diff=0.000292814
 -0.018512	 -0.018529	diff=1.61426e-05
 -1.959826	 -1.960669	diff=0.00084355
 -0.053470	 -0.053372	diff=9.79943e-05
 -3.121096	 -3.128758	diff=0.00766176
  0.544701	  0.544102	diff=0.000599106
  0.285343	  0.285302	diff=4.10267e-05
 -0.490546	 -0.490391	diff=0.000154352
  0.232315	  0.232157	diff=0.000157286
 -0.012263	 -0.012271	diff=7.4364e-06
  1.130909	  1.130548	diff=0.000360606
 -0.485061	 -0.485219	diff=0.000157866
 -4.127345	 -4.133940	diff=0.00659534
 -0.230848	 -0.230841	diff=7.20136e-06
 -1.309452	 -1.310251	diff=0.000798802
 -1.175486	 -1.173637	diff=0.00184846
  0.442984	  0.442034	diff=0.000949407
 -0.243922	 -0.244417	diff=0.000495016
  0.068014	  0.067331	diff=0.000682608
 -0.719894	 -0.719517	diff=0.000377088
 -3.915306	 -3.916962	diff=0.0016563
 -0.163135	 -0.162658	diff=0.000476833
  0.977878	  0.977571	diff=0.000307255
  1.200401	  1.200918	diff=0.000516589
 -0.689546	 -0.690545	diff=0.000998179
  0.213670	  0.213370	diff=0.000299908
 -0.382934	 -0.384145	diff=0.00121094
  0.949545	  0.949131	diff=0.000414242
  7.017530	  7.008626	diff=0.00890403
  0.169061	  0.169523	diff=0.000462289
  local_diff=0.0378977
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=2.14709e-07
 -2.062665	 -2.079595	diff=0.016929
 -0.014328	 -0.014514	diff=0.000185932
 -0.449924	 -0.449850	diff=7.40217e-05
  0.000000	  0.000000	diff=4.87876e-12
 -3.041054	 -3.064844	diff=0.0237904
  0.000005	  0.000005	diff=1.19862e-07
 -0.000001	 -0.000000	diff=1.62638e-08
  0.000617	  0.000622	diff=5.04573e-06
  0.586608	  0.567412	diff=0.0191954
  0.014035	  0.013863	diff=0.000171953
 -2.185938	 -2.184420	diff=0.00151787
  0.000000	  0.000000	diff=1.84667e-10
-10.923893	-11.265932	diff=0.342038
  0.000001	  0.000000	diff=1.62211e-07
  0.000001	  0.000001	diff=2.41326e-08
 -0.000487	 -0.000484	diff=3.08251e-06
  1.118892	  1.116395	diff=0.00249735
  0.005161	  0.005138	diff=2.3261e-05
  1.698603	  1.699821	diff=0.00121786
 -0.000000	 -0.000000	diff=1.123e-10
  2.821330	  2.809238	diff=0.0120916
 -0.000004	 -0.000004	diff=3.92494e-08
  0.000000	  0.000000	diff=2.53123e-09
 -0.000487	 -0.000484	diff=3.08654e-06
  1.602554	  1.597971	diff=0.00458232
  0.005246	  0.005222	diff=2.41394e-05
  1.690352	  1.691566	diff=0.00121454
 -0.000000	 -0.000000	diff=1.26292e-10
  3.059307	  3.045422	diff=0.0138851
 -0.000005	 -0.000005	diff=5.13486e-08
  0.000000	  0.000000	diff=2.75492e-09
  0.000000	 -0.000000	diff=3.37221e-12
  0.002025	  0.002017	diff=7.72802e-06
  0.003901	  0.003890	diff=1.12779e-05
 -0.000000	 -0.000000	diff=1.40985e-10
 -0.000000	 -0.000000	diff=5.90746e-12
  0.001627	  0.001621	diff=6.21714e-06
  0.000000	  0.000000	diff=6.44029e-13
 -0.000000	 -0.000000	diff=4.2244e-10
  0.000093	  0.000093	diff=1.14507e-07
 -0.177629	 -0.177716	diff=8.68111e-05
  0.000007	  0.000007	diff=1.75653e-08
 -0.325147	 -0.325108	diff=3.93595e-05
  0.000000	  0.000000	diff=3.75025e-12
 -0.072510	 -0.072458	diff=5.14456e-05
  0.000001	  0.000001	diff=1.3207e-09
 -0.000000	 -0.000000	diff=2.16921e-12
  local_diff=0.439654
# W_tgt{2}, [8 4]
  0.567875	  0.567994	diff=0.000119071
  0.439419	  0.441812	diff=0.00239277
 -0.000049	 -0.000049	diff=1.81968e-07
 -0.110548	 -0.110221	diff=0.00032705
  0.155497	  0.154931	diff=0.000566435
  0.031380	  0.031493	diff=0.000113232
 -0.006362	 -0.006313	diff=4.86018e-05
-13.755722	-13.043678	diff=0.712044
 -0.582988	 -0.583522	diff=0.000534219
  0.333699	  0.332944	diff=0.000754624
  0.031100	  0.031186	diff=8.62477e-05
  0.135506	  0.135408	diff=9.76096e-05
 -1.284027	 -1.290989	diff=0.00696228
  1.624812	  1.618917	diff=0.00589468
  0.555296	  0.555483	diff=0.000186424
  0.094265	  0.093987	diff=0.000277727
  0.337482	  0.337804	diff=0.000321727
 -0.273479	 -0.273466	diff=1.35656e-05
 -0.147662	 -0.147313	diff=0.00034952
 -0.089962	 -0.090084	diff=0.000121826
 -0.022827	 -0.022283	diff=0.000544023
  0.025261	  0.025344	diff=8.34398e-05
 -0.443922	 -0.443067	diff=0.000855141
 -5.885144	 -5.847233	diff=0.037911
  1.075580	  1.075995	diff=0.000414449
  0.011641	  0.011380	diff=0.000261386
  0.175482	  0.175560	diff=7.86121e-05
 -0.143041	 -0.143266	diff=0.000224552
  1.114095	  1.112724	diff=0.00137125
 -0.884098	 -0.886281	diff=0.00218378
 -0.496077	 -0.494631	diff=0.00144583
 -1.087125	 -1.086282	diff=0.000842907
  local_diff=0.777428
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=4.7185e-09
 -0.000000	 -0.000000	diff=6.21482e-09
 -0.000000	 -0.000000	diff=3.57373e-13
 -0.000000	 -0.000000	diff=4.58382e-12
  local_diff=1.09383e-08
# W_emb_tgt, [2 5]
  4.267529	  4.180160	diff=0.0873696
  1.124043	  1.117855	diff=0.00618802
  0.000000	  0.000000	diff=4.90823e-10
 -0.000000	 -0.000000	diff=6.47709e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 17.526395	 17.869018	diff=0.342624
 -9.784102	 -9.761149	diff=0.022953
-12.651399	-13.189501	diff=0.538102
  6.929198	  6.815722	diff=0.113476
  local_diff=1.11071
# W_src_char{1}, [8 4]
 -0.039156	 -0.040429	diff=0.00127201
 -0.013123	 -0.013119	diff=4.1205e-06
 -0.000000	 -0.000000	diff=1.65185e-12
  0.506091	  0.506277	diff=0.000185463
 -0.540520	 -0.540211	diff=0.000308712
  0.638212	  0.638494	diff=0.000282323
 -0.001793	 -0.001793	diff=1.65948e-07
 -0.000528	 -0.000528	diff=2.81981e-07
  4.024801	  4.031587	diff=0.00678641
  0.801324	  0.804215	diff=0.00289085
  0.000007	  0.000007	diff=1.83569e-08
-32.113450	-31.035894	diff=1.07756
 31.809069	 33.116147	diff=1.30708
-40.705411	-39.085784	diff=1.61963
  0.110545	  0.109919	diff=0.000625948
  0.032426	  0.032236	diff=0.000190208
 -0.000108	 -0.000108	diff=1.72854e-12
 -0.000022	 -0.000022	diff=5.42742e-09
 -0.000000	 -0.000000	diff=5.5568e-12
  0.000835	  0.000835	diff=2.08988e-07
 -0.000891	 -0.000891	diff=8.10438e-10
  0.001052	  0.001052	diff=2.62936e-07
 -0.000003	 -0.000003	diff=6.81088e-12
 -0.000001	 -0.000001	diff=2.17992e-10
  0.000001	  0.000001	diff=1.73483e-12
  0.000000	  0.000000	diff=4.77109e-11
  0.000000	  0.000000	diff=1.14102e-12
 -0.000005	 -0.000005	diff=1.34794e-09
  0.000006	  0.000006	diff=2.38641e-11
 -0.000007	 -0.000007	diff=1.70371e-09
  0.000000	  0.000000	diff=3.6733e-12
  0.000000	  0.000000	diff=1.11406e-11
  local_diff=4.01681
# W_src_char{2}, [8 4]
  4.361534	  4.392371	diff=0.0308368
 -0.816152	 -0.815530	diff=0.000622331
  0.000217	  0.000217	diff=2.96175e-08
 -0.000236	 -0.000236	diff=5.23407e-08
  3.216095	  3.231892	diff=0.0157972
 -0.490189	 -0.490065	diff=0.000124011
 -2.210551	 -2.200155	diff=0.0103959
  8.885777	  8.964840	diff=0.0790628
 -3.169495	 -3.154779	diff=0.0147155
  0.526391	  0.510784	diff=0.0156061
 -0.000638	 -0.000627	diff=1.06414e-05
  0.000112	  0.000112	diff=1.66224e-07
 -2.169069	 -2.161984	diff=0.00708537
  0.312540	  0.303478	diff=0.00906269
  1.469601	  1.474286	diff=0.00468546
 -6.037058	 -6.003870	diff=0.0331879
  2.970781	  2.984153	diff=0.0133719
 -1.161433	 -1.161452	diff=1.92358e-05
  2.147003	  0.683130	diff=1.46387
 -0.181671	 -0.182535	diff=0.000864961
  2.654256	  2.660649	diff=0.00639289
 -0.862291	 -0.867433	diff=0.00514217
 -0.147924	 -0.148281	diff=0.000356918
  1.062211	  1.064745	diff=0.00253409
  0.826681	  0.827315	diff=0.0006344
 -0.309367	 -0.309368	diff=1.12806e-06
  4.663436	  3.525010	diff=1.13843
 -0.026919	 -0.027675	diff=0.000755714
  0.720380	  0.720809	diff=0.000429564
 -0.172721	 -0.177918	diff=0.00519706
 -0.039117	 -0.039143	diff=2.54377e-05
  0.282067	  0.282245	diff=0.000177353
  local_diff=2.8594
# W_src_char{3}, [8 4]
 -0.111249	 -0.369311	diff=0.258063
  0.710399	  0.592244	diff=0.118155
  0.398611	  0.398062	diff=0.000548939
 -0.039712	 -0.039789	diff=7.64056e-05
  1.738504	  1.526756	diff=0.211748
 -0.062122	 -0.062259	diff=0.000137229
-16.179564	-15.831541	diff=0.348023
 -0.436800	 -0.438311	diff=0.00151121
 -0.198455	 -0.467370	diff=0.268915
 -0.443257	 -0.528623	diff=0.0853666
  0.307597	  0.307482	diff=0.000114558
  0.006509	  0.006496	diff=1.30261e-05
  2.542492	  2.518539	diff=0.0239528
 -0.027284	 -0.027285	diff=1.24392e-06
 -2.619352	 -2.614669	diff=0.00468354
  0.198593	  0.198448	diff=0.00014571
 -0.009918	 -0.009938	diff=2.0678e-05
 -0.935167	 -0.933743	diff=0.00142376
 -0.776362	 -0.777679	diff=0.00131795
  0.063880	  0.063693	diff=0.000187034
 -6.490741	 -6.879414	diff=0.388674
  0.040999	  0.041075	diff=7.59564e-05
 -6.893676	 -6.870156	diff=0.0235198
  0.712211	  0.708601	diff=0.00360939
  0.001395	  0.001395	diff=4.13637e-07
 -0.185564	 -0.185434	diff=0.000129506
  0.118232	  0.118210	diff=2.19531e-05
  0.003373	  0.003370	diff=2.48057e-06
  1.164719	  1.159505	diff=0.00521347
 -0.006239	 -0.006237	diff=1.56906e-06
  0.969370	  0.969767	diff=0.000396621
  0.084698	  0.084666	diff=3.19915e-05
  local_diff=1.74608
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=1.11445e-08
  0.000001	  0.000001	diff=8.29409e-09
  0.000222	  0.000220	diff=2.63962e-06
 -0.007551	 -0.007681	diff=0.000129492
-20.766025	-15.626229	diff=5.1398
 37.970872	 41.111670	diff=3.1408
  0.000000	 -0.000000	diff=1.3545e-12
  0.000000	  0.000000	diff=2.07513e-12
  local_diff=8.28073
# W_tgt_char{1}, [8 4]
  0.000001	  0.000001	diff=5.93296e-09
  0.000003	  0.000003	diff=3.06122e-08
 -2.643955	 -2.608636	diff=0.0353191
 -0.000002	 -0.000002	diff=1.81466e-08
 -0.000421	 -0.000425	diff=4.15536e-06
 -0.000000	 -0.000000	diff=3.67566e-12
  0.000000	  0.000000	diff=1.28912e-14
  0.000000	  0.000000	diff=2.28048e-09
 -0.000000	 -0.000000	diff=1.29168e-10
 -0.000001	 -0.000001	diff=2.67358e-09
  0.766744	  0.769846	diff=0.00310181
  0.000001	  0.000001	diff=1.56442e-09
  0.000126	  0.000125	diff=3.64985e-07
 -0.000000	 -0.000000	diff=8.69264e-13
  0.000000	 -0.000000	diff=3.80759e-15
  0.000000	  0.000000	diff=2.04581e-09
  0.000000	  0.000000	diff=2.01177e-12
  0.000000	 -0.000000	diff=3.36934e-13
  0.000000	  0.000000	diff=4.65203e-34
  0.000000	 -0.000000	diff=1.91919e-17
  0.000000	 -0.000000	diff=3.29431e-31
  0.000000	  0.000000	diff=1.74745e-12
  0.000000	  0.000000	diff=5.926e-21
 -0.000000	 -0.000000	diff=4.21612e-11
  0.000000	 -0.000000	diff=2.0658e-15
  0.000000	 -0.000000	diff=2.34676e-19
  0.000000	 -0.000000	diff=1.20199e-14
  0.000000	 -0.000000	diff=8.69156e-21
  0.000000	 -0.000000	diff=2.08365e-18
  0.000000	  0.000000	diff=1.10116e-12
  0.000000	  0.000000	diff=9.60559e-27
  0.000000	  0.000000	diff=2.07486e-12
  local_diff=0.0384255
# W_tgt_char{2}, [8 4]
  0.010165	  0.010164	diff=1.02651e-07
  0.002555	  0.002555	diff=8.03407e-08
 -0.000359	 -0.000359	diff=1.43881e-08
 -0.000912	 -0.000912	diff=1.1709e-09
  0.011256	  0.011256	diff=9.37702e-09
  0.002686	  0.002686	diff=1.02754e-07
 -0.192307	 -0.192318	diff=1.14067e-05
  0.058636	  0.058622	diff=1.45012e-05
  0.000000	  0.000000	diff=2.28132e-12
 -0.000000	 -0.000000	diff=1.98424e-12
  0.000000	 -0.000000	diff=1.15697e-13
  0.000000	  0.000000	diff=2.25262e-14
  0.000000	  0.000000	diff=2.78424e-12
  0.000000	  0.000000	diff=6.20685e-13
 -0.000000	 -0.000000	diff=1.87328e-12
  0.000000	  0.000000	diff=2.58238e-13
  0.004186	  0.004181	diff=5.50966e-06
  0.016336	  0.016336	diff=2.656e-07
 -0.000791	 -0.000791	diff=2.83757e-07
 -0.003906	 -0.003906	diff=3.58851e-08
  0.004618	  0.004615	diff=2.95712e-06
  0.011924	  0.011924	diff=9.33956e-09
  0.096729	  0.096720	diff=9.5132e-06
  0.094045	  0.094041	diff=3.69728e-06
  0.004366	  0.004362	diff=4.03944e-06
  0.014980	  0.014980	diff=5.24323e-07
 -0.000830	 -0.000830	diff=2.09378e-07
 -0.003606	 -0.003606	diff=7.28721e-08
  0.004683	  0.004681	diff=2.10518e-06
  0.010943	  0.010943	diff=4.3404e-07
  0.089602	  0.089548	diff=5.42075e-05
  0.092925	  0.092849	diff=7.55636e-05
  local_diff=0.000185647
# W_tgt_char{3}, [8 4]
 -0.002955	 -0.002978	diff=2.35272e-05
 -0.069739	 -0.069815	diff=7.62398e-05
  0.007573	  0.007573	diff=5.55485e-07
  0.024246	  0.024240	diff=6.39005e-06
  0.011641	  0.011633	diff=8.54216e-06
 -0.008457	 -0.008468	diff=1.1765e-05
  0.289008	  0.288981	diff=2.66471e-05
 -0.359968	 -0.359959	diff=8.67058e-06
 -0.001046	 -0.001063	diff=1.68713e-05
 -0.052241	 -0.052284	diff=4.27808e-05
  0.006741	  0.006740	diff=3.89447e-07
  0.016854	  0.016851	diff=3.17806e-06
  0.012239	  0.012233	diff=5.82908e-06
 -0.007305	 -0.007314	diff=9.2685e-06
  0.269148	  0.269122	diff=2.59023e-05
 -0.331583	 -0.331586	diff=2.9319e-06
 -0.032868	 -0.032885	diff=1.6878e-05
 -0.017407	 -0.017455	diff=4.8058e-05
  0.012329	  0.012328	diff=1.82781e-06
  0.011299	  0.011297	diff=1.91486e-06
 -0.019729	 -0.019734	diff=5.49022e-06
  0.030457	  0.030429	diff=2.84811e-05
  0.220486	  0.219604	diff=0.00088195
 -0.039332	 -0.039365	diff=3.32572e-05
 -0.020535	 -0.020548	diff=1.36008e-05
 -0.065984	 -0.066073	diff=8.84762e-05
  0.006574	  0.006574	diff=6.19588e-07
  0.030502	  0.030493	diff=9.41471e-06
 -0.013143	 -0.013149	diff=5.981e-06
  0.007247	  0.007240	diff=7.09612e-06
  0.104524	  0.104351	diff=0.000173167
 -0.058545	 -0.058521	diff=2.41385e-05
  local_diff=0.00160984
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=2.44196e-09
 -0.000000	 -0.000000	diff=1.934e-09
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.576290	 -0.574609	diff=0.00168098
-13.313056	-12.524362	diff=0.788694
  0.000000	  0.000000	diff=2.10186e-09
 -0.000000	 -0.000000	diff=2.61884e-10
 -0.000000	 -0.000000	diff=2.56174e-11
  0.000000	  0.000000	diff=2.29855e-12
  local_diff=0.790375
# W_h, [2 4]
 -2.214622	 -2.213398	diff=0.0012247
  1.811662	  1.811419	diff=0.000243702
  3.494977	  3.497657	diff=0.00268015
 -2.072446	 -2.073081	diff=0.000635327
 -2.585618	 -2.589159	diff=0.00354136
  1.940688	  1.938382	diff=0.00230571
 -0.038288	 -0.036913	diff=0.00137487
  0.227093	  0.226831	diff=0.000261586
  local_diff=0.0122674
# W_soft, [5 2]
-11.057817	-11.069891	diff=0.0120742
  0.033300	  0.033196	diff=0.000104005
 -9.149358	 -9.149361	diff=2.45865e-06
 -2.066920	 -2.069548	diff=0.00262802
 22.270120	 22.255604	diff=0.0145163
 -7.384247	 -7.397642	diff=0.0133945
 -0.041793	 -0.041971	diff=0.000178213
 -6.504115	 -6.504134	diff=1.83896e-05
 -2.913541	 -2.915243	diff=0.00170209
 16.873833	 16.858990	diff=0.014843
  local_diff=0.0594611
# W_soft_char, [5 2]
  0.101632	  0.101565	diff=6.68623e-05
  0.300605	  0.300530	diff=7.43265e-05
  0.111750	  0.111683	diff=6.68224e-05
 -0.492766	 -0.492852	diff=8.57967e-05
 -0.020853	 -0.020926	diff=7.32239e-05
 -0.029315	 -0.029403	diff=8.8315e-05
  0.480581	  0.480460	diff=0.000121318
 -0.018095	 -0.018181	diff=8.60968e-05
 -0.518479	 -0.518632	diff=0.000153708
  0.085873	  0.085756	diff=0.000116542
  local_diff=0.000933011
# Num params=404, abs_diff=20.2036
Elapsed time is 12.406604 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 1, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'dropout', 0.8)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 288, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_h=8 W_soft=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 1
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 0.8
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 100
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 0
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 288
  src input 1: <s> <s> <s> xy
  src mask: 0  0  0  1
  tgt input 1: <s> c a ab ac
  tgt output 1: c a ab ac </s>
  tgt mask: 1  1  1  1  1
# W_src{1}, [8 4]
  0.395553	  0.395434	diff=0.00011853
  0.098744	  0.098793	diff=4.89558e-05
 -0.005269	 -0.005315	diff=4.66171e-05
 -0.013792	 -0.013785	diff=7.26819e-06
  2.982628	  2.996690	diff=0.0140619
  0.052375	  0.052434	diff=5.91147e-05
 -2.520839	 -2.514002	diff=0.00683661
 -0.291727	 -0.290982	diff=0.000745639
 -0.027606	 -0.027607	diff=8.47145e-07
 -0.176187	 -0.176619	diff=0.00043181
 -0.000832	 -0.000832	diff=5.01072e-07
  0.000277	  0.000277	diff=8.65901e-09
 -0.246844	 -0.246775	diff=6.97645e-05
 -0.309522	 -0.310739	diff=0.00121767
  0.220905	  0.220964	diff=5.90864e-05
  0.728523	  0.720930	diff=0.0075931
  0.111681	  0.111984	diff=0.000303115
 -0.219747	 -0.219171	diff=0.000575922
  0.031352	  0.031390	diff=3.82223e-05
  0.021760	  0.021776	diff=1.61362e-05
  1.090180	  1.097222	diff=0.0070416
 -0.111927	 -0.111728	diff=0.000198587
 -0.046851	 -0.046891	diff=4.03245e-05
  0.030048	  0.030116	diff=6.83394e-05
 -0.015599	 -0.015593	diff=5.11589e-06
  0.028206	  0.028215	diff=9.5956e-06
 -0.003976	 -0.003975	diff=6.57374e-07
 -0.002810	 -0.002810	diff=2.68767e-07
 -0.131331	 -0.131216	diff=0.000114503
  0.014220	  0.014223	diff=3.30659e-06
  0.009759	  0.009758	diff=5.49133e-07
 -0.005500	 -0.005499	diff=1.17625e-06
  local_diff=0.0397148
# W_src{2}, [8 4]
  0.204356	  0.204657	diff=0.000300995
 -0.939864	 -0.938423	diff=0.00144029
 -0.058721	 -0.058544	diff=0.00017736
  0.003376	  0.003380	diff=3.54738e-06
 -0.191432	 -0.193195	diff=0.00176256
  0.610760	  0.615466	diff=0.00470513
 -0.030012	 -0.028750	diff=0.00126251
 -0.516056	 -0.515061	diff=0.000995614
  0.063482	  0.063346	diff=0.000136252
  0.822275	  0.818643	diff=0.00363207
 -0.067377	 -0.067283	diff=9.44001e-05
 -0.002624	 -0.002624	diff=3.8358e-07
 -0.469362	 -0.468257	diff=0.00110498
  1.358549	  1.357622	diff=0.000926301
  1.161483	  1.149349	diff=0.0121342
 -1.420631	 -1.459898	diff=0.0392671
  0.182272	  0.181981	diff=0.000290126
  0.055734	  0.055713	diff=2.14627e-05
  0.040549	  0.040464	diff=8.47078e-05
 -0.013080	 -0.013090	diff=9.81739e-06
 -0.117052	 -0.116823	diff=0.000228834
  0.302659	  0.303537	diff=0.000877332
 -0.807036	 -0.808462	diff=0.00142559
  0.171800	  0.171258	diff=0.000541759
 -0.216446	 -0.217086	diff=0.000639985
 -0.159956	 -0.160355	diff=0.000398886
 -0.344856	 -0.345852	diff=0.000995778
  0.066074	  0.065930	diff=0.000143999
  0.593493	  0.596865	diff=0.00337236
 -1.038422	 -1.026781	diff=0.0116415
  3.468188	  3.467772	diff=0.0004157
 -0.362356	 -0.365493	diff=0.00313707
  local_diff=0.0921686
# W_tgt{1}, [8 6]
 -0.009650	 -0.009490	diff=0.000160252
  2.669586	  2.456904	diff=0.212682
  0.485827	  0.495694	diff=0.00986765
  0.000759	  0.000759	diff=1.59476e-07
  0.000088	  0.000087	diff=1.44191e-06
  0.001622	  0.001625	diff=2.67243e-06
  0.000000	  0.000000	diff=1.724e-12
  0.000000	  0.000000	diff=6.30722e-15
 -0.000000	 -0.000000	diff=4.61159e-12
 -2.169085	 -2.346730	diff=0.177646
 -0.457688	 -0.448832	diff=0.00885594
  0.003689	  0.003685	diff=3.68704e-06
 -0.000000	 -0.000000	diff=2.10337e-12
  0.007826	  0.007889	diff=6.27558e-05
 -0.000000	 -0.000000	diff=2.87945e-12
  0.000000	 -0.000000	diff=7.82616e-15
  0.002029	  0.002036	diff=7.26031e-06
  0.195478	  0.194207	diff=0.00127068
 -0.171725	 -0.170525	diff=0.00119965
 -0.002674	 -0.002676	diff=2.02576e-06
 -0.000021	 -0.000021	diff=8.14758e-08
 -0.005761	 -0.005728	diff=3.33838e-05
 -0.000000	 -0.000000	diff=3.29791e-12
  0.000000	  0.000000	diff=1.62006e-15
 -0.003484	 -0.003462	diff=2.11785e-05
 -0.891110	 -0.919088	diff=0.0279777
  0.178112	  0.179488	diff=0.00137636
  0.000000	 -0.000000	diff=1.73378e-13
  0.000001	  0.000001	diff=5.08143e-09
  0.000000	 -0.000000	diff=3.21597e-14
 -0.000000	 -0.000000	diff=2.44379e-13
  0.000000	 -0.000000	diff=2.47554e-15
 -0.000013	 -0.000013	diff=5.01251e-08
  0.001366	  0.001380	diff=1.39447e-05
 -0.115377	 -0.114841	diff=0.000536377
  0.000000	  0.000000	diff=1.00553e-20
 -0.000020	 -0.000020	diff=7.63086e-08
  0.000000	 -0.000000	diff=9.29453e-14
  0.000000	  0.000000	diff=3.53879e-19
  0.000000	 -0.000000	diff=1.55107e-19
  0.000000	 -0.000000	diff=2.27448e-15
 -0.000355	 -0.000354	diff=1.13645e-06
 -0.000000	 -0.000000	diff=6.88239e-11
  0.000000	 -0.000000	diff=2.5086e-22
 -0.000000	 -0.000000	diff=3.66161e-13
  0.000000	  0.000000	diff=4.15784e-15
  0.000000	  0.000000	diff=7.96441e-20
  0.000000	 -0.000000	diff=2.50139e-30
  local_diff=0.441722
# W_tgt{2}, [8 4]
  0.688872	  0.689688	diff=0.000815951
  0.843660	  0.842323	diff=0.00133653
 -0.000052	 -0.000052	diff=2.43496e-07
 -0.175715	 -0.174592	diff=0.00112292
  0.069744	  0.069411	diff=0.000333593
 -0.065363	 -0.065438	diff=7.49564e-05
  0.042388	  0.042459	diff=7.14638e-05
 -5.318486	 -4.922440	diff=0.396045
 -0.024177	 -0.024173	diff=3.84945e-06
 -0.064477	 -0.064679	diff=0.0002018
  0.101565	  0.101160	diff=0.000404719
  0.001561	  0.001572	diff=1.15424e-05
  0.033206	  0.033178	diff=2.84964e-05
 -0.057578	 -0.057722	diff=0.000144257
  0.098581	  0.098199	diff=0.000381877
  0.021526	  0.021467	diff=5.88842e-05
  0.692362	  0.692034	diff=0.000327272
  0.106164	  0.106475	diff=0.000311046
 -0.336351	 -0.333805	diff=0.00254644
 -0.710274	 -0.709632	diff=0.000641709
 -0.994760	 -0.988443	diff=0.00631648
 -0.050137	 -0.050150	diff=1.35335e-05
  0.060774	  0.060768	diff=5.68429e-06
 -3.053524	 -3.047173	diff=0.00635156
 -0.348892	 -0.345915	diff=0.00297695
 -0.539357	 -0.540398	diff=0.00104134
  0.017581	  0.018552	diff=0.000971544
  2.736697	  2.745870	diff=0.00917203
  0.191688	  0.190121	diff=0.00156651
  0.251686	  0.252224	diff=0.000538571
 -0.422097	 -0.422099	diff=2.51113e-06
 12.422431	 12.485501	diff=0.0630696
  local_diff=0.496889
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.29831e-12
 -0.000000	 -0.000000	diff=5.52986e-12
  0.000000	  0.000000	diff=5.50281e-14
  0.000000	  0.000000	diff=5.0886e-14
  local_diff=6.93408e-12
# W_emb_tgt, [2 5]
 -4.413212	 -5.364273	diff=0.951061
 -1.595868	 -1.667142	diff=0.0712739
  0.000030	  0.000030	diff=2.56769e-07
  0.000000	  0.000000	diff=3.24567e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.006134	  0.005455	diff=0.000678902
  0.005892	  0.005388	diff=0.00050316
  0.000000	  0.000000	diff=3.02903e-10
 -0.000000	 -0.000000	diff=1.60328e-10
  local_diff=1.02352
# W_src_char{1}, [8 4]
  0.006310	  0.006331	diff=2.00941e-05
  0.000810	  0.000810	diff=4.80884e-08
  0.000000	  0.000000	diff=2.26611e-12
 -0.104718	 -0.104724	diff=6.1047e-06
  0.088917	  0.088912	diff=4.57541e-06
 -0.133817	 -0.133824	diff=6.70122e-06
  0.000047	  0.000047	diff=5.59558e-09
  0.000010	  0.000010	diff=9.51895e-10
 -0.408558	 -0.407239	diff=0.00131813
 -0.049500	 -0.049680	diff=0.000180277
 -0.000000	 -0.000000	diff=7.20058e-11
  6.427890	  6.419794	diff=0.00809621
 -5.388655	 -5.450521	diff=0.0618661
  8.198538	  8.202110	diff=0.00357225
 -0.002930	 -0.002909	diff=2.11285e-05
 -0.000631	 -0.000626	diff=4.51877e-06
  0.000001	  0.000001	diff=1.41445e-12
  0.000000	  0.000000	diff=9.35186e-13
  0.000000	  0.000000	diff=2.70489e-14
 -0.000009	 -0.000009	diff=2.65694e-12
  0.000007	  0.000007	diff=1.46356e-12
 -0.000011	 -0.000011	diff=7.13166e-13
  0.000000	  0.000000	diff=4.07881e-13
  0.000000	  0.000000	diff=1.3894e-13
 -0.000000	 -0.000000	diff=5.94719e-13
 -0.000000	 -0.000000	diff=1.36343e-12
  0.000000	 -0.000000	diff=5.32316e-17
  0.000000	  0.000000	diff=3.16447e-12
 -0.000000	 -0.000000	diff=2.31e-12
  0.000000	  0.000000	diff=3.42493e-12
 -0.000000	 -0.000000	diff=7.8456e-13
  0.000000	 -0.000000	diff=1.66654e-12
  local_diff=0.0750961
# W_src_char{2}, [8 4]
 -0.815582	 -0.816796	diff=0.00121473
  0.106501	  0.106512	diff=1.03264e-05
 -0.000003	 -0.000003	diff=4.06844e-10
  0.000002	  0.000002	diff=4.98046e-10
 -0.705753	 -0.706074	diff=0.000320999
  0.074979	  0.074995	diff=1.61666e-05
  0.447896	  0.447001	diff=0.000894719
 -1.142267	 -1.141511	diff=0.000756379
 -0.129776	 -0.149956	diff=0.0201803
 -0.523664	 -0.521207	diff=0.00245718
 -0.237605	 -0.239538	diff=0.00193285
 -0.004153	 -0.004163	diff=9.26267e-06
  0.486033	  0.485807	diff=0.000225917
 -0.354848	 -0.353256	diff=0.00159123
 -0.295411	 -0.295802	diff=0.000391092
  0.755303	  0.755901	diff=0.000598036
 -0.970728	 -0.973308	diff=0.00258023
  0.463571	  0.464550	diff=0.000978469
-15.839799	-15.776028	diff=0.0637708
  0.381755	  0.386121	diff=0.00436548
 -0.655293	 -0.654885	diff=0.000407582
  1.157616	  1.196168	diff=0.038552
  0.037619	  0.037714	diff=9.41007e-05
 -0.424803	 -0.424961	diff=0.000157737
 -0.117632	 -0.118148	diff=0.000515573
  0.126203	  0.126280	diff=7.65323e-05
 14.155060	 14.208828	diff=0.0537675
 -0.300620	 -0.296478	diff=0.00414195
 -0.122103	 -0.121920	diff=0.00018311
 -0.793570	 -0.756663	diff=0.0369069
  0.010326	  0.010333	diff=7.08145e-06
 -0.116478	 -0.116490	diff=1.17562e-05
  local_diff=0.237116
# W_src_char{3}, [8 4]
  4.111211	  4.131960	diff=0.0207484
 -2.152713	 -2.151721	diff=0.000992024
 -0.213798	 -0.213917	diff=0.00011857
 -0.003241	 -0.003241	diff=1.97576e-07
 -6.173652	 -6.142243	diff=0.0314085
 -0.015377	 -0.015342	diff=3.50653e-05
  3.047819	  3.040182	diff=0.00763644
  0.011899	  0.011975	diff=7.61565e-05
 -3.968962	 -3.949022	diff=0.0199392
  1.837415	  1.832854	diff=0.00456152
 -0.052642	 -0.052609	diff=3.37235e-05
 -0.060710	 -0.060792	diff=8.21826e-05
  0.978985	  0.983737	diff=0.00475295
 -0.026782	 -0.026253	diff=0.000529517
  0.422168	  0.423542	diff=0.00137322
 -0.864025	 -0.868525	diff=0.0044999
 -0.003994	 -0.004005	diff=1.05379e-05
  0.393593	  0.393443	diff=0.000150241
  0.337120	  0.337177	diff=5.74413e-05
  0.007379	  0.007363	diff=1.67835e-05
  8.908701	  8.943408	diff=0.0347067
  0.028006	  0.028069	diff=6.31528e-05
  2.035470	  2.048928	diff=0.0134574
 -0.024489	 -0.024364	diff=0.000124697
  0.022471	  0.022554	diff=8.29784e-05
  6.142506	  5.860337	diff=0.282169
 -0.011802	 -0.011801	diff=1.23783e-06
 -0.211973	 -0.213133	diff=0.00116002
  0.258764	  0.259195	diff=0.000431336
 -0.607591	 -0.612481	diff=0.00488986
 -0.149009	 -0.148901	diff=0.00010833
 -3.212390	 -3.275104	diff=0.0627136
  local_diff=0.496931
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=1.84841e-10
 -0.000000	 -0.000000	diff=1.36172e-10
 -0.000003	 -0.000003	diff=3.79364e-08
  0.000093	  0.000095	diff=1.80752e-06
 -2.678864	 -3.646700	diff=0.967836
-13.984668	-14.126455	diff=0.141787
  0.000000	 -0.000000	diff=3.94753e-14
 -0.000509	 -0.000514	diff=5.55973e-06
  local_diff=1.10963
# W_h, [2 4]
  0.322616	  0.322109	diff=0.000507386
 -2.161655	 -2.144046	diff=0.017609
 -5.410327	 -5.627592	diff=0.217265
  0.450039	  0.465365	diff=0.0153266
  0.649442	  0.648950	diff=0.00049138
  1.225696	  1.229335	diff=0.00363828
  0.298978	  0.296729	diff=0.00224851
 -0.212704	 -0.211819	diff=0.000885761
  local_diff=0.257972
# W_soft, [5 2]
 -4.315741	 -4.316258	diff=0.000517134
 -1.061395	 -1.063311	diff=0.00191627
 -4.132974	 -4.134715	diff=0.00174125
 -1.998242	 -2.007858	diff=0.00961566
 11.531691	 11.522141	diff=0.00954925
  9.605673	  9.605035	diff=0.000638044
  1.109927	  1.107562	diff=0.0023642
  9.336049	  9.333888	diff=0.00216059
 -6.052483	 -6.067816	diff=0.015333
-13.963372	-13.978669	diff=0.0152966
  local_diff=0.059132
# Num params=288, abs_diff=4.32989
Elapsed time is 6.088362 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 1, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 404, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_h=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 1
# batchSize = 10
# charFeedOpt = 0
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 404
  src input 1: <s> <s> z z
  src mask: 0  0  1  1
  tgt input 1: <s> b </s> </s> </s>
  tgt output 1: b </s> </s> </s> </s>
  tgt mask: 1  1  0  0  0
# W_src{1}, [8 4]
 -0.788143	 -0.788998	diff=0.000854639
 -0.089580	 -0.089550	diff=3.00453e-05
 -0.133116	 -0.133127	diff=1.08415e-05
  0.052326	  0.052324	diff=2.43076e-06
 -1.105455	 -1.107613	diff=0.00215814
 -0.211590	 -0.211554	diff=3.6717e-05
  2.601119	  2.582093	diff=0.0190257
 -2.794677	 -2.796401	diff=0.00172441
  0.386007	  0.386123	diff=0.000116752
  0.028616	  0.028614	diff=2.3377e-06
  0.072328	  0.072333	diff=5.50979e-06
 -0.005154	 -0.005154	diff=1.54228e-08
  0.614895	  0.615207	diff=0.000312677
  0.056544	  0.056547	diff=3.1486e-06
 -1.070930	 -1.069914	diff=0.00101543
  0.464343	  0.464336	diff=6.50848e-06
  0.998717	  0.998250	diff=0.00046642
 -0.117300	 -0.117191	diff=0.000108956
  0.251113	  0.251115	diff=2.10922e-06
 -0.158614	 -0.158646	diff=3.24555e-05
  1.806402	  1.804946	diff=0.00145539
  0.000798	  0.000819	diff=2.09529e-05
 -1.925159	 -1.928153	diff=0.00299386
  0.419551	  0.419603	diff=5.20116e-05
 -0.456034	 -0.455876	diff=0.00015834
 -0.064495	 -0.064590	diff=9.44468e-05
 -0.112614	 -0.112605	diff=8.94896e-06
 -0.116011	 -0.116047	diff=3.61897e-05
 -0.851704	 -0.851123	diff=0.000580843
 -0.040255	 -0.040251	diff=4.10472e-06
  0.758721	  0.758792	diff=7.0588e-05
  0.276150	  0.276394	diff=0.000243805
  local_diff=0.0316348
# W_src{2}, [8 4]
 -1.044570	 -1.044293	diff=0.000277427
 -0.275709	 -0.275479	diff=0.000229821
  0.323822	  0.323529	diff=0.000292815
 -0.018512	 -0.018529	diff=1.61426e-05
 -1.959826	 -1.960669	diff=0.000843551
 -0.053470	 -0.053372	diff=9.79943e-05
 -3.121096	 -3.128758	diff=0.00766179
  0.544701	  0.544102	diff=0.000599106
  0.285343	  0.285302	diff=4.10268e-05
 -0.490546	 -0.490391	diff=0.000154352
  0.232315	  0.232158	diff=0.000157286
 -0.012263	 -0.012271	diff=7.4364e-06
  1.130909	  1.130548	diff=0.000360609
 -0.485061	 -0.485219	diff=0.000157867
 -4.127345	 -4.133940	diff=0.00659536
 -0.230848	 -0.230841	diff=7.20122e-06
 -1.309453	 -1.310251	diff=0.000798804
 -1.175486	 -1.173637	diff=0.00184846
  0.442984	  0.442035	diff=0.000949408
 -0.243922	 -0.244417	diff=0.000495016
  0.068014	  0.067331	diff=0.000682608
 -0.719895	 -0.719517	diff=0.000377087
 -3.915306	 -3.916962	diff=0.00165632
 -0.163135	 -0.162658	diff=0.000476833
  0.977878	  0.977571	diff=0.000307256
  1.200402	  1.200918	diff=0.000516587
 -0.689546	 -0.690545	diff=0.00099818
  0.213670	  0.213370	diff=0.000299908
 -0.382934	 -0.384145	diff=0.00121095
  0.949545	  0.949131	diff=0.000414243
  7.017530	  7.008626	diff=0.0089041
  0.169061	  0.169523	diff=0.000462289
  local_diff=0.0378978
# W_tgt{1}, [8 6]
  0.000128	  0.000128	diff=2.14703e-07
 -2.062665	 -2.079595	diff=0.016929
 -0.014328	 -0.014514	diff=0.000185932
 -0.449924	 -0.449850	diff=7.40217e-05
  0.000000	  0.000000	diff=6.48993e-12
 -3.041054	 -3.064844	diff=0.0237904
  0.000005	  0.000005	diff=1.19868e-07
 -0.000001	 -0.000000	diff=1.62582e-08
  0.000617	  0.000622	diff=5.04572e-06
  0.586608	  0.567412	diff=0.0191954
  0.014035	  0.013863	diff=0.000171953
 -2.185938	 -2.184420	diff=0.00151787
  0.000000	  0.000000	diff=1.73299e-10
-10.923893	-11.265932	diff=0.342038
  0.000001	  0.000000	diff=1.62217e-07
  0.000001	  0.000001	diff=2.41326e-08
 -0.000487	 -0.000484	diff=3.08251e-06
  1.118892	  1.116395	diff=0.00249735
  0.005161	  0.005138	diff=2.3261e-05
  1.698603	  1.699821	diff=0.00121786
 -0.000000	 -0.000000	diff=1.06616e-10
  2.821330	  2.809238	diff=0.0120916
 -0.000004	 -0.000004	diff=3.92607e-08
  0.000000	  0.000000	diff=2.52554e-09
 -0.000487	 -0.000484	diff=3.08654e-06
  1.602554	  1.597971	diff=0.00458232
  0.005246	  0.005222	diff=2.41394e-05
  1.690352	  1.691566	diff=0.00121454
 -0.000000	 -0.000000	diff=1.14923e-10
  3.059307	  3.045422	diff=0.0138851
 -0.000005	 -0.000005	diff=5.13486e-08
  0.000000	  0.000000	diff=2.74355e-09
  0.000000	 -0.000000	diff=3.37221e-12
  0.002025	  0.002017	diff=7.72803e-06
  0.003901	  0.003890	diff=1.12779e-05
 -0.000000	 -0.000000	diff=1.29617e-10
 -0.000000	 -0.000000	diff=5.90746e-12
  0.001627	  0.001621	diff=6.21715e-06
  0.000000	  0.000000	diff=1.07247e-11
 -0.000000	 -0.000000	diff=4.11071e-10
  0.000093	  0.000093	diff=1.14507e-07
 -0.177629	 -0.177716	diff=8.68111e-05
  0.000007	  0.000007	diff=1.75653e-08
 -0.325147	 -0.325108	diff=3.93595e-05
  0.000000	  0.000000	diff=1.93409e-12
 -0.072510	 -0.072458	diff=5.14456e-05
  0.000001	  0.000001	diff=1.33207e-09
 -0.000000	 -0.000000	diff=7.85355e-12
  local_diff=0.439654
# W_tgt{2}, [8 4]
  0.567875	  0.567994	diff=0.000119071
  0.439419	  0.441812	diff=0.00239277
 -0.000049	 -0.000049	diff=1.81957e-07
 -0.110548	 -0.110221	diff=0.00032705
  0.155497	  0.154931	diff=0.000566435
  0.031380	  0.031493	diff=0.000113232
 -0.006362	 -0.006313	diff=4.86018e-05
-13.755722	-13.043678	diff=0.712044
 -0.582988	 -0.583522	diff=0.000534219
  0.333699	  0.332944	diff=0.000754624
  0.031100	  0.031186	diff=8.62477e-05
  0.135506	  0.135408	diff=9.76096e-05
 -1.284027	 -1.290989	diff=0.00696228
  1.624812	  1.618917	diff=0.00589468
  0.555296	  0.555483	diff=0.000186424
  0.094265	  0.093987	diff=0.000277727
  0.337482	  0.337804	diff=0.000321727
 -0.273479	 -0.273466	diff=1.35656e-05
 -0.147662	 -0.147313	diff=0.00034952
 -0.089962	 -0.090084	diff=0.000121826
 -0.022827	 -0.022283	diff=0.000544023
  0.025261	  0.025344	diff=8.34398e-05
 -0.443922	 -0.443067	diff=0.000855141
 -5.885145	 -5.847234	diff=0.037911
  1.075580	  1.075995	diff=0.000414449
  0.011641	  0.011380	diff=0.000261386
  0.175482	  0.175560	diff=7.86121e-05
 -0.143041	 -0.143266	diff=0.000224552
  1.114095	  1.112724	diff=0.00137125
 -0.884098	 -0.886281	diff=0.00218378
 -0.496077	 -0.494631	diff=0.00144583
 -1.087126	 -1.086283	diff=0.000842897
  local_diff=0.777428
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000000	 -0.000000	diff=4.7185e-09
 -0.000000	 -0.000000	diff=6.20346e-09
 -0.000000	 -0.000000	diff=1.10113e-11
 -0.000000	 -0.000000	diff=4.58382e-12
  local_diff=1.09376e-08
# W_emb_tgt, [2 5]
  4.267529	  4.180160	diff=0.0873696
  1.124043	  1.117855	diff=0.00618802
  0.000000	  0.000000	diff=4.90823e-10
 -0.000000	 -0.000000	diff=6.47709e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 17.526395	 17.869018	diff=0.342624
 -9.784102	 -9.761149	diff=0.022953
-12.651399	-13.189501	diff=0.538102
  6.929198	  6.815722	diff=0.113476
  local_diff=1.11071
# W_src_char{1}, [8 4]
 -0.039157	 -0.040428	diff=0.00127199
 -0.013123	 -0.013119	diff=4.12215e-06
 -0.000000	 -0.000000	diff=9.73016e-12
  0.506091	  0.506277	diff=0.000185398
 -0.540520	 -0.540211	diff=0.000308711
  0.638212	  0.638494	diff=0.000282241
 -0.001793	 -0.001793	diff=1.6595e-07
 -0.000528	 -0.000528	diff=2.82032e-07
  4.024801	  4.031588	diff=0.00678635
  0.801324	  0.804215	diff=0.00289074
  0.000007	  0.000007	diff=1.83577e-08
-32.113452	-31.035894	diff=1.07756
 31.809079	 33.116151	diff=1.30707
-40.705413	-39.085784	diff=1.61963
  0.110545	  0.109919	diff=0.000625948
  0.032426	  0.032236	diff=0.000190212
 -0.000108	 -0.000108	diff=7.49461e-12
 -0.000022	 -0.000022	diff=5.42173e-09
 -0.000000	 -0.000000	diff=1.69255e-11
  0.000835	  0.000835	diff=2.09096e-07
 -0.000891	 -0.000891	diff=8.0713e-10
  0.001052	  0.001052	diff=2.63078e-07
 -0.000003	 -0.000003	diff=1.8549e-11
 -0.000001	 -0.000001	diff=2.12308e-10
  0.000001	  0.000001	diff=1.30159e-11
  0.000000	  0.000000	diff=5.90796e-11
  0.000000	  0.000000	diff=1.14102e-12
 -0.000005	 -0.000005	diff=1.34226e-09
  0.000006	  0.000006	diff=2.88316e-11
 -0.000007	 -0.000007	diff=1.69803e-09
  0.000000	  0.000000	diff=9.35525e-12
  0.000000	  0.000000	diff=1.68249e-11
  local_diff=4.0168
# W_src_char{2}, [8 4]
  4.361534	  4.392371	diff=0.0308367
 -0.816152	 -0.815530	diff=0.000622328
  0.000217	  0.000217	diff=2.96125e-08
 -0.000236	 -0.000236	diff=5.23456e-08
  3.216095	  3.231892	diff=0.0157971
 -0.490189	 -0.490065	diff=0.00012401
 -2.210551	 -2.200155	diff=0.0103959
  8.885779	  8.964841	diff=0.0790625
 -3.169495	 -3.154780	diff=0.0147155
  0.526391	  0.510785	diff=0.0156061
 -0.000638	 -0.000627	diff=1.06414e-05
  0.000112	  0.000112	diff=1.66223e-07
 -2.169070	 -2.161984	diff=0.00708536
  0.312540	  0.303478	diff=0.00906269
  1.469601	  1.474286	diff=0.00468545
 -6.037059	 -6.003871	diff=0.0331878
  2.970781	  2.984153	diff=0.0133719
 -1.161433	 -1.161452	diff=1.92429e-05
  2.147004	  0.683130	diff=1.46387
 -0.181671	 -0.182535	diff=0.000864961
  2.654256	  2.660649	diff=0.00639287
 -0.862291	 -0.867434	diff=0.00514217
 -0.147924	 -0.148281	diff=0.000356918
  1.062211	  1.064745	diff=0.00253409
  0.826681	  0.827315	diff=0.000634399
 -0.309367	 -0.309369	diff=1.12856e-06
  4.663437	  3.525010	diff=1.13843
 -0.026919	 -0.027675	diff=0.000755714
  0.720380	  0.720810	diff=0.000429563
 -0.172721	 -0.177918	diff=0.00519706
 -0.039117	 -0.039143	diff=2.54377e-05
  0.282067	  0.282245	diff=0.000177353
  local_diff=2.8594
# W_src_char{3}, [8 4]
 -0.111249	 -0.369311	diff=0.258063
  0.710399	  0.592244	diff=0.118155
  0.398611	  0.398062	diff=0.000548939
 -0.039712	 -0.039789	diff=7.64056e-05
  1.738504	  1.526756	diff=0.211748
 -0.062122	 -0.062259	diff=0.000137229
-16.179565	-15.831543	diff=0.348022
 -0.436800	 -0.438311	diff=0.00151121
 -0.198455	 -0.467370	diff=0.268915
 -0.443256	 -0.528623	diff=0.0853666
  0.307597	  0.307482	diff=0.000114558
  0.006509	  0.006496	diff=1.30262e-05
  2.542492	  2.518539	diff=0.0239528
 -0.027284	 -0.027285	diff=1.24392e-06
 -2.619353	 -2.614669	diff=0.00468351
  0.198593	  0.198448	diff=0.00014571
 -0.009918	 -0.009938	diff=2.0678e-05
 -0.935167	 -0.933743	diff=0.00142376
 -0.776362	 -0.777680	diff=0.00131795
  0.063880	  0.063693	diff=0.000187034
 -6.490741	 -6.879415	diff=0.388674
  0.040999	  0.041075	diff=7.59563e-05
 -6.893677	 -6.870157	diff=0.0235196
  0.712211	  0.708601	diff=0.00360939
  0.001395	  0.001395	diff=4.13641e-07
 -0.185564	 -0.185434	diff=0.000129505
  0.118232	  0.118210	diff=2.19532e-05
  0.003373	  0.003370	diff=2.48057e-06
  1.164719	  1.159505	diff=0.00521347
 -0.006239	 -0.006237	diff=1.56906e-06
  0.969370	  0.969767	diff=0.000396618
  0.084698	  0.084666	diff=3.19915e-05
  local_diff=1.74608
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=1.11558e-08
  0.000001	  0.000001	diff=8.29398e-09
  0.000222	  0.000220	diff=2.63939e-06
 -0.007551	 -0.007681	diff=0.000129496
-20.766027	-15.626250	diff=5.13978
 37.970888	 41.111655	diff=3.14077
  0.000000	 -0.000000	diff=1.27232e-11
  0.000000	  0.000000	diff=9.29356e-12
  local_diff=8.28068
# W_tgt_char{1}, [8 4]
  0.000006	  0.000006	diff=5.93523e-08
  0.000031	  0.000031	diff=3.06144e-07
-26.439551	-26.086359	diff=0.353191
 -0.000018	 -0.000018	diff=1.81489e-07
 -0.004205	 -0.004247	diff=4.15535e-05
 -0.000000	 -0.000000	diff=2.65051e-12
  0.000000	  0.000000	diff=1.28912e-13
  0.000000	  0.000000	diff=2.27594e-08
 -0.000002	 -0.000002	diff=1.28032e-09
 -0.000009	 -0.000009	diff=2.6713e-08
  7.667440	  7.698458	diff=0.0310181
  0.000005	  0.000005	diff=1.5667e-08
  0.001257	  0.001253	diff=3.64987e-06
 -0.000000	 -0.000000	diff=8.69264e-12
  0.000000	 -0.000000	diff=3.80759e-14
  0.000000	  0.000000	diff=2.04467e-08
  0.000000	  0.000000	diff=8.74905e-12
  0.000000	 -0.000000	diff=3.36934e-12
  0.000000	  0.000000	diff=4.65203e-33
  0.000000	 -0.000000	diff=1.91919e-16
  0.000000	 -0.000000	diff=3.29431e-30
  0.000000	  0.000000	diff=5.26288e-12
  0.000000	  0.000000	diff=5.926e-20
 -0.000000	 -0.000000	diff=4.21612e-10
  0.000000	 -0.000000	diff=2.0658e-14
  0.000000	 -0.000000	diff=2.34676e-18
  0.000000	 -0.000000	diff=1.20199e-13
  0.000000	 -0.000000	diff=8.69156e-20
  0.000000	 -0.000000	diff=2.08365e-17
  0.000000	  0.000000	diff=1.17258e-11
  0.000000	  0.000000	diff=9.60559e-26
  0.000000	  0.000000	diff=9.37991e-12
  local_diff=0.384255
# W_tgt_char{2}, [8 4]
  0.101646	  0.101645	diff=1.02648e-06
  0.025548	  0.025548	diff=8.03419e-07
 -0.003586	 -0.003586	diff=1.43858e-07
 -0.009115	 -0.009115	diff=1.16976e-08
  0.112565	  0.112565	diff=9.38157e-08
  0.026860	  0.026861	diff=1.02754e-06
 -1.923065	 -1.923180	diff=0.000114067
  0.586360	  0.586215	diff=0.000145012
  0.000000	  0.000000	diff=7.58812e-14
 -0.000000	 -0.000000	diff=2.89495e-12
  0.000000	 -0.000000	diff=1.15697e-12
  0.000000	  0.000000	diff=2.25262e-13
  0.000000	  0.000000	diff=5.10507e-12
  0.000000	  0.000000	diff=1.75755e-11
 -0.000003	 -0.000003	diff=4.00453e-12
  0.000000	  0.000000	diff=2.58238e-12
  0.041863	  0.041808	diff=5.50966e-05
  0.163362	  0.163359	diff=2.65598e-06
 -0.007909	 -0.007912	diff=2.83757e-06
 -0.039062	 -0.039061	diff=3.58862e-07
  0.046180	  0.046151	diff=2.95712e-05
  0.119242	  0.119242	diff=9.33956e-08
  0.967295	  0.967200	diff=9.5132e-05
  0.940450	  0.940413	diff=3.69727e-05
  0.043663	  0.043623	diff=4.03944e-05
  0.149796	  0.149802	diff=5.24321e-06
 -0.008299	 -0.008301	diff=2.09377e-06
 -0.036062	 -0.036062	diff=7.28698e-07
  0.046829	  0.046808	diff=2.10518e-05
  0.109429	  0.109434	diff=4.34041e-06
  0.896021	  0.895479	diff=0.000542075
  0.929250	  0.928495	diff=0.000755636
  local_diff=0.00185647
# W_tgt_char{3}, [8 4]
 -0.029549	 -0.029784	diff=0.000235272
 -0.697391	 -0.698153	diff=0.000762398
  0.075732	  0.075726	diff=5.55483e-06
  0.242463	  0.242399	diff=6.39005e-05
  0.116411	  0.116325	diff=8.54216e-05
 -0.084565	 -0.084683	diff=0.00011765
  2.890078	  2.889812	diff=0.000266471
 -3.599676	 -3.599590	diff=8.67058e-05
 -0.010463	 -0.010632	diff=0.000168713
 -0.522411	 -0.522839	diff=0.000427808
  0.067409	  0.067405	diff=3.89444e-06
  0.168545	  0.168513	diff=3.17805e-05
  0.122388	  0.122329	diff=5.82908e-05
 -0.073048	 -0.073140	diff=9.2685e-05
  2.691483	  2.691224	diff=0.000259023
 -3.315833	 -3.315862	diff=2.9319e-05
 -0.328685	 -0.328854	diff=0.00016878
 -0.174071	 -0.174552	diff=0.00048058
  0.123294	  0.123276	diff=1.82781e-05
  0.112991	  0.112972	diff=1.91485e-05
 -0.197288	 -0.197343	diff=5.49022e-05
  0.304571	  0.304286	diff=0.000284811
  2.204864	  2.196045	diff=0.0088195
 -0.393320	 -0.393653	diff=0.000332572
 -0.205348	 -0.205484	diff=0.000136008
 -0.659843	 -0.660728	diff=0.000884762
  0.065742	  0.065736	diff=6.19588e-06
  0.305024	  0.304929	diff=9.41471e-05
 -0.131427	 -0.131487	diff=5.981e-05
  0.072471	  0.072400	diff=7.09611e-05
  1.045237	  1.043505	diff=0.00173167
 -0.585451	 -0.585210	diff=0.000241385
  local_diff=0.0160984
# W_emb_tgt_char, [2 5]
  0.000000	  0.000000	diff=2.43969e-08
 -0.000000	 -0.000000	diff=1.93628e-08
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -5.762896	 -5.746086	diff=0.0168098
-133.130557	-125.243617	diff=7.88694
  0.000000	  0.000000	diff=2.10413e-08
 -0.000000	 -0.000000	diff=2.66431e-09
 -0.000000	 -0.000000	diff=2.44805e-10
  0.000000	  0.000000	diff=2.48109e-13
  local_diff=7.90375
# W_h, [2 4]
 -2.214622	 -2.213398	diff=0.0012247
  1.811662	  1.811419	diff=0.000243704
  3.494977	  3.497657	diff=0.00268015
 -2.072446	 -2.073081	diff=0.000635329
 -2.585618	 -2.589159	diff=0.00354136
  1.940688	  1.938382	diff=0.00230572
 -0.038288	 -0.036913	diff=0.00137487
  0.227093	  0.226831	diff=0.000261586
  local_diff=0.0122674
# W_soft, [5 2]
-11.057817	-11.069891	diff=0.0120742
  0.033300	  0.033196	diff=0.000104005
 -9.149358	 -9.149361	diff=2.45866e-06
 -2.066920	 -2.069548	diff=0.00262802
 22.270120	 22.255604	diff=0.0145163
 -7.384247	 -7.397642	diff=0.0133945
 -0.041793	 -0.041971	diff=0.000178213
 -6.504115	 -6.504134	diff=1.83896e-05
 -2.913541	 -2.915243	diff=0.00170209
 16.873833	 16.858990	diff=0.014843
  local_diff=0.0594611
# W_soft_char, [5 2]
  1.016318	  1.015649	diff=0.000668623
  3.006046	  3.005303	diff=0.000743265
  1.117500	  1.116831	diff=0.000668224
 -4.927663	 -4.928521	diff=0.000857967
 -0.208530	 -0.209262	diff=0.000732239
 -0.293145	 -0.294028	diff=0.00088315
  4.805813	  4.804600	diff=0.00121318
 -0.180949	 -0.181810	diff=0.000860968
 -5.184786	 -5.186323	diff=0.00153708
  0.858727	  0.857562	diff=0.00116542
  local_diff=0.00933011
# Num params=404, abs_diff=27.6873
Elapsed time is 12.507448 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  1.691208	  1.695130	diff=0.00392211
  0.209425	  0.209554	diff=0.000128068
  0.205314	  0.205380	diff=6.57855e-05
  0.034301	  0.034298	diff=3.04586e-06
  2.352504	  2.361649	diff=0.00914548
  0.248604	  0.249031	diff=0.000426762
 -7.737061	 -7.655472	diff=0.081589
  2.879099	  2.890978	diff=0.0118794
 -0.465618	 -0.465670	diff=5.17105e-05
 -0.088409	 -0.088404	diff=4.26589e-06
 -0.013284	 -0.013288	diff=3.43982e-06
 -0.003775	 -0.003775	diff=7.21875e-08
 -0.496258	 -0.496467	diff=0.000209477
 -0.111333	 -0.111437	diff=0.000104893
  2.469988	  2.469275	diff=0.000713735
 -1.160779	 -1.160477	diff=0.000301616
 -1.077871	 -1.076507	diff=0.00136397
  0.044465	  0.044620	diff=0.000154734
 -0.283691	 -0.283650	diff=4.13068e-05
 -0.098489	 -0.098535	diff=4.59407e-05
 -2.094724	 -2.090731	diff=0.00399227
  0.083952	  0.084084	diff=0.000132376
  2.684639	  2.701797	diff=0.0171581
  0.073468	  0.073397	diff=7.06492e-05
  0.298998	  0.299844	diff=0.00084555
 -0.073800	 -0.073813	diff=1.28124e-05
  0.120543	  0.120533	diff=1.01159e-05
 -0.058718	 -0.058748	diff=3.07933e-05
  0.533679	  0.536541	diff=0.0028621
 -0.053644	 -0.053614	diff=2.95287e-05
 -1.656022	 -1.654360	diff=0.00166111
  0.167749	  0.167837	diff=8.81168e-05
  local_diff=0.137048
# W_src{2}, [8 4]
  0.257111	  0.259733	diff=0.00262192
  1.481424	  1.479100	diff=0.00232385
 -0.706583	 -0.705580	diff=0.00100347
  0.068150	  0.068230	diff=8.08844e-05
 -0.046748	 -0.041605	diff=0.00514335
  2.845183	  2.853669	diff=0.00848637
  7.692487	  7.739043	diff=0.046556
 -1.829763	 -1.830427	diff=0.000664387
 -1.138577	 -1.138496	diff=8.12783e-05
  2.379913	  2.379829	diff=8.40779e-05
 -0.539169	 -0.538607	diff=0.00056201
  0.052149	  0.052196	diff=4.63239e-05
 -4.393115	 -4.391012	diff=0.00210315
  4.454525	  4.449793	diff=0.0047317
  8.420919	  8.465211	diff=0.0442917
  1.032680	  1.034027	diff=0.00134701
  4.025723	  4.026504	diff=0.000781476
  1.717489	  1.726134	diff=0.00864501
 -1.130048	 -1.126916	diff=0.00313209
  0.914578	  0.916730	diff=0.00215225
 -3.598611	 -3.598249	diff=0.000362124
  3.069176	  3.068846	diff=0.000330293
  6.500144	  6.525925	diff=0.0257808
  0.249654	  0.248537	diff=0.00111684
 -3.185763	 -3.185446	diff=0.000317472
 -3.472520	 -3.470720	diff=0.00180012
  1.925159	  1.928366	diff=0.00320708
 -0.725608	 -0.724457	diff=0.00115034
  6.073682	  6.075093	diff=0.00141064
 -5.903245	 -5.905097	diff=0.00185227
-12.090676	-11.998177	diff=0.0924997
 -0.471679	 -0.472901	diff=0.0012226
  local_diff=0.265889
# W_tgt{1}, [8 6]
 -0.001843	 -0.001845	diff=2.39763e-06
-33.918955	-35.713496	diff=1.79454
 -0.426378	 -0.413694	diff=0.0126835
  0.060801	  0.060805	diff=3.87816e-06
  0.000000	  0.000000	diff=3.78557e-11
  1.905885	  1.874683	diff=0.0312016
 -0.000035	 -0.000035	diff=9.29775e-08
 -0.000010	 -0.000010	diff=1.16043e-08
 -0.008904	 -0.008960	diff=5.63245e-05
 16.974113	 15.711655	diff=1.26246
  0.383726	  0.395145	diff=0.0114189
  0.295172	  0.295270	diff=9.79222e-05
  0.000000	  0.000000	diff=2.1798e-10
  7.047220	  7.006507	diff=0.0407128
 -0.000174	 -0.000172	diff=2.19939e-06
 -0.000034	 -0.000035	diff=9.96341e-07
  0.006480	  0.006450	diff=2.93899e-05
-12.777461	-12.937844	diff=0.160384
 -0.042987	 -0.042818	diff=0.000168941
 -0.221385	 -0.221409	diff=2.36679e-05
 -0.000000	 -0.000000	diff=1.47202e-10
 -3.630565	 -3.609541	diff=0.0210236
  0.000122	  0.000124	diff=1.12346e-06
  0.000003	  0.000003	diff=4.4858e-08
  0.004008	  0.003997	diff=1.12714e-05
  7.278220	  7.262682	diff=0.0155378
  0.135026	  0.136208	diff=0.00118204
 -0.093947	 -0.093669	diff=0.00027754
 -0.000000	 -0.000000	diff=4.0593e-11
 -1.871883	 -1.833922	diff=0.0379606
  0.000076	  0.000077	diff=4.32231e-07
  0.000008	  0.000008	diff=1.49176e-07
  0.000000	  0.000000	diff=1.70733e-15
 12.317125	 12.184978	diff=0.132146
  0.153640	  0.154921	diff=0.00128067
  0.000000	  0.000000	diff=1.916e-12
 -0.000000	 -0.000000	diff=3.75887e-12
  1.794382	  1.798169	diff=0.00378698
  0.000000	 -0.000000	diff=4.80408e-13
  0.000000	  0.000000	diff=3.24046e-12
 -0.000001	 -0.000001	diff=5.71008e-13
  0.104263	  0.096933	diff=0.00732969
  0.000202	  0.000202	diff=1.15552e-08
  0.000040	  0.000040	diff=2.20812e-11
 -0.000000	 -0.000000	diff=5.23192e-12
  0.000509	  0.000509	diff=2.6727e-08
 -0.000000	 -0.000000	diff=5.24541e-12
 -0.000000	 -0.000000	diff=8.39947e-14
  local_diff=3.53432
# W_tgt{2}, [8 4]
 -0.080297	 -0.080099	diff=0.00019849
 59.244012	 57.296673	diff=1.94734
  0.000296	  0.000295	diff=1.12543e-06
  1.917106	  1.913088	diff=0.0040177
  1.128471	  1.123205	diff=0.00526598
  0.929370	  0.932118	diff=0.00274822
 -0.005181	 -0.005142	diff=3.877e-05
222.801168	219.299889	diff=3.50128
 -0.396604	 -0.396080	diff=0.000524207
 -1.102140	 -1.104242	diff=0.00210144
 -0.083575	 -0.083681	diff=0.000105139
 -0.113983	 -0.114081	diff=9.85046e-05
 -2.902071	 -2.882960	diff=0.0191112
  0.254133	  0.253732	diff=0.000400964
 -0.454097	 -0.451002	diff=0.00309501
 -1.720599	 -1.723073	diff=0.00247391
 -1.707712	 -1.706602	diff=0.00110972
  1.282216	  1.289100	diff=0.00688414
  1.121675	  1.118688	diff=0.00298707
  0.566936	  0.554980	diff=0.0119559
 -4.241298	 -4.234609	diff=0.00668953
  0.204569	  0.203209	diff=0.00135968
 -1.980148	 -1.975682	diff=0.0044664
 16.081408	 16.026239	diff=0.0551684
 -1.547715	 -1.537844	diff=0.00987107
  1.100635	  1.089706	diff=0.010929
 -0.777061	 -0.772924	diff=0.00413638
 -0.816858	 -0.793855	diff=0.0230025
 -0.599107	 -0.597734	diff=0.00137357
  0.232735	  0.235232	diff=0.00249651
  0.745546	  0.738565	diff=0.00698096
 -8.416435	 -8.290394	diff=0.126041
  local_diff=5.76425
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=3.84406e-08
  0.000001	  0.000001	diff=5.07067e-08
  0.000000	  0.000000	diff=4.30232e-12
  0.000000	  0.000000	diff=2.04235e-12
  local_diff=8.91536e-08
# W_emb_tgt, [2 5]
 79.188581	 72.137594	diff=7.05099
 19.922071	 19.375430	diff=0.546641
 -0.000000	 -0.000000	diff=2.08037e-09
 -0.000000	 -0.000000	diff=4.13543e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.091943	  1.055186	diff=0.0367565
  0.388891	  0.354530	diff=0.0343609
 29.768716	 30.147649	diff=0.378932
  1.912417	  2.024877	diff=0.11246
  local_diff=8.16014
# W_src_char{1}, [8 4]
 -0.298975	 -0.154485	diff=0.144491
  0.005595	 -0.000000	diff=0.00559474
  0.000000	  0.000000	diff=4.51279e-11
 -0.215279	 -0.000000	diff=0.215279
  0.022013	  0.021250	diff=0.000762927
 -0.269685	  0.000249	diff=0.269934
  0.000071	  0.000071	diff=6.90124e-07
  0.000225	 -0.000000	diff=0.000225127
 -0.259090	 -0.227936	diff=0.0311545
 -0.340428	  0.000000	diff=0.340428
 -0.000000	 -0.000000	diff=1.78512e-09
 15.673276	 -0.000001	diff=15.6733
  0.611501	 -1.302650	diff=1.91415
 20.582178	  0.000110	diff=20.5821
 -0.004368	 -0.004324	diff=4.45198e-05
 -0.013822	  0.000000	diff=0.0138216
  0.000004	  0.000004	diff=4.17138e-08
  0.000009	 -0.000000	diff=9.22951e-06
  0.000000	  0.000000	diff=4.44213e-12
 -0.000356	  0.000000	diff=0.000356179
  0.000035	  0.000035	diff=3.44763e-07
 -0.000449	  0.000000	diff=0.000448567
  0.000000	  0.000000	diff=1.14636e-09
  0.000000	 -0.000000	diff=3.69971e-07
 -0.000000	 -0.000000	diff=2.61456e-10
 -0.000000	 -0.000000	diff=5.98078e-08
  0.000000	 -0.000000	diff=4.48832e-14
  0.000002	 -0.000000	diff=2.30805e-06
 -0.000000	 -0.000000	diff=2.24695e-09
  0.000003	 -0.000000	diff=2.90673e-06
 -0.000000	 -0.000000	diff=4.80408e-12
 -0.000000	  0.000000	diff=2.38742e-09
  local_diff=39.1921
# W_src_char{2}, [8 4]
 -4.118388	 -4.176536	diff=0.0581481
  0.011069	  0.009683	diff=0.00138579
 -0.000206	 -0.000206	diff=3.26546e-08
  0.000003	  0.000003	diff=6.19414e-08
 -3.400973	 -3.425364	diff=0.0243911
  0.117965	  0.117349	diff=0.000616844
  2.110655	  2.092253	diff=0.018402
  0.033306	 -0.105561	diff=0.138866
  2.526315	  2.484258	diff=0.0420573
  0.558105	  0.603155	diff=0.0450493
 -0.038794	 -0.041769	diff=0.00297446
  0.051860	  0.051912	diff=5.17381e-05
  2.288798	  2.276290	diff=0.0125087
  0.489392	  0.515052	diff=0.0256604
 -1.390745	 -1.398212	diff=0.00746722
  0.137163	  0.071283	diff=0.0658802
 -3.998686	 -4.014997	diff=0.0163102
  3.396439	  3.397951	diff=0.0015123
-24.154489	-19.974274	diff=4.18022
  0.660664	  0.660403	diff=0.000260778
 -3.456798	 -3.460536	diff=0.00373811
  2.749645	  2.748854	diff=0.000790634
  0.189059	  0.189493	diff=0.000434124
 -3.198669	 -3.204259	diff=0.00559043
 -0.933185	 -0.934005	diff=0.000820063
  0.904909	  0.904944	diff=3.56773e-05
  8.286275	 12.220066	diff=3.93379
  0.010619	  0.010301	diff=0.000317796
 -0.846035	 -0.845879	diff=0.000155735
  0.395977	  0.395922	diff=5.50879e-05
  0.050121	  0.050146	diff=2.46288e-05
 -0.853698	 -0.854023	diff=0.000324517
  local_diff=8.58784
# W_src_char{3}, [8 4]
 -3.358059	 -2.517383	diff=0.840676
 -2.758678	 -2.387394	diff=0.371283
 -1.007372	 -1.005974	diff=0.0013978
 -0.064061	 -0.064013	diff=4.83267e-05
  1.102242	  1.698688	diff=0.596446
 -0.519695	 -0.518975	diff=0.000719226
 14.426863	 13.752078	diff=0.674785
  0.304140	  0.305143	diff=0.00100315
  2.512865	  3.316782	diff=0.803918
 -3.404696	 -3.094210	diff=0.310485
 -0.457305	 -0.456850	diff=0.000455214
 -0.110928	 -0.110856	diff=7.2557e-05
-14.198919	-14.097407	diff=0.101512
 -0.285965	 -0.285785	diff=0.000180039
  0.894583	  0.878602	diff=0.0159809
  0.290630	  0.290866	diff=0.000235827
 -0.220515	 -0.220941	diff=0.000425877
  5.747822	  5.746296	diff=0.00152603
  1.795475	  1.798681	diff=0.00320659
  0.179313	  0.178949	diff=0.000364109
 14.063338	 15.420999	diff=1.35766
  0.637677	  0.638629	diff=0.000951269
 12.454192	 12.456958	diff=0.00276582
 -0.375925	 -0.372992	diff=0.00293369
  0.030896	  0.030888	diff=8.05167e-06
 -0.820473	 -0.820688	diff=0.000214891
 -0.218138	 -0.218024	diff=0.000113883
 -0.025968	 -0.025973	diff=5.20743e-06
 -1.238154	 -1.218102	diff=0.020052
 -0.089511	 -0.089487	diff=2.39084e-05
 -1.755960	 -1.755244	diff=0.000716075
  0.077308	  0.077357	diff=4.91042e-05
  local_diff=5.11022
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=3.30591e-08
 -0.000002	 -0.000002	diff=2.40822e-08
 -0.005406	 -0.002855	diff=0.002551
  0.088460	  0.049025	diff=0.0394351
-59.363698	  6.595612	diff=65.9593
-59.294284	  4.658071	diff=63.9524
 -0.000000	 -0.000000	diff=1.19053e-12
  0.000000	  0.000000	diff=4.25016e-12
  local_diff=129.954
# W_tgt_char{1}, [8 4]
  0.000001	  0.000001	diff=7.21735e-09
  0.000004	  0.000004	diff=4.30206e-08
 -2.981455	 -3.093394	diff=0.111939
 -0.000001	 -0.000001	diff=6.29017e-09
 -0.000449	 -0.000454	diff=4.4422e-06
  0.000000	  0.000000	diff=5.23832e-13
  0.000079	  0.000085	diff=5.32533e-06
  0.000002	  0.000002	diff=1.34232e-08
 -0.000000	 -0.000000	diff=3.38111e-10
 -0.000001	 -0.000001	diff=3.84716e-09
  0.922302	  0.912905	diff=0.00939762
  0.000000	  0.000000	diff=5.43268e-10
  0.000134	  0.000134	diff=3.90185e-07
  0.000000	 -0.000000	diff=2.29115e-12
  0.000076	  0.000080	diff=4.80563e-06
  0.000002	  0.000002	diff=1.24304e-08
  0.000000	  0.000000	diff=2.95537e-12
  0.000000	 -0.000000	diff=1.62659e-12
  0.000000	  0.000000	diff=1.34425e-37
  0.000000	 -0.000000	diff=3.75551e-17
  0.000000	  0.000000	diff=3.4895e-35
  0.000000	  0.000000	diff=3.55165e-16
  0.000012	  0.000013	diff=1.2102e-07
  0.000000	  0.000000	diff=4.40623e-10
  0.000000	 -0.000000	diff=1.32321e-16
  0.000000	 -0.000000	diff=1.37714e-18
  0.000000	 -0.000000	diff=2.45231e-18
  0.000000	 -0.000000	diff=3.76059e-23
  0.000000	 -0.000000	diff=4.04812e-21
  0.000000	 -0.000000	diff=1.87977e-16
  0.000013	  0.000013	diff=1.25017e-07
  0.000000	  0.000000	diff=1.07415e-09
  local_diff=0.121352
# W_tgt_char{2}, [8 4]
  0.007183	  0.007184	diff=6.89145e-08
  0.003911	  0.003911	diff=1.25466e-08
  0.000600	  0.000600	diff=2.06234e-08
 -0.001462	 -0.001462	diff=7.65628e-09
  0.010218	  0.010219	diff=3.37997e-07
  0.003694	  0.003694	diff=1.97505e-08
 -0.257877	 -0.258041	diff=0.000164034
  0.098989	  0.098857	diff=0.000131946
  0.000000	  0.000000	diff=3.26089e-12
 -0.000000	 -0.000000	diff=2.17484e-12
  0.000000	 -0.000000	diff=4.60933e-13
  0.000000	  0.000000	diff=2.75774e-12
  0.000000	  0.000000	diff=2.64024e-13
 -0.000000	 -0.000000	diff=8.96477e-13
 -0.000000	 -0.000000	diff=2.48679e-12
  0.000000	  0.000000	diff=4.674e-12
  0.015081	  0.015070	diff=1.04189e-05
  0.056941	  0.056940	diff=1.37112e-06
 -0.001780	 -0.001780	diff=5.24007e-07
 -0.012194	 -0.012193	diff=1.40583e-07
  0.015754	  0.015748	diff=5.71763e-06
  0.040126	  0.040125	diff=2.76999e-07
  0.187250	  0.187410	diff=0.000160056
  0.126892	  0.127066	diff=0.000174189
  0.015074	  0.015067	diff=7.6731e-06
  0.051549	  0.051552	diff=2.34705e-06
 -0.001842	 -0.001842	diff=3.8495e-07
 -0.011091	 -0.011091	diff=3.19114e-07
  0.015534	  0.015530	diff=4.08925e-06
  0.036304	  0.036306	diff=1.76903e-06
  0.173491	  0.173537	diff=4.53065e-05
  0.137634	  0.137435	diff=0.000199318
  local_diff=0.000910349
# W_tgt_char{3}, [8 4]
 -0.179670	 -0.179726	diff=5.53995e-05
 -0.294960	 -0.295076	diff=0.000116408
  0.030271	  0.030273	diff=1.66403e-06
  0.090028	  0.090024	diff=4.56042e-06
 -0.124652	 -0.124677	diff=2.41966e-05
 -0.108119	 -0.108137	diff=1.75904e-05
  0.110262	  0.110119	diff=0.000143211
 -0.030135	 -0.030216	diff=8.03299e-05
 -0.143358	 -0.143395	diff=3.7058e-05
 -0.225102	 -0.225167	diff=6.46721e-05
  0.025632	  0.025632	diff=8.57455e-07
  0.064500	  0.064498	diff=2.11157e-06
 -0.097099	 -0.097114	diff=1.55321e-05
 -0.089489	 -0.089503	diff=1.43562e-05
  0.129424	  0.129270	diff=0.000154053
 -0.013938	 -0.014046	diff=0.000108165
 -0.135398	 -0.135409	diff=1.05502e-05
 -0.295819	 -0.295890	diff=7.09551e-05
  0.030956	  0.030956	diff=1.84593e-07
  0.057922	  0.057922	diff=3.18661e-07
 -0.093144	 -0.093147	diff=3.71205e-06
 -0.182036	 -0.182066	diff=3.09015e-05
  0.373221	  0.371534	diff=0.0016874
  0.353911	  0.353733	diff=0.000177947
 -0.174995	 -0.175043	diff=4.87359e-05
 -0.334319	 -0.334438	diff=0.000118791
  0.027237	  0.027239	diff=2.37291e-06
  0.110166	  0.110160	diff=6.00683e-06
 -0.131595	 -0.131619	diff=2.43324e-05
 -0.115735	 -0.115739	diff=4.47746e-06
  0.073723	  0.073491	diff=0.000232156
  0.047265	  0.047335	diff=7.00305e-05
  local_diff=0.00332904
# W_emb_tgt_char, [2 5]
 -0.000056	 -0.000053	diff=2.47913e-06
  0.000014	  0.000015	diff=2.44863e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.675889	 -0.681236	diff=0.00534622
-11.990257	-14.851588	diff=2.86133
  0.000000	  0.000000	diff=1.57362e-09
 -0.000000	 -0.000000	diff=1.97179e-10
 -0.000000	 -0.000000	diff=1.15329e-10
  0.000000	  0.000000	diff=2.63774e-12
  local_diff=2.86668
# W_a, [2 2]
 -0.968581	 -0.969476	diff=0.000894799
 -0.146301	 -0.144412	diff=0.00188888
  0.387926	  0.388350	diff=0.000423964
  0.190872	  0.190915	diff=4.3644e-05
  local_diff=0.00325128
# W_h, [2 4]
 -0.221210	 -0.196918	diff=0.024292
  8.760912	  8.750541	diff=0.010371
 -1.525277	 -1.546842	diff=0.0215645
 -6.775382	 -6.754659	diff=0.020723
 -0.385243	 -0.357224	diff=0.0280193
 -4.423082	 -4.424782	diff=0.00170032
-10.925142	-10.948920	diff=0.0237787
 24.229972	 23.877181	diff=0.352792
  local_diff=0.48324
# W_h_char, [2 4]
  0.000000	  0.000000	diff=1.41083e-10
 -0.000000	 -0.000000	diff=8.0395e-08
 -0.000000	 -0.000000	diff=2.44437e-10
 -0.000002	 -0.000002	diff=1.14068e-07
  0.000000	  0.000000	diff=4.31512e-11
  0.000008	  0.000008	diff=1.80304e-08
 -0.000000	 -0.000000	diff=1.07476e-11
 -0.000002	 -0.000002	diff=1.06625e-08
  local_diff=2.23595e-07
# W_soft, [5 2]
 -2.529825	 -2.537289	diff=0.00746409
  1.359032	  1.354764	diff=0.00426751
 -1.855381	 -1.856536	diff=0.00115493
  2.798987	  2.791911	diff=0.00707619
  0.252591	  0.247150	diff=0.00544052
  7.483556	  7.476370	diff=0.00718678
 -0.034587	 -0.035347	diff=0.000759362
 -5.710977	 -5.712300	diff=0.00132298
 -0.902240	 -0.904930	diff=0.00268975
 -0.818740	 -0.823793	diff=0.0050529
  local_diff=0.042415
# W_soft_char, [5 2]
  0.315273	  0.315188	diff=8.5035e-05
  0.312545	  0.312444	diff=0.000101647
  0.107124	  0.107045	diff=7.84479e-05
 -0.474190	 -0.474272	diff=8.20205e-05
 -0.260295	 -0.260405	diff=0.000109435
  0.139935	  0.139861	diff=7.37612e-05
  0.508721	  0.508532	diff=0.000189444
 -0.040127	 -0.040225	diff=9.82051e-05
 -0.366060	 -0.366175	diff=0.000115073
 -0.241799	 -0.241992	diff=0.000192792
  local_diff=0.00112586
# Num params=416, abs_diff=204.228
Elapsed time is 14.066003 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'normLocalAttn', 1)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 1
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  1.691208	  1.695130	diff=0.00392211
  0.209425	  0.209554	diff=0.000128068
  0.205314	  0.205380	diff=6.57855e-05
  0.034301	  0.034298	diff=3.04586e-06
  2.352504	  2.361649	diff=0.00914548
  0.248604	  0.249031	diff=0.000426762
 -7.737061	 -7.655472	diff=0.081589
  2.879099	  2.890978	diff=0.0118794
 -0.465618	 -0.465670	diff=5.17105e-05
 -0.088409	 -0.088404	diff=4.26589e-06
 -0.013284	 -0.013288	diff=3.43982e-06
 -0.003775	 -0.003775	diff=7.21875e-08
 -0.496258	 -0.496467	diff=0.000209477
 -0.111333	 -0.111437	diff=0.000104893
  2.469988	  2.469275	diff=0.000713735
 -1.160779	 -1.160477	diff=0.000301616
 -1.077871	 -1.076507	diff=0.00136397
  0.044465	  0.044620	diff=0.000154734
 -0.283691	 -0.283650	diff=4.13068e-05
 -0.098489	 -0.098535	diff=4.59407e-05
 -2.094724	 -2.090731	diff=0.00399227
  0.083952	  0.084084	diff=0.000132376
  2.684639	  2.701797	diff=0.0171581
  0.073468	  0.073397	diff=7.06492e-05
  0.298998	  0.299844	diff=0.00084555
 -0.073800	 -0.073813	diff=1.28124e-05
  0.120543	  0.120533	diff=1.01159e-05
 -0.058718	 -0.058748	diff=3.07933e-05
  0.533679	  0.536541	diff=0.0028621
 -0.053644	 -0.053614	diff=2.95287e-05
 -1.656022	 -1.654360	diff=0.00166111
  0.167749	  0.167837	diff=8.81168e-05
  local_diff=0.137048
# W_src{2}, [8 4]
  0.257111	  0.259733	diff=0.00262192
  1.481424	  1.479100	diff=0.00232385
 -0.706583	 -0.705580	diff=0.00100347
  0.068150	  0.068230	diff=8.08844e-05
 -0.046748	 -0.041605	diff=0.00514335
  2.845183	  2.853669	diff=0.00848637
  7.692487	  7.739043	diff=0.046556
 -1.829763	 -1.830427	diff=0.000664387
 -1.138577	 -1.138496	diff=8.12783e-05
  2.379913	  2.379829	diff=8.40779e-05
 -0.539169	 -0.538607	diff=0.00056201
  0.052149	  0.052196	diff=4.63239e-05
 -4.393115	 -4.391012	diff=0.00210315
  4.454525	  4.449793	diff=0.0047317
  8.420919	  8.465211	diff=0.0442917
  1.032680	  1.034027	diff=0.00134701
  4.025723	  4.026504	diff=0.000781476
  1.717489	  1.726134	diff=0.00864501
 -1.130048	 -1.126916	diff=0.00313209
  0.914578	  0.916730	diff=0.00215225
 -3.598611	 -3.598249	diff=0.000362124
  3.069176	  3.068846	diff=0.000330293
  6.500144	  6.525925	diff=0.0257808
  0.249654	  0.248537	diff=0.00111684
 -3.185763	 -3.185446	diff=0.000317472
 -3.472520	 -3.470720	diff=0.00180012
  1.925159	  1.928366	diff=0.00320708
 -0.725608	 -0.724457	diff=0.00115034
  6.073682	  6.075093	diff=0.00141064
 -5.903245	 -5.905097	diff=0.00185227
-12.090676	-11.998177	diff=0.0924997
 -0.471679	 -0.472901	diff=0.0012226
  local_diff=0.265889
# W_tgt{1}, [8 6]
 -0.001843	 -0.001845	diff=2.39763e-06
-33.918955	-35.713496	diff=1.79454
 -0.426378	 -0.413694	diff=0.0126835
  0.060801	  0.060805	diff=3.87816e-06
  0.000000	  0.000000	diff=3.78557e-11
  1.905885	  1.874683	diff=0.0312016
 -0.000035	 -0.000035	diff=9.29775e-08
 -0.000010	 -0.000010	diff=1.16043e-08
 -0.008904	 -0.008960	diff=5.63245e-05
 16.974113	 15.711655	diff=1.26246
  0.383726	  0.395145	diff=0.0114189
  0.295172	  0.295270	diff=9.79222e-05
  0.000000	  0.000000	diff=2.1798e-10
  7.047220	  7.006507	diff=0.0407128
 -0.000174	 -0.000172	diff=2.19939e-06
 -0.000034	 -0.000035	diff=9.96341e-07
  0.006480	  0.006450	diff=2.93899e-05
-12.777461	-12.937844	diff=0.160384
 -0.042987	 -0.042818	diff=0.000168941
 -0.221385	 -0.221409	diff=2.36679e-05
 -0.000000	 -0.000000	diff=1.47202e-10
 -3.630565	 -3.609541	diff=0.0210236
  0.000122	  0.000124	diff=1.12346e-06
  0.000003	  0.000003	diff=4.4858e-08
  0.004008	  0.003997	diff=1.12714e-05
  7.278220	  7.262682	diff=0.0155378
  0.135026	  0.136208	diff=0.00118204
 -0.093947	 -0.093669	diff=0.00027754
 -0.000000	 -0.000000	diff=4.0593e-11
 -1.871883	 -1.833922	diff=0.0379606
  0.000076	  0.000077	diff=4.32231e-07
  0.000008	  0.000008	diff=1.49176e-07
  0.000000	  0.000000	diff=1.70733e-15
 12.317125	 12.184978	diff=0.132146
  0.153640	  0.154921	diff=0.00128067
  0.000000	  0.000000	diff=1.916e-12
 -0.000000	 -0.000000	diff=3.75887e-12
  1.794382	  1.798169	diff=0.00378698
  0.000000	 -0.000000	diff=4.80408e-13
  0.000000	  0.000000	diff=3.24046e-12
 -0.000001	 -0.000001	diff=5.71008e-13
  0.104263	  0.096933	diff=0.00732969
  0.000202	  0.000202	diff=1.15552e-08
  0.000040	  0.000040	diff=2.20812e-11
 -0.000000	 -0.000000	diff=5.23192e-12
  0.000509	  0.000509	diff=2.6727e-08
 -0.000000	 -0.000000	diff=5.24541e-12
 -0.000000	 -0.000000	diff=8.39947e-14
  local_diff=3.53432
# W_tgt{2}, [8 4]
 -0.080297	 -0.080099	diff=0.00019849
 59.244012	 57.296673	diff=1.94734
  0.000296	  0.000295	diff=1.12543e-06
  1.917106	  1.913088	diff=0.0040177
  1.128471	  1.123205	diff=0.00526598
  0.929370	  0.932118	diff=0.00274822
 -0.005181	 -0.005142	diff=3.877e-05
222.801168	219.299889	diff=3.50128
 -0.396604	 -0.396080	diff=0.000524207
 -1.102140	 -1.104242	diff=0.00210144
 -0.083575	 -0.083681	diff=0.000105139
 -0.113983	 -0.114081	diff=9.85046e-05
 -2.902071	 -2.882960	diff=0.0191112
  0.254133	  0.253732	diff=0.000400964
 -0.454097	 -0.451002	diff=0.00309501
 -1.720599	 -1.723073	diff=0.00247391
 -1.707712	 -1.706602	diff=0.00110972
  1.282216	  1.289100	diff=0.00688414
  1.121675	  1.118688	diff=0.00298707
  0.566936	  0.554980	diff=0.0119559
 -4.241298	 -4.234609	diff=0.00668953
  0.204569	  0.203209	diff=0.00135968
 -1.980148	 -1.975682	diff=0.0044664
 16.081408	 16.026239	diff=0.0551684
 -1.547715	 -1.537844	diff=0.00987107
  1.100635	  1.089706	diff=0.010929
 -0.777061	 -0.772924	diff=0.00413638
 -0.816858	 -0.793855	diff=0.0230025
 -0.599107	 -0.597734	diff=0.00137357
  0.232735	  0.235232	diff=0.00249651
  0.745546	  0.738565	diff=0.00698096
 -8.416435	 -8.290394	diff=0.126041
  local_diff=5.76425
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=3.84406e-08
  0.000001	  0.000001	diff=5.07067e-08
  0.000000	  0.000000	diff=4.30232e-12
  0.000000	  0.000000	diff=2.04235e-12
  local_diff=8.91536e-08
# W_emb_tgt, [2 5]
 79.188581	 72.137594	diff=7.05099
 19.922071	 19.375430	diff=0.546641
 -0.000000	 -0.000000	diff=2.08037e-09
 -0.000000	 -0.000000	diff=4.13543e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.091943	  1.055186	diff=0.0367565
  0.388891	  0.354530	diff=0.0343609
 29.768716	 30.147649	diff=0.378932
  1.912417	  2.024877	diff=0.11246
  local_diff=8.16014
# W_src_char{1}, [8 4]
 -0.298975	 -0.154485	diff=0.144491
  0.005595	 -0.000000	diff=0.00559474
  0.000000	  0.000000	diff=4.51279e-11
 -0.215279	 -0.000000	diff=0.215279
  0.022013	  0.021250	diff=0.000762927
 -0.269685	  0.000249	diff=0.269934
  0.000071	  0.000071	diff=6.90124e-07
  0.000225	 -0.000000	diff=0.000225127
 -0.259090	 -0.227936	diff=0.0311545
 -0.340428	  0.000000	diff=0.340428
 -0.000000	 -0.000000	diff=1.78512e-09
 15.673276	 -0.000001	diff=15.6733
  0.611501	 -1.302650	diff=1.91415
 20.582178	  0.000110	diff=20.5821
 -0.004368	 -0.004324	diff=4.45198e-05
 -0.013822	  0.000000	diff=0.0138216
  0.000004	  0.000004	diff=4.17138e-08
  0.000009	 -0.000000	diff=9.22951e-06
  0.000000	  0.000000	diff=4.44213e-12
 -0.000356	  0.000000	diff=0.000356179
  0.000035	  0.000035	diff=3.44763e-07
 -0.000449	  0.000000	diff=0.000448567
  0.000000	  0.000000	diff=1.14636e-09
  0.000000	 -0.000000	diff=3.69971e-07
 -0.000000	 -0.000000	diff=2.61456e-10
 -0.000000	 -0.000000	diff=5.98078e-08
  0.000000	 -0.000000	diff=4.48832e-14
  0.000002	 -0.000000	diff=2.30805e-06
 -0.000000	 -0.000000	diff=2.24695e-09
  0.000003	 -0.000000	diff=2.90673e-06
 -0.000000	 -0.000000	diff=4.80408e-12
 -0.000000	  0.000000	diff=2.38742e-09
  local_diff=39.1921
# W_src_char{2}, [8 4]
 -4.118388	 -4.176536	diff=0.0581481
  0.011069	  0.009683	diff=0.00138579
 -0.000206	 -0.000206	diff=3.26546e-08
  0.000003	  0.000003	diff=6.19414e-08
 -3.400973	 -3.425364	diff=0.0243911
  0.117965	  0.117349	diff=0.000616844
  2.110655	  2.092253	diff=0.018402
  0.033306	 -0.105561	diff=0.138866
  2.526315	  2.484258	diff=0.0420573
  0.558105	  0.603155	diff=0.0450493
 -0.038794	 -0.041769	diff=0.00297446
  0.051860	  0.051912	diff=5.17381e-05
  2.288798	  2.276290	diff=0.0125087
  0.489392	  0.515052	diff=0.0256604
 -1.390745	 -1.398212	diff=0.00746722
  0.137163	  0.071283	diff=0.0658802
 -3.998686	 -4.014997	diff=0.0163102
  3.396439	  3.397951	diff=0.0015123
-24.154489	-19.974274	diff=4.18022
  0.660664	  0.660403	diff=0.000260778
 -3.456798	 -3.460536	diff=0.00373811
  2.749645	  2.748854	diff=0.000790634
  0.189059	  0.189493	diff=0.000434124
 -3.198669	 -3.204259	diff=0.00559043
 -0.933185	 -0.934005	diff=0.000820063
  0.904909	  0.904944	diff=3.56773e-05
  8.286275	 12.220066	diff=3.93379
  0.010619	  0.010301	diff=0.000317796
 -0.846035	 -0.845879	diff=0.000155735
  0.395977	  0.395922	diff=5.50879e-05
  0.050121	  0.050146	diff=2.46288e-05
 -0.853698	 -0.854023	diff=0.000324517
  local_diff=8.58784
# W_src_char{3}, [8 4]
 -3.358059	 -2.517383	diff=0.840676
 -2.758678	 -2.387394	diff=0.371283
 -1.007372	 -1.005974	diff=0.0013978
 -0.064061	 -0.064013	diff=4.83267e-05
  1.102242	  1.698688	diff=0.596446
 -0.519695	 -0.518975	diff=0.000719226
 14.426863	 13.752078	diff=0.674785
  0.304140	  0.305143	diff=0.00100315
  2.512865	  3.316782	diff=0.803918
 -3.404696	 -3.094210	diff=0.310485
 -0.457305	 -0.456850	diff=0.000455214
 -0.110928	 -0.110856	diff=7.2557e-05
-14.198919	-14.097407	diff=0.101512
 -0.285965	 -0.285785	diff=0.000180039
  0.894583	  0.878602	diff=0.0159809
  0.290630	  0.290866	diff=0.000235827
 -0.220515	 -0.220941	diff=0.000425877
  5.747822	  5.746296	diff=0.00152603
  1.795475	  1.798681	diff=0.00320659
  0.179313	  0.178949	diff=0.000364109
 14.063338	 15.420999	diff=1.35766
  0.637677	  0.638629	diff=0.000951269
 12.454192	 12.456958	diff=0.00276582
 -0.375925	 -0.372992	diff=0.00293369
  0.030896	  0.030888	diff=8.05167e-06
 -0.820473	 -0.820688	diff=0.000214891
 -0.218138	 -0.218024	diff=0.000113883
 -0.025968	 -0.025973	diff=5.20743e-06
 -1.238154	 -1.218102	diff=0.020052
 -0.089511	 -0.089487	diff=2.39084e-05
 -1.755960	 -1.755244	diff=0.000716075
  0.077308	  0.077357	diff=4.91042e-05
  local_diff=5.11022
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=3.30591e-08
 -0.000002	 -0.000002	diff=2.40822e-08
 -0.005406	 -0.002855	diff=0.002551
  0.088460	  0.049025	diff=0.0394351
-59.363698	  6.595612	diff=65.9593
-59.294284	  4.658071	diff=63.9524
 -0.000000	 -0.000000	diff=1.19053e-12
  0.000000	  0.000000	diff=4.25016e-12
  local_diff=129.954
# W_tgt_char{1}, [8 4]
  0.000001	  0.000001	diff=7.21735e-09
  0.000004	  0.000004	diff=4.30206e-08
 -2.981455	 -3.093394	diff=0.111939
 -0.000001	 -0.000001	diff=6.29017e-09
 -0.000449	 -0.000454	diff=4.4422e-06
  0.000000	  0.000000	diff=5.23832e-13
  0.000079	  0.000085	diff=5.32533e-06
  0.000002	  0.000002	diff=1.34232e-08
 -0.000000	 -0.000000	diff=3.38111e-10
 -0.000001	 -0.000001	diff=3.84716e-09
  0.922302	  0.912905	diff=0.00939762
  0.000000	  0.000000	diff=5.43268e-10
  0.000134	  0.000134	diff=3.90185e-07
  0.000000	 -0.000000	diff=2.29115e-12
  0.000076	  0.000080	diff=4.80563e-06
  0.000002	  0.000002	diff=1.24304e-08
  0.000000	  0.000000	diff=2.95537e-12
  0.000000	 -0.000000	diff=1.62659e-12
  0.000000	  0.000000	diff=1.34425e-37
  0.000000	 -0.000000	diff=3.75551e-17
  0.000000	  0.000000	diff=3.4895e-35
  0.000000	  0.000000	diff=3.55165e-16
  0.000012	  0.000013	diff=1.2102e-07
  0.000000	  0.000000	diff=4.40623e-10
  0.000000	 -0.000000	diff=1.32321e-16
  0.000000	 -0.000000	diff=1.37714e-18
  0.000000	 -0.000000	diff=2.45231e-18
  0.000000	 -0.000000	diff=3.76059e-23
  0.000000	 -0.000000	diff=4.04812e-21
  0.000000	 -0.000000	diff=1.87977e-16
  0.000013	  0.000013	diff=1.25017e-07
  0.000000	  0.000000	diff=1.07415e-09
  local_diff=0.121352
# W_tgt_char{2}, [8 4]
  0.007183	  0.007184	diff=6.89145e-08
  0.003911	  0.003911	diff=1.25466e-08
  0.000600	  0.000600	diff=2.06234e-08
 -0.001462	 -0.001462	diff=7.65628e-09
  0.010218	  0.010219	diff=3.37997e-07
  0.003694	  0.003694	diff=1.97505e-08
 -0.257877	 -0.258041	diff=0.000164034
  0.098989	  0.098857	diff=0.000131946
  0.000000	  0.000000	diff=3.26089e-12
 -0.000000	 -0.000000	diff=2.17484e-12
  0.000000	 -0.000000	diff=4.60933e-13
  0.000000	  0.000000	diff=2.75774e-12
  0.000000	  0.000000	diff=2.64024e-13
 -0.000000	 -0.000000	diff=8.96477e-13
 -0.000000	 -0.000000	diff=2.48679e-12
  0.000000	  0.000000	diff=4.674e-12
  0.015081	  0.015070	diff=1.04189e-05
  0.056941	  0.056940	diff=1.37112e-06
 -0.001780	 -0.001780	diff=5.24007e-07
 -0.012194	 -0.012193	diff=1.40583e-07
  0.015754	  0.015748	diff=5.71763e-06
  0.040126	  0.040125	diff=2.76999e-07
  0.187250	  0.187410	diff=0.000160056
  0.126892	  0.127066	diff=0.000174189
  0.015074	  0.015067	diff=7.6731e-06
  0.051549	  0.051552	diff=2.34705e-06
 -0.001842	 -0.001842	diff=3.8495e-07
 -0.011091	 -0.011091	diff=3.19114e-07
  0.015534	  0.015530	diff=4.08925e-06
  0.036304	  0.036306	diff=1.76903e-06
  0.173491	  0.173537	diff=4.53065e-05
  0.137634	  0.137435	diff=0.000199318
  local_diff=0.000910349
# W_tgt_char{3}, [8 4]
 -0.179670	 -0.179726	diff=5.53995e-05
 -0.294960	 -0.295076	diff=0.000116408
  0.030271	  0.030273	diff=1.66403e-06
  0.090028	  0.090024	diff=4.56042e-06
 -0.124652	 -0.124677	diff=2.41966e-05
 -0.108119	 -0.108137	diff=1.75904e-05
  0.110262	  0.110119	diff=0.000143211
 -0.030135	 -0.030216	diff=8.03299e-05
 -0.143358	 -0.143395	diff=3.7058e-05
 -0.225102	 -0.225167	diff=6.46721e-05
  0.025632	  0.025632	diff=8.57455e-07
  0.064500	  0.064498	diff=2.11157e-06
 -0.097099	 -0.097114	diff=1.55321e-05
 -0.089489	 -0.089503	diff=1.43562e-05
  0.129424	  0.129270	diff=0.000154053
 -0.013938	 -0.014046	diff=0.000108165
 -0.135398	 -0.135409	diff=1.05502e-05
 -0.295819	 -0.295890	diff=7.09551e-05
  0.030956	  0.030956	diff=1.84593e-07
  0.057922	  0.057922	diff=3.18661e-07
 -0.093144	 -0.093147	diff=3.71205e-06
 -0.182036	 -0.182066	diff=3.09015e-05
  0.373221	  0.371534	diff=0.0016874
  0.353911	  0.353733	diff=0.000177947
 -0.174995	 -0.175043	diff=4.87359e-05
 -0.334319	 -0.334438	diff=0.000118791
  0.027237	  0.027239	diff=2.37291e-06
  0.110166	  0.110160	diff=6.00683e-06
 -0.131595	 -0.131619	diff=2.43324e-05
 -0.115735	 -0.115739	diff=4.47746e-06
  0.073723	  0.073491	diff=0.000232156
  0.047265	  0.047335	diff=7.00305e-05
  local_diff=0.00332904
# W_emb_tgt_char, [2 5]
 -0.000056	 -0.000053	diff=2.47913e-06
  0.000014	  0.000015	diff=2.44863e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.675889	 -0.681236	diff=0.00534622
-11.990257	-14.851588	diff=2.86133
  0.000000	  0.000000	diff=1.57362e-09
 -0.000000	 -0.000000	diff=1.97179e-10
 -0.000000	 -0.000000	diff=1.15329e-10
  0.000000	  0.000000	diff=2.63774e-12
  local_diff=2.86668
# W_a, [2 2]
 -0.968581	 -0.969476	diff=0.000894799
 -0.146301	 -0.144412	diff=0.00188888
  0.387926	  0.388350	diff=0.000423964
  0.190872	  0.190915	diff=4.3644e-05
  local_diff=0.00325128
# W_h, [2 4]
 -0.221210	 -0.196918	diff=0.024292
  8.760912	  8.750541	diff=0.010371
 -1.525277	 -1.546842	diff=0.0215645
 -6.775382	 -6.754659	diff=0.020723
 -0.385243	 -0.357224	diff=0.0280193
 -4.423082	 -4.424782	diff=0.00170032
-10.925142	-10.948920	diff=0.0237787
 24.229972	 23.877181	diff=0.352792
  local_diff=0.48324
# W_h_char, [2 4]
  0.000000	  0.000000	diff=1.41083e-10
 -0.000000	 -0.000000	diff=8.0395e-08
 -0.000000	 -0.000000	diff=2.44437e-10
 -0.000002	 -0.000002	diff=1.14068e-07
  0.000000	  0.000000	diff=4.31512e-11
  0.000008	  0.000008	diff=1.80304e-08
 -0.000000	 -0.000000	diff=1.07476e-11
 -0.000002	 -0.000002	diff=1.06625e-08
  local_diff=2.23595e-07
# W_soft, [5 2]
 -2.529825	 -2.537289	diff=0.00746409
  1.359032	  1.354764	diff=0.00426751
 -1.855381	 -1.856536	diff=0.00115493
  2.798987	  2.791911	diff=0.00707619
  0.252591	  0.247150	diff=0.00544052
  7.483556	  7.476370	diff=0.00718678
 -0.034587	 -0.035347	diff=0.000759362
 -5.710977	 -5.712300	diff=0.00132298
 -0.902240	 -0.904930	diff=0.00268975
 -0.818740	 -0.823793	diff=0.0050529
  local_diff=0.042415
# W_soft_char, [5 2]
  0.315273	  0.315188	diff=8.5035e-05
  0.312545	  0.312444	diff=0.000101647
  0.107124	  0.107045	diff=7.84479e-05
 -0.474190	 -0.474272	diff=8.20205e-05
 -0.260295	 -0.260405	diff=0.000109435
  0.139935	  0.139861	diff=7.37612e-05
  0.508721	  0.508532	diff=0.000189444
 -0.040127	 -0.040225	diff=9.82051e-05
 -0.366060	 -0.366175	diff=0.000115073
 -0.241799	 -0.241992	diff=0.000192792
  local_diff=0.00112586
# Num params=416, abs_diff=204.228
Elapsed time is 14.305484 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charWeight', 10)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0
# charWeight = 10
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  1.691222	  1.695144	diff=0.00392199
  0.209424	  0.209553	diff=0.000128067
  0.205316	  0.205382	diff=6.57828e-05
  0.034302	  0.034299	diff=3.04606e-06
  2.352525	  2.361671	diff=0.00914521
  0.248603	  0.249030	diff=0.000426759
 -7.737124	 -7.655537	diff=0.0815869
  2.879108	  2.890987	diff=0.0118791
 -0.465619	 -0.465671	diff=5.17141e-05
 -0.088408	 -0.088404	diff=4.26566e-06
 -0.013284	 -0.013287	diff=3.43987e-06
 -0.003775	 -0.003776	diff=7.21905e-08
 -0.496258	 -0.496467	diff=0.000209483
 -0.111332	 -0.111437	diff=0.000104893
  2.470000	  2.469286	diff=0.000713808
 -1.160782	 -1.160480	diff=0.00030161
 -1.077878	 -1.076515	diff=0.00136393
  0.044468	  0.044623	diff=0.000154734
 -0.283694	 -0.283652	diff=4.13021e-05
 -0.098490	 -0.098536	diff=4.5942e-05
 -2.094739	 -2.090747	diff=0.00399209
  0.083954	  0.084087	diff=0.000132375
  2.684662	  2.701820	diff=0.0171577
  0.073468	  0.073397	diff=7.06512e-05
  0.299001	  0.299846	diff=0.000845517
 -0.073802	 -0.073815	diff=1.28138e-05
  0.120544	  0.120533	diff=1.01174e-05
 -0.058718	 -0.058749	diff=3.07939e-05
  0.533683	  0.536545	diff=0.00286197
 -0.053645	 -0.053616	diff=2.95284e-05
 -1.656033	 -1.654372	diff=0.00166105
  0.167753	  0.167841	diff=8.81136e-05
  local_diff=0.137045
# W_src{2}, [8 4]
  0.257111	  0.259733	diff=0.0026219
  1.481418	  1.479094	diff=0.00232389
 -0.706587	 -0.705584	diff=0.00100346
  0.068150	  0.068230	diff=8.08844e-05
 -0.046741	 -0.041597	diff=0.00514329
  2.845182	  2.853668	diff=0.00848635
  7.692524	  7.739079	diff=0.0465545
 -1.829775	 -1.830439	diff=0.000664396
 -1.138580	 -1.138499	diff=8.12771e-05
  2.379916	  2.379832	diff=8.41096e-05
 -0.539172	 -0.538610	diff=0.000562005
  0.052149	  0.052196	diff=4.63239e-05
 -4.393125	 -4.391022	diff=0.00210306
  4.454534	  4.449803	diff=0.00473171
  8.420954	  8.465244	diff=0.0442904
  1.032684	  1.034031	diff=0.001347
  4.025762	  4.026543	diff=0.000780969
  1.717489	  1.726133	diff=0.00864465
 -1.130058	 -1.126926	diff=0.00313207
  0.914583	  0.916735	diff=0.00215226
 -3.598639	 -3.598277	diff=0.000361888
  3.069181	  3.068851	diff=0.00033032
  6.500166	  6.525945	diff=0.0257798
  0.249656	  0.248539	diff=0.00111685
 -3.185789	 -3.185472	diff=0.00031728
 -3.472522	 -3.470722	diff=0.00179988
  1.925169	  1.928376	diff=0.00320705
 -0.725611	 -0.724460	diff=0.00115034
  6.073702	  6.075112	diff=0.00141039
 -5.903254	 -5.905106	diff=0.00185232
-12.090714	-11.998217	diff=0.0924964
 -0.471679	 -0.472902	diff=0.0012226
  local_diff=0.26588
# W_tgt{1}, [8 6]
 -0.001843	 -0.001845	diff=2.39763e-06
-33.918955	-35.713496	diff=1.79454
 -0.426377	 -0.413694	diff=0.0126835
  0.060798	  0.060802	diff=3.87887e-06
  0.000000	  0.000000	diff=4.41865e-11
  1.905885	  1.874684	diff=0.0312016
 -0.000035	 -0.000035	diff=9.29823e-08
 -0.000010	 -0.000010	diff=1.16102e-08
 -0.008904	 -0.008960	diff=5.63245e-05
 16.974112	 15.711655	diff=1.26246
  0.383726	  0.395145	diff=0.0114189
  0.295155	  0.295253	diff=9.79389e-05
  0.000000	  0.000000	diff=2.14836e-10
  7.047215	  7.006502	diff=0.0407134
 -0.000174	 -0.000172	diff=2.19938e-06
 -0.000034	 -0.000035	diff=9.9634e-07
  0.006480	  0.006450	diff=2.93899e-05
-12.777461	-12.937844	diff=0.160384
 -0.042987	 -0.042818	diff=0.000168941
 -0.221373	 -0.221396	diff=2.3659e-05
 -0.000000	 -0.000000	diff=1.46623e-10
 -3.630546	 -3.609523	diff=0.0210234
  0.000122	  0.000124	diff=1.12347e-06
  0.000003	  0.000003	diff=4.48579e-08
  0.004008	  0.003997	diff=1.12714e-05
  7.278220	  7.262682	diff=0.0155378
  0.135026	  0.136208	diff=0.00118204
 -0.093939	 -0.093662	diff=0.000277543
 -0.000000	 -0.000000	diff=3.63485e-11
 -1.871873	 -1.833912	diff=0.0379606
  0.000076	  0.000077	diff=4.3222e-07
  0.000008	  0.000008	diff=1.49176e-07
  0.000000	  0.000000	diff=1.70733e-15
 12.317125	 12.184978	diff=0.132146
  0.153640	  0.154921	diff=0.00128067
  0.000000	  0.000000	diff=9.26174e-13
 -0.000000	 -0.000000	diff=3.75917e-12
  1.794382	  1.798169	diff=0.00378698
  0.000000	 -0.000000	diff=4.80408e-13
  0.000000	  0.000000	diff=2.44388e-12
 -0.000001	 -0.000001	diff=6.25565e-12
  0.104263	  0.096933	diff=0.00732969
  0.000202	  0.000202	diff=1.15522e-08
  0.000040	  0.000040	diff=1.72187e-11
 -0.000000	 -0.000000	diff=2.39006e-12
  0.000509	  0.000509	diff=2.67156e-08
 -0.000000	 -0.000000	diff=4.38926e-13
 -0.000000	 -0.000000	diff=8.20923e-14
  local_diff=3.53432
# W_tgt{2}, [8 4]
 -0.080297	 -0.080099	diff=0.00019849
 59.244005	 57.296666	diff=1.94734
  0.000296	  0.000295	diff=1.12542e-06
  1.917106	  1.913088	diff=0.0040177
  1.128468	  1.123202	diff=0.00526597
  0.929370	  0.932118	diff=0.00274822
 -0.005180	 -0.005141	diff=3.87622e-05
222.801155	219.299876	diff=3.50128
 -0.396600	 -0.396076	diff=0.000524204
 -1.102140	 -1.104242	diff=0.00210144
 -0.083576	 -0.083681	diff=0.000105139
 -0.113983	 -0.114081	diff=9.85046e-05
 -2.902057	 -2.882946	diff=0.0191112
  0.254133	  0.253732	diff=0.000400965
 -0.454092	 -0.450997	diff=0.003095
 -1.720599	 -1.723073	diff=0.00247391
 -1.707698	 -1.706589	diff=0.00110968
  1.282218	  1.289102	diff=0.00688413
  1.121672	  1.118685	diff=0.00298708
  0.566936	  0.554980	diff=0.0119559
 -4.241277	 -4.234588	diff=0.00668951
  0.204569	  0.203210	diff=0.00135968
 -1.980154	 -1.975688	diff=0.00446635
 16.081398	 16.026229	diff=0.0551692
 -1.547706	 -1.537835	diff=0.00987107
  1.100636	  1.089707	diff=0.010929
 -0.777063	 -0.772926	diff=0.00413638
 -0.816858	 -0.793856	diff=0.0230025
 -0.599083	 -0.597709	diff=0.00137358
  0.232735	  0.235232	diff=0.00249651
  0.745559	  0.738578	diff=0.00698096
 -8.416443	 -8.290402	diff=0.126041
  local_diff=5.76425
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=3.84463e-08
  0.000001	  0.000001	diff=5.07067e-08
  0.000000	  0.000000	diff=7.14339e-12
  0.000000	  0.000000	diff=4.88326e-12
  local_diff=8.9165e-08
# W_emb_tgt, [2 5]
 79.188581	 72.137594	diff=7.05099
 19.922071	 19.375430	diff=0.546641
 -0.000000	 -0.000000	diff=2.08519e-09
 -0.000000	 -0.000000	diff=3.90823e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.091925	  1.055172	diff=0.0367534
  0.388859	  0.354500	diff=0.0343588
 29.768751	 30.147683	diff=0.378932
  1.912399	  2.024859	diff=0.11246
  local_diff=8.16013
# W_src_char{1}, [8 4]
 -0.298977	 -0.154482	diff=0.144495
  0.005595	 -0.000000	diff=0.00559466
  0.000000	  0.000000	diff=4.37932e-11
 -0.215276	 -0.000000	diff=0.215276
  0.022008	  0.021242	diff=0.000765741
 -0.269681	  0.000249	diff=0.26993
  0.000071	  0.000071	diff=6.99462e-07
  0.000225	 -0.000000	diff=0.000225124
 -0.259055	 -0.227878	diff=0.0311772
 -0.340424	  0.000000	diff=0.340424
 -0.000000	 -0.000000	diff=1.81217e-09
 15.673101	 -0.000001	diff=15.6731
  0.611815	 -1.302183	diff=1.914
 20.581962	  0.000110	diff=20.5819
 -0.004367	 -0.004322	diff=4.50856e-05
 -0.013821	  0.000000	diff=0.0138214
  0.000004	  0.000004	diff=4.22816e-08
  0.000009	 -0.000000	diff=9.22939e-06
  0.000000	  0.000000	diff=4.44461e-12
 -0.000356	  0.000000	diff=0.000356174
  0.000035	  0.000035	diff=3.49389e-07
 -0.000449	  0.000000	diff=0.000448561
  0.000000	  0.000000	diff=1.16825e-09
  0.000000	 -0.000000	diff=3.69971e-07
 -0.000000	 -0.000000	diff=2.7136e-10
 -0.000000	 -0.000000	diff=5.98106e-08
  0.000000	 -0.000000	diff=4.48671e-14
  0.000002	 -0.000000	diff=2.30802e-06
 -0.000000	 -0.000000	diff=2.2634e-09
  0.000003	 -0.000000	diff=2.90668e-06
 -0.000000	 -0.000000	diff=7.91702e-12
 -0.000000	  0.000000	diff=2.38742e-09
  local_diff=39.1915
# W_src_char{2}, [8 4]
 -4.118376	 -4.176525	diff=0.0581484
  0.011061	  0.009676	diff=0.0013858
 -0.000206	 -0.000206	diff=3.26508e-08
  0.000003	  0.000003	diff=6.19501e-08
 -3.400969	 -3.425360	diff=0.0243912
  0.117962	  0.117345	diff=0.000616849
  2.110649	  2.092247	diff=0.0184021
  0.033388	 -0.105480	diff=0.138868
  2.526311	  2.484253	diff=0.0420577
  0.558091	  0.603140	diff=0.0450486
 -0.038794	 -0.041769	diff=0.00297448
  0.051861	  0.051912	diff=5.17384e-05
  2.288798	  2.276289	diff=0.0125088
  0.489381	  0.515041	diff=0.02566
 -1.390741	 -1.398209	diff=0.00746726
  0.137109	  0.071228	diff=0.0658808
 -3.998694	 -4.015005	diff=0.0163105
  3.396451	  3.397963	diff=0.00151223
-24.154786	-19.974631	diff=4.18016
  0.660668	  0.660407	diff=0.000260791
 -3.456803	 -3.460541	diff=0.00373826
  2.749660	  2.748869	diff=0.000790723
  0.189059	  0.189493	diff=0.000434124
 -3.198681	 -3.204272	diff=0.00559053
 -0.933184	 -0.934004	diff=0.000820092
  0.904912	  0.904948	diff=3.56721e-05
  8.286678	 12.220391	diff=3.93371
  0.010617	  0.010300	diff=0.000317805
 -0.846034	 -0.845879	diff=0.00015573
  0.395975	  0.395920	diff=5.51118e-05
  0.050121	  0.050146	diff=2.46288e-05
 -0.853702	 -0.854026	diff=0.000324524
  local_diff=8.5877
# W_src_char{3}, [8 4]
 -3.357969	 -2.517307	diff=0.840662
 -2.758747	 -2.387469	diff=0.371278
 -1.007380	 -1.005983	diff=0.00139776
 -0.064061	 -0.064013	diff=4.8327e-05
  1.102191	  1.698627	diff=0.596436
 -0.519699	 -0.518980	diff=0.000719226
 14.426811	 13.752023	diff=0.674789
  0.304141	  0.305144	diff=0.00100315
  2.512802	  3.316708	diff=0.803907
 -3.404654	 -3.094174	diff=0.31048
 -0.457305	 -0.456849	diff=0.000455209
 -0.110929	 -0.110856	diff=7.25575e-05
-14.198970	-14.097461	diff=0.101509
 -0.285967	 -0.285787	diff=0.00018004
  0.894566	  0.878585	diff=0.015981
  0.290633	  0.290868	diff=0.00023583
 -0.220517	 -0.220943	diff=0.000425881
  5.747857	  5.746330	diff=0.00152634
  1.795488	  1.798694	diff=0.00320647
  0.179314	  0.178950	diff=0.000364112
 14.063561	 15.421189	diff=1.35763
  0.637681	  0.638633	diff=0.000951272
 12.454235	 12.456999	diff=0.00276433
 -0.375926	 -0.372993	diff=0.00293366
  0.030896	  0.030888	diff=8.05176e-06
 -0.820479	 -0.820694	diff=0.000214899
 -0.218138	 -0.218024	diff=0.000113882
 -0.025968	 -0.025973	diff=5.20749e-06
 -1.238138	 -1.218087	diff=0.0200517
 -0.089511	 -0.089487	diff=2.39084e-05
 -1.755964	 -1.755248	diff=0.000716049
  0.077309	  0.077358	diff=4.91039e-05
  local_diff=5.11013
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=3.30628e-08
 -0.000002	 -0.000002	diff=2.40785e-08
 -0.005406	 -0.002855	diff=0.00255109
  0.088460	  0.049024	diff=0.0394366
-59.364254	  6.593244	diff=65.9575
-59.294330	  4.656398	diff=63.9507
  0.000000	 -0.000000	diff=6.87528e-12
  0.000000	  0.000000	diff=4.24983e-12
  local_diff=129.95
# W_tgt_char{1}, [8 4]
  0.000007	  0.000007	diff=7.21564e-08
  0.000044	  0.000043	diff=4.30183e-07
-29.814552	-30.933941	diff=1.11939
 -0.000006	 -0.000006	diff=6.29188e-08
 -0.004494	 -0.004538	diff=4.4422e-05
  0.000000	  0.000000	diff=4.46019e-13
  0.000795	  0.000848	diff=5.32533e-05
  0.000024	  0.000024	diff=1.34237e-07
 -0.000002	 -0.000002	diff=3.35837e-09
 -0.000013	 -0.000013	diff=3.8466e-08
  9.223025	  9.129048	diff=0.0939762
  0.000002	  0.000002	diff=5.43268e-09
  0.001343	  0.001339	diff=3.90184e-06
 -0.000000	 -0.000000	diff=1.74178e-13
  0.000757	  0.000805	diff=4.80563e-05
  0.000023	  0.000023	diff=1.24321e-07
  0.000000	  0.000000	diff=4.55236e-12
  0.000000	 -0.000000	diff=1.62659e-11
  0.000000	  0.000000	diff=1.34425e-36
  0.000000	 -0.000000	diff=3.75551e-16
  0.000000	  0.000000	diff=3.4895e-34
  0.000000	  0.000000	diff=3.55165e-15
  0.000124	  0.000126	diff=1.21021e-06
  0.000004	  0.000004	diff=4.43465e-09
  0.000000	 -0.000000	diff=1.32321e-15
  0.000000	 -0.000000	diff=1.37714e-17
  0.000000	 -0.000000	diff=2.45231e-17
  0.000000	 -0.000000	diff=3.76059e-22
  0.000000	 -0.000000	diff=4.04812e-20
  0.000000	 -0.000000	diff=1.87977e-15
  0.000130	  0.000131	diff=1.25017e-06
  0.000003	  0.000003	diff=1.07586e-08
  local_diff=1.21352
# W_tgt_char{2}, [8 4]
  0.071835	  0.071836	diff=6.89167e-07
  0.039112	  0.039112	diff=1.25455e-07
  0.005997	  0.005997	diff=2.06222e-07
 -0.014619	 -0.014619	diff=7.65741e-08
  0.102183	  0.102186	diff=3.37998e-06
  0.036943	  0.036943	diff=1.97534e-07
 -2.578767	 -2.580407	diff=0.00164034
  0.989894	  0.988574	diff=0.00131946
  0.000000	  0.000000	diff=1.55559e-11
 -0.000000	 -0.000000	diff=1.23576e-11
  0.000000	 -0.000000	diff=4.60933e-12
  0.000000	  0.000000	diff=8.44317e-13
  0.000000	  0.000000	diff=2.64024e-12
 -0.000000	 -0.000000	diff=2.40391e-12
 -0.000003	 -0.000003	diff=7.81485e-12
  0.000002	  0.000002	diff=1.26339e-11
  0.150805	  0.150701	diff=0.000104189
  0.569414	  0.569400	diff=1.37112e-05
 -0.017796	 -0.017801	diff=5.24007e-06
 -0.121936	 -0.121935	diff=1.40585e-06
  0.157537	  0.157480	diff=5.71763e-05
  0.401255	  0.401252	diff=2.76998e-06
  1.872504	  1.874105	diff=0.00160056
  1.268920	  1.270662	diff=0.00174189
  0.150745	  0.150668	diff=7.67309e-05
  0.515492	  0.515515	diff=2.34705e-05
 -0.018420	 -0.018424	diff=3.84949e-06
 -0.110915	 -0.110912	diff=3.19116e-06
  0.155337	  0.155296	diff=4.08925e-05
  0.363042	  0.363060	diff=1.76903e-05
  1.734913	  1.735366	diff=0.000453065
  1.376345	  1.374352	diff=0.00199318
  local_diff=0.00910349
# W_tgt_char{3}, [8 4]
 -1.796702	 -1.797256	diff=0.000553995
 -2.949600	 -2.950764	diff=0.00116408
  0.302714	  0.302730	diff=1.66403e-05
  0.900281	  0.900236	diff=4.56042e-05
 -1.246524	 -1.246766	diff=0.000241966
 -1.081194	 -1.081370	diff=0.000175904
  1.102622	  1.101190	diff=0.00143211
 -0.301353	 -0.302157	diff=0.000803298
 -1.433581	 -1.433952	diff=0.00037058
 -2.251019	 -2.251665	diff=0.000646721
  0.256316	  0.256325	diff=8.57455e-06
  0.645001	  0.644980	diff=2.11157e-05
 -0.970988	 -0.971144	diff=0.000155321
 -0.894887	 -0.895030	diff=0.000143562
  1.294243	  1.292703	diff=0.00154053
 -0.139378	 -0.140460	diff=0.00108165
 -1.353982	 -1.354087	diff=0.000105502
 -2.958195	 -2.958904	diff=0.000709551
  0.309559	  0.309561	diff=1.84595e-06
  0.579221	  0.579224	diff=3.18661e-06
 -0.931436	 -0.931473	diff=3.71205e-05
 -1.820356	 -1.820665	diff=0.000309015
  3.732212	  3.715338	diff=0.016874
  3.539114	  3.537334	diff=0.00177947
 -1.749946	 -1.750433	diff=0.000487359
 -3.343191	 -3.344379	diff=0.00118791
  0.272370	  0.272393	diff=2.37291e-05
  1.101664	  1.101604	diff=6.00683e-05
 -1.315951	 -1.316194	diff=0.000243324
 -1.157350	 -1.157395	diff=4.47745e-05
  0.737234	  0.734912	diff=0.00232156
  0.472646	  0.473346	diff=0.000700305
  local_diff=0.0332904
# W_emb_tgt_char, [2 5]
 -0.000557	 -0.000532	diff=2.47913e-05
  0.000144	  0.000146	diff=2.44865e-06
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -6.758894	 -6.812356	diff=0.0534622
-119.902571	-148.515877	diff=28.6133
  0.000000	  0.000000	diff=1.57476e-08
 -0.000000	 -0.000000	diff=1.98884e-09
 -0.000000	 -0.000000	diff=1.11919e-09
  0.000000	  0.000000	diff=1.50087e-11
  local_diff=28.6668
# W_a, [2 2]
 -0.968576	 -0.969471	diff=0.000894799
 -0.146305	 -0.144416	diff=0.00188888
  0.387925	  0.388349	diff=0.000423964
  0.190872	  0.190916	diff=4.36439e-05
  local_diff=0.00325128
# W_h, [2 4]
 -0.221207	 -0.196915	diff=0.024292
  8.760896	  8.750525	diff=0.0103711
 -1.525280	 -1.546845	diff=0.0215645
 -6.775365	 -6.754642	diff=0.0207229
 -0.385242	 -0.357222	diff=0.0280193
 -4.423092	 -4.424792	diff=0.00170034
-10.925139	-10.948917	diff=0.0237787
 24.229960	 23.877169	diff=0.352792
  local_diff=0.48324
# W_h_char, [2 4]
  0.000001	  0.000001	diff=1.4222e-09
 -0.000003	 -0.000004	diff=8.0395e-07
 -0.000001	 -0.000001	diff=2.47848e-09
 -0.000022	 -0.000023	diff=1.14066e-06
  0.000000	  0.000000	diff=4.25827e-10
  0.000080	  0.000080	diff=1.80321e-07
 -0.000000	 -0.000000	diff=1.07476e-10
 -0.000020	 -0.000020	diff=1.06608e-07
  local_diff=2.23597e-06
# W_soft, [5 2]
 -2.529825	 -2.537289	diff=0.00746409
  1.359032	  1.354764	diff=0.00426751
 -1.855381	 -1.856536	diff=0.00115493
  2.798987	  2.791911	diff=0.00707619
  0.252591	  0.247150	diff=0.00544052
  7.483556	  7.476370	diff=0.00718678
 -0.034587	 -0.035347	diff=0.000759362
 -5.710977	 -5.712300	diff=0.00132298
 -0.902240	 -0.904930	diff=0.00268975
 -0.818740	 -0.823793	diff=0.0050529
  local_diff=0.042415
# W_soft_char, [5 2]
  3.152727	  3.151877	diff=0.000850349
  3.125454	  3.124438	diff=0.00101647
  1.071236	  1.070451	diff=0.000784479
 -4.741899	 -4.742719	diff=0.000820205
 -2.602952	 -2.604046	diff=0.00109435
  1.399348	  1.398610	diff=0.000737612
  5.087210	  5.085315	diff=0.00189444
 -0.401270	 -0.402252	diff=0.000982051
 -3.660603	 -3.661754	diff=0.00115073
 -2.417991	 -2.419919	diff=0.00192792
  local_diff=0.0112586
# Num params=416, abs_diff=231.164
Elapsed time is 13.538248 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charSrcSample', 0.5)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0.5
# charTgtSample = 0
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
558.669537	  1.824759	diff=556.845
  0.219573	  0.219703	diff=0.000130043
558.681739	  0.205391	diff=558.476
558.712914	  0.034295	diff=558.679
558.616019	  2.488954	diff=556.127
  0.265279	  0.265707	diff=0.000428267
558.336287	 -8.574627	diff=566.911
  3.138976	  3.151675	diff=0.0126987
558.682704	 -0.476863	diff=559.16
 -0.089287	 -0.089283	diff=4.2805e-06
 -0.013283	 -0.013287	diff=3.43936e-06
558.697228	 -0.003775	diff=558.701
558.774536	 -0.507453	diff=559.282
558.650435	 -0.112879	diff=558.763
  2.549174	  2.548638	diff=0.000535557
558.307810	 -1.182967	diff=559.491
 -1.150278	 -1.148603	diff=0.00167529
558.515821	  0.057064	diff=558.459
558.795021	 -0.316051	diff=559.111
558.651459	 -0.133732	diff=558.785
559.507390	 -2.224345	diff=561.732
  0.090767	  0.090901	diff=0.000133919
558.419400	  3.111942	diff=555.307
  0.152826	  0.152801	diff=2.54449e-05
  0.394092	  0.395013	diff=0.000921622
 -0.058447	 -0.058468	diff=2.11606e-05
558.726317	  0.144502	diff=558.582
 -0.096317	 -0.096363	diff=4.52599e-05
  0.691689	  0.694801	diff=0.00311263
558.743657	 -0.058453	diff=558.802
558.305059	 -1.769851	diff=560.075
  0.250687	  0.250747	diff=5.97809e-05
  local_diff=10063.3
# W_src{2}, [8 4]
558.764991	  0.404067	diff=558.361
559.630480	  1.368031	diff=558.262
558.575032	 -0.726196	diff=559.301
  0.069217	  0.069299	diff=8.21683e-05
  0.071295	  0.077797	diff=0.00650256
560.223725	  2.621667	diff=557.602
559.316853	  7.785490	diff=551.531
 -2.110181	 -2.110630	diff=0.000448624
558.345047	 -1.196958	diff=559.542
  2.453848	  2.453770	diff=7.87805e-05
 -0.569038	 -0.568431	diff=0.000607526
  0.053528	  0.053575	diff=4.75397e-05
556.868680	 -4.563147	diff=561.432
560.693594	  4.532074	diff=556.162
  8.959449	  9.010362	diff=0.0509127
  1.106980	  1.108335	diff=0.00135531
  4.607402	  4.608824	diff=0.00142191
  1.701688	  1.710645	diff=0.00895697
559.067540	 -1.561414	diff=560.629
558.769420	  0.900216	diff=557.869
 -5.222970	 -5.224514	diff=0.00154346
559.984389	  2.997645	diff=556.987
  6.066922	  6.099754	diff=0.0328316
558.657941	  0.347713	diff=558.31
558.479595	 -2.714006	diff=561.194
557.215776	 -3.430367	diff=560.646
  1.677486	  1.680568	diff=0.00308194
 -0.679339	 -0.678242	diff=0.00109687
560.893017	  6.473146	diff=554.42
 -5.754655	 -5.756578	diff=0.00192231
-12.331464	-12.222583	diff=0.108881
 -0.394935	 -0.396110	diff=0.00117542
  local_diff=8372.47
# W_tgt{1}, [8 6]
 -0.001843	 -0.001845	diff=2.39755e-06
524.714226	-35.705781	diff=560.42
558.031458	 -0.413695	diff=558.445
  0.060800	  0.060804	diff=3.87953e-06
558.698836	  0.000000	diff=558.699
  1.905868	  1.874667	diff=0.0312013
558.698801	 -0.000035	diff=558.699
 -0.000010	 -0.000010	diff=1.1607e-08
558.689932	 -0.008960	diff=558.699
575.738622	 15.704286	diff=560.034
559.310310	  0.395146	diff=558.915
  0.295165	  0.295263	diff=9.79545e-05
558.698836	  0.000000	diff=558.699
565.746145	  7.006444	diff=558.74
558.698662	 -0.000171	diff=558.699
558.698803	 -0.000035	diff=558.699
  0.006480	  0.006450	diff=2.93891e-05
-12.774774	-12.935244	diff=0.16047
 -0.042987	 -0.042818	diff=0.000168942
558.477451	 -0.221405	diff=558.699
 -0.000000	 -0.000000	diff=1.46964e-10
555.068249	 -3.609519	diff=558.678
  0.000122	  0.000124	diff=1.12394e-06
  0.000003	  0.000003	diff=4.4858e-08
  0.004008	  0.003997	diff=1.12709e-05
  7.277322	  7.261767	diff=0.0155541
558.901049	  0.136209	diff=558.765
558.604889	 -0.093665	diff=558.699
558.698836	 -0.000000	diff=558.699
556.826932	 -1.833904	diff=558.661
  0.000076	  0.000077	diff=4.32472e-07
558.698845	  0.000008	diff=558.699
558.698836	  0.000000	diff=558.699
571.035523	 12.182747	diff=558.853
  0.153640	  0.154921	diff=0.00128067
  0.000000	  0.000000	diff=4.75817e-12
558.698836	 -0.000000	diff=558.699
  1.794382	  1.798169	diff=0.00378698
558.698836	 -0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
 -0.000001	 -0.000001	diff=1.94137e-12
558.803098	  0.096933	diff=558.706
  0.000202	  0.000202	diff=1.15552e-08
558.698876	  0.000040	diff=558.699
558.698836	 -0.000000	diff=558.699
558.699346	  0.000509	diff=558.699
558.698836	 -0.000000	diff=558.699
 -0.000000	 -0.000000	diff=8.24335e-14
  local_diff=15647
# W_tgt{2}, [8 4]
558.610984	 -0.097697	diff=558.709
617.859343	 56.690171	diff=561.169
  0.000304	  0.000303	diff=1.1558e-06
560.587255	  1.864076	diff=558.723
559.803184	  1.063578	diff=558.74
  0.934124	  0.936877	diff=0.00275362
 -0.009222	 -0.009171	diff=5.1165e-05
783.271311	214.378689	diff=568.893
 -0.396603	 -0.396079	diff=0.000524208
 -1.102153	 -1.104255	diff=0.00210144
558.615262	 -0.083681	diff=558.699
558.584776	 -0.114073	diff=558.699
 -2.902064	 -2.882953	diff=0.0191112
558.952968	  0.253731	diff=558.699
558.244738	 -0.450996	diff=558.696
556.975104	 -1.722708	diff=558.698
 -0.206793	 -0.210268	diff=0.00347529
560.114190	  1.220631	diff=558.894
559.743595	  0.466490	diff=559.277
  0.541346	  0.529364	diff=0.0119821
554.663143	 -1.694479	diff=556.358
558.887164	  0.206158	diff=558.681
 -1.939370	 -1.935095	diff=0.00427493
575.299825	 14.386185	diff=560.914
557.014553	 -1.828932	diff=558.843
  1.078535	  1.067546	diff=0.0109885
557.942362	 -0.689549	diff=558.632
557.857498	 -0.812717	diff=558.67
 -0.805450	 -0.804107	diff=0.00134317
558.940516	  0.244659	diff=558.696
559.350647	  0.738948	diff=558.612
549.583336	 -9.184895	diff=558.768
  local_diff=11746.1
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
558.698836	  0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
  0.000000	  0.000000	diff=0
558.698836	  0.000000	diff=558.699
558.698836	  0.000001	diff=558.699
  0.000001	  0.000001	diff=5.07067e-08
  0.000000	  0.000000	diff=0
558.698836	  0.000000	diff=558.699
  local_diff=3352.19
# W_emb_tgt, [2 5]
637.923946	 72.119989	diff=565.804
578.752958	 19.370754	diff=559.382
558.698836	 -0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
  0.000000	  0.000000	diff=0
558.698836	  0.000000	diff=558.699
559.790779	  1.055153	diff=558.736
  0.388890	  0.354531	diff=0.0343591
 29.768661	 30.147597	diff=0.378936
  1.912442	  2.024903	diff=0.112461
  local_diff=3360.54
# W_src_char{1}, [8 4]
558.533576	 -0.154475	diff=558.688
558.696024	 -0.000000	diff=558.696
  0.000000	  0.000000	diff=4.51279e-11
558.807866	 -0.000000	diff=558.808
558.491090	  0.021257	diff=558.47
 -0.269673	  0.000249	diff=0.269922
558.698145	  0.000071	diff=558.698
  0.000225	 -0.000000	diff=0.000225117
 -0.259008	 -0.227932	diff=0.0310759
558.871973	  0.000000	diff=558.872
558.698839	 -0.000000	diff=558.699
 15.672652	 -0.000001	diff=15.6727
  0.619476	 -1.302407	diff=1.92188
 20.581383	  0.000110	diff=20.5813
558.741514	 -0.004324	diff=558.746
558.705789	  0.000000	diff=558.706
  0.000004	  0.000004	diff=3.95936e-08
558.698832	 -0.000000	diff=558.699
  0.000000	  0.000000	diff=7.2843e-12
558.699015	  0.000000	diff=558.699
558.698492	  0.000035	diff=558.698
 -0.000449	  0.000000	diff=0.000448547
  0.000000	  0.000000	diff=1.08951e-09
558.698836	 -0.000000	diff=558.699
558.698837	 -0.000000	diff=558.699
 -0.000000	 -0.000000	diff=5.98049e-08
  0.000000	 -0.000000	diff=4.48832e-14
  0.000002	 -0.000000	diff=2.30796e-06
 -0.000000	 -0.000000	diff=2.12871e-09
  0.000003	 -0.000000	diff=2.90661e-06
558.698836	 -0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
  local_diff=8977.75
# W_src_char{2}, [8 4]
558.663003	 -4.176459	diff=562.839
  0.011052	  0.009667	diff=0.00138577
 -0.000206	 -0.000206	diff=3.26542e-08
  0.000003	  0.000003	diff=6.19395e-08
558.515254	 -3.425301	diff=561.941
  0.117956	  0.117339	diff=0.000616841
  2.110704	  2.092223	diff=0.0184808
562.396733	 -0.105374	diff=562.502
558.165957	  2.671301	diff=555.495
 -0.050664	 -0.001260	diff=0.0494041
 -0.038794	 -0.041769	diff=0.00297446
  0.051860	  0.051912	diff=5.17381e-05
558.735045	  2.323357	diff=556.412
560.100572	  0.058226	diff=560.042
 -1.392508	 -1.399989	diff=0.00748082
556.363463	  0.071139	diff=556.292
 -4.049043	 -4.065522	diff=0.0164789
559.758411	  3.398052	diff=556.36
560.018417	-25.162307	diff=585.181
558.833727	  0.695819	diff=558.138
558.337411	 -3.479481	diff=561.817
559.370050	  2.839432	diff=556.531
  0.189055	  0.189489	diff=0.000434116
 -3.198655	 -3.204246	diff=0.00559042
 -0.884130	 -0.885108	diff=0.000978562
  0.904792	  0.904828	diff=3.6079e-05
 13.122670	 17.232035	diff=4.10937
 -0.023719	 -0.023915	diff=0.000196035
 -0.827723	 -0.827499	diff=0.000223335
  0.307097	  0.308407	diff=0.00130968
  0.050120	  0.050145	diff=2.46282e-05
558.433233	 -0.854019	diff=559.287
  local_diff=7297.05
# W_src_char{3}, [8 4]
 -0.932390	 -0.057774	diff=0.874616
 -4.490800	 -4.104528	diff=0.386272
 -1.112644	 -1.111315	diff=0.00132879
 -0.056388	 -0.056322	diff=6.59581e-05
 -1.084800	 -0.458081	diff=0.626719
 -0.520889	 -0.520166	diff=0.000723207
 14.269039	 13.595128	diff=0.67391
558.589281	  0.407228	diff=558.182
  0.107073	  0.940578	diff=0.833506
 -1.879054	 -1.556232	diff=0.322822
558.530891	 -0.419465	diff=558.95
558.653457	 -0.113585	diff=558.767
-13.477933	-13.373120	diff=0.104813
 -0.285004	 -0.284820	diff=0.000183201
  0.949498	  0.933568	diff=0.0159298
  0.261985	  0.262465	diff=0.000480399
 -0.220275	 -0.220700	diff=0.000425054
  6.049490	  6.047783	diff=0.00170617
  1.956287	  1.959334	diff=0.0030476
  0.167544	  0.167221	diff=0.00032294
 17.375627	 18.812599	diff=1.43697
  0.638134	  0.639087	diff=0.00095282
561.038510	 12.697251	diff=548.341
558.959636	 -0.548277	diff=559.508
558.712632	  0.030914	diff=558.682
558.234777	 -0.788706	diff=559.023
 -0.201084	 -0.200972	diff=0.000112082
 -0.027213	 -0.027218	diff=4.74484e-06
 -0.879074	 -0.858152	diff=0.0209216
 -0.089463	 -0.089439	diff=2.3926e-05
558.259783	 -1.729710	diff=559.989
558.779046	  0.058757	diff=558.72
  local_diff=5025.47
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
558.695683	 -0.000108	diff=558.696
558.696166	 -0.000092	diff=558.696
558.696192	 -0.002855	diff=558.699
  0.088457	  0.049022	diff=0.0394352
528.895803	  6.595612	diff=522.3
-59.293582	  4.658071	diff=63.9517
 -0.000000	 -0.000000	diff=4.47027e-12
558.698836	  0.000000	diff=558.699
  local_diff=2821.08
# W_tgt_char{1}, [8 4]
558.698837	  0.000001	diff=558.699
558.698841	  0.000004	diff=558.699
 -2.981455	 -3.093394	diff=0.111939
558.698836	 -0.000001	diff=558.699
 -0.000449	 -0.000454	diff=4.4422e-06
  0.000000	  0.000000	diff=4.71824e-13
558.698938	  0.000087	diff=558.699
  0.000003	  0.000003	diff=3.81008e-09
558.698836	 -0.000000	diff=558.699
 -0.000001	 -0.000001	diff=3.8447e-09
  0.922302	  0.912905	diff=0.00939762
558.698836	  0.000000	diff=558.699
  0.000134	  0.000134	diff=3.90185e-07
  0.000000	 -0.000000	diff=2.30644e-12
  0.000078	  0.000083	diff=4.93698e-06
  0.000002	  0.000002	diff=3.78935e-09
558.698836	  0.000000	diff=558.699
558.698836	 -0.000000	diff=558.699
  0.000000	  0.000000	diff=1.8428e-37
558.698836	 -0.000000	diff=558.699
  0.000000	  0.000000	diff=3.71597e-35
558.698836	  0.000000	diff=558.699
  0.000013	  0.000013	diff=1.24231e-07
558.698837	  0.000000	diff=558.699
558.698836	 -0.000000	diff=558.699
  0.000000	 -0.000000	diff=1.40646e-18
  0.000000	 -0.000000	diff=2.75765e-18
  0.000000	 -0.000000	diff=3.77375e-23
  0.000000	 -0.000000	diff=4.08515e-21
  0.000000	 -0.000000	diff=1.8479e-16
  0.000013	  0.000013	diff=1.25998e-07
558.698837	  0.000000	diff=558.699
  local_diff=7263.21
# W_tgt_char{2}, [8 4]
  0.007183	  0.007184	diff=6.89148e-08
558.702748	  0.003911	diff=558.699
558.699436	  0.000600	diff=558.699
 -0.001462	 -0.001462	diff=7.65882e-09
558.709055	  0.010219	diff=558.699
558.702531	  0.003694	diff=558.699
558.440960	 -0.258041	diff=558.699
  0.098989	  0.098857	diff=0.000131946
  0.000000	  0.000000	diff=1.32274e-12
558.698836	 -0.000000	diff=558.699
  0.000000	 -0.000000	diff=4.60933e-13
  0.000000	  0.000000	diff=8.44316e-14
  0.000000	  0.000000	diff=9.63747e-13
 -0.000000	 -0.000000	diff=8.50399e-14
 -0.000000	 -0.000000	diff=6.87936e-13
558.698837	  0.000000	diff=558.699
558.713918	  0.015070	diff=558.699
  0.056941	  0.056940	diff=1.37112e-06
558.697057	 -0.001780	diff=558.699
558.686643	 -0.012193	diff=558.699
558.714591	  0.015748	diff=558.699
558.738962	  0.040125	diff=558.699
558.886090	  0.187410	diff=558.699
558.825732	  0.127066	diff=558.699
558.713912	  0.015067	diff=558.699
  0.051549	  0.051552	diff=2.34705e-06
558.696994	 -0.001842	diff=558.699
 -0.011091	 -0.011091	diff=3.19114e-07
  0.015534	  0.015530	diff=4.08925e-06
558.735141	  0.036306	diff=558.699
558.872331	  0.173537	diff=558.699
  0.137634	  0.137435	diff=0.000199318
  local_diff=10056.6
# W_tgt_char{3}, [8 4]
 -0.179670	 -0.179726	diff=5.53995e-05
 -0.294960	 -0.295076	diff=0.000116408
  0.030271	  0.030273	diff=1.66404e-06
  0.090028	  0.090024	diff=4.56042e-06
558.574183	 -0.124677	diff=558.699
558.590717	 -0.108137	diff=558.699
  0.110262	  0.110119	diff=0.000143211
 -0.030135	 -0.030216	diff=8.03299e-05
 -0.143358	 -0.143395	diff=3.7058e-05
 -0.225102	 -0.225167	diff=6.46721e-05
558.724468	  0.025632	diff=558.699
558.763336	  0.064498	diff=558.699
 -0.097099	 -0.097114	diff=1.55321e-05
558.609348	 -0.089503	diff=558.699
558.828260	  0.129270	diff=558.699
558.684901	 -0.014046	diff=558.699
558.563437	 -0.135409	diff=558.699
558.403017	 -0.295890	diff=558.699
558.729793	  0.030956	diff=558.699
  0.057922	  0.057922	diff=3.18661e-07
558.605692	 -0.093147	diff=558.699
 -0.182036	 -0.182066	diff=3.09015e-05
559.072066	  0.371534	diff=558.701
559.052747	  0.353733	diff=558.699
558.523841	 -0.175043	diff=558.699
558.364517	 -0.334438	diff=558.699
  0.027237	  0.027239	diff=2.37291e-06
558.809003	  0.110160	diff=558.699
 -0.131595	 -0.131619	diff=2.43324e-05
558.583101	 -0.115739	diff=558.699
558.772564	  0.073491	diff=558.699
558.746101	  0.047335	diff=558.699
  local_diff=10615.3
# W_emb_tgt_char, [2 5]
 -0.000057	 -0.000055	diff=2.53653e-06
  0.000015	  0.000015	diff=2.42569e-07
  0.000000	  0.000000	diff=0
558.698836	  0.000000	diff=558.699
558.022951	 -0.681236	diff=558.704
-11.990255	-14.851586	diff=2.86133
  0.000000	  0.000000	diff=1.57362e-09
 -0.000000	 -0.000000	diff=2.00021e-10
558.698836	 -0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
  local_diff=2237.66
# W_a, [2 2]
 -0.326665	 -0.327676	diff=0.00101165
558.567864	 -0.024613	diff=558.592
559.124573	  0.261490	diff=558.863
  0.201460	  0.201465	diff=4.69714e-06
  local_diff=1117.46
# W_h, [2 4]
558.798349	  0.632758	diff=558.166
  7.356639	  7.344937	diff=0.0117021
 -2.061175	 -2.083236	diff=0.022061
 -6.444626	 -6.426185	diff=0.0184407
558.160256	 -0.893380	diff=559.054
 -3.165657	 -3.167946	diff=0.00228911
547.688435	-10.861125	diff=558.55
582.926215	 24.363641	diff=558.563
  local_diff=2234.39
# W_h_char, [2 4]
558.698836	  0.000000	diff=558.699
 -0.000001	 -0.000001	diff=7.68888e-08
 -0.000000	 -0.000000	diff=1.85954e-10
558.698837	 -0.000002	diff=558.699
  0.000000	  0.000000	diff=5.49753e-11
  0.000008	  0.000008	diff=1.93647e-08
558.698836	 -0.000000	diff=558.699
 -0.000002	 -0.000002	diff=1.17201e-08
  local_diff=1676.1
# W_soft, [5 2]
 -1.302495	 -1.311166	diff=0.0086712
  1.164259	  1.160222	diff=0.00403739
556.639407	 -3.140869	diff=559.78
561.229165	  2.803166	diff=558.426
559.210859	  0.488647	diff=558.722
  6.698508	  6.690519	diff=0.0079895
  0.169480	  0.168814	diff=0.000665552
 -5.869449	 -5.870855	diff=0.00140591
 -0.357621	 -0.360705	diff=0.00308467
558.068927	 -0.627773	diff=558.697
  local_diff=2235.65
# W_soft_char, [5 2]
559.014111	  0.315188	diff=558.699
  0.312545	  0.312444	diff=0.000101647
558.805960	  0.107045	diff=558.699
558.224643	 -0.474272	diff=558.699
 -0.260295	 -0.260405	diff=0.000109435
  0.139935	  0.139861	diff=7.37612e-05
  0.508721	  0.508532	diff=0.000189444
 -0.040127	 -0.040225	diff=9.82051e-05
558.332774	 -0.366175	diff=558.699
558.457037	 -0.241992	diff=558.699
  local_diff=2793.5
# Num params=416, abs_diff=116893
Elapsed time is 14.867841 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charTgtSample', 0.5)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0
# charTgtSample = 0.5
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
  1.691208	  1.695130	diff=0.00392211
  0.209425	  0.209554	diff=0.000128068
  0.205314	  0.205380	diff=6.57855e-05
  0.034301	  0.034298	diff=3.04586e-06
  2.352504	  2.361649	diff=0.00914548
  0.248604	  0.249031	diff=0.000426762
 -7.737061	 -7.655472	diff=0.081589
  2.879099	  2.890978	diff=0.0118794
 -0.465618	 -0.465670	diff=5.17105e-05
 -0.088409	 -0.088404	diff=4.26589e-06
 -0.013284	 -0.013288	diff=3.43982e-06
 -0.003775	 -0.003775	diff=7.21847e-08
 -0.496258	 -0.496467	diff=0.000209477
 -0.111333	 -0.111437	diff=0.000104893
  2.469988	  2.469275	diff=0.000713735
 -1.160779	 -1.160477	diff=0.000301616
 -1.077871	 -1.076507	diff=0.00136397
  0.044465	  0.044620	diff=0.000154734
 -0.283691	 -0.283650	diff=4.13068e-05
 -0.098489	 -0.098535	diff=4.59407e-05
 -2.094724	 -2.090731	diff=0.00399227
  0.083952	  0.084084	diff=0.000132376
  2.684639	  2.701797	diff=0.0171581
  0.073468	  0.073397	diff=7.06492e-05
  0.298998	  0.299844	diff=0.00084555
 -0.073800	 -0.073813	diff=1.28124e-05
  0.120543	  0.120533	diff=1.01159e-05
 -0.058718	 -0.058748	diff=3.07933e-05
  0.533679	  0.536541	diff=0.0028621
 -0.053644	 -0.053614	diff=2.95287e-05
 -1.656022	 -1.654360	diff=0.00166111
  0.167749	  0.167837	diff=8.81168e-05
  local_diff=0.137048
# W_src{2}, [8 4]
  0.257111	  0.259733	diff=0.00262192
  1.481424	  1.479100	diff=0.00232385
 -0.706583	 -0.705580	diff=0.00100347
  0.068150	  0.068230	diff=8.08844e-05
 -0.046748	 -0.041605	diff=0.00514335
  2.845183	  2.853669	diff=0.00848637
  7.692487	  7.739043	diff=0.046556
 -1.829763	 -1.830427	diff=0.000664387
 -1.138577	 -1.138496	diff=8.12783e-05
  2.379913	  2.379829	diff=8.40779e-05
 -0.539169	 -0.538607	diff=0.00056201
  0.052149	  0.052196	diff=4.63239e-05
 -4.393115	 -4.391012	diff=0.00210315
  4.454525	  4.449793	diff=0.0047317
  8.420919	  8.465211	diff=0.0442917
  1.032680	  1.034027	diff=0.00134701
  4.025723	  4.026504	diff=0.000781476
  1.717489	  1.726134	diff=0.00864501
 -1.130048	 -1.126916	diff=0.00313209
  0.914578	  0.916730	diff=0.00215225
 -3.598611	 -3.598249	diff=0.000362124
  3.069176	  3.068846	diff=0.000330293
  6.500144	  6.525925	diff=0.0257808
  0.249654	  0.248537	diff=0.00111684
 -3.185763	 -3.185446	diff=0.000317472
 -3.472520	 -3.470720	diff=0.00180012
  1.925159	  1.928366	diff=0.00320708
 -0.725608	 -0.724457	diff=0.00115034
  6.073682	  6.075093	diff=0.00141064
 -5.903245	 -5.905097	diff=0.00185227
-12.090676	-11.998177	diff=0.0924997
 -0.471679	 -0.472901	diff=0.0012226
  local_diff=0.265889
# W_tgt{1}, [8 6]
 -0.001843	 -0.001845	diff=2.39763e-06
-33.918955	-35.713496	diff=1.79454
 -0.426378	 -0.413694	diff=0.0126835
  0.060801	  0.060805	diff=3.87816e-06
  0.000000	  0.000000	diff=3.78557e-11
  1.905885	  1.874683	diff=0.0312016
 -0.000035	 -0.000035	diff=9.29832e-08
 -0.000010	 -0.000010	diff=1.16043e-08
 -0.008904	 -0.008960	diff=5.63245e-05
 16.974113	 15.711655	diff=1.26246
  0.383726	  0.395145	diff=0.0114189
  0.295172	  0.295270	diff=9.79222e-05
  0.000000	  0.000000	diff=2.20822e-10
  7.047220	  7.006507	diff=0.0407128
 -0.000174	 -0.000172	diff=2.19939e-06
 -0.000034	 -0.000035	diff=9.96335e-07
  0.006480	  0.006450	diff=2.93899e-05
-12.777461	-12.937844	diff=0.160384
 -0.042987	 -0.042818	diff=0.000168941
 -0.221385	 -0.221409	diff=2.36679e-05
 -0.000000	 -0.000000	diff=1.50044e-10
 -3.630565	 -3.609541	diff=0.0210236
  0.000122	  0.000124	diff=1.12347e-06
  0.000003	  0.000003	diff=4.48551e-08
  0.004008	  0.003997	diff=1.12714e-05
  7.278220	  7.262682	diff=0.0155378
  0.135026	  0.136208	diff=0.00118204
 -0.093947	 -0.093669	diff=0.00027754
 -0.000000	 -0.000000	diff=3.77508e-11
 -1.871883	 -1.833922	diff=0.0379606
  0.000076	  0.000077	diff=4.32234e-07
  0.000008	  0.000008	diff=1.49176e-07
  0.000000	  0.000000	diff=1.70733e-15
 12.317125	 12.184978	diff=0.132146
  0.153640	  0.154921	diff=0.00128067
  0.000000	  0.000000	diff=9.26174e-13
 -0.000000	 -0.000000	diff=3.75887e-12
  1.794382	  1.798169	diff=0.00378698
  0.000000	 -0.000000	diff=4.80408e-13
  0.000000	  0.000000	diff=3.98287e-13
 -0.000001	 -0.000001	diff=5.71008e-13
  0.104263	  0.096933	diff=0.00732969
  0.000202	  0.000202	diff=1.1558e-08
  0.000040	  0.000040	diff=1.9239e-11
 -0.000000	 -0.000000	diff=2.38975e-12
  0.000509	  0.000509	diff=2.67299e-08
 -0.000000	 -0.000000	diff=4.38931e-13
 -0.000000	 -0.000000	diff=8.39947e-14
  local_diff=3.53432
# W_tgt{2}, [8 4]
 -0.080297	 -0.080099	diff=0.00019849
 59.244012	 57.296673	diff=1.94734
  0.000296	  0.000295	diff=1.12542e-06
  1.917106	  1.913088	diff=0.0040177
  1.128471	  1.123205	diff=0.00526598
  0.929370	  0.932118	diff=0.00274822
 -0.005181	 -0.005142	diff=3.877e-05
222.801168	219.299889	diff=3.50128
 -0.396604	 -0.396080	diff=0.000524207
 -1.102140	 -1.104242	diff=0.00210144
 -0.083575	 -0.083681	diff=0.000105139
 -0.113983	 -0.114081	diff=9.85046e-05
 -2.902071	 -2.882960	diff=0.0191112
  0.254133	  0.253732	diff=0.000400964
 -0.454097	 -0.451002	diff=0.00309501
 -1.720599	 -1.723073	diff=0.00247391
 -1.707712	 -1.706602	diff=0.00110972
  1.282216	  1.289100	diff=0.00688414
  1.121675	  1.118688	diff=0.00298707
  0.566936	  0.554980	diff=0.0119559
 -4.241298	 -4.234609	diff=0.00668953
  0.204569	  0.203209	diff=0.00135968
 -1.980148	 -1.975682	diff=0.0044664
 16.081408	 16.026239	diff=0.0551684
 -1.547715	 -1.537844	diff=0.00987107
  1.100635	  1.089706	diff=0.010929
 -0.777061	 -0.772924	diff=0.00413638
 -0.816858	 -0.793855	diff=0.0230025
 -0.599107	 -0.597734	diff=0.00137357
  0.232735	  0.235232	diff=0.00249651
  0.745546	  0.738565	diff=0.00698096
 -8.416435	 -8.290394	diff=0.126041
  local_diff=5.76425
# W_emb_src, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  0.000001	  0.000001	diff=3.84406e-08
  0.000001	  0.000001	diff=5.07067e-08
  0.000000	  0.000000	diff=1.46015e-12
  0.000000	  0.000000	diff=7.99821e-13
  local_diff=8.91495e-08
# W_emb_tgt, [2 5]
 79.188581	 72.137594	diff=7.05099
 19.922071	 19.375430	diff=0.546641
 -0.000000	 -0.000000	diff=2.07753e-09
 -0.000000	 -0.000000	diff=3.85121e-11
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
  1.091943	  1.055186	diff=0.0367565
  0.388891	  0.354530	diff=0.0343609
 29.768716	 30.147649	diff=0.378932
  1.912417	  2.024877	diff=0.11246
  local_diff=8.16014
# W_src_char{1}, [8 4]
 -0.298975	 -0.154485	diff=0.144491
  0.005595	 -0.000000	diff=0.00559474
  0.000000	  0.000000	diff=4.22857e-11
 -0.215279	 -0.000000	diff=0.215279
  0.022013	  0.021250	diff=0.000762927
 -0.269685	  0.000249	diff=0.269934
  0.000071	  0.000071	diff=6.90119e-07
  0.000225	 -0.000000	diff=0.000225127
 -0.259090	 -0.227936	diff=0.0311545
 -0.340428	  0.000000	diff=0.340428
 -0.000000	 -0.000000	diff=1.78796e-09
 15.673276	 -0.000001	diff=15.6733
  0.611501	 -1.302650	diff=1.91415
 20.582178	  0.000110	diff=20.5821
 -0.004368	 -0.004324	diff=4.45198e-05
 -0.013822	  0.000000	diff=0.0138216
  0.000004	  0.000004	diff=4.17138e-08
  0.000009	 -0.000000	diff=9.22951e-06
  0.000000	  0.000000	diff=4.44213e-12
 -0.000356	  0.000000	diff=0.000356179
  0.000035	  0.000035	diff=3.4476e-07
 -0.000449	  0.000000	diff=0.000448567
  0.000000	  0.000000	diff=1.14351e-09
  0.000000	 -0.000000	diff=3.69968e-07
 -0.000000	 -0.000000	diff=2.61456e-10
 -0.000000	 -0.000000	diff=5.98106e-08
 -0.000000	 -0.000000	diff=2.79729e-12
  0.000002	 -0.000000	diff=2.30804e-06
 -0.000000	 -0.000000	diff=2.24979e-09
  0.000003	 -0.000000	diff=2.90672e-06
 -0.000000	 -0.000000	diff=7.64625e-12
 -0.000000	  0.000000	diff=2.39027e-09
  local_diff=39.1921
# W_src_char{2}, [8 4]
 -4.118388	 -4.176536	diff=0.0581481
  0.011069	  0.009683	diff=0.00138579
 -0.000206	 -0.000206	diff=3.26575e-08
  0.000003	  0.000003	diff=6.19357e-08
 -3.400973	 -3.425364	diff=0.0243911
  0.117965	  0.117349	diff=0.000616844
  2.110655	  2.092253	diff=0.018402
  0.033306	 -0.105561	diff=0.138866
  2.526315	  2.484258	diff=0.0420573
  0.558105	  0.603155	diff=0.0450493
 -0.038794	 -0.041769	diff=0.00297446
  0.051860	  0.051912	diff=5.17381e-05
  2.288798	  2.276290	diff=0.0125087
  0.489392	  0.515052	diff=0.0256604
 -1.390745	 -1.398212	diff=0.00746722
  0.137163	  0.071283	diff=0.0658802
 -3.998686	 -4.014997	diff=0.0163102
  3.396439	  3.397951	diff=0.0015123
-24.154489	-19.974274	diff=4.18022
  0.660664	  0.660403	diff=0.000260778
 -3.456798	 -3.460536	diff=0.00373811
  2.749645	  2.748854	diff=0.000790634
  0.189059	  0.189493	diff=0.000434124
 -3.198669	 -3.204259	diff=0.00559043
 -0.933185	 -0.934005	diff=0.000820063
  0.904909	  0.904944	diff=3.56773e-05
  8.286275	 12.220066	diff=3.93379
  0.010619	  0.010301	diff=0.000317796
 -0.846035	 -0.845879	diff=0.000155735
  0.395977	  0.395922	diff=5.50879e-05
  0.050121	  0.050146	diff=2.46288e-05
 -0.853698	 -0.854023	diff=0.000324517
  local_diff=8.58784
# W_src_char{3}, [8 4]
 -3.358059	 -2.517383	diff=0.840676
 -2.758678	 -2.387394	diff=0.371283
 -1.007372	 -1.005974	diff=0.0013978
 -0.064061	 -0.064013	diff=4.83267e-05
  1.102242	  1.698688	diff=0.596446
 -0.519695	 -0.518975	diff=0.000719226
 14.426863	 13.752078	diff=0.674785
  0.304140	  0.305143	diff=0.00100315
  2.512865	  3.316782	diff=0.803918
 -3.404696	 -3.094210	diff=0.310485
 -0.457305	 -0.456850	diff=0.000455214
 -0.110928	 -0.110856	diff=7.2557e-05
-14.198919	-14.097407	diff=0.101512
 -0.285965	 -0.285785	diff=0.000180039
  0.894583	  0.878602	diff=0.0159809
  0.290630	  0.290866	diff=0.000235827
 -0.220515	 -0.220941	diff=0.000425877
  5.747822	  5.746296	diff=0.00152603
  1.795475	  1.798681	diff=0.00320659
  0.179313	  0.178949	diff=0.000364109
 14.063338	 15.420999	diff=1.35766
  0.637677	  0.638629	diff=0.000951269
 12.454192	 12.456958	diff=0.00276582
 -0.375925	 -0.372992	diff=0.00293369
  0.030896	  0.030888	diff=8.05167e-06
 -0.820473	 -0.820688	diff=0.000214891
 -0.218138	 -0.218024	diff=0.000113883
 -0.025968	 -0.025973	diff=5.20743e-06
 -1.238154	 -1.218102	diff=0.020052
 -0.089511	 -0.089487	diff=2.39084e-05
 -1.755960	 -1.755244	diff=0.000716075
  0.077308	  0.077357	diff=4.91042e-05
  local_diff=5.11022
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.000002	 -0.000002	diff=3.30591e-08
 -0.000002	 -0.000002	diff=2.4085e-08
 -0.005406	 -0.002855	diff=0.002551
  0.088460	  0.049025	diff=0.0394351
-59.363698	  6.595612	diff=65.9593
-59.294284	  4.658071	diff=63.9524
 -0.000000	 -0.000000	diff=4.49381e-12
  0.000000	  0.000000	diff=1.40799e-12
  local_diff=129.954
# W_tgt_char{1}, [8 4]
  0.000001	  0.000001	diff=7.21451e-09
  0.000004	  0.000004	diff=4.30178e-08
 -2.981455	 -3.093394	diff=0.111939
 -0.000001	 -0.000001	diff=6.29302e-09
 -0.000449	 -0.000454	diff=4.4422e-06
  0.000000	  0.000000	diff=2.33103e-12
  0.000079	  0.000085	diff=5.32533e-06
  0.000002	  0.000002	diff=1.3426e-08
 -0.000000	 -0.000000	diff=3.32426e-10
 -0.000001	 -0.000001	diff=3.84432e-09
  0.922302	  0.912905	diff=0.00939762
  0.000000	  0.000000	diff=5.43268e-10
  0.000134	  0.000134	diff=3.90182e-07
 -0.000000	 -0.000000	diff=3.40523e-12
  0.000076	  0.000080	diff=4.80563e-06
  0.000002	  0.000002	diff=1.24333e-08
  0.000000	  0.000000	diff=1.13198e-13
 -0.000000	 -0.000000	diff=1.21558e-12
  0.000000	  0.000000	diff=1.34425e-37
  0.000000	 -0.000000	diff=3.75551e-17
  0.000000	  0.000000	diff=2.21848e-35
  0.000000	  0.000000	diff=3.0002e-16
  0.000012	  0.000013	diff=1.21023e-07
  0.000000	  0.000000	diff=4.43465e-10
  0.000000	 -0.000000	diff=1.32321e-16
  0.000000	 -0.000000	diff=1.37714e-18
  0.000000	 -0.000000	diff=2.45231e-18
  0.000000	 -0.000000	diff=3.76059e-23
  0.000000	 -0.000000	diff=4.04812e-21
  0.000000	 -0.000000	diff=1.81674e-16
  0.000013	  0.000013	diff=1.25017e-07
  0.000000	  0.000000	diff=1.07699e-09
  local_diff=0.121352
# W_tgt_char{2}, [8 4]
  0.007183	  0.007184	diff=6.89173e-08
  0.003911	  0.003911	diff=1.25438e-08
  0.000600	  0.000600	diff=2.06205e-08
 -0.001462	 -0.001462	diff=7.65912e-09
  0.010218	  0.010219	diff=3.38e-07
  0.003694	  0.003694	diff=1.97534e-08
 -0.257877	 -0.258041	diff=0.000164034
  0.098989	  0.098857	diff=0.000131946
  0.000000	  0.000000	diff=4.1872e-13
 -0.000000	 -0.000000	diff=6.67328e-13
  0.000000	 -0.000000	diff=4.60933e-13
  0.000000	  0.000000	diff=8.44317e-14
  0.000000	  0.000000	diff=3.10619e-12
 -0.000000	 -0.000000	diff=1.94569e-12
 -0.000000	 -0.000000	diff=3.55165e-13
  0.000000	  0.000000	diff=1.01012e-12
  0.015081	  0.015070	diff=1.04189e-05
  0.056941	  0.056940	diff=1.37112e-06
 -0.001780	 -0.001780	diff=5.24004e-07
 -0.012194	 -0.012193	diff=1.40589e-07
  0.015754	  0.015748	diff=5.71762e-06
  0.040126	  0.040125	diff=2.76996e-07
  0.187250	  0.187410	diff=0.000160056
  0.126892	  0.127066	diff=0.000174189
  0.015074	  0.015067	diff=7.67309e-06
  0.051549	  0.051552	diff=2.34705e-06
 -0.001842	 -0.001842	diff=3.84947e-07
 -0.011091	 -0.011091	diff=3.19117e-07
  0.015534	  0.015530	diff=4.08925e-06
  0.036304	  0.036306	diff=1.76903e-06
  0.173491	  0.173537	diff=4.53065e-05
  0.137634	  0.137435	diff=0.000199318
  local_diff=0.000910349
# W_tgt_char{3}, [8 4]
 -0.179670	 -0.179726	diff=5.53995e-05
 -0.294960	 -0.295076	diff=0.000116408
  0.030271	  0.030273	diff=1.66404e-06
  0.090028	  0.090024	diff=4.56042e-06
 -0.124652	 -0.124677	diff=2.41966e-05
 -0.108119	 -0.108137	diff=1.75904e-05
  0.110262	  0.110119	diff=0.000143211
 -0.030135	 -0.030216	diff=8.03299e-05
 -0.143358	 -0.143395	diff=3.7058e-05
 -0.225102	 -0.225167	diff=6.46721e-05
  0.025632	  0.025632	diff=8.57458e-07
  0.064500	  0.064498	diff=2.11156e-06
 -0.097099	 -0.097114	diff=1.55321e-05
 -0.089489	 -0.089503	diff=1.43562e-05
  0.129424	  0.129270	diff=0.000154053
 -0.013938	 -0.014046	diff=0.000108165
 -0.135398	 -0.135409	diff=1.05502e-05
 -0.295819	 -0.295890	diff=7.09551e-05
  0.030956	  0.030956	diff=1.84596e-07
  0.057922	  0.057922	diff=3.18663e-07
 -0.093144	 -0.093147	diff=3.71204e-06
 -0.182036	 -0.182066	diff=3.09015e-05
  0.373221	  0.371534	diff=0.0016874
  0.353911	  0.353733	diff=0.000177947
 -0.174995	 -0.175043	diff=4.87359e-05
 -0.334319	 -0.334438	diff=0.000118791
  0.027237	  0.027239	diff=2.37291e-06
  0.110166	  0.110160	diff=6.00683e-06
 -0.131595	 -0.131619	diff=2.43324e-05
 -0.115735	 -0.115739	diff=4.47745e-06
  0.073723	  0.073491	diff=0.000232156
  0.047265	  0.047335	diff=7.00305e-05
  local_diff=0.00332904
# W_emb_tgt_char, [2 5]
 -0.000056	 -0.000053	diff=2.47913e-06
  0.000014	  0.000015	diff=2.44866e-07
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
 -0.675889	 -0.681236	diff=0.00534622
-11.990257	-14.851588	diff=2.86133
  0.000000	  0.000000	diff=1.57646e-09
 -0.000000	 -0.000000	diff=2.00021e-10
 -0.000000	 -0.000000	diff=1.09645e-10
  0.000000	  0.000000	diff=2.04434e-13
  local_diff=2.86668
# W_a, [2 2]
 -0.968581	 -0.969476	diff=0.000894799
 -0.146301	 -0.144412	diff=0.00188888
  0.387926	  0.388350	diff=0.000423964
  0.190872	  0.190915	diff=4.3644e-05
  local_diff=0.00325128
# W_h, [2 4]
 -0.221210	 -0.196918	diff=0.024292
  8.760912	  8.750541	diff=0.010371
 -1.525277	 -1.546842	diff=0.0215645
 -6.775382	 -6.754659	diff=0.020723
 -0.385243	 -0.357224	diff=0.0280193
 -4.423082	 -4.424782	diff=0.00170032
-10.925142	-10.948920	diff=0.0237787
 24.229972	 23.877181	diff=0.352792
  local_diff=0.48324
# W_h_char, [2 4]
  0.000000	  0.000000	diff=1.43925e-10
 -0.000000	 -0.000000	diff=8.0395e-08
 -0.000000	 -0.000000	diff=2.50121e-10
 -0.000002	 -0.000002	diff=1.14062e-07
  0.000000	  0.000000	diff=4.0309e-11
  0.000008	  0.000008	diff=1.80333e-08
 -0.000000	 -0.000000	diff=1.359e-11
 -0.000002	 -0.000002	diff=1.06597e-08
  local_diff=2.23598e-07
# W_soft, [5 2]
 -2.529825	 -2.537289	diff=0.00746409
  1.359032	  1.354764	diff=0.00426751
 -1.855381	 -1.856536	diff=0.00115493
  2.798987	  2.791911	diff=0.00707619
  0.252591	  0.247150	diff=0.00544052
  7.483556	  7.476370	diff=0.00718678
 -0.034587	 -0.035347	diff=0.000759362
 -5.710977	 -5.712300	diff=0.00132298
 -0.902240	 -0.904930	diff=0.00268975
 -0.818740	 -0.823793	diff=0.0050529
  local_diff=0.042415
# W_soft_char, [5 2]
  0.315273	  0.315188	diff=8.50349e-05
  0.312545	  0.312444	diff=0.000101647
  0.107124	  0.107045	diff=7.84479e-05
 -0.474190	 -0.474272	diff=8.20205e-05
 -0.260295	 -0.260405	diff=0.000109435
  0.139935	  0.139861	diff=7.37612e-05
  0.508721	  0.508532	diff=0.000189444
 -0.040127	 -0.040225	diff=9.82051e-05
 -0.366060	 -0.366175	diff=0.000115073
 -0.241799	 -0.241992	diff=0.000192792
  local_diff=0.00112586
# Num params=416, abs_diff=204.228
Elapsed time is 14.106283 seconds.
[?1l>
## trainLSTM('', '', '', '', '', '', '', '../output/gradcheck', 'assert', 1, 'isGradCheck', 1, 'isResume', 0, 'feedInput', 1, 'numLayers', 2, 'dropout', 1, 'isReverse', 1, 'initRange', 10, 'attnFunc', 1, 'attnOpt', 2, 'charOpt', 3, 'srcCharShortList', 5, 'tgtCharShortList', 5, 'charNumLayers', 3, 'charFeedOpt', 1, 'charSrcSample', 0.5, 'charTgtSample', 0.5)
[?1h=
                                                                   < M A T L A B (R) >
                                                         Copyright 1984-2013 The MathWorks, Inc.
                                                            R2013a (8.1.0.604) 64-bit (maci64)
                                                                    February 15, 2013

 
To get started, type one of these: helpwin, helpdesk, or demo.
For product information, visit www.mathworks.com.
 

  Student License -- for use in conjunction with courses offered at a
  degree-granting institution.  Professional and commercial use prohibited.

Change stack size from 100 to 1
## Bilingual setting
  tgtCharEos=2
  srcCharVocab: <c_s> </c_s> x y z
  tgtCharVocab: <c_s> </c_s> a b c
# Init LSTM parameters using dataType=double, initRange=10
  Model size = 416, individual sizes:  W_src{1}=32 W_src{2}=32 W_tgt{1}=48 W_tgt{2}=32 W_emb_src=10 W_emb_tgt=10 W_src_char{1}=32 W_src_char{2}=32 W_src_char{3}=32 W_emb_src_char=10 W_tgt_char{1}=32 W_tgt_char{2}=32 W_tgt_char{3}=32 W_emb_tgt_char=10 W_a=4 W_h=8 W_h_char=8 W_soft=10 W_soft_char=10
# assert = 1
# attnFunc = 1
# attnOpt = 2
# batchSize = 10
# charFeedOpt = 1
# charMaxLen = 20
# charNumLayers = 3
# charOpt = 3
# charSrcSample = 0.5
# charTgtSample = 0.5
# charWeight = 1
# dataType = double
# debug = 0
# decode = 1
# dropout = 1
# epochFraction = 1
# epochIter = 0
# feedInput = 1
# finetuneEpoch = 5
# finetuneRate = 0.5
# gpuDevice = 0
# initRange = 10
# isBi = 1
# isClip = 1
# isGradCheck = 1
# isProfile = 0
# isResume = 0
# isReverse = 1
# learningRate = 1
# loadModel = 
# logFreq = 10
# lstmOpt = 0
# lstmSize = 2
# maxGradNorm = 5
# maxLenRatio = 1.5
# maxSentLen = 7
# minLenRatio = 0.5
# normLocalAttn = 0
# numEpoches = 10
# numLayers = 2
# onlyCPU = 0
# outDir = ../output/gradcheck
# posWin = 1
# saveHDF = 0
# seed = 0
# shuffle = 1
# sortBatch = 1
# srcCharPrefix = 
# srcCharShortList = 5
# srcLang = 
# srcVocabFile = 
# testPrefix = 
# tgtCharPrefix = 
# tgtCharShortList = 5
# tgtLang = 
# tgtVocabFile = 
# trainPrefix = 
# validPrefix = 
# chunkSize = 12800
# baseIndex = 0
# clipForward = 50
# clipBackward = 1000
# nonlinear_gate_f = sigmoid
# nonlinear_gate_f_prime = sigmoidPrime
# nonlinear_f = tanh
# nonlinear_f_prime = tanhPrime
# beamSize = 12
# stackSize = 1
# unkPenalty = 0
# forceDecoder = 0
# unkDiscount = 0
# isGPU = 0
# gpu = 0
# batchId = 1
# logId = 3
# charSrcRep = 1
# charTgtGen = 1
# srcCharVocabFile = .char.vocab
# srcCharMapFile = .char.map
# tgtCharVocabFile = .char.vocab
# tgtCharMapFile = .char.map
# srcSos = 2
# srcUnk = 1
# srcVocabSize = 9
# tgtUnk = 1
# tgtSos = 2
# tgtEos = 3
# srcCharSos = 1
# tgtCharSos = 1
# srcCharEos = 2
# tgtCharEos = 2
# srcCharVocabSize = 5
# tgtCharVocabSize = 5
# tgtVocabSize = 9
# modelFile = ../output/gradcheck/model.mat
# modelRecentFile = ../output/gradcheck/modelRecent.mat
# softmaxSize = 2
# lr = 1
# epoch = 1
# bestCostValid = 100000
# epochBatchCount = 0
# finetuneCount = 0
# startIter = 0
# iter = 0
# trainNumSents = 0
# trainNumSrcUnkTokens = 0
# trainNumSrcUnkTypes = 0
# trainNumTgtUnkTokens = 0
# modelSize = 416
  src input 1: <s> xy xyz x
  src mask: 0  1  1  1
  tgt input 1: <s> ab ab </s> </s>
  tgt output 1: ab ab </s> </s> </s>
  tgt mask: 1  1  1  0  0
# W_src{1}, [8 4]
558.669537	  1.824759	diff=556.845
558.887268	  0.219703	diff=558.668
558.681739	  0.205391	diff=558.476
  0.034298	  0.034295	diff=3.04475e-06
558.616019	  2.488954	diff=556.127
558.856400	  0.265707	diff=558.591
 -8.663195	 -8.574627	diff=0.0885687
  3.138976	  3.151675	diff=0.0126987
 -0.476812	 -0.476863	diff=5.06361e-05
 -0.089287	 -0.089283	diff=4.2805e-06
 -0.013283	 -0.013287	diff=3.43937e-06
558.697228	 -0.003775	diff=558.701
558.774536	 -0.507453	diff=559.282
558.650435	 -0.112879	diff=558.763
  2.549174	  2.548638	diff=0.000535557
558.307810	 -1.182967	diff=559.491
 -1.150278	 -1.148603	diff=0.00167529
  0.056849	  0.057064	diff=0.000215435
558.795021	 -0.316051	diff=559.111
558.651459	 -0.133732	diff=558.785
559.507390	 -2.224345	diff=561.732
  0.090767	  0.090901	diff=0.000133919
  3.090231	  3.111942	diff=0.0217112
559.001059	  0.152801	diff=558.848
  0.394092	  0.395013	diff=0.000921622
 -0.058447	 -0.058468	diff=2.11606e-05
  0.144500	  0.144502	diff=2.677e-06
558.645511	 -0.096363	diff=558.742
  0.691689	  0.694801	diff=0.00311263
558.743657	 -0.058453	diff=558.802
558.305059	 -1.769851	diff=560.075
558.751131	  0.250747	diff=558.5
  local_diff=9499.67
# W_src{2}, [8 4]
  0.401190	  0.404067	diff=0.00287657
  1.370286	  1.368031	diff=0.00225542
 -0.727239	 -0.726196	diff=0.00104367
558.735235	  0.069299	diff=558.666
557.628307	  0.077797	diff=557.551
  2.613127	  2.621667	diff=0.00853992
559.316853	  7.785490	diff=551.531
558.328798	 -2.110630	diff=560.439
 -1.197040	 -1.196958	diff=8.21708e-05
559.685214	  2.453770	diff=557.231
558.596986	 -0.568431	diff=559.165
  0.053528	  0.053575	diff=4.75397e-05
 -4.565349	 -4.563147	diff=0.00220169
  4.536810	  4.532074	diff=0.00473536
560.093837	  9.010362	diff=551.083
  1.106980	  1.108335	diff=0.00135531
  4.607402	  4.608824	diff=0.00142191
  1.701688	  1.710645	diff=0.00895697
 -1.564983	 -1.561414	diff=0.00356875
  0.898072	  0.900216	diff=0.00214413
 -5.222970	 -5.224514	diff=0.00154346
559.984389	  2.997645	diff=556.987
  6.066922	  6.099754	diff=0.0328316
  0.348978	  0.347713	diff=0.00126463
 -2.714456	 -2.714006	diff=0.000450685
 -3.432397	 -3.430367	diff=0.00202979
  1.677486	  1.680568	diff=0.00308194
 -0.679339	 -0.678242	diff=0.00109687
560.893017	  6.473146	diff=554.42
 -5.754655	 -5.756578	diff=0.00192231
-12.331464	-12.222583	diff=0.108881
558.515980	 -0.396110	diff=558.912
  local_diff=5566.18
# W_tgt{1}, [8 6]
 -0.001843	 -0.001845	diff=2.39755e-06
-33.910373	-35.705781	diff=1.79541
558.031458	 -0.413695	diff=558.445
558.759638	  0.060804	diff=558.699
  0.000000	  0.000000	diff=4.28652e-11
560.604746	  1.874667	diff=558.73
558.698801	 -0.000035	diff=558.699
558.698827	 -0.000010	diff=558.699
558.689932	 -0.008960	diff=558.699
575.738622	 15.704286	diff=560.034
559.310310	  0.395146	diff=558.915
558.994009	  0.295263	diff=558.699
558.698836	  0.000000	diff=558.699
565.746145	  7.006444	diff=558.74
558.698662	 -0.000171	diff=558.699
 -0.000034	 -0.000035	diff=9.96345e-07
  0.006480	  0.006450	diff=2.93891e-05
545.924264	-12.935244	diff=558.86
558.699911	 -0.042818	diff=558.743
 -0.221381	 -0.221405	diff=2.36532e-05
558.698836	 -0.000000	diff=558.699
555.068249	 -3.609519	diff=558.678
  0.000122	  0.000124	diff=1.12394e-06
558.698840	  0.000003	diff=558.699
  0.004008	  0.003997	diff=1.12709e-05
565.995650	  7.261767	diff=558.734
  0.135027	  0.136209	diff=0.00118204
558.604889	 -0.093665	diff=558.699
558.698836	 -0.000000	diff=558.699
 -1.871865	 -1.833904	diff=0.0379608
  0.000076	  0.000077	diff=4.32466e-07
  0.000008	  0.000008	diff=1.49181e-07
558.698836	  0.000000	diff=558.699
571.035523	 12.182747	diff=558.853
  0.153640	  0.154921	diff=0.00128067
  0.000000	  0.000000	diff=4.75817e-12
558.698836	 -0.000000	diff=558.699
  1.794382	  1.798169	diff=0.00378698
  0.000000	 -0.000000	diff=4.80407e-13
  0.000000	  0.000000	diff=3.24046e-12
558.698835	 -0.000001	diff=558.699
  0.104263	  0.096933	diff=0.00732969
558.699038	  0.000202	diff=558.699
  0.000040	  0.000040	diff=2.48519e-11
558.698836	 -0.000000	diff=558.699
558.699346	  0.000509	diff=558.699
558.698836	 -0.000000	diff=558.699
 -0.000000	 -0.000000	diff=5.76678e-12
  local_diff=15647.2
# W_tgt{2}, [8 4]
558.610984	 -0.097697	diff=558.709
 58.641296	 56.690171	diff=1.95113
558.699138	  0.000303	diff=558.699
560.587255	  1.864076	diff=558.723
  1.068629	  1.063578	diff=0.00505056
  0.934124	  0.936877	diff=0.00275362
558.690042	 -0.009171	diff=558.699
783.271311	214.378689	diff=568.893
 -0.396603	 -0.396079	diff=0.000524208
557.596515	 -1.104255	diff=558.701
 -0.083576	 -0.083681	diff=0.000105139
558.584776	 -0.114073	diff=558.699
 -2.902064	 -2.882953	diff=0.0191112
  0.254132	  0.253731	diff=0.000400964
558.244738	 -0.450996	diff=558.696
 -1.720232	 -1.722708	diff=0.00247616
 -0.206793	 -0.210268	diff=0.00347529
  1.213746	  1.220631	diff=0.00688525
  0.468183	  0.466490	diff=0.0016927
559.267583	  0.529364	diff=558.738
 -1.699365	 -1.694479	diff=0.00488556
  0.207531	  0.206158	diff=0.00137248
557.513464	 -1.935095	diff=559.449
 14.448870	 14.386185	diff=0.0626849
557.014553	 -1.828932	diff=558.843
  1.078535	  1.067546	diff=0.0109885
557.942362	 -0.689549	diff=558.632
 -0.835705	 -0.812717	diff=0.0229883
558.010428	 -0.804107	diff=558.815
558.940516	  0.244659	diff=558.696
  0.745930	  0.738948	diff=0.00698237
549.583336	 -9.184895	diff=558.768
  local_diff=8393.86
# W_emb_src, [2 5]
558.698836	  0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
  0.000000	  0.000000	diff=0
558.698836	  0.000000	diff=558.699
  0.000000	  0.000000	diff=0
  0.000000	  0.000000	diff=0
558.698836	  0.000001	diff=558.699
558.698836	  0.000001	diff=558.699
  0.000000	  0.000000	diff=2.84217e-12
558.698836	  0.000000	diff=558.699
  local_diff=3352.19
# W_emb_tgt, [2 5]
637.923946	 72.119989	diff=565.804
 19.917729	 19.370754	diff=0.546975
558.698836	 -0.000000	diff=558.699
  0.000000	  0.000000	diff=1.28352e-10
  0.000000	  0.000000	diff=2.84217e-12
558.698836	  0.000000	diff=558.699
  1.091907	  1.055153	diff=0.0367542
559.087728	  0.354531	diff=558.733
588.467764	 30.147597	diff=558.32
560.611219	  2.024903	diff=558.586
  local_diff=3359.43
# W_src_char{1}, [8 4]
558.533576	 -0.154475	diff=558.688
  0.005594	 -0.000000	diff=0.00559448
  0.000000	  0.000000	diff=4.797e-11
 -0.215269	 -0.000000	diff=0.215269
558.491090	  0.021257	diff=558.47
 -0.269673	  0.000249	diff=0.269922
558.698145	  0.000071	diff=558.698
558.698723	 -0.000000	diff=558.699
 -0.259008	 -0.227932	diff=0.0310759
 -0.340413	  0.000000	diff=0.340413
558.698839	 -0.000000	diff=558.699
 15.672652	 -0.000001	diff=15.6727
  0.619476	 -1.302407	diff=1.92188
 20.581383	  0.000110	diff=20.5813
558.741514	 -0.004324	diff=558.746
558.705789	  0.000000	diff=558.706
  0.000004	  0.000004	diff=3.95993e-08
558.698832	 -0.000000	diff=558.699
  0.000000	  0.000000	diff=1.01265e-11
 -0.000356	  0.000000	diff=0.000356163
  0.000035	  0.000035	diff=3.27312e-07
 -0.000449	  0.000000	diff=0.000448547
  0.000000	  0.000000	diff=1.09235e-09
558.698836	 -0.000000	diff=558.699
 -0.000000	 -0.000000	diff=2.44403e-10
558.698836	 -0.000000	diff=558.699
558.698836	 -0.000000	diff=558.699
558.698835	 -0.000000	diff=558.699
 -0.000000	 -0.000000	diff=2.12587e-09
  0.000003	 -0.000000	diff=2.90661e-06
 -0.000000	 -0.000000	diff=4.80408e-12
 -0.000000	  0.000000	diff=2.38742e-09
  local_diff=6743.24
# W_src_char{2}, [8 4]
558.663003	 -4.176459	diff=562.839
  0.011052	  0.009667	diff=0.00138577
558.698832	 -0.000206	diff=558.699
  0.000003	  0.000003	diff=6.19423e-08
 -3.400910	 -3.425301	diff=0.0243907
558.553674	  0.117339	diff=558.436
558.759227	  2.092223	diff=556.667
562.396733	 -0.105374	diff=562.502
558.165957	  2.671301	diff=555.495
560.551093	 -0.001260	diff=560.552
 -0.038794	 -0.041769	diff=0.00297446
558.721522	  0.051912	diff=558.67
558.735045	  2.323357	diff=556.412
  0.029681	  0.058226	diff=0.0285452
558.679374	 -1.399989	diff=560.079
  0.137019	  0.071139	diff=0.0658792
558.299192	 -4.065522	diff=562.365
  3.396539	  3.398052	diff=0.00151271
-29.514886	-25.162307	diff=4.35258
  0.695948	  0.695819	diff=0.000129485
 -3.475816	 -3.479481	diff=0.00366503
559.370050	  2.839432	diff=556.531
558.721227	  0.189489	diff=558.532
557.715347	 -3.204246	diff=560.92
 -0.884130	 -0.885108	diff=0.000978562
  0.904792	  0.904828	diff=3.6079e-05
 13.122670	 17.232035	diff=4.10937
 -0.023719	 -0.023915	diff=0.000196035
558.577279	 -0.827499	diff=559.405
  0.307097	  0.308407	diff=0.00130968
  0.050120	  0.050145	diff=2.46282e-05
 -0.853695	 -0.854019	diff=0.000324516
  local_diff=8396.7
# W_src_char{3}, [8 4]
 -0.932390	 -0.057774	diff=0.874616
 -4.490800	 -4.104528	diff=0.386272
 -1.112644	 -1.111315	diff=0.00132879
 -0.056388	 -0.056322	diff=6.59581e-05
564.637280	 -0.458081	diff=565.095
558.445191	 -0.520166	diff=558.965
 14.269039	 13.595128	diff=0.67391
  0.405575	  0.407228	diff=0.00165348
  0.107073	  0.940578	diff=0.833506
 -1.879054	 -1.556232	diff=0.322822
558.530891	 -0.419465	diff=558.95
 -0.113660	 -0.113585	diff=7.47815e-05
551.851414	-13.373120	diff=565.225
 -0.285004	 -0.284820	diff=0.000183201
557.930289	  0.933568	diff=556.997
  0.261985	  0.262465	diff=0.000480399
558.597158	 -0.220700	diff=558.818
560.738108	  6.047783	diff=554.69
558.785726	  1.959334	diff=556.826
  0.167544	  0.167221	diff=0.00032294
 17.375627	 18.812599	diff=1.43697
559.006170	  0.639087	diff=558.367
561.038510	 12.697251	diff=548.341
558.959636	 -0.548277	diff=559.508
558.712632	  0.030914	diff=558.682
 -0.788489	 -0.788706	diff=0.000216955
558.609025	 -0.200972	diff=558.81
 -0.027213	 -0.027218	diff=4.74485e-06
 -0.879074	 -0.858152	diff=0.0209216
558.655496	 -0.089439	diff=558.745
558.259783	 -1.729710	diff=559.989
558.779046	  0.058757	diff=558.72
  local_diff=8941.28
# W_emb_src_char, [2 5]
  0.000000	  0.000000	diff=2.84217e-12
  0.000000	  0.000000	diff=0
 -0.003371	 -0.000108	diff=0.00326297
 -0.002854	 -0.000092	diff=0.00276284
 -0.005406	 -0.002855	diff=0.00255101
558.740025	  0.049022	diff=558.691
528.895803	  6.595612	diff=522.3
-59.293582	  4.658071	diff=63.9517
558.698836	 -0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
  local_diff=2262.35
# W_tgt_char{1}, [8 4]
  0.000001	  0.000001	diff=7.21468e-09
558.698841	  0.000004	diff=558.699
 -2.981455	 -3.093394	diff=0.111939
558.698836	 -0.000001	diff=558.699
 -0.000449	 -0.000454	diff=4.4422e-06
558.698836	  0.000000	diff=558.699
558.698938	  0.000087	diff=558.699
  0.000003	  0.000003	diff=3.81008e-09
 -0.000000	 -0.000000	diff=3.38059e-10
558.698835	 -0.000001	diff=558.699
  0.922302	  0.912905	diff=0.00939762
558.698836	  0.000000	diff=558.699
  0.000134	  0.000134	diff=3.90187e-07
558.698836	 -0.000000	diff=558.699
  0.000078	  0.000083	diff=4.93698e-06
558.698840	  0.000002	diff=558.699
558.698836	  0.000000	diff=558.699
  0.000000	 -0.000000	diff=1.62659e-12
  0.000000	  0.000000	diff=2.84217e-12
558.698836	 -0.000000	diff=558.699
  0.000000	  0.000000	diff=2.57206e-34
  0.000000	 -0.000000	diff=1.1745e-15
  0.000013	  0.000013	diff=1.24231e-07
  0.000000	  0.000000	diff=3.48196e-10
558.698836	 -0.000000	diff=558.699
  0.000000	 -0.000000	diff=2.84217e-12
558.698836	 -0.000000	diff=558.699
  0.000000	 -0.000000	diff=3.77375e-23
558.698836	 -0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
  0.000013	  0.000013	diff=1.25993e-07
558.698837	  0.000000	diff=558.699
  local_diff=8380.6
# W_tgt_char{2}, [8 4]
558.706020	  0.007184	diff=558.699
558.702748	  0.003911	diff=558.699
  0.000600	  0.000600	diff=2.0628e-08
558.697374	 -0.001462	diff=558.699
558.709055	  0.010219	diff=558.699
558.702531	  0.003694	diff=558.699
 -0.257877	 -0.258041	diff=0.000164034
  0.098989	  0.098857	diff=0.000131946
558.698836	  0.000000	diff=558.699
558.698836	 -0.000000	diff=558.699
  0.000000	 -0.000000	diff=3.3031e-12
  0.000000	  0.000000	diff=5.59991e-12
558.698836	  0.000000	diff=558.699
558.698836	 -0.000000	diff=558.699
558.698836	 -0.000000	diff=558.699
558.698837	  0.000000	diff=558.699
  0.015081	  0.015070	diff=1.04189e-05
  0.056941	  0.056940	diff=1.37112e-06
558.697057	 -0.001780	diff=558.699
558.686643	 -0.012193	diff=558.699
558.714591	  0.015748	diff=558.699
  0.040126	  0.040125	diff=2.77001e-07
  0.187250	  0.187410	diff=0.000160056
  0.126892	  0.127066	diff=0.000174189
558.713912	  0.015067	diff=558.699
  0.051549	  0.051552	diff=2.34704e-06
558.696994	 -0.001842	diff=558.699
 -0.011091	 -0.011091	diff=3.19114e-07
  0.015534	  0.015530	diff=4.08925e-06
558.735141	  0.036306	diff=558.699
  0.173491	  0.173537	diff=4.53065e-05
  0.137634	  0.137435	diff=0.000199318
  local_diff=9497.88
# W_tgt_char{3}, [8 4]
 -0.179670	 -0.179726	diff=5.53995e-05
558.403877	 -0.295076	diff=558.699
  0.030271	  0.030273	diff=1.66403e-06
  0.090028	  0.090024	diff=4.56042e-06
558.574183	 -0.124677	diff=558.699
 -0.108119	 -0.108137	diff=1.75904e-05
  0.110262	  0.110119	diff=0.000143211
 -0.030135	 -0.030216	diff=8.03299e-05
558.555476	 -0.143395	diff=558.699
558.473735	 -0.225167	diff=558.699
558.724468	  0.025632	diff=558.699
558.763336	  0.064498	diff=558.699
 -0.097099	 -0.097114	diff=1.55321e-05
558.609348	 -0.089503	diff=558.699
558.828260	  0.129270	diff=558.699
 -0.013938	 -0.014046	diff=0.000108165
 -0.135398	 -0.135409	diff=1.05502e-05
558.403017	 -0.295890	diff=558.699
  0.030956	  0.030956	diff=1.8459e-07
558.756758	  0.057922	diff=558.699
 -0.093144	 -0.093147	diff=3.71205e-06
558.516801	 -0.182066	diff=558.699
  0.373221	  0.371534	diff=0.0016874
559.052747	  0.353733	diff=558.699
558.523841	 -0.175043	diff=558.699
558.364517	 -0.334438	diff=558.699
558.726074	  0.027239	diff=558.699
558.809003	  0.110160	diff=558.699
558.567241	 -0.131619	diff=558.699
558.583101	 -0.115739	diff=558.699
  0.073723	  0.073491	diff=0.000232156
558.746101	  0.047335	diff=558.699
  local_diff=10615.3
# W_emb_tgt_char, [2 5]
 -0.000057	 -0.000055	diff=2.53653e-06
  0.000015	  0.000015	diff=2.42566e-07
  0.000000	  0.000000	diff=2.84217e-12
558.698836	  0.000000	diff=558.699
558.022951	 -0.681236	diff=558.704
-11.990255	-14.851586	diff=2.86133
  0.000000	  0.000000	diff=1.57362e-09
558.698836	 -0.000000	diff=558.699
558.698836	 -0.000000	diff=558.699
558.698836	  0.000000	diff=558.699
  local_diff=2796.36
# W_a, [2 2]
557.842918	 -0.327676	diff=558.171
 -0.026489	 -0.024613	diff=0.00187613
559.124573	  0.261490	diff=558.863
  0.201460	  0.201465	diff=4.69714e-06
  local_diff=1117.04
# W_h, [2 4]
  0.609312	  0.632758	diff=0.0234455
  7.356639	  7.344937	diff=0.0117021
 -2.061175	 -2.083236	diff=0.022061
553.721176	 -6.426185	diff=560.147
558.160256	 -0.893380	diff=559.054
555.643107	 -3.167946	diff=558.811
-10.837219	-10.861125	diff=0.0239063
582.926215	 24.363641	diff=558.563
  local_diff=2236.66
# W_h_char, [2 4]
558.698836	  0.000000	diff=558.699
558.698833	 -0.000001	diff=558.699
558.698836	 -0.000000	diff=558.699
 -0.000002	 -0.000002	diff=1.1323e-07
558.698836	  0.000000	diff=558.699
558.698845	  0.000008	diff=558.699
 -0.000000	 -0.000000	diff=1.32644e-10
 -0.000002	 -0.000002	diff=1.17229e-08
  local_diff=2793.49
# W_soft, [5 2]
 -1.302495	 -1.311166	diff=0.0086712
559.935519	  1.160222	diff=558.775
 -3.139609	 -3.140869	diff=0.00126077
  2.810959	  2.803166	diff=0.00779269
559.210859	  0.488647	diff=558.722
565.834833	  6.690519	diff=559.144
  0.169480	  0.168814	diff=0.000665552
 -5.869449	 -5.870855	diff=0.00140591
558.046233	 -0.360705	diff=558.407
 -0.622100	 -0.627773	diff=0.00567281
  local_diff=2235.07
# W_soft_char, [5 2]
  0.315273	  0.315188	diff=8.5035e-05
  0.312545	  0.312444	diff=0.000101647
558.805960	  0.107045	diff=558.699
558.224643	 -0.474272	diff=558.699
558.438541	 -0.260405	diff=558.699
558.838772	  0.139861	diff=558.699
  0.508721	  0.508532	diff=0.000189444
 -0.040127	 -0.040225	diff=9.82051e-05
558.332774	 -0.366175	diff=558.699
 -0.241799	 -0.241992	diff=0.000192792
  local_diff=2793.5
# Num params=416, abs_diff=114628
Elapsed time is 14.098717 seconds.
[?1l>